"use strict";(self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[]).push([[126],{56992:(e,t,i)=>{i.d(t,{S:()=>r});var n=i(58691),o=i(24852),s=i(25158),l=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function l(e){try{c(n.next(e))}catch(t){s(t)}}function r(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(l,r)}c((n=n.apply(e,t||[])).next())}))};class r{constructor(e,t){this.router=e,this.organizationService=t}canActivate(e,t){var i;return l(this,void 0,void 0,(function*(){const o=this.organizationService.get(e.params.organizationId),s=null===(i=e.data)||void 0===i?void 0:i.autoRedirectCallback;if(s){let e=s(o);return"string"==typeof e&&(e=[e]),this.router.createUrlTree([t.url,...e])}return(0,n.gW)(o)?this.router.createUrlTree(["/organizations",o.id]):this.router.createUrlTree(["/"])}))}}r.ɵfac=function(e){return new(e||r)(o.LFG(s.F0),o.LFG(n.Mn))},r.ɵprov=o.Yz7({token:r,factory:r.ɵfac,providedIn:"root"})},86126:(e,t,i)=>{i.r(t),i.d(t,{OrganizationModule:()=>tn});var n,o,s=i(18376),l=i(25158),r=i(78493),c=i(58691),a=i(47064),d=i(56992),u=i(35660),p=i(24852),h=i(54019),g=i(59554),m=i(80060),f=i(30359),b=i(33031),v=i(59260),w=i(59157),U=i(92786),_=i(68362),x=i(70032),Z=i(19887),A=i(5712),y=i(43493),C=i(77494),I=i(74524),T=i(28978),S=i(27646),q=i(65017),M=i(98645),J=i(92716),O=i(79596),N=i(25679),L=i(14309),z=i(55602),Y=i(80361),G=i(78627),F=i(78817),Q=i(99721),k=i(66459),D=i(19419),E=i(33245),$=i(62374),P=i(98205),R=i(46246),B=i(36338),H=i(81974),j=i(29465),K=i(18362),V=i(24637),W=i(11512),X=i(36179),ee=i(44358),te=i(21656),ie=i(17731),ne=i(26536),oe=i(36689),se=i(82933),le=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function l(e){try{c(n.next(e))}catch(t){s(t)}}function r(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(l,r)}c((n=n.apply(e,t||[])).next())}))};function re(e,t){if(1&e&&(p.TgZ(0,"span",11),p._uU(1),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Oqu(null==e.group?null:e.group.name)}}function ce(e,t){1&e&&(p.TgZ(0,"div"),p._uU(1,"\n        "),p._UZ(2,"i",12),p.ALo(3,"i18n"),p._uU(4,"\n        "),p.TgZ(5,"span",13),p._uU(6),p.ALo(7,"i18n"),p.qZA(),p._uU(8,"\n      "),p.qZA()),2&e&&(p.xp6(2),p.s9C("title",p.lcZ(3,2,"loading")),p.xp6(4),p.Oqu(p.lcZ(7,4,"loading")))}function ae(e,t){if(1&e&&(p.ynx(0),p._uU(1,"\n            "),p._UZ(2,"bit-access-selector",23),p.ALo(3,"i18n"),p.ALo(4,"i18n"),p.ALo(5,"i18n"),p._uU(6,"\n          "),p.BQk()),2&e){const e=p.oxw(2);p.xp6(2),p.Q6J("items",e.collections)("permissionMode",e.PermissionMode.Edit)("columnHeader",p.lcZ(3,5,"collection"))("selectorLabelText",p.lcZ(4,7,"selectCollections"))("emptySelectionText",p.lcZ(5,9,"noCollectionsAdded"))}}function de(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"bit-tab-group",14),p.NdJ("selectedIndexChange",(function(t){p.CHM(e);const i=p.oxw();return p.KtG(i.tabIndex=t)})),p._uU(1,"\n        "),p.TgZ(2,"bit-tab",15),p.ALo(3,"i18n"),p._uU(4,"\n          "),p.TgZ(5,"bit-form-field"),p._uU(6,"\n            "),p.TgZ(7,"bit-label"),p._uU(8),p.ALo(9,"i18n"),p.qZA(),p._uU(10,"\n            "),p._UZ(11,"input",16),p._uU(12,"\n            "),p.TgZ(13,"bit-hint"),p._uU(14),p.ALo(15,"i18n"),p.qZA(),p._uU(16,"\n          "),p.qZA(),p._uU(17,"\n          "),p.TgZ(18,"bit-form-field"),p._uU(19,"\n            "),p.TgZ(20,"bit-label"),p._uU(21),p.ALo(22,"i18n"),p.qZA(),p._uU(23,"\n            "),p._UZ(24,"input",17),p._uU(25,"\n            "),p.TgZ(26,"bit-hint"),p._uU(27),p.ALo(28,"i18n"),p.qZA(),p._uU(29,"\n          "),p.qZA(),p._uU(30,"\n        "),p.qZA(),p._uU(31,"\n\n        "),p.TgZ(32,"bit-tab",15),p.ALo(33,"i18n"),p._uU(34,"\n          "),p.TgZ(35,"p"),p._uU(36),p.ALo(37,"i18n"),p.qZA(),p._uU(38,"\n          "),p._UZ(39,"bit-access-selector",18),p.ALo(40,"i18n"),p.ALo(41,"i18n"),p.ALo(42,"i18n"),p._uU(43,"\n        "),p.qZA(),p._uU(44,"\n\n        "),p.TgZ(45,"bit-tab",15),p.ALo(46,"i18n"),p._uU(47,"\n          "),p.TgZ(48,"p"),p._uU(49),p.ALo(50,"i18n"),p.qZA(),p._uU(51,"\n          "),p.TgZ(52,"div",19),p._uU(53,"\n            "),p._UZ(54,"input",20),p._uU(55,"\n            "),p.TgZ(56,"label",21),p._uU(57),p.ALo(58,"i18n"),p.qZA(),p._uU(59,"\n            "),p.TgZ(60,"p",22),p._uU(61),p.ALo(62,"i18n"),p.qZA(),p._uU(63,"\n          "),p.qZA(),p._uU(64,"\n          "),p.YNc(65,ae,7,11,"ng-container",5),p._uU(66,"\n        "),p.qZA(),p._uU(67,"\n      "),p.qZA()}if(2&e){const e=p.oxw();p.Q6J("selectedIndex",e.tabIndex),p.xp6(2),p.s9C("label",p.lcZ(3,19,"groupInfo")),p.xp6(6),p.Oqu(p.lcZ(9,21,"name")),p.xp6(6),p.Oqu(p.xi3(15,23,"characterMaximum",100)),p.xp6(7),p.Oqu(p.lcZ(22,26,"externalId")),p.xp6(6),p.Oqu(p.lcZ(28,28,"externalIdDesc")),p.xp6(5),p.s9C("label",p.lcZ(33,30,"members")),p.xp6(4),p.Oqu(p.lcZ(37,32,"editGroupMembersDesc")),p.xp6(3),p.Q6J("items",e.members)("showMemberRoles",!0)("permissionMode",e.PermissionMode.Hidden)("columnHeader",p.lcZ(40,34,"member"))("selectorLabelText",p.lcZ(41,36,"selectMembers"))("emptySelectionText",p.lcZ(42,38,"noMembersAdded")),p.xp6(6),p.s9C("label",p.lcZ(46,40,"collections")),p.xp6(4),p.Oqu(p.lcZ(50,42,"editGroupCollectionsDesc")),p.xp6(8),p.Oqu(p.lcZ(58,44,"accessAllCollectionsDesc")),p.xp6(4),p.Oqu(p.lcZ(62,46,"accessAllCollectionsHelp")),p.xp6(4),p.Q6J("ngIf",!e.groupForm.value.accessAll)}}!function(e){e[e.Info=0]="Info",e[e.Members=1]="Members",e[e.Collections=2]="Collections"}(n||(n={})),function(e){e.Saved="saved",e.Canceled="canceled",e.Deleted="deleted"}(o||(o={}));class ue{get groupId(){return this.params.groupId}get organizationId(){return this.params.organizationId}get orgCollections$(){return(0,v.D)(this.apiService.getCollections(this.organizationId)).pipe((0,f.w)((e=>(0,v.D)(this.collectionService.decryptMany(e.data.map((e=>new T.F(new I.Z(e)))))))),(0,U.U)((e=>e.map((e=>({id:e.id,type:L.zD.Collection,labelName:e.name,listName:e.name}))))))}get orgMembers$(){return(0,v.D)(this.organizationUserService.getAllUsers(this.organizationId)).pipe((0,U.U)((e=>e.data.map((e=>{var t;return{id:e.id,type:L.zD.Member,email:e.email,role:e.type,listName:(null===(t=e.name)||void 0===t?void 0:t.length)>0?`${e.name} (${e.email})`:e.email,labelName:e.name||e.email,status:e.status}})))))}get groupDetails$(){return this.editMode?(0,b.a)([this.groupService.get(this.organizationId,this.groupId),this.apiService.getGroupUsers(this.organizationId,this.groupId)]).pipe((0,U.U)((([e,t])=>(e.members=t,e))),(0,O.K)((e=>(e instanceof N.i?this.logService.error(e.message):this.logService.error(e.toString()),(0,J.of)(void 0))))):(0,J.of)(void 0)}constructor(e,t,i,l,r,c,a,d,u,p,g,m){var f;this.params=e,this.dialogRef=t,this.apiService=i,this.organizationUserService=l,this.groupService=r,this.i18nService=c,this.collectionService=a,this.platformUtilsService=d,this.logService=u,this.formBuilder=p,this.changeDetectorRef=g,this.dialogService=m,this.PermissionMode=L.R9,this.ResultType=o,this.loading=!0,this.editMode=!1,this.collections=[],this.members=[],this.groupForm=this.formBuilder.group({accessAll:[!1],name:["",[M.kI.required,M.kI.maxLength(100)]],externalId:this.formBuilder.control({value:"",disabled:!0}),members:[[]],collections:[[]]}),this.destroy$=new h.x,this.submit=()=>le(this,void 0,void 0,(function*(){var e,t;if(this.groupForm.markAllAsTouched(),this.groupForm.invalid)return void(this.tabIndex!==n.Info&&this.platformUtilsService.showToast("error",null,this.i18nService.t("fieldOnTabRequiresAttention",this.i18nService.t("groupInfo"))));const i=new s.Rq;i.id=this.groupId,i.organizationId=this.organizationId;const l=this.groupForm.value;i.name=l.name,i.accessAll=l.accessAll,i.members=null!==(t=null===(e=l.members)||void 0===e?void 0:e.map((e=>e.id)))&&void 0!==t?t:[],i.accessAll||(i.collections=l.collections.map((e=>(0,L.E2)(e)))),yield this.groupService.save(i),this.platformUtilsService.showToast("success",null,this.i18nService.t(this.editMode?"editedGroupId":"createdGroupId",l.name)),this.dialogRef.close(o.Saved)})),this.delete=()=>le(this,void 0,void 0,(function*(){if(!this.editMode)return;if(!(yield this.dialogService.openSimpleDialog({title:this.group.name,content:{key:"deleteGroupConfirmation"},type:y.rC.WARNING})))return!1;yield this.groupService.delete(this.organizationId,this.groupId),this.platformUtilsService.showToast("success",null,this.i18nService.t("deletedGroupId",this.group.name)),this.dialogRef.close(o.Deleted)})),this.tabIndex=null!==(f=e.initialTab)&&void 0!==f?f:n.Info}ngOnInit(){this.editMode=this.loading=null!=this.groupId,this.title=this.i18nService.t(this.editMode?"editGroup":"newGroup"),(0,b.a)([this.orgCollections$,this.orgMembers$,this.groupDetails$]).pipe((0,_.R)(this.destroy$)).subscribe((([e,t,i])=>{this.collections=e,this.members=t,this.group=i,null!=this.group&&(this.changeDetectorRef.detectChanges(),this.groupForm.patchValue({name:this.group.name,externalId:this.group.externalId,accessAll:this.group.accessAll,members:this.group.members.map((e=>({id:e,type:L.zD.Member}))),collections:this.group.collections.map((e=>({id:e.id,type:L.zD.Collection,permission:(0,L.d4)(e)})))})),this.loading=!1}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}ue.ɵfac=function(e){return new(e||ue)(p.Y36(q.Kt),p.Y36(q.zj),p.Y36(z.s),p.Y36(Y.t),p.Y36(s.lT),p.Y36(G.D),p.Y36(F.a),p.Y36(Q.P),p.Y36(k.$),p.Y36(M.qu),p.Y36(p.sBO),p.Y36(y.eo))},ue.ɵcmp=p.Xpm({type:ue,selectors:[["app-group-add-edit"]],decls:32,vars:18,consts:[[3,"formGroup","bitSubmit"],["dialogSize","large",3,"disablePadding"],["bitDialogTitle",""],["class","tw-text-sm tw-normal-case tw-text-muted",4,"ngIf"],["bitDialogContent",""],[4,"ngIf"],[3,"selectedIndex","selectedIndexChange",4,"ngIf"],["bitDialogFooter",""],["bitButton","","buttonType","primary","bitFormButton","","type","submit"],["bitButton","","buttonType","secondary","type","button","bitDialogClose","",3,"bit-dialog-close"],["type","button","buttonType","danger","bitIconButton","bwi-trash","bitFormButton","",1,"tw-ml-auto",3,"bitAction","appA11yTitle"],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[3,"selectedIndex","selectedIndexChange"],[3,"label"],["bitInput","","appAutofocus","","type","text","formControlName","name"],["bitInput","","type","text","formControlName","externalId"],["formControlName","members",3,"items","showMemberRoles","permissionMode","columnHeader","selectorLabelText","emptySelectionText"],[1,"tw-my-3"],["type","checkbox","formControlName","accessAll","id","accessAll"],["for","accessAll",1,"tw-mb-0","tw-text-lg"],[1,"tw-my-0","tw-text-muted"],["formControlName","collections",3,"items","permissionMode","columnHeader","selectorLabelText","emptySelectionText"]],template:function(e,t){1&e&&(p.TgZ(0,"form",0),p._uU(1,"\n  "),p.TgZ(2,"bit-dialog",1),p._uU(3,"\n    "),p.TgZ(4,"span",2),p._uU(5),p.YNc(6,re,2,1,"span",3),p._uU(7,"\n    "),p.qZA(),p._uU(8,"\n    "),p.TgZ(9,"div",4),p._uU(10,"\n      "),p.YNc(11,ce,9,6,"div",5),p._uU(12,"\n\n      "),p.YNc(13,de,68,48,"bit-tab-group",6),p._uU(14,"\n    "),p.qZA(),p._uU(15,"\n    "),p.ynx(16,7),p._uU(17,"\n      "),p.TgZ(18,"button",8),p._uU(19),p.ALo(20,"i18n"),p.qZA(),p._uU(21,"\n      "),p.TgZ(22,"button",9),p._uU(23),p.ALo(24,"i18n"),p.qZA(),p._uU(25,"\n      "),p._UZ(26,"button",10),p.ALo(27,"i18n"),p._uU(28,"\n    "),p.BQk(),p._uU(29,"\n  "),p.qZA(),p._uU(30,"\n"),p.qZA(),p._uU(31,"\n")),2&e&&(p.Q6J("formGroup",t.groupForm)("bitSubmit",t.submit),p.xp6(2),p.Q6J("disablePadding",!t.loading),p.xp6(3),p.hij("\n      ",t.title,"\n      "),p.xp6(1),p.Q6J("ngIf",t.editMode),p.xp6(5),p.Q6J("ngIf",t.loading),p.xp6(2),p.Q6J("ngIf",!t.loading),p.xp6(6),p.hij("\n        ",p.lcZ(20,12,"save"),"\n      "),p.xp6(3),p.Q6J("bit-dialog-close",t.ResultType.Canceled),p.xp6(1),p.hij("\n        ",p.lcZ(24,14,"cancel"),"\n      "),p.xp6(3),p.Q6J("bitAction",t.delete)("appA11yTitle",p.lcZ(27,16,"delete")))},dependencies:[D.O5,M._Y,M.Fj,M.Wl,M.JJ,M.JL,M.sg,M.u,E.B,$.U,P.Q,R.b,B.u,H.r,j.a,K.f,V.d,W.G,X.u,ee.M,te.Q,ie.Q,ne.i,oe.f,se.C],encapsulation:2});var pe=i(51430),he=i(56617),ge=i(1874),me=i(7172),fe=i(12492),be=i(73974),ve=i(26194),we=i(44234),Ue=i(54735),_e=i(50941),xe=i(26361),Ze=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function l(e){try{c(n.next(e))}catch(t){s(t)}}function r(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(l,r)}c((n=n.apply(e,t||[])).next())}))};const Ae=["addEdit"],ye=["usersTemplate"];function Ce(e,t){1&e&&(p.ynx(0),p._uU(1,"\n    "),p._UZ(2,"i",12),p.ALo(3,"i18n"),p._uU(4,"\n    "),p.TgZ(5,"span",4),p._uU(6),p.ALo(7,"i18n"),p.qZA(),p._uU(8,"\n  "),p.BQk()),2&e&&(p.xp6(2),p.s9C("title",p.lcZ(3,2,"loading")),p.xp6(4),p.Oqu(p.lcZ(7,4,"loading")))}function Ie(e,t){1&e&&(p.TgZ(0,"p"),p._uU(1),p.ALo(2,"i18n"),p.qZA()),2&e&&(p.xp6(1),p.Oqu(p.lcZ(2,1,"noGroupsInList")))}function Te(e,t){if(1&e&&p._UZ(0,"bit-badge-list",38),2&e){const e=p.oxw().$implicit;p.Q6J("items",e.collectionNames)("maxItems",3)}}function Se(e,t){1&e&&(p.TgZ(0,"span"),p._uU(1),p.ALo(2,"i18n"),p.qZA()),2&e&&(p.xp6(1),p.Oqu(p.lcZ(2,1,"all")))}function qe(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"tr",28),p._uU(1,"\n          "),p.TgZ(2,"td",29),p.NdJ("click",(function(){const t=p.CHM(e).$implicit,i=p.oxw(4);return p.KtG(i.check(t))})),p._uU(3,"\n            "),p.TgZ(4,"input",30),p.NdJ("ngModelChange",(function(t){const i=p.CHM(e).$implicit;return p.KtG(i.checked=t)})),p.qZA(),p._uU(5,"\n          "),p.qZA(),p._uU(6,"\n          "),p.TgZ(7,"td",31),p.NdJ("click",(function(){const t=p.CHM(e).$implicit,i=p.oxw(4);return p.KtG(i.edit(t))})),p._uU(8,"\n            "),p.TgZ(9,"button",32),p._uU(10),p.qZA(),p._uU(11,"\n          "),p.qZA(),p._uU(12,"\n          "),p.TgZ(13,"td",29),p.NdJ("click",(function(){const t=p.CHM(e).$implicit,i=p.oxw(4);return p.KtG(i.edit(t,i.ModalTabType.Collections))})),p._uU(14,"\n            "),p.YNc(15,Te,1,2,"bit-badge-list",33),p._uU(16,"\n            "),p.YNc(17,Se,3,3,"span",10),p._uU(18,"\n          "),p.qZA(),p._uU(19,"\n          "),p.TgZ(20,"td",19),p._uU(21,"\n            "),p._UZ(22,"button",21),p.ALo(23,"i18n"),p._uU(24,"\n\n            "),p.TgZ(25,"bit-menu",null,34),p._uU(27,"\n              "),p.TgZ(28,"button",23),p.NdJ("click",(function(){const t=p.CHM(e).$implicit,i=p.oxw(4);return p.KtG(i.edit(t))})),p._uU(29,"\n                "),p._UZ(30,"i",35),p._uU(31),p.ALo(32,"i18n"),p.qZA(),p._uU(33,"\n              "),p.TgZ(34,"button",23),p.NdJ("click",(function(){const t=p.CHM(e).$implicit,i=p.oxw(4);return p.KtG(i.edit(t,i.ModalTabType.Members))})),p._uU(35,"\n                "),p._UZ(36,"i",36),p._uU(37),p.ALo(38,"i18n"),p.qZA(),p._uU(39,"\n              "),p.TgZ(40,"button",23),p.NdJ("click",(function(){const t=p.CHM(e).$implicit,i=p.oxw(4);return p.KtG(i.edit(t,i.ModalTabType.Collections))})),p._uU(41,"\n                "),p._UZ(42,"i",37),p._uU(43),p.ALo(44,"i18n"),p.qZA(),p._uU(45,"\n              "),p.TgZ(46,"button",23),p.NdJ("click",(function(){const t=p.CHM(e).$implicit,i=p.oxw(4);return p.KtG(i.delete(t))})),p._uU(47,"\n                "),p.TgZ(48,"span",24),p._UZ(49,"i",25),p._uU(50),p.ALo(51,"i18n"),p.qZA(),p._uU(52,"\n              "),p.qZA(),p._uU(53,"\n            "),p.qZA(),p._uU(54,"\n          "),p.qZA(),p._uU(55,"\n        "),p.qZA()}if(2&e){const e=t.$implicit,i=p.MAs(26);p.xp6(4),p.Q6J("ngModel",e.checked),p.xp6(6),p.hij("\n              ",e.details.name,"\n            "),p.xp6(5),p.Q6J("ngIf",!e.details.accessAll),p.xp6(2),p.Q6J("ngIf",e.details.accessAll),p.xp6(5),p.s9C("appA11yTitle",p.lcZ(23,10,"options")),p.Q6J("bitMenuTriggerFor",i),p.xp6(9),p.hij(" ",p.lcZ(32,12,"editInfo"),"\n              "),p.xp6(6),p.hij(" ",p.lcZ(38,14,"members"),"\n              "),p.xp6(6),p.hij(" ",p.lcZ(44,16,"collections"),"\n              "),p.xp6(7),p.hij(" ",p.lcZ(51,18,"delete"),"")}}function Me(e,t){if(1&e&&(p._uU(0,"\n        "),p.YNc(1,qe,56,20,"tr",27),p._uU(2,"\n      ")),2&e){const e=p.oxw(3);p.xp6(1),p.Q6J("ngForOf",e.visibleGroups)}}function Je(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"bit-table",14),p.NdJ("scrolled",(function(){p.CHM(e);const t=p.oxw(2);return p.KtG(t.loadMore())})),p._uU(1,"\n      "),p.ynx(2,15),p._uU(3,"\n        "),p.TgZ(4,"tr"),p._uU(5,"\n          "),p.TgZ(6,"th",16),p._uU(7,"\n            "),p.TgZ(8,"input",17),p.NdJ("change",(function(t){p.CHM(e);const i=p.oxw(2);return p.KtG(i.toggleAllVisible(t))})),p.qZA(),p._uU(9,"\n            "),p.TgZ(10,"label",18),p._uU(11),p.ALo(12,"i18n"),p.qZA(),p._uU(13,"\n          "),p.qZA(),p._uU(14,"\n          "),p.TgZ(15,"th",19),p._uU(16),p.ALo(17,"i18n"),p.qZA(),p._uU(18,"\n          "),p.TgZ(19,"th",19),p._uU(20),p.ALo(21,"i18n"),p.qZA(),p._uU(22,"\n          "),p.TgZ(23,"th",20),p._uU(24,"\n            "),p._UZ(25,"button",21),p.ALo(26,"i18n"),p._uU(27,"\n\n            "),p.TgZ(28,"bit-menu",null,22),p._uU(30,"\n              "),p.TgZ(31,"button",23),p.NdJ("click",(function(){p.CHM(e);const t=p.oxw(2);return p.KtG(t.deleteAllSelected())})),p._uU(32,"\n                "),p.TgZ(33,"span",24),p._UZ(34,"i",25),p._uU(35),p.ALo(36,"i18n"),p.qZA(),p._uU(37,"\n              "),p.qZA(),p._uU(38,"\n            "),p.qZA(),p._uU(39,"\n          "),p.qZA(),p._uU(40,"\n        "),p.qZA(),p._uU(41,"\n      "),p.BQk(),p._uU(42,"\n      "),p.YNc(43,Me,3,1,"ng-template",26),p._uU(44,"\n    "),p.qZA()}if(2&e){const e=p.MAs(29),t=p.oxw(2);p.Q6J("infiniteScrollDistance",1)("infiniteScrollDisabled",!t.isPaging()),p.xp6(11),p.Oqu(p.lcZ(12,8,"all")),p.xp6(5),p.Oqu(p.lcZ(17,10,"name")),p.xp6(4),p.Oqu(p.lcZ(21,12,"collections")),p.xp6(5),p.s9C("appA11yTitle",p.lcZ(26,14,"options")),p.Q6J("bitMenuTriggerFor",e),p.xp6(10),p.hij(" ",p.lcZ(36,16,"delete"),"")}}function Oe(e,t){if(1&e&&(p.ynx(0),p._uU(1,"\n    "),p.YNc(2,Ie,3,3,"p",10),p._uU(3,"\n    "),p.YNc(4,Je,45,18,"bit-table",13),p._uU(5,"\n  "),p.BQk()),2&e){const e=p.oxw();p.xp6(2),p.Q6J("ngIf",!e.visibleGroups.length),p.xp6(2),p.Q6J("ngIf",e.visibleGroups.length)}}function Ne(e,t){}class Le{get searchText(){return this._searchText}set searchText(e){this._searchText=e,this.updateSearchedGroups()}get visibleGroups(){return this.isPaging()?this.pagedGroups:this.isSearching()?this.searchedGroups:this.groups}constructor(e,t,i,o,s,l,r,c,a,d,u){this.apiService=e,this.groupService=t,this.route=i,this.i18nService=o,this.modalService=s,this.dialogService=l,this.platformUtilsService=r,this.searchService=c,this.logService=a,this.collectionService=d,this.searchPipe=u,this.loading=!0,this.didScroll=!1,this.pageSize=100,this.ModalTabType=n,this.pagedGroupsCount=0,this.destroy$=new h.x,this.refreshGroups$=new g.X(null)}ngOnInit(){return Ze(this,void 0,void 0,(function*(){this.route.params.pipe((0,m.b)((e=>this.organizationId=e.organizationId)),(0,f.w)((()=>(0,b.a)([(0,v.D)(this.apiService.getCollections(this.organizationId)).pipe((0,w.b)((e=>this.toCollectionMap(e)))),this.refreshGroups$.pipe((0,f.w)((()=>this.groupService.getAll(this.organizationId))))]))),(0,U.U)((([e,t])=>t.sort(S.c.getSortFunction(this.i18nService,"name")).map((t=>{var i;return{id:t.id,name:t.name,details:t,checked:!1,collectionNames:t.collections.map((t=>{var i;return null===(i=e[t.id])||void 0===i?void 0:i.name})).sort(null===(i=this.i18nService.collator)||void 0===i?void 0:i.compare)}})))),(0,_.R)(this.destroy$)).subscribe((e=>{this.groups=e,this.resetPaging(),this.updateSearchedGroups(),this.loading=!1})),this.route.queryParams.pipe((0,Z.P)(),(0,w.b)((e=>Ze(this,void 0,void 0,(function*(){this.searchText=e.search})))),(0,_.R)(this.destroy$)).subscribe()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadMore(){if(!this.groups||this.groups.length<=this.pageSize)return;const e=this.pagedGroups.length;let t=this.pageSize;0===e&&this.pagedGroupsCount>this.pageSize&&(t=this.pagedGroupsCount),this.groups.length>e&&(this.pagedGroups=this.pagedGroups.concat(this.groups.slice(e,e+t))),this.pagedGroupsCount=this.pagedGroups.length,this.didScroll=this.pagedGroups.length>this.pageSize}edit(e,t=n.Info){return Ze(this,void 0,void 0,(function*(){const i=(n=this.dialogService,s={data:{initialTab:t,organizationId:this.organizationId,groupId:null!=e?e.details.id:null}},n.open(ue,s));var n,s;const l=yield(0,x.n)(i.closed);l==o.Saved?this.refreshGroups$.next():l==o.Deleted&&this.removeGroup(e.details.id)}))}add(){this.edit(null)}delete(e){return Ze(this,void 0,void 0,(function*(){if(!(yield this.dialogService.openSimpleDialog({title:e.details.name,content:{key:"deleteGroupConfirmation"},type:y.rC.WARNING})))return!1;try{yield this.groupService.delete(this.organizationId,e.details.id),this.platformUtilsService.showToast("success",null,this.i18nService.t("deletedGroupId",e.details.name)),this.removeGroup(e.details.id)}catch(t){this.logService.error(t)}}))}deleteAllSelected(){return Ze(this,void 0,void 0,(function*(){const e=this.groups.filter((e=>e.checked));if(0==e.length)return;const t=e.map((e=>e.details.name)).join(", ");if(!(yield this.dialogService.openSimpleDialog({title:{key:"deleteMultipleGroupsConfirmation",placeholders:[e.length.toString()]},content:t,type:y.rC.WARNING})))return!1;try{yield this.groupService.deleteMany(this.organizationId,e.map((e=>e.details.id))),this.platformUtilsService.showToast("success",null,this.i18nService.t("deletedManyGroups",e.length.toString())),e.forEach((e=>this.removeGroup(e.details.id)))}catch(i){this.logService.error(i)}}))}resetPaging(){this.pagedGroups=[],this.loadMore()}isSearching(){return this.searchService.isSearchable(this.searchText)}check(e){e.checked=!e.checked}toggleAllVisible(e){this.visibleGroups.forEach((t=>t.checked=e.target.checked))}isPaging(){const e=this.isSearching();return e&&this.didScroll&&this.resetPaging(),!e&&this.groups&&this.groups.length>this.pageSize}removeGroup(e){const t=this.groups.findIndex((t=>t.details.id===e));t>-1&&(this.groups.splice(t,1),this.resetPaging(),this.updateSearchedGroups())}toCollectionMap(e){return Ze(this,void 0,void 0,(function*(){const t=e.data.map((e=>new T.F(new I.Z(e)))),i=yield this.collectionService.decryptMany(t),n={};return i.forEach((e=>n[e.id]=e)),n}))}updateSearchedGroups(){this.searchService.isSearchable(this.searchText)&&(this.searchedGroups=this.searchPipe.transform(this.groups,this.searchText,(e=>e.details.name),(e=>e.details.id)))}}Le.ɵfac=function(e){return new(e||Le)(p.Y36(z.s),p.Y36(s.lT),p.Y36(l.gz),p.Y36(G.D),p.Y36(C.Z),p.Y36(y.eo),p.Y36(Q.P),p.Y36(pe.o),p.Y36(k.$),p.Y36(F.a),p.Y36(A.C))},Le.ɵcmp=p.Xpm({type:Le,selectors:[["app-org-groups"]],viewQuery:function(e,t){if(1&e&&(p.Gf(Ae,7,p.s_b),p.Gf(ye,7,p.s_b)),2&e){let e;p.iGM(e=p.CRH())&&(t.addEditModalRef=e.first),p.iGM(e=p.CRH())&&(t.usersModalRef=e.first)}},decls:41,vars:15,consts:[[1,"container","page-content"],[1,"tw-mb-4","tw-flex"],[1,"tw-ml-auto","tw-flex","tw-items-center"],[1,"tw-mr-2"],[1,"sr-only"],[1,"tw-flex","tw-items-center"],["aria-hidden","true",1,"bwi","bwi-search","bwi-fw","tw-z-20","-tw-mr-7","tw-text-muted"],["bitInput","","type","search",1,"tw-rounded-l","tw-pl-9",3,"placeholder","ngModel","ngModelChange"],["bitButton","","type","button","buttonType","primary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],[4,"ngIf"],["addEdit",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],["infinite-scroll","",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled",4,"ngIf"],["infinite-scroll","",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled"],["header",""],["bitCell","",1,"tw-w-20"],["type","checkbox","bitCheckbox","","id","selectAll",1,"tw-mr-2",3,"change"],["for","selectAll",1,"tw-mb-0","!tw-font-bold","!tw-text-muted"],["bitCell",""],["bitCell","",1,"tw-w-10"],["type","button","bitIconButton","bwi-ellipsis-v","size","small",3,"bitMenuTriggerFor","appA11yTitle"],["headerMenu",""],["type","button","bitMenuItem","",3,"click"],[1,"tw-text-danger"],["aria-hidden","true",1,"bwi","bwi-trash"],["body",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell","",1,"tw-cursor-pointer",3,"click"],["type","checkbox","bitCheckbox","",3,"ngModel","ngModelChange"],["bitCell","",1,"tw-cursor-pointer","tw-font-bold",3,"click"],["type","button","bitLink",""],["badgeType","secondary",3,"items","maxItems",4,"ngIf"],["rowMenu",""],["aria-hidden","true",1,"bwi","bwi-pencil-square"],["aria-hidden","true",1,"bwi","bwi-user"],["aria-hidden","true",1,"bwi","bwi-collection"],["badgeType","secondary",3,"items","maxItems"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p._uU(1,"\n  "),p.TgZ(2,"div",1),p._uU(3,"\n    "),p.TgZ(4,"h1"),p._uU(5),p.ALo(6,"i18n"),p.qZA(),p._uU(7,"\n    "),p.TgZ(8,"div",2),p._uU(9,"\n      "),p.TgZ(10,"div",3),p._uU(11,"\n        "),p.TgZ(12,"label",4),p._uU(13),p.ALo(14,"i18n"),p.qZA(),p._uU(15,"\n        "),p.TgZ(16,"div",5),p._uU(17,"\n          "),p._UZ(18,"i",6),p._uU(19,"\n          "),p.TgZ(20,"input",7),p.NdJ("ngModelChange",(function(e){return t.searchText=e})),p.ALo(21,"i18n"),p.qZA(),p._uU(22,"\n        "),p.qZA(),p._uU(23,"\n      "),p.qZA(),p._uU(24,"\n      "),p.TgZ(25,"button",8),p.NdJ("click",(function(){return t.add()})),p._uU(26,"\n        "),p._UZ(27,"i",9),p._uU(28),p.ALo(29,"i18n"),p.qZA(),p._uU(30,"\n    "),p.qZA(),p._uU(31,"\n  "),p.qZA(),p._uU(32,"\n  "),p.YNc(33,Ce,9,6,"ng-container",10),p._uU(34,"\n  "),p.YNc(35,Oe,6,2,"ng-container",10),p._uU(36,"\n  "),p.YNc(37,Ne,0,0,"ng-template",null,11,p.W1O),p._uU(39,"\n"),p.qZA(),p._uU(40,"\n")),2&e&&(p.xp6(5),p.Oqu(p.lcZ(6,7,"groups")),p.xp6(8),p.Oqu(p.lcZ(14,9,"search")),p.xp6(7),p.s9C("placeholder",p.lcZ(21,11,"searchGroups")),p.Q6J("ngModel",t.searchText),p.xp6(8),p.hij("\n        ",p.lcZ(29,13,"newGroup"),"\n      "),p.xp6(5),p.Q6J("ngIf",t.loading),p.xp6(2),p.Q6J("ngIf",!t.loading&&t.visibleGroups))},dependencies:[D.sg,D.O5,M.Fj,M.Wl,M.JJ,M.On,he.Ry,E.B,ge.b,H.r,me.b,W.G,te.Q,fe._,be.M,ve.t,we.e,Ue.a,_e.Y,xe.v,Ue.f,se.C],encapsulation:2});var ze=i(40857),Ye=i(99817),Ge=i(27406),Fe=i(63391),Qe=i(21151),ke=i(29176),De=i(16857),Ee=i(11667),$e=i(75028),Pe=i(98913),Re=i(56110),Be=i(38003),He=i(72530),je=i(23031),Ke=i(92236),Ve=i(83924),We=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function l(e){try{c(n.next(e))}catch(t){s(t)}}function r(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(l,r)}c((n=n.apply(e,t||[])).next())}))};class Xe extends He.n{constructor(e,t,i,n,o,s,l){super(e,t,i,n,o,s),this.collectionAdminService=l,this.destroy$=new h.x,this._collections=new Re.t(1),this.filteredCollections$=this._collections.asObservable(),this.collectionTree$=this.filteredCollections$.pipe((0,U.U)((e=>this.buildCollectionTree(e))))}reloadCollections(e){return We(this,void 0,void 0,(function*(){this._collections.next(e)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}Xe.ɵfac=function(e){return new(e||Xe)(p.LFG(Be.b2),p.LFG(c.Mn),p.LFG(je.s),p.LFG(Ke.u),p.LFG(Ve.d),p.LFG(G.D),p.LFG(s.m$))},Xe.ɵprov=p.Yz7({token:Xe,factory:Xe.ɵfac});class et{}et.ɵfac=function(e){return new(e||et)},et.ɵmod=p.oAB({type:et}),et.ɵinj=p.cJS({providers:[{provide:$e.n,useClass:Xe}],imports:[Pe.d]});var tt=i(99042),it=i(67775),nt=i(72591),ot=i(84598),st=i(27027),lt=i(82083),rt=i(57673),ct=i(72285),at=i(83505),dt=i(33287),ut=i(13544),pt=i(27643),ht=i(59673),gt=i(84879),mt=i(37417),ft=i(95638),bt=i(4003),vt=i(16776),wt=i(75230),Ut=i(24415),_t=i(61265),xt=i(19572),Zt=i(77140),At=i(76528),yt=i(58172),Ct=i(53481),It=i(24610),Tt=i(2051),St=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function l(e){try{c(n.next(e))}catch(t){s(t)}}function r(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(l,r)}c((n=n.apply(e,t||[])).next())}))};function qt(e,t){if(1&e&&(p.TgZ(0,"small"),p._uU(1),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Oqu(e.cipher.name)}}function Mt(e,t){1&e&&p._UZ(0,"i",24)}function Jt(e,t){1&e&&p._UZ(0,"i",25)}function Ot(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",26),p._uU(1,"\n                    "),p.TgZ(2,"a",27),p._uU(3,"\n                      "),p._UZ(4,"i",28),p.ALo(5,"i18n"),p._uU(6,"\n                      "),p.TgZ(7,"span",29),p._uU(8),p.ALo(9,"i18n"),p.qZA()(),p._uU(10,"\n                    "),p.TgZ(11,"button",30,31),p.NdJ("click",(function(){p.CHM(e);const t=p.oxw().$implicit,i=p.oxw(2);return p.KtG(i.reupload(t))})),p._uU(13),p.ALo(14,"i18n"),p.qZA(),p._uU(15,"\n                  "),p.qZA()}if(2&e){const e=p.MAs(12),t=p.oxw().$implicit,i=p.oxw(2);p.xp6(4),p.s9C("title",p.lcZ(5,5,"attachmentFixDesc")),p.xp6(4),p.Oqu(p.lcZ(9,7,"attachmentFixDesc")),p.xp6(3),p.Q6J("appApiAction",i.reuploadPromises[t.id])("disabled",e.loading),p.xp6(2),p.hij("\n                      ",p.lcZ(14,9,"fix"),"\n                    ")}}function Nt(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"td",32),p._uU(1,"\n                "),p.TgZ(2,"button",33,34),p.NdJ("click",(function(){p.CHM(e);const t=p.oxw().$implicit,i=p.oxw(2);return p.KtG(i.delete(t))})),p.ALo(4,"i18n"),p._uU(5,"\n                  "),p._UZ(6,"i",35),p._uU(7,"\n                  "),p._UZ(8,"i",36),p.ALo(9,"i18n"),p._uU(10,"\n                "),p.qZA(),p._uU(11,"\n              "),p.qZA()}if(2&e){const e=p.MAs(3),t=p.oxw().$implicit,i=p.oxw(2);p.xp6(2),p.s9C("appA11yTitle",p.lcZ(4,6,"delete")),p.Q6J("appApiAction",i.deletePromises[t.id])("disabled",e.loading),p.xp6(4),p.Q6J("hidden",e.loading),p.xp6(2),p.s9C("title",p.lcZ(9,8,"loading")),p.Q6J("hidden",!e.loading)}}function Lt(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"tr"),p._uU(1,"\n              "),p.TgZ(2,"td",16),p._uU(3,"\n                "),p.YNc(4,Mt,1,0,"i",17),p._uU(5,"\n                "),p.YNc(6,Jt,1,0,"i",18),p._uU(7,"\n              "),p.qZA(),p._uU(8,"\n              "),p.TgZ(9,"td",19),p._uU(10,"\n                "),p.TgZ(11,"div",20),p._uU(12,"\n                  "),p.TgZ(13,"a",21),p.NdJ("click",(function(){const t=p.CHM(e).$implicit,i=p.oxw(2);return p.KtG(i.download(t))})),p._uU(14),p.qZA(),p._uU(15,"\n                  "),p.YNc(16,Ot,16,11,"div",22),p._uU(17,"\n                "),p.qZA(),p._uU(18,"\n                "),p.TgZ(19,"small"),p._uU(20),p.qZA(),p._uU(21,"\n              "),p.qZA(),p._uU(22,"\n              "),p.YNc(23,Nt,12,10,"td",23),p._uU(24,"\n            "),p.qZA()}if(2&e){const e=t.$implicit,i=p.oxw(2);p.xp6(4),p.Q6J("ngIf",!e.downloading),p.xp6(2),p.Q6J("ngIf",e.downloading),p.xp6(8),p.Oqu(e.fileName),p.xp6(2),p.Q6J("ngIf",i.showFixOldAttachments(e)),p.xp6(4),p.Oqu(e.sizeName),p.xp6(3),p.Q6J("ngIf",!i.viewOnly)}}function zt(e,t){if(1&e&&(p.TgZ(0,"table",14),p._uU(1,"\n          "),p.TgZ(2,"tbody"),p._uU(3,"\n            "),p.YNc(4,Lt,25,6,"tr",15),p._uU(5,"\n          "),p.qZA(),p._uU(6,"\n        "),p.qZA()),2&e){const e=p.oxw();p.xp6(4),p.Q6J("ngForOf",e.cipher.attachments)}}function Yt(e,t){1&e&&(p.TgZ(0,"div"),p._uU(1,"\n          "),p.TgZ(2,"h3"),p._uU(3),p.ALo(4,"i18n"),p.qZA(),p._uU(5,"\n          "),p.TgZ(6,"label",37),p._uU(7),p.ALo(8,"i18n"),p.qZA(),p._uU(9,"\n          "),p._UZ(10,"input",38),p._uU(11,"\n          "),p.TgZ(12,"small",39),p._uU(13),p.ALo(14,"i18n"),p.qZA(),p._uU(15,"\n        "),p.qZA()),2&e&&(p.xp6(3),p.Oqu(p.lcZ(4,3,"newAttachment")),p.xp6(4),p.Oqu(p.lcZ(8,5,"file")),p.xp6(6),p.Oqu(p.lcZ(14,7,"maxFileSize")))}function Gt(e,t){if(1&e&&(p.TgZ(0,"button",40),p._uU(1,"\n          "),p._UZ(2,"i",41),p.ALo(3,"i18n"),p._uU(4,"\n          "),p.TgZ(5,"span"),p._uU(6),p.ALo(7,"i18n"),p.qZA(),p._uU(8,"\n        "),p.qZA()),2&e){p.oxw();const e=p.MAs(5);p.Q6J("disabled",e.loading),p.xp6(2),p.s9C("title",p.lcZ(3,3,"loading")),p.xp6(4),p.Oqu(p.lcZ(7,5,"save"))}}class Ft extends Zt.t{constructor(e,t,i,n,o,s,l,r,c){super(e,t,i,n,o,s,l,r,c),this.viewOnly=!1}reupload(e){const t=Object.create(null,{reuploadCipherAttachment:{get:()=>super.reuploadCipherAttachment}});return St(this,void 0,void 0,(function*(){this.organization.canEditAnyCollection&&this.showFixOldAttachments(e)&&(yield t.reuploadCipherAttachment.call(this,e,!0))}))}loadCipher(){const e=Object.create(null,{loadCipher:{get:()=>super.loadCipher}});return St(this,void 0,void 0,(function*(){if(!this.organization.canEditAnyCollection)return yield e.loadCipher.call(this);const t=yield this.apiService.getCipherAdmin(this.cipherId);return new xt.t(new _t.O(t))}))}saveCipherAttachment(e){return this.cipherService.saveAttachmentWithServer(this.cipherDomain,e,this.organization.canEditAnyCollection)}deleteCipherAttachment(e){return this.organization.canEditAnyCollection?this.apiService.deleteCipherAttachmentAdmin(this.cipherId,e):super.deleteCipherAttachment(e)}showFixOldAttachments(e){return null==e.key&&this.organization.canEditAnyCollection}}Ft.ɵfac=function(e){return new(e||Ft)(p.Y36(Ke.u),p.Y36(G.D),p.Y36(At.$),p.Y36(yt.b),p.Y36(Q.P),p.Y36(z.s),p.Y36(k.$),p.Y36(Ct._),p.Y36(y.eo))},Ft.ɵcmp=p.Xpm({type:Ft,selectors:[["app-org-vault-attachments"]],features:[p.qOj],decls:42,vars:14,consts:[["role","dialog","aria-modal","true","aria-labelledby","attachmentsTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","attachmentsTitle",1,"modal-title"],[4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["class","table table-hover table-list",4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"table","table-hover","table-list"],[4,"ngFor","ngForOf"],[1,"table-list-icon"],["class","bwi bwi-fw bwi-lg bwi-file","aria-hidden","true",4,"ngIf"],["class","bwi bwi-spinner bwi-lg bwi-fw bwi-spin","aria-hidden","true",4,"ngIf"],[1,"wrap"],[1,"d-flex"],["href","#","appStopClick","",3,"click"],["class","ml-2",4,"ngIf"],["class","table-list-options",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-lg","bwi-file"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-lg","bwi-fw","bwi-spin"],[1,"ml-2"],["href","https://bitwarden.com/help/attachments/#fixing-old-attachments","target","_blank","rel","noopener"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle","text-warning",3,"title"],[1,"sr-only"],["type","button",1,"btn","btn-outline-primary","btn-sm","m-0","py-0","px-2",3,"appApiAction","disabled","click"],["reuploadBtn",""],[1,"table-list-options"],["type","button","appStopClick","",1,"btn","btn-outline-danger",3,"appA11yTitle","appApiAction","disabled","click"],["deleteBtn",""],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-lg","bwi-fw",3,"hidden","title"],["for","file",1,"sr-only"],["type","file","id","file","name","file","required","",1,"form-control-file"],[1,"form-text","text-muted"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p._uU(1,"\n  "),p.TgZ(2,"div",1),p._uU(3,"\n    "),p.TgZ(4,"form",2,3),p.NdJ("ngSubmit",(function(){return t.submit()})),p._uU(6,"\n      "),p.TgZ(7,"div",4),p._uU(8,"\n        "),p.TgZ(9,"h1",5),p._uU(10),p.ALo(11,"i18n"),p.YNc(12,qt,2,1,"small",6),p._uU(13,"\n        "),p.qZA(),p._uU(14,"\n        "),p.TgZ(15,"button",7),p.ALo(16,"i18n"),p._uU(17,"\n          "),p.TgZ(18,"span",8),p._uU(19,"×"),p.qZA(),p._uU(20,"\n        "),p.qZA(),p._uU(21,"\n      "),p.qZA(),p._uU(22,"\n      "),p.TgZ(23,"div",9),p._uU(24,"\n        "),p.YNc(25,zt,7,1,"table",10),p._uU(26,"\n        "),p.YNc(27,Yt,16,9,"div",6),p._uU(28,"\n      "),p.qZA(),p._uU(29,"\n      "),p.TgZ(30,"div",11),p._uU(31,"\n        "),p.YNc(32,Gt,9,7,"button",12),p._uU(33,"\n        "),p.TgZ(34,"button",13),p._uU(35),p.ALo(36,"i18n"),p.qZA(),p._uU(37,"\n      "),p.qZA(),p._uU(38,"\n    "),p.qZA(),p._uU(39,"\n  "),p.qZA(),p._uU(40,"\n"),p.qZA(),p._uU(41,"\n")),2&e&&(p.xp6(4),p.Q6J("appApiAction",t.formPromise),p.xp6(6),p.hij("\n          ",p.lcZ(11,8,"attachments"),"\n          "),p.xp6(2),p.Q6J("ngIf",t.cipher),p.xp6(3),p.s9C("appA11yTitle",p.lcZ(16,10,"close")),p.xp6(10),p.Q6J("ngIf",t.cipher&&t.cipher.hasAttachments),p.xp6(2),p.Q6J("ngIf",!t.viewOnly),p.xp6(5),p.Q6J("ngIf",!t.viewOnly),p.xp6(3),p.hij("\n          ",p.lcZ(36,12,"close"),"\n        "))},dependencies:[D.sg,D.O5,M.JL,M.F,E.B,It.b,Tt.O,se.C],encapsulation:2});var Qt=i(43898),kt=i(17475),Dt=i(12963),Et=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function l(e){try{c(n.next(e))}catch(t){s(t)}}function r(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(l,r)}c((n=n.apply(e,t||[])).next())}))};function $t(e,t){if(1&e&&(p.TgZ(0,"small"),p._uU(1),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Oqu(e.cipher.name)}}function Pt(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",17),p._uU(1,"\n            "),p.TgZ(2,"button",18),p.NdJ("click",(function(){p.CHM(e);const t=p.oxw();return p.KtG(t.selectAll(!0))})),p._uU(3),p.ALo(4,"i18n"),p.qZA(),p._uU(5,"\n            "),p.TgZ(6,"button",18),p.NdJ("click",(function(){p.CHM(e);const t=p.oxw();return p.KtG(t.selectAll(!1))})),p._uU(7),p.ALo(8,"i18n"),p.qZA(),p._uU(9,"\n          "),p.qZA()}2&e&&(p.xp6(3),p.hij("\n              ",p.lcZ(4,2,"selectAll"),"\n            "),p.xp6(4),p.hij("\n              ",p.lcZ(8,4,"unselectAll"),"\n            "))}function Rt(e,t){1&e&&(p.TgZ(0,"div"),p._uU(1),p.ALo(2,"i18n"),p.qZA()),2&e&&(p.xp6(1),p.hij("\n          ",p.lcZ(2,1,"noCollectionsInList"),"\n        "))}function Bt(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"tr",21),p.NdJ("click",(function(){const t=p.CHM(e).$implicit,i=p.oxw(2);return p.KtG(i.check(t))})),p._uU(1,"\n              "),p.TgZ(2,"td",22),p._uU(3,"\n                "),p.TgZ(4,"input",23),p.NdJ("ngModelChange",(function(t){const i=p.CHM(e).$implicit;return p.KtG(i.checked=t)})),p.qZA(),p._uU(5,"\n              "),p.qZA(),p._uU(6,"\n              "),p.TgZ(7,"td"),p._uU(8),p.qZA(),p._uU(9,"\n            "),p.qZA()}if(2&e){const e=t.$implicit,i=t.index;p.xp6(4),p.MGl("name","Collection[",i,"].Checked"),p.Q6J("ngModel",e.checked),p.xp6(4),p.hij("\n                ",e.name,"\n              ")}}function Ht(e,t){if(1&e&&(p.TgZ(0,"table",19),p._uU(1,"\n          "),p.TgZ(2,"tbody"),p._uU(3,"\n            "),p.YNc(4,Bt,10,3,"tr",20),p._uU(5,"\n          "),p.qZA(),p._uU(6,"\n        "),p.qZA()),2&e){const e=p.oxw();p.xp6(4),p.Q6J("ngForOf",e.collections)}}class jt extends kt.U{constructor(e,t,i,n,o,s){super(e,t,i,n,s),this.apiService=o,this.allowSelectNone=!0}loadCipher(){const e=Object.create(null,{loadCipher:{get:()=>super.loadCipher}});return Et(this,void 0,void 0,(function*(){if(!this.organization.canViewAllCollections)return yield e.loadCipher.call(this);const t=yield this.apiService.getCipherAdmin(this.cipherId);return new xt.t(new _t.O(t))}))}loadCipherCollections(){return this.organization.canViewAllCollections?this.collectionIds:super.loadCipherCollections()}loadCollections(){return this.organization.canViewAllCollections?Promise.resolve(this.collections):super.loadCollections()}saveCollections(){if(this.organization.canEditAnyCollection){const e=new Qt.L(this.cipherDomain.collectionIds);return this.apiService.putCipherCollectionsAdmin(this.cipherId,e)}return super.saveCollections()}}jt.ɵfac=function(e){return new(e||jt)(p.Y36(F.a),p.Y36(Q.P),p.Y36(G.D),p.Y36(Ke.u),p.Y36(z.s),p.Y36(k.$))},jt.ɵcmp=p.Xpm({type:jt,selectors:[["app-org-vault-collections"]],features:[p.qOj],decls:63,vars:27,consts:[["role","dialog","aria-modal","true","aria-labelledby","collectionsTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","collectionsTitle",1,"modal-title"],[4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],[1,"d-flex"],["class","ml-auto d-flex",4,"ngIf"],["class","table table-hover table-list mb-0",4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"ml-auto","d-flex"],["type","button",1,"btn","btn-link","btn-sm","py-0",3,"click"],[1,"table","table-hover","table-list","mb-0"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"table-list-checkbox"],["type","checkbox","appStopProp","",3,"ngModel","name","ngModelChange"]],template:function(e,t){if(1&e&&(p.TgZ(0,"div",0),p._uU(1,"\n  "),p.TgZ(2,"div",1),p._uU(3,"\n    "),p.TgZ(4,"form",2,3),p.NdJ("ngSubmit",(function(){return t.submit()})),p._uU(6,"\n      "),p.TgZ(7,"div",4),p._uU(8,"\n        "),p.TgZ(9,"h1",5),p._uU(10),p.ALo(11,"i18n"),p.YNc(12,$t,2,1,"small",6),p._uU(13,"\n        "),p.qZA(),p._uU(14,"\n        "),p.TgZ(15,"button",7),p.ALo(16,"i18n"),p._uU(17,"\n          "),p.TgZ(18,"span",8),p._uU(19,"×"),p.qZA(),p._uU(20,"\n        "),p.qZA(),p._uU(21,"\n      "),p.qZA(),p._uU(22,"\n      "),p.TgZ(23,"div",9),p._uU(24,"\n        "),p.TgZ(25,"p"),p._uU(26),p.ALo(27,"i18n"),p.qZA(),p._uU(28,"\n        "),p.TgZ(29,"div",10),p._uU(30,"\n          "),p.TgZ(31,"h3"),p._uU(32),p.ALo(33,"i18n"),p.qZA(),p._uU(34,"\n          "),p.YNc(35,Pt,10,6,"div",11),p._uU(36,"\n        "),p.qZA(),p._uU(37,"\n        "),p.YNc(38,Rt,3,3,"div",6),p._uU(39,"\n        "),p.YNc(40,Ht,7,1,"table",12),p._uU(41,"\n      "),p.qZA(),p._uU(42,"\n      "),p.TgZ(43,"div",13),p._uU(44,"\n        "),p.TgZ(45,"button",14),p._uU(46,"\n          "),p._UZ(47,"i",15),p.ALo(48,"i18n"),p._uU(49,"\n          "),p.TgZ(50,"span"),p._uU(51),p.ALo(52,"i18n"),p.qZA(),p._uU(53,"\n        "),p.qZA(),p._uU(54,"\n        "),p.TgZ(55,"button",16),p._uU(56),p.ALo(57,"i18n"),p.qZA(),p._uU(58,"\n      "),p.qZA(),p._uU(59,"\n    "),p.qZA(),p._uU(60,"\n  "),p.qZA(),p._uU(61,"\n"),p.qZA(),p._uU(62,"\n")),2&e){const e=p.MAs(5);p.xp6(4),p.Q6J("appApiAction",t.formPromise),p.xp6(6),p.hij("\n          ",p.lcZ(11,13,"collections"),"\n          "),p.xp6(2),p.Q6J("ngIf",t.cipher),p.xp6(3),p.s9C("appA11yTitle",p.lcZ(16,15,"close")),p.xp6(11),p.Oqu(p.lcZ(27,17,"collectionsDesc")),p.xp6(6),p.Oqu(p.lcZ(33,19,"collections")),p.xp6(3),p.Q6J("ngIf",t.collections&&t.collections.length),p.xp6(3),p.Q6J("ngIf",!t.collections||!t.collections.length),p.xp6(2),p.Q6J("ngIf",t.collections&&t.collections.length),p.xp6(5),p.Q6J("disabled",e.loading),p.xp6(2),p.s9C("title",p.lcZ(48,21,"loading")),p.xp6(4),p.Oqu(p.lcZ(52,23,"save")),p.xp6(5),p.hij("\n          ",p.lcZ(57,25,"cancel"),"\n        ")}},dependencies:[D.sg,D.O5,M._Y,M.Wl,M.JJ,M.JL,M.On,M.F,E.B,It.b,Dt._,se.C],encapsulation:2});i(27263);var Kt=i(2739),Vt=i(26187),Wt=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function l(e){try{c(n.next(e))}catch(t){s(t)}}function r(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(l,r)}c((n=n.apply(e,t||[])).next())}))};function Xt(e,t){1&e&&(p.TgZ(0,"div",3),p._uU(1,"\n    "),p._UZ(2,"i",4),p._uU(3,"\n  "),p.qZA())}function ei(e,t){if(1&e&&(p.ynx(0),p._uU(1,"\n        "),p.TgZ(2,"div",11),p._uU(3,"\n          "),p.TgZ(4,"app-filter-section",12),p._uU(5," "),p.qZA(),p._uU(6,"\n        "),p.qZA(),p._uU(7,"\n      "),p.BQk()),2&e){const e=t.$implicit,i=p.oxw(2);p.xp6(4),p.Q6J("activeFilter",i.activeFilter)("section",e)}}function ti(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div"),p._uU(1,"\n    "),p.TgZ(2,"div",5),p._uU(3),p.ALo(4,"i18n"),p.TgZ(5,"a",6),p.ALo(6,"i18n"),p._uU(7,"\n        "),p._UZ(8,"i",7),p._uU(9,"\n      "),p.qZA(),p._uU(10,"\n    "),p.qZA(),p._uU(11,"\n    "),p.TgZ(12,"div",8),p._uU(13,"\n      "),p.TgZ(14,"input",9),p.NdJ("ngModelChange",(function(t){p.CHM(e);const i=p.oxw();return p.KtG(i.onSearchTextChanged(t))})),p.ALo(15,"i18n"),p.qZA(),p._uU(16,"\n      "),p.YNc(17,ei,8,2,"ng-container",10),p._uU(18,"\n    "),p.qZA(),p._uU(19,"\n  "),p.qZA()}if(2&e){const e=p.oxw();p.xp6(3),p.hij("\n      ",p.lcZ(4,5,"filters"),"\n      "),p.xp6(2),p.s9C("appA11yTitle",p.lcZ(6,7,"learnMore")),p.xp6(9),p.s9C("placeholder",p.lcZ(15,9,e.searchPlaceholder)),p.Q6J("ngModel",e.searchText),p.xp6(3),p.Q6J("ngForOf",e.filtersList)}}class ii extends Kt.P{set organization(e){e&&e!==this._organization&&(this._organization=e,this.vaultFilterService.setOrganizationFilter(this._organization))}ngOnInit(){return Wt(this,void 0,void 0,(function*(){this.filters=yield this.buildAllFilters(),this.activeFilter.selectedCipherTypeNode||(this.activeFilter.resetFilter(),this.activeFilter.selectedCollectionNode=yield this.getDefaultFilter()),this.isLoaded=!0}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}buildAllFilters(){return Wt(this,void 0,void 0,(function*(){const e={};return e.typeFilter=yield this.addTypeFilter(["favorites"]),e.collectionFilter=yield this.addCollectionFilter(),e.trashFilter=yield this.addTrashFilter(),e}))}getDefaultFilter(){var e;return Wt(this,void 0,void 0,(function*(){return yield(0,tt.z)(null===(e=this.filters)||void 0===e?void 0:e.collectionFilter.data$)}))}}ii.ɵfac=function(){let e;return function(t){return(e||(e=p.n5z(ii)))(t||ii)}}(),ii.ɵcmp=p.Xpm({type:ii,selectors:[["app-organization-vault-filter"]],inputs:{organization:"organization"},features:[p.qOj],decls:7,vars:2,consts:[[1,"card","vault-filters"],["class","container loading-spinner",4,"ngIf"],[4,"ngIf"],[1,"container","loading-spinner"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-3x"],[1,"card-header","d-flex"],["href","https://bitwarden.com/help/searching-vault/","target","_blank","rel","noopener",1,"ml-auto",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],[1,"card-body"],["type","search","id","search","autocomplete","off","appAutofocus","",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"filter"],[3,"activeFilter","section"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p._uU(1,"\n  "),p.YNc(2,Xt,4,0,"div",1),p._uU(3,"\n  "),p.YNc(4,ti,20,11,"div",2),p._uU(5,"\n"),p.qZA(),p._uU(6,"\n")),2&e&&(p.xp6(2),p.Q6J("ngIf",!t.isLoaded),p.xp6(2),p.Q6J("ngIf",t.isLoaded))},dependencies:[D.sg,D.O5,M.Fj,M.JJ,M.On,E.B,$.U,Vt.n,se.C],encapsulation:2});var ni=i(4871),oi=i(34961),si=i(7323),li=i(95169),ri=i(87483),ci=i(27191),ai=i(53707),di=i(22221),ui=i(98583),pi=i(8427),hi=i(93814),gi=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function l(e){try{c(n.next(e))}catch(t){s(t)}}function r(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(l,r)}c((n=n.apply(e,t||[])).next())}))};const mi=function(){return[]},fi=function(e){return{collectionId:e}};function bi(e,t){if(1&e&&(p.TgZ(0,"bit-breadcrumb",7),p._uU(1),p.qZA()),2&e){const e=t.$implicit;p.Q6J("route",p.DdM(3,mi))("queryParams",p.VKq(4,fi,e.id)),p.xp6(1),p.hij("\n          ",e.name,"\n        ")}}const vi=function(e){return{organizationId:e,collectionId:null}};function wi(e,t){if(1&e&&(p.TgZ(0,"bit-breadcrumbs"),p._uU(1,"\n      "),p.TgZ(2,"bit-breadcrumb",5),p._uU(3),p.ALo(4,"lowercase"),p.ALo(5,"i18n"),p.qZA(),p._uU(6,"\n      "),p.ynx(7),p._uU(8,"\n        "),p.YNc(9,bi,2,6,"bit-breadcrumb",6),p._uU(10,"\n      "),p.BQk(),p._uU(11,"\n    "),p.qZA()),2&e){const e=p.oxw();p.xp6(2),p.Q6J("route",p.DdM(9,mi))("queryParams",p.VKq(10,vi,e.organization.id)),p.xp6(1),p.AsE("\n        ",e.organization.name," ",p.lcZ(4,5,p.lcZ(5,7,"vault")),"\n      "),p.xp6(6),p.Q6J("ngForOf",e.collections)}}function Ui(e,t){1&e&&p._UZ(0,"i",8)}function _i(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"button",12),p.NdJ("click",(function(){p.CHM(e);const t=p.oxw(2);return p.KtG(t.editCollection(t.CollectionDialogTabType.Info))})),p._uU(1,"\n            "),p._UZ(2,"i",13),p._uU(3),p.ALo(4,"i18n"),p.qZA()}2&e&&(p.xp6(3),p.hij("\n            ",p.lcZ(4,1,"editInfo"),"\n          "))}function xi(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"button",12),p.NdJ("click",(function(){p.CHM(e);const t=p.oxw(2);return p.KtG(t.editCollection(t.CollectionDialogTabType.Access))})),p._uU(1,"\n            "),p._UZ(2,"i",14),p._uU(3),p.ALo(4,"i18n"),p.qZA()}2&e&&(p.xp6(3),p.hij("\n            ",p.lcZ(4,1,"access"),"\n          "))}function Zi(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"button",12),p.NdJ("click",(function(){p.CHM(e);const t=p.oxw(2);return p.KtG(t.deleteCollection())})),p._uU(1,"\n            "),p.TgZ(2,"span",15),p._uU(3,"\n              "),p._UZ(4,"i",16),p._uU(5),p.ALo(6,"i18n"),p.qZA(),p._uU(7,"\n          "),p.qZA()}2&e&&(p.xp6(5),p.hij("\n              ",p.lcZ(6,1,"delete"),"\n            "))}function Ai(e,t){if(1&e&&(p.ynx(0),p._uU(1,"\n        "),p._UZ(2,"button",9),p._uU(3,"\n        "),p.TgZ(4,"bit-menu",null,10),p._uU(6,"\n          "),p.YNc(7,_i,5,3,"button",11),p._uU(8,"\n          "),p.YNc(9,xi,5,3,"button",11),p._uU(10,"\n          "),p.YNc(11,Zi,8,3,"button",11),p._uU(12,"\n        "),p.qZA(),p._uU(13,"\n      "),p.BQk()),2&e){const e=p.MAs(5),t=p.oxw();p.xp6(2),p.Q6J("bitMenuTriggerFor",e),p.xp6(5),p.Q6J("ngIf",t.canEditCollection),p.xp6(2),p.Q6J("ngIf",t.canEditCollection),p.xp6(2),p.Q6J("ngIf",t.canDeleteCollection)}}function yi(e,t){1&e&&(p.TgZ(0,"small"),p._uU(1,"\n        "),p._UZ(2,"i",17),p.ALo(3,"i18n"),p._uU(4,"\n        "),p.TgZ(5,"span",18),p._uU(6),p.ALo(7,"i18n"),p.qZA(),p._uU(8,"\n      "),p.qZA()),2&e&&(p.xp6(2),p.s9C("title",p.lcZ(3,2,"loading")),p.xp6(4),p.Oqu(p.lcZ(7,4,"loading")))}function Ci(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",22),p._uU(1,"\n      "),p.TgZ(2,"button",23),p.ALo(3,"i18n"),p._uU(4),p.ALo(5,"i18n"),p._UZ(6,"i",24),p._uU(7,"\n      "),p.qZA(),p._uU(8,"\n      "),p.TgZ(9,"bit-menu",25,26),p._uU(11,"\n        "),p.TgZ(12,"button",12),p.NdJ("click",(function(){p.CHM(e);const t=p.oxw(2);return p.KtG(t.addCipher())})),p._uU(13,"\n          "),p._UZ(14,"i",27),p._uU(15),p.ALo(16,"i18n"),p.qZA(),p._uU(17,"\n        "),p.TgZ(18,"button",12),p.NdJ("click",(function(){p.CHM(e);const t=p.oxw(2);return p.KtG(t.addCollection())})),p._uU(19,"\n          "),p._UZ(20,"i",28),p._uU(21),p.ALo(22,"i18n"),p.qZA(),p._uU(23,"\n      "),p.qZA(),p._uU(24,"\n    "),p.qZA()}if(2&e){const e=p.MAs(10);p.xp6(2),p.s9C("appA11yTitle",p.lcZ(3,5,"new")),p.Q6J("bitMenuTriggerFor",e),p.xp6(2),p.hij("\n        ",p.lcZ(5,7,"new"),""),p.xp6(11),p.hij("\n          ",p.lcZ(16,9,"item"),"\n        "),p.xp6(6),p.hij("\n          ",p.lcZ(22,11,"collection"),"\n        ")}}function Ii(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"button",29),p.NdJ("click",(function(){p.CHM(e);const t=p.oxw(2);return p.KtG(t.addCipher())})),p._uU(1,"\n      "),p._UZ(2,"i",30),p._uU(3),p.ALo(4,"i18n"),p.qZA()}2&e&&(p.xp6(3),p.hij("\n      ",p.lcZ(4,1,"newItem"),"\n    "))}function Ti(e,t){if(1&e&&(p.TgZ(0,"div",19),p._uU(1,"\n    "),p.YNc(2,Ci,25,13,"div",20),p._uU(3,"\n    "),p.YNc(4,Ii,5,3,"button",21),p._uU(5,"\n  "),p.qZA()),2&e){const e=p.oxw();p.xp6(2),p.Q6J("ngIf",e.organization.canCreateNewCollections),p.xp6(2),p.Q6J("ngIf",!e.organization.canCreateNewCollections)}}class Si{constructor(e,t,i,n,o){this.organizationService=e,this.i18nService=t,this.dialogService=i,this.collectionAdminService=n,this.router=o,this.All=vt.oT,this.Unassigned=vt.JK,this.onAddCipher=new p.vpe,this.onAddCollection=new p.vpe,this.onEditCollection=new p.vpe,this.onDeleteCollection=new p.vpe,this.CollectionDialogTabType=ut.sn,this.organizations$=this.organizationService.organizations$}get title(){return void 0!==this.collection?this.collection.node.name:this.filter.collectionId===vt.JK?this.i18nService.t("unassigned"):`${this.organization.name} ${this.i18nService.t("vault").toLowerCase()}`}get showBreadcrumbs(){return void 0!==this.filter.collectionId&&this.filter.collectionId!==vt.oT}get collections(){if(null==this.collection)return[];const e=[this.collection];for(;null!=e[e.length-1].parent;)e.push(e[e.length-1].parent);return e.slice(1).reverse().map((e=>e.node))}showFreeOrgUpgradeDialog(){const e={title:this.i18nService.t("upgradeOrganization"),content:this.i18nService.t(this.organization.canEditSubscription?"freeOrgMaxCollectionReachedManageBilling":"freeOrgMaxCollectionReachedNoManageBilling",this.organization.maxCollections),type:y.rC.PRIMARY};this.organization.canEditSubscription?e.acceptButtonText=this.i18nService.t("upgrade"):(e.acceptButtonText=this.i18nService.t("ok"),e.cancelButtonText=null);const t=this.dialogService.openSimpleDialogRef(e);(0,tt.z)(t.closed).then((e=>{e&&e==y.mr.ACCEPT&&this.organization.canEditSubscription&&this.router.navigate(["/organizations",this.organization.id,"billing","subscription"],{queryParams:{upgrade:!0}})}))}get canEditCollection(){var e;return void 0!==this.collection&&(this.organization.canEditAnyCollection||this.organization.canEditAssignedCollections&&(null===(e=this.collection)||void 0===e?void 0:e.node.assigned))}addCipher(){this.onAddCipher.emit()}addCollection(){return gi(this,void 0,void 0,(function*(){if(this.organization.planProductType===lt.kv.Free){if((yield this.collectionAdminService.getAll(this.organization.id)).length===this.organization.maxCollections)return void this.showFreeOrgUpgradeDialog()}this.onAddCollection.emit()}))}editCollection(e){return gi(this,void 0,void 0,(function*(){this.onEditCollection.emit({tab:e})}))}get canDeleteCollection(){var e,t;return void 0!==this.collection&&((null===(e=this.organization)||void 0===e?void 0:e.canDeleteAnyCollection)||(null===(t=this.organization)||void 0===t?void 0:t.canDeleteAssignedCollections)&&this.collection.node.assigned)}deleteCollection(){this.onDeleteCollection.emit()}}Si.ɵfac=function(e){return new(e||Si)(p.Y36(c.Mn),p.Y36(G.D),p.Y36(y.eo),p.Y36(s.m$),p.Y36(l.F0))},Si.ɵcmp=p.Xpm({type:Si,selectors:[["app-org-vault-header"]],inputs:{loading:"loading",filter:"filter",organization:"organization",collection:"collection"},outputs:{onAddCipher:"onAddCipher",onAddCollection:"onAddCollection",onEditCollection:"onEditCollection",onDeleteCollection:"onDeleteCollection"},decls:22,vars:6,consts:[[1,"tw-mb-4","tw-flex","tw-items-start","tw-justify-between"],[4,"ngIf"],[1,"tw-mb-0","tw-mt-1","tw-flex","tw-items-center","tw-space-x-2"],["class","bwi bwi-collection","aria-hidden","true",4,"ngIf"],["class","tw-shrink-0",4,"ngIf"],["queryParamsHandling","merge",3,"route","queryParams"],["icon","bwi-collection","queryParamsHandling","merge",3,"route","queryParams",4,"ngFor","ngForOf"],["icon","bwi-collection","queryParamsHandling","merge",3,"route","queryParams"],["aria-hidden","true",1,"bwi","bwi-collection"],["bitIconButton","bwi-angle-down","size","small","type","button","aria-haspopup","",3,"bitMenuTriggerFor"],["editCollectionMenu",""],["type","button","bitMenuItem","",3,"click",4,"ngIf"],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-pencil-square"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-users"],[1,"tw-text-danger"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-trash"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"tw-sr-only"],[1,"tw-shrink-0"],["appListDropdown","",4,"ngIf"],["type","button","bitButton","","buttonType","primary",3,"click",4,"ngIf"],["appListDropdown",""],["bitButton","","buttonType","primary","type","button","id","newItemDropdown",3,"bitMenuTriggerFor","appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-angle-down","tw-ml-2"],["aria-labelledby","newItemDropdown"],["addOptions",""],["aria-hidden","true",1,"bwi","bwi-fw","bwi-globe"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-collection"],["type","button","bitButton","","buttonType","primary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p._uU(1,"\n  "),p.TgZ(2,"div"),p._uU(3,"\n    "),p.YNc(4,wi,12,12,"bit-breadcrumbs",1),p._uU(5,"\n    "),p.TgZ(6,"h1",2),p._uU(7,"\n      "),p.YNc(8,Ui,1,0,"i",3),p._uU(9,"\n      "),p.TgZ(10,"span"),p._uU(11),p.qZA(),p._uU(12,"\n      "),p.YNc(13,Ai,14,4,"ng-container",1),p._uU(14,"\n      "),p.YNc(15,yi,9,6,"small",1),p._uU(16,"\n    "),p.qZA(),p._uU(17,"\n  "),p.qZA(),p._uU(18,"\n\n  "),p.YNc(19,Ti,6,2,"div",4),p._uU(20,"\n"),p.qZA(),p._uU(21,"\n")),2&e&&(p.xp6(4),p.Q6J("ngIf",t.showBreadcrumbs),p.xp6(4),p.Q6J("ngIf",void 0!==t.filter.collectionId),p.xp6(3),p.Oqu(t.title),p.xp6(2),p.Q6J("ngIf",void 0!==t.collection&&(t.canEditCollection||t.canDeleteCollection)),p.xp6(2),p.Q6J("ngIf",t.loading),p.xp6(4),p.Q6J("ngIf","trash"!==t.filter.type&&t.filter.collectionId!==t.Unassigned))},dependencies:[D.sg,D.O5,E.B,H.r,te.Q,be.M,ve.t,we.e,pi.n,hi.L,D.i8,se.C],encapsulation:2});var qi=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function l(e){try{c(n.next(e))}catch(t){s(t)}}function r(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(l,r)}c((n=n.apply(e,t||[])).next())}))};const Mi=["vaultFilter"],Ji=["attachments"],Oi=["cipherAddEdit"],Ni=["collectionsModal"],Li=["eventsTemplate"];function zi(e,t){if(1&e&&(p.TgZ(0,"app-callout",17),p._uU(1),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.hij("\n        ",e.trashCleanupWarning,"\n      ")}}function Yi(e,t){if(1&e&&(p.TgZ(0,"div",18),p._uU(1,"\n        "),p._UZ(2,"bit-icon",19),p._uU(3,"\n        "),p.TgZ(4,"p"),p._uU(5),p.ALo(6,"i18n"),p.qZA(),p._uU(7,"\n      "),p.qZA()),2&e){const e=p.oxw();p.xp6(2),p.Q6J("icon",e.noItemIcon),p.xp6(3),p.Oqu(p.lcZ(6,2,"noPermissionToViewAllCollectionItems"))}}function Gi(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"button",21),p.NdJ("click",(function(){p.CHM(e);const t=p.oxw(2);return p.KtG(t.addCipher())})),p._uU(1,"\n          "),p._UZ(2,"i",22),p._uU(3),p.ALo(4,"i18n"),p.qZA()}2&e&&(p.xp6(3),p.hij("\n          ",p.lcZ(4,1,"newItem"),"\n        "))}function Fi(e,t){if(1&e&&(p.TgZ(0,"div",18),p._uU(1,"\n        "),p._UZ(2,"bit-icon",19),p._uU(3,"\n        "),p.TgZ(4,"p"),p._uU(5),p.ALo(6,"i18n"),p.qZA(),p._uU(7,"\n        "),p.YNc(8,Gi,5,3,"button",20),p._uU(9,"\n      "),p.qZA()),2&e){const e=p.oxw();p.xp6(2),p.Q6J("icon",e.noItemIcon),p.xp6(3),p.Oqu(p.lcZ(6,3,"noItemsInList")),p.xp6(3),p.Q6J("ngIf","trash"!==e.filter.type&&e.filter.collectionId!==e.Unassigned)}}function Qi(e,t){1&e&&(p.TgZ(0,"div",18),p._uU(1,"\n        "),p._UZ(2,"i",23),p.ALo(3,"i18n"),p._uU(4,"\n        "),p.TgZ(5,"span",24),p._uU(6),p.ALo(7,"i18n"),p.qZA(),p._uU(8,"\n      "),p.qZA()),2&e&&(p.xp6(2),p.s9C("title",p.lcZ(3,2,"loading")),p.xp6(4),p.Oqu(p.lcZ(7,4,"loading")))}function ki(e,t){}function Di(e,t){}function Ei(e,t){}function $i(e,t){}const Pi=function(e){return[e]},Ri=function(){return[]},Bi="OrgVaultComponent";class Hi{constructor(e,t,i,n,o,s,l,r,c,a,d,u,p,m,f,b,v,w,U,_,x,Z,A,y,C){this.route=e,this.organizationService=t,this.vaultFilterService=i,this.routedVaultFilterBridgeService=n,this.routedVaultFilterService=o,this.router=s,this.changeDetectorRef=l,this.syncService=r,this.i18nService=c,this.modalService=a,this.dialogService=d,this.messagingService=u,this.broadcasterService=p,this.ngZone=m,this.platformUtilsService=f,this.cipherService=b,this.passwordRepromptService=v,this.collectionAdminService=w,this.searchService=U,this.searchPipe=_,this.groupService=x,this.logService=Z,this.eventCollectionService=A,this.totpService=y,this.apiService=C,this.Unassigned=vt.JK,this.trashCleanupWarning=null,this.activeFilter=new pt.l,this.noItemIcon=at.o,this.performingInitialLoad=!0,this.refreshing=!1,this.processingEvent=!1,this.filter={},this.searchText$=new h.x,this.refresh$=new g.X(null),this.destroy$=new h.x}ngOnInit(){return qi(this,void 0,void 0,(function*(){this.trashCleanupWarning=this.i18nService.t(this.platformUtilsService.isSelfHost()?"trashCleanupWarningSelfHosted":"trashCleanupWarning");const e=this.routedVaultFilterService.filter$,t=e.pipe((0,U.U)((e=>e.organizationId)),(0,it.h)((e=>void 0!==e)),(0,nt.x)()),i=t.pipe((0,f.w)((e=>this.organizationService.get$(e))),(0,_.R)(this.destroy$),(0,ot.d)({refCount:!1,bufferSize:1})),n=(0,b.a)([i,this.route.queryParams]).pipe((0,Z.P)(),(0,f.w)((([e])=>qi(this,void 0,void 0,(function*(){this.organization=e,e.canUseAdminCollections||(yield this.syncService.fullSync(!1))})))),(0,ot.d)({refCount:!0,bufferSize:1}));this.broadcasterService.subscribe(Bi,(e=>{this.ngZone.run((()=>qi(this,void 0,void 0,(function*(){if("syncCompleted"===e.command)e.successfully&&(this.refresh(),this.changeDetectorRef.detectChanges())}))))})),this.routedVaultFilterBridgeService.activeFilter$.pipe((0,_.R)(this.destroy$)).subscribe((e=>{this.activeFilter=e})),this.searchText$.pipe((0,st.b)(200),(0,_.R)(this.destroy$)).subscribe((e=>this.router.navigate([],{queryParams:{search:S.c.isNullOrEmpty(e)?null:e},queryParamsHandling:"merge",replaceUrl:!0}))),this.currentSearchText$=this.route.queryParams.pipe((0,U.U)((e=>e.search)));const o=t.pipe((0,f.w)((e=>this.collectionAdminService.getAll(e))),(0,ot.d)({refCount:!0,bufferSize:1})),l=(0,b.a)([t,o]).pipe((0,U.U)((([e,t])=>{const i=new s.ec;return i.name=this.i18nService.t("unassigned"),i.id=vt.JK,i.organizationId=e,t.concat(i)}))),r=t.pipe((0,f.w)((e=>this.groupService.getAll(e))),(0,ot.d)({refCount:!0,bufferSize:1})),c=i.pipe((0,w.b)((e=>qi(this,void 0,void 0,(function*(){let t;return t=e.canEditAnyCollection?yield this.cipherService.getAllFromApiForOrganization(e.id):(yield this.cipherService.getAllDecrypted()).filter((t=>t.organizationId===e.id)),yield this.searchService.indexCiphers(t,e.id),t}))))),a=(0,b.a)([c,e,this.currentSearchText$]).pipe((0,it.h)((([e,t])=>null!=e&&null!=t)),(0,w.b)((([e,t,i])=>qi(this,void 0,void 0,(function*(){if(void 0===t.collectionId&&void 0===t.type)return[];const n=(0,bt.E)(t);return this.searchService.isSearchable(i)?yield this.searchService.searchCiphers(i,[n],e):e.filter(n)})))),(0,ot.d)({refCount:!0,bufferSize:1})),d=l.pipe((0,U.U)((e=>(0,wt.o)(e))),(0,ot.d)({refCount:!0,bufferSize:1})),u=(0,b.a)([d,e,this.currentSearchText$]).pipe((0,it.h)((([e,t])=>null!=e&&null!=t)),(0,U.U)((([e,t,i])=>{var n;if(t.collectionId===vt.JK||void 0===t.collectionId&&void 0!==t.type)return[];let o=[];if(void 0===t.collectionId||t.collectionId===vt.oT)o=e.map((e=>e.node));else{const i=rt.L.getTreeNodeObjectFromList(e,t.collectionId);o=null!==(n=null==i?void 0:i.children.map((e=>e.node)))&&void 0!==n?n:[]}return this.searchService.isSearchable(i)&&(o=this.searchPipe.transform(o,i,(e=>e.name),(e=>e.id))),o})),(0,_.R)(this.destroy$),(0,ot.d)({refCount:!0,bufferSize:1})),p=(0,b.a)([d,e]).pipe((0,it.h)((([e,t])=>null!=e&&null!=t)),(0,U.U)((([e,t])=>{if(void 0!==t.collectionId&&t.collectionId!==vt.oT&&t.collectionId!==vt.JK)return rt.L.getTreeNodeObjectFromList(e,t.collectionId)})),(0,ot.d)({refCount:!0,bufferSize:1})),h=(0,b.a)([e,p,i]).pipe((0,U.U)((([e,t,i])=>e.collectionId===vt.JK&&!i.canUseAdminCollections||null!=t&&!t.node.assigned&&!i.canUseAdminCollections)),(0,ot.d)({refCount:!0,bufferSize:1}));n.pipe((0,f.w)((()=>(0,b.a)([this.route.queryParams,i]))),(0,f.w)((([e,t])=>qi(this,void 0,void 0,(function*(){const i=ji(e);i&&(t.canUseAdminCollections||null!=(yield this.cipherService.get(i))?this.editCipherId(i):(this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("unknownCipher")),this.router.navigate([],{queryParams:{cipherId:null,itemId:null},queryParamsHandling:"merge"})))})))),(0,_.R)(this.destroy$)).subscribe(),n.pipe((0,f.w)((()=>(0,b.a)([this.route.queryParams,i,c]))),(0,f.w)((([e,t,i])=>qi(this,void 0,void 0,(function*(){const n=e.viewEvents;if(!n)return;const o=i.find((e=>e.id===n));t.useEvents&&null!=o?this.viewEvents(o):(this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("unknownCipher")),this.router.navigate([],{queryParams:{viewEvents:null},queryParamsHandling:"merge"}))})))),(0,_.R)(this.destroy$)).subscribe(),n.pipe((0,f.w)((()=>this.refresh$)),(0,m.b)((()=>this.refreshing=!0)),(0,f.w)((()=>(0,b.a)([i,e,l,r,a,u,p,h]))),(0,_.R)(this.destroy$)).subscribe((([e,t,i,n,o,s,l,r])=>{this.organization=e,this.filter=t,this.allCollections=i,this.allGroups=n,this.ciphers=o,this.collections=s,this.selectedCollection=l,this.showMissingCollectionPermissionMessage=r,this.isEmpty=0===(null==s?void 0:s.length)&&0===(null==o?void 0:o.length),this.vaultFilterService.reloadCollections(i),this.refreshing=!1,this.performingInitialLoad=!1}))}))}get loading(){return this.refreshing||this.processingEvent}ngOnDestroy(){this.broadcasterService.unsubscribe(Bi),this.destroy$.next(),this.destroy$.complete()}onVaultItemsEvent(e){return qi(this,void 0,void 0,(function*(){this.processingEvent=!0;try{if("viewAttachments"===e.type)yield this.editCipherAttachments(e.item);else if("viewCollections"===e.type)yield this.editCipherCollections(e.item);else if("clone"===e.type)yield this.cloneCipher(e.item);else if("restore"===e.type)1===e.items.length?yield this.restore(e.items[0]):yield this.bulkRestore(e.items);else if("delete"===e.type){const t=e.items.filter((e=>void 0===e.collection)).map((e=>e.cipher)),i=e.items.filter((e=>void 0===e.cipher)).map((e=>e.collection));1===t.length&&0===i.length?yield this.deleteCipher(t[0]):0===t.length&&1===i.length?yield this.deleteCollection(i[0]):yield this.bulkDelete(t,i,this.organization)}else"copyField"===e.type?yield this.copy(e.item,e.field):"edit"===e.type?yield this.editCollection(e.item,ut.sn.Info):"viewAccess"===e.type?yield this.editCollection(e.item,ut.sn.Access):"viewEvents"===e.type&&(yield this.viewEvents(e.item))}finally{this.processingEvent=!1}}))}filterSearchText(e){this.searchText$.next(e)}editCipherAttachments(e){return qi(this,void 0,void 0,(function*(){if(null==this.organization.maxStorageGb||0===this.organization.maxStorageGb)return void this.messagingService.send("upgradeOrganization",{organizationId:e.organizationId});let t=!1;const[i]=yield this.modalService.openViewRef(Ft,this.attachmentsModalRef,(i=>{i.organization=this.organization,i.cipherId=e.id,i.onUploadedAttachment.pipe((0,_.R)(this.destroy$)).subscribe((()=>t=!0)),i.onDeletedAttachment.pipe((0,_.R)(this.destroy$)).subscribe((()=>t=!0))}));i.onClosed.pipe((0,_.R)(this.destroy$)).subscribe((()=>{t&&this.refresh(),t=!1}))}))}editCipherCollections(e){return qi(this,void 0,void 0,(function*(){const t=yield(0,tt.z)(this.vaultFilterService.filteredCollections$),[i]=yield this.modalService.openViewRef(jt,this.collectionsModalRef,(n=>{n.collectionIds=e.collectionIds,n.collections=t.filter((e=>!e.readOnly&&e.id!=vt.JK)),n.organization=this.organization,n.cipherId=e.id,n.onSavedCollections.pipe((0,_.R)(this.destroy$)).subscribe((()=>{i.close(),this.refresh()}))}))}))}addCipher(){return qi(this,void 0,void 0,(function*(){const e=(yield(0,tt.z)(this.vaultFilterService.filteredCollections$)).filter((e=>!e.readOnly&&e.id!=vt.JK));yield this.editCipher(null,(t=>{t.type=this.activeFilter.cipherType,t.collections=e,this.activeFilter.collectionId&&(t.collectionIds=[this.activeFilter.collectionId])}))}))}navigateToCipher(e){return qi(this,void 0,void 0,(function*(){this.go({itemId:null==e?void 0:e.id})}))}editCipher(e,t){return qi(this,void 0,void 0,(function*(){return this.editCipherId(null==e?void 0:e.id,t)}))}editCipherId(e,t){return qi(this,void 0,void 0,(function*(){const i=yield this.cipherService.get(e);if(null!=i&&0!=i.reprompt&&!(yield this.passwordRepromptService.showPasswordPrompt()))return void this.go({cipherId:null,itemId:null});const n=t=>{t.organization=this.organization,t.organizationId=this.organization.id,t.cipherId=e,t.onSavedCipher.pipe((0,_.R)(this.destroy$)).subscribe((()=>{o.close(),this.refresh()})),t.onDeletedCipher.pipe((0,_.R)(this.destroy$)).subscribe((()=>{o.close(),this.refresh()})),t.onRestoredCipher.pipe((0,_.R)(this.destroy$)).subscribe((()=>{o.close(),this.refresh()}))},[o,s]=yield this.modalService.openViewRef(Ut.Z,this.cipherAddEditModalRef,null==t?n:e=>{n(e),t(e)});return o.onClosedPromise().then((()=>{this.go({cipherId:null,itemId:null})})),s}))}cloneCipher(e){return qi(this,void 0,void 0,(function*(){const t=(yield(0,tt.z)(this.vaultFilterService.filteredCollections$)).filter((e=>!e.readOnly&&e.id!=vt.JK));yield this.editCipher(e,(i=>{i.cloneMode=!0,i.collections=t,i.collectionIds=e.collectionIds}))}))}restore(e){var t;return qi(this,void 0,void 0,(function*(){if(!(yield this.repromptCipher([e])))return;if(!e.isDeleted)return;if(!(yield this.dialogService.openSimpleDialog({title:{key:"restoreItem"},content:{key:"restoreItemConfirmation"},type:y.rC.WARNING})))return!1;try{const i=null===(t=this.organization)||void 0===t?void 0:t.canEditAnyCollection;yield this.cipherService.restoreWithServer(e.id,i),this.platformUtilsService.showToast("success",null,this.i18nService.t("restoredItem")),this.refresh()}catch(i){this.logService.error(i)}}))}bulkRestore(e){return qi(this,void 0,void 0,(function*(){if(!(yield this.repromptCipher(e)))return;const t=e.map((e=>e.id));if(0===t.length)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("nothingSelected"));const i=(0,gt.OP)(this.dialogService,{data:{cipherIds:t}});(yield(0,x.n)(i.closed))===gt.Hn.Restored&&this.refresh()}))}deleteCipher(e){return qi(this,void 0,void 0,(function*(){if(!(yield this.repromptCipher([e])))return;const t=e.isDeleted;if(!(yield this.dialogService.openSimpleDialog({title:{key:t?"permanentlyDeleteItem":"deleteItem"},content:{key:t?"permanentlyDeleteItemConfirmation":"deleteItemConfirmation"},type:y.rC.WARNING})))return!1;try{yield this.deleteCipherWithServer(e.id,t),this.platformUtilsService.showToast("success",null,this.i18nService.t(t?"permanentlyDeletedItem":"deletedItem")),this.refresh()}catch(i){this.logService.error(i)}}))}deleteCollection(e){var t,i,n,o;return qi(this,void 0,void 0,(function*(){if(!this.organization.canDeleteAssignedCollections&&!this.organization.canDeleteAnyCollection)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("missingPermissions"));if(yield this.dialogService.openSimpleDialog({title:e.name,content:{key:"deleteCollectionConfirmation"},type:y.rC.WARNING}))try{yield this.apiService.deleteCollection(null===(t=this.organization)||void 0===t?void 0:t.id,e.id),this.platformUtilsService.showToast("success",null,this.i18nService.t("deletedCollectionId",e.name)),(null===(i=this.selectedCollection)||void 0===i?void 0:i.node.id)===e.id&&this.router.navigate([],{queryParams:{collectionId:null!==(o=null===(n=this.selectedCollection.parent)||void 0===n?void 0:n.node.id)&&void 0!==o?o:null},queryParamsHandling:"merge",replaceUrl:!0}),this.refresh()}catch(s){this.logService.error(s)}}))}bulkDelete(e,t,i){return qi(this,void 0,void 0,(function*(){if(!(yield this.repromptCipher(e)))return;if(0===e.length&&0===t.length)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("nothingSelected"));const n=(0,ht.E)(this.dialogService,{data:{permanent:"trash"===this.filter.type,cipherIds:e.map((e=>e.id)),collectionIds:t.map((e=>e.id)),organization:i}});(yield(0,x.n)(n.closed))===ht.Jg.Deleted&&this.refresh()}))}copy(e,t){return qi(this,void 0,void 0,(function*(){let i,n,o;if("username"===t)i="Username",n=e.login.username,o="username";else if("password"===t)i="Password",n=e.login.password,o="password";else{if("totp"!==t)return void this.platformUtilsService.showToast("info",null,this.i18nService.t("unexpectedError"));i="TOTP",n=yield this.totpService.getCode(e.login.totp),o="verificationCodeTotp"}this.passwordRepromptService.protectedFields().includes(i)&&!(yield this.repromptCipher([e]))||e.viewPassword&&(this.platformUtilsService.copyToClipboard(n,{window}),this.platformUtilsService.showToast("info",null,this.i18nService.t("valueCopied",this.i18nService.t(o))),"password"===t?this.eventCollectionService.collect(lt.tw.Cipher_ClientCopiedPassword,e.id):"totp"===t&&this.eventCollectionService.collect(lt.tw.Cipher_ClientCopiedHiddenField,e.id))}))}addCollection(){var e,t;return qi(this,void 0,void 0,(function*(){const i=(0,ut.ku)(this.dialogService,{data:{organizationId:null===(e=this.organization)||void 0===e?void 0:e.id,parentCollectionId:null===(t=this.selectedCollection)||void 0===t?void 0:t.node.id}}),n=yield(0,x.n)(i.closed);n!==ut.yx.Saved&&n!==ut.yx.Deleted||this.refresh()}))}editCollection(e,t){var i;return qi(this,void 0,void 0,(function*(){const n=(0,ut.ku)(this.dialogService,{data:{collectionId:null==e?void 0:e.id,organizationId:null===(i=this.organization)||void 0===i?void 0:i.id,initialTab:t}}),o=yield(0,x.n)(n.closed);o!==ut.yx.Saved&&o!==ut.yx.Deleted||this.refresh()}))}viewEvents(e){return qi(this,void 0,void 0,(function*(){yield this.modalService.openViewRef(dt.$,this.eventsModalRef,(t=>{t.name=e.name,t.organizationId=this.organization.id,t.entityId=e.id,t.showUser=!0,t.entity="cipher"}))}))}deleteCipherWithServer(e,t){var i;const n=null===(i=this.organization)||void 0===i?void 0:i.canEditAnyCollection;return t?this.cipherService.deleteWithServer(e,n):this.cipherService.softDeleteWithServer(e,n)}repromptCipher(e){return qi(this,void 0,void 0,(function*(){const t=!e.find((e=>e.reprompt!==ct.N.None));return t||(yield this.passwordRepromptService.showPasswordPrompt())}))}refresh(){this.refresh$.next()}go(e=null){null==e&&(e={type:this.activeFilter.cipherType,collectionId:this.activeFilter.collectionId,deleted:this.activeFilter.isDeleted||null}),this.router.navigate([],{relativeTo:this.route,queryParams:e,queryParamsHandling:"merge",replaceUrl:!0})}}Hi.ɵfac=function(e){return new(e||Hi)(p.Y36(l.gz),p.Y36(c.Mn),p.Y36($e.n),p.Y36(mt.b),p.Y36(ft.q),p.Y36(l.F0),p.Y36(p.sBO),p.Y36(ni._),p.Y36(G.D),p.Y36(C.Z),p.Y36(y.eo),p.Y36(oi.o),p.Y36(si.A),p.Y36(p.R0b),p.Y36(Q.P),p.Y36(Ke.u),p.Y36(li.C),p.Y36(s.m$),p.Y36(pe.o),p.Y36(A.C),p.Y36(s.lT),p.Y36(k.$),p.Y36(ri.j),p.Y36(ci.w),p.Y36(z.s))},Hi.ɵcmp=p.Xpm({type:Hi,selectors:[["app-org-vault"]],viewQuery:function(e,t){if(1&e&&(p.Gf(Mi,7),p.Gf(Ji,7,p.s_b),p.Gf(Oi,7,p.s_b),p.Gf(Ni,7,p.s_b),p.Gf(Li,7,p.s_b)),2&e){let e;p.iGM(e=p.CRH())&&(t.vaultFilterComponent=e.first),p.iGM(e=p.CRH())&&(t.attachmentsModalRef=e.first),p.iGM(e=p.CRH())&&(t.cipherAddEditModalRef=e.first),p.iGM(e=p.CRH())&&(t.collectionsModalRef=e.first),p.iGM(e=p.CRH())&&(t.eventsModalRef=e.first)}},features:[p._Bn([ft.q,mt.b])],decls:50,vars:31,consts:[[1,"container","page-content"],[1,"row"],[1,"col-3"],[1,"groupings"],[1,"content"],[1,"inner-content"],[3,"organization","activeFilter","searchText","searchTextChanged"],["vaultFilter",""],[1,"col-9"],[3,"filter","loading","organization","collection","onAddCipher","onAddCollection","onEditCollection","onDeleteCollection"],["type","warning","icon","bwi bwi-exclamation-triangle",4,"ngIf"],[3,"ciphers","collections","allCollections","allOrganizations","allGroups","disabled","showOwner","showCollections","showGroups","showPremiumFeatures","showBulkMove","showBulkTrashOptions","useEvents","editableCollections","cloneableOrganizationCiphers","onEvent"],["class","tw-mt-6 tw-flex tw-h-full tw-flex-col tw-items-center tw-justify-start",4,"ngIf"],["attachments",""],["cipherAddEdit",""],["collectionsModal",""],["eventsTemplate",""],["type","warning","icon","bwi bwi-exclamation-triangle"],[1,"tw-mt-6","tw-flex","tw-h-full","tw-flex-col","tw-items-center","tw-justify-start"],["aria-hidden","true",3,"icon"],["type","button","buttonType","primary","bitButton","",3,"click",4,"ngIf"],["type","button","buttonType","primary","bitButton","",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p._uU(1,"\n  "),p.TgZ(2,"div",1),p._uU(3,"\n    "),p.TgZ(4,"div",2),p._uU(5,"\n      "),p.TgZ(6,"div",3),p._uU(7,"\n        "),p.TgZ(8,"div",4),p._uU(9,"\n          "),p.TgZ(10,"div",5),p._uU(11,"\n            "),p.TgZ(12,"app-organization-vault-filter",6,7),p.NdJ("searchTextChanged",(function(e){return t.filterSearchText(e)})),p.ALo(14,"async"),p.qZA(),p._uU(15,"\n          "),p.qZA(),p._uU(16,"\n        "),p.qZA(),p._uU(17,"\n      "),p.qZA(),p._uU(18,"\n    "),p.qZA(),p._uU(19,"\n    "),p.TgZ(20,"div",8),p._uU(21,"\n      "),p.TgZ(22,"app-org-vault-header",9),p.NdJ("onAddCipher",(function(){return t.addCipher()}))("onAddCollection",(function(){return t.addCollection()}))("onEditCollection",(function(e){return t.editCollection(t.selectedCollection.node,e.tab)}))("onDeleteCollection",(function(){return t.deleteCollection(t.selectedCollection.node)})),p.qZA(),p._uU(23,"\n      "),p.YNc(24,zi,2,1,"app-callout",10),p._uU(25,"\n      "),p.TgZ(26,"app-vault-items",11),p.NdJ("onEvent",(function(e){return t.onVaultItemsEvent(e)})),p._uU(27,"\n      "),p.qZA(),p._uU(28,"\n      "),p.YNc(29,Yi,8,4,"div",12),p._uU(30,"\n      "),p.YNc(31,Fi,10,5,"div",12),p._uU(32,"\n      "),p.YNc(33,Qi,9,6,"div",12),p._uU(34,"\n    "),p.qZA(),p._uU(35,"\n  "),p.qZA(),p._uU(36,"\n  "),p.YNc(37,ki,0,0,"ng-template",null,13,p.W1O),p._uU(39,"\n  "),p.YNc(40,Di,0,0,"ng-template",null,14,p.W1O),p._uU(42,"\n  "),p.YNc(43,Ei,0,0,"ng-template",null,15,p.W1O),p._uU(45,"\n  "),p.YNc(46,$i,0,0,"ng-template",null,16,p.W1O),p._uU(48,"\n"),p.qZA(),p._uU(49,"\n")),2&e&&(p.xp6(12),p.Q6J("organization",t.organization)("activeFilter",t.activeFilter)("searchText",p.lcZ(14,26,t.currentSearchText$)),p.xp6(10),p.Q6J("filter",t.filter)("loading",t.refreshing)("organization",t.organization)("collection",t.selectedCollection),p.xp6(2),p.Q6J("ngIf",t.activeFilter.isDeleted),p.xp6(2),p.Q6J("ciphers",t.ciphers)("collections",t.collections)("allCollections",t.allCollections)("allOrganizations",t.organization?p.VKq(28,Pi,t.organization):p.DdM(30,Ri))("allGroups",t.allGroups)("disabled",t.loading)("showOwner",!1)("showCollections",void 0!==t.filter.type)("showGroups",(null==t.organization?null:t.organization.useGroups)&&(void 0===t.filter.type&&void 0===t.filter.collectionId||void 0!==t.filter.collectionId))("showPremiumFeatures",null==t.organization?null:t.organization.useTotp)("showBulkMove",!1)("showBulkTrashOptions","trash"===t.filter.type)("useEvents",null==t.organization?null:t.organization.useEvents)("editableCollections",!0)("cloneableOrganizationCiphers",!0),p.xp6(3),p.Q6J("ngIf",t.showMissingCollectionPermissionMessage),p.xp6(2),p.Q6J("ngIf",t.isEmpty&&!t.showMissingCollectionPermissionMessage&&!t.performingInitialLoad),p.xp6(2),p.Q6J("ngIf",t.performingInitialLoad))},dependencies:[ii,D.O5,ai.O,H.r,di.G,ui.JS,Si,D.Ov,se.C],encapsulation:2});const ji=e=>e.itemId||e.cipherId,Ki=[{path:"",component:Hi,canActivate:[a.G],data:{titleId:"vaults",organizationPermissions:c.Po}}];class Vi{}Vi.ɵfac=function(e){return new(e||Vi)},Vi.ɵmod=p.oAB({type:Vi}),Vi.ɵinj=p.cJS({imports:[l.Bz.forChild(Ki),l.Bz]});class Wi{}Wi.ɵfac=function(e){return new(e||Wi)},Wi.ɵmod=p.oAB({type:Wi}),Wi.ɵinj=p.cJS({imports:[Vi,et,Ge.m,Ye.f,Ee.x,De.e,Fe.D,Qe.D,ze.J,ke.z]});const Xi=[{path:":organizationId",component:u.f,canActivate:[r.a,a.G],data:{organizationPermissions:c.gW},children:[{path:"",pathMatch:"full",canActivate:[d.S],data:{autoRedirectCallback:function(e){if((0,c.Po)(e))return"vault";if((0,c.tt)(e))return"members";if((0,c.WW)(e))return"groups";if((0,c.$G)(e))return"reporting";if((0,c.DL)(e))return"settings";return}},children:[]},{path:"vault",loadChildren:()=>Wi},{path:"settings",loadChildren:()=>i.e(950).then(i.bind(i,81950)).then((e=>e.OrganizationSettingsModule))},{path:"members",loadChildren:()=>i.e(392).then(i.bind(i,15392)).then((e=>e.MembersModule))},{path:"groups",component:Le,canActivate:[a.G],data:{titleId:"groups",organizationPermissions:c.WW}},{path:"reporting",loadChildren:()=>i.e(466).then(i.bind(i,41466)).then((e=>e.OrganizationReportingModule))},{path:"billing",loadChildren:()=>i.e(836).then(i.bind(i,30836)).then((e=>e.OrganizationBillingModule))}]}];class en{}en.ɵfac=function(e){return new(e||en)},en.ɵmod=p.oAB({type:en}),en.ɵinj=p.cJS({imports:[l.Bz.forChild(Xi),l.Bz]});class tn{}tn.ɵfac=function(e){return new(e||tn)},tn.ɵmod=p.oAB({type:tn}),tn.ɵinj=p.cJS({imports:[ut.PV,L.k4,s.WO,en]})},36689:(e,t,i)=>{i.d(t,{f:()=>W,R:()=>V});var n=i(24852),o=i(98645),s=i(54019),l=i(68362);function r(e,t,i){let n=0,o=e.length||0,s=-1,l=0;for(;n<o;)if(s=Math.floor((n+o)/2),l=i(e[s],t),l<0)n=s+1;else{if(!(l>0))return s;o=s}return n}class c{constructor(e,t){this.controlFactory=e,this.compareFn=t,this.allItems=[],this.selectedItems=[],this.deselectedItems=[],this.formArray=new o.Oe([])}selectItems(e,t){for(const i of e)this.selectItem(i,t)}deselectItems(e){for(const t of e)this.deselectItem(t)}deselectAll(){this.formArray.clear(),this.selectedItems=[],this.deselectedItems=[...this.allItems]}selectItem(e,t){const i=this.deselectedItems.findIndex((t=>t.id===e));if(-1===i)return;const n=this.deselectedItems[i];this.deselectedItems=[...this.deselectedItems.slice(0,i),...this.deselectedItems.slice(i+1)];const o=r(this.selectedItems,n,this.compareFn);this.selectedItems=[...this.selectedItems.slice(0,o),n,...this.selectedItems.slice(o)];const s=this.controlFactory(n);s.patchValue(Object.assign({id:e},t)),this.formArray.insert(o,s)}deselectItem(e){const t=this.selectedItems.findIndex((t=>t.id===e));if(-1===t)return;const i=this.selectedItems[t];this.selectedItems=[...this.selectedItems.slice(0,t),...this.selectedItems.slice(t+1)],this.formArray.removeAt(t);const n=r(this.deselectedItems,i,this.compareFn);this.deselectedItems=[...this.deselectedItems.slice(0,n),i,...this.deselectedItems.slice(n)]}populateItems(e,t=[]){this.formArray.clear(),this.allItems=[...e].sort(this.compareFn),this.selectedItems=[],this.deselectedItems=[...this.allItems];for(const i of t)this.selectItem(i.id,i)}forEachControlItem(e){for(let t=0;t<this.formArray.length;t++)e(this.formArray.at(t),this.selectedItems[t])}}var a=i(34632),d=i(78627),u=i(19419),p=i(33245),h=i(14970),g=i(66385),m=i(24637),f=i(11512),b=i(6378),v=i(36179),w=i(44358),U=i(21656),_=i(54735),x=i(50941),Z=i(26361),A=i(82933),y=i(28055);class C{constructor(e){this.i18nService=e}transform(e,t){if(null==e)return null!=t?t:this.i18nService.t("unknown");switch(e){case y.je.Owner:return this.i18nService.t("owner");case y.je.Admin:return this.i18nService.t("admin");case y.je.User:return this.i18nService.t("user");case y.je.Manager:return this.i18nService.t("manager");case y.je.Custom:return this.i18nService.t("custom")}}}function I(e,t){if(1&e&&(n.TgZ(0,"option",16),n._uU(1),n.ALo(2,"i18n"),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.perm),n.xp6(1),n.hij("\n        ",n.lcZ(2,2,e.labelId),"\n      ")}}C.ɵfac=function(e){return new(e||C)(n.Y36(d.D,16))},C.ɵpipe=n.Yjl({name:"userType",type:C,pure:!0});const T=function(){return{standalone:!0}};function S(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"bit-form-field",13),n._uU(1,"\n    "),n.TgZ(2,"bit-label"),n._uU(3),n.ALo(4,"i18n"),n.qZA(),n._uU(5,"\n    "),n._uU(6,"\n    "),n.TgZ(7,"select",14),n.NdJ("ngModelChange",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.initialPermission=t)}))("blur",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.handleBlur())})),n._uU(8,"\n      "),n.YNc(9,I,3,4,"option",15),n._uU(10,"\n    "),n.qZA(),n._uU(11,"\n  "),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.Oqu(n.lcZ(4,5,"permission")),n.xp6(4),n.Q6J("disabled",e.disabled)("ngModel",e.initialPermission)("ngModelOptions",n.DdM(7,T)),n.xp6(2),n.Q6J("ngForOf",e.permissionList)}}function q(e,t){if(1&e&&(n.TgZ(0,"bit-hint"),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.selectorHelpText)}}function M(e,t){1&e&&(n.TgZ(0,"th",17),n._uU(1,"\n        "),n.TgZ(2,"div",18),n._uU(3),n.ALo(4,"i18n"),n.qZA(),n._uU(5,"\n      "),n.qZA()),2&e&&(n.xp6(3),n.hij("\n          ",n.lcZ(4,1,"permission"),"\n        "))}function J(e,t){1&e&&(n.TgZ(0,"th",19),n._uU(1),n.ALo(2,"i18n"),n.qZA()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"role")))}function O(e,t){1&e&&(n.TgZ(0,"th",20),n._uU(1),n.ALo(2,"i18n"),n.qZA()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"group")))}function N(e,t){1&e&&(n.TgZ(0,"span",34),n._uU(1),n.ALo(2,"i18n"),n.qZA()),2&e&&(n.xp6(1),n.hij("\n                ",n.lcZ(2,1,"invited"),"\n              "))}function L(e,t){if(1&e&&(n.TgZ(0,"div",35),n._uU(1),n.qZA()),2&e){const e=n.oxw(2).$implicit;n.xp6(1),n.hij("\n              ",e.email,"\n            ")}}function z(e,t){if(1&e&&(n.TgZ(0,"div",29),n._uU(1,"\n          "),n._UZ(2,"bit-avatar",30),n._uU(3,"\n          "),n.TgZ(4,"div",31),n._uU(5,"\n            "),n.TgZ(6,"div"),n._uU(7),n.YNc(8,N,3,3,"span",32),n._uU(9,"\n            "),n.qZA(),n._uU(10,"\n            "),n.YNc(11,L,2,1,"div",33),n._uU(12,"\n          "),n.qZA(),n._uU(13,"\n        "),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(2),n.s9C("text",e.labelName),n.xp6(5),n.hij("\n              ",e.labelName,"\n              "),n.xp6(1),n.Q6J("ngIf",0==e.status),n.xp6(3),n.Q6J("ngIf",0!=e.status)}}function Y(e,t){if(1&e&&(n.TgZ(0,"div",29),n._uU(1,"\n          "),n._UZ(2,"i",36),n._uU(3,"\n          "),n.TgZ(4,"span"),n._uU(5),n.qZA(),n._uU(6,"\n        "),n.qZA()),2&e){const e=n.oxw().$implicit,t=n.oxw(2);n.xp6(2),n.Q6J("ngClass",e.icon||t.itemIcon(e)),n.xp6(3),n.Oqu(e.labelName)}}function G(e,t){if(1&e&&(n.TgZ(0,"option",16),n._uU(1),n.ALo(2,"i18n"),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.perm),n.xp6(1),n.hij("\n                ",n.lcZ(2,2,e.labelId),"\n              ")}}function F(e,t){if(1&e){const e=n.EpF();n.ynx(0),n._uU(1,"\n          "),n.TgZ(2,"label",39),n._uU(3),n.ALo(4,"i18n"),n.qZA(),n._uU(5,"\n          "),n.TgZ(6,"div",40),n._uU(7,"\n            "),n.TgZ(8,"select",41),n.NdJ("blur",(function(){n.CHM(e);const t=n.oxw(4);return n.KtG(t.handleBlur())})),n._uU(9,"\n              "),n.YNc(10,G,3,4,"option",15),n._uU(11,"\n            "),n.qZA(),n._uU(12,"\n            "),n.TgZ(13,"label",42),n._uU(14,"\n              "),n._UZ(15,"i",43),n._uU(16,"\n            "),n.qZA(),n._uU(17,"\n          "),n.qZA(),n._uU(18,"\n        "),n.BQk()}if(2&e){const e=n.oxw(2),t=e.index,i=e.$implicit,o=n.oxw(2);n.xp6(2),n.Q6J("for","permission"+t),n.xp6(1),n.AsE("",i.labelName," ",n.lcZ(4,6,"permission"),""),n.xp6(5),n.Q6J("id","permission"+t),n.xp6(2),n.Q6J("ngForOf",o.permissionList),n.xp6(3),n.Q6J("for","permission"+t)}}function Q(e,t){if(1&e&&(n.TgZ(0,"div",46),n.ALo(1,"i18n"),n._uU(2),n.ALo(3,"i18n"),n._UZ(4,"i",47),n._uU(5,"\n          "),n.qZA()),2&e){const e=n.oxw(3).$implicit,t=n.oxw(2);n.Q6J("appA11yTitle",n.lcZ(1,2,t.accessAllLabelId(e))),n.xp6(2),n.hij("\n            ",n.lcZ(3,4,"canEdit"),"\n            ")}}function k(e,t){if(1&e&&(n.TgZ(0,"div",48),n.ALo(1,"i18n"),n._uU(2),n.ALo(3,"i18n"),n.qZA()),2&e){const e=n.oxw(3).$implicit,t=n.oxw(2);n.Q6J("title",n.lcZ(1,2,t.permissionLabelId(e.readonlyPermission))),n.xp6(2),n.hij("\n            ",n.lcZ(3,4,t.permissionLabelId(e.readonlyPermission)),"\n          ")}}function D(e,t){if(1&e&&(n._uU(0,"\n          "),n.YNc(1,Q,6,6,"div",44),n._uU(2,"\n\n          "),n.YNc(3,k,4,6,"div",45),n._uU(4,"\n        ")),2&e){const e=n.oxw(2).$implicit;n.xp6(1),n.Q6J("ngIf",e.accessAllItems),n.xp6(2),n.Q6J("ngIf",e.readonly)}}function E(e,t){if(1&e&&(n.TgZ(0,"td",7),n._uU(1,"\n        "),n.YNc(2,F,19,8,"ng-container",37),n._uU(3,"\n\n        "),n.YNc(4,D,5,2,"ng-template",null,38,n.W1O),n._uU(6,"\n      "),n.qZA()),2&e){const e=n.MAs(5),t=n.oxw().$implicit,i=n.oxw(2);n.xp6(2),n.Q6J("ngIf",i.canEditItemPermission(t))("ngIfElse",e)}}function $(e,t){if(1&e&&(n.TgZ(0,"td",7),n._uU(1),n.ALo(2,"userType"),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.hij("\n        ",n.xi3(2,1,e.role,"-"),"\n      ")}}function P(e,t){if(1&e&&(n.TgZ(0,"td",7),n._uU(1),n.qZA()),2&e){const e=n.oxw().$implicit;let t;n.xp6(1),n.hij("\n        ",null!==(t=e.viaGroupName)&&void 0!==t?t:"-","\n      ")}}function R(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",49),n.NdJ("click",(function(){n.CHM(e);const t=n.oxw().$implicit,i=n.oxw(2);return i.selectionList.deselectItem(t.id),n.KtG(i.handleBlur())})),n.ALo(1,"i18n"),n.qZA()}if(2&e){const e=n.oxw().$implicit,t=n.oxw(2);n.hYB("appA11yTitle","",n.lcZ(1,3,"remove")," ",e.labelName,""),n.Q6J("disabled",t.disabled)}}const B=function(e){return{"tw-text-muted":e}};function H(e,t){if(1&e&&(n.TgZ(0,"tr",22),n._uU(1,"\n      "),n.TgZ(2,"td",23),n._uU(3,"\n        "),n.YNc(4,z,14,4,"div",24),n._uU(5,"\n\n        "),n.YNc(6,Y,7,2,"div",25),n._uU(7,"\n      "),n.qZA(),n._uU(8,"\n\n      "),n.YNc(9,E,7,2,"td",26),n._uU(10,"\n\n      "),n.YNc(11,$,3,4,"td",26),n._uU(12,"\n\n      "),n.YNc(13,P,2,1,"td",26),n._uU(14,"\n\n      "),n.TgZ(15,"td",27),n._uU(16,"\n        "),n.YNc(17,R,2,5,"button",28),n._uU(18,"\n      "),n.qZA(),n._uU(19,"\n    "),n.qZA()),2&e){const e=t.$implicit,i=t.index,o=n.oxw(2);n.Q6J("formGroupName",i)("ngClass",n.VKq(8,B,e.readonly)),n.xp6(2),n.Q6J("ngSwitch",e.type),n.xp6(2),n.Q6J("ngSwitchCase",o.itemType.Member),n.xp6(5),n.Q6J("ngIf","hidden"!=o.permissionMode),n.xp6(2),n.Q6J("ngIf",o.showMemberRoles),n.xp6(2),n.Q6J("ngIf",o.showGroupColumn),n.xp6(4),n.Q6J("ngIf",!e.readonly)}}function j(e,t){if(1&e&&(n.TgZ(0,"tr"),n._uU(1,"\n      "),n.TgZ(2,"td",7),n._uU(3),n.qZA(),n._uU(4,"\n    "),n.qZA()),2&e){const e=n.oxw(2);n.xp6(3),n.Oqu(e.emptySelectionText)}}function K(e,t){if(1&e&&(n._uU(0,"\n    "),n.YNc(1,H,20,10,"tr",21),n._uU(2,"\n    "),n.YNc(3,j,5,1,"tr",4),n._uU(4,"\n  ")),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.selectionList.selectedItems),n.xp6(2),n.Q6J("ngIf",0==e.selectionList.selectedItems.length)}}var V;!function(e){e.Hidden="hidden",e.Readonly="readonly",e.Edit="edit"}(V||(V={}));class W{get items(){return this.selectionList.allItems}set items(e){var t;const i=(null!==(t=this.selectionList.formArray.getRawValue())&&void 0!==t?t:[]).concat(e.filter((e=>e.readonly)));this.selectionList.populateItems(e.map((e=>{var t;return e.icon=null!==(t=e.icon)&&void 0!==t?t:this.itemIcon(e),e})),i)}get permissionMode(){return this._permissionMode}set permissionMode(e){this._permissionMode=e,this.updateAllRowControlDisableStates()}constructor(e,t){this.formBuilder=e,this.i18nService=t,this.destroy$=new s.x,this.updateRowControlDisableState=(e,t)=>{t.readonly?e.disable():(e.enable(),(t.accessAllItems||this.permissionMode!=V.Edit)&&e.controls.permission.disable())},this.updateAllRowControlDisableStates=()=>{this.selectionList.forEachControlItem(((e,t)=>{this.updateRowControlDisableState(e,t)}))},this.selectionList=new c((e=>{const t=this.formBuilder.control(this.initialPermission),i=this.formBuilder.group({id:new o.NI(e.id),type:new o.NI(e.type),permission:t});return this.updateRowControlDisableState(i,e),i}),this._itemComparator.bind(this)),this.formGroup=this.formBuilder.group({items:this.selectionList.formArray}),this.itemType=a.zD,this.permissionList=[{perm:a.OU.View,labelId:"canView"},{perm:a.OU.ViewExceptPass,labelId:"canViewExceptPass"},{perm:a.OU.Edit,labelId:"canEdit"},{perm:a.OU.EditExceptPass,labelId:"canEditExceptPass"}],this.initialPermission=a.OU.View,this._permissionMode=V.Hidden}registerOnChange(e){this.notifyOnChange=e}registerOnTouched(e){this.notifyOnTouch=e}setDisabledState(e){this.disabled=e,this.disabled?this.formGroup.disable():(this.formGroup.enable(),this.updateAllRowControlDisableStates())}writeValue(e){if(this.pauseChangeNotification=!0,this.selectionList.deselectAll(),this.selectionList.selectItems(this.items.filter((e=>e.readonly)).map((e=>e.id))),null!=e){if(!Array.isArray(e))throw new Error("The access selector component only supports Array form values!");for(const t of e)this.selectionList.selectItem(t.id,t);this.pauseChangeNotification=!1}else this.pauseChangeNotification=!1}ngOnInit(){this.selectionList.formArray.valueChanges.pipe((0,l.R)(this.destroy$)).subscribe((e=>{this.notifyOnChange&&!this.pauseChangeNotification&&(this.selectionList.formArray.disabled?this.notifyOnChange([]):this.notifyOnChange(e))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}handleBlur(){this.notifyOnTouch&&this.notifyOnTouch()}selectItems(e){this.pauseChangeNotification=!0,this.selectionList.selectItems(e.map((e=>e.id))),this.pauseChangeNotification=!1,null!=this.notifyOnChange&&this.notifyOnChange(this.selectionList.formArray.value)}itemIcon(e){switch(e.type){case a.zD.Collection:return"bwi-collection";case a.zD.Group:return"bwi-users";case a.zD.Member:return"bwi-user"}}permissionLabelId(e){var t;return null===(t=this.permissionList.find((t=>t.perm==e)))||void 0===t?void 0:t.labelId}accessAllLabelId(e){return e.type==a.zD.Group?"groupAccessAll":"memberAccessAll"}canEditItemPermission(e){return this.permissionMode==V.Edit&&!e.readonly&&!e.accessAllItems}_itemComparator(e,t){return e.type-t.type||this.i18nService.collator.compare(e.listName,t.listName)||this.i18nService.collator.compare(e.labelName,t.labelName)||Number(t.readonly)-Number(e.readonly)}}W.ɵfac=function(e){return new(e||W)(n.Y36(o.qu),n.Y36(d.D))},W.ɵcmp=n.Xpm({type:W,selectors:[["bit-access-selector"]],inputs:{items:"items",permissionMode:"permissionMode",columnHeader:"columnHeader",selectorLabelText:"selectorLabelText",selectorHelpText:"selectorHelpText",emptySelectionText:"emptySelectionText",showMemberRoles:"showMemberRoles",showGroupColumn:"showGroupColumn"},features:[n._Bn([{provide:o.JU,useExisting:(0,n.Gpc)((()=>W)),multi:!0}])],decls:39,vars:11,consts:[[1,"tw-flex"],["class","tw-mr-3 tw-shrink-0",4,"ngIf"],[1,"tw-grow"],[1,"tw-w-full",3,"baseItems","removeSelectedItems","disabled","onItemsConfirmed","blur"],[4,"ngIf"],[3,"formGroup"],["header",""],["bitCell",""],["bitCell","","id","permissionColHeading",4,"ngIf"],["bitCell","","id","roleColHeading",4,"ngIf"],["bitCell","","id","groupColHeading",4,"ngIf"],["bitCell","",1,"tw-w-20"],["body","","formArrayName","items"],[1,"tw-mr-3","tw-shrink-0"],["bitInput","",1,"tw-h-[35px]",3,"disabled","ngModel","ngModelOptions","ngModelChange","blur"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["bitCell","","id","permissionColHeading"],[1,"tw-border","tw-border-solid","tw-border-transparent"],["bitCell","","id","roleColHeading"],["bitCell","","id","groupColHeading"],["bitRow","",3,"formGroupName","ngClass",4,"ngFor","ngForOf"],["bitRow","",3,"formGroupName","ngClass"],["bitCell","",3,"ngSwitch"],["class","tw-flex tw-items-center",4,"ngSwitchCase"],["class","tw-flex tw-items-center",4,"ngSwitchDefault"],["bitCell","",4,"ngIf"],["bitCell","",1,"tw-text-right"],["type","button","bitIconButton","bwi-close","buttonType","muted",3,"appA11yTitle","disabled","click",4,"ngIf"],[1,"tw-flex","tw-items-center"],["size","small",1,"tw-mr-3",3,"text"],[1,"tw-flex","tw-flex-col"],["bitBadge","","badgeType","secondary",4,"ngIf"],["class","tw-text-xs tw-text-muted",4,"ngIf"],["bitBadge","","badgeType","secondary"],[1,"tw-text-xs","tw-text-muted"],["aria-hidden","true",1,"bwi","tw-mr-3","tw-px-0.5","tw-text-2xl",3,"ngClass"],[4,"ngIf","ngIfElse"],["readOnlyPerm",""],[1,"sr-only",3,"for"],[1,"tw-relative","tw-inline-block"],["bitInput","","formControlName","permission",1,"tw-apperance-none","-tw-ml-3","tw-max-w-40","tw-appearance-none","tw-overflow-ellipsis","!tw-rounded","tw-border-transparent","!tw-bg-transparent","tw-pr-6","tw-font-bold","hover:tw-border-primary-700",3,"id","blur"],[1,"tw-absolute","tw-inset-y-0","tw-right-4","tw-mb-0","tw-flex","tw-items-center",3,"for"],[1,"bwi","bwi-sm","bwi-angle-down","tw-leading-[0]"],["class","tw-max-w-40 tw-overflow-hidden tw-overflow-ellipsis tw-whitespace-nowrap tw-border tw-border-solid tw-border-transparent tw-font-bold tw-text-muted",3,"appA11yTitle",4,"ngIf"],["class","tw-max-w-40 tw-overflow-hidden tw-overflow-ellipsis tw-whitespace-nowrap tw-font-bold tw-text-muted",3,"title",4,"ngIf"],[1,"tw-max-w-40","tw-overflow-hidden","tw-overflow-ellipsis","tw-whitespace-nowrap","tw-border","tw-border-solid","tw-border-transparent","tw-font-bold","tw-text-muted",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-filter","tw-ml-1"],[1,"tw-max-w-40","tw-overflow-hidden","tw-overflow-ellipsis","tw-whitespace-nowrap","tw-font-bold","tw-text-muted",3,"title"],["type","button","bitIconButton","bwi-close","buttonType","muted",3,"appA11yTitle","disabled","click"]],template:function(e,t){1&e&&(n._uU(0,"\n"),n._uU(1,"\n"),n.TgZ(2,"div",0),n._uU(3,"\n  "),n.YNc(4,S,12,8,"bit-form-field",1),n._uU(5,"\n\n  "),n.TgZ(6,"bit-form-field",2),n._uU(7,"\n    "),n.TgZ(8,"bit-label"),n._uU(9),n.qZA(),n._uU(10,"\n    "),n.TgZ(11,"bit-multi-select",3),n.NdJ("onItemsConfirmed",(function(e){return t.selectItems(e)}))("blur",(function(){return t.handleBlur()})),n.qZA(),n._uU(12,"\n    "),n.YNc(13,q,2,1,"bit-hint",4),n._uU(14,"\n  "),n.qZA(),n._uU(15,"\n"),n.qZA(),n._uU(16,"\n\n"),n.TgZ(17,"bit-table",5),n._uU(18,"\n  "),n.ynx(19,6),n._uU(20,"\n    "),n.TgZ(21,"tr"),n._uU(22,"\n      "),n.TgZ(23,"th",7),n._uU(24),n.qZA(),n._uU(25,"\n      "),n.YNc(26,M,6,3,"th",8),n._uU(27,"\n      "),n.YNc(28,J,3,3,"th",9),n._uU(29,"\n      "),n.YNc(30,O,3,3,"th",10),n._uU(31,"\n      "),n._UZ(32,"th",11),n._uU(33,"\n    "),n.qZA(),n._uU(34,"\n  "),n.BQk(),n._uU(35,"\n  "),n.YNc(36,K,5,2,"ng-template",12),n._uU(37,"\n"),n.qZA(),n._uU(38,"\n")),2&e&&(n.xp6(4),n.Q6J("ngIf","edit"==t.permissionMode),n.xp6(5),n.Oqu(t.selectorLabelText),n.xp6(2),n.Q6J("baseItems",t.selectionList.deselectedItems)("removeSelectedItems",!0)("disabled",t.disabled),n.xp6(2),n.Q6J("ngIf",t.selectorHelpText),n.xp6(4),n.Q6J("formGroup",t.formGroup),n.xp6(7),n.Oqu(t.columnHeader),n.xp6(2),n.Q6J("ngIf","hidden"!=t.permissionMode),n.xp6(2),n.Q6J("ngIf",t.showMemberRoles),n.xp6(2),n.Q6J("ngIf",t.showGroupColumn))},dependencies:[u.mk,u.sg,u.O5,u.RF,u.n9,u.ED,o.YN,o.Kr,o.EJ,o.JJ,o.JL,o.On,o.sg,o.u,o.x0,o.CE,p.B,h.A,g.l,m.d,f.G,b.O,v.u,w.M,U.Q,_.a,x.Y,Z.v,_.f,A.C,C],encapsulation:2})},34632:(e,t,i)=>{i.d(t,{E2:()=>r,OU:()=>n,d4:()=>l,zD:()=>o});var n,o,s=i(18376);!function(e){e.View="view",e.ViewExceptPass="viewExceptPass",e.Edit="edit",e.EditExceptPass="editExceptPass"}(n||(n={})),function(e){e[e.Collection=0]="Collection",e[e.Group=1]="Group",e[e.Member=2]="Member"}(o||(o={}));const l=e=>e.readOnly?e.hidePasswords?n.ViewExceptPass:n.View:e.hidePasswords?n.EditExceptPass:n.Edit,r=e=>new s.KF({id:e.id,readOnly:c(e.permission),hidePasswords:a(e.permission)}),c=e=>[n.View,n.ViewExceptPass].includes(e),a=e=>[n.ViewExceptPass,n.EditExceptPass].includes(e)},1176:(e,t,i)=>{i.d(t,{k:()=>s});var n=i(71146),o=i(24852);class s{}s.ɵfac=function(e){return new(e||s)},s.ɵmod=o.oAB({type:s}),s.ɵinj=o.cJS({imports:[n.m]})},14309:(e,t,i)=>{i.d(t,{E2:()=>s.E2,R9:()=>n.R,d4:()=>s.d4,k4:()=>o.k,zD:()=>s.zD});var n=i(36689),o=i(1176),s=i(34632)},13544:(e,t,i)=>{i.d(t,{yx:()=>b,sn:()=>f,PV:()=>re,ku:()=>ne});var n=i(27420),o=i(27406),s=i(1176),l=i(65017),r=i(98645),c=i(54019),a=i(92716),d=i(84598),u=i(30359),p=i(33031),h=i(68362),g=i(43493),m=i(58691);var f,b,v=i(18376),w=i(14309),U=i(24852),_=i(78627),x=i(99721),Z=i(80361),A=i(19419),y=i(33245),C=i(62374),I=i(98205),T=i(46246),S=i(36338),q=i(81974),M=i(29465),J=i(24637),O=i(11512),N=i(36179),L=i(44358),z=i(21656),Y=i(28975),G=i(30469),F=i(17731),Q=i(26536),k=i(36689),D=i(82933),E=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function l(e){try{c(n.next(e))}catch(t){s(t)}}function r(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(l,r)}c((n=n.apply(e,t||[])).next())}))};function $(e,t){if(1&e&&(U.TgZ(0,"span",11),U._uU(1),U.qZA()),2&e){const e=U.oxw(2);U.xp6(1),U.Oqu(e.collection.name)}}function P(e,t){if(1&e&&(U.ynx(0),U._uU(1),U.ALo(2,"i18n"),U.YNc(3,$,2,1,"span",10),U._uU(4,"\n      "),U.BQk()),2&e){const e=U.oxw();U.xp6(1),U.hij("\n        ",U.lcZ(2,2,"editCollection"),"\n        "),U.xp6(2),U.Q6J("ngIf",!e.loading)}}function R(e,t){1&e&&(U.ynx(0),U._uU(1),U.ALo(2,"i18n"),U.BQk()),2&e&&(U.xp6(1),U.hij("\n        ",U.lcZ(2,1,"newCollection"),"\n      "))}function B(e,t){1&e&&(U.ynx(0,null,12),U._uU(2,"\n        "),U._UZ(3,"i",13),U._uU(4,"\n      "),U.BQk())}function H(e,t){if(1&e&&(U.TgZ(0,"bit-option",24),U.ALo(1,"i18n"),U._uU(2,"\n              "),U.qZA()),2&e){const e=U.oxw(2);U.hYB("label","",e.deletedParentName," (",U.lcZ(1,3,"deleted"),")"),U.Q6J("value",e.deletedParentName)}}function j(e,t){if(1&e&&(U.TgZ(0,"bit-option",25),U._uU(1,"\n              "),U.qZA()),2&e){const e=t.$implicit;U.Q6J("value",e.name)("label",e.name)}}function K(e,t){if(1&e&&(U._UZ(0,"bit-access-selector",26),U.ALo(1,"i18n"),U.ALo(2,"i18n"),U.ALo(3,"i18n"),U.ALo(4,"i18n")),2&e){const e=U.oxw(2);U.Q6J("permissionMode",e.PermissionMode.Edit)("items",e.accessItems)("columnHeader",U.lcZ(1,6,"groupAndMemberColumnHeader"))("selectorLabelText",U.lcZ(2,8,"selectGroupsAndMembers"))("selectorHelpText",U.lcZ(3,10,"userPermissionOverrideHelper"))("emptySelectionText",U.lcZ(4,12,"noMembersOrGroupsAdded"))}}function V(e,t){if(1&e&&(U._UZ(0,"bit-access-selector",27),U.ALo(1,"i18n"),U.ALo(2,"i18n"),U.ALo(3,"i18n")),2&e){const e=U.oxw(2);U.Q6J("permissionMode",e.PermissionMode.Edit)("items",e.accessItems)("columnHeader",U.lcZ(1,5,"memberColumnHeader"))("selectorLabelText",U.lcZ(2,7,"selectMembers"))("emptySelectionText",U.lcZ(3,9,"noMembersAdded"))}}function W(e,t){if(1&e){const e=U.EpF();U.TgZ(0,"bit-tab-group",14),U.NdJ("selectedIndexChange",(function(t){U.CHM(e);const i=U.oxw();return U.KtG(i.tabIndex=t)})),U._uU(1,"\n        "),U.TgZ(2,"bit-tab",15),U.ALo(3,"i18n"),U._uU(4,"\n          "),U.TgZ(5,"bit-form-field"),U._uU(6,"\n            "),U.TgZ(7,"bit-label"),U._uU(8),U.ALo(9,"i18n"),U.qZA(),U._uU(10,"\n            "),U._UZ(11,"input",16),U._uU(12,"\n          "),U.qZA(),U._uU(13,"\n\n          "),U.TgZ(14,"bit-form-field"),U._uU(15,"\n            "),U.TgZ(16,"bit-label"),U._uU(17),U.ALo(18,"i18n"),U.qZA(),U._uU(19,"\n            "),U._UZ(20,"input",17),U._uU(21,"\n            "),U.TgZ(22,"bit-hint"),U._uU(23),U.ALo(24,"i18n"),U.qZA(),U._uU(25,"\n          "),U.qZA(),U._uU(26,"\n\n          "),U.TgZ(27,"bit-form-field"),U._uU(28,"\n            "),U.TgZ(29,"bit-label"),U._uU(30),U.ALo(31,"i18n"),U.qZA(),U._uU(32,"\n            "),U.TgZ(33,"bit-select",18),U._uU(34,"\n              "),U.TgZ(35,"bit-option",19),U.ALo(36,"i18n"),U._uU(37," "),U.qZA(),U._uU(38,"\n              "),U.YNc(39,H,3,5,"bit-option",20),U._uU(40,"\n              "),U.YNc(41,j,2,2,"bit-option",21),U._uU(42,"\n            "),U.qZA(),U._uU(43,"\n          "),U.qZA(),U._uU(44,"\n        "),U.qZA(),U._uU(45,"\n        "),U.TgZ(46,"bit-tab",15),U.ALo(47,"i18n"),U._uU(48,"\n          "),U.YNc(49,K,5,14,"bit-access-selector",22),U._uU(50,"\n          "),U.YNc(51,V,4,11,"bit-access-selector",23),U._uU(52,"\n        "),U.qZA(),U._uU(53,"\n      "),U.qZA()}if(2&e){const e=U.oxw();U.Q6J("selectedIndex",e.tabIndex),U.xp6(2),U.s9C("label",U.lcZ(3,13,"collectionInfo")),U.xp6(6),U.Oqu(U.lcZ(9,15,"name")),U.xp6(9),U.Oqu(U.lcZ(18,17,"externalId")),U.xp6(6),U.Oqu(U.lcZ(24,19,"externalIdDesc")),U.xp6(7),U.Oqu(U.lcZ(31,21,"nestCollectionUnder")),U.xp6(5),U.Q6J("value",void 0)("label",U.lcZ(36,23,"noCollection")),U.xp6(4),U.Q6J("ngIf",e.deletedParentName),U.xp6(2),U.Q6J("ngForOf",e.nestOptions),U.xp6(5),U.s9C("label",U.lcZ(47,25,"access")),U.xp6(3),U.Q6J("ngIf",e.organization.useGroups),U.xp6(2),U.Q6J("ngIf",!e.organization.useGroups)}}function X(e,t){if(1&e&&(U._UZ(0,"button",28),U.ALo(1,"i18n")),2&e){const e=U.oxw();U.Q6J("appA11yTitle",U.lcZ(1,3,"delete"))("bitAction",e.delete)("disabled",e.loading)}}!function(e){e[e.Info=0]="Info",e[e.Access=1]="Access"}(f||(f={})),function(e){e.Saved="saved",e.Canceled="canceled",e.Deleted="deleted"}(b||(b={}));class ee{constructor(e,t,i,n,o,s,l,a,d,u){var p,h;this.params=e,this.formBuilder=t,this.dialogRef=i,this.organizationService=n,this.groupService=o,this.collectionService=s,this.i18nService=l,this.platformUtilsService=a,this.organizationUserService=d,this.dialogService=u,this.destroy$=new c.x,this.loading=!0,this.nestOptions=[],this.accessItems=[],this.formGroup=this.formBuilder.group({name:["",[r.kI.required,(h=["/"],e=>{if(!(e instanceof r.NI))throw new Error("forbiddenCharacters only supports validating FormControls");if(null===e.value||void 0===e.value)return null;const t=String(e.value);for(const i of t)if(h.includes(i))return{forbiddenCharacters:{value:e.value,characters:h}};return null})]],externalId:"",parent:void 0,access:[[]]}),this.PermissionMode=w.R9,this.submit=()=>E(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return void(this.tabIndex===f.Access&&this.platformUtilsService.showToast("error",null,this.i18nService.t("fieldOnTabRequiresAttention",this.i18nService.t("collectionInfo"))));const e=new v.ec;e.id=this.params.collectionId,e.organizationId=this.params.organizationId,e.externalId=this.formGroup.controls.externalId.value,e.groups=this.formGroup.controls.access.value.filter((e=>e.type===w.zD.Group)).map(w.E2),e.users=this.formGroup.controls.access.value.filter((e=>e.type===w.zD.Member)).map(w.E2);const t=this.formGroup.controls.parent.value;e.name=t?`${t}/${this.formGroup.controls.name.value}`:this.formGroup.controls.name.value,yield this.collectionService.save(e),this.platformUtilsService.showToast("success",null,this.i18nService.t(this.editMode?"editedCollectionId":"createdCollectionId",e.name)),this.close(b.Saved)})),this.delete=()=>E(this,void 0,void 0,(function*(){var e,t;if(!(yield this.dialogService.openSimpleDialog({title:null===(e=this.collection)||void 0===e?void 0:e.name,content:{key:"deleteCollectionConfirmation"},type:g.rC.WARNING}))&&this.params.collectionId)return!1;yield this.collectionService.delete(this.params.organizationId,this.params.collectionId),this.platformUtilsService.showToast("success",null,this.i18nService.t("deletedCollectionId",null===(t=this.collection)||void 0===t?void 0:t.name)),this.close(b.Deleted)})),this.tabIndex=null!==(p=e.initialTab)&&void 0!==p?p:f.Info}ngOnInit(){const e=(0,a.of)(this.organizationService.get(this.params.organizationId)).pipe((0,d.d)({refCount:!0,bufferSize:1})),t=e.pipe((0,u.w)((e=>e.useGroups?this.groupService.getAll(this.params.organizationId):(0,a.of)([]))));(0,p.a)({organization:e,collections:this.collectionService.getAll(this.params.organizationId),collectionDetails:this.params.collectionId?this.collectionService.get(this.params.organizationId,this.params.collectionId):(0,a.of)(null),groups:t,users:this.organizationUserService.getAllUsers(this.params.organizationId)}).pipe((0,h.R)(this.destroy$)).subscribe((({organization:e,collections:t,collectionDetails:i,groups:n,users:o})=>{var s;if(this.organization=e,this.accessItems=[].concat(n.map(te),o.data.map(ie)),this.params.collectionId){if(this.collection=t.find((e=>e.id===this.collectionId)),this.nestOptions=t.filter((e=>e.id!==this.collectionId)),!this.collection)throw new Error("Could not find collection to edit.");const{name:e,parent:n}=function(e){var t;const i=null===(t=e.name)||void 0===t?void 0:t.split("/"),n=i[i.length-1],o=i.length>1?i.slice(0,-1).join("/"):void 0;return{name:n,parent:o}}(this.collection);void 0===n||this.nestOptions.find((e=>e.name===n))||(this.deletedParentName=n);const o=function(e){if(null==e)return[];return[].concat(e.groups.map((e=>({id:e.id,type:w.zD.Group,permission:(0,w.d4)(e)}))),e.users.map((e=>({id:e.id,type:w.zD.Member,permission:(0,w.d4)(e)}))))}(i);this.formGroup.patchValue({name:e,externalId:this.collection.externalId,parent:n,access:o})}else{this.nestOptions=t;const e=t.find((e=>e.id===this.params.parentCollectionId));this.formGroup.patchValue({parent:null!==(s=null==e?void 0:e.name)&&void 0!==s?s:void 0})}this.loading=!1}))}get collectionId(){return this.params.collectionId}get editMode(){return null!=this.params.collectionId}cancel(){return E(this,void 0,void 0,(function*(){this.close(b.Canceled)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}close(e){this.dialogRef.close(e)}}function te(e){return{id:e.id,type:w.zD.Group,listName:e.name,labelName:e.name,accessAllItems:e.accessAll,readonly:e.accessAll}}function ie(e){var t,i;return{id:e.id,type:w.zD.Member,email:e.email,role:e.type,listName:(null===(t=e.name)||void 0===t?void 0:t.length)>0?`${e.name} (${e.email})`:e.email,labelName:null!==(i=e.name)&&void 0!==i?i:e.email,status:e.status,accessAllItems:e.accessAll,readonly:e.accessAll}}function ne(e,t){return e.open(ee,t)}ee.ɵfac=function(e){return new(e||ee)(U.Y36(l.Kt),U.Y36(r.qu),U.Y36(l.zj),U.Y36(m.Mn),U.Y36(v.lT),U.Y36(v.m$),U.Y36(_.D),U.Y36(x.P),U.Y36(Z.t),U.Y36(g.eo))},ee.ɵcmp=U.Xpm({type:ee,selectors:[["ng-component"]],decls:33,vars:16,consts:[[3,"formGroup","bitSubmit"],["dialogSize","large",3,"disablePadding"],["bitDialogTitle",""],[4,"ngIf"],["bitDialogContent",""],[3,"selectedIndex","selectedIndexChange",4,"ngIf"],["bitDialogFooter",""],["type","submit","bitButton","","bitFormButton","","buttonType","primary",3,"disabled"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"disabled","click"],["type","button","bitIconButton","bwi-trash","buttonType","danger","class","tw-ml-auto","bitFormButton","",3,"appA11yTitle","bitAction","disabled",4,"ngIf"],["class","tw-text-sm tw-normal-case tw-text-muted",4,"ngIf"],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],["spinner",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-lg","bwi-spin"],[3,"selectedIndex","selectedIndexChange"],[3,"label"],["bitInput","","appAutofocus","","formControlName","name"],["bitInput","","formControlName","externalId"],["bitInput","","formControlName","parent"],[3,"value","label"],["disabled","","icon","bwi-collection",3,"value","label",4,"ngIf"],["icon","bwi-collection",3,"value","label",4,"ngFor","ngForOf"],["formControlName","access",3,"permissionMode","items","columnHeader","selectorLabelText","selectorHelpText","emptySelectionText",4,"ngIf"],["formControlName","access",3,"permissionMode","items","columnHeader","selectorLabelText","emptySelectionText",4,"ngIf"],["disabled","","icon","bwi-collection",3,"value","label"],["icon","bwi-collection",3,"value","label"],["formControlName","access",3,"permissionMode","items","columnHeader","selectorLabelText","selectorHelpText","emptySelectionText"],["formControlName","access",3,"permissionMode","items","columnHeader","selectorLabelText","emptySelectionText"],["type","button","bitIconButton","bwi-trash","buttonType","danger","bitFormButton","",1,"tw-ml-auto",3,"appA11yTitle","bitAction","disabled"]],template:function(e,t){1&e&&(U.TgZ(0,"form",0),U._uU(1,"\n  "),U.TgZ(2,"bit-dialog",1),U._uU(3,"\n    "),U.TgZ(4,"span",2),U._uU(5,"\n      "),U.YNc(6,P,5,4,"ng-container",3),U._uU(7,"\n      "),U.YNc(8,R,3,3,"ng-container",3),U._uU(9,"\n    "),U.qZA(),U._uU(10,"\n    "),U.TgZ(11,"div",4),U._uU(12,"\n      "),U.YNc(13,B,5,0,"ng-container",3),U._uU(14,"\n      "),U.YNc(15,W,54,27,"bit-tab-group",5),U._uU(16,"\n    "),U.qZA(),U._uU(17,"\n    "),U.ynx(18,6),U._uU(19,"\n      "),U.TgZ(20,"button",7),U._uU(21),U.ALo(22,"i18n"),U.qZA(),U._uU(23,"\n      "),U.TgZ(24,"button",8),U.NdJ("click",(function(){return t.cancel()})),U._uU(25),U.ALo(26,"i18n"),U.qZA(),U._uU(27,"\n      "),U.YNc(28,X,2,5,"button",9),U._uU(29,"\n    "),U.BQk(),U._uU(30,"\n  "),U.qZA(),U._uU(31,"\n"),U.qZA(),U._uU(32,"\n")),2&e&&(U.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),U.xp6(2),U.Q6J("disablePadding",!t.loading),U.xp6(4),U.Q6J("ngIf",t.editMode),U.xp6(2),U.Q6J("ngIf",!t.editMode),U.xp6(5),U.Q6J("ngIf",t.loading),U.xp6(2),U.Q6J("ngIf",!t.loading),U.xp6(5),U.Q6J("disabled",t.loading),U.xp6(1),U.hij("\n        ",U.lcZ(22,12,"save"),"\n      "),U.xp6(3),U.Q6J("disabled",t.loading),U.xp6(1),U.hij("\n        ",U.lcZ(26,14,"cancel"),"\n      "),U.xp6(3),U.Q6J("ngIf",t.editMode&&(null==t.organization?null:t.organization.canDeleteAssignedCollections)))},dependencies:[A.sg,A.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,y.B,C.U,I.Q,T.b,S.u,q.r,M.a,J.d,O.G,N.u,L.M,z.Q,Y.H,G.x,F.Q,Q.i,k.f,D.C],encapsulation:2});var oe=i(31393),se=i(71146);class le{}le.ɵfac=function(e){return new(e||le)},le.ɵmod=U.oAB({type:le}),le.ɵinj=U.cJS({imports:[se.m,s.k,oe.A]});class re{}re.ɵfac=function(e){return new(e||re)},re.ɵmod=U.oAB({type:re}),re.ɵinj=U.cJS({imports:[o.m,le,s.k,n.t,o.m,le,s.k,n.t]})},6378:(e,t,i)=>{i.d(t,{O:()=>w});var n=i(8776),o=i(24852),s=i(98645),l=i(12546),r=i(23182),c=i(78627),a=i(19419),d=i(66385),u=i(49399);function p(e,t){if(1&e&&(o._uU(0,"\n    "),o._UZ(1,"i",4),o._uU(2,"\n  ")),2&e){const e=o.oxw();o.xp6(1),o.Q6J("title",e.loadingText)}}function h(e,t){if(1&e&&o._UZ(0,"i",8),2&e){const e=o.oxw().item;o.Gre("tw-mr-1 bwi bwi-fw ",e.icon,"")}}function g(e,t){if(1&e){const e=o.EpF();o._uU(0,"\n    "),o.TgZ(1,"button",5),o.NdJ("click",(function(){const t=o.CHM(e),i=t.item,n=t.clear;return o.KtG(n(i))})),o._uU(2,"\n      "),o.YNc(3,h,1,3,"i",6),o._uU(4),o._UZ(5,"i",7),o._uU(6,"\n    "),o.qZA(),o._uU(7,"\n  ")}if(2&e){const e=t.item,i=o.oxw();o.xp6(1),o.Q6J("disabled",i.disabled),o.xp6(2),o.Q6J("ngIf",null!=e.icon),o.xp6(1),o.hij("\n      ",e.labelName,"\n      ")}}function m(e,t){1&e&&o._UZ(0,"i",14)}function f(e,t){if(1&e&&o._UZ(0,"i",8),2&e){const e=o.oxw().item;o.Gre("bwi bwi-fw ",e.icon,"")}}function b(e,t){if(1&e&&(o._uU(0,"\n    "),o.TgZ(1,"div",9),o._uU(2,"\n      "),o.TgZ(3,"div",10),o._uU(4,"\n        "),o.YNc(5,m,1,0,"i",11),o._uU(6,"\n      "),o.qZA(),o._uU(7,"\n      "),o.TgZ(8,"div",12),o._uU(9,"\n        "),o.YNc(10,f,1,3,"i",6),o._uU(11,"\n      "),o.qZA(),o._uU(12,"\n      "),o.TgZ(13,"div",13),o._uU(14),o.qZA(),o._uU(15,"\n    "),o.qZA(),o._uU(16,"\n  ")),2&e){const e=t.item,i=o.oxw();o.xp6(5),o.Q6J("ngIf",i.isSelected(e)),o.xp6(5),o.Q6J("ngIf",null!=e.icon),o.xp6(4),o.hij("\n        ",e.listName,"\n      ")}}let v=0;class w{constructor(e,t){this.i18nService=e,this.ngControl=t,this.removeSelectedItems=!1,this.loading=!1,this.disabled=!1,this.searchInputId="search-input-"+v++,this.onItemsConfirmed=new o.vpe,this.keyDown=e=>!(!this.select.isOpen&&"Enter"===e.key&&!(0,n.Vb)(e))&&(this.select.isOpen&&"Enter"===e.key&&!(0,n.Vb)(e)?(this.select.close(),e.preventDefault(),!1):!(this.select.isOpen&&"Escape"===e.key&&!(0,n.Vb)(e))||(this.selectedItems=[],this.select.close(),e.stopPropagation(),!1)),this.id="bit-multi-select-"+v++,null!=t&&(t.valueAccessor=this)}ngOnInit(){var e;this.placeholder=null!==(e=this.placeholder)&&void 0!==e?e:this.i18nService.t("multiSelectPlaceholder"),this.loadingText=this.i18nService.t("multiSelectLoading")}isSelected(e){var t;return null!=(null===(t=this.selectedItems)||void 0===t?void 0:t.find((t=>t.id===e.id)))}onDropdownClosed(){if(null!=this.selectedItems&&0!=this.selectedItems.length&&(this.onItemsConfirmed.emit(this.selectedItems),this.removeSelectedItems)){let e=this.baseItems;this.selectedItems.forEach((t=>{e=e.filter((e=>t.id!==e.id))})),this.selectedItems=null,this.baseItems=e}}writeValue(e){this.selectedItems=e}registerOnChange(e){this.notifyOnChange=e}registerOnTouched(e){this.notifyOnTouched=e}setDisabledState(e){this.disabled=e}onChange(e){this.notifyOnChange&&this.notifyOnChange(e)}onBlur(){this.notifyOnTouched&&this.notifyOnTouched()}get ariaDescribedBy(){return this._ariaDescribedBy}set ariaDescribedBy(e){var t;this._ariaDescribedBy=e,null===(t=this.select)||void 0===t||t.searchInput.nativeElement.setAttribute("aria-describedby",e)}get labelForId(){return this.searchInputId}get required(){var e,t,i,n;return null!==(n=null!==(e=this._required)&&void 0!==e?e:null===(i=null===(t=this.ngControl)||void 0===t?void 0:t.control)||void 0===i?void 0:i.hasValidator(s.kI.required))&&void 0!==n&&n}set required(e){this._required=null!=e&&!1!==e}get hasError(){var e,t;return"INVALID"===(null===(e=this.ngControl)||void 0===e?void 0:e.status)&&(null===(t=this.ngControl)||void 0===t?void 0:t.touched)}get error(){var e,t;const i=Object.keys(null===(e=this.ngControl)||void 0===e?void 0:e.errors)[0];return[i,null===(t=this.ngControl)||void 0===t?void 0:t.errors[i]]}}w.ɵfac=function(e){return new(e||w)(o.Y36(c.D),o.Y36(s.a5,10))},w.ɵcmp=o.Xpm({type:w,selectors:[["bit-multi-select"]],viewQuery:function(e,t){if(1&e&&o.Gf(l.w9,5),2&e){let e;o.iGM(e=o.CRH())&&(t.select=e.first)}},hostVars:3,hostBindings:function(e,t){2&e&&(o.Ikx("id",t.id),o.uIk("aria-describedby",t.ariaDescribedBy)("required",t.required))},inputs:{baseItems:"baseItems",removeSelectedItems:"removeSelectedItems",placeholder:"placeholder",loading:"loading",disabled:"disabled",selectedItems:"selectedItems",id:"id",required:"required"},outputs:{onItemsConfirmed:"onItemsConfirmed"},features:[o._Bn([{provide:r.v,useExisting:w}])],decls:11,vars:18,consts:[["bindLabel","listName","groupBy","parentGrouping","appendTo","body",3,"items","ngModel","placeholder","loading","loadingText","notFoundText","clearAllText","multiple","selectOnTab","closeOnSelect","disabled","clearSearchOnAdd","labelForId","keyDownFn","ngModelChange","blur","close"],["ng-loadingspinner-tmp",""],["ng-label-tmp",""],["ng-option-tmp",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","tw-mr-1",3,"title"],["type","button","bitBadge","","badgeType","primary",1,"tw-mr-1","disabled:tw-border-0",3,"disabled","click"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-close","bwi-sm","tw-ml-1"],["aria-hidden","true"],[1,"tw-flex"],[1,"tw-w-7","tw-flex-none"],["class","bwi bwi-fw bwi-check","aria-hidden","true",4,"ngIf"],[1,"tw-mr-2","tw-flex-initial"],[1,"tw-flex-1"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-check"]],template:function(e,t){1&e&&(o.TgZ(0,"ng-select",0),o.NdJ("ngModelChange",(function(e){return t.selectedItems=e}))("ngModelChange",(function(e){return t.onChange(e)}))("blur",(function(){return t.onBlur()}))("close",(function(){return t.onDropdownClosed()})),o.ALo(1,"i18n"),o.ALo(2,"i18n"),o._uU(3,"\n  "),o.YNc(4,p,3,1,"ng-template",1),o._uU(5,"\n  "),o.YNc(6,g,8,3,"ng-template",2),o._uU(7,"\n  "),o.YNc(8,b,17,3,"ng-template",3),o._uU(9,"\n"),o.qZA(),o._uU(10,"\n")),2&e&&(o.s9C("notFoundText",o.lcZ(1,14,"multiSelectNotFound")),o.s9C("clearAllText",o.lcZ(2,16,"multiSelectClearAll")),o.Q6J("items",t.baseItems)("ngModel",t.selectedItems)("placeholder",t.placeholder)("loading",t.loading)("loadingText",t.loadingText)("multiple",!0)("selectOnTab",!0)("closeOnSelect",!1)("disabled",t.disabled)("clearSearchOnAdd",!0)("labelForId",t.labelForId)("keyDownFn",t.keyDown))},dependencies:[a.O5,s.JJ,s.On,l.w9,l.ir,l.mR,l.dk,d.l,u.C],encapsulation:2})},27420:(e,t,i)=>{i.d(t,{t:()=>r});var n=i(98645),o=i(83758),s=i(36903),l=i(24852);class r{}r.ɵfac=function(e){return new(e||r)},r.ɵmod=l.oAB({type:r}),r.ɵinj=l.cJS({imports:[s.m,o.g,n.u5]})},17731:(e,t,i)=>{i.d(t,{Q:()=>x});var n=i(22450),o=i(97334),s=i(24852),l=i(54019),r=i(68362),c=i(97327),a=i(26536),d=i(19419),u=i(52850),p=i(59047),h=i(25530);function g(e,t){}class m{constructor(){this.preserveContent=!1}get hidden(){return!this.active||null}get active(){return this._active}set active(e){this._active=e,this._active&&(this._firstRender=!0)}get tabContent(){return this.active||this.preserveContent&&this._firstRender?this.content:null}}function f(e,t){if(1&e&&(s._uU(0,"\n          "),s.GkF(1,5),s._uU(2,"\n        ")),2&e){const e=s.oxw(2).$implicit;s.xp6(1),s.Q6J("ngTemplateOutlet",e.templateLabel.templateRef)}}function b(e,t){if(1&e&&s._uU(0),2&e){const e=s.oxw(2).$implicit;s.Oqu(e.textLabel)}}function v(e,t){if(1&e&&(s._uU(0,"\n        "),s.YNc(1,f,3,1,"ng-template",7),s._uU(2,"\n\n        "),s.YNc(3,b,1,1,"ng-template",null,8,s.W1O),s._uU(5,"\n      ")),2&e){const e=s.MAs(4),t=s.oxw().$implicit;s.xp6(1),s.Q6J("ngIf",t.templateLabel)("ngIfElse",e)}}function w(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",4),s.NdJ("click",(function(){const t=s.CHM(e).index,i=s.oxw();return s.KtG(i.selectTab(t))})),s._uU(1,"\n      "),s.GkF(2,5),s._uU(3,"\n\n      "),s.YNc(4,v,6,2,"ng-template",null,6,s.W1O),s._uU(6,"\n    "),s.qZA()}if(2&e){const e=t.$implicit,i=t.index,n=s.MAs(5),o=s.oxw();s.Q6J("id",o.getTabLabelId(i))("active",e.isActive)("disabled",e.disabled),s.uIk("aria-selected",o.selectedIndex===i)("tabindex",o.selectedIndex===i?0:-1),s.xp6(2),s.Q6J("ngTemplateOutlet",n)}}function U(e,t){if(1&e&&(s.TgZ(0,"bit-tab-body",9),s._uU(1,"\n  "),s.qZA()),2&e){const e=t.$implicit,i=t.index,n=s.oxw();s.Q6J("id",n.getTabContentId(i))("active",e.isActive)("content",e.content)("preserveContent",n.preserveContent),s.uIk("tabindex",e.contentTabIndex)("labeledby",n.getTabLabelId(i))}}m.ɵfac=function(e){return new(e||m)},m.ɵcmp=s.Xpm({type:m,selectors:[["bit-tab-body"]],hostVars:1,hostBindings:function(e,t){2&e&&s.uIk("hidden",t.hidden)},inputs:{content:"content",preserveContent:"preserveContent",active:"active"},decls:2,vars:1,consts:[[3,"cdkPortalOutlet"]],template:function(e,t){1&e&&(s.YNc(0,g,0,0,"ng-template",0),s._uU(1,"\n")),2&e&&s.Q6J("cdkPortalOutlet",t.tabContent)},dependencies:[h.Pl],encapsulation:2});let _=0;class x{get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this._indexToSelect=(0,o.su)(e,null)}constructor(){this.destroy$=new l.x,this._indexToSelect=0,this.label="",this.preserveContent=!1,this._selectedIndex=null,this.selectedIndexChange=new s.vpe,this.selectedTabChange=new s.vpe,this._groupId=_++}getTabContentId(e){return`bit-tab-content-${this._groupId}-${e}`}getTabLabelId(e){return`bit-tab-label-${this._groupId}-${e}`}selectTab(e){this.selectedIndex=e}ngAfterContentChecked(){const e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e){const t=null==this._selectedIndex;t||this.selectedTabChange.emit({index:e,tab:this.tabs.toArray()[e]}),Promise.resolve().then((()=>{this.tabs.forEach(((t,i)=>t.isActive=i===e)),t||this.selectedIndexChange.emit(e)})),this._selectedIndex=e,this.keyManager&&this.keyManager.setActiveItem(e)}}ngAfterViewInit(){this.keyManager=new n.Em(this.tabLabels).withHorizontalOrientation("ltr").withWrap().withHomeAndEnd()}ngAfterContentInit(){this.tabs.changes.pipe((0,r.R)(this.destroy$)).subscribe((()=>{const e=this._clampTabIndex(this._indexToSelect);if(e===this._selectedIndex){const t=this.tabs.toArray();let i;for(let e=0;e<t.length;e++)if(t[e].isActive){this._indexToSelect=this._selectedIndex=e,i=t[e];break}!i&&t[e]&&(t[e].isActive=!0,this.selectedTabChange.emit({index:e,tab:t[e]}))}}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}_clampTabIndex(e){return Math.min(this.tabs.length-1,Math.max(e||0,0))}}x.ɵfac=function(e){return new(e||x)},x.ɵcmp=s.Xpm({type:x,selectors:[["bit-tab-group"]],contentQueries:function(e,t,i){if(1&e&&s.Suo(i,a.i,4),2&e){let e;s.iGM(e=s.CRH())&&(t.tabs=e)}},viewQuery:function(e,t){if(1&e&&s.Gf(c.B,5),2&e){let e;s.iGM(e=s.CRH())&&(t.tabLabels=e)}},inputs:{label:"label",preserveContent:"preserveContent",selectedIndex:"selectedIndex"},outputs:{selectedIndexChange:"selectedIndexChange",selectedTabChange:"selectedTabChange"},decls:13,vars:3,consts:[["bitTabListContainer","","role","tablist",3,"keydown"],["bitTabListItem","","type","button","role","tab",3,"id","active","disabled","click",4,"ngFor","ngForOf"],[1,"tw-px-4","tw-pt-5"],["role","tabpanel",3,"id","active","content","preserveContent",4,"ngFor","ngForOf"],["bitTabListItem","","type","button","role","tab",3,"id","active","disabled","click"],[3,"ngTemplateOutlet"],["content",""],[3,"ngIf","ngIfElse"],["tabTextLabel",""],["role","tabpanel",3,"id","active","content","preserveContent"]],template:function(e,t){1&e&&(s.TgZ(0,"bit-tab-header"),s._uU(1,"\n  "),s.TgZ(2,"div",0),s.NdJ("keydown",(function(e){return t.keyManager.onKeydown(e)})),s._uU(3,"\n    "),s.YNc(4,w,7,6,"button",1),s._uU(5,"\n  "),s.qZA(),s._uU(6,"\n"),s.qZA(),s._uU(7,"\n"),s.TgZ(8,"div",2),s._uU(9,"\n  "),s.YNc(10,U,2,6,"bit-tab-body",3),s._uU(11,"\n"),s.qZA(),s._uU(12,"\n")),2&e&&(s.xp6(2),s.uIk("aria-label",t.label),s.xp6(2),s.Q6J("ngForOf",t.tabs),s.xp6(6),s.Q6J("ngForOf",t.tabs))},dependencies:[d.sg,d.O5,d.tP,u.M,c.B,p.Q,m],encapsulation:2})},26536:(e,t,i)=>{i.d(t,{i:()=>r});var n=i(25530),o=i(24852);class s{constructor(e){this.templateRef=e}}function l(e,t){1&e&&o.Hsn(0)}s.ɵfac=function(e){return new(e||s)(o.Y36(o.Rgc))},s.ɵdir=o.lG2({type:s,selectors:[["","bitTabLabel",""]]});class r{get content(){return this._contentPortal}constructor(e){this._viewContainerRef=e,this.disabled=!1,this.textLabel="",this._contentPortal=null}ngOnInit(){this._contentPortal=new n.UE(this.implicitContent,this._viewContainerRef)}}r.ɵfac=function(e){return new(e||r)(o.Y36(o.s_b))},r.ɵcmp=o.Xpm({type:r,selectors:[["bit-tab"]],contentQueries:function(e,t,i){if(1&e&&o.Suo(i,s,5),2&e){let e;o.iGM(e=o.CRH())&&(t.templateLabel=e.first)}},viewQuery:function(e,t){if(1&e&&o.Gf(o.Rgc,7),2&e){let e;o.iGM(e=o.CRH())&&(t.implicitContent=e.first)}},hostAttrs:["role","tabpanel"],inputs:{disabled:"disabled",textLabel:["label","textLabel"],contentTabIndex:"contentTabIndex"},ngContentSelectors:["*"],decls:2,vars:0,template:function(e,t){1&e&&(o.F$t(),o.YNc(0,l,1,0,"ng-template"),o._uU(1,"\n"))},encapsulation:2})}}]);
//# sourceMappingURL=126.d76f2662ee1e681106b4.js.map