"use strict";(self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[]).push([[434],{67434:(e,t,n)=>{n.r(t),n.d(t,{MembersModule:()=>Hn});var i=n(77494),o=n(71146),s=n(59355),r=n(65017),a=n(98645),l=n(54019),c=n(92716),u=n(84598),d=n(30359),p=n(33031),g=n(68362),h=n(66206),m=n(63550),U=n(95535),f=n(6099),b=n(21021),Z=n(98090),w=n(24852),_=n(55602),v=n(94820),A=n(56815),x=n(32100),y=n(80361),T=n(19419),C=n(33245),q=n(98205),k=n(46246),S=n(36338),I=n(66385),P=n(81974);class J{}class N{constructor(e){this.ngControl=e,this.inputClasses=["tw-appearance-none","tw-outline-none","tw-relative","tw-transition","tw-cursor-pointer","tw-inline-block","tw-rounded","tw-border","tw-border-solid","tw-border-secondary-500","tw-h-3.5","tw-w-3.5","tw-mr-1.5","tw-bottom-[-1px]","before:tw-content-['']","before:tw-block","before:tw-absolute","before:tw-inset-0","hover:tw-border-2","[&>label]:tw-border-2","focus-visible:tw-ring-2","focus-visible:tw-ring-offset-2","focus-visible:tw-ring-primary-700","disabled:tw-cursor-auto","disabled:tw-border","disabled:tw-bg-secondary-100","checked:tw-bg-primary-500","checked:tw-border-primary-500","checked:hover:tw-bg-primary-700","checked:hover:tw-border-primary-700","[&>label:hover]:checked:tw-bg-primary-700","[&>label:hover]:checked:tw-border-primary-700","checked:before:tw-bg-text-contrast","checked:before:tw-mask-image-[var(--mask-image)]","checked:before:tw-mask-position-[center]","checked:before:tw-mask-repeat-[no-repeat]","checked:disabled:tw-border-secondary-100","checked:disabled:tw-bg-secondary-100","checked:disabled:before:tw-bg-text-muted"],this.maskImage='url(\'data:image/svg+xml,%3Csvg class="svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="8" height="8" viewBox="0 0 10 10"%3E%3Cpath d="M0.5 6.2L2.9 8.6L9.5 1.4" fill="none" stroke="white" stroke-width="2"%3E%3C/path%3E%3C/svg%3E\')'}get disabled(){var e,t,n;return null!==(n=null!==(e=this._disabled)&&void 0!==e?e:null===(t=this.ngControl)||void 0===t?void 0:t.disabled)&&void 0!==n&&n}set disabled(e){this._disabled=null!=e&&!1!==e}get required(){var e,t,n,i;return null!==(i=null!==(e=this._required)&&void 0!==e?e:null===(n=null===(t=this.ngControl)||void 0===t?void 0:t.control)||void 0===n?void 0:n.hasValidator(a.kI.requiredTrue))&&void 0!==i&&i}set required(e){this._required=null!=e&&!1!==e}get hasError(){var e,t;return"INVALID"===(null===(e=this.ngControl)||void 0===e?void 0:e.status)&&(null===(t=this.ngControl)||void 0===t?void 0:t.touched)}get error(){const e=Object.keys(this.ngControl.errors)[0];return[e,this.ngControl.errors[e]]}}N.ɵfac=function(e){return new(e||N)(w.Y36(a.a5,10))},N.ɵcmp=w.Xpm({type:N,selectors:[["input","type","checkbox","bitCheckbox",""]],hostVars:5,hostBindings:function(e,t){2&e&&(w.Ikx("disabled",t.disabled),w.Tol(t.inputClasses),w.Udp("--mask-image",t.maskImage))},inputs:{disabled:"disabled",required:"required"},features:[w._Bn([{provide:J,useExisting:N}])],attrs:["type","checkbox","bitCheckbox",""],decls:0,vars:0,template:function(e,t){},encapsulation:2});var L=n(29465),z=n(24637),M=n(11512),O=n(97334),G=n(49399);function R(e,t){1&e&&(w.TgZ(0,"span",3),w._uU(1),w.ALo(2,"i18n"),w.qZA()),2&e&&(w.xp6(1),w.hij(" (",w.lcZ(2,1,"required"),")"))}function Q(e,t){1&e&&w.Hsn(0,2,["*ngIf","!hasError"])}function Y(e,t){if(1&e&&(w.TgZ(0,"div",4),w._uU(1,"\n  "),w._UZ(2,"i",5),w._uU(3),w.qZA()),2&e){const e=w.oxw();w.xp6(3),w.hij(" ",e.displayError,"\n")}}const j=["*",[["bit-label"]],[["bit-hint"]]];class E{constructor(e){this.i18nService=e,this._inline=!1}get inline(){return this._inline}set inline(e){this._inline=(0,O.Ig)(e)}get classes(){return["tw-mb-6"].concat(this.inline?["tw-inline-block","tw-mr-4"]:["tw-block"])}get labelClasses(){return["tw-transition","tw-select-none","tw-mb-0"].concat(this.formControl.disabled?"tw-cursor-auto":"tw-cursor-pointer")}get labelContentClasses(){return["tw-font-semibold"].concat(this.formControl.disabled?"tw-text-muted":"tw-text-main")}get required(){return this.formControl.required}get hasError(){return this.formControl.hasError}get error(){return this.formControl.error}get displayError(){var e,t;return"required"===this.error[0]?this.i18nService.t("inputRequired"):(null===(e=this.error[1])||void 0===e?void 0:e.message)?null===(t=this.error[1])||void 0===t?void 0:t.message:this.error}}E.ɵfac=function(e){return new(e||E)(w.Y36(v.D))},E.ɵcmp=w.Xpm({type:E,selectors:[["bit-form-control"]],contentQueries:function(e,t,n){if(1&e&&w.Suo(n,J,5),2&e){let e;w.iGM(e=w.CRH())&&(t.formControl=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&w.Tol(t.classes)},inputs:{label:"label",inline:"inline"},ngContentSelectors:["*","bit-label","bit-hint"],decls:19,vars:7,consts:[["class","tw-text-xs tw-font-normal",4,"ngIf"],[4,"ngIf"],["class","tw-mt-1 tw-text-danger",4,"ngIf"],[1,"tw-text-xs","tw-font-normal"],[1,"tw-mt-1","tw-text-danger"],[1,"bwi","bwi-error"]],template:function(e,t){1&e&&(w.F$t(j),w.TgZ(0,"label"),w._uU(1,"\n  "),w.Hsn(2),w._uU(3,"\n  "),w.TgZ(4,"span"),w._uU(5,"\n    "),w.Hsn(6,1),w._uU(7,"\n    "),w.YNc(8,R,3,3,"span",0),w._uU(9,"\n  "),w.qZA(),w._uU(10,"\n"),w.qZA(),w._uU(11,"\n"),w.TgZ(12,"div"),w._uU(13,"\n  "),w.YNc(14,Q,1,0,"ng-content",1),w._uU(15,"\n"),w.qZA(),w._uU(16,"\n"),w.YNc(17,Y,4,1,"div",2),w._uU(18,"\n")),2&e&&(w.Tol(t.labelClasses),w.xp6(4),w.Tol(t.labelContentClasses),w.xp6(4),w.Q6J("ngIf",t.required),w.xp6(6),w.Q6J("ngIf",!t.hasError),w.xp6(3),w.Q6J("ngIf",t.hasError))},dependencies:[T.O5,G.C],encapsulation:2});var B=n(36179),D=n(44358),$=n(21656),F=n(17731),H=n(26536),K=n(22203),V=n(85339),W=n(17404);function X(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"div",6),w._uU(1,"\n        "),w.TgZ(2,"input",7),w.NdJ("change",(function(){w.CHM(e);const t=w.oxw(2);return w.KtG(t.onChildCheck())})),w.qZA(),w._uU(3,"\n        "),w.TgZ(4,"label",2),w._uU(5),w.ALo(6,"i18n"),w.qZA(),w._uU(7,"\n      "),w.qZA()}if(2&e){const e=w.oxw().$implicit,t=w.oxw();w.xp6(2),w.Q6J("name",t.pascalize(e.key))("id",e.key)("formControl",e.value),w.xp6(2),w.Q6J("for",e.key),w.xp6(1),w.hij("\n          ",w.lcZ(6,5,e.key),"\n        ")}}function ee(e,t){if(1&e&&(w.ynx(0),w._uU(1,"\n      "),w.YNc(2,X,8,7,"div",5),w._uU(3,"\n    "),w.BQk()),2&e){const e=t.$implicit,n=w.oxw();w.xp6(2),w.Q6J("ngIf",e.key!=n.parentId)}}class te{constructor(){this.destroy$=new l.x,this.onSavedUser=new w.vpe,this.onDeletedUser=new w.vpe}get parentIndeterminate(){return this.children.some((([e,t])=>1==t.value))&&!this.children.every((([e,t])=>1==t.value))}ngOnInit(){this.checkboxes.controls[this.parentId].valueChanges.pipe((0,g.R)(this.destroy$)).subscribe((e=>{Object.values(this.checkboxes.controls).forEach((t=>t.setValue(e,{emitEvent:!1})))}))}get parentCheckbox(){return this.checkboxes.controls[this.parentId]}get children(){return Object.entries(this.checkboxes.controls).filter((([e,t])=>e!=this.parentId))}onChildCheck(){const e=this.children.every((([e,t])=>1==t.value));this.parentCheckbox.setValue(e,{emitEvent:!1})}key(e,t){return t.key}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}pascalize(e){return V.c.camelToPascalCase(e)}}te.ɵfac=function(e){return new(e||te)},te.ɵcmp=w.Xpm({type:te,selectors:[["app-nested-checkbox"]],inputs:{parentId:"parentId",checkboxes:"checkboxes"},outputs:{onSavedUser:"onSavedUser",onDeletedUser:"onDeletedUser"},decls:15,vars:13,consts:[[3,"formGroup"],["type","checkbox",3,"name","id","formControlName","indeterminate"],[1,"!tw-font-normal",3,"for"],[1,"tw-ml-6"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","",4,"ngIf"],[1,""],["type","checkbox",1,"",3,"name","id","formControl","change"]],template:function(e,t){1&e&&(w.TgZ(0,"div",0),w._uU(1,"\n  "),w._UZ(2,"input",1),w._uU(3,"\n  "),w.TgZ(4,"label",2),w._uU(5),w.ALo(6,"i18n"),w.qZA(),w._uU(7,"\n  "),w.TgZ(8,"div",3),w._uU(9,"\n    "),w.YNc(10,ee,4,1,"ng-container",4),w.ALo(11,"keyvalue"),w._uU(12,"\n  "),w.qZA(),w._uU(13,"\n"),w.qZA(),w._uU(14,"\n")),2&e&&(w.Q6J("formGroup",t.checkboxes),w.xp6(2),w.Q6J("name",t.pascalize(t.parentId))("id",t.parentId)("formControlName",t.parentId)("indeterminate",t.parentIndeterminate),w.xp6(2),w.Q6J("for",t.parentId),w.xp6(1),w.hij("\n    ",w.lcZ(6,9,t.parentId),"\n  "),w.xp6(5),w.Q6J("ngForOf",w.lcZ(11,11,t.checkboxes.controls))("ngForTrackBy",t.key))},dependencies:[T.sg,T.O5,a.Wl,a.JJ,a.JL,a.oH,a.sg,a.u,T.Nd,W.C],encapsulation:2});var ne,ie,oe=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(t){s(t)}}function a(e){try{l(i.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};function se(e,t){if(1&e&&(w.TgZ(0,"span",14),w._uU(1),w.qZA()),2&e){const e=w.oxw();w.xp6(1),w.Oqu(e.params.name)}}function re(e,t){1&e&&(w.TgZ(0,"span",15),w._uU(1),w.ALo(2,"i18n"),w.qZA()),2&e&&(w.xp6(1),w.Oqu(w.lcZ(2,1,"revoked")))}function ae(e,t){1&e&&(w.ynx(0),w._uU(1,"\n        "),w._UZ(2,"i",16),w.ALo(3,"i18n"),w._uU(4,"\n        "),w.TgZ(5,"span",17),w._uU(6),w.ALo(7,"i18n"),w.qZA(),w._uU(8,"\n      "),w.BQk()),2&e&&(w.xp6(2),w.s9C("title",w.lcZ(3,2,"loading")),w.xp6(4),w.Oqu(w.lcZ(7,4,"loading")))}function le(e,t){1&e&&(w.ynx(0),w._uU(1,"\n            "),w.TgZ(2,"p"),w._uU(3),w.ALo(4,"i18n"),w.qZA(),w._uU(5,"\n            "),w.TgZ(6,"bit-form-field"),w._uU(7,"\n              "),w.TgZ(8,"bit-label"),w._uU(9),w.ALo(10,"i18n"),w.qZA(),w._uU(11,"\n              "),w._UZ(12,"input",44),w._uU(13,"\n              "),w.TgZ(14,"bit-hint"),w._uU(15),w.ALo(16,"i18n"),w.qZA(),w._uU(17,"\n            "),w.qZA(),w._uU(18,"\n          "),w.BQk()),2&e&&(w.xp6(3),w.Oqu(w.lcZ(4,3,"inviteUserDesc")),w.xp6(6),w.Oqu(w.lcZ(10,5,"email")),w.xp6(6),w.Oqu(w.xi3(16,7,"inviteMultipleEmailDesc","20")))}function ce(e,t){1&e&&(w.ynx(0),w._uU(1,"\n                  "),w.TgZ(2,"div",27),w._uU(3),w.ALo(4,"i18n"),w.TgZ(5,"a",45),w._uU(6),w.ALo(7,"i18n"),w.qZA(),w._uU(8),w.ALo(9,"i18n"),w.qZA(),w._uU(10,"\n                "),w.BQk()),2&e&&(w.xp6(3),w.hij("\n                    ",w.lcZ(4,3,"customDescNonEnterpriseStart"),""),w.xp6(3),w.Oqu(w.lcZ(7,5,"customDescNonEnterpriseLink")),w.xp6(2),w.hij("",w.lcZ(9,7,"customDescNonEnterpriseEnd"),"\n                  "))}function ue(e,t){1&e&&(w._uU(0,"\n                  "),w.TgZ(1,"div",27),w._uU(2),w.ALo(3,"i18n"),w.qZA(),w._uU(4,"\n                ")),2&e&&(w.xp6(2),w.hij("\n                    ",w.lcZ(3,1,"customDesc"),"\n                  "))}function de(e,t){if(1&e){const e=w.EpF();w.ynx(0),w._uU(1,"\n            "),w.TgZ(2,"h3",46),w._uU(3),w.ALo(4,"i18n"),w.qZA(),w._uU(5,"\n            "),w.TgZ(6,"div",47),w._uU(7,"\n              "),w.TgZ(8,"div",48),w._uU(9,"\n                "),w.TgZ(10,"div",49),w._uU(11,"\n                  "),w.TgZ(12,"label",50),w._uU(13),w.ALo(14,"i18n"),w.qZA(),w._uU(15,"\n                  "),w._UZ(16,"hr",51),w._uU(17,"\n                  "),w.TgZ(18,"app-nested-checkbox",52),w._uU(19,"\n                  "),w.qZA(),w._uU(20,"\n                "),w.qZA(),w._uU(21,"\n              "),w.qZA(),w._uU(22,"\n              "),w.TgZ(23,"div",48),w._uU(24,"\n                "),w.TgZ(25,"div",49),w._uU(26,"\n                  "),w.TgZ(27,"label",50),w._uU(28),w.ALo(29,"i18n"),w.qZA(),w._uU(30,"\n                  "),w._UZ(31,"hr",51),w._uU(32,"\n                  "),w.TgZ(33,"div"),w._uU(34,"\n                    "),w._UZ(35,"input",53),w._uU(36,"\n                    "),w.TgZ(37,"label",54),w._uU(38),w.ALo(39,"i18n"),w.qZA(),w._uU(40,"\n                  "),w.qZA(),w._uU(41,"\n                  "),w.TgZ(42,"div"),w._uU(43,"\n                    "),w._UZ(44,"input",55),w._uU(45,"\n                    "),w.TgZ(46,"label",56),w._uU(47),w.ALo(48,"i18n"),w.qZA(),w._uU(49,"\n                  "),w.qZA(),w._uU(50,"\n                  "),w.TgZ(51,"div"),w._uU(52,"\n                    "),w._UZ(53,"input",57),w._uU(54,"\n                    "),w.TgZ(55,"label",58),w._uU(56),w.ALo(57,"i18n"),w.qZA(),w._uU(58,"\n                  "),w.qZA(),w._uU(59,"\n                  "),w.TgZ(60,"app-nested-checkbox",59),w._uU(61,"\n                  "),w.qZA(),w._uU(62,"\n                  "),w.TgZ(63,"div"),w._uU(64,"\n                    "),w._UZ(65,"input",60),w._uU(66,"\n                    "),w.TgZ(67,"label",61),w._uU(68),w.ALo(69,"i18n"),w.qZA(),w._uU(70,"\n                  "),w.qZA(),w._uU(71,"\n                  "),w.TgZ(72,"div"),w._uU(73,"\n                    "),w._UZ(74,"input",62),w._uU(75,"\n                    "),w.TgZ(76,"label",63),w._uU(77),w.ALo(78,"i18n"),w.qZA(),w._uU(79,"\n                  "),w.qZA(),w._uU(80,"\n                  "),w.TgZ(81,"div"),w._uU(82,"\n                    "),w._UZ(83,"input",64),w._uU(84,"\n                    "),w.TgZ(85,"label",65),w._uU(86),w.ALo(87,"i18n"),w.qZA(),w._uU(88,"\n                  "),w.qZA(),w._uU(89,"\n                  "),w.TgZ(90,"div"),w._uU(91,"\n                    "),w.TgZ(92,"input",66),w.NdJ("change",(function(){w.CHM(e);const t=w.oxw(2);return w.KtG(t.handleDependentPermissions())})),w.qZA(),w._uU(93,"\n                    "),w.TgZ(94,"label",67),w._uU(95),w.ALo(96,"i18n"),w.qZA(),w._uU(97,"\n                  "),w.qZA(),w._uU(98,"\n                  "),w.TgZ(99,"div"),w._uU(100,"\n                    "),w.TgZ(101,"input",68),w.NdJ("change",(function(){w.CHM(e);const t=w.oxw(2);return w.KtG(t.handleDependentPermissions())})),w.qZA(),w._uU(102,"\n                    "),w.TgZ(103,"label",69),w._uU(104),w.ALo(105,"i18n"),w.qZA(),w._uU(106,"\n                  "),w.qZA(),w._uU(107,"\n                "),w.qZA(),w._uU(108,"\n              "),w.qZA(),w._uU(109,"\n            "),w.qZA(),w._uU(110,"\n          "),w.BQk()}if(2&e){const e=w.oxw(2);w.xp6(3),w.hij("\n              ",w.lcZ(4,14,"permissions"),"\n            "),w.xp6(3),w.Q6J("formGroup",e.permissionsGroup),w.xp6(7),w.Oqu(w.lcZ(14,16,"managerPermissions")),w.xp6(5),w.Q6J("checkboxes",e.permissionsGroup.controls.manageAssignedCollectionsGroup),w.xp6(10),w.Oqu(w.lcZ(29,18,"adminPermissions")),w.xp6(10),w.hij("\n                      ",w.lcZ(39,20,"accessEventLogs"),"\n                    "),w.xp6(9),w.hij("\n                      ",w.lcZ(48,22,"accessImportExport"),"\n                    "),w.xp6(9),w.hij("\n                      ",w.lcZ(57,24,"accessReports"),"\n                    "),w.xp6(4),w.Q6J("checkboxes",e.permissionsGroup.controls.manageAllCollectionsGroup),w.xp6(8),w.hij("\n                      ",w.lcZ(69,26,"manageGroups"),"\n                    "),w.xp6(9),w.hij("\n                      ",w.lcZ(78,28,"manageSso"),"\n                    "),w.xp6(9),w.hij("\n                      ",w.lcZ(87,30,"managePolicies"),"\n                    "),w.xp6(9),w.hij("\n                      ",w.lcZ(96,32,"manageUsers"),"\n                    "),w.xp6(9),w.hij("\n                      ",w.lcZ(105,34,"manageResetPassword"),"\n                    ")}}function pe(e,t){if(1&e&&(w.TgZ(0,"bit-tab",19),w.ALo(1,"i18n"),w._uU(2,"\n          "),w.TgZ(3,"div",40),w._uU(4),w.ALo(5,"i18n"),w.qZA(),w._uU(6,"\n          "),w._UZ(7,"bit-access-selector",70),w.ALo(8,"i18n"),w.ALo(9,"i18n"),w.ALo(10,"i18n"),w._uU(11,"\n        "),w.qZA()),2&e){const e=w.oxw(2);w.Q6J("label",w.lcZ(1,6,"groups")),w.xp6(4),w.hij("\n            ",w.lcZ(5,8,"groupAccessUserDesc"),"\n          "),w.xp6(3),w.Q6J("items",e.groupAccessItems)("columnHeader",w.lcZ(8,10,"groups"))("selectorLabelText",w.lcZ(9,12,"selectGroups"))("emptySelectionText",w.lcZ(10,14,"noGroupsAdded"))}}function ge(e,t){1&e&&(w.TgZ(0,"div",40),w._uU(1),w.ALo(2,"i18n"),w.qZA()),2&e&&(w.xp6(1),w.hij("\n            ",w.lcZ(2,1,"userPermissionOverrideHelper"),"\n          "))}function he(e,t){if(1&e&&(w._UZ(0,"bit-access-selector",71),w.ALo(1,"i18n"),w.ALo(2,"i18n"),w.ALo(3,"i18n")),2&e){const e=w.oxw(2);w.Q6J("permissionMode",e.PermissionMode.Edit)("showGroupColumn",e.organization.useGroups)("items",e.collectionAccessItems)("columnHeader",w.lcZ(1,6,"collection"))("selectorLabelText",w.lcZ(2,8,"selectCollections"))("emptySelectionText",w.lcZ(3,10,"noCollectionsAdded"))}}function me(e,t){if(1&e&&(w.TgZ(0,"bit-tab-group",18),w._uU(1,"\n        "),w.TgZ(2,"bit-tab",19),w.ALo(3,"i18n"),w._uU(4,"\n          "),w.YNc(5,le,19,10,"ng-container",6),w._uU(6,"\n          "),w.TgZ(7,"fieldset",20),w._uU(8,"\n            "),w.TgZ(9,"legend",21),w._uU(10),w.ALo(11,"i18n"),w.TgZ(12,"a",22),w.ALo(13,"i18n"),w._uU(14,"\n                "),w._UZ(15,"i",23),w._uU(16,"\n              "),w.qZA(),w._uU(17,"\n            "),w.qZA(),w._uU(18,"\n            "),w.TgZ(19,"div",24),w._uU(20,"\n              "),w._UZ(21,"input",25),w._uU(22,"\n              "),w.TgZ(23,"label",26),w._uU(24),w.ALo(25,"i18n"),w.TgZ(26,"div",27),w._uU(27),w.ALo(28,"i18n"),w.qZA(),w._uU(29,"\n              "),w.qZA(),w._uU(30,"\n            "),w.qZA(),w._uU(31,"\n            "),w.TgZ(32,"div",24),w._uU(33,"\n              "),w._UZ(34,"input",28),w._uU(35,"\n              "),w.TgZ(36,"label",29),w._uU(37),w.ALo(38,"i18n"),w.TgZ(39,"div",27),w._uU(40),w.ALo(41,"i18n"),w.qZA(),w._uU(42,"\n              "),w.qZA(),w._uU(43,"\n            "),w.qZA(),w._uU(44,"\n            "),w.TgZ(45,"div",24),w._uU(46,"\n              "),w._UZ(47,"input",30),w._uU(48,"\n              "),w.TgZ(49,"label",31),w._uU(50),w.ALo(51,"i18n"),w.TgZ(52,"div",27),w._uU(53),w.ALo(54,"i18n"),w.qZA(),w._uU(55,"\n              "),w.qZA(),w._uU(56,"\n            "),w.qZA(),w._uU(57,"\n            "),w.TgZ(58,"div",24),w._uU(59,"\n              "),w._UZ(60,"input",32),w._uU(61,"\n              "),w.TgZ(62,"label",33),w._uU(63),w.ALo(64,"i18n"),w.TgZ(65,"div",27),w._uU(66),w.ALo(67,"i18n"),w.qZA(),w._uU(68,"\n              "),w.qZA(),w._uU(69,"\n            "),w.qZA(),w._uU(70,"\n            "),w.TgZ(71,"div",24),w._uU(72,"\n              "),w._UZ(73,"input",34),w._uU(74,"\n              "),w.TgZ(75,"label",35),w._uU(76),w.ALo(77,"i18n"),w.YNc(78,ce,11,9,"ng-container",36),w._uU(79,"\n                "),w.YNc(80,ue,5,3,"ng-template",null,37,w.W1O),w._uU(82,"\n              "),w.qZA(),w._uU(83,"\n            "),w.qZA(),w._uU(84,"\n          "),w.qZA(),w._uU(85,"\n          "),w.YNc(86,de,111,36,"ng-container",6),w._uU(87,"\n        "),w.qZA(),w._uU(88,"\n        "),w.YNc(89,pe,12,16,"bit-tab",38),w._uU(90,"\n        "),w.TgZ(91,"bit-tab",19),w.ALo(92,"i18n"),w._uU(93,"\n          "),w.YNc(94,ge,3,3,"div",39),w._uU(95,"\n          "),w.TgZ(96,"div",40),w._uU(97,"\n            "),w.TgZ(98,"bit-form-control"),w._uU(99,"\n              "),w._UZ(100,"input",41),w._uU(101,"\n              "),w.TgZ(102,"bit-label"),w._uU(103),w.ALo(104,"i18n"),w.TgZ(105,"a",42),w.ALo(106,"i18n"),w._uU(107,"\n                  "),w._UZ(108,"i",23),w._uU(109,"\n                "),w.qZA(),w._uU(110,"\n              "),w.qZA(),w._uU(111,"\n              "),w.TgZ(112,"bit-hint"),w._uU(113),w.ALo(114,"i18n"),w.qZA(),w._uU(115,"\n            "),w.qZA(),w._uU(116,"\n          "),w.qZA(),w._uU(117,"\n          "),w.YNc(118,he,4,12,"bit-access-selector",43),w.qZA(),w._uU(119,"\n      "),w.qZA()),2&e){const e=w.MAs(81),t=w.oxw();w.Q6J("selectedIndex",t.tabIndex),w.xp6(2),w.Q6J("label",w.lcZ(3,30,"role")),w.xp6(3),w.Q6J("ngIf",!t.editMode),w.xp6(5),w.hij("\n              ",w.lcZ(11,32,"memberRole"),"\n              "),w.xp6(2),w.s9C("appA11yTitle",w.lcZ(13,34,"learnMore")),w.xp6(9),w.Q6J("value",t.organizationUserType.User),w.xp6(3),w.hij("\n                ",w.lcZ(25,36,"user"),"\n                "),w.xp6(3),w.hij("\n                  ",w.lcZ(28,38,"userDesc"),"\n                "),w.xp6(7),w.Q6J("value",t.organizationUserType.Manager),w.xp6(3),w.hij("\n                ",w.lcZ(38,40,"manager"),"\n                "),w.xp6(3),w.hij("\n                  ",w.lcZ(41,42,"managerDesc"),"\n                "),w.xp6(7),w.Q6J("value",t.organizationUserType.Admin),w.xp6(3),w.hij("\n                ",w.lcZ(51,44,"admin"),"\n                "),w.xp6(3),w.hij("\n                  ",w.lcZ(54,46,"adminDesc"),"\n                "),w.xp6(7),w.Q6J("value",t.organizationUserType.Owner),w.xp6(3),w.hij("\n                ",w.lcZ(64,48,"owner"),"\n                "),w.xp6(3),w.hij("\n                  ",w.lcZ(67,50,"ownerDesc"),"\n                "),w.xp6(7),w.Q6J("value",t.organizationUserType.Custom),w.uIk("disabled",!t.canUseCustomPermissions||null),w.xp6(3),w.hij("\n                ",w.lcZ(77,52,"custom"),"\n                "),w.xp6(2),w.Q6J("ngIf",!t.canUseCustomPermissions)("ngIfElse",e),w.xp6(8),w.Q6J("ngIf",t.customUserTypeSelected),w.xp6(3),w.Q6J("ngIf",t.organization.useGroups),w.xp6(2),w.Q6J("label",w.lcZ(92,54,"collections")),w.xp6(3),w.Q6J("ngIf",t.organization.useGroups),w.xp6(9),w.hij("\n                ",w.lcZ(104,56,"accessAllCollectionsDesc"),"\n                "),w.xp6(2),w.s9C("appA11yTitle",w.lcZ(106,58,"learnMore")),w.xp6(8),w.Oqu(w.lcZ(114,60,"accessAllCollectionsHelp")),w.xp6(5),w.Q6J("ngIf",!t.accessAllCollections)}}function Ue(e,t){if(1&e&&(w.TgZ(0,"button",72),w._uU(1),w.ALo(2,"i18n"),w.qZA()),2&e){const e=w.oxw();w.Q6J("bitAction",e.restore)("disabled",e.loading),w.xp6(1),w.hij("\n          ",w.lcZ(2,3,"restoreAccess"),"\n        ")}}function fe(e,t){if(1&e&&(w.TgZ(0,"button",72),w._uU(1),w.ALo(2,"i18n"),w.qZA()),2&e){const e=w.oxw();w.Q6J("bitAction",e.revoke)("disabled",e.loading),w.xp6(1),w.hij("\n          ",w.lcZ(2,3,"revokeAccess"),"\n        ")}}function be(e,t){if(1&e&&(w._UZ(0,"button",73),w.ALo(1,"i18n")),2&e){const e=w.oxw();w.Q6J("appA11yTitle",w.lcZ(1,3,"delete"))("bitAction",e.delete)("disabled",e.loading)}}!function(e){e[e.Role=0]="Role",e[e.Groups=1]="Groups",e[e.Collections=2]="Collections"}(ne||(ne={})),function(e){e.Saved="saved",e.Canceled="canceled",e.Deleted="deleted",e.Revoked="revoked",e.Restored="restored"}(ie||(ie={}));class Ze{constructor(e,t,n,i,o,s,r,c,u,d,p,g){this.params=e,this.dialogRef=t,this.apiService=n,this.i18nService=i,this.collectionService=o,this.platformUtilsService=s,this.organizationService=r,this.formBuilder=c,this.collectionAdminService=u,this.groupService=d,this.userService=p,this.organizationUserService=g,this.loading=!0,this.editMode=!1,this.isRevoked=!1,this.access="selected",this.collections=[],this.organizationUserType=U.j,this.PermissionMode=Z.R9,this.collectionAccessItems=[],this.groupAccessItems=[],this.formGroup=this.formBuilder.group({emails:["",[a.kI.required]],type:U.j.User,accessAllCollections:!1,access:[[]],groups:[[]]}),this.permissionsGroup=this.formBuilder.group({manageAssignedCollectionsGroup:this.formBuilder.group({manageAssignedCollections:!1,editAssignedCollections:!1,deleteAssignedCollections:!1}),manageAllCollectionsGroup:this.formBuilder.group({manageAllCollections:!1,createNewCollections:!1,editAnyCollection:!1,deleteAnyCollection:!1}),accessEventLogs:!1,accessImportExport:!1,accessReports:!1,manageGroups:!1,manageSso:!1,managePolicies:!1,manageUsers:!1,manageResetPassword:!1}),this.destroy$=new l.x,this.submit=()=>oe(this,void 0,void 0,(function*(){var e;if(this.formGroup.invalid)return;if(!this.canUseCustomPermissions&&this.customUserTypeSelected)return void this.platformUtilsService.showToast("error",null,this.i18nService.t("customNonEnterpriseError"));const t=new b.Qg;if(t.id=this.params.organizationUserId,t.organizationId=this.params.organizationId,t.accessAll=this.accessAllCollections,t.type=this.formGroup.value.type,t.permissions=this.setRequestPermissions(null!==(e=t.permissions)&&void 0!==e?e:new f.Q,t.type!==U.j.Custom),t.collections=this.formGroup.value.access.filter((e=>e.type===Z.zD.Collection)).map(Z.E2),t.groups=this.formGroup.value.groups.map((e=>e.id)),this.editMode)yield this.userService.save(t);else{t.id=this.params.organizationUserId;const e=[...new Set(this.formGroup.value.emails.trim().split(/\s*,\s*/))];yield this.userService.invite(e,t)}this.platformUtilsService.showToast("success",null,this.i18nService.t(this.editMode?"editedUserId":"invitedUsers",this.params.name)),this.close(ie.Saved)})),this.delete=()=>oe(this,void 0,void 0,(function*(){if(!this.editMode)return;const e=this.params.usesKeyConnector?"removeUserConfirmationKeyConnector":"removeOrgUserConfirmation";if(!(yield this.platformUtilsService.showDialog(this.i18nService.t(e),this.i18nService.t("removeUserIdAccess",this.params.name),this.i18nService.t("yes"),this.i18nService.t("no"),"warning",!1,"app-user-add-edit .modal-content")))return!1;yield this.organizationUserService.deleteOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.platformUtilsService.showToast("success",null,this.i18nService.t("removedUserId",this.params.name)),this.close(ie.Deleted)})),this.revoke=()=>oe(this,void 0,void 0,(function*(){if(!this.editMode)return;if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("revokeUserConfirmation"),this.i18nService.t("revokeUserId",this.params.name),this.i18nService.t("revokeAccess"),this.i18nService.t("cancel"),"warning",!1,"app-user-add-edit .modal-content")))return!1;yield this.organizationUserService.revokeOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.platformUtilsService.showToast("success",null,this.i18nService.t("revokedUserId",this.params.name)),this.isRevoked=!0,this.close(ie.Revoked)})),this.restore=()=>oe(this,void 0,void 0,(function*(){this.editMode&&(yield this.organizationUserService.restoreOrganizationUser(this.params.organizationId,this.params.organizationUserId),this.platformUtilsService.showToast("success",null,this.i18nService.t("restoredUserId",this.params.name)),this.isRevoked=!1,this.close(ie.Restored))}))}get customUserTypeSelected(){return this.formGroup.value.type===U.j.Custom}get accessAllCollections(){return this.formGroup.value.accessAllCollections}ngOnInit(){var e;return oe(this,void 0,void 0,(function*(){this.editMode=null!=this.params.organizationUserId,this.tabIndex=null!==(e=this.params.initialTab)&&void 0!==e?e:ne.Role,this.title=this.i18nService.t(this.editMode?"editMember":"inviteMember");const t=(0,c.of)(this.organizationService.get(this.params.organizationId)).pipe((0,u.d)({refCount:!0,bufferSize:1})),n=t.pipe((0,d.w)((e=>e.useGroups?this.groupService.getAll(this.params.organizationId):(0,c.of)([]))));(0,p.a)({organization:t,collections:this.collectionAdminService.getAll(this.params.organizationId),userDetails:this.params.organizationUserId?this.userService.get(this.params.organizationId,this.params.organizationUserId):(0,c.of)(null),groups:n}).pipe((0,g.R)(this.destroy$)).subscribe((({organization:e,collections:t,userDetails:n,groups:i})=>{if(this.organization=e,this.canUseCustomPermissions=e.useCustomPermissions,this.collectionAccessItems=[].concat(t.map((e=>we(e)))),this.groupAccessItems=[].concat(i.map((e=>{return t=e,{type:Z.zD.Group,id:t.id,labelName:t.name,listName:t.name};var t}))),this.params.organizationUserId){if(!n)throw new Error("Could not find user to edit.");this.isRevoked=n.status===m.D.Revoked;const e={manageAssignedCollections:n.permissions.manageAssignedCollections,editAssignedCollections:n.permissions.editAssignedCollections,deleteAssignedCollections:n.permissions.deleteAssignedCollections},o={manageAllCollections:n.permissions.manageAllCollections,createNewCollections:n.permissions.createNewCollections,editAnyCollection:n.permissions.editAnyCollection,deleteAnyCollection:n.permissions.deleteAnyCollection};n.type===U.j.Custom&&this.permissionsGroup.patchValue({accessEventLogs:n.permissions.accessEventLogs,accessImportExport:n.permissions.accessImportExport,accessReports:n.permissions.accessReports,manageGroups:n.permissions.manageGroups,manageSso:n.permissions.manageSso,managePolicies:n.permissions.managePolicies,manageUsers:n.permissions.manageUsers,manageResetPassword:n.permissions.manageResetPassword,manageAssignedCollectionsGroup:e,manageAllCollectionsGroup:o});const s=i.filter((e=>n.groups.includes(e.id))).flatMap((e=>e.collections.map((n=>{const i=t.find((e=>e.id===n.id));return{group:e,collection:i,accessSelection:n}}))));this.collectionAccessItems=this.collectionAccessItems.concat(s.map((({collection:e,accessSelection:t,group:n})=>we(e,t,n))));const r=function(e){if(null==e)return[];return[].concat(e.collections.map((e=>({id:e.id,type:Z.zD.Collection,permission:(0,Z.d4)(e)}))))}(n),a=function(e){if(null==e)return[];return[].concat(e.map((e=>({id:e,type:Z.zD.Group}))))}(n.groups);this.formGroup.removeControl("emails"),this.formGroup.patchValue({type:n.type,accessAllCollections:n.accessAll,access:r,groups:a})}this.loading=!1}))}))}check(e,t){e.checked=null==t?!e.checked:t,e.checked||(e.readOnly=!1)}selectAll(e){this.collections.forEach((t=>this.check(t,e)))}setRequestPermissions(e,t){if(t)return new f.Q;const n={accessEventLogs:this.permissionsGroup.value.accessEventLogs,accessImportExport:this.permissionsGroup.value.accessImportExport,accessReports:this.permissionsGroup.value.accessReports,manageGroups:this.permissionsGroup.value.manageGroups,manageSso:this.permissionsGroup.value.manageSso,managePolicies:this.permissionsGroup.value.managePolicies,manageUsers:this.permissionsGroup.value.manageUsers,manageResetPassword:this.permissionsGroup.value.manageResetPassword,manageAllCollections:this.permissionsGroup.value.manageAllCollectionsGroup.manageAllCollections,createNewCollections:this.permissionsGroup.value.manageAllCollectionsGroup.createNewCollections,editAnyCollection:this.permissionsGroup.value.manageAllCollectionsGroup.editAnyCollection,deleteAnyCollection:this.permissionsGroup.value.manageAllCollectionsGroup.deleteAnyCollection,manageAssignedCollections:this.permissionsGroup.value.manageAssignedCollectionsGroup.manageAssignedCollections,editAssignedCollections:this.permissionsGroup.value.manageAssignedCollectionsGroup.editAssignedCollections,deleteAssignedCollections:this.permissionsGroup.value.manageAssignedCollectionsGroup.deleteAssignedCollections};return Object.assign(e,n)}handleDependentPermissions(){this.permissionsGroup.value.manageResetPassword&&!this.permissionsGroup.value.manageUsers&&(this.permissionsGroup.value.manageUsers=!0,document.getElementById("manageUsers").checked=!0,this.platformUtilsService.showToast("info",null,this.i18nService.t("resetPasswordManageUsers")))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cancel(){return oe(this,void 0,void 0,(function*(){this.close(ie.Canceled)}))}close(e){this.dialogRef.close(e)}}function we(e,t,n){return{type:Z.zD.Collection,id:n?`${e.id}-${n.id}`:e.id,labelName:e.name,listName:e.name,readonly:void 0!==n,readonlyPermission:t?(0,Z.d4)(t):void 0,viaGroupName:null==n?void 0:n.name}}Ze.ɵfac=function(e){return new(e||Ze)(w.Y36(r.Kt),w.Y36(r.zj),w.Y36(_.s),w.Y36(v.D),w.Y36(A.a),w.Y36(x.P),w.Y36(h.Mn),w.Y36(a.qu),w.Y36(b.m$),w.Y36(b.lT),w.Y36(b.XD),w.Y36(y.t))},Ze.ɵcmp=w.Xpm({type:Ze,selectors:[["app-member-dialog"]],decls:40,vars:19,consts:[[3,"formGroup","bitSubmit"],[3,"disablePadding"],["bitDialogTitle",""],["class","tw-text-sm tw-normal-case tw-text-muted",4,"ngIf"],["bitBadge","","badgeType","secondary",4,"ngIf"],["bitDialogContent",""],[4,"ngIf"],[3,"selectedIndex",4,"ngIf"],["bitDialogFooter","",1,"tw-flex","tw-flex-row","tw-gap-2"],["type","submit","bitButton","","bitFormButton","","buttonType","primary",3,"disabled"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"disabled","click"],[1,"tw-ml-auto"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"bitAction","disabled",4,"ngIf"],["type","button","bitIconButton","bwi-trash","buttonType","danger","bitFormButton","",3,"appA11yTitle","bitAction","disabled",4,"ngIf"],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],["bitBadge","","badgeType","secondary"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[3,"selectedIndex"],[3,"label"],["role","radiogroup","aria-labelledby","roleGroupLabel"],["id","roleGroupLabel",1,"tw-mb-2","tw-block","tw-text-base","tw-font-semibold","tw-text-main"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/user-types-access-control/",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],[1,"tw-mb-2","tw-flex","tw-items-baseline"],["type","radio","id","userTypeUser","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeUser",1,"tw-m-0"],[1,"text-base","tw-block","tw-font-normal","tw-text-muted"],["type","radio","id","userTypeManager","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeManager",1,"tw-m-0"],["type","radio","id","userTypeAdmin","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeAdmin",1,"tw-m-0"],["type","radio","id","userTypeOwner","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeOwner",1,"tw-m-0"],["type","radio","id","userTypeCustom","formControlName","type","name","type",1,"tw-relative","tw-bottom-[-1px]","tw-mr-2",3,"value"],["for","userTypeCustom",1,"tw-m-0"],[4,"ngIf","ngIfElse"],["enterprise",""],[3,"label",4,"ngIf"],["class","tw-mb-6",4,"ngIf"],[1,"tw-mb-6"],["type","checkbox","bitCheckbox","","formControlName","accessAllCollections"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/user-types-access-control/#access-control",3,"appA11yTitle"],["formControlName","access",3,"permissionMode","showGroupColumn","items","columnHeader","selectorLabelText","emptySelectionText",4,"ngIf"],["id","emails","type","text","appAutoFocus","","bitInput","","formControlName","emails"],["href","https://bitwarden.com/contact/","target","_blank"],[1,"mt-4","d-flex","tw-font-semibold"],[1,"row",3,"formGroup"],[1,"col-6"],[1,"mb-3"],[1,"tw-font-semibold"],[1,"tw-mt-0","tw-mb-2","tw-mr-2"],["parentId","manageAssignedCollections",3,"checkboxes"],["type","checkbox","name","accessEventLogs","id","accessEventLogs","formControlName","accessEventLogs"],["for","accessEventLogs",1,"!tw-font-normal"],["type","checkbox","name","accessImportExport","id","accessImportExport","formControlName","accessImportExport"],["for","accessImportExport",1,"!tw-font-normal"],["type","checkbox","name","accessReports","id","accessReports","formControlName","accessReports"],["for","accessReports",1,"!tw-font-normal"],["parentId","manageAllCollections",3,"checkboxes"],["type","checkbox","name","manageGroups","id","manageGroups","formControlName","manageGroups"],["for","manageGroups",1,"!tw-font-normal"],["type","checkbox","name","manageSso","id","manageSso","formControlName","manageSso"],["for","manageSso",1,"!tw-font-normal"],["type","checkbox","name","managePolicies","id","managePolicies","formControlName","managePolicies"],["for","managePolicies",1,"!tw-font-normal"],["type","checkbox","name","manageUsers","id","manageUsers","formControlName","managePolicies",3,"change"],["for","manageUsers",1,"!tw-font-normal"],["type","checkbox","name","manageResetPassword","id","manageResetPassword","formControlName","manageResetPassword",3,"change"],["for","manageResetPassword",1,"!tw-font-normal"],["formControlName","groups",3,"items","columnHeader","selectorLabelText","emptySelectionText"],["formControlName","access",3,"permissionMode","showGroupColumn","items","columnHeader","selectorLabelText","emptySelectionText"],["type","button","bitButton","","bitFormButton","","buttonType","secondary",3,"bitAction","disabled"],["type","button","bitIconButton","bwi-trash","buttonType","danger","bitFormButton","",3,"appA11yTitle","bitAction","disabled"]],template:function(e,t){1&e&&(w.TgZ(0,"form",0),w._uU(1,"\n  "),w.TgZ(2,"bit-dialog",1),w._uU(3,"\n    "),w.TgZ(4,"span",2),w._uU(5),w.YNc(6,se,2,1,"span",3),w._uU(7,"\n      "),w.YNc(8,re,3,3,"span",4),w._uU(9,"\n    "),w.qZA(),w._uU(10,"\n    "),w.TgZ(11,"div",5),w._uU(12,"\n      "),w.YNc(13,ae,9,6,"ng-container",6),w._uU(14,"\n      "),w.YNc(15,me,120,62,"bit-tab-group",7),w._uU(16,"\n    "),w.qZA(),w._uU(17,"\n    "),w.TgZ(18,"div",8),w._uU(19,"\n      "),w.TgZ(20,"button",9),w._uU(21),w.ALo(22,"i18n"),w.qZA(),w._uU(23,"\n      "),w.TgZ(24,"button",10),w.NdJ("click",(function(){return t.cancel()})),w._uU(25),w.ALo(26,"i18n"),w.qZA(),w._uU(27,"\n      "),w.TgZ(28,"div",11),w._uU(29,"\n        "),w.YNc(30,Ue,3,5,"button",12),w._uU(31,"\n        "),w.YNc(32,fe,3,5,"button",12),w._uU(33,"\n        "),w.YNc(34,be,2,5,"button",13),w._uU(35,"\n      "),w.qZA(),w._uU(36,"\n    "),w.qZA(),w._uU(37,"\n  "),w.qZA(),w._uU(38,"\n"),w.qZA(),w._uU(39,"\n")),2&e&&(w.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),w.xp6(2),w.Q6J("disablePadding",!t.loading),w.xp6(3),w.hij("\n      ",t.title,"\n      "),w.xp6(1),w.Q6J("ngIf",!t.loading&&t.params.name),w.xp6(2),w.Q6J("ngIf",t.isRevoked),w.xp6(5),w.Q6J("ngIf",t.loading),w.xp6(2),w.Q6J("ngIf",!t.loading),w.xp6(5),w.Q6J("disabled",t.loading),w.xp6(1),w.hij("\n        ",w.lcZ(22,15,"save"),"\n      "),w.xp6(3),w.Q6J("disabled",t.loading),w.xp6(1),w.hij("\n        ",w.lcZ(26,17,"cancel"),"\n      "),w.xp6(5),w.Q6J("ngIf",t.editMode&&t.isRevoked),w.xp6(2),w.Q6J("ngIf",t.editMode&&!t.isRevoked),w.xp6(2),w.Q6J("ngIf",t.editMode))},dependencies:[T.O5,a._Y,a.Fj,a.Wl,a._,a.JJ,a.JL,a.sg,a.u,C.B,q.Q,k.b,S.u,I.l,P.r,N,L.a,z.d,M.G,E,B.u,D.M,$.Q,F.Q,H.i,K.f,te,W.C],encapsulation:2});var _e=n(13506);class ve{}ve.ɵfac=function(e){return new(e||ve)},ve.ɵmod=w.oAB({type:ve}),ve.ɵinj=w.cJS({imports:[T.ez,_e.s,_e.s]});class Ae{}Ae.ɵfac=function(e){return new(e||Ae)},Ae.ɵmod=w.oAB({type:Ae}),Ae.ɵinj=w.cJS({imports:[s.PV,ve]});class xe{constructor(){this.groupIds=[]}}var ye=n(27885),Te=n(24610),Ce=n(12963),qe=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(t){s(t)}}function a(e){try{l(i.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};function ke(e,t){if(1&e&&(w.TgZ(0,"small",14),w._uU(1),w.qZA()),2&e){const e=w.oxw();w.xp6(1),w.Oqu(e.name)}}function Se(e,t){1&e&&(w.TgZ(0,"div",15),w._uU(1,"\n        "),w._UZ(2,"i",16),w.ALo(3,"i18n"),w._uU(4,"\n        "),w.TgZ(5,"span",17),w._uU(6),w.ALo(7,"i18n"),w.qZA(),w._uU(8,"\n      "),w.qZA()),2&e&&(w.xp6(2),w.s9C("title",w.lcZ(3,2,"loading")),w.xp6(4),w.Oqu(w.lcZ(7,4,"loading")))}function Ie(e,t){1&e&&(w.TgZ(0,"div"),w._uU(1),w.ALo(2,"i18n"),w.qZA()),2&e&&(w.xp6(1),w.hij("\n          ",w.lcZ(2,1,"noGroupsInList"),"\n        "))}function Pe(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"tr"),w._uU(1,"\n              "),w.TgZ(2,"td",22),w.NdJ("click",(function(){const t=w.CHM(e).$implicit,n=w.oxw(3);return w.KtG(n.check(t))})),w._uU(3,"\n                "),w.TgZ(4,"input",23),w.NdJ("ngModelChange",(function(t){const n=w.CHM(e).$implicit;return w.KtG(n.checked=t)})),w.qZA(),w._uU(5,"\n              "),w.qZA(),w._uU(6,"\n              "),w.TgZ(7,"td",24),w.NdJ("click",(function(){const t=w.CHM(e).$implicit,n=w.oxw(3);return w.KtG(n.check(t))})),w._uU(8),w.qZA(),w._uU(9,"\n            "),w.qZA()}if(2&e){const e=t.$implicit,n=t.index;w.xp6(4),w.MGl("name","Groups[",n,"].Checked"),w.Q6J("ngModel",e.checked),w.xp6(4),w.hij("\n                ",e.name,"\n              ")}}function Je(e,t){if(1&e&&(w.TgZ(0,"table",20),w._uU(1,"\n          "),w.TgZ(2,"tbody"),w._uU(3,"\n            "),w.YNc(4,Pe,10,3,"tr",21),w._uU(5,"\n          "),w.qZA(),w._uU(6,"\n        "),w.qZA()),2&e){const e=w.oxw(2);w.xp6(4),w.Q6J("ngForOf",e.groups)}}function Ne(e,t){if(1&e&&(w.TgZ(0,"div",15),w._uU(1,"\n        "),w.TgZ(2,"p"),w._uU(3),w.ALo(4,"i18n"),w.qZA(),w._uU(5,"\n        "),w.YNc(6,Ie,3,3,"div",18),w._uU(7,"\n        "),w.YNc(8,Je,7,1,"table",19),w._uU(9,"\n      "),w.qZA()),2&e){const e=w.oxw();w.xp6(3),w.Oqu(w.lcZ(4,3,"groupAccessUserDesc")),w.xp6(3),w.Q6J("ngIf",!e.groups||!e.groups.length),w.xp6(2),w.Q6J("ngIf",e.groups&&e.groups.length)}}class Le{constructor(e,t,n,i,o,s){this.apiService=e,this.groupApiService=t,this.i18nService=n,this.platformUtilsService=i,this.logService=o,this.organizationUserService=s,this.onSavedUser=new w.vpe,this.loading=!0,this.groups=[]}ngOnInit(){return qe(this,void 0,void 0,(function*(){const e=yield this.groupApiService.getAll(this.organizationId);e.sort(V.c.getSortFunction(this.i18nService,"name")),this.groups=e;try{const e=yield this.organizationUserService.getOrganizationUserGroups(this.organizationId,this.organizationUserId);null!=e&&null!=this.groups&&e.forEach((e=>{const t=this.groups.filter((t=>t.id===e));null!=t&&t.length>0&&(t[0].checked=!0)}))}catch(t){this.logService.error(t)}this.loading=!1}))}check(e,t){e.checked=null==t?!e.checked:t,e.checked||(e.readOnly=!1)}selectAll(e){this.groups.forEach((t=>this.check(t,e)))}submit(){return qe(this,void 0,void 0,(function*(){const e=new xe;e.groupIds=this.groups.filter((e=>e.checked)).map((e=>e.id));try{this.formPromise=this.organizationUserService.putOrganizationUserGroups(this.organizationId,this.organizationUserId,e),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("editedGroupsForUser",this.name)),this.onSavedUser.emit()}catch(t){this.logService.error(t)}}))}}Le.ɵfac=function(e){return new(e||Le)(w.Y36(_.s),w.Y36(b.lT),w.Y36(v.D),w.Y36(x.P),w.Y36(ye.$),w.Y36(y.t))},Le.ɵcmp=w.Xpm({type:Le,selectors:[["app-user-groups"]],inputs:{name:"name",organizationUserId:"organizationUserId",organizationId:"organizationId"},outputs:{onSavedUser:"onSavedUser"},decls:47,vars:20,consts:[["role","dialog","aria-modal","true","aria-labelledby","groupAccessTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","groupAccessTitle",1,"modal-title"],["class","text-muted",4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"text-muted"],[1,"modal-body"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[4,"ngIf"],["class","table table-hover table-list mb-0",4,"ngIf"],[1,"table","table-hover","table-list","mb-0"],[4,"ngFor","ngForOf"],[1,"table-list-checkbox",3,"click"],["type","checkbox","appStopProp","",3,"ngModel","name","ngModelChange"],[3,"click"]],template:function(e,t){if(1&e&&(w.TgZ(0,"div",0),w._uU(1,"\n  "),w.TgZ(2,"div",1),w._uU(3,"\n    "),w.TgZ(4,"form",2,3),w.NdJ("ngSubmit",(function(){return t.submit()})),w._uU(6,"\n      "),w.TgZ(7,"div",4),w._uU(8,"\n        "),w.TgZ(9,"h1",5),w._uU(10),w.ALo(11,"i18n"),w.YNc(12,ke,2,1,"small",6),w._uU(13,"\n        "),w.qZA(),w._uU(14,"\n        "),w.TgZ(15,"button",7),w.ALo(16,"i18n"),w._uU(17,"\n          "),w.TgZ(18,"span",8),w._uU(19,"×"),w.qZA(),w._uU(20,"\n        "),w.qZA(),w._uU(21,"\n      "),w.qZA(),w._uU(22,"\n      "),w.YNc(23,Se,9,6,"div",9),w._uU(24,"\n      "),w.YNc(25,Ne,10,5,"div",9),w._uU(26,"\n      "),w.TgZ(27,"div",10),w._uU(28,"\n        "),w.TgZ(29,"button",11),w._uU(30,"\n          "),w._UZ(31,"i",12),w.ALo(32,"i18n"),w._uU(33,"\n          "),w.TgZ(34,"span"),w._uU(35),w.ALo(36,"i18n"),w.qZA(),w._uU(37,"\n        "),w.qZA(),w._uU(38,"\n        "),w.TgZ(39,"button",13),w._uU(40),w.ALo(41,"i18n"),w.qZA(),w._uU(42,"\n      "),w.qZA(),w._uU(43,"\n    "),w.qZA(),w._uU(44,"\n  "),w.qZA(),w._uU(45,"\n"),w.qZA(),w._uU(46,"\n")),2&e){const e=w.MAs(5);w.xp6(4),w.Q6J("appApiAction",t.formPromise),w.xp6(6),w.hij("\n          ",w.lcZ(11,10,"groupAccess"),"\n          "),w.xp6(2),w.Q6J("ngIf",t.name),w.xp6(3),w.s9C("appA11yTitle",w.lcZ(16,12,"close")),w.xp6(8),w.Q6J("ngIf",t.loading),w.xp6(2),w.Q6J("ngIf",!t.loading),w.xp6(4),w.Q6J("disabled",e.loading),w.xp6(2),w.s9C("title",w.lcZ(32,14,"loading")),w.xp6(4),w.Oqu(w.lcZ(36,16,"save")),w.xp6(5),w.hij("\n          ",w.lcZ(41,18,"cancel"),"\n        ")}},dependencies:[T.sg,T.O5,a._Y,a.Wl,a.JJ,a.JL,a.On,a.F,C.B,Te.b,Ce._,W.C],encapsulation:2});var ze=n(98597),Me=n(10926),Oe=n(59157),Ge=n(70032),Re=n(5712),Qe=n(19576);class Ye{}var je=n(3650),Ee=n(5278),Be=n(18730),De=n(81394),$e=n(64114),Fe=n(12947),He=n(13218);class Ke{constructor(){this.collections=[],this.groups=[],this.groupNames=[],this.collectionNames=[]}static fromResponse(e){const t=Object.assign(new Ke,e);return null!=e.collections&&(t.collections=e.collections.map((e=>new He.K(e)))),null!=e.groups&&(t.groups=e.groups),t}}var Ve=n(60648),We=n(73361),Xe=n(85063),et=n(44573),tt=n(53707),nt=n(14970),it=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(t){s(t)}}function a(e){try{l(i.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};function ot(e,t){1&e&&(w.TgZ(0,"app-callout",14),w._uU(1),w.ALo(2,"i18n"),w.qZA()),2&e&&(w.xp6(1),w.hij("\n          ",w.lcZ(2,1,"noSelectedUsersApplicable"),"\n        "))}function st(e,t){if(1&e&&(w.TgZ(0,"app-callout",15),w._uU(1),w.qZA()),2&e){const e=w.oxw();w.xp6(1),w.hij("\n          ",e.error,"\n        ")}}function rt(e,t){1&e&&(w.TgZ(0,"app-callout",20),w._uU(1),w.ALo(2,"i18n"),w.qZA()),2&e&&(w.xp6(1),w.hij("\n            ",w.lcZ(2,1,"revokeUsersWarning"),"\n          "))}function at(e,t){if(1&e&&(w.TgZ(0,"small",24),w._uU(1),w.qZA()),2&e){const e=w.oxw().$implicit;w.xp6(1),w.Oqu(e.name)}}function lt(e,t){if(1&e&&(w.TgZ(0,"tr"),w._uU(1,"\n              "),w.TgZ(2,"td",21),w._uU(3,"\n                "),w._UZ(4,"bit-avatar",22),w.ALo(5,"userName"),w._uU(6,"\n              "),w.qZA(),w._uU(7,"\n              "),w.TgZ(8,"td"),w._uU(9),w.YNc(10,at,2,1,"small",23),w._uU(11,"\n              "),w.qZA(),w._uU(12,"\n            "),w.qZA()),2&e){const e=t.$implicit;w.xp6(4),w.Q6J("text",w.lcZ(5,4,e))("id",e.id),w.xp6(5),w.hij("\n                ",e.email,"\n                "),w.xp6(1),w.Q6J("ngIf",e.name)}}function ct(e,t){if(1&e&&(w.ynx(0),w._uU(1,"\n          "),w.YNc(2,rt,3,3,"app-callout",16),w._uU(3,"\n          "),w.TgZ(4,"table",17),w._uU(5,"\n            "),w.TgZ(6,"thead"),w._uU(7,"\n              "),w.TgZ(8,"tr"),w._uU(9,"\n                "),w.TgZ(10,"th",18),w._uU(11),w.ALo(12,"i18n"),w.qZA(),w._uU(13,"\n              "),w.qZA(),w._uU(14,"\n            "),w.qZA(),w._uU(15,"\n            "),w.YNc(16,lt,13,6,"tr",19),w._uU(17,"\n          "),w.qZA(),w._uU(18,"\n        "),w.BQk()),2&e){const e=w.oxw();w.xp6(2),w.Q6J("ngIf",e.users.length>0&&!e.error&&e.isRevoking),w.xp6(9),w.Oqu(w.lcZ(12,3,"user")),w.xp6(5),w.Q6J("ngForOf",e.users)}}function ut(e,t){if(1&e&&(w.TgZ(0,"small",24),w._uU(1),w.qZA()),2&e){const e=w.oxw().$implicit;w.xp6(1),w.Oqu(e.name)}}function dt(e,t){if(1&e&&(w.TgZ(0,"td"),w._uU(1),w.qZA()),2&e){const e=w.oxw().$implicit,t=w.oxw(2);w.xp6(1),w.hij("\n                ",t.statuses.get(e.id),"\n              ")}}function pt(e,t){1&e&&(w.TgZ(0,"td"),w._uU(1),w.ALo(2,"i18n"),w.qZA()),2&e&&(w.xp6(1),w.hij("\n                ",w.lcZ(2,1,"bulkFilteredMessage"),"\n              "))}function gt(e,t){if(1&e&&(w.TgZ(0,"tr"),w._uU(1,"\n              "),w.TgZ(2,"td",21),w._uU(3,"\n                "),w._UZ(4,"bit-avatar",22),w.ALo(5,"userName"),w._uU(6,"\n              "),w.qZA(),w._uU(7,"\n              "),w.TgZ(8,"td"),w._uU(9),w.YNc(10,ut,2,1,"small",23),w._uU(11,"\n              "),w.qZA(),w._uU(12,"\n              "),w.YNc(13,dt,2,1,"td",10),w._uU(14,"\n              "),w.YNc(15,pt,3,3,"td",10),w._uU(16,"\n            "),w.qZA()),2&e){const e=t.$implicit,n=w.oxw(2);w.xp6(4),w.Q6J("text",w.lcZ(5,6,e))("id",e.id),w.xp6(5),w.hij("\n                ",e.email,"\n                "),w.xp6(1),w.Q6J("ngIf",e.name),w.xp6(3),w.Q6J("ngIf",n.statuses.has(e.id)),w.xp6(2),w.Q6J("ngIf",!n.statuses.has(e.id))}}function ht(e,t){if(1&e&&(w.ynx(0),w._uU(1,"\n          "),w.TgZ(2,"table",17),w._uU(3,"\n            "),w.TgZ(4,"thead"),w._uU(5,"\n              "),w.TgZ(6,"tr"),w._uU(7,"\n                "),w.TgZ(8,"th",18),w._uU(9),w.ALo(10,"i18n"),w.qZA(),w._uU(11,"\n                "),w.TgZ(12,"th"),w._uU(13),w.ALo(14,"i18n"),w.qZA(),w._uU(15,"\n              "),w.qZA(),w._uU(16,"\n            "),w.qZA(),w._uU(17,"\n            "),w.YNc(18,gt,17,8,"tr",19),w._uU(19,"\n          "),w.qZA(),w._uU(20,"\n        "),w.BQk()),2&e){const e=w.oxw();w.xp6(9),w.Oqu(w.lcZ(10,3,"user")),w.xp6(4),w.Oqu(w.lcZ(14,5,"status")),w.xp6(5),w.Q6J("ngForOf",e.users)}}function mt(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"button",25),w.NdJ("click",(function(){w.CHM(e);const t=w.oxw();return w.KtG(t.submit())})),w._uU(1,"\n          "),w._UZ(2,"i",26),w.ALo(3,"i18n"),w._uU(4,"\n          "),w.TgZ(5,"span"),w._uU(6),w.qZA(),w._uU(7,"\n        "),w.qZA()}if(2&e){const e=w.oxw();w.Q6J("disabled",e.loading),w.xp6(2),w.s9C("title",w.lcZ(3,3,"loading")),w.xp6(4),w.Oqu(e.bulkTitle)}}class Ut{constructor(e,t,n){this.i18nService=e,this.organizationUserService=t,this.statuses=new Map,this.loading=!1,this.done=!1,this.isRevoking=n.data.isRevoking,this.organizationId=n.data.organizationId,this.users=n.data.users}get bulkTitle(){const e=this.isRevoking?"revokeUsers":"restoreUsers";return this.i18nService.t(e)}submit(){return it(this,void 0,void 0,(function*(){this.loading=!0;try{const e=yield this.performBulkUserAction(),t=this.isRevoking?"bulkRevokedMessage":"bulkRestoredMessage";e.data.forEach((e=>{const n=""!==e.error?e.error:this.i18nService.t(t);this.statuses.set(e.id,n)})),this.done=!0}catch(e){this.error=e.message}this.loading=!1}))}performBulkUserAction(){return it(this,void 0,void 0,(function*(){const e=this.users.map((e=>e.id));return this.isRevoking?yield this.organizationUserService.revokeManyOrganizationUsers(this.organizationId,e):yield this.organizationUserService.restoreManyOrganizationUsers(this.organizationId,e)}))}}Ut.ɵfac=function(e){return new(e||Ut)(w.Y36(v.D),w.Y36(y.t),w.Y36(i.u))},Ut.ɵcmp=w.Xpm({type:Ut,selectors:[["app-bulk-restore-revoke"]],decls:42,vars:12,consts:[["role","dialog","aria-modal","true","aria-labelledby","bulkTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","bulkTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","danger",4,"ngIf"],["type","error",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled","click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["type","danger"],["type","error"],["type","warning",4,"ngIf"],[1,"table","table-hover","table-list"],["colspan","2"],[4,"ngFor","ngForOf"],["type","warning"],["width","30"],["size","small",3,"text","id"],["class","text-muted d-block",4,"ngIf"],[1,"text-muted","d-block"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){1&e&&(w.TgZ(0,"div",0),w._uU(1,"\n  "),w.TgZ(2,"div",1),w._uU(3,"\n    "),w.TgZ(4,"div",2),w._uU(5,"\n      "),w.TgZ(6,"div",3),w._uU(7,"\n        "),w.TgZ(8,"h1",4),w._uU(9),w.qZA(),w._uU(10,"\n        "),w.TgZ(11,"button",5),w.ALo(12,"i18n"),w._uU(13,"\n          "),w.TgZ(14,"span",6),w._uU(15,"×"),w.qZA(),w._uU(16,"\n        "),w.qZA(),w._uU(17,"\n      "),w.qZA(),w._uU(18,"\n      "),w.TgZ(19,"div",7),w._uU(20,"\n        "),w.YNc(21,ot,3,3,"app-callout",8),w._uU(22,"\n        "),w.YNc(23,st,2,1,"app-callout",9),w._uU(24,"\n        "),w.YNc(25,ct,19,5,"ng-container",10),w._uU(26,"\n        "),w.YNc(27,ht,21,7,"ng-container",10),w._uU(28,"\n      "),w.qZA(),w._uU(29,"\n      "),w.TgZ(30,"div",11),w._uU(31,"\n        "),w.YNc(32,mt,8,5,"button",12),w._uU(33,"\n        "),w.TgZ(34,"button",13),w._uU(35),w.ALo(36,"i18n"),w.qZA(),w._uU(37,"\n      "),w.qZA(),w._uU(38,"\n    "),w.qZA(),w._uU(39,"\n  "),w.qZA(),w._uU(40,"\n"),w.qZA(),w._uU(41,"\n")),2&e&&(w.xp6(9),w.hij("\n          ",t.bulkTitle,"\n        "),w.xp6(2),w.s9C("appA11yTitle",w.lcZ(12,8,"close")),w.xp6(10),w.Q6J("ngIf",t.users.length<=0),w.xp6(2),w.Q6J("ngIf",t.error),w.xp6(2),w.Q6J("ngIf",!t.done),w.xp6(2),w.Q6J("ngIf",t.done),w.xp6(5),w.Q6J("ngIf",!t.done&&t.users.length>0),w.xp6(3),w.hij("\n          ",w.lcZ(36,10,"close"),"\n        "))},dependencies:[T.sg,T.O5,C.B,tt.O,nt.A,W.C,Qe.z],encapsulation:2});var ft=n(25398),bt=n(81542),Zt=n(26987),wt=n(88982),_t=n(13992),vt=n(98202),At=n(1593),xt=n(92785),yt=n(62374),Tt=n(85356),Ct=n(2051),qt=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(t){s(t)}}function a(e){try{l(i.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};function kt(e,t){if(1&e&&(w.TgZ(0,"small",30),w._uU(1),w.qZA()),2&e){const e=w.oxw();w.xp6(1),w.Oqu(e.name)}}function St(e,t){if(1&e&&(w.TgZ(0,"app-callout",31),w.ALo(1,"i18n"),w._uU(2,"\n        "),w.qZA()),2&e){const e=w.oxw();w.s9C("enforcedPolicyMessage",w.lcZ(1,2,"resetPasswordMasterPasswordPolicyInEffect")),w.Q6J("enforcedPolicyOptions",e.enforcedPolicyOptions)}}const It=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}};class Pt{constructor(e,t,n,i,o,s,r){this.i18nService=e,this.platformUtilsService=t,this.passwordGenerationService=n,this.policyService=i,this.cryptoService=o,this.logService=s,this.organizationUserService=r,this.onPasswordReset=new w.vpe,this.newPassword=null,this.showPassword=!1,this.destroy$=new l.x}ngOnInit(){return qt(this,void 0,void 0,(function*(){this.policyService.masterPasswordPolicyOptions$().pipe((0,g.R)(this.destroy$)).subscribe((e=>this.enforcedPolicyOptions=e))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get loggedOutWarningName(){return null!=this.name?this.name:this.i18nService.t("thisUser")}generatePassword(){var e,t;return qt(this,void 0,void 0,(function*(){const n=null!==(t=null===(e=yield this.passwordGenerationService.getOptions())||void 0===e?void 0:e[0])&&void 0!==t?t:{};this.newPassword=yield this.passwordGenerationService.generatePassword(n),this.passwordStrengthComponent.updatePasswordStrength(this.newPassword)}))}togglePassword(){this.showPassword=!this.showPassword,document.getElementById("newPassword").focus()}copy(e){null!=e&&(this.platformUtilsService.copyToClipboard(e,{window}),this.platformUtilsService.showToast("info",null,this.i18nService.t("valueCopied",this.i18nService.t("password"))))}submit(){return qt(this,void 0,void 0,(function*(){if(null==this.newPassword||""===this.newPassword)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordRequired")),!1;if(this.newPassword.length<8)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordMinlength")),!1;if(null==this.enforcedPolicyOptions||this.policyService.evaluateMasterPassword(this.passwordStrengthResult.score,this.newPassword,this.enforcedPolicyOptions)){if(this.passwordStrengthResult.score<3){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("weakMasterPasswordDesc"),this.i18nService.t("weakMasterPassword"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1}try{this.formPromise=this.organizationUserService.getOrganizationUserResetPasswordDetails(this.organizationId,this.id).then((e=>qt(this,void 0,void 0,(function*(){if(null==e)throw new Error(this.i18nService.t("resetPasswordDetailsError"));const t=e.kdf,n=e.kdfIterations,i=e.resetPasswordKey,o=e.encryptedPrivateKey,s=yield this.cryptoService.getOrgKey(this.organizationId),r=yield this.cryptoService.decryptToBytes(new wt._(o),s),a=yield this.cryptoService.rsaDecrypt(i,r),l=new _t.N(a),c=yield this.cryptoService.makeKey(this.newPassword,this.email.trim().toLowerCase(),t,n),u=yield this.cryptoService.hashPassword(this.newPassword,c),d=yield this.cryptoService.remakeEncKey(c,l),p=new Zt.s;return p.key=d[1].encryptedString,p.newMasterPasswordHash=u,this.organizationUserService.putOrganizationUserResetPassword(this.organizationId,this.id,p)})))),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("resetPasswordSuccess")),this.onPasswordReset.emit()}catch(e){this.logService.error(e)}}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordPolicyRequirementsNotMet"))}))}getStrengthResult(e){this.passwordStrengthResult=e}}Pt.ɵfac=function(e){return new(e||Pt)(w.Y36(v.D),w.Y36(x.P),w.Y36(vt.f),w.Y36(At.d),w.Y36(xt.$),w.Y36(ye.$),w.Y36(y.t))},Pt.ɵcmp=w.Xpm({type:Pt,selectors:[["app-reset-password"]],viewQuery:function(e,t){if(1&e&&w.Gf(bt.Z,5),2&e){let e;w.iGM(e=w.CRH())&&(t.passwordStrengthComponent=e.first)}},inputs:{name:"name",email:"email",id:"id",organizationId:"organizationId"},outputs:{onPasswordReset:"onPasswordReset"},decls:97,vars:44,consts:[["role","dialog","aria-modal","true","aria-labelledby","resetPasswordTitle",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","resetPasswordTitle",1,"modal-title"],["class","text-muted",4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","warning"],["type","info",3,"enforcedPolicyOptions","enforcedPolicyMessage",4,"ngIf"],[1,"row"],[1,"col","form-group"],[1,"d-flex"],["for","newPassword"],[1,"ml-auto","d-flex"],["href","#","appStopClick","",1,"d-block","mr-2","bwi-icon-above-input",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-fw","bwi-refresh"],[1,"input-group","mb-1"],["id","newPassword","appAutofocus","","name","NewPassword","required","","appInputVerbatim","","autocomplete","new-password",1,"form-control","text-monospace",3,"type","ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-clone"],[3,"password","email","showText","passwordStrengthResult"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"text-muted"],["type","info",3,"enforcedPolicyOptions","enforcedPolicyMessage"]],template:function(e,t){if(1&e&&(w.TgZ(0,"div",0),w._uU(1,"\n  "),w.TgZ(2,"div",1),w._uU(3,"\n    "),w.TgZ(4,"form",2,3),w.NdJ("ngSubmit",(function(){return t.submit()})),w._uU(6,"\n      "),w.TgZ(7,"div",4),w._uU(8,"\n        "),w.TgZ(9,"h1",5),w._uU(10),w.ALo(11,"i18n"),w.YNc(12,kt,2,1,"small",6),w._uU(13,"\n        "),w.qZA(),w._uU(14,"\n        "),w.TgZ(15,"button",7),w.ALo(16,"i18n"),w._uU(17,"\n          "),w.TgZ(18,"span",8),w._uU(19,"×"),w.qZA(),w._uU(20,"\n        "),w.qZA(),w._uU(21,"\n      "),w.qZA(),w._uU(22,"\n      "),w.TgZ(23,"div",9),w._uU(24,"\n        "),w.TgZ(25,"app-callout",10),w._uU(26),w.ALo(27,"i18n"),w.qZA(),w._uU(28,"\n        "),w.YNc(29,St,3,4,"app-callout",11),w._uU(30,"\n        "),w.TgZ(31,"div",12),w._uU(32,"\n          "),w.TgZ(33,"div",13),w._uU(34,"\n            "),w.TgZ(35,"div",14),w._uU(36,"\n              "),w.TgZ(37,"label",15),w._uU(38),w.ALo(39,"i18n"),w.qZA(),w._uU(40,"\n              "),w.TgZ(41,"div",16),w._uU(42,"\n                "),w.TgZ(43,"a",17),w.NdJ("click",(function(){return t.generatePassword()})),w.ALo(44,"i18n"),w._uU(45,"\n                  "),w._UZ(46,"i",18),w._uU(47,"\n                "),w.qZA(),w._uU(48,"\n              "),w.qZA(),w._uU(49,"\n            "),w.qZA(),w._uU(50,"\n            "),w.TgZ(51,"div",19),w._uU(52,"\n              "),w.TgZ(53,"input",20),w.NdJ("ngModelChange",(function(e){return t.newPassword=e})),w.qZA(),w._uU(54,"\n              "),w.TgZ(55,"div",21),w._uU(56,"\n                "),w.TgZ(57,"button",22),w.NdJ("click",(function(){return t.togglePassword()})),w.ALo(58,"i18n"),w._uU(59,"\n                  "),w._UZ(60,"i",23),w._uU(61,"\n                "),w.qZA(),w._uU(62,"\n                "),w.TgZ(63,"button",22),w.NdJ("click",(function(){return t.copy(t.newPassword)})),w.ALo(64,"i18n"),w._uU(65,"\n                  "),w._UZ(66,"i",24),w._uU(67,"\n                "),w.qZA(),w._uU(68,"\n              "),w.qZA(),w._uU(69,"\n            "),w.qZA(),w._uU(70,"\n            "),w.TgZ(71,"app-password-strength",25),w.NdJ("passwordStrengthResult",(function(e){return t.getStrengthResult(e)})),w._uU(72,"\n            "),w.qZA(),w._uU(73,"\n          "),w.qZA(),w._uU(74,"\n        "),w.qZA(),w._uU(75,"\n      "),w.qZA(),w._uU(76,"\n      "),w.TgZ(77,"div",26),w._uU(78,"\n        "),w.TgZ(79,"button",27),w._uU(80,"\n          "),w._UZ(81,"i",28),w.ALo(82,"i18n"),w._uU(83,"\n          "),w.TgZ(84,"span"),w._uU(85),w.ALo(86,"i18n"),w.qZA(),w._uU(87,"\n        "),w.qZA(),w._uU(88,"\n        "),w.TgZ(89,"button",29),w._uU(90),w.ALo(91,"i18n"),w.qZA(),w._uU(92,"\n      "),w.qZA(),w._uU(93,"\n    "),w.qZA(),w._uU(94,"\n  "),w.qZA(),w._uU(95,"\n"),w.qZA(),w._uU(96,"\n")),2&e){const e=w.MAs(5);w.xp6(4),w.Q6J("appApiAction",t.formPromise),w.xp6(6),w.hij("\n          ",w.lcZ(11,20,"resetPassword"),"\n          "),w.xp6(2),w.Q6J("ngIf",t.name),w.xp6(3),w.s9C("appA11yTitle",w.lcZ(16,22,"close")),w.xp6(11),w.hij("",w.xi3(27,24,"resetPasswordLoggedOutWarning",t.loggedOutWarningName),"\n        "),w.xp6(3),w.Q6J("ngIf",t.enforcedPolicyOptions),w.xp6(9),w.Oqu(w.lcZ(39,27,"newPassword")),w.xp6(5),w.s9C("appA11yTitle",w.lcZ(44,29,"generatePassword")),w.xp6(10),w.s9C("type",t.showPassword?"text":"password"),w.Q6J("ngModel",t.newPassword),w.xp6(4),w.s9C("appA11yTitle",w.lcZ(58,31,"toggleVisibility")),w.xp6(3),w.Q6J("ngClass",w.WLB(41,It,!t.showPassword,t.showPassword)),w.xp6(3),w.s9C("appA11yTitle",w.lcZ(64,33,"copyPassword")),w.xp6(8),w.Q6J("password",t.newPassword)("email",t.email)("showText",!0),w.xp6(8),w.Q6J("disabled",e.loading),w.xp6(2),w.s9C("title",w.lcZ(82,35,"loading")),w.xp6(4),w.Oqu(w.lcZ(86,37,"save")),w.xp6(5),w.hij("\n          ",w.lcZ(91,39,"cancel"),"\n        ")}},dependencies:[T.mk,T.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F,C.B,Te.b,yt.U,tt.O,Tt.b,Ct.O,bt.Z,W.C],encapsulation:2});var Jt=n(51430),Nt=n(37202),Lt=n(97146),zt=n(64184),Mt=n(34668),Ot=n(8548),Gt=n(56617),Rt=n(1874),Qt=n(73974),Yt=n(26194),jt=n(44234),Et=n(91849),Bt=n(54735),Dt=n(50941),$t=n(26361);let Ft=0;class Ht{constructor(){this.id=Ft++,this.name=`bit-toggle-group-${this.id}`,this.selectedChange=new w.vpe,this.role="radiogroup",this.classList=["tw-flex"]}onInputInteraction(e){this.selected=e,this.selectedChange.emit(e)}}Ht.ɵfac=function(e){return new(e||Ht)},Ht.ɵcmp=w.Xpm({type:Ht,selectors:[["bit-toggle-group"]],hostVars:3,hostBindings:function(e,t){2&e&&(w.uIk("role",t.role),w.Tol(t.classList))},inputs:{selected:"selected"},outputs:{selectedChange:"selectedChange"},ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(w.F$t(),w.Hsn(0))},encapsulation:2});let Kt=0;class Vt{constructor(e){this.groupComponent=e,this.id=Kt++,this.tabIndex="-1",this.classList=["tw-group"]}get name(){return this.groupComponent.name}get selected(){return this.groupComponent.selected===this.value}get inputClasses(){return["tw-peer","tw-appearance-none","tw-outline-none"]}get labelClasses(){return["!tw-font-semibold","tw-transition","tw-text-center","tw-border-text-muted","!tw-text-muted","tw-border-solid","tw-border-y","tw-border-r","tw-border-l-0","tw-cursor-pointer","group-first-of-type:tw-border-l","group-first-of-type:tw-rounded-l","group-last-of-type:tw-rounded-r","peer-focus:tw-outline-none","peer-focus:tw-ring","peer-focus:tw-ring-offset-2","peer-focus:tw-ring-primary-500","peer-focus:tw-z-10","peer-focus:tw-bg-primary-500","peer-focus:tw-border-primary-500","peer-focus:!tw-text-contrast","hover:tw-no-underline","hover:tw-bg-text-muted","hover:tw-border-text-muted","hover:!tw-text-contrast","peer-checked:tw-bg-primary-500","peer-checked:tw-border-primary-500","peer-checked:!tw-text-contrast","tw-py-1.5","tw-px-3","!tw-mb-0","[&>[bitBadge]]:tw-relative","[&>[bitBadge]]:tw--top-px"]}onInputInteraction(){this.groupComponent.onInputInteraction(this.value)}}Vt.ɵfac=function(e){return new(e||Vt)(w.Y36(Ht))},Vt.ɵcmp=w.Xpm({type:Vt,selectors:[["bit-toggle"]],hostVars:3,hostBindings:function(e,t){2&e&&(w.Ikx("tabIndex",t.tabIndex),w.Tol(t.classList))},inputs:{value:"value"},ngContentSelectors:["*"],decls:3,vars:6,consts:[["type","radio",3,"id","name","ngClass","checked","change"],[3,"for","ngClass"]],template:function(e,t){1&e&&(w.F$t(),w.TgZ(0,"input",0),w.NdJ("change",(function(){return t.onInputInteraction()})),w.qZA(),w.TgZ(1,"label",1),w.Hsn(2),w.qZA()),2&e&&(w.MGl("id","bit-toggle-",t.id,""),w.Q6J("name",t.name)("ngClass",t.inputClasses)("checked",t.selected),w.xp6(1),w.MGl("for","bit-toggle-",t.id,""),w.Q6J("ngClass",t.labelClasses))},dependencies:[T.mk],encapsulation:2});let Wt=0;class Xt{constructor(){this.id="search-id-"+Wt++}onChange(e){null!=this.notifyOnChange&&this.notifyOnChange(e)}onTouch(){null!=this.notifyOnTouch&&this.notifyOnTouch()}registerOnChange(e){this.notifyOnChange=e}registerOnTouched(e){this.notifyOnTouch=e}writeValue(e){this.searchText=e}setDisabledState(e){this.disabled=e}}Xt.ɵfac=function(e){return new(e||Xt)},Xt.ɵcmp=w.Xpm({type:Xt,selectors:[["app-search-input"]],inputs:{disabled:"disabled",placeholder:"placeholder"},features:[w._Bn([{provide:a.JU,multi:!0,useExisting:Xt}])],decls:15,vars:11,consts:[[1,"tw-sr-only",3,"for"],[1,"tw-relative","tw-flex","tw-items-center"],["aria-hidden","true",1,"tw-absolute","tw-left-2","tw-z-20","!tw-mb-0","tw-cursor-text",3,"for"],[1,"bwi","bwi-search","bwi-fw","tw-text-muted"],["bitInput","","type","search",1,"tw-rounded-l","tw-pl-9",3,"id","placeholder","ngModel","disabled","ngModelChange","blur"]],template:function(e,t){if(1&e&&(w.TgZ(0,"label",0),w._uU(1),w.ALo(2,"i18n"),w.qZA(),w._uU(3,"\n"),w.TgZ(4,"div",1),w._uU(5,"\n  "),w.TgZ(6,"label",2),w._uU(7,"\n    "),w._UZ(8,"i",3),w._uU(9,"\n  "),w.qZA(),w._uU(10,"\n  "),w.TgZ(11,"input",4),w.NdJ("ngModelChange",(function(e){return t.onChange(e)}))("blur",(function(){return t.onTouch()})),w.ALo(12,"i18n"),w.qZA(),w._uU(13,"\n"),w.qZA(),w._uU(14,"\n")),2&e){let e;w.Q6J("for",t.id),w.xp6(1),w.Oqu(w.lcZ(2,7,"search")),w.xp6(5),w.Q6J("for",t.id),w.xp6(5),w.Q6J("id",t.id)("placeholder",null!==(e=t.placeholder)&&void 0!==e?e:w.lcZ(12,9,"search"))("ngModel",t.searchText)("disabled",t.disabled)}},dependencies:[a.Fj,a.JJ,a.On,M.G,W.C],encapsulation:2});var en=n(73672),tn=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{l(i.next(e))}catch(t){s(t)}}function a(e){try{l(i.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const nn=["groupsTemplate"],on=["eventsTemplate"],sn=["confirmTemplate"],rn=["resetPasswordTemplate"],an=["bulkStatusTemplate"],ln=["bulkConfirmTemplate"],cn=["bulkRemoveTemplate"];function un(e,t){if(1&e&&(w.TgZ(0,"span",18),w._uU(1),w.qZA()),2&e){const e=w.oxw();w.xp6(1),w.Oqu(e.allCount)}}function dn(e,t){if(1&e&&(w.TgZ(0,"span",18),w._uU(1),w.qZA()),2&e){const e=w.oxw();w.xp6(1),w.Oqu(e.invitedCount)}}function pn(e,t){if(1&e&&(w.TgZ(0,"span",18),w._uU(1),w.qZA()),2&e){const e=w.oxw();w.xp6(1),w.Oqu(e.acceptedCount)}}function gn(e,t){if(1&e&&(w.TgZ(0,"span",18),w._uU(1),w.qZA()),2&e){const e=w.oxw();w.xp6(1),w.Oqu(e.revokedCount)}}function hn(e,t){1&e&&(w.ynx(0),w._uU(1,"\n    "),w._UZ(2,"i",19),w.ALo(3,"i18n"),w._uU(4,"\n    "),w.TgZ(5,"span",20),w._uU(6),w.ALo(7,"i18n"),w.qZA(),w._uU(8,"\n  "),w.BQk()),2&e&&(w.xp6(2),w.s9C("title",w.lcZ(3,2,"loading")),w.xp6(4),w.Oqu(w.lcZ(7,4,"loading")))}function mn(e,t){1&e&&(w.TgZ(0,"p"),w._uU(1),w.ALo(2,"i18n"),w.qZA()),2&e&&(w.xp6(1),w.Oqu(w.lcZ(2,1,"noMembersInList")))}function Un(e,t){1&e&&(w.TgZ(0,"app-callout",40),w.ALo(1,"i18n"),w._uU(2),w.ALo(3,"i18n"),w.qZA()),2&e&&(w.s9C("title",w.lcZ(1,2,"confirmUsers")),w.xp6(2),w.hij("\n        ",w.lcZ(3,4,"usersNeedConfirmed"),"\n      "))}function fn(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"button",31),w.NdJ("click",(function(){w.CHM(e);const t=w.oxw(3);return w.KtG(t.bulkConfirm())})),w._uU(1,"\n                  "),w.TgZ(2,"span",41),w._uU(3,"\n                    "),w._UZ(4,"i",42),w._uU(5),w.ALo(6,"i18n"),w.qZA(),w._uU(7,"\n                "),w.qZA()}2&e&&(w.xp6(5),w.hij("\n                    ",w.lcZ(6,1,"confirmSelected"),"\n                  "))}function bn(e,t){1&e&&(w.TgZ(0,"span",58),w._uU(1),w.ALo(2,"i18n"),w.qZA()),2&e&&(w.xp6(1),w.Oqu(w.lcZ(2,1,"invited")))}function Zn(e,t){1&e&&(w.TgZ(0,"span",59),w._uU(1),w.ALo(2,"i18n"),w.qZA()),2&e&&(w.xp6(1),w.Oqu(w.lcZ(2,1,"needsConfirmation")))}function wn(e,t){1&e&&(w.TgZ(0,"span",58),w._uU(1),w.ALo(2,"i18n"),w.qZA()),2&e&&(w.xp6(1),w.Oqu(w.lcZ(2,1,"revoked")))}function _n(e,t){if(1&e&&(w.TgZ(0,"div",60),w._uU(1),w.qZA()),2&e){const e=w.oxw().$implicit;w.xp6(1),w.hij("\n                    ",e.email,"\n                  ")}}function vn(e,t){if(1&e&&w._UZ(0,"bit-badge-list",61),2&e){const e=w.oxw().$implicit,t=w.oxw(3);w.Q6J("items",t.organization.useGroups?e.groupNames:e.collectionNames)("maxItems",2)}}function An(e,t){1&e&&(w.TgZ(0,"span"),w._uU(1),w.ALo(2,"i18n"),w.qZA()),2&e&&(w.xp6(1),w.Oqu(w.lcZ(2,1,"all")))}function xn(e,t){1&e&&(w.ynx(0),w._uU(1,"\n                "),w._UZ(2,"i",62),w.ALo(3,"i18n"),w._uU(4,"\n                "),w.TgZ(5,"span",63),w._uU(6),w.ALo(7,"i18n"),w.qZA(),w._uU(8,"\n              "),w.BQk()),2&e&&(w.xp6(2),w.s9C("title",w.lcZ(3,2,"userUsingTwoStep")),w.xp6(4),w.Oqu(w.lcZ(7,4,"userUsingTwoStep")))}function yn(e,t){1&e&&(w.ynx(0),w._uU(1,"\n                "),w._UZ(2,"i",64),w.ALo(3,"i18n"),w._uU(4,"\n                "),w.TgZ(5,"span",63),w._uU(6),w.ALo(7,"i18n"),w.qZA(),w._uU(8,"\n              "),w.BQk()),2&e&&(w.xp6(2),w.s9C("title",w.lcZ(3,2,"enrolledPasswordReset")),w.xp6(4),w.Oqu(w.lcZ(7,4,"enrolledPasswordReset")))}function Tn(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"button",31),w.NdJ("click",(function(){w.CHM(e);const t=w.oxw().$implicit,n=w.oxw(3);return w.KtG(n.reinvite(t))})),w._uU(1,"\n                  "),w._UZ(2,"i",65),w._uU(3),w.ALo(4,"i18n"),w.qZA()}2&e&&(w.xp6(3),w.hij("\n                  ",w.lcZ(4,1,"resendInvitation"),"\n                "))}function Cn(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"button",31),w.NdJ("click",(function(){w.CHM(e);const t=w.oxw().$implicit,n=w.oxw(3);return w.KtG(n.confirm(t))})),w._uU(1,"\n                  "),w.TgZ(2,"span",41),w._uU(3,"\n                    "),w._UZ(4,"i",66),w._uU(5),w.ALo(6,"i18n"),w.qZA(),w._uU(7,"\n                "),w.qZA()}2&e&&(w.xp6(5),w.hij(" ",w.lcZ(6,1,"confirm"),"\n                  "))}function qn(e,t){1&e&&w._UZ(0,"bit-menu-divider")}function kn(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"button",31),w.NdJ("click",(function(){w.CHM(e);const t=w.oxw().$implicit,n=w.oxw(3);return w.KtG(n.groups(t))})),w._uU(1,"\n                  "),w._UZ(2,"i",67),w._uU(3),w.ALo(4,"i18n"),w.qZA()}2&e&&(w.xp6(3),w.hij(" ",w.lcZ(4,1,"groups"),"\n                "))}function Sn(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"button",31),w.NdJ("click",(function(){w.CHM(e);const t=w.oxw().$implicit,n=w.oxw(3);return w.KtG(n.events(t))})),w._uU(1,"\n                  "),w._UZ(2,"i",68),w._uU(3),w.ALo(4,"i18n"),w.qZA()}2&e&&(w.xp6(3),w.hij(" ",w.lcZ(4,1,"eventLogs"),"\n                "))}function In(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"button",31),w.NdJ("click",(function(){w.CHM(e);const t=w.oxw().$implicit,n=w.oxw(3);return w.KtG(n.resetPassword(t))})),w._uU(1,"\n                  "),w._UZ(2,"i",69),w._uU(3),w.ALo(4,"i18n"),w.qZA()}2&e&&(w.xp6(3),w.hij(" ",w.lcZ(4,1,"resetPassword"),"\n                "))}function Pn(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"button",31),w.NdJ("click",(function(){w.CHM(e);const t=w.oxw().$implicit,n=w.oxw(3);return w.KtG(n.restore(t))})),w._uU(1,"\n                  "),w._UZ(2,"i",70),w._uU(3),w.ALo(4,"i18n"),w.qZA()}2&e&&(w.xp6(3),w.hij("\n                  ",w.lcZ(4,1,"restoreAccess"),"\n                "))}function Jn(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"button",31),w.NdJ("click",(function(){w.CHM(e);const t=w.oxw().$implicit,n=w.oxw(3);return w.KtG(n.revoke(t))})),w._uU(1,"\n                  "),w._UZ(2,"i",71),w._uU(3),w.ALo(4,"i18n"),w.qZA()}2&e&&(w.xp6(3),w.hij("\n                  ",w.lcZ(4,1,"revokeAccess"),"\n                "))}function Nn(e,t){if(1&e){const e=w.EpF();w.TgZ(0,"tr",43),w._uU(1,"\n            "),w.TgZ(2,"td",44),w.NdJ("click",(function(){const t=w.CHM(e).$implicit,n=w.oxw(3);return w.KtG(n.checkUser(t))})),w._uU(3,"\n              "),w.TgZ(4,"input",45),w.NdJ("ngModelChange",(function(t){const n=w.CHM(e).$implicit;return w.KtG(n.checked=t)})),w.qZA(),w._uU(5,"\n            "),w.qZA(),w._uU(6,"\n            "),w.TgZ(7,"td",46),w.NdJ("click",(function(){const t=w.CHM(e).$implicit,n=w.oxw(3);return w.KtG(n.edit(t))})),w._uU(8,"\n              "),w.TgZ(9,"div",47),w._uU(10,"\n                "),w._UZ(11,"bit-avatar",48),w.ALo(12,"userName"),w._uU(13,"\n                "),w.TgZ(14,"div",49),w._uU(15,"\n                  "),w.TgZ(16,"div",50),w._uU(17),w.YNc(18,bn,3,3,"span",51),w._uU(19,"\n                    "),w.YNc(20,Zn,3,3,"span",52),w._uU(21,"\n                    "),w.YNc(22,wn,3,3,"span",51),w._uU(23,"\n                  "),w.qZA(),w._uU(24,"\n                  "),w.YNc(25,_n,2,1,"div",53),w._uU(26,"\n                "),w.qZA(),w._uU(27,"\n              "),w.qZA(),w._uU(28,"\n            "),w.qZA(),w._uU(29,"\n\n            "),w.TgZ(30,"td",46),w.NdJ("click",(function(){const t=w.CHM(e).$implicit,n=w.oxw(3);return w.KtG(n.edit(t))})),w._uU(31,"\n              "),w.YNc(32,vn,1,2,"bit-badge-list",54),w._uU(33,"\n              "),w.YNc(34,An,3,3,"span",9),w._uU(35,"\n            "),w.qZA(),w._uU(36,"\n\n            "),w.TgZ(37,"td",46),w.NdJ("click",(function(){const t=w.CHM(e).$implicit,n=w.oxw(3);return w.KtG(n.edit(t))})),w._uU(38),w.ALo(39,"userType"),w.qZA(),w._uU(40,"\n\n            "),w.TgZ(41,"td",27),w._uU(42,"\n              "),w.YNc(43,xn,9,6,"ng-container",9),w._uU(44,"\n              "),w.YNc(45,yn,9,6,"ng-container",9),w._uU(46,"\n            "),w.qZA(),w._uU(47,"\n            "),w.TgZ(48,"td",27),w._uU(49,"\n              "),w._UZ(50,"button",29),w.ALo(51,"i18n"),w._uU(52,"\n\n              "),w.TgZ(53,"bit-menu",null,55),w._uU(55,"\n                "),w.YNc(56,Tn,5,3,"button",33),w._uU(57,"\n                "),w.YNc(58,Cn,8,3,"button",33),w._uU(59,"\n                "),w.YNc(60,qn,1,0,"bit-menu-divider",9),w._uU(61,"\n                "),w.TgZ(62,"button",31),w.NdJ("click",(function(){const t=w.CHM(e).$implicit,n=w.oxw(3);return w.KtG(n.edit(t))})),w._uU(63,"\n                  "),w._UZ(64,"i",56),w._uU(65),w.ALo(66,"i18n"),w.qZA(),w._uU(67,"\n                "),w.YNc(68,kn,5,3,"button",33),w._uU(69,"\n                "),w.TgZ(70,"button",31),w.NdJ("click",(function(){const t=w.CHM(e).$implicit,n=w.oxw(3);return w.KtG(n.edit(t))})),w._uU(71,"\n                  "),w._UZ(72,"i",57),w._uU(73),w.ALo(74,"i18n"),w.qZA(),w._uU(75,"\n                "),w._UZ(76,"bit-menu-divider"),w._uU(77,"\n                "),w.YNc(78,Sn,5,3,"button",33),w._uU(79,"\n                "),w.YNc(80,In,5,3,"button",33),w._uU(81,"\n                "),w.YNc(82,Pn,5,3,"button",33),w._uU(83,"\n                "),w.YNc(84,Jn,5,3,"button",33),w._uU(85,"\n                "),w.TgZ(86,"button",31),w.NdJ("click",(function(){const t=w.CHM(e).$implicit,n=w.oxw(3);return w.KtG(n.remove(t))})),w._uU(87,"\n                  "),w.TgZ(88,"span",36),w._uU(89,"\n                    "),w._UZ(90,"i",37),w._uU(91),w.ALo(92,"i18n"),w.qZA(),w._uU(93,"\n                "),w.qZA(),w._uU(94,"\n              "),w.qZA(),w._uU(95,"\n            "),w.qZA(),w._uU(96,"\n          "),w.qZA()}if(2&e){const e=t.$implicit,n=w.MAs(54),i=w.oxw(3);let o;w.xp6(4),w.Q6J("ngModel",e.checked),w.xp6(7),w.Q6J("text",w.lcZ(12,26,e))("id",e.userId),w.xp6(6),w.hij("\n                    ",null!==(o=e.name)&&void 0!==o?o:e.email,"\n                    "),w.xp6(1),w.Q6J("ngIf",e.status===i.userStatusType.Invited),w.xp6(2),w.Q6J("ngIf",e.status===i.userStatusType.Accepted),w.xp6(2),w.Q6J("ngIf",e.status===i.userStatusType.Revoked),w.xp6(3),w.Q6J("ngIf",e.name),w.xp6(7),w.Q6J("ngIf",i.organization.useGroups||!e.accessAll),w.xp6(2),w.Q6J("ngIf",!i.organization.useGroups&&e.accessAll),w.xp6(4),w.hij("\n              ",w.lcZ(39,28,e.type),"\n            "),w.xp6(5),w.Q6J("ngIf",e.twoFactorEnabled),w.xp6(2),w.Q6J("ngIf",i.showEnrolledStatus(e)),w.xp6(5),w.s9C("appA11yTitle",w.lcZ(51,30,"options")),w.Q6J("bitMenuTriggerFor",n),w.xp6(6),w.Q6J("ngIf",e.status===i.userStatusType.Invited),w.xp6(2),w.Q6J("ngIf",e.status===i.userStatusType.Accepted),w.xp6(2),w.Q6J("ngIf",e.status===i.userStatusType.Accepted||e.status===i.userStatusType.Invited),w.xp6(5),w.hij(" ",w.lcZ(66,32,"memberRole"),"\n                "),w.xp6(3),w.Q6J("ngIf",i.organization.useGroups),w.xp6(5),w.hij(" ",w.lcZ(74,34,"collections"),"\n                "),w.xp6(5),w.Q6J("ngIf",i.organization.useEvents&&e.status===i.userStatusType.Confirmed),w.xp6(2),w.Q6J("ngIf",i.allowResetPassword(e)),w.xp6(2),w.Q6J("ngIf",e.status===i.userStatusType.Revoked),w.xp6(2),w.Q6J("ngIf",e.status!==i.userStatusType.Revoked),w.xp6(7),w.hij(" ",w.lcZ(92,36,"remove"),"\n                  ")}}function Ln(e,t){if(1&e){const e=w.EpF();w.ynx(0),w._uU(1,"\n      "),w.YNc(2,Un,4,6,"app-callout",21),w._uU(3,"\n      "),w.TgZ(4,"bit-table",22),w.NdJ("scrolled",(function(){w.CHM(e);const t=w.oxw(2);return w.KtG(t.loadMore())})),w._uU(5,"\n        "),w.ynx(6,23),w._uU(7,"\n          "),w.TgZ(8,"tr"),w._uU(9,"\n            "),w.TgZ(10,"th",24),w._uU(11,"\n              "),w.TgZ(12,"input",25),w.NdJ("change",(function(t){w.CHM(e);const n=w.oxw(2);return w.KtG(n.selectAll(t.target.checked))})),w.qZA(),w._uU(13,"\n              "),w.TgZ(14,"label",26),w._uU(15),w.ALo(16,"i18n"),w.qZA(),w._uU(17,"\n            "),w.qZA(),w._uU(18,"\n            "),w.TgZ(19,"th",27),w._uU(20),w.ALo(21,"i18n"),w.qZA(),w._uU(22,"\n            "),w.TgZ(23,"th",27),w._uU(24),w.ALo(25,"i18n"),w.qZA(),w._uU(26,"\n            "),w.TgZ(27,"th",27),w._uU(28),w.ALo(29,"i18n"),w.qZA(),w._uU(30,"\n            "),w.TgZ(31,"th",27),w._uU(32),w.ALo(33,"i18n"),w.qZA(),w._uU(34,"\n            "),w.TgZ(35,"th",28),w._uU(36,"\n              "),w._UZ(37,"button",29),w.ALo(38,"i18n"),w._uU(39,"\n\n              "),w.TgZ(40,"bit-menu",null,30),w._uU(42,"\n                "),w.TgZ(43,"button",31),w.NdJ("click",(function(){w.CHM(e);const t=w.oxw(2);return w.KtG(t.bulkReinvite())})),w._uU(44,"\n                  "),w._UZ(45,"i",32),w._uU(46),w.ALo(47,"i18n"),w.qZA(),w._uU(48,"\n                "),w.YNc(49,fn,8,3,"button",33),w._uU(50,"\n                "),w.TgZ(51,"button",31),w.NdJ("click",(function(){w.CHM(e);const t=w.oxw(2);return w.KtG(t.bulkRestore())})),w._uU(52,"\n                  "),w._UZ(53,"i",34),w._uU(54),w.ALo(55,"i18n"),w.qZA(),w._uU(56,"\n                "),w.TgZ(57,"button",31),w.NdJ("click",(function(){w.CHM(e);const t=w.oxw(2);return w.KtG(t.bulkRevoke())})),w._uU(58,"\n                  "),w._UZ(59,"i",35),w._uU(60),w.ALo(61,"i18n"),w.qZA(),w._uU(62,"\n                "),w.TgZ(63,"button",31),w.NdJ("click",(function(){w.CHM(e);const t=w.oxw(2);return w.KtG(t.bulkRemove())})),w._uU(64,"\n                  "),w.TgZ(65,"span",36),w._uU(66,"\n                    "),w._UZ(67,"i",37),w._uU(68),w.ALo(69,"i18n"),w.qZA(),w._uU(70,"\n                "),w.qZA(),w._uU(71,"\n              "),w.qZA(),w._uU(72,"\n            "),w.qZA(),w._uU(73,"\n          "),w.qZA(),w._uU(74,"\n        "),w.BQk(),w._uU(75,"\n        "),w.ynx(76,38),w._uU(77,"\n          "),w.YNc(78,Nn,97,38,"tr",39),w._uU(79,"\n        "),w.BQk(),w._uU(80,"\n      "),w.qZA(),w._uU(81,"\n    "),w.BQk()}if(2&e){const e=w.MAs(41),t=w.oxw().ngIf,n=w.oxw();w.xp6(2),w.Q6J("ngIf",n.showConfirmUsers),w.xp6(2),w.Q6J("infiniteScrollDistance",1)("infiniteScrollDisabled",!n.isPaging()),w.xp6(11),w.Oqu(w.lcZ(16,16,"all")),w.xp6(5),w.Oqu(w.lcZ(21,18,"name")),w.xp6(4),w.Oqu(w.lcZ(25,20,n.organization.useGroups?"groups":"collections")),w.xp6(4),w.Oqu(w.lcZ(29,22,"role")),w.xp6(4),w.Oqu(w.lcZ(33,24,"policies")),w.xp6(5),w.s9C("appA11yTitle",w.lcZ(38,26,"options")),w.Q6J("bitMenuTriggerFor",e),w.xp6(9),w.hij("\n                  ",w.lcZ(47,28,"reinviteSelected"),"\n                "),w.xp6(3),w.Q6J("ngIf",n.showBulkConfirmUsers),w.xp6(5),w.hij("\n                  ",w.lcZ(55,30,"restoreAccess"),"\n                "),w.xp6(6),w.hij("\n                  ",w.lcZ(61,32,"revokeAccess"),"\n                "),w.xp6(8),w.hij("\n                    ",w.lcZ(69,34,"remove"),"\n                  "),w.xp6(10),w.Q6J("ngForOf",t)}}function zn(e,t){if(1&e&&(w.ynx(0),w._uU(1,"\n    "),w.YNc(2,mn,3,3,"p",9),w._uU(3,"\n    "),w.YNc(4,Ln,82,36,"ng-container",9),w._uU(5,"\n  "),w.BQk()),2&e){const e=t.ngIf;w.xp6(2),w.Q6J("ngIf",!e.length),w.xp6(2),w.Q6J("ngIf",e.length)}}function Mn(e,t){}function On(e,t){}function Gn(e,t){}function Rn(e,t){}function Qn(e,t){}function Yn(e,t){}function jn(e,t){}function En(e,t){}const Bn=function(e,t){return[e,t,"name","email","id"]};class Dn extends Fe.b{constructor(e,t,n,i,o,s,r,a,c,u,d,p,g,h,f,b,Z,w,_,v){super(e,r,n,o,s,a,i,u,d,p,h),this.route=t,this.policyService=c,this.syncService=g,this.organizationService=f,this.organizationApiService=b,this.organizationUserService=Z,this.dialogService=w,this.groupService=_,this.collectionService=v,this.userType=U.j,this.userStatusType=m.D,this.status=null,this.orgResetPasswordPolicyEnabled=!1,this.destroy$=new l.x}ngOnInit(){return tn(this,void 0,void 0,(function*(){(0,p.a)([this.route.params,this.route.queryParams,this.policyService.policies$]).pipe((0,Oe.b)((([e,t,n])=>tn(this,void 0,void 0,(function*(){if(this.organization=yield this.organizationService.get(e.organizationId),this.organization.canManageUsersPassword&&!this.organization.hasPublicAndPrivateKeys){const e=yield this.cryptoService.getOrgKey(this.organization.id),t=yield this.cryptoService.makeKeyPair(e),n=new $e.u(t[0],t[1].encryptedString),i=yield this.organizationApiService.updateKeys(this.organization.id,n);if(null==i)throw new Error(this.i18nService.t("resetPasswordOrgKeysError"));this.organization.hasPublicAndPrivateKeys=null!=i.publicKey&&null!=i.privateKey,yield this.syncService.fullSync(!0)}const i=n.filter((e=>e.type===je.M.ResetPassword)).find((e=>e.organizationId===this.organization.id));if(this.orgResetPasswordPolicyEnabled=null==i?void 0:i.enabled,yield this.load(),this.searchText=t.search,null!=t.viewEvents){const e=this.users.filter((e=>e.id===t.viewEvents));e.length>0&&e[0].status===m.D.Confirmed&&this.events(e[0])}})))),(0,g.R)(this.destroy$)).subscribe()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}load(){const e=Object.create(null,{load:{get:()=>super.load}});return tn(this,void 0,void 0,(function*(){yield e.load.call(this)}))}getUsers(){var e;return tn(this,void 0,void 0,(function*(){let t,n;const i=this.organizationUserService.getAllUsers(this.organization.id,{includeGroups:this.organization.useGroups,includeCollections:!this.organization.useGroups});this.organization.useGroups?t=this.getGroupNameMap():n=this.getCollectionNameMap();const[o,s,r]=yield Promise.all([i,t,n]);return null===(e=o.data)||void 0===e?void 0:e.map((e=>{var t,n;const i=Ke.fromResponse(e);return i.groupNames=i.groups.map((e=>s.get(e))).sort(null===(t=this.i18nService.collator)||void 0===t?void 0:t.compare),i.collectionNames=i.collections.map((e=>r.get(e.id))).sort(null===(n=this.i18nService.collator)||void 0===n?void 0:n.compare),i}))}))}getGroupNameMap(){return tn(this,void 0,void 0,(function*(){const e=yield this.groupService.getAll(this.organization.id),t=new Map;return e.forEach((e=>t.set(e.id,e.name))),t}))}getCollectionNameMap(){return tn(this,void 0,void 0,(function*(){const e=new Map,t=(yield this.apiService.getCollections(this.organization.id)).data.map((e=>new De.F(new Be.Z(e))));return(yield this.collectionService.decryptMany(t)).forEach((t=>e.set(t.id,t.name))),e}))}deleteUser(e){return this.organizationUserService.deleteOrganizationUser(this.organization.id,e)}revokeUser(e){return this.organizationUserService.revokeOrganizationUser(this.organization.id,e)}restoreUser(e){return this.organizationUserService.restoreOrganizationUser(this.organization.id,e)}reinviteUser(e){return this.organizationUserService.postOrganizationUserReinvite(this.organization.id,e)}confirmUser(e,t){return tn(this,void 0,void 0,(function*(){const n=yield this.cryptoService.getOrgKey(this.organization.id),i=yield this.cryptoService.rsaEncrypt(n.key,t.buffer),o=new Ye;o.key=i.encryptedString,yield this.organizationUserService.postOrganizationUserConfirm(this.organization.id,e.id,o)}))}allowResetPassword(e){let t=!1;switch(this.organization.type){case U.j.Owner:t=!0;break;case U.j.Admin:t=e.type!==U.j.Owner;break;case U.j.Custom:t=e.type!==U.j.Owner&&e.type!==U.j.Admin}return this.organization.canManageUsersPassword&&t&&this.organization.useResetPassword&&this.organization.hasPublicAndPrivateKeys&&e.resetPasswordEnrolled&&this.orgResetPasswordPolicyEnabled&&e.status===m.D.Confirmed}showEnrolledStatus(e){return this.organization.useResetPassword&&e.resetPasswordEnrolled&&this.orgResetPasswordPolicyEnabled}edit(e){return tn(this,void 0,void 0,(function*(){if(!e&&this.organization.planProductType===Ee.k.Free&&this.allUsers.length===this.organization.seats){const e=this.organization.canManageBilling?this.i18nService.t("freeOrgInvLimitReachedManageBilling",this.organization.seats.toString()):this.i18nService.t("freeOrgInvLimitReachedNoManageBilling",this.organization.seats.toString());return void this.dialogService.open(We.I,{data:{orgId:this.organization.id,orgCanManageBilling:this.organization.canManageBilling,dialogBodyText:e}})}const t=(n=this.dialogService,i={data:{name:this.userNamePipe.transform(e),organizationId:this.organization.id,organizationUserId:null!=e?e.id:null,usesKeyConnector:null==e?void 0:e.usesKeyConnector}},n.open(Ze,i));var n,i;switch(yield(0,Ge.n)(t.closed)){case ie.Deleted:this.removeUser(e);break;case ie.Saved:case ie.Revoked:case ie.Restored:this.load()}}))}groups(e){return tn(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(Le,this.groupsModalRef,(n=>{n.name=this.userNamePipe.transform(e),n.organizationId=this.organization.id,n.organizationUserId=null!=e?e.id:null,n.onSavedUser.subscribe((()=>{t.close(),this.load()}))}))}))}bulkRemove(){return tn(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const[e]=yield this.modalService.openViewRef(et.I,this.bulkRemoveModalRef,(e=>{e.organizationId=this.organization.id,e.users=this.getCheckedUsers()}));yield e.onClosedPromise(),yield this.load()}))}bulkRevoke(){return tn(this,void 0,void 0,(function*(){yield this.bulkRevokeOrRestore(!0)}))}bulkRestore(){return tn(this,void 0,void 0,(function*(){yield this.bulkRevokeOrRestore(!1)}))}bulkRevokeOrRestore(e){return tn(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const t=this.modalService.open(Ut,{allowMultipleModals:!0,data:{organizationId:this.organization.id,users:this.getCheckedUsers(),isRevoking:e}});yield t.onClosedPromise(),yield this.load()}))}bulkReinvite(){return tn(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const e=this.getCheckedUsers(),t=e.filter((e=>e.status===m.D.Invited));if(t.length<=0)this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("noSelectedUsersApplicable"));else{try{const n=this.organizationUserService.postManyOrganizationUserReinvite(this.organization.id,t.map((e=>e.id)));this.showBulkStatus(e,t,n,this.i18nService.t("bulkReinviteMessage"))}catch(n){this.validationService.showError(n)}this.actionPromise=null}}))}bulkConfirm(){return tn(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const[e]=yield this.modalService.openViewRef(Xe.$,this.bulkConfirmModalRef,(e=>{e.organizationId=this.organization.id,e.users=this.getCheckedUsers()}));yield e.onClosedPromise(),yield this.load()}))}events(e){return tn(this,void 0,void 0,(function*(){yield this.modalService.openViewRef(Ve.$,this.eventsModalRef,(t=>{t.name=this.userNamePipe.transform(e),t.organizationId=this.organization.id,t.entityId=e.id,t.showUser=!1,t.entity="user"}))}))}resetPassword(e){return tn(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(Pt,this.resetPasswordModalRef,(n=>{n.name=this.userNamePipe.transform(e),n.email=null!=e?e.email:null,n.organizationId=this.organization.id,n.id=null!=e?e.id:null,n.onPasswordReset.subscribe((()=>{t.close(),this.load()}))}))}))}removeUserConfirmationDialog(e){return tn(this,void 0,void 0,(function*(){const t=e.usesKeyConnector?this.i18nService.t("removeUserConfirmationKeyConnector"):this.i18nService.t("removeOrgUserConfirmation");return this.platformUtilsService.showDialog(t,this.i18nService.t("removeUserIdAccess",this.userNamePipe.transform(e)),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")}))}showBulkStatus(e,t,n,i){return tn(this,void 0,void 0,(function*(){const[o,s]=yield this.modalService.openViewRef(ft.C,this.bulkStatusModalRef,(e=>{e.loading=!0}));let r=!1;o.onShown.subscribe((()=>{r&&o.close()}));try{const r=yield n;if(o){const n=r.data.filter((e=>""!==e.error)).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t.error})),{}),o=t.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t})),{});s.users=e.map((e=>{var t;let s=null!==(t=n[e.id])&&void 0!==t?t:i;return o.hasOwnProperty(e.id)||(s=this.i18nService.t("bulkFilteredMessage")),{user:e,error:n.hasOwnProperty(e.id),message:s}})),s.loading=!1}}catch(a){r=!0,o.close()}}))}}Dn.ɵfac=function(e){return new(e||Dn)(w.Y36(_.s),w.Y36(ze.gz),w.Y36(v.D),w.Y36(i.Z),w.Y36(x.P),w.Y36(xt.$),w.Y36(Jt.o),w.Y36(Nt.R),w.Y36(At.d),w.Y36(ye.$),w.Y36(Re.C),w.Y36(Qe.z),w.Y36(Lt._),w.Y36(zt.b),w.Y36(h.Mn),w.Y36(Mt.M),w.Y36(y.t),w.Y36(Ot.x),w.Y36(b.lT),w.Y36(A.a))},Dn.ɵcmp=w.Xpm({type:Dn,selectors:[["app-org-people"]],viewQuery:function(e,t){if(1&e&&(w.Gf(nn,7,w.s_b),w.Gf(on,7,w.s_b),w.Gf(sn,7,w.s_b),w.Gf(rn,7,w.s_b),w.Gf(an,7,w.s_b),w.Gf(ln,7,w.s_b),w.Gf(cn,7,w.s_b)),2&e){let e;w.iGM(e=w.CRH())&&(t.groupsModalRef=e.first),w.iGM(e=w.CRH())&&(t.eventsModalRef=e.first),w.iGM(e=w.CRH())&&(t.confirmModalRef=e.first),w.iGM(e=w.CRH())&&(t.resetPasswordModalRef=e.first),w.iGM(e=w.CRH())&&(t.bulkStatusModalRef=e.first),w.iGM(e=w.CRH())&&(t.bulkConfirmModalRef=e.first),w.iGM(e=w.CRH())&&(t.bulkRemoveModalRef=e.first)}},features:[w.qOj],decls:80,vars:45,consts:[[1,"container","page-content"],[1,"tw-mb-4","tw-flex","tw-flex-col","tw-space-y-4"],[1,"tw-flex","tw-items-center","tw-justify-end","tw-space-x-3"],[3,"selected","selectedChange"],[3,"value"],["bitBadge","","badgeType","info",4,"ngIf"],[1,"tw-grow",3,"ngModel","placeholder","ngModelChange"],["type","button","bitButton","","buttonType","primary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],[4,"ngIf"],["addEdit",""],["groupsTemplate",""],["eventsTemplate",""],["confirmTemplate",""],["resetPasswordTemplate",""],["bulkStatusTemplate",""],["bulkConfirmTemplate",""],["bulkRemoveTemplate",""],["bitBadge","","badgeType","info"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["type","info","icon","bwi bwi-check-circle",3,"title",4,"ngIf"],["infinite-scroll","",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled"],["header",""],["bitCell","",1,"tw-w-20"],["type","checkbox","id","selectAll",1,"tw-mr-1",3,"change"],["for","selectAll",1,"tw-mb-0","!tw-font-bold","!tw-text-muted"],["bitCell",""],["bitCell","",1,"tw-w-10"],["type","button","bitIconButton","bwi-ellipsis-v","size","small",3,"bitMenuTriggerFor","appA11yTitle"],["headerMenu",""],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-envelope"],["type","button","bitMenuItem","",3,"click",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-plus-circle"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-minus-circle"],[1,"tw-text-danger"],["aria-hidden","true",1,"bwi","bwi-close"],["body",""],["bitRow","","alignContent","middle",4,"ngFor","ngForOf"],["type","info","icon","bwi bwi-check-circle",3,"title"],[1,"tw-text-success"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-check"],["bitRow","","alignContent","middle"],["bitCell","",3,"click"],["type","checkbox",3,"ngModel","ngModelChange"],["bitCell","",1,"tw-cursor-pointer",3,"click"],[1,"tw-flex","tw-items-center"],["size","small",1,"tw-mr-3",3,"text","id"],[1,"tw-flex","tw-flex-col"],[1,"tw-text-sm","tw-font-bold","tw-text-primary-500"],["bitBadge","","badgeType","secondary",4,"ngIf"],["bitBadge","","badgeType","warning",4,"ngIf"],["class","tw-text-xs tw-text-muted",4,"ngIf"],["badgeType","secondary",3,"items","maxItems",4,"ngIf"],["rowMenu",""],["aria-hidden","true",1,"bwi","bwi-user"],["aria-hidden","true",1,"bwi","bwi-collection"],["bitBadge","","badgeType","secondary"],["bitBadge","","badgeType","warning"],[1,"tw-text-xs","tw-text-muted"],["badgeType","secondary",3,"items","maxItems"],["aria-hidden","true",1,"bwi","bwi-lock",3,"title"],[1,"tw-sr-only"],["aria-hidden","true",1,"bwi","bwi-key",3,"title"],["aria-hidden","true",1,"bwi","bwi-envelope"],["aria-hidden","true",1,"bwi","bwi-check"],["aria-hidden","true",1,"bwi","bwi-users"],["aria-hidden","true",1,"bwi","bwi-file-text"],["aria-hidden","true",1,"bwi","bwi-key"],["aria-hidden","true",1,"bwi","bwi-plus-circle"],["aria-hidden","true",1,"bwi","bwi-minus-circle"]],template:function(e,t){1&e&&(w.TgZ(0,"div",0),w._uU(1,"\n  "),w.TgZ(2,"div",1),w._uU(3,"\n    "),w.TgZ(4,"h1"),w._uU(5),w.ALo(6,"i18n"),w.qZA(),w._uU(7,"\n    "),w.TgZ(8,"div",2),w._uU(9,"\n      "),w.TgZ(10,"bit-toggle-group",3),w.NdJ("selectedChange",(function(e){return t.filter(e)})),w.ALo(11,"i18n"),w._uU(12,"\n        "),w.TgZ(13,"bit-toggle",4),w._uU(14),w.ALo(15,"i18n"),w.YNc(16,un,2,1,"span",5),w._uU(17,"\n        "),w.qZA(),w._uU(18,"\n\n        "),w.TgZ(19,"bit-toggle",4),w._uU(20),w.ALo(21,"i18n"),w.YNc(22,dn,2,1,"span",5),w._uU(23,"\n        "),w.qZA(),w._uU(24,"\n\n        "),w.TgZ(25,"bit-toggle",4),w._uU(26),w.ALo(27,"i18n"),w.YNc(28,pn,2,1,"span",5),w._uU(29,"\n        "),w.qZA(),w._uU(30,"\n\n        "),w.TgZ(31,"bit-toggle",4),w._uU(32),w.ALo(33,"i18n"),w.YNc(34,gn,2,1,"span",5),w._uU(35,"\n        "),w.qZA(),w._uU(36,"\n      "),w.qZA(),w._uU(37,"\n\n      "),w.TgZ(38,"app-search-input",6),w.NdJ("ngModelChange",(function(e){return t.searchText=e})),w.ALo(39,"i18n"),w._uU(40,"\n      "),w.qZA(),w._uU(41,"\n\n      "),w.TgZ(42,"button",7),w.NdJ("click",(function(){return t.invite()})),w._uU(43,"\n        "),w._UZ(44,"i",8),w._uU(45),w.ALo(46,"i18n"),w.qZA(),w._uU(47,"\n    "),w.qZA(),w._uU(48,"\n  "),w.qZA(),w._uU(49,"\n  "),w.YNc(50,hn,9,6,"ng-container",9),w._uU(51,"\n  "),w.YNc(52,zn,6,2,"ng-container",9),w.ALo(53,"search"),w._uU(54,"\n  "),w.YNc(55,Mn,0,0,"ng-template",null,10,w.W1O),w._uU(57,"\n  "),w.YNc(58,On,0,0,"ng-template",null,11,w.W1O),w._uU(60,"\n  "),w.YNc(61,Gn,0,0,"ng-template",null,12,w.W1O),w._uU(63,"\n  "),w.YNc(64,Rn,0,0,"ng-template",null,13,w.W1O),w._uU(66,"\n  "),w.YNc(67,Qn,0,0,"ng-template",null,14,w.W1O),w._uU(69,"\n  "),w.YNc(70,Yn,0,0,"ng-template",null,15,w.W1O),w._uU(72,"\n  "),w.YNc(73,jn,0,0,"ng-template",null,16,w.W1O),w._uU(75,"\n  "),w.YNc(76,En,0,0,"ng-template",null,17,w.W1O),w._uU(78,"\n"),w.qZA(),w._uU(79,"\n")),2&e&&(w.xp6(5),w.Oqu(w.lcZ(6,20,"members")),w.xp6(5),w.Q6J("selected",t.status),w.uIk("aria-label",w.lcZ(11,22,"memberStatusFilter")),w.xp6(3),w.Q6J("value",null),w.xp6(1),w.hij("\n          ",w.lcZ(15,24,"all")," "),w.xp6(2),w.Q6J("ngIf",t.allCount),w.xp6(3),w.Q6J("value",t.userStatusType.Invited),w.xp6(1),w.hij("\n          ",w.lcZ(21,26,"invited"),"\n          "),w.xp6(2),w.Q6J("ngIf",t.invitedCount),w.xp6(3),w.Q6J("value",t.userStatusType.Accepted),w.xp6(1),w.hij("\n          ",w.lcZ(27,28,"needsConfirmation"),"\n          "),w.xp6(2),w.Q6J("ngIf",t.acceptedCount),w.xp6(3),w.Q6J("value",t.userStatusType.Revoked),w.xp6(1),w.hij("\n          ",w.lcZ(33,30,"revoked"),"\n          "),w.xp6(2),w.Q6J("ngIf",t.revokedCount),w.xp6(4),w.Q6J("ngModel",t.searchText)("placeholder",w.lcZ(39,32,"searchMembers")),w.xp6(7),w.hij("\n        ",w.lcZ(46,34,"inviteMember"),"\n      "),w.xp6(5),w.Q6J("ngIf",t.loading),w.xp6(2),w.Q6J("ngIf",!t.loading&&(t.isPaging()?t.pagedUsers:w.G7q(53,36,w.WLB(42,Bn,t.users,t.searchText)))))},dependencies:[T.sg,T.O5,a.Wl,a.JJ,a.On,Gt.Ry,C.B,tt.O,nt.A,I.l,Rt.b,P.r,$.Q,Qt.M,Yt.t,jt.e,Et.n,Bt.a,Dt.Y,$t.v,Ht,Vt,Xt,W.C,Re.C,Qe.z,en.t],encapsulation:2});const $n=[{path:"",component:Dn,canActivate:[Me.G],data:{titleId:"members",organizationPermissions:h.tt}}];class Fn{}Fn.ɵfac=function(e){return new(e||Fn)},Fn.ɵmod=w.oAB({type:Fn}),Fn.ɵinj=w.cJS({imports:[ze.Bz.forChild($n),ze.Bz]});class Hn{constructor(e,t){e.registerComponentFactoryResolver(Le,t)}}Hn.ɵfac=function(e){return new(e||Hn)(w.LFG(i.Z),w.LFG(w._Vd))},Hn.ɵmod=w.oAB({type:Hn}),Hn.ɵinj=w.cJS({imports:[s.PV,o.f,Fn,Ae]})}}]);
//# sourceMappingURL=434.8cff7c9079b96bcab75d.js.map