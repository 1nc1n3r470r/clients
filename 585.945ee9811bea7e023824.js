"use strict";(self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[]).push([[585],{22089:(e,t,n)=>{n.d(t,{i:()=>f});var i=n(98645),o=n(77494),s=n(24852),c=n(56965),r=n(64751),a=n(32100),u=n(31131),l=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class d{constructor(e,t,n,o,s,c){this.modalRef=e,this.config=t,this.userVerificationService=n,this.formBuilder=o,this.platformUtilsService=s,this.i18nService=c,this.confirmDescription=this.config.data.confirmDescription,this.confirmButtonText=this.config.data.confirmButtonText,this.modalTitle=this.config.data.modalTitle,this.secret=new i.NI}submit(){return l(this,void 0,void 0,(function*(){try{yield this.userVerificationService.verifyUser(this.secret.value)}catch(e){return void this.platformUtilsService.showToast("error",this.i18nService.t("error"),this.i18nService.t("invalidMasterPassword"))}this.modalRef.close(!0)}))}}d.ɵfac=function(e){return new(e||d)(s.Y36(c.b),s.Y36(o.u),s.Y36(r.i),s.Y36(i.qu),s.Y36(a.P),s.Y36(u.D))},d.ɵdir=s.lG2({type:d});var p=n(81974),h=n(35094),g=n(19419),v=n(17404);class f extends d{}f.ɵfac=function(){let e;return function(t){return(e||(e=s.n5z(f)))(t||f)}}(),f.ɵcmp=s.Xpm({type:f,selectors:[["ng-component"]],features:[s.qOj],decls:41,vars:15,consts:[["role","dialog","aria-modal","true","aria-labelledby","confirmUserTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content",3,"ngSubmit"],["form",""],["id","modalTitle | i18n ",1,"tw-my-6","tw-px-3.5","tw-font-semibold"],[1,"tw-border-0","tw-border-t","tw-border-solid","tw-border-secondary-300","tw-p-3.5"],[1,"tw-p-3.5"],["ngDefaultControl","","name","secret",3,"formControl"],[1,"tw-border-0","tw-border-t","tw-border-solid","tw-border-secondary-300","tw-bg-background-alt","tw-p-3.5"],["bitButton","","buttonType","primary","type","submit","appBlurClick",""],["bitButton","","buttonType","secondary","data-dismiss","modal"]],template:function(e,t){1&e&&(s._uU(0,"\n"),s._uU(1,"\n"),s.TgZ(2,"div",0),s._uU(3,"\n  "),s.TgZ(4,"div",1),s._uU(5,"\n    "),s.TgZ(6,"form",2,3),s.NdJ("ngSubmit",(function(){return t.submit()})),s._uU(8,"\n      "),s.TgZ(9,"h2",4),s._uU(10),s.ALo(11,"uppercase"),s.ALo(12,"i18n"),s.qZA(),s._uU(13,"\n      "),s.TgZ(14,"div",5),s._uU(15),s.ALo(16,"i18n"),s.qZA(),s._uU(17,"\n      "),s.TgZ(18,"div",6),s._uU(19,"\n        "),s.TgZ(20,"app-user-verification",7),s._uU(21,"\n        "),s.qZA(),s._uU(22,"\n      "),s.qZA(),s._uU(23,"\n      "),s.TgZ(24,"div",8),s._uU(25,"\n        "),s.TgZ(26,"button",9),s._uU(27,"\n          "),s.TgZ(28,"span"),s._uU(29),s.ALo(30,"i18n"),s.qZA(),s._uU(31,"\n        "),s.qZA(),s._uU(32,"\n        "),s.TgZ(33,"button",10),s._uU(34),s.ALo(35,"i18n"),s.qZA(),s._uU(36,"\n      "),s.qZA(),s._uU(37,"\n    "),s.qZA(),s._uU(38,"\n  "),s.qZA(),s._uU(39,"\n"),s.qZA(),s._uU(40,"\n")),2&e&&(s.xp6(10),s.hij("\n        ",s.lcZ(11,5,s.lcZ(12,7,t.modalTitle)),"\n      "),s.xp6(5),s.hij("\n        ",s.lcZ(16,9,t.confirmDescription),"\n      "),s.xp6(5),s.Q6J("formControl",t.secret),s.xp6(9),s.Oqu(s.lcZ(30,11,t.confirmButtonText)),s.xp6(5),s.hij("\n          ",s.lcZ(35,13,"cancel"),"\n        "))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.F,i.oH,p.r,h.W,g.gd,v.C],encapsulation:2})},43585:(e,t,n)=>{n.r(t),n.d(t,{SecretsManagerModule:()=>wc});var i=n(71146),o=n(73650),s=n(19419),c=n(98597),r=n(41938),a=n(36903),u=n(24852);class l{}l.ɵfac=function(e){return new(e||l)},l.ɵmod=u.oAB({type:l}),l.ɵinj=u.cJS({imports:[s.ez,a.m,r.v,o.U8,c.Bz]});var d=n(1267);class p{}p.ɵfac=function(e){return new(e||p)},p.ɵmod=u.oAB({type:p}),p.ɵinj=u.cJS({imports:[d.m,l]});var h=n(39639),g=n(85915),v=n(21021);class f{}f.ɵfac=function(e){return new(e||f)},f.ɵmod=u.oAB({type:f}),f.ɵinj=u.cJS({imports:[i.m,g.O,h.q,v.WO,i.m]});var m=n(10926),w=n(68586);class U{ngOnInit(){document.body.classList.remove("layout_frontend")}}U.ɵfac=function(e){return new(e||U)},U.ɵcmp=u.Xpm({type:U,selectors:[["sm-layout"]],decls:13,vars:0,consts:[[1,"tw-flex","tw-w-full"],[1,"tw-min-h-screen","tw-w-60","tw-bg-background-alt3"],["name","sidebar"],[1,"tw-min-h-screen","tw-min-w-0","tw-flex-1","tw-p-6"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._uU(1,"\n  "),u.TgZ(2,"nav",1),u._uU(3,"\n    "),u._UZ(4,"router-outlet",2),u._uU(5,"\n  "),u.qZA(),u._uU(6,"\n  "),u.TgZ(7,"main",3),u._uU(8,"\n    "),u._UZ(9,"router-outlet"),u._uU(10,"\n  "),u.qZA(),u._uU(11,"\n"),u.qZA(),u._uU(12,"\n"))},dependencies:[c.lC],encapsulation:2});const _=n(66997).W4`
  <svg viewBox="0 0 197 51" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M51.865 10.157c-1.299-1.814-3.066-2.684-5.338-2.684-2.38 0-4.22.98-5.41 2.866H40.9c.145-1.742.217-3.011.217-3.81V.944a.648.648 0 0 0-.65-.653h-3.895c-.36 0-.649.29-.649.653v25.502c0 .363.289.653.65.653h2.885a.667.667 0 0 0 .613-.4l.685-1.704h.36c1.3 1.669 3.03 2.467 5.303 2.467 2.272 0 4.075-.835 5.41-2.612 1.334-1.741 1.983-4.208 1.983-7.4 0-3.084-.649-5.514-1.947-7.292Zm-9.846 2.757c.613-.798 1.587-1.197 2.849-1.197 1.082 0 1.983.472 2.633 1.415.613.943.938 2.358.938 4.244 0 1.85-.325 3.337-.938 4.317-.613 1.016-1.515 1.523-2.561 1.523-1.334 0-2.308-.471-2.921-1.342-.614-.87-.902-2.358-.902-4.425v-.58c0-1.815.324-3.157.902-3.955ZM58.5 27.134h3.896c.36 0 .685-.363.649-.689V8.525a.648.648 0 0 0-.65-.653H58.5c-.36 0-.649.29-.649.653V26.48c0 .363.289.653.65.653Zm20.883-4.317c-1.082.29-1.983.436-2.74.436-.65 0-1.227-.182-1.588-.58-.397-.327-.613-.908-.613-1.633v-9.214h4.905a.418.418 0 0 0 .433-.435V8.126c0-.11-.108-.218-.216-.218h-5.158V4.244a.418.418 0 0 0-.433-.435h-2.597c-.18 0-.324.109-.396.29l-1.407 3.773-2.85 1.705a.13.13 0 0 1-.017.054.13.13 0 0 0-.018.055v1.705c0 .254.18.435.432.435h2.056v9.25c0 2.104.505 3.7 1.443 4.752.938 1.089 2.453 1.596 4.544 1.596 1.732 0 3.282-.253 4.509-.761a.446.446 0 0 0 .252-.4v-3.01c0-.29-.252-.508-.54-.436Zm20.414 3.52c.217.47.614.797 1.119.797h.144c.541 0 .974-.326 1.118-.834l4.544-16.868a.825.825 0 0 0-.793-1.052.847.847 0 0 0-.794.616l-2.705 10.121c-.829 3.265-1.262 5.296-1.37 6.022h-.108c-.181-.907-.686-2.648-1.515-5.369l-3.39-10.665a1.051 1.051 0 0 0-1.01-.725c-.505 0-.902.29-1.046.725l-3.643 10.738c-.325.907-.83 2.684-1.479 5.369h-.108c-.217-1.306-.686-3.265-1.37-5.95L84.577 8.996a.845.845 0 0 0-.794-.616h-.108c-.577 0-.974.544-.83 1.052l4.8 16.868c.144.508.577.834 1.082.834.505 0 .938-.29 1.082-.762l3.931-11.717.757-2.466.361-1.306h.108l.282 1.065a87.39 87.39 0 0 0 .728 2.671l3.823 11.717Zm21.893.217c.036.326.325.58.65.58.36 0 .685-.363.721-.58v-11.79c0-2.213-.505-3.918-1.515-4.97-1.046-1.088-2.561-1.632-4.617-1.632-1.803 0-3.57.4-5.374 1.125-.396.145-.577.616-.396 1.015.18.4.649.58 1.046.4 1.587-.762 3.101-1.125 4.616-1.125 1.587 0 2.705.435 3.463 1.342.757.907 1.118 2.213 1.118 4.027v1.233l-3.535.109c-2.921 0-5.085.616-6.636 1.632-1.515 1.052-2.309 2.866-2.164 4.752.072 1.415.577 2.54 1.478 3.374 1.01.943 2.417 1.415 4.256 1.415 1.335 0 2.525-.218 3.499-.726 1.01-.508 1.948-1.378 2.885-2.575h.181l.324 2.394Zm-2.128-2.358c-1.118 1.124-2.669 1.705-4.688 1.705-1.299 0-2.309-.327-3.102-.87-.685-.654-1.046-1.597-1.046-2.758 0-1.45.577-2.575 1.695-3.264 1.154-.69 2.994-1.125 5.627-1.234l3.246-.145v1.814c0 1.995-.578 3.627-1.732 4.752Zm18.359-16.07a14.21 14.21 0 0 0-1.696-.11c-1.226 0-2.272.291-3.101.872-.866.544-1.695 1.523-2.453 2.902h-.108l-.144-2.685c0-.399-.325-.689-.722-.689a.726.726 0 0 0-.721.725v17.05c0 .472.361.834.829.834.469 0 .83-.362.83-.834v-9.504c0-2.032.505-3.773 1.515-5.115 1.01-1.342 2.308-2.031 3.895-2.031.541 0 1.082.072 1.623.145.433.072.866-.182.938-.617a.818.818 0 0 0-.685-.943Zm14.499.616c-.974-.471-2.164-.725-3.499-.725-2.597 0-4.544.87-5.915 2.43-1.37 1.742-2.02 4.208-2.02 7.437 0 3.083.722 5.405 2.056 7.037 1.407 1.633 3.318 2.43 5.915 2.43 2.633 0 4.689-1.051 6.096-3.191h.144l.361 2.357c.036.327.288.545.577.545a.572.572 0 0 0 .577-.58V1.124a.819.819 0 0 0-.83-.835.818.818 0 0 0-.829.835v5.912c0 1.379.036 2.757.108 4.245h-.108c-.758-1.197-1.623-2.068-2.633-2.54Zm-8.115 3.011c1.046-1.45 2.56-2.176 4.616-2.176 2.164 0 3.715.617 4.653 1.922 1.01 1.234 1.479 3.301 1.479 6.204v.29c0 2.83-.469 4.86-1.479 6.094-.974 1.233-2.489 1.85-4.617 1.85-4.111 0-6.167-2.648-6.167-7.944 0-2.757.505-4.825 1.515-6.24Zm19.873 13.168c1.551 1.705 3.642 2.54 6.348 2.54 1.082 0 2.055-.073 2.957-.327a12.269 12.269 0 0 0 2.453-.725.745.745 0 0 0 .469-.69c0-.507-.505-.87-.974-.689-.83.29-1.515.472-2.092.58-.794.146-1.768.218-2.813.218-2.201 0-3.86-.616-5.05-1.995-1.19-1.378-1.767-3.337-1.803-5.913h13.417v-1.378c0-2.648-.613-4.752-1.912-6.276-1.226-1.524-2.993-2.285-5.157-2.285-2.489 0-4.437.907-5.915 2.72-1.479 1.778-2.201 4.172-2.201 7.183 0 3.01.758 5.369 2.273 7.037Zm1.515-13.603c1.082-1.197 2.524-1.777 4.328-1.777 1.659 0 2.957.616 3.895 1.813.938 1.197 1.407 2.939 1.407 5.079h-11.542c.216-2.213.829-3.954 1.912-5.115ZM195.305 26.3c0 .471.36.834.829.834.433 0 .83-.399.866-.907v-11.39c0-4.571-2.128-6.856-6.348-6.856-3.102 0-5.23.98-6.456 2.938h-.108l-.217-1.886c-.072-.363-.36-.653-.757-.653a.741.741 0 0 0-.757.761v17.086c0 .472.36.835.829.835s.83-.363.83-.835v-9.504c0-2.503.577-4.353 1.587-5.477 1.01-1.161 2.633-1.705 4.869-1.705 1.659 0 2.849.471 3.679 1.305.757.835 1.154 2.213 1.154 4.1V26.3ZM57.419 2.938C57.42 1.306 58.79 0 60.485 0c1.66 0 3.066 1.306 3.066 2.975v.254c0 1.596-1.407 2.938-3.066 2.938-1.66 0-3.066-1.342-3.066-2.938v-.29ZM23.444.29c.324 0 .613.109.865.363.253.254.361.58.325.87v14.874a8.961 8.961 0 0 1-.65 3.3 13.06 13.06 0 0 1-1.586 2.903c-.65.87-1.407 1.668-2.272 2.466a24.748 24.748 0 0 1-2.453 1.996 51.494 51.494 0 0 1-2.344 1.487 32.79 32.79 0 0 1-1.355.758 23.51 23.51 0 0 0-.34.185l-.268.137a4.32 4.32 0 0 1-.562.262 1.147 1.147 0 0 1-.505.109c-.18 0-.36-.036-.505-.109a3.58 3.58 0 0 0-.324-.163c-.14-.066-.3-.141-.47-.236-.324-.145-.901-.471-1.695-.943-.793-.472-1.623-.98-2.344-1.487-.757-.508-1.587-1.197-2.453-1.995A16 16 0 0 1 2.236 22.6c-.649-.835-1.154-1.814-1.587-2.902A8.96 8.96 0 0 1 0 16.397V1.524c0-.29.108-.617.36-.871C.614.399.867.29 1.227.29h22.218Zm-11.109 26.3s9.125-4.643 9.125-10.048V3.482h-9.125V26.59Zm75.793 17.845a4.55 4.55 0 0 1-.8.07c-.404 0-.73-.12-.975-.36-.247-.24-.37-.606-.37-1.098v-5.203h2.786V36.27h-2.786v-2.162h-1.3l-.677 2.083-1.424.73v.923h1.327v5.23c0 .796.13 1.42.387 1.871.258.452.606.77 1.046.958.44.182.934.273 1.485.273.393 0 .77-.035 1.134-.106.363-.07.66-.155.888-.255v-1.564c-.217.07-.457.132-.721.184Zm-44.578.405c.31-.44.466-.979.466-1.617 0-.557-.115-1.011-.343-1.363-.229-.351-.557-.647-.985-.887a10.38 10.38 0 0 0-1.503-.703 24.399 24.399 0 0 1-1.388-.59c-.328-.157-.56-.316-.694-.474a.864.864 0 0 1-.203-.58c0-.305.138-.54.413-.703.282-.164.689-.246 1.222-.246.457 0 .905.064 1.345.193.445.123.888.281 1.327.475l.65-1.556a8.024 8.024 0 0 0-1.564-.519 7.414 7.414 0 0 0-1.688-.184c-1.124 0-2.03.226-2.715.677-.68.445-1.02 1.098-1.02 1.96 0 .545.108.993.325 1.344.217.346.536.642.958.888.422.246.94.492 1.556.738.627.252 1.101.47 1.424.65.328.176.55.35.668.52a.913.913 0 0 1 .184.562c0 .357-.15.644-.448.861-.299.211-.788.316-1.468.316a6.262 6.262 0 0 1-1.643-.237 9.817 9.817 0 0 1-1.556-.562v1.784c.434.2.894.346 1.38.44a9.03 9.03 0 0 0 1.758.149c.861 0 1.588-.111 2.18-.334.597-.229 1.051-.563 1.362-1.002Zm8.806-8.218c-.62-.357-1.365-.536-2.232-.536-.89 0-1.67.2-2.338.598-.668.398-1.186.978-1.556 1.74-.369.761-.553 1.687-.553 2.777 0 1.096.202 2.013.606 2.751a4.05 4.05 0 0 0 1.697 1.67c.726.37 1.567.554 2.522.554.703 0 1.307-.053 1.81-.158a6.729 6.729 0 0 0 1.486-.501v-1.68a9.269 9.269 0 0 1-1.538.537 7.233 7.233 0 0 1-1.67.176c-.873 0-1.553-.255-2.04-.765-.48-.51-.732-1.236-.755-2.18h6.495v-1.107c0-.914-.167-1.7-.5-2.355a3.592 3.592 0 0 0-1.434-1.52Zm-3.814 1.652c.404-.422.932-.632 1.582-.632.486 0 .885.105 1.195.316.317.21.551.504.703.879.159.375.24.806.247 1.292h-4.43c.07-.814.305-1.433.703-1.855Zm11.997 7.902c-.92 0-1.717-.179-2.39-.536-.674-.358-1.193-.906-1.556-1.644-.364-.738-.545-1.676-.545-2.812 0-1.184.2-2.15.597-2.9.399-.75.95-1.304 1.653-1.662.709-.357 1.52-.536 2.434-.536.58 0 1.105.059 1.574.176a5.53 5.53 0 0 1 1.204.413l-.615 1.652a8.97 8.97 0 0 0-1.1-.369c-.374-.1-.735-.15-1.08-.15-.569 0-1.043.127-1.424.379-.375.252-.656.627-.844 1.125-.181.498-.272 1.116-.272 1.854 0 .715.094 1.318.281 1.81.188.487.466.856.835 1.108.37.246.823.37 1.362.37.534 0 1.011-.065 1.433-.194a6.35 6.35 0 0 0 1.195-.501v1.793a4.43 4.43 0 0 1-1.186.466c-.422.105-.94.158-1.556.158Zm10.494-10.064a5.945 5.945 0 0 0-.536-.026c-.445 0-.855.088-1.23.264-.37.17-.698.398-.985.685a4.322 4.322 0 0 0-.72.95h-.097l-.281-1.715h-1.618V46h2.075v-5.089c0-.48.073-.902.22-1.266a2.486 2.486 0 0 1 1.493-1.45 3.027 3.027 0 0 1 1.055-.184c.14 0 .299.008.475.026.181.018.334.044.457.08l.193-1.934a4.487 4.487 0 0 0-.5-.07Zm6.179-.026c.867 0 1.611.179 2.232.536a3.592 3.592 0 0 1 1.433 1.52c.334.657.5 1.442.5 2.356v1.108h-6.494c.023.943.275 1.67.756 2.18.486.509 1.166.764 2.039.764.62 0 1.178-.059 1.67-.176a9.265 9.265 0 0 0 1.538-.536v1.679a6.726 6.726 0 0 1-1.486.5c-.504.106-1.107.159-1.81.159-.955 0-1.796-.185-2.523-.554a4.05 4.05 0 0 1-1.696-1.67c-.404-.738-.606-1.655-.606-2.75 0-1.09.184-2.017.553-2.778.37-.762.888-1.342 1.556-1.74.668-.399 1.447-.598 2.338-.598Zm0 1.556c-.65 0-1.178.21-1.582.632-.399.422-.633 1.04-.703 1.855h4.43a3.406 3.406 0 0 0-.247-1.292 1.874 1.874 0 0 0-.703-.879c-.31-.21-.709-.316-1.195-.316Zm20.153 5.58c0 .64-.155 1.178-.466 1.618-.31.44-.764.773-1.362 1.002-.592.223-1.318.334-2.18.334-.68 0-1.265-.05-1.757-.15a6.026 6.026 0 0 1-1.38-.44v-1.783a9.78 9.78 0 0 0 1.555.562c.58.158 1.128.237 1.644.237.68 0 1.169-.105 1.468-.316.299-.217.448-.504.448-.861a.913.913 0 0 0-.185-.563c-.117-.17-.34-.343-.668-.518-.322-.182-.796-.399-1.423-.65a11.873 11.873 0 0 1-1.556-.739c-.422-.246-.741-.542-.958-.888-.217-.351-.325-.8-.325-1.344 0-.862.34-1.515 1.02-1.96.685-.451 1.59-.677 2.715-.677.598 0 1.16.062 1.688.184.533.118 1.054.29 1.564.52l-.65 1.555a9.737 9.737 0 0 0-1.328-.475 4.754 4.754 0 0 0-1.344-.193c-.533 0-.94.082-1.222.246-.275.164-.413.398-.413.703 0 .229.067.422.202.58.135.158.366.316.695.475a24.9 24.9 0 0 0 1.388.589c.58.222 1.081.457 1.503.703.428.24.756.536.984.887.229.352.343.806.343 1.363Zm14.379-6.16c-.533-.534-1.26-.8-2.18-.8-.767 0-1.423.16-1.968.483-.539.322-.938.77-1.196 1.345h-.061c-.188-.604-.522-1.058-1.002-1.363-.475-.31-1.055-.465-1.74-.465-.528 0-.988.082-1.38.246a3.041 3.041 0 0 0-.976.641 3.435 3.435 0 0 0-.633.862h-.052l-.132-1.565h-.72V46h.887v-5.537c0-.78.117-1.421.351-1.925.235-.51.569-.885 1.002-1.125.434-.246.947-.37 1.538-.37.446 0 .832.095 1.161.282.328.182.583.463.764.844.188.375.281.858.281 1.45V46h.879v-5.66c0-1.137.255-1.969.765-2.496.516-.534 1.228-.8 2.136-.8.662 0 1.195.208 1.599.624.405.416.607 1.066.607 1.951V46h.87v-6.416c0-1.149-.267-1.99-.8-2.523Zm7.207-.783c1.049 0 1.834.264 2.356.791.521.528.782 1.368.782 2.523V46h-.686l-.158-1.67h-.053a4.255 4.255 0 0 1-.747.958 3.149 3.149 0 0 1-1.081.65c-.422.159-.937.238-1.547.238-.615 0-1.142-.103-1.582-.308a2.316 2.316 0 0 1-1.01-.896c-.235-.393-.352-.87-.352-1.433 0-.95.393-1.67 1.178-2.162.785-.498 1.913-.78 3.384-.844l1.775-.088v-.694c0-.978-.193-1.676-.58-2.092-.387-.416-.958-.624-1.714-.624-.492 0-.967.065-1.424.194a7.533 7.533 0 0 0-1.38.536l-.281-.739a8.697 8.697 0 0 1 1.468-.536 6.384 6.384 0 0 1 1.652-.21Zm2.25 4.86-1.67.071c-1.213.059-2.135.275-2.768.65s-.95.938-.95 1.688c0 .603.188 1.066.563 1.389.381.322.908.483 1.582.483 1.049 0 1.849-.299 2.399-.897.557-.597.838-1.412.844-2.443v-.94Zm10.635-4.034c-.574-.562-1.398-.843-2.47-.843-.574 0-1.078.088-1.512.263-.433.17-.799.402-1.098.695-.293.287-.525.61-.694.967h-.053l-.132-1.74h-.721V46h.888v-5.265c0-1.236.275-2.159.826-2.768.557-.615 1.359-.923 2.408-.923.826 0 1.456.223 1.89.668.434.445.65 1.142.65 2.092V46h.879v-6.249c0-1.201-.287-2.083-.861-2.645Zm7.295-.826c1.049 0 1.834.264 2.355.791.522.528.783 1.368.783 2.523V46h-.686l-.158-1.67h-.053a4.255 4.255 0 0 1-.747.958 3.149 3.149 0 0 1-1.081.65c-.422.159-.938.238-1.547.238-.615 0-1.143-.103-1.582-.308a2.318 2.318 0 0 1-1.011-.896c-.234-.393-.351-.87-.351-1.433 0-.95.392-1.67 1.177-2.162.786-.498 1.914-.78 3.384-.844l1.776-.088v-.694c0-.978-.194-1.676-.58-2.092-.387-.416-.958-.624-1.714-.624-.492 0-.967.065-1.424.194a7.533 7.533 0 0 0-1.38.536l-.281-.739a8.697 8.697 0 0 1 1.468-.536 6.384 6.384 0 0 1 1.652-.21Zm2.25 4.86-1.67.071c-1.213.059-2.136.275-2.769.65-.632.375-.949.938-.949 1.688 0 .603.188 1.066.563 1.389.381.322.908.483 1.582.483 1.049 0 1.848-.299 2.399-.897.557-.597.838-1.412.844-2.443v-.94Zm3.682 8.49c.668.464 1.603.695 2.804.695 1.512 0 2.678-.275 3.498-.826.826-.55 1.239-1.327 1.239-2.33 0-.82-.275-1.44-.826-1.862-.55-.422-1.344-.633-2.382-.633h-1.678c-.322 0-.595-.032-.818-.097a1.18 1.18 0 0 1-.509-.29.7.7 0 0 1-.176-.492c0-.316.094-.58.281-.791.188-.217.46-.43.817-.642.282.053.569.08.862.08 1.066 0 1.898-.279 2.496-.836.598-.556.896-1.31.896-2.258a3.313 3.313 0 0 0-.773-2.145l1.969-.132v-.633h-3.085a2.296 2.296 0 0 0-.396-.096 3.716 3.716 0 0 0-.483-.062 8.395 8.395 0 0 0-.571-.017c-.692 0-1.292.132-1.802.395a2.783 2.783 0 0 0-1.169 1.099c-.276.474-.413 1.034-.413 1.679 0 .673.158 1.25.474 1.731.317.475.75.812 1.301 1.01-.41.241-.718.505-.923.792a1.52 1.52 0 0 0-.307.914c0 .293.085.55.255.773.175.223.401.399.676.528-.691.093-1.239.372-1.643.835a2.47 2.47 0 0 0-.607 1.67c0 .831.331 1.479.993 1.942Zm4.958-.324c-.557.181-1.254.272-2.092.272-.961 0-1.694-.167-2.198-.5-.498-.329-.747-.812-.747-1.451 0-.498.109-.896.326-1.195.222-.3.533-.516.931-.65a4.076 4.076 0 0 1 1.363-.212h1.599c.51 0 .952.047 1.327.141.375.088.665.249.87.483.205.235.308.566.308.994 0 .521-.141.958-.422 1.31-.281.356-.703.626-1.265.808Zm.008-8.174c-.422.398-1.028.597-1.819.597-.809 0-1.418-.199-1.828-.597-.41-.404-.615-.97-.615-1.696 0-.78.213-1.383.641-1.811.434-.434 1.029-.65 1.784-.65.78 0 1.386.202 1.82.606.433.404.65 1.01.65 1.82 0 .755-.211 1.332-.633 1.73Zm8.28-4.87c.814 0 1.491.191 2.03.572.545.38.949.902 1.213 1.565.269.662.404 1.42.404 2.276v.641h-6.899c0 1.313.301 2.32.905 3.024.609.703 1.479 1.055 2.61 1.055a7.35 7.35 0 0 0 1.538-.141c.44-.1.926-.267 1.459-.501v.817a6.538 6.538 0 0 1-1.406.457c-.469.1-1.008.15-1.617.15-.967 0-1.778-.2-2.435-.598a3.82 3.82 0 0 1-1.476-1.705c-.328-.732-.492-1.588-.492-2.566 0-.955.158-1.814.474-2.576.322-.761.791-1.362 1.406-1.801.622-.446 1.383-.668 2.286-.668Zm-.009.765c-.914 0-1.655.305-2.224.914-.562.604-.893 1.477-.993 2.62h5.95c0-.698-.099-1.313-.299-1.846-.199-.533-.501-.946-.905-1.24-.398-.298-.908-.448-1.529-.448Zm10.802-.703a5.468 5.468 0 0 0-.712-.044c-.487 0-.92.088-1.301.264a2.983 2.983 0 0 0-.976.712 3.305 3.305 0 0 0-.615.993h-.053l-.088-1.802h-.764V46h.896v-5.273c0-.551.065-1.05.194-1.495a3.36 3.36 0 0 1 .562-1.142c.246-.317.545-.56.897-.73.357-.17.761-.255 1.212-.255.229 0 .443.015.642.044.199.024.396.062.589.115l.141-.818a4.754 4.754 0 0 0-.624-.123Z" fill="currentColor" />
  </svg>
`;var Z=n(22221);class A{constructor(){this.variant="default",this.treeDepth=0,this.hideActiveStyles=!1,this.mainContentClicked=new u.vpe}}A.ɵfac=function(e){return new(e||A)},A.ɵdir=u.lG2({type:A,inputs:{text:"text",ariaLabel:"ariaLabel",icon:"icon",route:"route",variant:"variant",treeDepth:"treeDepth",hideActiveStyles:"hideActiveStyles"},outputs:{mainContentClicked:"mainContentClicked"}});var b=n(59554),y=n(92786),x=n(21656);const S=function(e){return{"tw-w-0":e}};function T(e,t){if(1&e&&(u.TgZ(0,"div",10),u._uU(1,"\n      "),u._UZ(2,"button",11),u._uU(3,"\n    "),u.qZA()),2&e){const e=u.oxw();u.Q6J("ngClass",u.VKq(2,S,"tree"!==e.variant)),u.xp6(2),u.Q6J("bitIconButton","bwi-angle-down")}}function I(e,t){1&e&&u.GkF(0)}function q(e,t){if(1&e&&(u._uU(0,"\n      "),u._UZ(1,"i"),u.TgZ(2,"span",10),u._uU(3),u.qZA(),u._uU(4,"\n    ")),2&e){const e=u.oxw();u.xp6(1),u.Gre("bwi bwi-fw tw-text-alt2 tw-mx-1 ",e.icon,""),u.xp6(1),u.Q6J("ngClass",e.showActiveStyles?"tw-font-bold":"tw-font-semibold"),u.xp6(1),u.Oqu(e.text)}}function P(e,t){1&e&&u.GkF(0)}function j(e,t){if(1&e){const e=u.EpF();u._uU(0,"\n      "),u._uU(1,"\n      "),u._uU(2,"\n      "),u.TgZ(3,"a",12),u.NdJ("isActiveChange",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.setActive(t))}))("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.mainContentClicked.emit())})),u._uU(4,"\n        "),u.YNc(5,P,1,0,"ng-container",13),u._uU(6,"\n      "),u.qZA(),u._uU(7,"\n    ")}if(2&e){const e=u.oxw(),t=u.MAs(18);u.xp6(3),u.Q6J("routerLink",e.route)("routerLinkActiveOptions",e.rlaOptions)("ariaCurrentWhenActive","page"),u.uIk("aria-label",e.ariaLabel||e.text),u.xp6(2),u.Q6J("ngTemplateOutlet",t)}}function k(e,t){1&e&&u.GkF(0)}function C(e,t){if(1&e){const e=u.EpF();u._uU(0,"\n      "),u._uU(1,"\n      "),u.TgZ(2,"button",14),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.mainContentClicked.emit())})),u._uU(3,"\n        "),u.YNc(4,k,1,0,"ng-container",13),u._uU(5,"\n      "),u.qZA(),u._uU(6,"\n    ")}if(2&e){u.oxw();const e=u.MAs(18);u.xp6(4),u.Q6J("ngTemplateOutlet",e)}}const L=[[["","slot-start",""]],[["","slot-end",""]]],O=function(e,t){return[e,t]},J=function(e){return{"padding-left":e}},N=function(e){return[e]};class D extends A{constructor(){super(...arguments),this._active=!1,this.rlaOptions={paths:"subset",queryParams:"exact",fragment:"ignored",matrixParams:"ignored"},this.focusVisibleWithin$=new b.X(!1),this.fvwStyles$=this.focusVisibleWithin$.pipe((0,y.U)((e=>e?"tw-z-10 tw-rounded tw-outline-none tw-ring tw-ring-text-alt2":"")))}setActive(e){this._active=e}get showActiveStyles(){return this._active&&!this.hideActiveStyles}set exactMatch(e){this.rlaOptions.paths=e?"exact":"subset"}onFocusIn(e){this.focusVisibleWithin$.next(e.matches(".fvw:focus-visible"))}onFocusOut(){this.focusVisibleWithin$.next(!1)}}D.ɵfac=function(){let e;return function(t){return(e||(e=u.n5z(D)))(t||D)}}(),D.ɵcmp=u.Xpm({type:D,selectors:[["bit-nav-item"]],hostBindings:function(e,t){1&e&&u.NdJ("focusin",(function(e){return t.onFocusIn(e.target)}))("focusout",(function(){return t.onFocusOut()}))},inputs:{exactMatch:"exactMatch"},features:[u.qOj],ngContentSelectors:["[slot-start]","[slot-end]"],decls:35,vars:16,consts:[[1,"tw-relative",3,"ngClass"],[1,"tw-relative","tw-flex","tw-items-center","tw-pr-4",3,"ngStyle","ngClass"],[1,"[&>*:focus-visible::before]:!tw-ring-text-alt2","[&>*]:!tw-text-alt2","[&>*:hover]:!tw-border-text-alt2"],["slotStart",""],[3,"ngClass",4,"ngIf"],[4,"ngIf","ngIfThen","ngIfElse"],["anchorAndButtonContent",""],["isAnchor",""],["isButton",""],[1,"tw-flex","tw-gap-1","[&>*:focus-visible::before]:!tw-ring-text-alt2","[&>*]:!tw-text-alt2","[&>*:hover]:!tw-border-text-alt2"],[3,"ngClass"],["type","button","size","small","aria-hidden","true",1,"tw-invisible",3,"bitIconButton"],["routerLinkActive","",1,"fvw","tw-w-full","tw-overflow-hidden","tw-text-ellipsis","tw-whitespace-nowrap","tw-border-none","tw-bg-transparent","tw-p-0","tw-text-start","!tw-text-alt2","hover:tw-text-alt2","hover:tw-no-underline","focus:tw-outline-none","[&>:not(.bwi)]:hover:tw-underline",3,"routerLink","routerLinkActiveOptions","ariaCurrentWhenActive","isActiveChange","click"],[4,"ngTemplateOutlet"],["type","button",1,"fvw","tw-w-full","tw-overflow-hidden","tw-text-ellipsis","tw-whitespace-nowrap","tw-border-none","tw-bg-transparent","tw-p-0","tw-text-start","!tw-text-alt2","hover:tw-text-alt2","hover:tw-no-underline","focus:tw-outline-none","[&>:not(.bwi)]:hover:tw-underline",3,"click"]],template:function(e,t){if(1&e&&(u.F$t(L),u.TgZ(0,"div",0),u.ALo(1,"async"),u._uU(2,"\n  "),u.TgZ(3,"div",1),u._uU(4,"\n    "),u.TgZ(5,"div",2,3),u._uU(7,"\n      "),u.Hsn(8),u._uU(9,"\n    "),u.qZA(),u._uU(10,"\n    "),u._uU(11,"\n    "),u.YNc(12,T,4,4,"div",4),u._uU(13,"\n\n    "),u.YNc(14,I,1,0,"ng-container",5),u._uU(15,"\n\n    "),u._uU(16,"\n    "),u.YNc(17,q,5,5,"ng-template",null,6,u.W1O),u._uU(19,"\n\n    "),u._uU(20,"\n    "),u.YNc(21,j,8,5,"ng-template",null,7,u.W1O),u._uU(23,"\n\n    "),u._uU(24,"\n    "),u.YNc(25,C,7,1,"ng-template",null,8,u.W1O),u._uU(27,"\n\n    "),u.TgZ(28,"div",9),u._uU(29,"\n      "),u.Hsn(30,1),u._uU(31,"\n    "),u.qZA(),u._uU(32,"\n  "),u.qZA(),u._uU(33,"\n"),u.qZA(),u._uU(34,"\n")),2&e){const e=u.MAs(6),n=u.MAs(22),i=u.MAs(26);u.Q6J("ngClass",u.WLB(9,O,t.showActiveStyles?"tw-bg-background-alt4":"tw-bg-background-alt3",u.lcZ(1,7,t.fvwStyles$))),u.xp6(3),u.Q6J("ngStyle",u.VKq(12,J,("tree"===t.variant?2.5:1)+1.5*t.treeDepth+"rem"))("ngClass",u.VKq(14,N,"tree"===t.variant?"tw-py-1":"tw-py-2")),u.xp6(9),u.Q6J("ngIf",0===e.childElementCount),u.xp6(2),u.Q6J("ngIf",t.route)("ngIfThen",n)("ngIfElse",i)}},dependencies:[s.mk,s.O5,s.tP,s.PC,x.Q,c.yS,c.Od,s.Ov],encapsulation:2});var z=n(49399);const Y=function(e,t){return[e,t]};function E(e,t){if(1&e){const e=u.EpF();u._uU(0,"\n    "),u.TgZ(1,"button",5),u.NdJ("click",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.toggle(t))})),u.ALo(2,"i18n"),u.ALo(3,"i18n"),u.qZA(),u._uU(4,"\n  ")}if(2&e){const e=u.oxw();u.xp6(1),u.Q6J("bitIconButton",e.open?"bwi-angle-up":"tree"===e.variant?"bwi-angle-right":"bwi-angle-down")("buttonType","main")("title",u.lcZ(2,6,"toggleCollapse")),u.uIk("aria-expanded",e.open.toString())("aria-controls",e.contentId)("aria-label",u.WLB(10,Y,u.lcZ(3,8,"toggleCollapse"),e.text).join(" "))}}function Q(e,t){1&e&&u.GkF(0)}function M(e,t){if(1&e&&(u.ynx(0,6),u._uU(1,"\n    "),u.YNc(2,Q,1,0,"ng-container",7),u._uU(3,"\n  "),u.BQk()),2&e){u.oxw();const e=u.MAs(4);u.xp6(2),u.Q6J("ngTemplateOutlet",e)}}function G(e,t){1&e&&u.GkF(0)}function R(e,t){if(1&e&&(u.ynx(0,8),u._uU(1,"\n    "),u.YNc(2,G,1,0,"ng-container",7),u._uU(3,"\n  "),u.BQk()),2&e){u.oxw();const e=u.MAs(4);u.xp6(2),u.Q6J("ngTemplateOutlet",e)}}function F(e,t){if(1&e&&(u.TgZ(0,"div",9),u.ALo(1,"i18n"),u._uU(2,"\n  "),u.Hsn(3),u._uU(4,"\n"),u.qZA()),2&e){const e=u.oxw();u.uIk("id",e.contentId)("aria-label",u.WLB(4,Y,e.text,u.lcZ(1,2,"submenu")).join(" "))}}class B extends A{constructor(){super(...arguments),this.contentId=Math.random().toString(36).substring(2),this.open=!1,this.openChange=new u.vpe}toggle(e){null==e||e.stopPropagation(),this.open=!this.open,this.openChange.emit(this.open)}initNestedStyles(){"tree"===this.variant&&[...this.nestedGroups,...this.nestedItems].forEach((e=>{e.treeDepth+=1}))}ngAfterContentInit(){this.initNestedStyles()}}B.ɵfac=function(){let e;return function(t){return(e||(e=u.n5z(B)))(t||B)}}(),B.ɵcmp=u.Xpm({type:B,selectors:[["bit-nav-group"]],contentQueries:function(e,t,n){if(1&e&&(u.Suo(n,B,5),u.Suo(n,D,5)),2&e){let e;u.iGM(e=u.CRH())&&(t.nestedGroups=e),u.iGM(e=u.CRH())&&(t.nestedItems=e)}},inputs:{open:"open",exactMatch:"exactMatch"},outputs:{openChange:"openChange"},features:[u.qOj],ngContentSelectors:["*"],decls:15,vars:10,consts:[[3,"text","icon","route","variant","treeDepth","ariaLabel","exactMatch","mainContentClicked"],["button",""],["slot-start","",4,"ngIf"],["slot-end","",4,"ngIf"],["role","group",4,"ngIf"],["type","button","size","small","aria-haspopup","true",1,"tw-ml-auto",3,"bitIconButton","buttonType","title","click"],["slot-start",""],[4,"ngTemplateOutlet"],["slot-end",""],["role","group"]],template:function(e,t){1&e&&(u.F$t(),u._uU(0,"\n"),u.TgZ(1,"bit-nav-item",0),u.NdJ("mainContentClicked",(function(){return t.toggle()}))("mainContentClicked",(function(){return t.mainContentClicked.emit()})),u._uU(2,"\n  "),u.YNc(3,E,5,13,"ng-template",null,1,u.W1O),u._uU(5,"\n\n  "),u._uU(6,"\n  "),u.YNc(7,M,4,1,"ng-container",2),u._uU(8,"\n  "),u.YNc(9,R,4,1,"ng-container",3),u._uU(10,"\n"),u.qZA(),u._uU(11,"\n\n"),u._uU(12,"\n"),u.YNc(13,F,5,7,"div",4),u._uU(14,"\n")),2&e&&(u.xp6(1),u.Q6J("text",t.text)("icon",t.icon)("route",t.route)("variant",t.variant)("treeDepth",t.treeDepth)("ariaLabel",t.ariaLabel)("exactMatch",t.exactMatch),u.xp6(6),u.Q6J("ngIf","tree"===t.variant),u.xp6(2),u.Q6J("ngIf","tree"!==t.variant),u.xp6(4),u.Q6J("ngIf",t.open))},dependencies:[s.O5,s.tP,x.Q,D,z.C],encapsulation:2});var $=n(33031),V=n(66206);class K{}K.ɵfac=function(e){return new(e||K)},K.ɵcmp=u.Xpm({type:K,selectors:[["bit-nav-divider"]],decls:2,vars:0,consts:[[1,"tw-h-px","tw-w-full","tw-bg-secondary-300"]],template:function(e,t){1&e&&(u._UZ(0,"div",0),u._uU(1,"\n"))},encapsulation:2});var H=n(17404);const X=function(e,t){return[e,t]},W=function(e){return["../",e]};function ee(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-nav-item",5),u.NdJ("mainContentClicked",(function(){u.CHM(e);const t=u.oxw(3);return u.KtG(t.toggle())})),u.ALo(1,"i18n"),u._uU(2,"\n    "),u.qZA()}if(2&e){const e=t.$implicit;u.Q6J("text",e.name)("ariaLabel",u.WLB(6,X,u.lcZ(1,4,"organization"),e.name).join(" "))("route",u.VKq(9,W,e.id))("hideActiveStyles",!0)}}function te(e,t){if(1&e&&(u.ynx(0),u._uU(1,"\n    "),u.YNc(2,ee,3,11,"bit-nav-item",4),u._uU(3,"\n  "),u.BQk()),2&e){const e=t.ngIf;u.xp6(2),u.Q6J("ngForOf",e)}}function ne(e,t){1&e&&(u._UZ(0,"bit-nav-item",6),u.ALo(1,"i18n")),2&e&&u.Q6J("text",u.lcZ(1,1,"newOrganization"))}function ie(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-nav-group",1),u.NdJ("openChange",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.open=t)})),u.ALo(1,"i18n"),u._uU(2,"\n  "),u.YNc(3,te,4,1,"ng-container",2),u.ALo(4,"async"),u._uU(5,"\n  "),u.YNc(6,ne,2,3,"bit-nav-item",3),u._uU(7,"\n  "),u._UZ(8,"bit-nav-divider"),u._uU(9,"\n"),u.qZA()}if(2&e){const e=t.ngIf,n=u.oxw();u.Q6J("text",e.name)("ariaLabel",u.WLB(11,X,u.lcZ(1,7,"organization"),e.name).join(" "))("route",u.VKq(14,W,e.id))("open",n.open)("exactMatch",!0),u.xp6(3),u.Q6J("ngIf",u.lcZ(4,9,n.organizations$)),u.xp6(3),u.Q6J("ngIf",!n.hideNewButton)}}class oe{constructor(e,t){this.route=e,this.organizationService=t,this.organizations$=this.organizationService.organizations$.pipe((0,y.U)((e=>e.filter(this.filter).sort(((e,t)=>e.name.localeCompare(t.name)))))),this.activeOrganization$=(0,$.a)([this.route.paramMap,this.organizations$]).pipe((0,y.U)((([e,t])=>t.find((t=>t.id===e.get("organizationId")))))),this.filter=()=>!0,this.open=!1,this.openChange=new u.vpe,this.hideNewButton=!1}toggle(e){null==e||e.stopPropagation(),this.open=!this.open,this.openChange.emit(this.open)}}oe.ɵfac=function(e){return new(e||oe)(u.Y36(c.gz),u.Y36(V.Mn))},oe.ɵcmp=u.Xpm({type:oe,selectors:[["org-switcher"]],inputs:{filter:"filter",open:"open",hideNewButton:"hideNewButton"},outputs:{openChange:"openChange"},decls:3,vars:3,consts:[["icon","bwi-business",3,"text","ariaLabel","route","open","exactMatch","openChange",4,"ngIf"],["icon","bwi-business",3,"text","ariaLabel","route","open","exactMatch","openChange"],[4,"ngIf"],["icon","bwi-plus","route","/create-organization",3,"text",4,"ngIf"],[3,"text","ariaLabel","route","hideActiveStyles","mainContentClicked",4,"ngFor","ngForOf"],[3,"text","ariaLabel","route","hideActiveStyles","mainContentClicked"],["icon","bwi-plus","route","/create-organization",3,"text"]],template:function(e,t){1&e&&(u.YNc(0,ie,10,16,"bit-nav-group",0),u.ALo(1,"async"),u._uU(2,"\n")),2&e&&u.Q6J("ngIf",u.lcZ(1,1,t.activeOrganization$))},dependencies:[s.sg,s.O5,K,B,D,s.Ov,H.C],encapsulation:2});const se=function(){return["secrets"]};class ce{constructor(){this.logo=_,this.orgFilter=e=>e.canAccessSecretsManager}}ce.ɵfac=function(e){return new(e||ce)},ce.ɵcmp=u.Xpm({type:ce,selectors:[["sm-navigation"]],decls:29,vars:26,consts:[[1,"tw-mx-4","tw-mt-8","tw-mb-3","tw-block",3,"routerLink"],[1,"tw-w-full","tw-text-alt2",3,"icon"],[3,"filter","hideNewButton"],["icon","bwi-collection","route","projects",3,"text"],["icon","bwi-key","route","secrets",3,"text"],["icon","bwi-wrench","route","service-accounts",3,"text"],["icon","bwi-trash","route","trash",3,"text"],["icon","bwi-cog",3,"text"],["route","settings/import",3,"text"],["route","settings/export",3,"text"]],template:function(e,t){1&e&&(u.TgZ(0,"a",0),u._uU(1,"\n  "),u._UZ(2,"bit-icon",1),u._uU(3,"\n"),u.qZA(),u._uU(4,"\n\n"),u._UZ(5,"org-switcher",2),u._uU(6,"\n"),u._UZ(7,"bit-nav-item",3),u.ALo(8,"i18n"),u._uU(9,"\n"),u._UZ(10,"bit-nav-item",4),u.ALo(11,"i18n"),u._uU(12,"\n"),u._UZ(13,"bit-nav-item",5),u.ALo(14,"i18n"),u._uU(15,"\n"),u._UZ(16,"bit-nav-item",6),u.ALo(17,"i18n"),u._uU(18,"\n"),u.TgZ(19,"bit-nav-group",7),u.ALo(20,"i18n"),u._uU(21,"\n  "),u._UZ(22,"bit-nav-item",8),u.ALo(23,"i18n"),u._uU(24,"\n  "),u._UZ(25,"bit-nav-item",9),u.ALo(26,"i18n"),u._uU(27,"\n"),u.qZA(),u._uU(28,"\n")),2&e&&(u.Q6J("routerLink",u.DdM(25,se)),u.xp6(2),u.Q6J("icon",t.logo),u.xp6(3),u.Q6J("filter",t.orgFilter)("hideNewButton",!0),u.xp6(2),u.Q6J("text",u.lcZ(8,11,"projects")),u.xp6(3),u.Q6J("text",u.lcZ(11,13,"secrets")),u.xp6(3),u.Q6J("text",u.lcZ(14,15,"serviceAccounts")),u.xp6(3),u.Q6J("text",u.lcZ(17,17,"trash")),u.xp6(3),u.Q6J("text",u.lcZ(20,19,"settings")),u.xp6(3),u.Q6J("text",u.lcZ(23,21,"importData")),u.xp6(3),u.Q6J("text",u.lcZ(26,23,"exportData")))},dependencies:[c.yS,Z.G,B,D,oe,H.C],encapsulation:2});class re{}re.ɵfac=function(e){return new(e||re)},re.ɵmod=u.oAB({type:re}),re.ɵinj=u.cJS({imports:[s.ez]});class ae{}ae.ɵfac=function(e){return new(e||ae)},ae.ɵmod=u.oAB({type:ae}),ae.ɵinj=u.cJS({imports:[i.m,re]});var ue=n(54019),le=n(49956),de=n(87255),pe=n(17529);var he=n(68362),ge=n(53634),ve=n(30359),fe=n(65017),me=n(98645),we=n(81974),Ue=n(29465),_e=n(18362),Ze=n(54735),Ae=n(50941),be=n(26361);function ye(e,t){if(1&e&&(u.TgZ(0,"tr",10),u._uU(1,"\n          "),u.TgZ(2,"td",5),u._uU(3),u.qZA(),u._uU(4,"\n          "),u.TgZ(5,"td",5),u._uU(6),u.qZA(),u._uU(7,"\n        "),u.qZA()),2&e){const e=t.$implicit;u.xp6(3),u.Oqu(e.name),u.xp6(3),u.Oqu(e.errorMessage)}}function xe(e,t){if(1&e&&(u._uU(0,"\n        "),u.YNc(1,ye,8,2,"tr",9),u._uU(2,"\n      ")),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngForOf",e.data.details)}}class Se{}class Te{constructor(e,t){this.dialogRef=e,this.data=t}ngOnInit(){var e;if(!(this.data.title&&this.data.subTitle&&this.data.columnTitle&&this.data.message&&(null===(e=this.data.details)||void 0===e?void 0:e.length)>=1))throw this.dialogRef.close(),new Error("The bulk status dialog was not called with the appropriate operation values.")}}Te.ɵfac=function(e){return new(e||Te)(u.Y36(fe.zj),u.Y36(fe.Kt))},Te.ɵcmp=u.Xpm({type:Te,selectors:[["sm-bulk-status-dialog"]],decls:44,vars:19,consts:[["dialogSize","default"],["bitDialogTitle",""],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],["bitDialogContent",""],["header",""],["bitCell",""],["body",""],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["bitButton","","buttonType","primary","bitDialogClose","","type","button"],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""]],template:function(e,t){1&e&&(u.TgZ(0,"bit-dialog",0),u._uU(1,"\n  "),u.ynx(2,1),u._uU(3,"\n    "),u.TgZ(4,"span"),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n    "),u.TgZ(8,"span",2),u._uU(9),u.ALo(10,"i18n"),u.qZA(),u._uU(11,"\n  "),u.BQk(),u._uU(12,"\n\n  "),u.TgZ(13,"div",3),u._uU(14),u.ALo(15,"i18n"),u.TgZ(16,"bit-table"),u._uU(17,"\n      "),u.ynx(18,4),u._uU(19,"\n        "),u.TgZ(20,"tr"),u._uU(21,"\n          "),u.TgZ(22,"th",5),u._uU(23),u.ALo(24,"i18n"),u.qZA(),u._uU(25,"\n          "),u.TgZ(26,"th",5),u._uU(27),u.ALo(28,"i18n"),u.qZA(),u._uU(29,"\n        "),u.qZA(),u._uU(30,"\n      "),u.BQk(),u._uU(31,"\n      "),u.YNc(32,xe,3,1,"ng-template",6),u._uU(33,"\n    "),u.qZA(),u._uU(34,"\n  "),u.qZA(),u._uU(35,"\n\n  "),u.TgZ(36,"div",7),u._uU(37,"\n    "),u.TgZ(38,"button",8),u._uU(39),u.ALo(40,"i18n"),u.qZA(),u._uU(41,"\n  "),u.qZA(),u._uU(42,"\n"),u.qZA(),u._uU(43,"\n")),2&e&&(u.xp6(5),u.Oqu(u.lcZ(6,7,t.data.title)),u.xp6(4),u.AsE("\n      ",t.data.details.length,"\n      ",u.lcZ(10,9,t.data.subTitle),"\n    "),u.xp6(5),u.hij("\n    ",u.lcZ(15,11,t.data.message),"\n    "),u.xp6(9),u.Oqu(u.lcZ(24,13,t.data.columnTitle)),u.xp6(4),u.Oqu(u.lcZ(28,15,"error")),u.xp6(12),u.hij("\n      ",u.lcZ(40,17,"close"),"\n    "))},dependencies:[s.sg,we.r,Ue.a,_e.f,Ze.a,Ae.Y,be.v,Ze.f,H.C],encapsulation:2});var Ie=n(88982),qe=n(42844);class Pe{}class je{}class ke{}var Ce=n(58043);class Le extends Ce.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.name=this.getResponseProperty("Name"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate")}}class Oe extends Ce.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.name=this.getResponseProperty("Name"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate")}}var Je=n(92785),Ne=n(55602),De=n(26479),ze=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class Ye{constructor(e,t,n){this.cryptoService=e,this.apiService=t,this.encryptService=n,this._project=new ue.x,this.project$=this._project.asObservable()}getByProjectId(e){return ze(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/projects/"+e,null,!0,!0),n=new Oe(t);return yield this.createProjectView(n)}))}getProjects(e){return ze(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/organizations/"+e+"/projects",null,!0,!0),n=new qe.L(t,Le);return yield this.createProjectsListView(e,n.data)}))}create(e,t){return ze(this,void 0,void 0,(function*(){const n=yield this.getProjectRequest(e,t),i=yield this.apiService.send("POST","/organizations/"+e+"/projects",n,!0,!0),o=yield this.createProjectView(new Oe(i));return this._project.next(o),o}))}update(e,t){return ze(this,void 0,void 0,(function*(){const n=yield this.getProjectRequest(e,t),i=yield this.apiService.send("PUT","/projects/"+t.id,n,!0,!0);this._project.next(yield this.createProjectView(new Oe(i)))}))}delete(e){return ze(this,void 0,void 0,(function*(){const t=e.map((e=>e.id)),n=yield this.apiService.send("POST","/projects/delete",t,!0,!0);return this._project.next(null),n.data.map((t=>{const n=new Se;return n.id=t.id,n.name=e.find((e=>e.id==t.id)).name,n.errorMessage=t.error,n}))}))}getOrganizationKey(e){return ze(this,void 0,void 0,(function*(){return yield this.cryptoService.getOrgKey(e)}))}getProjectRequest(e,t){return ze(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(e),i=new ke;return i.name=yield this.encryptService.encrypt(t.name,n),i}))}createProjectView(e){return ze(this,void 0,void 0,(function*(){const t=yield this.getOrganizationKey(e.organizationId),n=new je;return n.id=e.id,n.organizationId=e.organizationId,n.creationDate=e.creationDate,n.revisionDate=e.revisionDate,n.name=yield this.encryptService.decryptToUtf8(new Ie._(e.name),t),n}))}createProjectsListView(e,t){return ze(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(e);return yield Promise.all(t.map((e=>ze(this,void 0,void 0,(function*(){const t=new Pe;return t.id=e.id,t.organizationId=e.organizationId,t.name=yield this.encryptService.decryptToUtf8(new Ie._(e.name),n),t.creationDate=e.creationDate,t.revisionDate=e.revisionDate,t})))))}))}}Ye.ɵfac=function(e){return new(e||Ye)(u.LFG(Je.$),u.LFG(Ne.s),u.LFG(De.U))},Ye.ɵprov=u.Yz7({token:Ye,factory:Ye.ɵfac,providedIn:"root"});var Ee=n(31131),Qe=n(32100),Me=n(63610),Ge=n(46246),Re=n(36338),Fe=n(24083),Be=n(24637),$e=n(11512),Ve=n(36179),Ke=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};function He(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.BQk()),2&e){const e=u.oxw();u.xp6(1),u.hij("\n          ",e.data.projects[0].name,"\n        ")}}function Xe(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.ALo(2,"i18n"),u.BQk()),2&e){const e=u.oxw();u.xp6(1),u.AsE("\n          ",e.data.projects.length,"\n          ",u.lcZ(2,2,"projects"),"\n        ")}}class We{constructor(e,t,n,i,o,s){this.dialogRef=e,this.data=t,this.projectService=n,this.i18nService=i,this.platformUtilsService=o,this.dialogService=s,this.formGroup=new me.cw({confirmDelete:new me.NI("",[this.matchConfirmationMessageValidator()])}),this.submit=()=>Ke(this,void 0,void 0,(function*(){this.formGroup.markAllAsTouched(),this.formGroup.invalid||(yield this.delete(),this.dialogRef.close())}))}ngOnInit(){var e;if(!((null===(e=this.data.projects)||void 0===e?void 0:e.length)>=1))throw this.dialogRef.close(),new Error("The project delete dialog was not called with the appropriate operation values.")}get title(){return 1===this.data.projects.length?"deleteProject":"deleteProjects"}get dialogContent(){return 1===this.data.projects.length?this.i18nService.t("deleteProjectDialogMessage",this.data.projects[0].name):this.i18nService.t("deleteProjectsDialogMessage")}get dialogConfirmationLabel(){return this.i18nService.t("deleteProjectInputLabel",this.dialogConfirmationMessage)}delete(){return Ke(this,void 0,void 0,(function*(){const e=yield this.projectService.delete(this.data.projects);if(e.find((e=>e.errorMessage)))return void this.openBulkStatusDialog(e.filter((e=>e.errorMessage)));const t=1===this.data.projects.length?"deleteProjectToast":"deleteProjectsToast";this.platformUtilsService.showToast("success",null,this.i18nService.t(t))}))}openBulkStatusDialog(e){this.dialogService.open(Te,{data:{title:"deleteProjects",subTitle:"projects",columnTitle:"projectName",message:"bulkDeleteProjectsErrorMessage",details:e}})}get dialogConfirmationMessage(){var e,t;return 1===(null===(e=this.data.projects)||void 0===e?void 0:e.length)?this.i18nService.t("deleteProjectConfirmMessage",this.data.projects[0].name):this.i18nService.t("deleteProjectsConfirmMessage",null===(t=this.data.projects)||void 0===t?void 0:t.length.toString())}matchConfirmationMessageValidator(){return e=>this.dialogConfirmationMessage.toLowerCase()==e.value.toLowerCase()?null:{confirmationDoesntMatchError:{message:this.i18nService.t("smConfirmationRequired")}}}}We.ɵfac=function(e){return new(e||We)(u.Y36(fe.zj),u.Y36(fe.Kt),u.Y36(Ye),u.Y36(Ee.D),u.Y36(Qe.P),u.Y36(Me.x))},We.ɵcmp=u.Xpm({type:We,selectors:[["sm-project-delete-dialog"]],decls:46,vars:18,consts:[[3,"formGroup","bitSubmit"],["dialogSize","small"],["bitDialogTitle",""],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],[4,"ngIf"],["bitDialogContent",""],["type","warning",3,"title"],["bitInput","","formControlName","confirmDelete"],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","submit","bitButton","","buttonType","danger","bitFormButton",""],["type","button","bitButton","","buttonType","secondary","bitFormButton","","bitDialogClose",""]],template:function(e,t){1&e&&(u.TgZ(0,"form",0),u._uU(1,"\n  "),u.TgZ(2,"bit-dialog",1),u._uU(3,"\n    "),u.ynx(4,2),u._uU(5,"\n      "),u.TgZ(6,"span"),u._uU(7),u.ALo(8,"i18n"),u.qZA(),u._uU(9,"\n      "),u.TgZ(10,"span",3),u._uU(11,"\n        "),u.YNc(12,He,2,1,"ng-container",4),u._uU(13,"\n        "),u.YNc(14,Xe,3,4,"ng-container",4),u._uU(15,"\n      "),u.qZA(),u._uU(16,"\n    "),u.BQk(),u._uU(17,"\n\n    "),u.TgZ(18,"div",5),u._uU(19,"\n      "),u.TgZ(20,"bit-callout",6),u.ALo(21,"i18n"),u._uU(22),u.qZA(),u._uU(23,"\n      "),u.TgZ(24,"bit-form-field"),u._uU(25,"\n        "),u.TgZ(26,"bit-label"),u._uU(27),u.qZA(),u._uU(28,"\n        "),u._UZ(29,"input",7),u._uU(30,"\n      "),u.qZA(),u._uU(31,"\n    "),u.qZA(),u._uU(32,"\n\n    "),u.TgZ(33,"div",8),u._uU(34,"\n      "),u.TgZ(35,"button",9),u._uU(36),u.ALo(37,"i18n"),u.qZA(),u._uU(38,"\n      "),u.TgZ(39,"button",10),u._uU(40),u.ALo(41,"i18n"),u.qZA(),u._uU(42,"\n    "),u.qZA(),u._uU(43,"\n  "),u.qZA(),u._uU(44,"\n"),u.qZA(),u._uU(45,"\n")),2&e&&(u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(7),u.Oqu(u.lcZ(8,10,t.title)),u.xp6(5),u.Q6J("ngIf",1==t.data.projects.length),u.xp6(2),u.Q6J("ngIf",t.data.projects.length>1),u.xp6(6),u.Q6J("title",u.lcZ(21,12,"warning")),u.xp6(2),u.hij("\n        ",t.dialogContent,"\n      "),u.xp6(5),u.Oqu(t.dialogConfirmationLabel),u.xp6(9),u.hij("\n        ",u.lcZ(37,14,t.title),"\n      "),u.xp6(4),u.hij("\n        ",u.lcZ(41,16,"cancel"),"\n      "))},dependencies:[s.O5,me._Y,me.Fj,me.JJ,me.JL,me.sg,me.u,Ge.b,Re.u,we.r,Fe.O,Ue.a,_e.f,Be.d,$e.G,Ve.u,H.C],encapsulation:2});var et,tt=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};function nt(e,t){1&e&&(u.TgZ(0,"div",9),u._uU(1,"\n        "),u._UZ(2,"i",10),u._uU(3,"\n      "),u.qZA())}function it(e,t){1&e&&(u.TgZ(0,"bit-form-field"),u._uU(1,"\n        "),u.TgZ(2,"bit-label"),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n        "),u._UZ(6,"input",11),u._uU(7,"\n      "),u.qZA()),2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,1,"projectName")))}!function(e){e[e.Add=0]="Add",e[e.Edit=1]="Edit"}(et||(et={}));class ot{constructor(e,t,n,i,o,s){this.dialogRef=e,this.data=t,this.projectService=n,this.i18nService=i,this.platformUtilsService=o,this.router=s,this.formGroup=new me.cw({name:new me.NI("",[me.kI.required])}),this.loading=!1,this.submit=()=>tt(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const e=this.getProjectView();if(this.data.operation===et.Add){const t=yield this.createProject(e);this.router.navigate(["sm",this.data.organizationId,"projects",t.id])}else e.id=this.data.projectId,yield this.updateProject(e);this.dialogRef.close()}))}ngOnInit(){return tt(this,void 0,void 0,(function*(){if(this.data.operation===et.Edit&&this.data.projectId)yield this.loadData();else if(this.data.operation!==et.Add)throw this.dialogRef.close(),new Error("The project dialog was not called with the appropriate operation values.")}))}loadData(){return tt(this,void 0,void 0,(function*(){this.loading=!0;const e=yield this.projectService.getByProjectId(this.data.projectId);this.loading=!1,this.formGroup.setValue({name:e.name})}))}get title(){return this.data.operation===et.Add?"newProject":"editProject"}createProject(e){return tt(this,void 0,void 0,(function*(){const t=yield this.projectService.create(this.data.organizationId,e);return this.platformUtilsService.showToast("success",null,this.i18nService.t("projectCreated")),t}))}updateProject(e){return tt(this,void 0,void 0,(function*(){yield this.projectService.update(this.data.organizationId,e),this.platformUtilsService.showToast("success",null,this.i18nService.t("projectSaved"))}))}getProjectView(){const e=new je;return e.organizationId=this.data.organizationId,e.name=this.formGroup.value.name,e}}ot.ɵfac=function(e){return new(e||ot)(u.Y36(fe.zj),u.Y36(fe.Kt),u.Y36(Ye),u.Y36(Ee.D),u.Y36(Qe.P),u.Y36(c.F0))},ot.ɵcmp=u.Xpm({type:ot,selectors:[["sm-project-dialog"]],decls:28,vars:13,consts:[[3,"formGroup","bitSubmit"],["dialogSize","small"],["bitDialogTitle",""],["bitDialogContent",""],["class","tw-text-center",4,"ngIf"],[4,"ngIf"],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","submit","bitButton","","buttonType","primary","bitFormButton",""],["type","button","bitButton","","buttonType","secondary","bitFormButton","","bitDialogClose",""],[1,"tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"],["formControlName","name","maxlength","1000","bitInput",""]],template:function(e,t){1&e&&(u.TgZ(0,"form",0),u._uU(1,"\n  "),u.TgZ(2,"bit-dialog",1),u._uU(3,"\n    "),u.TgZ(4,"span",2),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n    "),u.TgZ(8,"span",3),u._uU(9,"\n      "),u.YNc(10,nt,4,0,"div",4),u._uU(11,"\n      "),u.YNc(12,it,8,3,"bit-form-field",5),u._uU(13,"\n    "),u.qZA(),u._uU(14,"\n    "),u.TgZ(15,"div",6),u._uU(16,"\n      "),u.TgZ(17,"button",7),u._uU(18),u.ALo(19,"i18n"),u.qZA(),u._uU(20,"\n      "),u.TgZ(21,"button",8),u._uU(22),u.ALo(23,"i18n"),u.qZA(),u._uU(24,"\n    "),u.qZA(),u._uU(25,"\n  "),u.qZA(),u._uU(26,"\n"),u.qZA(),u._uU(27,"\n")),2&e&&(u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(5),u.Oqu(u.lcZ(6,7,t.title)),u.xp6(5),u.Q6J("ngIf",t.loading),u.xp6(2),u.Q6J("ngIf",!t.loading),u.xp6(6),u.hij("\n        ",u.lcZ(19,9,"save"),"\n      "),u.xp6(4),u.hij("\n        ",u.lcZ(23,11,"cancel"),"\n      "))},dependencies:[s.O5,me._Y,me.Fj,me.JJ,me.JL,me.nD,me.sg,me.u,Ge.b,Re.u,we.r,Ue.a,_e.f,Be.d,$e.G,Ve.u,H.C],encapsulation:2});class st{}class ct{}class rt{}class at{}class ut extends Ce.c{constructor(e){super(e),this.name=this.getResponseProperty("Name"),this.id=this.getResponseProperty("Id")}}class lt extends Ce.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.name=this.getResponseProperty("Key"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate");const t=this.getResponseProperty("projects");this.projects=null==t?null:t.map((e=>new ut(e)))}}class dt extends Ce.c{constructor(e){super(e);const t=this.getResponseProperty("secrets"),n=this.getResponseProperty("projects");this.projects=null==n?null:n.map((e=>new ut(e))),this.secrets=null==t?[]:t.map((e=>new lt(e)))}}class pt extends Ce.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.name=this.getResponseProperty("Key"),this.value=this.getResponseProperty("Value"),this.note=this.getResponseProperty("Note"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate");const t=this.getResponseProperty("Projects");this.projects=null==t?null:t.map((e=>new ut(e)))}}var ht=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class gt{constructor(e,t,n){this.cryptoService=e,this.apiService=t,this.encryptService=n,this._secret=new ue.x,this.secret$=this._secret.asObservable()}getBySecretId(e){return ht(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/secrets/"+e,null,!0,!0),n=new pt(t);return yield this.createSecretView(n)}))}getSecrets(e){return ht(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/organizations/"+e+"/secrets",null,!0,!0),n=new dt(t);return yield this.createSecretsListView(e,n)}))}getSecretsByProject(e,t){return ht(this,void 0,void 0,(function*(){const n=yield this.apiService.send("GET","/projects/"+t+"/secrets",null,!0,!0),i=new dt(n);return yield this.createSecretsListView(e,i)}))}create(e,t){return ht(this,void 0,void 0,(function*(){const n=yield this.getSecretRequest(e,t),i=yield this.apiService.send("POST","/organizations/"+e+"/secrets",n,!0,!0);this._secret.next(yield this.createSecretView(new pt(i)))}))}update(e,t){return ht(this,void 0,void 0,(function*(){const n=yield this.getSecretRequest(e,t),i=yield this.apiService.send("PUT","/secrets/"+t.id,n,!0,!0);this._secret.next(yield this.createSecretView(new pt(i)))}))}delete(e){return ht(this,void 0,void 0,(function*(){const t=yield this.apiService.send("POST","/secrets/delete",e,!0,!0),n=[];if(t.data.forEach((e=>{e.error&&n.push(e.error)})),(null==n?void 0:n.length)>=1)throw new Error(n.join(","));this._secret.next(null)}))}getTrashedSecrets(e){return ht(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/secrets/"+e+"/trash",null,!0,!0);return yield this.createSecretsListView(e,new dt(t))}))}deleteTrashed(e,t){return ht(this,void 0,void 0,(function*(){yield this.apiService.send("POST","/secrets/"+e+"/trash/empty",t,!0,!0),this._secret.next(null)}))}restoreTrashed(e,t){return ht(this,void 0,void 0,(function*(){yield this.apiService.send("POST","/secrets/"+e+"/trash/restore",t,!0,!0),this._secret.next(null)}))}getOrganizationKey(e){return ht(this,void 0,void 0,(function*(){return yield this.cryptoService.getOrgKey(e)}))}getSecretRequest(e,t){var n;return ht(this,void 0,void 0,(function*(){const i=yield this.getOrganizationKey(e),o=new at,[s,c,r]=yield Promise.all([this.encryptService.encrypt(t.name,i),this.encryptService.encrypt(t.value,i),this.encryptService.encrypt(t.note,i)]);return o.key=s.encryptedString,o.value=c.encryptedString,o.note=r.encryptedString,o.projectIds=[],null===(n=t.projects)||void 0===n||n.forEach((e=>o.projectIds.push(e.id))),o}))}createSecretView(e){return ht(this,void 0,void 0,(function*(){const t=yield this.getOrganizationKey(e.organizationId),n=new rt;n.id=e.id,n.organizationId=e.organizationId,n.creationDate=e.creationDate,n.revisionDate=e.revisionDate;const[i,o,s]=yield Promise.all([this.encryptService.decryptToUtf8(new Ie._(e.name),t),this.encryptService.decryptToUtf8(new Ie._(e.value),t),this.encryptService.decryptToUtf8(new Ie._(e.note),t)]);return n.name=i,n.value=o,n.note=s,null!=e.projects&&(n.projects=yield this.decryptProjectsMappedToSecrets(t,e.projects)),n}))}createSecretsListView(e,t){return ht(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(e),i=yield this.decryptProjectsMappedToSecrets(n,t.projects);return yield Promise.all(t.secrets.map((e=>ht(this,void 0,void 0,(function*(){var t;const o=new st;o.id=e.id,o.organizationId=e.organizationId,o.name=yield this.encryptService.decryptToUtf8(new Ie._(e.name),n),o.creationDate=e.creationDate,o.revisionDate=e.revisionDate;const s=null===(t=e.projects)||void 0===t?void 0:t.map((e=>e.id));return o.projects=i.filter((e=>s.includes(e.id))),o})))))}))}decryptProjectsMappedToSecrets(e,t){return ht(this,void 0,void 0,(function*(){return yield Promise.all(t.map((t=>ht(this,void 0,void 0,(function*(){const n=new ct;return n.id=t.id,n.name=yield this.encryptService.decryptToUtf8(new Ie._(t.name),e),n})))))}))}}gt.ɵfac=function(e){return new(e||gt)(u.LFG(Je.$),u.LFG(Ne.s),u.LFG(De.U))},gt.ɵprov=u.Yz7({token:gt,factory:gt.ɵfac,providedIn:"root"});var vt=n(98205),ft=n(70094),mt=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};function wt(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"i18n"),u.qZA()),2&e&&(u.xp6(1),u.hij("\n      ",u.lcZ(2,1,"softDeleteSecretWarning"),"\n    "))}class Ut{constructor(e,t,n,i,o){this.dialogRef=e,this.secretService=t,this.i18nService=n,this.platformUtilsService=i,this.data=o,this.delete=()=>mt(this,void 0,void 0,(function*(){yield this.secretService.delete(this.data.secretIds);const e=1===this.data.secretIds.length?"softDeleteSuccessToast":"softDeletesSuccessToast";this.dialogRef.close(this.data.secretIds),this.platformUtilsService.showToast("success",null,this.i18nService.t(e))}))}get title(){return 1===this.data.secretIds.length?"deleteSecret":"deleteSecrets"}get submitButtonText(){return 1===this.data.secretIds.length?"deleteSecret":"deleteSecrets"}}Ut.ɵfac=function(e){return new(e||Ut)(u.Y36(fe.zj),u.Y36(gt),u.Y36(Ee.D),u.Y36(Qe.P),u.Y36(fe.Kt))},Ut.ɵcmp=u.Xpm({type:Ut,selectors:[["sm-secret-delete-dialog"]],decls:24,vars:14,consts:[["bitDialogTitle",""],["bitDialogContent",""],[4,"ngIf"],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","button","bitButton","","buttonType","primary",3,"bitAction"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""]],template:function(e,t){1&e&&(u.TgZ(0,"bit-simple-dialog"),u._uU(1,"\n  "),u.TgZ(2,"span",0),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"span",1),u._uU(7,"\n    "),u.YNc(8,wt,3,3,"div",2),u._uU(9),u.ALo(10,"i18n"),u.qZA(),u._uU(11,"\n  "),u.TgZ(12,"div",3),u._uU(13,"\n    "),u.TgZ(14,"button",4),u._uU(15),u.ALo(16,"i18n"),u.qZA(),u._uU(17,"\n    "),u.TgZ(18,"button",5),u._uU(19),u.ALo(20,"i18n"),u.qZA(),u._uU(21,"\n  "),u.qZA(),u._uU(22,"\n"),u.qZA(),u._uU(23,"\n")),2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,6,t.title)),u.xp6(5),u.Q6J("ngIf",1===t.data.secretIds.length),u.xp6(1),u.hij("\n    ",u.lcZ(10,8,"deleteItemConfirmation"),"\n  "),u.xp6(5),u.Q6J("bitAction",t.delete),u.xp6(1),u.hij("\n      ",u.lcZ(16,10,t.submitButtonText),"\n    "),u.xp6(4),u.hij("\n      ",u.lcZ(20,12,"close"),"\n    "))},dependencies:[s.O5,vt.Q,we.r,ft.r,_e.f,H.C],encapsulation:2});var _t,Zt=n(70032),At=n(17731),bt=n(26536),yt=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};function xt(e,t){1&e&&(u.TgZ(0,"div",10),u._uU(1,"\n        "),u._UZ(2,"i",11),u._uU(3,"\n      "),u.qZA())}function St(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"option",28),u.NdJ("change",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.updateProjectList())})),u._uU(1),u.qZA()}if(2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.hij("\n                ",e.name,"\n              ")}}function Tt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",31),u._uU(1,"\n                "),u.TgZ(2,"td",32),u._uU(3),u.qZA(),u._uU(4,"\n                "),u.TgZ(5,"td",33),u._uU(6,"\n                  "),u.TgZ(7,"button",34),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,n=u.oxw(4);return u.KtG(n.removeProjectAssociation(t.id))})),u.ALo(8,"i18n"),u.ALo(9,"i18n"),u.qZA(),u._uU(10,"\n                "),u.qZA(),u._uU(11,"\n              "),u.qZA()}if(2&e){const e=t.$implicit;u.xp6(3),u.hij("\n                  ",e.name,"\n                "),u.xp6(4),u.Q6J("title",u.lcZ(8,3,"options")),u.uIk("aria-label",u.lcZ(9,5,"options"))}}function It(e,t){if(1&e&&(u._uU(0,"\n              "),u.YNc(1,Tt,12,7,"tr",30),u._uU(2,"\n            ")),2&e){const e=u.oxw(3);u.xp6(1),u.Q6J("ngForOf",e.selectedProjects)}}function qt(e,t){1&e&&u.YNc(0,It,3,1,"ng-template",29)}function Pt(e,t){if(1&e&&(u.TgZ(0,"bit-tab-group"),u._uU(1,"\n        "),u.TgZ(2,"bit-tab",12),u.ALo(3,"i18n"),u._uU(4,"\n          "),u.TgZ(5,"div",13),u._uU(6,"\n            "),u.TgZ(7,"bit-form-field",14),u._uU(8,"\n              "),u.TgZ(9,"bit-label",15),u._uU(10),u.ALo(11,"i18n"),u.qZA(),u._uU(12,"\n              "),u._UZ(13,"input",16),u._uU(14,"\n            "),u.qZA(),u._uU(15,"\n            "),u.TgZ(16,"bit-form-field",17),u._uU(17,"\n              "),u.TgZ(18,"bit-label"),u._uU(19),u.ALo(20,"i18n"),u.qZA(),u._uU(21,"\n              "),u._UZ(22,"textarea",18),u._uU(23,"\n            "),u.qZA(),u._uU(24,"\n          "),u.qZA(),u._uU(25,"\n          "),u.TgZ(26,"bit-form-field"),u._uU(27,"\n            "),u.TgZ(28,"bit-label"),u._uU(29),u.ALo(30,"i18n"),u.qZA(),u._uU(31,"\n            "),u._UZ(32,"textarea",19),u._uU(33,"\n          "),u.qZA(),u._uU(34,"\n        "),u.qZA(),u._uU(35,"\n        "),u.TgZ(36,"bit-tab",12),u.ALo(37,"i18n"),u._uU(38,"\n          "),u.TgZ(39,"bit-label",20),u._uU(40),u.ALo(41,"i18n"),u.qZA(),u._uU(42,"\n          "),u.TgZ(43,"bit-form-field",21),u._uU(44,"\n            "),u.TgZ(45,"bit-label"),u._uU(46),u.ALo(47,"i18n"),u.qZA(),u._uU(48,"\n            "),u.TgZ(49,"select",22),u._uU(50,"\n              "),u.TgZ(51,"option",23),u._uU(52),u.ALo(53,"i18n"),u.qZA(),u._uU(54,"\n              "),u.YNc(55,St,2,2,"option",24),u._uU(56,"\n            "),u.qZA(),u._uU(57,"\n          "),u.qZA(),u._uU(58,"\n          "),u.TgZ(59,"small",25),u._uU(60),u.ALo(61,"i18n"),u.qZA(),u._uU(62,"\n\n          "),u.TgZ(63,"bit-table"),u._uU(64,"\n            "),u.ynx(65,26),u._uU(66,"\n              "),u.TgZ(67,"tr"),u._uU(68,"\n                "),u.TgZ(69,"th",27),u._uU(70),u.ALo(71,"i18n"),u.qZA(),u._uU(72,"\n                "),u._UZ(73,"th",27),u._uU(74,"\n              "),u.qZA(),u._uU(75,"\n            "),u.BQk(),u._uU(76,"\n            "),u.YNc(77,qt,1,0,null,5),u._uU(78,"\n          "),u.qZA(),u._uU(79,"\n        "),u.qZA(),u._uU(80,"\n      "),u.qZA()),2&e){const e=u.oxw();u.xp6(2),u.Q6J("label",u.lcZ(3,12,"nameValuePair")),u.xp6(8),u.Oqu(u.lcZ(11,14,"name")),u.xp6(9),u.Oqu(u.lcZ(20,16,"value")),u.xp6(10),u.Oqu(u.lcZ(30,18,"notes")),u.xp6(7),u.Q6J("label",u.lcZ(37,20,"projects")),u.xp6(4),u.Oqu(u.lcZ(41,22,"secretProjectAssociationDescription")),u.xp6(6),u.Oqu(u.lcZ(47,24,"project")),u.xp6(6),u.Oqu(u.lcZ(53,26,"selectPlaceholder")),u.xp6(3),u.Q6J("ngForOf",e.projects),u.xp6(5),u.Oqu(u.lcZ(61,28,"selectProjects")),u.xp6(10),u.Oqu(u.lcZ(71,30,"project")),u.xp6(7),u.Q6J("ngIf",null!=e.selectedProjects)}}function jt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",35),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.openDeleteSecretDialog())})),u.qZA()}}!function(e){e[e.Add=0]="Add",e[e.Edit=1]="Edit"}(_t||(_t={}));class kt{constructor(e,t,n,i,o,s,c){this.dialogRef=e,this.data=t,this.secretService=n,this.i18nService=i,this.platformUtilsService=o,this.projectService=s,this.dialogService=c,this.formGroup=new me.cw({name:new me.NI("",[me.kI.required]),value:new me.NI("",[me.kI.required]),notes:new me.NI(""),project:new me.NI("")}),this.loading=!1,this.selectedProjects=[],this.destroy$=new ue.x,this.submit=()=>yt(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const e=this.getSecretView();this.data.operation===_t.Add?yield this.createSecret(e):(e.id=this.data.secretId,yield this.updateSecret(e)),this.dialogRef.close()}))}ngOnInit(){return yt(this,void 0,void 0,(function*(){if(this.projects=yield this.projectService.getProjects(this.data.organizationId).then((e=>e.sort(((e,t)=>e.name.localeCompare(t.name))))),this.data.operation===_t.Edit&&this.data.secretId)yield this.loadData();else if(this.data.operation!==_t.Add)throw this.dialogRef.close(),new Error("The secret dialog was not called with the appropriate operation values.");this.formGroup.get("project").valueChanges.pipe((0,he.R)(this.destroy$)).subscribe((()=>this.updateProjectList())),this.data.projectId&&this.formGroup.get("project").setValue(this.data.projectId)}))}loadData(){return yt(this,void 0,void 0,(function*(){this.loading=!0;const e=yield this.secretService.getBySecretId(this.data.secretId);this.loading=!1,this.selectedProjects=e.projects,this.loading=!1,this.formGroup.setValue({name:e.name,value:e.value,notes:e.note,project:""})}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get title(){return this.data.operation===_t.Add?"newSecret":"editSecret"}removeProjectAssociation(e){return yt(this,void 0,void 0,(function*(){this.selectedProjects=this.selectedProjects.filter((t=>t.id!=e)),this.formGroup.get("project").setValue("")}))}updateProjectList(){var e;const t=[],n=this.formGroup.get("project").value;if(n){const i=null===(e=this.projects)||void 0===e?void 0:e.filter((e=>e.id==n))[0];if(null!=i){const e=new ct;e.id=i.id,e.name=i.name,t.push(e)}}this.selectedProjects=t}get deleteButtonIsVisible(){return this.data.operation===_t.Edit}openDeleteSecretDialog(){const e=this.dialogService.open(Ut,{data:{secretIds:[this.data.secretId]}});(0,Zt.n)(e.closed).then((e=>void 0!==e&&this.dialogRef.close()))}createSecret(e){return yt(this,void 0,void 0,(function*(){yield this.secretService.create(this.data.organizationId,e),this.platformUtilsService.showToast("success",null,this.i18nService.t("secretCreated"))}))}updateSecret(e){return yt(this,void 0,void 0,(function*(){yield this.secretService.update(this.data.organizationId,e),this.platformUtilsService.showToast("success",null,this.i18nService.t("secretEdited"))}))}getSecretView(){const e=new rt;return e.organizationId=this.data.organizationId,e.name=this.formGroup.value.name,e.value=this.formGroup.value.value,e.note=this.formGroup.value.notes,e.projects=this.selectedProjects?this.selectedProjects:[],e}}kt.ɵfac=function(e){return new(e||kt)(u.Y36(fe.zj),u.Y36(fe.Kt),u.Y36(gt),u.Y36(Ee.D),u.Y36(Qe.P),u.Y36(Ye),u.Y36(Me.x))},kt.ɵcmp=u.Xpm({type:kt,selectors:[["sm-secret-dialog"]],decls:32,vars:14,consts:[[3,"formGroup","bitSubmit"],["dialogSize","default","disablePadding",""],["bitDialogTitle",""],["bitDialogContent",""],["class","tw-text-center",4,"ngIf"],[4,"ngIf"],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","submit","bitButton","","buttonType","primary","bitFormButton",""],["type","button","bitButton","","buttonType","secondary","bitFormButton","","bitDialogClose",""],["class","tw-ml-auto","type","button","bitIconButton","bwi-trash","buttonType","danger","bitFormButton","",3,"click",4,"ngIf"],[1,"tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"],[3,"label"],[1,"tw-flex","tw-gap-4","tw-pt-4"],[1,"tw-w-1/3"],["for","secret-name"],["formControlName","name","bitInput",""],[1,"tw-w-full"],["bitInput","","rows","4","formControlName","value"],["bitInput","","rows","4","formControlName","notes"],[1,"tw-text-md"],[1,"tw-mt-3","tw-mb-0"],["bitInput","","name","project","formControlName","project"],["value",""],[3,"value","change",4,"ngFor","ngForOf"],[1,"form-text","text-muted","tw-mb-6"],["header",""],["bitCell",""],[3,"value","change"],["body",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell","",1,"tw-overflow-hidden","tw-break-words","tw-text-sm"],["bitCell","",1,"tw-w-0"],["type","button","bitIconButton","bwi-close","buttonType","main",3,"title","click"],["type","button","bitIconButton","bwi-trash","buttonType","danger","bitFormButton","",1,"tw-ml-auto",3,"click"]],template:function(e,t){1&e&&(u._uU(0,"\n"),u._uU(1,"\n"),u.TgZ(2,"form",0),u._uU(3,"\n  "),u.TgZ(4,"bit-dialog",1),u._uU(5,"\n    "),u.ynx(6,2),u._uU(7),u.ALo(8,"i18n"),u.BQk(),u._uU(9,"\n    "),u.TgZ(10,"div",3),u._uU(11,"\n      "),u.YNc(12,xt,4,0,"div",4),u._uU(13,"\n      "),u.YNc(14,Pt,81,32,"bit-tab-group",5),u._uU(15,"\n    "),u.qZA(),u._uU(16,"\n    "),u.TgZ(17,"div",6),u._uU(18,"\n      "),u.TgZ(19,"button",7),u._uU(20),u.ALo(21,"i18n"),u.qZA(),u._uU(22,"\n      "),u.TgZ(23,"button",8),u._uU(24),u.ALo(25,"i18n"),u.qZA(),u._uU(26,"\n      "),u.YNc(27,jt,1,0,"button",9),u._uU(28,"\n    "),u.qZA(),u._uU(29,"\n  "),u.qZA(),u._uU(30,"\n"),u.qZA(),u._uU(31,"\n")),2&e&&(u.xp6(2),u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(5),u.Oqu(u.lcZ(8,8,t.title)),u.xp6(5),u.Q6J("ngIf",t.loading),u.xp6(2),u.Q6J("ngIf",!t.loading),u.xp6(6),u.hij("\n        ",u.lcZ(21,10,"save"),"\n      "),u.xp6(4),u.hij("\n        ",u.lcZ(25,12,"cancel"),"\n      "),u.xp6(3),u.Q6J("ngIf",t.deleteButtonIsVisible))},dependencies:[s.sg,s.O5,me._Y,me.YN,me.Kr,me.Fj,me.EJ,me.JJ,me.JL,me.sg,me.u,Ge.b,Re.u,we.r,Ue.a,_e.f,Be.d,$e.G,Ve.u,x.Q,Ze.a,Ae.Y,be.v,Ze.f,At.Q,bt.i,H.C],encapsulation:2});class Ct{}class Lt{}class Ot extends Ce.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.name=this.getResponseProperty("Name"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate")}}var Jt=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class Nt{constructor(e,t,n){this.cryptoService=e,this.apiService=t,this.encryptService=n,this._serviceAccount=new ue.x,this.serviceAccount$=this._serviceAccount.asObservable()}getServiceAccounts(e){return Jt(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/organizations/"+e+"/service-accounts",null,!0,!0),n=new qe.L(t,Ot);return yield this.createServiceAccountViews(e,n.data)}))}create(e,t){return Jt(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(e),i=yield this.getServiceAccountRequest(n,t),o=yield this.apiService.send("POST","/organizations/"+e+"/service-accounts",i,!0,!0);this._serviceAccount.next(yield this.createServiceAccountView(n,new Ot(o)))}))}getOrganizationKey(e){return Jt(this,void 0,void 0,(function*(){return yield this.cryptoService.getOrgKey(e)}))}getServiceAccountRequest(e,t){return Jt(this,void 0,void 0,(function*(){const n=new Lt;return n.name=yield this.encryptService.encrypt(t.name,e),n}))}createServiceAccountView(e,t){return Jt(this,void 0,void 0,(function*(){const n=new Ct;return n.id=t.id,n.organizationId=t.organizationId,n.creationDate=t.creationDate,n.revisionDate=t.revisionDate,n.name=yield this.encryptService.decryptToUtf8(new Ie._(t.name),e),n}))}createServiceAccountViews(e,t){return Jt(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(e);return yield Promise.all(t.map((e=>Jt(this,void 0,void 0,(function*(){return yield this.createServiceAccountView(n,e)})))))}))}}Nt.ɵfac=function(e){return new(e||Nt)(u.LFG(Je.$),u.LFG(Ne.s),u.LFG(De.U))},Nt.ɵprov=u.Yz7({token:Nt,factory:Nt.ɵfac,providedIn:"root"});var Dt=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};function zt(e,t){if(1&e&&(u.TgZ(0,"option"),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.hij("\n            ",e.name,"\n          ")}}function Yt(e,t){if(1&e&&(u.TgZ(0,"option"),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.hij("\n            ",e.name,"\n          ")}}function Et(e,t){1&e&&(u._uU(0,"\n          "),u.TgZ(1,"tr"),u._uU(2,"\n            "),u._uU(3,"\n            "),u.TgZ(4,"td",10),u._uU(5,"example"),u.qZA(),u._uU(6,"\n            "),u.TgZ(7,"td",10),u._uU(8,"example"),u.qZA(),u._uU(9,"\n          "),u.qZA(),u._uU(10,"\n        "))}class Qt{constructor(e,t,n,i,o,s,c){this.dialogRef=e,this.data=t,this.serviceAccountService=n,this.i18nService=i,this.platformUtilsService=o,this.projectService=s,this.secretService=c,this.formGroup=new me.cw({name:new me.NI("",[me.kI.required])}),this.submit=()=>Dt(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const e=this.getServiceAccountView();yield this.serviceAccountService.create(this.data.organizationId,e),this.platformUtilsService.showToast("success",null,this.i18nService.t("serviceAccountCreated")),this.dialogRef.close()}))}ngOnInit(){return Dt(this,void 0,void 0,(function*(){this.projects=yield this.projectService.getProjects(this.data.organizationId),this.secrets=yield this.secretService.getSecrets(this.data.organizationId)}))}getServiceAccountView(){const e=new Ct;return e.organizationId=this.data.organizationId,e.name=this.formGroup.value.name,e}}Qt.ɵfac=function(e){return new(e||Qt)(u.Y36(fe.zj),u.Y36(fe.Kt),u.Y36(Nt),u.Y36(Ee.D),u.Y36(Qe.P),u.Y36(Ye),u.Y36(gt))},Qt.ɵcmp=u.Xpm({type:Qt,selectors:[["sm-service-account-dialog"]],decls:75,vars:31,consts:[[3,"formGroup","bitSubmit"],["dialogSize","default"],["bitDialogTitle",""],["bitDialogContent",""],["formControlName","name","bitInput",""],[1,"tw-uppercase"],["bitInput",""],["selected","","disabled","","hidden",""],[4,"ngFor","ngForOf"],["header",""],["bitCell",""],["body",""],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","submit","bitButton","","buttonType","primary","bitFormButton",""],["type","button","bitButton","","buttonType","secondary","bitFormButton","","bitDialogClose",""]],template:function(e,t){1&e&&(u.TgZ(0,"form",0),u._uU(1,"\n  "),u.TgZ(2,"bit-dialog",1),u._uU(3,"\n    "),u.ynx(4,2),u._uU(5),u.ALo(6,"i18n"),u.BQk(),u._uU(7,"\n    "),u.TgZ(8,"div",3),u._uU(9,"\n      "),u.TgZ(10,"bit-form-field"),u._uU(11,"\n        "),u.TgZ(12,"bit-label"),u._uU(13),u.ALo(14,"i18n"),u.qZA(),u._uU(15,"\n        "),u._UZ(16,"input",4),u._uU(17,"\n      "),u.qZA(),u._uU(18,"\n      "),u.TgZ(19,"h3",5),u._uU(20),u.ALo(21,"i18n"),u.qZA(),u._uU(22,"\n\n      "),u.TgZ(23,"bit-form-field"),u._uU(24,"\n        "),u.TgZ(25,"bit-label"),u._uU(26),u.ALo(27,"i18n"),u.qZA(),u._uU(28,"\n        "),u.TgZ(29,"select",6),u._uU(30,"\n          "),u._uU(31,"\n          "),u.TgZ(32,"option",7),u._uU(33),u.ALo(34,"i18n"),u.qZA(),u._uU(35,"\n          "),u.YNc(36,zt,2,1,"option",8),u._uU(37,"\n          "),u.YNc(38,Yt,2,1,"option",8),u._uU(39,"\n        "),u.qZA(),u._uU(40,"\n      "),u.qZA(),u._uU(41,"\n\n      "),u.TgZ(42,"bit-table"),u._uU(43,"\n        "),u.ynx(44,9),u._uU(45,"\n          "),u.TgZ(46,"tr"),u._uU(47,"\n            "),u.TgZ(48,"th",10),u._uU(49),u.ALo(50,"i18n"),u.qZA(),u._uU(51,"\n            "),u.TgZ(52,"th",10),u._uU(53),u.ALo(54,"i18n"),u.qZA(),u._uU(55,"\n          "),u.qZA(),u._uU(56,"\n        "),u.BQk(),u._uU(57,"\n        "),u.YNc(58,Et,11,0,"ng-template",11),u._uU(59,"\n      "),u.qZA(),u._uU(60,"\n    "),u.qZA(),u._uU(61,"\n    "),u.TgZ(62,"div",12),u._uU(63,"\n      "),u.TgZ(64,"button",13),u._uU(65),u.ALo(66,"i18n"),u.qZA(),u._uU(67,"\n      "),u.TgZ(68,"button",14),u._uU(69),u.ALo(70,"i18n"),u.qZA(),u._uU(71,"\n    "),u.qZA(),u._uU(72,"\n  "),u.qZA(),u._uU(73,"\n"),u.qZA(),u._uU(74,"\n")),2&e&&(u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(5),u.Oqu(u.lcZ(6,13,"newServiceAccount")),u.xp6(8),u.Oqu(u.lcZ(14,15,"serviceAccountName")),u.xp6(7),u.Oqu(u.lcZ(21,17,"smAccess")),u.xp6(6),u.Oqu(u.lcZ(27,19,"newSaSelectAccess")),u.xp6(7),u.hij("-- ",u.lcZ(34,21,"newSaTypeToFilter")," --"),u.xp6(3),u.Q6J("ngForOf",t.projects),u.xp6(2),u.Q6J("ngForOf",t.secrets),u.xp6(11),u.Oqu(u.lcZ(50,23,"projectCommaSecret")),u.xp6(4),u.Oqu(u.lcZ(54,25,"permissions")),u.xp6(12),u.hij("\n        ",u.lcZ(66,27,"save"),"\n      "),u.xp6(4),u.hij("\n        ",u.lcZ(70,29,"cancel"),"\n      "))},dependencies:[s.sg,me._Y,me.YN,me.Kr,me.Fj,me.JJ,me.JL,me.sg,me.u,Ge.b,Re.u,we.r,Ue.a,_e.f,Be.d,$e.G,Ve.u,Ze.a,Ae.Y,Ze.f,H.C],encapsulation:2});var Mt=n(12492),Gt=n(97334);const Rt={h1:["tw-text-3xl","tw-font-semibold"],h2:["tw-text-2xl","tw-font-semibold"],h3:["tw-text-xl","tw-font-semibold"],h4:["tw-text-lg","tw-font-semibold"],h5:["tw-text-base","tw-font-semibold"],h6:["tw-text-sm","tw-font-semibold"],body1:["tw-text-base"],body2:["tw-text-sm"],helper:["tw-text-xs"]},Ft={h1:["tw-mb-2"],h2:["tw-mb-2"],h3:["tw-mb-2"],h4:["tw-mb-2"],h5:["tw-mb-2"],h6:["tw-mb-2"],body1:[],body2:[],helper:[]};class Bt{constructor(){this._margin=!0}set noMargin(e){this._margin=!(0,Gt.Ig)(e)}get classList(){return Rt[this.bitTypography].concat(this._margin?Ft[this.bitTypography]:[])}}Bt.ɵfac=function(e){return new(e||Bt)},Bt.ɵdir=u.lG2({type:Bt,selectors:[["","bitTypography",""]],hostVars:2,hostBindings:function(e,t){2&e&&u.Tol(t.classList)},inputs:{bitTypography:"bitTypography",noMargin:"noMargin"}});var $t=n(64184),Vt=n(11518),Kt=n(12963),Ht=n(14970),Xt=n(73974),Wt=n(26194),en=n(44234),tn=n(91849),nn=n(45202);function on(e,t){if(1&e&&u._UZ(0,"i",16),2&e){const e=u.oxw(3);u.Gre("bwi ",e.icon,"")}}function sn(e,t){if(1&e&&(u.TgZ(0,"h1",14),u.ALo(1,"i18n"),u._uU(2,"\n        "),u.YNc(3,on,1,3,"i",15),u._uU(4),u.ALo(5,"i18n"),u.qZA()),2&e){const e=u.oxw().ngIf,t=u.oxw();u.Q6J("title",t.title||u.lcZ(1,3,e.titleId)),u.xp6(3),u.Q6J("ngIf",t.icon),u.xp6(1),u.hij("\n        ",t.title||u.lcZ(5,5,e.titleId),"\n      ")}}function cn(e,t){if(1&e){const e=u.EpF();u.ynx(0),u._uU(1,"\n          "),u.TgZ(2,"button",17),u._uU(3,"\n            "),u._UZ(4,"bit-avatar",18),u._uU(5,"\n          "),u.qZA(),u._uU(6,"\n\n          "),u.TgZ(7,"bit-menu",null,19),u._uU(9,"\n            "),u.TgZ(10,"div",20),u._uU(11,"\n              "),u.TgZ(12,"div",21),u._uU(13,"\n                "),u._UZ(14,"bit-avatar",22),u._uU(15,"\n                "),u.TgZ(16,"div",23),u._uU(17,"\n                  "),u.TgZ(18,"span"),u._uU(19),u.ALo(20,"i18n"),u.qZA(),u._uU(21,"\n                  "),u.TgZ(22,"small",24),u._uU(23),u.qZA(),u._uU(24,"\n                "),u.qZA(),u._uU(25,"\n              "),u.qZA(),u._uU(26,"\n\n              "),u._UZ(27,"bit-menu-divider"),u._uU(28,"\n\n              "),u.TgZ(29,"a",25),u._uU(30,"\n                "),u._UZ(31,"i",26),u._uU(32),u.ALo(33,"i18n"),u.qZA(),u._uU(34,"\n              "),u.TgZ(35,"a",27),u._uU(36,"\n                "),u._UZ(37,"i",28),u._uU(38),u.ALo(39,"i18n"),u.qZA(),u._uU(40,"\n              "),u.TgZ(41,"a",29),u._uU(42,"\n                "),u._UZ(43,"i",30),u._uU(44),u.ALo(45,"i18n"),u.qZA(),u._uU(46,"\n\n              "),u._UZ(47,"bit-menu-divider"),u._uU(48,"\n\n              "),u.TgZ(49,"button",31),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.lock())})),u._uU(50,"\n                "),u._UZ(51,"i",32),u._uU(52),u.ALo(53,"i18n"),u.qZA(),u._uU(54,"\n              "),u.TgZ(55,"button",31),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.logout())})),u._uU(56,"\n                "),u._UZ(57,"i",33),u._uU(58),u.ALo(59,"i18n"),u.qZA(),u._uU(60,"\n            "),u.qZA(),u._uU(61,"\n          "),u.qZA(),u._uU(62,"\n        "),u.BQk()}if(2&e){const e=t.ngIf,n=u.MAs(8);u.xp6(2),u.Q6J("bitMenuTriggerFor",n),u.xp6(2),u.Q6J("id",e.userId)("text",e.name||e.email),u.xp6(10),u.Q6J("text",e.name||e.email)("id",e.userId),u.xp6(5),u.Oqu(u.lcZ(20,12,"loggedInAs")),u.xp6(4),u.hij("\n                    ",e.name,"\n                  "),u.xp6(9),u.hij("\n                ",u.lcZ(33,14,"accountSettings"),"\n              "),u.xp6(6),u.hij("\n                ",u.lcZ(39,16,"getHelp"),"\n              "),u.xp6(6),u.hij("\n                ",u.lcZ(45,18,"getApps"),"\n              "),u.xp6(8),u.hij("\n                ",u.lcZ(53,20,"lockNow"),"\n              "),u.xp6(6),u.hij("\n                ",u.lcZ(59,22,"logOut"),"\n              ")}}const rn=function(e){return{"tw-border-0 tw-border-b tw-border-solid tw-border-secondary-300 tw-bg-background-alt tw-pb-0":e}},an=function(e){return{"tw-hidden":e}};function un(e,t){if(1&e&&(u.TgZ(0,"header",1),u._uU(1,"\n  "),u.TgZ(2,"div",2),u._uU(3,"\n    "),u.TgZ(4,"div",3),u._uU(5,"\n      "),u.Hsn(6),u._uU(7,"\n      "),u.TgZ(8,"div",4,5),u._uU(10,"\n        "),u.Hsn(11,1),u._uU(12,"\n      "),u.qZA(),u._uU(13,"\n      "),u.YNc(14,sn,6,7,"h1",6),u._uU(15,"\n    "),u.qZA(),u._uU(16,"\n    "),u.TgZ(17,"div",7),u._uU(18,"\n      "),u.TgZ(19,"div",8),u._uU(20,"\n        "),u.Hsn(21,2),u._uU(22,"\n        "),u._UZ(23,"product-switcher"),u._uU(24,"\n        "),u.YNc(25,cn,63,24,"ng-container",9),u.ALo(26,"async"),u._uU(27,"\n      "),u.qZA(),u._uU(28,"\n      "),u.TgZ(29,"div",10,11),u._uU(31,"\n        "),u.Hsn(32,3),u._uU(33,"\n      "),u.qZA(),u._uU(34,"\n    "),u.qZA(),u._uU(35,"\n  "),u.qZA(),u._uU(36,"\n  "),u.TgZ(37,"div",12,13),u._uU(39,"\n    "),u.Hsn(40,4),u._uU(41,"\n  "),u.qZA(),u._uU(42,"\n"),u.qZA()),2&e){const e=u.MAs(9),t=u.MAs(30),n=u.MAs(38),i=u.oxw();u.Q6J("ngClass",u.VKq(8,rn,0!==n.childElementCount)),u.xp6(8),u.Q6J("ngClass",u.VKq(10,an,0===e.childElementCount)),u.xp6(6),u.Q6J("ngIf",0===e.childElementCount),u.xp6(11),u.Q6J("ngIf",u.lcZ(26,6,i.account$)),u.xp6(4),u.Q6J("ngClass",u.VKq(12,an,0===t.childElementCount)),u.xp6(8),u.Q6J("ngClass",u.VKq(14,an,0===n.childElementCount))}}const ln=[[["","slot","breadcrumbs"]],[["","slot","title"]],"*",[["","slot","secondary"]],[["","slot","tabs"]]];class dn{constructor(e,t,n){this.route=e,this.stateService=t,this.messagingService=n,this.routeData$=this.route.data.pipe((0,y.U)((e=>({titleId:e.titleId})))),this.account$=(0,$.a)([this.stateService.activeAccount$,this.stateService.accounts$]).pipe((0,y.U)((([e,t])=>{var n;return null===(n=t[e])||void 0===n?void 0:n.profile})))}lock(){this.messagingService.send("lockVault")}logout(){this.messagingService.send("logout")}}dn.ɵfac=function(e){return new(e||dn)(u.Y36(c.gz),u.Y36($t.b),u.Y36(Vt.o))},dn.ɵcmp=u.Xpm({type:dn,selectors:[["sm-header"]],inputs:{title:"title",icon:"icon"},ngContentSelectors:["[slot=breadcrumbs]","[slot=title]","*","[slot=secondary]","[slot=tabs]"],decls:3,vars:3,consts:[["class","-tw-m-6 tw-mb-3 tw-flex tw-flex-col tw-p-6",3,"ngClass",4,"ngIf"],[1,"-tw-m-6","tw-mb-3","tw-flex","tw-flex-col","tw-p-6",3,"ngClass"],[1,"tw-flex"],[1,"tw-flex","tw-min-w-0","tw-flex-1","tw-flex-col","tw-gap-2"],[3,"ngClass"],["titleContainer",""],["bitTypography","h1","noMargin","","class","tw-m-0 tw-mr-2 tw-truncate tw-leading-10",3,"title",4,"ngIf"],[1,"tw-ml-auto","tw-flex","tw-flex-col","tw-gap-4"],[1,"tw-flex","tw-min-w-max","tw-items-center","tw-justify-end","tw-gap-2"],[4,"ngIf"],[1,"tw-ml-auto",3,"ngClass"],["contentContainer",""],[1,"-tw-mx-4","-tw-mb-px",3,"ngClass"],["tabsContainer",""],["bitTypography","h1","noMargin","",1,"tw-m-0","tw-mr-2","tw-truncate","tw-leading-10",3,"title"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true"],["type","button",1,"tw-border-0","tw-bg-transparent","tw-p-0",3,"bitMenuTriggerFor"],[3,"id","text"],["accountMenu",""],[1,"tw-flex","tw-min-w-52","tw-max-w-72","tw-flex-col"],["appStopProp","",1,"tw-flex","tw-items-center","tw-py-1","tw-px-4","tw-leading-tight","tw-text-info"],[3,"text","id"],[1,"tw-ml-2","tw-block","tw-overflow-hidden","tw-whitespace-nowrap"],[1,"tw-block","tw-overflow-hidden","tw-whitespace-nowrap","tw-text-muted"],["bitMenuItem","","routerLink","/settings/account"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-user"],["bitMenuItem","","href","https://bitwarden.com/help/","target","_blank","rel","noopener"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-question-circle"],["bitMenuItem","","href","https://bitwarden.com/download/","target","_blank","rel","noopener"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-download"],["bitMenuItem","","type","button",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-lock"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-sign-out"]],template:function(e,t){1&e&&(u.F$t(ln),u.YNc(0,un,43,16,"header",0),u.ALo(1,"async"),u._uU(2,"\n")),2&e&&u.Q6J("ngIf",u.lcZ(1,1,t.routeData$))},dependencies:[s.mk,s.O5,c.yS,Kt._,Ht.A,Xt.M,Wt.t,en.e,tn.n,Bt,nn.m,s.Ov,H.C],encapsulation:2});class pn{constructor(e,t){this.route=e,this.dialogService=t,this.destroy$=new ue.x}ngOnInit(){this.route.params.pipe((0,he.R)(this.destroy$)).subscribe((e=>{this.organizationId=e.organizationId}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}openSecretDialog(){this.dialogService.open(kt,{data:{organizationId:this.organizationId,operation:_t.Add}})}openProjectDialog(){this.dialogService.open(ot,{data:{organizationId:this.organizationId,operation:_t.Add}})}openServiceAccountDialog(){this.dialogService.open(Qt,{data:{organizationId:this.organizationId}})}}pn.ɵfac=function(e){return new(e||pn)(u.Y36(c.gz),u.Y36(Me.x))},pn.ɵcmp=u.Xpm({type:pn,selectors:[["sm-new-menu"]],decls:28,vars:13,consts:[["type","button","bitButton","","buttonType","primary",1,"tw-min-w-max",3,"bitMenuTriggerFor"],["aria-hidden","true",1,"bwi","bwi-angle-down"],["newMenu",""],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-sitemap"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-key"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-wrench"]],template:function(e,t){if(1&e&&(u.TgZ(0,"button",0),u._uU(1),u.ALo(2,"i18n"),u._UZ(3,"i",1),u._uU(4,"\n"),u.qZA(),u._uU(5,"\n\n"),u.TgZ(6,"bit-menu",null,2),u._uU(8,"\n  "),u.TgZ(9,"button",3),u.NdJ("click",(function(){return t.openProjectDialog()})),u._uU(10,"\n    "),u._UZ(11,"i",4),u._uU(12),u.ALo(13,"i18n"),u.qZA(),u._uU(14,"\n  "),u.TgZ(15,"button",3),u.NdJ("click",(function(){return t.openSecretDialog()})),u._uU(16,"\n    "),u._UZ(17,"i",5),u._uU(18),u.ALo(19,"i18n"),u.qZA(),u._uU(20,"\n  "),u.TgZ(21,"button",3),u.NdJ("click",(function(){return t.openServiceAccountDialog()})),u._uU(22,"\n    "),u._UZ(23,"i",6),u._uU(24),u.ALo(25,"i18n"),u.qZA(),u._uU(26,"\n"),u.qZA(),u._uU(27,"\n")),2&e){const e=u.MAs(7);u.Q6J("bitMenuTriggerFor",e),u.xp6(1),u.hij("\n  ",u.lcZ(2,5,"new")," "),u.xp6(11),u.hij("\n    ",u.lcZ(13,7,"project"),"\n  "),u.xp6(6),u.hij("\n    ",u.lcZ(19,9,"secret"),"\n  "),u.xp6(6),u.hij("\n    ",u.lcZ(25,11,"serviceAccount"),"\n  ")}},dependencies:[we.r,Xt.M,Wt.t,en.e,H.C],encapsulation:2});var hn=n(81049);class gn extends hn.o2{constructor(){super(),this._filter=new b.X(""),this._renderData=new b.X([]),this._renderChangesSubscription=null,this._data=new b.X([]),this._sort=new b.X({direction:"asc"})}get data(){return this._data.value}set data(e){this._data.next(e?[...e]:[])}set sort(e){this._sort.next(e)}get sort(){return this._sort.value}get filter(){return this._filter.value}set filter(e){this._filter.next(e)}connect(){return this._renderChangesSubscription||this.updateChangeSubscription(),this._renderData}disconnect(){var e;null===(e=this._renderChangesSubscription)||void 0===e||e.unsubscribe(),this._renderChangesSubscription=null}updateChangeSubscription(){var e;const t=(0,$.a)([this._data,this._filter]).pipe((0,y.U)((([e,t])=>this.filterData(e,t)))),n=(0,$.a)([t,this._sort]).pipe((0,y.U)((([e,t])=>this.orderData(e,t))));null===(e=this._renderChangesSubscription)||void 0===e||e.unsubscribe(),this._renderChangesSubscription=n.subscribe((e=>this._renderData.next(e)))}filterData(e,t){return null==t||""==t?e:e.filter((e=>this.filterPredicate(e,t)))}orderData(e,t){return t?this.sortData(e,t):e}sortingDataAccessor(e,t){const n=e[t];if((0,Gt.t6)(n)){const e=Number(n);return e<Number.MAX_SAFE_INTEGER?e:n}return n}sortData(e,t){const n=t.column,i=t.direction;return n?e.sort(((e,o)=>{if(t.fn)return t.fn(e,o)*("asc"===i?1:-1);let s=this.sortingDataAccessor(e,n),c=this.sortingDataAccessor(o,n);const r=typeof s,a=typeof c;r!==a&&("number"===r&&(s+=""),"number"===a&&(c+=""));let u=0;return null!=s&&null!=c?s>c?u=1:s<c&&(u=-1):null!=s?u=1:null!=c&&(u=-1),u*("asc"===i?1:-1)})):e}filterPredicate(e,t){const n=Object.keys(e).reduce(((t,n)=>t+e[n]+"◬"),"").toLowerCase(),i=t.trim().toLowerCase();return-1!=n.indexOf(i)}}class vn{constructor(e){this.table=e}set default(e){this._default=(0,Gt.Ig)(e)}ngOnInit(){this._default&&!this.isActive&&this.setActive()}get ariaSort(){if(this.isActive)return"asc"===this.sort.direction?"ascending":"descending"}setActive(){if(this.table.dataSource){const e=this.isActive&&"asc"===this.direction?"desc":"asc";this.table.dataSource.sort={column:this.bitSortable,direction:e,fn:this.fn}}}get sort(){var e;return null===(e=this.table.dataSource)||void 0===e?void 0:e.sort}get isActive(){var e;return(null===(e=this.sort)||void 0===e?void 0:e.column)===this.bitSortable}get direction(){var e;return null===(e=this.sort)||void 0===e?void 0:e.direction}get icon(){return this.isActive?"asc"===this.direction?"bwi-up-solid":"bwi-down-solid":"bwi-up-down-btn"}get classList(){return["tw-group","tw-min-w-max","-tw-m-1.5","tw-font-bold","tw-border","tw-border-solid","tw-rounded","tw-transition","hover:tw-no-underline","focus:tw-outline-none","tw-bg-transparent","!tw-text-muted","tw-border-transparent","hover:tw-bg-transparent-hover","hover:tw-border-primary-700","focus-visible:before:tw-ring-primary-700","disabled:tw-opacity-60","disabled:hover:tw-border-transparent","disabled:hover:tw-bg-transparent","tw-relative","before:tw-content-['']","before:tw-block","before:tw-absolute","before:-tw-inset-[3px]","before:tw-rounded-md","before:tw-transition","before:tw-ring","before:tw-ring-transparent","focus-visible:tw-z-10"]}}vn.ɵfac=function(e){return new(e||vn)(u.Y36(Ze.a))},vn.ɵcmp=u.Xpm({type:vn,selectors:[["th","bitSortable",""]],hostVars:1,hostBindings:function(e,t){2&e&&u.uIk("aria-sort",t.ariaSort)},inputs:{bitSortable:"bitSortable",default:"default",fn:"fn"},attrs:["bitSortable",""],ngContentSelectors:["*"],decls:8,vars:3,consts:[[3,"ngClass","click"],[1,"bwi","tw-ml-2",3,"ngClass"]],template:function(e,t){1&e&&(u.F$t(),u._uU(0,"\n    "),u.TgZ(1,"button",0),u.NdJ("click",(function(){return t.setActive()})),u._uU(2,"\n      "),u.Hsn(3),u._uU(4,"\n      "),u._UZ(5,"i",1),u._uU(6,"\n    "),u.qZA(),u._uU(7,"\n  ")),2&e&&(u.xp6(1),u.Q6J("ngClass",t.classList),u.uIk("aria-pressed",t.isActive),u.xp6(4),u.Q6J("ngClass",t.icon))},dependencies:[s.mk],encapsulation:2});var fn=n(83505);const mn=[[["","slot","title"]],[["","slot","description"]],[["","slot","button"]]];class wn{constructor(){this.icon=fn.o}}function Un(e,t){1&e&&(u.TgZ(0,"div",7),u._uU(1,"\n  "),u._UZ(2,"i",8),u._uU(3,"\n"),u.qZA())}function _n(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"sm-no-items"),u._uU(1,"\n  "),u.ynx(2,9),u._uU(3),u.ALo(4,"i18n"),u.BQk(),u._uU(5,"\n  "),u.ynx(6,10),u._uU(7),u.ALo(8,"i18n"),u.BQk(),u._uU(9,"\n  "),u.TgZ(10,"button",11),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.newProjectEvent.emit())})),u._uU(11,"\n    "),u._UZ(12,"i",12),u._uU(13),u.ALo(14,"i18n"),u.qZA(),u._uU(15,"\n"),u.qZA()}2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,3,"projectsNoItemsTitle")),u.xp6(4),u.Oqu(u.lcZ(8,5,"projectsNoItemsMessage")),u.xp6(6),u.hij("\n    ",u.lcZ(14,7,"newProject"),"\n  "))}wn.ɵfac=function(e){return new(e||wn)},wn.ɵcmp=u.Xpm({type:wn,selectors:[["sm-no-items"]],ngContentSelectors:["[slot=title]","[slot=description]","[slot=button]"],decls:23,vars:1,consts:[[1,"tw-mx-auto","tw-flex","tw-flex-col","tw-items-center","tw-justify-center","tw-pt-6","tw-text-center"],[1,"tw-max-w-sm"],["aria-hidden","true",3,"icon"],[1,"tw-font-semibold"],[1,"tw-space-x-2"]],template:function(e,t){1&e&&(u.F$t(mn),u.TgZ(0,"div",0),u._uU(1,"\n  "),u.TgZ(2,"div",1),u._uU(3,"\n    "),u._UZ(4,"bit-icon",2),u._uU(5,"\n    "),u.TgZ(6,"h3",3),u._uU(7,"\n      "),u.Hsn(8),u._uU(9,"\n    "),u.qZA(),u._uU(10,"\n    "),u.TgZ(11,"p"),u._uU(12,"\n      "),u.Hsn(13,1),u._uU(14,"\n    "),u.qZA(),u._uU(15,"\n  "),u.qZA(),u._uU(16,"\n  "),u.TgZ(17,"div",4),u._uU(18,"\n    "),u.Hsn(19,2),u._uU(20,"\n  "),u.qZA(),u._uU(21,"\n"),u.qZA(),u._uU(22,"\n")),2&e&&(u.xp6(4),u.Q6J("icon",t.icon))},dependencies:[Z.G],encapsulation:2});const Zn=function(e,t){return["/sm",e,"projects",t]};function An(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",23),u._uU(1,"\n      "),u.TgZ(2,"td",24),u._uU(3,"\n        "),u.TgZ(4,"input",25),u.NdJ("change",(function(t){const n=u.CHM(e).$implicit,i=u.oxw(3);return u.KtG(t?i.selection.toggle(n.id):null)})),u.qZA(),u._uU(5,"\n      "),u.qZA(),u._uU(6,"\n      "),u.TgZ(7,"td",24),u._uU(8,"\n        "),u.TgZ(9,"div",26),u._uU(10,"\n          "),u._UZ(11,"i",27),u._uU(12,"\n          "),u.TgZ(13,"a",28),u._uU(14),u.qZA(),u._uU(15,"\n        "),u.qZA(),u._uU(16,"\n      "),u.qZA(),u._uU(17,"\n      "),u.TgZ(18,"td",29),u._uU(19),u.ALo(20,"date"),u.qZA(),u._uU(21,"\n      "),u.TgZ(22,"td",24),u._uU(23,"\n        "),u._UZ(24,"button",20),u.ALo(25,"i18n"),u.ALo(26,"i18n"),u._uU(27,"\n      "),u.qZA(),u._uU(28,"\n      "),u.TgZ(29,"bit-menu",null,30),u._uU(31,"\n        "),u.TgZ(32,"button",4),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,n=u.oxw(3);return u.KtG(n.editProjectEvent.emit(t.id))})),u._uU(33,"\n          "),u._UZ(34,"i",31),u._uU(35),u.ALo(36,"i18n"),u.qZA(),u._uU(37,"\n        "),u.TgZ(38,"a",32),u._uU(39,"\n          "),u._UZ(40,"i",33),u._uU(41),u.ALo(42,"i18n"),u.qZA(),u._uU(43,"\n        "),u.TgZ(44,"button",4),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,n=u.oxw(3);return u.KtG(n.deleteProject(t.id))})),u._uU(45,"\n          "),u._UZ(46,"i",5),u._uU(47,"\n          "),u.TgZ(48,"span",6),u._uU(49),u.ALo(50,"i18n"),u.qZA(),u._uU(51,"\n        "),u.qZA(),u._uU(52,"\n      "),u.qZA(),u._uU(53,"\n    "),u.qZA()}if(2&e){const e=t.$implicit,n=u.MAs(30),i=u.oxw(3);u.xp6(4),u.Q6J("checked",i.selection.isSelected(e.id)),u.xp6(9),u.Q6J("routerLink",u.WLB(24,Zn,e.organizationId,e.id)),u.xp6(1),u.Oqu(e.name),u.xp6(5),u.Oqu(u.xi3(20,11,e.revisionDate,"medium")),u.xp6(5),u.Q6J("bitMenuTriggerFor",n)("title",u.lcZ(25,14,"options")),u.uIk("aria-label",u.lcZ(26,16,"options")),u.xp6(11),u.hij("\n          ",u.lcZ(36,18,"editProject"),"\n        "),u.xp6(3),u.Q6J("routerLink",u.WLB(27,Zn,e.organizationId,e.id)),u.xp6(3),u.hij("\n          ",u.lcZ(42,20,"viewProject"),"\n        "),u.xp6(8),u.Oqu(u.lcZ(50,22,"deleteProject"))}}function bn(e,t){if(1&e&&(u._uU(0,"\n    "),u.YNc(1,An,54,30,"tr",22),u.ALo(2,"async"),u._uU(3,"\n  ")),2&e){const e=t.$implicit;u.xp6(1),u.Q6J("ngForOf",u.lcZ(2,1,e))}}function yn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-table",13),u._uU(1,"\n  "),u.ynx(2,14),u._uU(3,"\n    "),u.TgZ(4,"tr"),u._uU(5,"\n      "),u.TgZ(6,"th",15),u._uU(7,"\n        "),u.TgZ(8,"label",16),u._uU(9,"\n          "),u.TgZ(10,"input",17),u.NdJ("change",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(t?n.toggleAll():null)})),u.qZA(),u._uU(11),u.ALo(12,"i18n"),u.qZA(),u._uU(13,"\n      "),u.qZA(),u._uU(14,"\n      "),u.TgZ(15,"th",18),u._uU(16),u.ALo(17,"i18n"),u.qZA(),u._uU(18,"\n      "),u.TgZ(19,"th",19),u._uU(20),u.ALo(21,"i18n"),u.qZA(),u._uU(22,"\n      "),u.TgZ(23,"th",15),u._uU(24,"\n        "),u._UZ(25,"button",20),u.ALo(26,"i18n"),u.ALo(27,"i18n"),u._uU(28,"\n      "),u.qZA(),u._uU(29,"\n    "),u.qZA(),u._uU(30,"\n  "),u.BQk(),u._uU(31,"\n  "),u.YNc(32,bn,4,3,"ng-template",21),u._uU(33,"\n"),u.qZA()}if(2&e){const e=u.oxw(),t=u.MAs(7);u.Q6J("dataSource",e.dataSource),u.xp6(10),u.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected()),u.xp6(1),u.hij("\n          ",u.lcZ(12,9,"all"),"\n        "),u.xp6(5),u.Oqu(u.lcZ(17,11,"name")),u.xp6(4),u.Oqu(u.lcZ(21,13,"lastEdited")),u.xp6(5),u.Q6J("bitMenuTriggerFor",t)("title",u.lcZ(26,15,"options")),u.uIk("aria-label",u.lcZ(27,17,"options"))}}class xn{constructor(){this.dataSource=new gn,this.editProjectEvent=new u.vpe,this.deleteProjectEvent=new u.vpe,this.onProjectCheckedEvent=new u.vpe,this.newProjectEvent=new u.vpe,this.destroy$=new ue.x,this.selection=new hn.Ov(!0,[]),this.selection.changed.pipe((0,he.R)(this.destroy$)).subscribe((e=>this.onProjectCheckedEvent.emit(this.selection.selected)))}get projects(){return this._projects}set projects(e){this.selection.clear(),this._projects=e,this.dataSource.data=e}set search(e){this.dataSource.filter=e}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}isAllSelected(){return this.selection.selected.length===this.projects.length}toggleAll(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.projects.map((e=>e.id)))}deleteProject(e){this.deleteProjectEvent.emit(this.projects.filter((t=>t.id==e)))}bulkDeleteProjects(){this.deleteProjectEvent.emit(this.projects.filter((e=>this.selection.isSelected(e.id))))}}xn.ɵfac=function(e){return new(e||xn)},xn.ɵcmp=u.Xpm({type:xn,selectors:[["sm-projects-list"]],inputs:{projects:"projects",search:"search"},outputs:{editProjectEvent:"editProjectEvent",deleteProjectEvent:"deleteProjectEvent",onProjectCheckedEvent:"onProjectCheckedEvent",newProjectEvent:"newProjectEvent"},decls:19,vars:6,consts:[["class","tw-items-center tw-justify-center tw-pt-64 tw-text-center",4,"ngIf"],[4,"ngIf"],[3,"dataSource",4,"ngIf"],["tableMenu",""],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-trash","tw-text-danger"],[1,"tw-text-danger"],[1,"tw-items-center","tw-justify-center","tw-pt-64","tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"],["slot","title"],["slot","description"],["type","button","slot","button","bitButton","","buttonType","secondary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus"],[3,"dataSource"],["header",""],["bitCell","",1,"tw-w-0"],[1,"!tw-mb-0","tw-flex","tw-w-fit","tw-gap-2","!tw-font-bold","!tw-text-muted"],["type","checkbox",3,"checked","indeterminate","change"],["bitCell","","bitSortable","name","default",""],["bitCell","","bitSortable","revisionDate"],["type","button","bitIconButton","bwi-ellipsis-v","buttonType","main",3,"bitMenuTriggerFor","title"],["body",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell",""],["type","checkbox",3,"checked","change"],[1,"tw-flex","tw-items-center","tw-gap-4","tw-break-all"],["aria-hidden","true",1,"bwi","bwi-collection","tw-text-muted"],["bitLink","",3,"routerLink"],["bitCell","",1,"tw-whitespace-nowrap"],["projectMenu",""],["aria-hidden","true",1,"bwi","bwi-fw","bwi-pencil"],["bitMenuItem","",3,"routerLink"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-eye"]],template:function(e,t){1&e&&(u.YNc(0,Un,4,0,"div",0),u._uU(1,"\n\n"),u.YNc(2,_n,16,9,"sm-no-items",1),u._uU(3,"\n\n"),u.YNc(4,yn,34,19,"bit-table",2),u._uU(5,"\n\n"),u.TgZ(6,"bit-menu",null,3),u._uU(8,"\n  "),u.TgZ(9,"button",4),u.NdJ("click",(function(){return t.bulkDeleteProjects()})),u._uU(10,"\n    "),u._UZ(11,"i",5),u._uU(12,"\n    "),u.TgZ(13,"span",6),u._uU(14),u.ALo(15,"i18n"),u.qZA(),u._uU(16,"\n  "),u.qZA(),u._uU(17,"\n"),u.qZA(),u._uU(18,"\n")),2&e&&(u.Q6J("ngIf",!t.projects),u.xp6(2),u.Q6J("ngIf",0==(null==t.projects?null:t.projects.length)),u.xp6(2),u.Q6J("ngIf",(null==t.projects?null:t.projects.length)>=1),u.xp6(10),u.Oqu(u.lcZ(15,4,"deleteProjects")))},dependencies:[s.sg,s.O5,c.yS,we.r,x.Q,Mt.r,Xt.M,Wt.t,en.e,Ze.a,Ae.Y,be.v,vn,Ze.f,wn,s.Ov,s.uU,H.C],encapsulation:2});var Sn=n(66385),Tn=n(55598);function In(e,t){1&e&&(u.TgZ(0,"div",8),u._uU(1,"\n  "),u._UZ(2,"i",9),u._uU(3,"\n"),u.qZA())}function qn(e,t){1&e&&(u.TgZ(0,"sm-no-items"),u._uU(1,"\n    "),u.ynx(2,10),u._uU(3),u.ALo(4,"i18n"),u.BQk(),u._uU(5,"\n    "),u.ynx(6,11),u._uU(7),u.ALo(8,"i18n"),u.BQk(),u._uU(9,"\n  "),u.qZA()),2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,2,"secretsNoItemsTitle")),u.xp6(4),u.Oqu(u.lcZ(8,4,"secretsTrashNoItemsMessage")))}function Pn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"sm-no-items"),u._uU(1,"\n    "),u.ynx(2,10),u._uU(3),u.ALo(4,"i18n"),u.BQk(),u._uU(5,"\n    "),u.ynx(6,11),u._uU(7),u.ALo(8,"i18n"),u.BQk(),u._uU(9,"\n    "),u.TgZ(10,"button",12),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.newSecretEvent.emit())})),u._uU(11,"\n      "),u._UZ(12,"i",13),u._uU(13),u.ALo(14,"i18n"),u.qZA(),u._uU(15,"\n  "),u.qZA()}2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,3,"secretsNoItemsTitle")),u.xp6(4),u.Oqu(u.lcZ(8,5,"secretsNoItemsMessage")),u.xp6(6),u.hij("\n      ",u.lcZ(14,7,"newSecret"),"\n    "))}function jn(e,t){if(1&e&&(u.ynx(0),u._uU(1,"\n  "),u.YNc(2,qn,10,6,"sm-no-items",1),u._uU(3,"\n  "),u.YNc(4,Pn,16,9,"sm-no-items",1),u._uU(5,"\n"),u.BQk()),2&e){const e=u.oxw();u.xp6(2),u.Q6J("ngIf",e.trash),u.xp6(2),u.Q6J("ngIf",!e.trash)}}function kn(e,t){if(1&e&&(u.TgZ(0,"span",34),u._uU(1),u.ALo(2,"ellipsis"),u.qZA()),2&e){const e=t.$implicit;u.Q6J("title",e.name),u.xp6(1),u.hij("\n          ",u.xi3(2,2,e.name,32),"\n        ")}}function Cn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,n=u.oxw(3);return u.KtG(n.editSecretEvent.emit(t.id))})),u._uU(1,"\n          "),u._UZ(2,"i",35),u._uU(3),u.ALo(4,"i18n"),u.qZA()}2&e&&(u.xp6(3),u.hij("\n          ",u.lcZ(4,1,"editSecret"),"\n        "))}function Ln(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,n=u.oxw(3);return u.KtG(n.restoreSecretsEvent.emit([t.id]))})),u._uU(1,"\n          "),u._UZ(2,"i",36),u._uU(3),u.ALo(4,"i18n"),u.qZA()}2&e&&(u.xp6(3),u.hij("\n          ",u.lcZ(4,1,"restoreSecret"),"\n        "))}function On(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",25),u._uU(1,"\n      "),u.TgZ(2,"td",20),u._uU(3,"\n        "),u.TgZ(4,"input",26),u.NdJ("change",(function(t){const n=u.CHM(e).$implicit,i=u.oxw(3);return u.KtG(t?i.selection.toggle(n.id):null)})),u.qZA(),u._uU(5,"\n      "),u.qZA(),u._uU(6,"\n      "),u.TgZ(7,"td",20),u._uU(8,"\n        "),u.TgZ(9,"div",27),u._uU(10,"\n          "),u._UZ(11,"i",28),u._uU(12,"\n          "),u.TgZ(13,"button",29),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,n=u.oxw(3);return u.KtG(n.editSecretEvent.emit(t.id))})),u._uU(14),u.qZA(),u._uU(15,"\n        "),u.qZA(),u._uU(16,"\n      "),u.qZA(),u._uU(17,"\n      "),u.TgZ(18,"td",20),u._uU(19,"\n        "),u.YNc(20,kn,3,5,"span",30),u._uU(21,"\n      "),u.qZA(),u._uU(22,"\n      "),u.TgZ(23,"td",31),u._uU(24),u.ALo(25,"date"),u.qZA(),u._uU(26,"\n      "),u.TgZ(27,"td",20),u._uU(28,"\n        "),u._UZ(29,"button",22),u.ALo(30,"i18n"),u.ALo(31,"i18n"),u._uU(32,"\n      "),u.qZA(),u._uU(33,"\n\n      "),u.TgZ(34,"bit-menu",null,32),u._uU(36,"\n        "),u.YNc(37,Cn,5,3,"button",4),u._uU(38,"\n        "),u.TgZ(39,"button",5),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,n=u.oxw(3);return u.KtG(n.copySecretNameEvent.emit(t.name))})),u._uU(40,"\n          "),u._UZ(41,"i",33),u._uU(42),u.ALo(43,"i18n"),u.qZA(),u._uU(44,"\n        "),u.TgZ(45,"button",5),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,n=u.oxw(3);return u.KtG(n.copySecretValueEvent.emit(t.id))})),u._uU(46,"\n          "),u._UZ(47,"i",33),u._uU(48),u.ALo(49,"i18n"),u.qZA(),u._uU(50,"\n        "),u.YNc(51,Ln,5,3,"button",4),u._uU(52,"\n        "),u.TgZ(53,"button",5),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,n=u.oxw(3);return u.KtG(n.deleteSecretsEvent.emit([t.id]))})),u._uU(54,"\n          "),u._UZ(55,"i",6),u._uU(56,"\n          "),u.TgZ(57,"span",7),u._uU(58),u.ALo(59,"i18n"),u.qZA(),u._uU(60,"\n        "),u.qZA(),u._uU(61,"\n      "),u.qZA(),u._uU(62,"\n    "),u.qZA()}if(2&e){const e=t.$implicit,n=u.MAs(35),i=u.oxw(3);u.xp6(4),u.Q6J("checked",i.selection.isSelected(e.id)),u.xp6(10),u.hij("\n            ",e.name,"\n          "),u.xp6(6),u.Q6J("ngForOf",e.projects),u.xp6(4),u.Oqu(u.xi3(25,12,e.revisionDate,"medium")),u.xp6(5),u.Q6J("title",u.lcZ(30,15,"options"))("bitMenuTriggerFor",n),u.uIk("aria-label",u.lcZ(31,17,"options")),u.xp6(8),u.Q6J("ngIf",!i.trash),u.xp6(5),u.hij("\n          ",u.lcZ(43,19,"copySecretName"),"\n        "),u.xp6(6),u.hij("\n          ",u.lcZ(49,21,"copySecretValue"),"\n        "),u.xp6(3),u.Q6J("ngIf",i.trash),u.xp6(7),u.Oqu(u.lcZ(59,23,"deleteSecret"))}}function Jn(e,t){if(1&e&&(u._uU(0,"\n    "),u.YNc(1,On,63,25,"tr",24),u.ALo(2,"async"),u._uU(3,"\n  ")),2&e){const e=t.$implicit;u.xp6(1),u.Q6J("ngForOf",u.lcZ(2,1,e))}}function Nn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-table",14),u._uU(1,"\n  "),u.ynx(2,15),u._uU(3,"\n    "),u.TgZ(4,"tr"),u._uU(5,"\n      "),u.TgZ(6,"th",16),u._uU(7,"\n        "),u.TgZ(8,"label",17),u._uU(9,"\n          "),u.TgZ(10,"input",18),u.NdJ("change",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(t?n.toggleAll():null)})),u.qZA(),u._uU(11),u.ALo(12,"i18n"),u.qZA(),u._uU(13,"\n      "),u.qZA(),u._uU(14,"\n      "),u.TgZ(15,"th",19),u._uU(16),u.ALo(17,"i18n"),u.qZA(),u._uU(18,"\n      "),u.TgZ(19,"th",20),u._uU(20),u.ALo(21,"i18n"),u.qZA(),u._uU(22,"\n      "),u.TgZ(23,"th",21),u._uU(24),u.ALo(25,"i18n"),u.qZA(),u._uU(26,"\n      "),u.TgZ(27,"th",16),u._uU(28,"\n        "),u._UZ(29,"button",22),u.ALo(30,"i18n"),u.ALo(31,"i18n"),u._uU(32,"\n      "),u.qZA(),u._uU(33,"\n    "),u.qZA(),u._uU(34,"\n  "),u.BQk(),u._uU(35,"\n  "),u.YNc(36,Jn,4,3,"ng-template",23),u._uU(37,"\n"),u.qZA()}if(2&e){const e=u.oxw(),t=u.MAs(7);u.Q6J("dataSource",e.dataSource),u.xp6(10),u.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected()),u.xp6(1),u.hij("\n          ",u.lcZ(12,10,"all"),"\n        "),u.xp6(5),u.Oqu(u.lcZ(17,12,"name")),u.xp6(4),u.Oqu(u.lcZ(21,14,"project")),u.xp6(4),u.Oqu(u.lcZ(25,16,"lastEdited")),u.xp6(5),u.Q6J("title",u.lcZ(30,18,"options"))("bitMenuTriggerFor",t),u.uIk("aria-label",u.lcZ(31,20,"options"))}}function Dn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.bulkRestoreSecrets())})),u._uU(1,"\n    "),u._UZ(2,"i",36),u._uU(3,"\n    "),u.TgZ(4,"span"),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n  "),u.qZA()}2&e&&(u.xp6(5),u.Oqu(u.lcZ(6,1,"restoreSelected")))}class zn{constructor(){this.dataSource=new gn,this.editSecretEvent=new u.vpe,this.copySecretNameEvent=new u.vpe,this.copySecretValueEvent=new u.vpe,this.onSecretCheckedEvent=new u.vpe,this.deleteSecretsEvent=new u.vpe,this.newSecretEvent=new u.vpe,this.restoreSecretsEvent=new u.vpe,this.destroy$=new ue.x,this.selection=new hn.Ov(!0,[]),this.selection.changed.pipe((0,he.R)(this.destroy$)).subscribe((e=>this.onSecretCheckedEvent.emit(this.selection.selected)))}get secrets(){return this._secrets}set secrets(e){this.selection.clear(),this._secrets=e,this.dataSource.data=e}set search(e){this.dataSource.filter=e}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}isAllSelected(){return this.selection.selected.length===this.secrets.length}toggleAll(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.secrets.map((e=>e.id)))}bulkDeleteSecrets(){this.selection.selected.length>=1&&this.deleteSecretsEvent.emit(this.selection.selected)}bulkRestoreSecrets(){this.selection.selected.length>=1&&this.restoreSecretsEvent.emit(this.selection.selected)}}zn.ɵfac=function(e){return new(e||zn)},zn.ɵcmp=u.Xpm({type:zn,selectors:[["sm-secrets-list"]],inputs:{secrets:"secrets",search:"search",trash:"trash"},outputs:{editSecretEvent:"editSecretEvent",copySecretNameEvent:"copySecretNameEvent",copySecretValueEvent:"copySecretValueEvent",onSecretCheckedEvent:"onSecretCheckedEvent",deleteSecretsEvent:"deleteSecretsEvent",newSecretEvent:"newSecretEvent",restoreSecretsEvent:"restoreSecretsEvent"},decls:21,vars:7,consts:[["class","tw-items-center tw-justify-center tw-pt-64 tw-text-center",4,"ngIf"],[4,"ngIf"],[3,"dataSource",4,"ngIf"],["tableMenu",""],["type","button","bitMenuItem","",3,"click",4,"ngIf"],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-trash","tw-text-danger"],[1,"tw-text-danger"],[1,"tw-items-center","tw-justify-center","tw-pt-64","tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"],["slot","title"],["slot","description"],["type","button","slot","button","bitButton","","buttonType","secondary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus"],[3,"dataSource"],["header",""],["bitCell","",1,"tw-w-0"],[1,"!tw-mb-0","tw-flex","tw-w-fit","tw-gap-2","!tw-font-bold","!tw-text-muted"],["type","checkbox",3,"checked","indeterminate","change"],["bitCell","","bitSortable","name","default",""],["bitCell",""],["bitCell","","bitSortable","revisionDate"],["type","button","bitIconButton","bwi-ellipsis-v","buttonType","main",3,"title","bitMenuTriggerFor"],["body",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["type","checkbox",3,"checked","change"],[1,"tw-flex","tw-items-center","tw-gap-4","tw-break-all"],["aria-hidden","true",1,"bwi","bwi-key","tw-text-muted"],["type","button","bitLink","",3,"click"],["bitBadge","","badgeType","secondary","class","tw-ml-1",3,"title",4,"ngFor","ngForOf"],["bitCell","",1,"tw-whitespace-nowrap"],["secretMenu",""],["aria-hidden","true",1,"bwi","bwi-fw","bwi-clone"],["bitBadge","","badgeType","secondary",1,"tw-ml-1",3,"title"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-pencil"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-refresh"]],template:function(e,t){1&e&&(u.YNc(0,In,4,0,"div",0),u._uU(1,"\n\n"),u.YNc(2,jn,6,2,"ng-container",1),u._uU(3,"\n\n"),u.YNc(4,Nn,38,22,"bit-table",2),u._uU(5,"\n\n"),u.TgZ(6,"bit-menu",null,3),u._uU(8,"\n  "),u.YNc(9,Dn,8,3,"button",4),u._uU(10,"\n  "),u.TgZ(11,"button",5),u.NdJ("click",(function(){return t.bulkDeleteSecrets()})),u._uU(12,"\n    "),u._UZ(13,"i",6),u._uU(14,"\n    "),u.TgZ(15,"span",7),u._uU(16),u.ALo(17,"i18n"),u.qZA(),u._uU(18,"\n  "),u.qZA(),u._uU(19,"\n"),u.qZA(),u._uU(20,"\n")),2&e&&(u.Q6J("ngIf",!t.secrets),u.xp6(2),u.Q6J("ngIf",0==(null==t.secrets?null:t.secrets.length)),u.xp6(2),u.Q6J("ngIf",(null==t.secrets?null:t.secrets.length)>=1),u.xp6(5),u.Q6J("ngIf",t.trash),u.xp6(7),u.Oqu(u.lcZ(17,5,"deleteSecrets")))},dependencies:[s.sg,s.O5,Sn.l,we.r,x.Q,Mt._,Xt.M,Wt.t,en.e,Ze.a,Ae.Y,be.v,vn,Ze.f,wn,s.Ov,s.uU,Tn.p,H.C],encapsulation:2});const Yn=function(e){return{"tw-text-primary-700 tw-line-through tw-decoration-primary-700 tw-opacity-50":e}};function En(e,t){if(1&e&&(u._uU(0,"\n  "),u._UZ(1,"i",5),u.TgZ(2,"span",6),u._uU(3),u._UZ(4,"i",7),u.qZA(),u._uU(5,"\n")),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngClass",e.completed?"bwi-check tw-text-success":e.icon),u.xp6(1),u.Q6J("ngClass",u.VKq(3,Yn,e.completed)),u.xp6(1),u.Oqu(e.title)}}function Qn(e,t){1&e&&u.GkF(0)}function Mn(e,t){if(1&e&&(u.TgZ(0,"a",8),u._uU(1,"\n    "),u.YNc(2,Qn,1,0,"ng-container",9),u._uU(3,"\n  "),u.qZA()),2&e){const e=u.oxw(),t=u.MAs(1);u.Q6J("routerLink",e.route),u.xp6(2),u.Q6J("ngTemplateOutlet",t)}}function Gn(e,t){1&e&&u.GkF(0)}function Rn(e,t){if(1&e&&(u.TgZ(0,"button",10),u._uU(1,"\n    "),u.YNc(2,Gn,1,0,"ng-container",9),u._uU(3,"\n  "),u.qZA()),2&e){u.oxw();const e=u.MAs(1);u.xp6(2),u.Q6J("ngTemplateOutlet",e)}}const Fn=function(e){return{"tw-opacity-50":e}};class Bn{constructor(){this.completed=!1,this.icon="bwi-info-circle"}}function $n(e,t){if(1&e&&(u.TgZ(0,"div",3),u._uU(1,"\n      "),u._uU(2,"\n      "),u.TgZ(3,"div",4),u._uU(4," "),u.qZA(),u._uU(5,"\n      "),u.TgZ(6,"div",5),u._uU(7),u.qZA(),u._uU(8,"\n    "),u.qZA()),2&e){const e=u.oxw();u.xp6(7),u.Oqu(e.textContent)}}Bn.ɵfac=function(e){return new(e||Bn)},Bn.ɵcmp=u.Xpm({type:Bn,selectors:[["sm-onboarding-task"]],hostAttrs:[1,"tw-max-w-max"],inputs:{completed:"completed",icon:"icon",title:"title",route:"route"},ngContentSelectors:["*"],decls:15,vars:5,consts:[["content",""],[1,"tw-list-none"],["bitLink","",3,"routerLink",4,"ngIf"],["type","button","bitLink","",4,"ngIf"],[1,"tw-ml-8","tw-mt-1","tw-text-sm",3,"ngClass"],[1,"bwi","bwi-fw","!tw-mr-4",3,"ngClass"],[3,"ngClass"],[1,"bwi","bwi-angle-right","tw-ml-1"],["bitLink","",3,"routerLink"],[4,"ngTemplateOutlet"],["type","button","bitLink",""]],template:function(e,t){1&e&&(u.F$t(),u.YNc(0,En,6,5,"ng-template",null,0,u.W1O),u._uU(2,"\n\n"),u.TgZ(3,"li",1),u._uU(4,"\n  "),u.YNc(5,Mn,4,2,"a",2),u._uU(6,"\n  "),u.YNc(7,Rn,4,1,"button",3),u._uU(8,"\n  "),u.TgZ(9,"div",4),u._uU(10,"\n    "),u.Hsn(11),u._uU(12,"\n  "),u.qZA(),u._uU(13,"\n"),u.qZA(),u._uU(14,"\n")),2&e&&(u.xp6(5),u.Q6J("ngIf",t.route),u.xp6(2),u.Q6J("ngIf",!t.route),u.xp6(2),u.Q6J("ngClass",u.VKq(3,Fn,t.completed)))},dependencies:[s.mk,s.O5,s.tP,c.yS,Mt.r,Mt._],encapsulation:2});const Vn=function(e){return{width:e}},Kn={small:["tw-h-1"],default:["tw-h-4"],large:["tw-h-6"]},Hn={danger:["tw-bg-danger-500"],primary:["tw-bg-primary-500"],success:["tw-bg-success-500"],warning:["tw-bg-warning-500"]};class Xn{constructor(){this.barWidth=0,this.bgColor="primary",this.showText=!0,this.size="default"}get displayText(){return this.showText&&"small"!==this.size}get outerBarStyles(){return["tw-overflow-hidden","tw-rounded","tw-bg-secondary-100"].concat(Kn[this.size])}get innerBarStyles(){return["tw-flex","tw-justify-center","tw-items-center","tw-whitespace-nowrap","tw-text-xs","tw-font-semibold","tw-text-contrast","tw-transition-all"].concat(Kn[this.size]).concat(Hn[this.bgColor])}get textContent(){return this.text||this.barWidth+"%"}}function Wn(e,t){if(1&e&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"i18n"),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.hij("\n        ",u.Dn7(2,1,"complete",e.amountCompleted,e.tasks.length),"\n      ")}}Xn.ɵfac=function(e){return new(e||Xn)},Xn.ɵcmp=u.Xpm({type:Xn,selectors:[["bit-progress"]],inputs:{barWidth:"barWidth",bgColor:"bgColor",showText:"showText",size:"size",text:"text"},decls:8,vars:7,consts:[[3,"ngClass"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",3,"ngClass","ngStyle"],["class","tw-flex tw-h-full tw-flex-wrap tw-items-center tw-overflow-hidden",4,"ngIf"],[1,"tw-flex","tw-h-full","tw-flex-wrap","tw-items-center","tw-overflow-hidden"],[1,"tw-h-full"],[1,"tw-pr-1"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._uU(1,"\n  "),u.TgZ(2,"div",1),u._uU(3,"\n    "),u.YNc(4,$n,9,1,"div",2),u._uU(5,"\n  "),u.qZA(),u._uU(6,"\n"),u.qZA(),u._uU(7,"\n")),2&e&&(u.Q6J("ngClass",t.outerBarStyles),u.xp6(2),u.Q6J("ngClass",t.innerBarStyles)("ngStyle",u.VKq(5,Vn,t.barWidth+"%")),u.uIk("aria-valuenow",t.barWidth),u.xp6(2),u.Q6J("ngIf",t.displayText))},dependencies:[s.mk,s.O5,s.PC],encapsulation:2});const ei=function(e){return{"tw-invisible":e}};function ti(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"details",2,3),u.NdJ("toggle",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.toggle())})),u._uU(2,"\n  "),u.TgZ(3,"summary",4),u._uU(4,"\n    "),u.TgZ(5,"div",5),u._uU(6,"\n      "),u._UZ(7,"i",6),u._uU(8,"\n      "),u.TgZ(9,"div",7),u._uU(10),u.qZA(),u._uU(11,"\n      "),u._UZ(12,"bit-progress",8),u._uU(13,"\n      "),u.YNc(14,Wn,3,5,"span",9),u._uU(15,"\n      "),u._UZ(16,"i",10),u._uU(17,"\n    "),u.qZA(),u._uU(18,"\n  "),u.qZA(),u._uU(19,"\n  "),u.TgZ(20,"ul",11),u._uU(21,"\n    "),u.Hsn(22),u._uU(23,"\n  "),u.qZA(),u._uU(24,"\n  "),u.TgZ(25,"div",12),u._uU(26,"\n    "),u.TgZ(27,"button",13),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.dismiss())})),u._uU(28,"\n      Dismiss\n    "),u.qZA(),u._uU(29,"\n  "),u.qZA(),u._uU(30,"\n"),u.qZA()}if(2&e){const e=u.oxw(),t=u.MAs(3);u.xp6(10),u.Oqu(e.title),u.xp6(2),u.Q6J("showText",!1)("barWidth",e.barWidth),u.xp6(2),u.Q6J("ngIf",e.tasks.length>0)("ngIfElse",t),u.xp6(2),u.Q6J("ngClass",e.open?"bwi-angle-down":"bwi-angle-up"),u.xp6(11),u.Q6J("ngClass",u.VKq(7,ei,!e.isComplete))}}function ni(e,t){1&e&&(u._uU(0,"\n  "),u._UZ(1,"i",14),u._uU(2,"\n"))}class ii{constructor(){this.open=!0,this.visible=!1}ngAfterContentInit(){this.visible=!this.isComplete}get amountCompleted(){return this.tasks.filter((e=>e.completed)).length}get barWidth(){return 0===this.tasks.length?0:this.amountCompleted/this.tasks.length*100}get isComplete(){return this.tasks.length>0&&this.tasks.length===this.amountCompleted}toggle(){this.open=!this.open}dismiss(){this.visible=!1}}function oi(e,t){if(1&e&&(u.TgZ(0,"div",3),u._uU(1,"\n    "),u.Hsn(2,1),u._uU(3,"\n  "),u.qZA()),2&e){const e=u.oxw();u.uIk("id",e.contentId)}}ii.ɵfac=function(e){return new(e||ii)},ii.ɵcmp=u.Xpm({type:ii,selectors:[["sm-onboarding"]],contentQueries:function(e,t,n){if(1&e&&u.Suo(n,Bn,4),2&e){let e;u.iGM(e=u.CRH())&&(t.tasks=e)}},inputs:{title:"title"},ngContentSelectors:["*"],decls:5,vars:1,consts:[["class","tw-rounded-sm tw-bg-background-alt tw-text-main","open","",3,"toggle",4,"ngIf"],["spinner",""],["open","",1,"tw-rounded-sm","tw-bg-background-alt","tw-text-main",3,"toggle"],["details",""],[1,"tw-list-none","tw-p-2","tw-px-4"],[1,"tw-flex","tw-select-none","tw-items-center","tw-gap-4"],["aria-hidden","true",1,"bwi","bwi-dashboard","tw-text-3xl","tw-text-primary-500"],[1,"tw-text-lg"],[1,"tw-flex-1",3,"showText","barWidth"],[4,"ngIf","ngIfElse"],["aria-hidden","true",1,"bwi","tw-my-auto",3,"ngClass"],[1,"tw-ml-6","tw-mb-0","tw-flex","tw-flex-col","tw-gap-4"],[1,"tw-p-4","tw-pt-0"],["bitLink","","type","button",1,"tw-ml-auto","tw-block",3,"ngClass","click"],[1,"bwi","bwi-spinner","bwi-spin"]],template:function(e,t){1&e&&(u.F$t(),u.YNc(0,ti,31,9,"details",0),u._uU(1,"\n\n"),u.YNc(2,ni,3,0,"ng-template",null,1,u.W1O),u._uU(4,"\n")),2&e&&u.Q6J("ngIf",t.visible)},dependencies:[s.mk,s.O5,Mt._,Xn,H.C],encapsulation:2});const si=[[["","slot","summary"]],"*"];class ci{constructor(){this.open=!0,this.contentId=Math.random().toString(36).substring(2)}toggle(){this.open=!this.open}}ci.ɵfac=function(e){return new(e||ci)},ci.ɵcmp=u.Xpm({type:ci,selectors:[["sm-section"]],inputs:{open:"open"},ngContentSelectors:["[slot=summary]","*"],decls:13,vars:4,consts:[[1,"tw-flex","tw-max-w-min","tw-items-center","tw-gap-2"],["type","button",3,"bitIconButton","click"],["class","tw-mt-4",4,"ngIf"],[1,"tw-mt-4"]],template:function(e,t){1&e&&(u.F$t(si),u.TgZ(0,"section"),u._uU(1,"\n  "),u.TgZ(2,"header",0),u._uU(3,"\n    "),u.TgZ(4,"div"),u.Hsn(5),u.qZA(),u._uU(6,"\n    "),u.TgZ(7,"button",1),u.NdJ("click",(function(){return t.toggle()})),u.qZA(),u._uU(8,"\n  "),u.qZA(),u._uU(9,"\n  "),u.YNc(10,oi,4,1,"div",2),u._uU(11,"\n"),u.qZA(),u._uU(12,"\n")),2&e&&(u.xp6(7),u.Q6J("bitIconButton",t.open?"bwi-angle-up":"bwi-angle-down"),u.uIk("aria-expanded",t.open)("aria-controls",t.contentId),u.xp6(3),u.Q6J("ngIf",t.open))},dependencies:[s.O5,x.Q],encapsulation:2});var ri=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};const ai=function(){return["settings","import"]};function ui(e,t){if(1&e&&(u._UZ(0,"sm-onboarding-task",14),u.ALo(1,"i18n")),2&e){const e=u.oxw().ngIf;u.Q6J("title",u.lcZ(1,3,"importSecrets"))("route",u.DdM(5,ai))("completed",e.tasks.importSecrets)}}function li(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"sm-onboarding-task",15),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.openNewProjectDialog())})),u.ALo(1,"i18n"),u.qZA()}if(2&e){const e=u.oxw().ngIf;u.Q6J("title",u.lcZ(1,2,"createProject"))("completed",e.tasks.createProject)}}function di(e,t){if(1&e&&(u.TgZ(0,"div",16),u._uU(1),u.ALo(2,"i18n"),u.TgZ(3,"a",17),u._uU(4),u.ALo(5,"i18n"),u.qZA(),u._uU(6,"\n      "),u.qZA()),2&e){const e=u.oxw().ngIf;u.xp6(1),u.hij("\n        ",u.Dn7(2,2,"showingPortionOfTotal",e.latestProjects.length,e.allProjects.length),"\n        "),u.xp6(3),u.Oqu(u.lcZ(5,6,"viewAll"))}}function pi(e,t){if(1&e&&(u.TgZ(0,"div",16),u._uU(1),u.ALo(2,"i18n"),u.TgZ(3,"a",18),u._uU(4),u.ALo(5,"i18n"),u.qZA(),u._uU(6,"\n      "),u.qZA()),2&e){const e=u.oxw().ngIf;u.xp6(1),u.hij("\n        ",u.Dn7(2,2,"showingPortionOfTotal",e.latestSecrets.length,e.allSecrets.length),"\n        "),u.xp6(3),u.Oqu(u.lcZ(5,6,"viewAll"))}}function hi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u._uU(1,"\n  "),u.TgZ(2,"sm-onboarding",0),u.ALo(3,"i18n"),u._uU(4,"\n    "),u.TgZ(5,"sm-onboarding-task",3),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.openServiceAccountDialog())})),u.ALo(6,"i18n"),u._uU(7,"\n      "),u.TgZ(8,"span",4),u._uU(9),u.ALo(10,"i18n"),u.TgZ(11,"a",5),u._uU(12),u.ALo(13,"i18n"),u.qZA(),u._uU(14,"\n      "),u.qZA(),u._uU(15,"\n    "),u.qZA(),u._uU(16,"\n    "),u.YNc(17,ui,2,6,"sm-onboarding-task",6),u._uU(18,"\n    "),u.TgZ(19,"sm-onboarding-task",7),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.openSecretDialog())})),u.ALo(20,"i18n"),u.qZA(),u._uU(21,"\n    "),u.YNc(22,li,2,4,"sm-onboarding-task",8),u._uU(23,"\n  "),u.qZA(),u._uU(24,"\n\n  "),u.TgZ(25,"div",9),u._uU(26,"\n    "),u.TgZ(27,"sm-section"),u._uU(28,"\n      "),u.TgZ(29,"h2",10),u._uU(30),u.ALo(31,"i18n"),u.qZA(),u._uU(32,"\n      "),u.TgZ(33,"sm-projects-list",11),u.NdJ("newProjectEvent",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.openNewProjectDialog())}))("editProjectEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.openEditProject(t))}))("deleteProjectEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.openDeleteProjectDialog(t))})),u.qZA(),u._uU(34,"\n      "),u.YNc(35,di,7,8,"div",12),u._uU(36,"\n    "),u.qZA(),u._uU(37,"\n    "),u.TgZ(38,"sm-section"),u._uU(39,"\n      "),u.TgZ(40,"h2",10),u._uU(41),u.ALo(42,"i18n"),u.qZA(),u._uU(43,"\n      "),u.TgZ(44,"sm-secrets-list",13),u.NdJ("deleteSecretsEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.openDeleteSecret(t))}))("newSecretEvent",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.openNewSecretDialog())}))("editSecretEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.openEditSecret(t))}))("copySecretNameEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.copySecretName(t))}))("copySecretValueEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.copySecretValue(t))})),u.qZA(),u._uU(45,"\n      "),u.YNc(46,pi,7,8,"div",12),u._uU(47,"\n    "),u.qZA(),u._uU(48,"\n  "),u.qZA(),u._uU(49,"\n"),u.qZA()}if(2&e){const e=t.ngIf,n=u.oxw();u.xp6(2),u.Q6J("title",u.lcZ(3,15,"getStarted")),u.xp6(3),u.Q6J("title",u.lcZ(6,17,"createServiceAccount"))("completed",e.tasks.createServiceAccount),u.xp6(4),u.hij("\n        ",u.lcZ(10,19,"downloadThe")," "),u.xp6(3),u.Oqu(u.lcZ(13,21,"smCLI")),u.xp6(5),u.Q6J("ngIf",n.userIsAdmin),u.xp6(2),u.Q6J("title",u.lcZ(20,23,"createSecret"))("completed",e.tasks.createSecret),u.xp6(3),u.Q6J("ngIf",n.userIsAdmin),u.xp6(8),u.Oqu(u.lcZ(31,25,"projects")),u.xp6(3),u.Q6J("projects",e.latestProjects),u.xp6(2),u.Q6J("ngIf",e.allProjects.length>0),u.xp6(6),u.Oqu(u.lcZ(42,27,"secrets")),u.xp6(3),u.Q6J("secrets",e.latestSecrets),u.xp6(2),u.Q6J("ngIf",e.allSecrets.length>0)}}function gi(e,t){1&e&&(u._uU(0,"\n  "),u.TgZ(1,"div",19),u._uU(2,"\n    "),u._UZ(3,"i",20),u._uU(4,"\n  "),u.qZA(),u._uU(5,"\n"))}class vi{constructor(e,t,n,i,o,s,c,r,a){this.route=e,this.router=t,this.projectService=n,this.secretService=i,this.serviceAccountService=o,this.dialogService=s,this.organizationService=c,this.platformUtilsService=r,this.i18nService=a,this.destroy$=new ue.x,this.tableSize=10,this.prevShouldReuseRoute=this.router.routeReuseStrategy.shouldReuseRoute,this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){const e=this.route.params.pipe((0,y.U)((e=>e.organizationId)),(0,le.e)((function(e,i){var o=new Set;e.subscribe((0,de.x)(i,(function(e){var n=t?t(e):e;o.has(n)||(o.add(n),i.next(e))}))),null==n||n.subscribe((0,de.x)(i,(function(){return o.clear()}),pe.Z))})));var t,n;e.pipe((0,y.U)((e=>this.organizationService.get(e))),(0,he.R)(this.destroy$)).subscribe((e=>{this.organizationId=e.id,this.organizationName=e.name,this.userIsAdmin=e.isAdmin}));const i=(0,$.a)([e,this.projectService.project$.pipe((0,ge.O)(null))]).pipe((0,ve.w)((([e])=>this.projectService.getProjects(e)))),o=(0,$.a)([e,this.secretService.secret$.pipe((0,ge.O)(null))]).pipe((0,ve.w)((([e])=>this.secretService.getSecrets(e)))),s=(0,$.a)([e,this.serviceAccountService.serviceAccount$.pipe((0,ge.O)(null))]).pipe((0,ve.w)((([e])=>this.serviceAccountService.getServiceAccounts(e))));this.view$=(0,$.a)([i,o,s]).pipe((0,y.U)((([e,t,n])=>({latestProjects:this.getRecentItems(e,this.tableSize),latestSecrets:this.getRecentItems(t,this.tableSize),allProjects:e,allSecrets:t,tasks:{importSecrets:t.length>0,createSecret:t.length>0,createProject:e.length>0,createServiceAccount:n.length>0}}))))}ngOnDestroy(){this.router.routeReuseStrategy.shouldReuseRoute=this.prevShouldReuseRoute,this.destroy$.next(),this.destroy$.complete()}getRecentItems(e,t){return e.sort(((e,t)=>new Date(t.revisionDate).getTime()-new Date(e.revisionDate).getTime())).slice(0,t)}openEditProject(e){this.dialogService.open(ot,{data:{organizationId:this.organizationId,operation:_t.Edit,projectId:e}})}openNewProjectDialog(){this.dialogService.open(ot,{data:{organizationId:this.organizationId,operation:_t.Add}})}openServiceAccountDialog(){this.dialogService.open(Qt,{data:{organizationId:this.organizationId}})}openDeleteProjectDialog(e){this.dialogService.open(We,{data:{projects:e}})}openSecretDialog(){this.dialogService.open(kt,{data:{organizationId:this.organizationId,operation:_t.Add}})}openEditSecret(e){this.dialogService.open(kt,{data:{organizationId:this.organizationId,operation:_t.Edit,secretId:e}})}openDeleteSecret(e){this.dialogService.open(Ut,{data:{secretIds:e}})}openNewSecretDialog(){this.dialogService.open(kt,{data:{organizationId:this.organizationId,operation:_t.Add}})}copySecretName(e){this.platformUtilsService.copyToClipboard(e),this.platformUtilsService.showToast("success",null,this.i18nService.t("valueCopied",this.i18nService.t("name")))}copySecretValue(e){return ri(this,void 0,void 0,(function*(){const t=yield this.secretService.getBySecretId(e);this.platformUtilsService.copyToClipboard(t.value),this.platformUtilsService.showToast("success",null,this.i18nService.t("valueCopied",this.i18nService.t("value")))}))}}vi.ɵfac=function(e){return new(e||vi)(u.Y36(c.gz),u.Y36(c.F0),u.Y36(Ye),u.Y36(gt),u.Y36(Nt),u.Y36(Me.x),u.Y36(V.Mn),u.Y36(Qe.P),u.Y36(Ee.D))},vi.ɵcmp=u.Xpm({type:vi,selectors:[["sm-overview"]],decls:11,vars:5,consts:[[3,"title"],[4,"ngIf","ngIfElse"],["spinner",""],["icon","bwi-cli",3,"title","completed","click"],[1,"tw-pl-1"],["bitLink","","routerLink",""],["icon","bwi-download",3,"title","route","completed",4,"ngIf"],["icon","bwi-key",3,"title","completed","click"],["icon","bwi-collection",3,"title","completed","click",4,"ngIf"],[1,"tw-mt-6","tw-flex","tw-flex-col","tw-gap-6"],["slot","summary","bitTypography","h2","noMargin","",1,"tw-mb-0"],[3,"projects","newProjectEvent","editProjectEvent","deleteProjectEvent"],["class","tw-ml-auto tw-mt-4 tw-max-w-max",4,"ngIf"],["baseRoute","secrets",3,"secrets","deleteSecretsEvent","newSecretEvent","editSecretEvent","copySecretNameEvent","copySecretValueEvent"],["icon","bwi-download",3,"title","route","completed"],["icon","bwi-collection",3,"title","completed","click"],[1,"tw-ml-auto","tw-mt-4","tw-max-w-max"],["bitLink","","routerLink","projects",1,"tw-ml-2"],["bitLink","","routerLink","secrets",1,"tw-ml-2"],[1,"tw-items-center","tw-justify-center","tw-pt-64","tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"]],template:function(e,t){if(1&e&&(u.TgZ(0,"sm-header",0),u._uU(1,"\n  "),u._UZ(2,"sm-new-menu"),u._uU(3,"\n"),u.qZA(),u._uU(4,"\n\n"),u.YNc(5,hi,50,29,"div",1),u.ALo(6,"async"),u._uU(7,"\n\n"),u.YNc(8,gi,6,0,"ng-template",null,2,u.W1O),u._uU(10,"\n")),2&e){const e=u.MAs(9);u.Q6J("title",t.organizationName),u.xp6(5),u.Q6J("ngIf",u.lcZ(6,3,t.view$))("ngIfElse",e)}},dependencies:[s.O5,c.yS,Mt.r,Bt,dn,pn,xn,zn,ii,Bn,ci,s.Ov,H.C],encapsulation:2});const fi=[{path:"",component:vi}];class mi{}mi.ɵfac=function(e){return new(e||mi)},mi.ɵmod=u.oAB({type:mi}),mi.ɵinj=u.cJS({imports:[c.Bz.forChild(fi),c.Bz]});class wi{}wi.ɵfac=function(e){return new(e||wi)},wi.ɵmod=u.oAB({type:wi}),wi.ɵinj=u.cJS({imports:[f,mi,ae]});var Ui=n(40857);class _i{}class Zi extends _i{}class Ai extends _i{}class bi extends _i{}class yi extends _i{}class xi extends _i{}class Si{}class Ti{}class Ii{}class qi{}class Pi extends Ce.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.read=this.getResponseProperty("Read"),this.write=this.getResponseProperty("Write"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate")}}class ji extends Pi{constructor(e){super(e),this.organizationUserId=this.getResponseProperty("OrganizationUserId"),this.organizationUserName=this.getResponseProperty("OrganizationUserName"),this.grantedProjectId=this.getResponseProperty("GrantedProjectId")}}class ki extends Pi{constructor(e){super(e),this.organizationUserId=this.getResponseProperty("OrganizationUserId"),this.organizationUserName=this.getResponseProperty("OrganizationUserName"),this.grantedServiceAccountId=this.getResponseProperty("GrantedServiceAccountId")}}class Ci extends Pi{constructor(e){super(e),this.groupId=this.getResponseProperty("GroupId"),this.groupName=this.getResponseProperty("GroupName"),this.grantedProjectId=this.getResponseProperty("GrantedProjectId")}}class Li extends Pi{constructor(e){super(e),this.groupId=this.getResponseProperty("GroupId"),this.groupName=this.getResponseProperty("GroupName"),this.grantedServiceAccountId=this.getResponseProperty("GrantedServiceAccountId")}}class Oi extends Pi{constructor(e){super(e),this.serviceAccountId=this.getResponseProperty("ServiceAccountId"),this.serviceAccountName=this.getResponseProperty("ServiceAccountName"),this.grantedProjectId=this.getResponseProperty("GrantedProjectId"),this.grantedProjectName=this.getResponseProperty("GrantedProjectName")}}class Ji extends Ce.c{constructor(e){super(e);const t=this.getResponseProperty("UserAccessPolicies");this.userAccessPolicies=t.map((e=>new ji(e)));const n=this.getResponseProperty("GroupAccessPolicies");this.groupAccessPolicies=n.map((e=>new Ci(e)));const i=this.getResponseProperty("ServiceAccountAccessPolicies");this.serviceAccountAccessPolicies=i.map((e=>new Oi(e)))}}class Ni extends Ce.c{constructor(e){super(e);const t=this.getResponseProperty("UserAccessPolicies");this.userAccessPolicies=t.map((e=>new ki(e)));const n=this.getResponseProperty("GroupAccessPolicies");this.groupAccessPolicies=n.map((e=>new Li(e)))}}class Di{}class zi{}class Yi{}class Ei extends Ce.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name"),this.type=this.getResponseProperty("Type"),this.email=this.getResponseProperty("Email")}}var Qi=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class Mi{constructor(e,t,n){this.cryptoService=e,this.apiService=t,this.encryptService=n,this._projectAccessPolicyChanges$=new ue.x,this._serviceAccountAccessPolicyChanges$=new ue.x,this._serviceAccountGrantedPolicyChanges$=new ue.x,this.projectAccessPolicyChanges$=this._projectAccessPolicyChanges$.asObservable(),this.serviceAccountAccessPolicyChanges$=this._serviceAccountAccessPolicyChanges$.asObservable(),this.serviceAccountGrantedPolicyChanges$=this._serviceAccountGrantedPolicyChanges$.asObservable()}getGrantedPolicies(e,t){return Qi(this,void 0,void 0,(function*(){const n=yield this.apiService.send("GET","/service-accounts/"+e+"/granted-policies",null,!0,!0),i=new qe.L(n,Oi);return yield this.createServiceAccountProjectAccessPolicyViews(i.data,t)}))}createGrantedPolicies(e,t,n){return Qi(this,void 0,void 0,(function*(){const i=this.getGrantedPoliciesCreateRequest(n),o=yield this.apiService.send("POST","/service-accounts/"+t+"/granted-policies",i,!0,!0),s=new qe.L(o,Oi),c=yield this.createServiceAccountProjectAccessPolicyViews(s.data,e);return this._serviceAccountGrantedPolicyChanges$.next(c),c}))}getProjectAccessPolicies(e,t){return Qi(this,void 0,void 0,(function*(){const n=yield this.apiService.send("GET","/projects/"+t+"/access-policies",null,!0,!0),i=new Ji(n);return yield this.createProjectAccessPoliciesView(e,i)}))}getServiceAccountAccessPolicies(e){return Qi(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/service-accounts/"+e+"/access-policies",null,!0,!0),n=new Ni(t);return yield this.createServiceAccountAccessPoliciesView(n)}))}createProjectAccessPolicies(e,t,n){return Qi(this,void 0,void 0,(function*(){const i=this.getAccessPoliciesCreateRequest(n),o=yield this.apiService.send("POST","/projects/"+t+"/access-policies",i,!0,!0),s=new Ji(o),c=yield this.createProjectAccessPoliciesView(e,s);return this._projectAccessPolicyChanges$.next(c),c}))}createServiceAccountAccessPolicies(e,t){return Qi(this,void 0,void 0,(function*(){const n=this.getServiceAccountAccessPoliciesCreateRequest(t),i=yield this.apiService.send("POST","/service-accounts/"+e+"/access-policies",n,!0,!0),o=new Ni(i),s=yield this.createServiceAccountAccessPoliciesView(o);return this._serviceAccountAccessPolicyChanges$.next(s),s}))}deleteAccessPolicy(e){return Qi(this,void 0,void 0,(function*(){yield this.apiService.send("DELETE","/access-policies/"+e,null,!0,!1),this._projectAccessPolicyChanges$.next(null),this._serviceAccountAccessPolicyChanges$.next(null),this._serviceAccountGrantedPolicyChanges$.next(null)}))}updateAccessPolicy(e){return Qi(this,void 0,void 0,(function*(){const t=new Di;t.read=e.read,t.write=e.write,yield this.apiService.send("PUT","/access-policies/"+e.id,t,!0,!0)}))}createProjectAccessPoliciesView(e,t){return Qi(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(e),i=new Si;return i.userAccessPolicies=t.userAccessPolicies.map((e=>this.createUserProjectAccessPolicyView(e))),i.groupAccessPolicies=t.groupAccessPolicies.map((e=>this.createGroupProjectAccessPolicyView(e))),i.serviceAccountAccessPolicies=yield Promise.all(t.serviceAccountAccessPolicies.map((e=>Qi(this,void 0,void 0,(function*(){return yield this.createServiceAccountProjectAccessPolicyView(n,e)}))))),i}))}getAccessPoliciesCreateRequest(e){var t,n,i;const o=new qi;return(null===(t=e.userAccessPolicies)||void 0===t?void 0:t.length)>0&&(o.userAccessPolicyRequests=e.userAccessPolicies.map((e=>this.getAccessPolicyRequest(e.organizationUserId,e)))),(null===(n=e.groupAccessPolicies)||void 0===n?void 0:n.length)>0&&(o.groupAccessPolicyRequests=e.groupAccessPolicies.map((e=>this.getAccessPolicyRequest(e.groupId,e)))),(null===(i=e.serviceAccountAccessPolicies)||void 0===i?void 0:i.length)>0&&(o.serviceAccountAccessPolicyRequests=e.serviceAccountAccessPolicies.map((e=>this.getAccessPolicyRequest(e.serviceAccountId,e)))),o}createUserProjectAccessPolicyView(e){return Object.assign(Object.assign({},this.createBaseAccessPolicyView(e)),{grantedProjectId:e.grantedProjectId,organizationUserId:e.organizationUserId,organizationUserName:e.organizationUserName})}createGroupProjectAccessPolicyView(e){return Object.assign(Object.assign({},this.createBaseAccessPolicyView(e)),{grantedProjectId:e.grantedProjectId,groupId:e.groupId,groupName:e.groupName})}createServiceAccountProjectAccessPolicyView(e,t){return Qi(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},this.createBaseAccessPolicyView(t)),{grantedProjectId:t.grantedProjectId,serviceAccountId:t.serviceAccountId,grantedProjectName:yield this.encryptService.decryptToUtf8(new Ie._(t.grantedProjectName),e),serviceAccountName:yield this.encryptService.decryptToUtf8(new Ie._(t.serviceAccountName),e)})}))}getServiceAccountAccessPoliciesCreateRequest(e){var t,n;const i=new qi;return(null===(t=e.userAccessPolicies)||void 0===t?void 0:t.length)>0&&(i.userAccessPolicyRequests=e.userAccessPolicies.map((e=>this.getAccessPolicyRequest(e.organizationUserId,e)))),(null===(n=e.groupAccessPolicies)||void 0===n?void 0:n.length)>0&&(i.groupAccessPolicyRequests=e.groupAccessPolicies.map((e=>this.getAccessPolicyRequest(e.groupId,e)))),i}createServiceAccountAccessPoliciesView(e){return Qi(this,void 0,void 0,(function*(){const t=new Ti;return t.userAccessPolicies=e.userAccessPolicies.map((e=>this.createUserServiceAccountAccessPolicyView(e))),t.groupAccessPolicies=e.groupAccessPolicies.map((e=>this.createGroupServiceAccountAccessPolicyView(e))),t}))}createUserServiceAccountAccessPolicyView(e){return Object.assign(Object.assign({},this.createBaseAccessPolicyView(e)),{grantedServiceAccountId:e.grantedServiceAccountId,organizationUserId:e.organizationUserId,organizationUserName:e.organizationUserName})}createGroupServiceAccountAccessPolicyView(e){return Object.assign(Object.assign({},this.createBaseAccessPolicyView(e)),{grantedServiceAccountId:e.grantedServiceAccountId,groupId:e.groupId,groupName:e.groupName})}getPeoplePotentialGrantees(e){return Qi(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/organizations/"+e+"/access-policies/people/potential-grantees",null,!0,!0),n=new qe.L(t,Ei);return yield this.createPotentialGranteeViews(e,n.data)}))}getServiceAccountsPotentialGrantees(e){return Qi(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/organizations/"+e+"/access-policies/service-accounts/potential-grantees",null,!0,!0),n=new qe.L(t,Ei);return yield this.createPotentialGranteeViews(e,n.data)}))}getProjectsPotentialGrantees(e){return Qi(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/organizations/"+e+"/access-policies/projects/potential-grantees",null,!0,!0),n=new qe.L(t,Ei);return yield this.createPotentialGranteeViews(e,n.data)}))}getOrganizationKey(e){return Qi(this,void 0,void 0,(function*(){return yield this.cryptoService.getOrgKey(e)}))}getAccessPolicyRequest(e,t){const n=new zi;return n.granteeId=e,n.read=t.read,n.write=t.write,n}createBaseAccessPolicyView(e){return{id:e.id,read:e.read,write:e.write,creationDate:e.creationDate,revisionDate:e.revisionDate}}createPotentialGranteeViews(e,t){return Qi(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(e);return yield Promise.all(t.map((e=>Qi(this,void 0,void 0,(function*(){const t=new Ii;return t.id=e.id,t.type=e.type,t.email=e.email,"serviceAccount"===e.type||"project"===e.type?t.name=yield this.encryptService.decryptToUtf8(new Ie._(e.name),n):t.name=e.name,t})))))}))}getGrantedPoliciesCreateRequest(e){return e.map((e=>{const t=new Yi;return t.grantedId=e.grantedProjectId,t.read=e.read,t.write=e.write,t}))}createServiceAccountProjectAccessPolicyViews(e,t){return Qi(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(t);return yield Promise.all(e.map((e=>Qi(this,void 0,void 0,(function*(){const t=new xi;return t.id=e.id,t.read=e.read,t.write=e.write,t.creationDate=e.creationDate,t.revisionDate=e.revisionDate,t.serviceAccountId=e.serviceAccountId,t.grantedProjectId=e.grantedProjectId,t.serviceAccountName=yield this.encryptService.decryptToUtf8(new Ie._(e.serviceAccountName),n),t.grantedProjectName=yield this.encryptService.decryptToUtf8(new Ie._(e.grantedProjectName),n),t})))))}))}}Mi.ɵfac=function(e){return new(e||Mi)(u.LFG(Je.$),u.LFG(Ne.s),u.LFG(De.U))},Mi.ɵprov=u.Yz7({token:Mi,factory:Mi.ɵfac,providedIn:"root"});var Gi=n(80060),Ri=n(12294),Fi=n(99042),Bi=n(85339),$i=n(37202),Vi=n(6378),Ki=n(44358),Hi=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};function Xi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-form-field",19),u._uU(1,"\n              "),u.TgZ(2,"select",20),u.NdJ("change",(function(t){u.CHM(e);const n=u.oxw().$implicit,i=u.oxw(4);return u.KtG(i.update(t.target,n.accessPolicyId))})),u._uU(3,"\n                "),u.TgZ(4,"option",21),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n                "),u.TgZ(8,"option",22),u._uU(9),u.ALo(10,"i18n"),u.qZA(),u._uU(11,"\n                "),u.TgZ(12,"option",23),u._uU(13),u.ALo(14,"i18n"),u.qZA(),u._uU(15,"\n              "),u.qZA(),u._uU(16,"\n            "),u.qZA()}if(2&e){const e=u.oxw().$implicit;u.xp6(2),u.Q6J("disabled",e.static),u.xp6(2),u.Q6J("selected",e.read&&1!=e.write),u.xp6(1),u.hij("\n                  ",u.lcZ(6,7,"canRead"),"\n                "),u.xp6(3),u.Q6J("selected",1!=e.read&&e.write),u.xp6(1),u.hij("\n                  ",u.lcZ(10,9,"canWrite"),"\n                "),u.xp6(3),u.Q6J("selected",e.read&&e.write),u.xp6(1),u.hij("\n                  ",u.lcZ(14,11,"canReadWrite"),"\n                ")}}function Wi(e,t){1&e&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"i18n"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"canRead")))}function eo(e,t){1&e&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"i18n"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"canWrite")))}function to(e,t){1&e&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"i18n"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"canReadWrite")))}function no(e,t){if(1&e&&(u._uU(0,"\n              "),u.YNc(1,Wi,3,3,"span",24),u._uU(2,"\n              "),u.YNc(3,eo,3,3,"span",24),u._uU(4,"\n              "),u.YNc(5,to,3,3,"span",24),u._uU(6,"\n            ")),2&e){const e=u.oxw().$implicit;u.xp6(1),u.Q6J("ngIf",e.read&&1!=e.write),u.xp6(2),u.Q6J("ngIf",1!=e.read&&e.write),u.xp6(2),u.Q6J("ngIf",e.read&&e.write)}}function io(e,t){if(1&e&&(u.TgZ(0,"tr",11),u._uU(1,"\n          "),u.TgZ(2,"td",12),u._uU(3,"\n            "),u._UZ(4,"i",13),u._uU(5,"\n          "),u.qZA(),u._uU(6,"\n          "),u.TgZ(7,"td",14),u._uU(8),u.qZA(),u._uU(9,"\n          "),u.TgZ(10,"td",8),u._uU(11,"\n            "),u.YNc(12,Xi,17,13,"bit-form-field",15),u._uU(13,"\n            "),u.YNc(14,no,7,3,"ng-template",null,16,u.W1O),u._uU(16,"\n          "),u.qZA(),u._uU(17,"\n          "),u.TgZ(18,"td",17),u._uU(19,"\n            "),u._UZ(20,"button",18),u.ALo(21,"i18n"),u.ALo(22,"i18n"),u._uU(23,"\n          "),u.qZA(),u._uU(24,"\n        "),u.qZA()),2&e){const e=t.$implicit,n=u.MAs(15),i=u.oxw(4);u.xp6(4),u.Gre("bwi ",e.icon," tw-text-muted"),u.xp6(4),u.Oqu(e.name),u.xp6(4),u.Q6J("ngIf",!e.static)("ngIfElse",n),u.xp6(8),u.Q6J("bitAction",i.delete(e.accessPolicyId)),u.uIk("title",u.lcZ(21,9,"remove"))("aria-label",u.lcZ(22,11,"remove"))}}function oo(e,t){if(1&e&&(u.ynx(0),u._uU(1,"\n        "),u.YNc(2,io,25,13,"tr",10),u._uU(3,"\n      "),u.BQk()),2&e){const e=u.oxw(2).ngIf;u.xp6(2),u.Q6J("ngForOf",e)}}function so(e,t){if(1&e&&(u._uU(0,"\n      "),u.YNc(1,oo,4,1,"ng-container",3),u._uU(2,"\n    ")),2&e){const e=u.oxw().ngIf;u.oxw();const t=u.MAs(26);u.xp6(1),u.Q6J("ngIf",e.length>0)("ngIfElse",t)}}function co(e,t){if(1&e&&(u.TgZ(0,"bit-table"),u._uU(1,"\n    "),u.ynx(2,6),u._uU(3,"\n      "),u.TgZ(4,"tr"),u._uU(5,"\n        "),u.TgZ(6,"th",7),u._uU(7),u.qZA(),u._uU(8,"\n        "),u.TgZ(9,"th",8),u._uU(10),u.ALo(11,"i18n"),u.qZA(),u._uU(12,"\n      "),u.qZA(),u._uU(13,"\n    "),u.BQk(),u._uU(14,"\n\n    "),u.YNc(15,so,3,2,"ng-template",9),u._uU(16,"\n  "),u.qZA()),2&e){const e=u.oxw();u.xp6(7),u.Oqu(e.columnTitle),u.xp6(3),u.Oqu(u.lcZ(11,2,"permissions"))}}function ro(e,t){if(1&e&&(u._uU(0,"\n  "),u.TgZ(1,"div",25),u._uU(2),u.qZA(),u._uU(3,"\n")),2&e){const e=u.oxw();u.xp6(2),u.hij("\n    ",e.emptyMessage,"\n  ")}}function ao(e,t){1&e&&(u._uU(0,"\n  "),u.TgZ(1,"div",26),u._uU(2,"\n    "),u._UZ(3,"i",27),u._uU(4,"\n  "),u.qZA(),u._uU(5,"\n"))}class uo{constructor(e,t,n){this.accessPolicyService=e,this.validationService=t,this.route=n,this.onCreateAccessPolicies=new u.vpe,this.rows$=new ue.x,this.maxLength=15,this.formGroup=new me.cw({multiSelect:new me.NI([],[me.kI.required,me.kI.maxLength(this.maxLength)])}),this.loading=!0,this.selectItems$=(0,$.a)([this.rows$,this.route.params]).pipe((0,ve.w)((([e,t])=>this.getPotentialGrantees(t.organizationId).then((t=>t.filter((t=>!e.some((e=>e.id===t.id)))).map((e=>{let t,n=e.name,i=e.name;return"user"===e.type?(t=uo.userIcon,Bi.c.isNullOrWhitespace(e.name)?(n=e.email,i=e.email):n=`${e.name} (${e.email})`):"group"===e.type?t=uo.groupIcon:"serviceAccount"===e.type?t=uo.serviceAccountIcon:"project"===e.type&&(t=uo.projectIcon),{icon:t,id:e.id,labelName:i,listName:n}})))))),(0,Gi.b)((()=>{this.loading=!1,this.formGroup.reset(),this.formGroup.enable()})),(0,Ri.B)()),this.submit=()=>Hi(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),!this.formGroup.invalid)return this.formGroup.disable(),this.loading=!0,this.onCreateAccessPolicies.emit(this.formGroup.value.multiSelect),(0,Fi.z)(this.selectItems$)})),this.delete=e=>()=>Hi(this,void 0,void 0,(function*(){return this.loading=!0,this.formGroup.disable(),yield this.accessPolicyService.deleteAccessPolicy(e),(0,Fi.z)(this.selectItems$)}))}set rows(e){this.rows$.next(e)}ngOnInit(){this.formGroup.disable()}update(e,t){return Hi(this,void 0,void 0,(function*(){try{const n=new _i;n.id=t,"canRead"===e.value?(n.read=!0,n.write=!1):"canWrite"===e.value?(n.read=!1,n.write=!0):"canReadWrite"===e.value&&(n.read=!0,n.write=!0),yield this.accessPolicyService.updateAccessPolicy(n)}catch(n){this.validationService.showError(n)}}))}getPotentialGrantees(e){switch(this.granteeType){case"people":return this.accessPolicyService.getPeoplePotentialGrantees(e);case"serviceAccounts":return this.accessPolicyService.getServiceAccountsPotentialGrantees(e);case"projects":return this.accessPolicyService.getProjectsPotentialGrantees(e)}}static getAccessItemType(e){switch(e.icon){case uo.userIcon:return"user";case uo.groupIcon:return"group";case uo.serviceAccountIcon:return"serviceAccount";case uo.projectIcon:return"project"}}}uo.userIcon="bwi-user",uo.groupIcon="bwi-family",uo.serviceAccountIcon="bwi-wrench",uo.projectIcon="bwi-collection",uo.ɵfac=function(e){return new(e||uo)(u.Y36(Mi),u.Y36($i.R),u.Y36(c.gz))},uo.ɵcmp=u.Xpm({type:uo,selectors:[["sm-access-selector"]],inputs:{label:"label",hint:"hint",columnTitle:"columnTitle",emptyMessage:"emptyMessage",granteeType:"granteeType",rows:"rows"},outputs:{onCreateAccessPolicies:"onCreateAccessPolicies"},decls:31,vars:15,consts:[[1,"tw-mt-5",3,"formGroup","bitSubmit"],["formControlName","multiSelect",1,"tw-mr-4","tw-w-full",3,"baseItems","loading"],["type","submit","bitButton","","buttonType","primary","bitFormButton",""],[4,"ngIf","ngIfElse"],["empty",""],["spinner",""],["header",""],["bitCell","","colspan","2"],["bitCell",""],["body",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell","",1,"tw-w-0","tw-pr-0"],["aria-hidden","true"],["bitCell","",1,"tw-max-w-sm","tw-truncate"],["class","tw-mb-auto tw-inline-block tw-w-auto",4,"ngIf","ngIfElse"],["staticPermissions",""],["bitCell","",1,"tw-w-0"],["type","button","bitIconButton","bwi-close","buttonType","main","size","default",3,"bitAction"],[1,"tw-mb-auto","tw-inline-block","tw-w-auto"],["bitInput","",3,"disabled","change"],["value","canRead",3,"selected"],["value","canWrite",3,"selected"],["value","canReadWrite",3,"selected"],[4,"ngIf"],[1,"tw-mt-4","tw-text-center"],[1,"tw-items-center","tw-justify-center","tw-pt-10","tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"]],template:function(e,t){if(1&e&&(u.TgZ(0,"form",0),u._uU(1,"\n  "),u.TgZ(2,"bit-form-field"),u._uU(3,"\n    "),u.TgZ(4,"bit-label"),u._uU(5),u.qZA(),u._uU(6,"\n    "),u._UZ(7,"bit-multi-select",1),u.ALo(8,"async"),u._uU(9,"\n    "),u.TgZ(10,"bit-hint"),u._uU(11),u.qZA(),u._uU(12,"\n    "),u.TgZ(13,"button",2),u._uU(14),u.ALo(15,"i18n"),u.qZA(),u._uU(16,"\n  "),u.qZA(),u._uU(17,"\n"),u.qZA(),u._uU(18,"\n\n"),u.ynx(19),u._uU(20,"\n  "),u.YNc(21,co,17,4,"bit-table",3),u.ALo(22,"async"),u._uU(23,"\n"),u.BQk(),u._uU(24,"\n\n"),u.YNc(25,ro,4,1,"ng-template",null,4,u.W1O),u._uU(27,"\n\n"),u.YNc(28,ao,6,0,"ng-template",null,5,u.W1O),u._uU(30,"\n")),2&e){const e=u.MAs(29);u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(5),u.Oqu(t.label),u.xp6(2),u.Q6J("baseItems",u.lcZ(8,9,t.selectItems$))("loading",t.loading),u.xp6(4),u.Oqu(t.hint),u.xp6(3),u.hij("\n      ",u.lcZ(15,11,"add"),"\n    "),u.xp6(7),u.Q6J("ngIf",u.lcZ(22,13,t.rows$))("ngIfElse",e)}},dependencies:[s.sg,s.O5,me._Y,me.YN,me.Kr,me.JJ,me.JL,me.sg,me.u,vt.Q,Ge.b,Re.u,we.r,Be.d,$e.G,Vi.O,Ve.u,Ki.M,x.Q,Ze.a,Ae.Y,be.v,Ze.f,s.Ov,H.C],encapsulation:2});class lo{constructor(e,t){this.route=e,this.accessPolicyService=t,this.destroy$=new ue.x,this.rows$=this.accessPolicyService.projectAccessPolicyChanges$.pipe((0,ge.O)(null),(0,ve.w)((()=>this.accessPolicyService.getProjectAccessPolicies(this.organizationId,this.projectId))),(0,y.U)((e=>{const t=[];return e.userAccessPolicies.forEach((e=>{t.push({type:"user",name:e.organizationUserName,id:e.organizationUserId,accessPolicyId:e.id,read:e.read,write:e.write,icon:uo.userIcon})})),e.groupAccessPolicies.forEach((e=>{t.push({type:"group",name:e.groupName,id:e.groupId,accessPolicyId:e.id,read:e.read,write:e.write,icon:uo.groupIcon})})),t})))}handleCreateAccessPolicies(e){const t=new Si;return t.userAccessPolicies=e.filter((e=>"user"===uo.getAccessItemType(e))).map((e=>{const t=new Zi;return t.grantedProjectId=this.projectId,t.organizationUserId=e.id,t.read=!0,t.write=!1,t})),t.groupAccessPolicies=e.filter((e=>"group"===uo.getAccessItemType(e))).map((e=>{const t=new bi;return t.grantedProjectId=this.projectId,t.groupId=e.id,t.read=!0,t.write=!1,t})),this.accessPolicyService.createProjectAccessPolicies(this.organizationId,this.projectId,t)}ngOnInit(){this.route.params.pipe((0,he.R)(this.destroy$)).subscribe((e=>{this.organizationId=e.organizationId,this.projectId=e.projectId}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}lo.ɵfac=function(e){return new(e||lo)(u.Y36(c.gz),u.Y36(Mi))},lo.ɵcmp=u.Xpm({type:lo,selectors:[["sm-project-people"]],decls:15,vars:18,consts:[[1,"tw-w-2/5"],[1,"tw-mt-8"],["granteeType","people",3,"rows","label","hint","columnTitle","emptyMessage","onCreateAccessPolicies"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._uU(1,"\n  "),u.TgZ(2,"p",1),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"sm-access-selector",2),u.NdJ("onCreateAccessPolicies",(function(e){return t.handleCreateAccessPolicies(e)})),u.ALo(7,"async"),u.ALo(8,"i18n"),u.ALo(9,"i18n"),u.ALo(10,"i18n"),u.ALo(11,"i18n"),u._uU(12,"\n  "),u.qZA(),u._uU(13,"\n"),u.qZA(),u._uU(14,"\n")),2&e&&(u.xp6(3),u.hij("\n    ",u.lcZ(4,6,"projectPeopleDescription"),"\n  "),u.xp6(3),u.Q6J("rows",u.lcZ(7,8,t.rows$))("label",u.lcZ(8,10,"people"))("hint",u.lcZ(9,12,"projectPeopleSelectHint"))("columnTitle",u.lcZ(10,14,"groupSlashUser"))("emptyMessage",u.lcZ(11,16,"projectEmptyPeopleAccessPolicies")))},dependencies:[uo,s.Ov,H.C],encapsulation:2});var po=n(37260),ho=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};function go(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",4),u._uU(1,"\n    "),u.TgZ(2,"button",5),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.openNewSecretDialog())})),u._uU(3,"\n      "),u._UZ(4,"i",6),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n  "),u.qZA()}2&e&&(u.xp6(5),u.hij("\n      ",u.lcZ(6,1,"newSecret"),"\n    "))}function vo(e,t){if(1&e){const e=u.EpF();u.ynx(0),u._uU(1,"\n  "),u.YNc(2,go,8,3,"div",2),u._uU(3,"\n  "),u.TgZ(4,"sm-secrets-list",3),u.NdJ("deleteSecretsEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.openDeleteSecret(t))}))("newSecretEvent",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.openNewSecretDialog())}))("editSecretEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.openEditSecret(t))}))("copySecretNameEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.copySecretName(t))}))("copySecretValueEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.copySecretValue(t))})),u.qZA(),u._uU(5,"\n"),u.BQk()}if(2&e){const e=t.ngIf;u.xp6(2),u.Q6J("ngIf",e.length>0),u.xp6(2),u.Q6J("secrets",e)}}function fo(e,t){1&e&&(u._uU(0,"\n  "),u.TgZ(1,"div",7),u._uU(2,"\n    "),u._UZ(3,"i",8),u._uU(4,"\n  "),u.qZA(),u._uU(5,"\n"))}class mo{constructor(e,t,n,i,o){this.route=e,this.secretService=t,this.dialogService=n,this.platformUtilsService=i,this.i18nService=o}ngOnInit(){this.secrets$=this.secretService.secret$.pipe((0,ge.O)(null),(0,po.V)(this.route.params),(0,ve.w)((([e,t])=>ho(this,void 0,void 0,(function*(){return this.organizationId=t.organizationId,this.projectId=t.projectId,yield this.getSecretsByProject()})))))}getSecretsByProject(){return ho(this,void 0,void 0,(function*(){return yield this.secretService.getSecretsByProject(this.organizationId,this.projectId)}))}openEditSecret(e){this.dialogService.open(kt,{data:{organizationId:this.organizationId,operation:_t.Edit,secretId:e}})}openDeleteSecret(e){this.dialogService.open(Ut,{data:{secretIds:e}})}openNewSecretDialog(){this.dialogService.open(kt,{data:{organizationId:this.organizationId,operation:_t.Add,projectId:this.projectId}})}copySecretName(e){this.platformUtilsService.copyToClipboard(e),this.platformUtilsService.showToast("success",null,this.i18nService.t("valueCopied",this.i18nService.t("name")))}copySecretValue(e){return ho(this,void 0,void 0,(function*(){const t=yield this.secretService.getBySecretId(e);this.platformUtilsService.copyToClipboard(t.value),this.platformUtilsService.showToast("success",null,this.i18nService.t("valueCopied",this.i18nService.t("value")))}))}}mo.ɵfac=function(e){return new(e||mo)(u.Y36(c.gz),u.Y36(gt),u.Y36(Me.x),u.Y36(Qe.P),u.Y36(Ee.D))},mo.ɵcmp=u.Xpm({type:mo,selectors:[["sm-project-secrets"]],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["spinner",""],["class","float-right tw-mt-3 tw-items-center",4,"ngIf"],[3,"secrets","deleteSecretsEvent","newSecretEvent","editSecretEvent","copySecretNameEvent","copySecretValueEvent"],[1,"float-right","tw-mt-3","tw-items-center"],["type","button","bitButton","","buttonType","secondary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus"],[1,"tw-items-center","tw-justify-center","tw-pt-64","tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"]],template:function(e,t){if(1&e&&(u.YNc(0,vo,6,2,"ng-container",0),u.ALo(1,"async"),u._uU(2,"\n\n"),u.YNc(3,fo,6,0,"ng-template",null,1,u.W1O),u._uU(5,"\n")),2&e){const e=u.MAs(4);u.Q6J("ngIf",u.lcZ(1,2,t.secrets$))("ngIfElse",e)}},dependencies:[s.O5,we.r,zn,s.Ov,H.C],encapsulation:2});class wo{constructor(e,t){this.route=e,this.accessPolicyService=t,this.destroy$=new ue.x,this.rows$=this.accessPolicyService.projectAccessPolicyChanges$.pipe((0,ge.O)(null),(0,ve.w)((()=>this.accessPolicyService.getProjectAccessPolicies(this.organizationId,this.projectId))),(0,y.U)((e=>e.serviceAccountAccessPolicies.map((e=>({type:"serviceAccount",name:e.serviceAccountName,id:e.serviceAccountId,accessPolicyId:e.id,read:e.read,write:e.write,icon:uo.serviceAccountIcon,static:!0}))))))}handleCreateAccessPolicies(e){const t=new Si;return t.serviceAccountAccessPolicies=e.filter((e=>"serviceAccount"===uo.getAccessItemType(e))).map((e=>{const t=new xi;return t.grantedProjectId=this.projectId,t.serviceAccountId=e.id,t.read=!0,t.write=!1,t})),this.accessPolicyService.createProjectAccessPolicies(this.organizationId,this.projectId,t)}ngOnInit(){this.route.params.pipe((0,he.R)(this.destroy$)).subscribe((e=>{this.organizationId=e.organizationId,this.projectId=e.projectId}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}wo.ɵfac=function(e){return new(e||wo)(u.Y36(c.gz),u.Y36(Mi))},wo.ɵcmp=u.Xpm({type:wo,selectors:[["sm-project-service-accounts"]],decls:15,vars:18,consts:[[1,"tw-w-2/5"],[1,"tw-mt-8"],["granteeType","serviceAccounts",3,"rows","label","hint","columnTitle","emptyMessage","onCreateAccessPolicies"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._uU(1,"\n  "),u.TgZ(2,"p",1),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"sm-access-selector",2),u.NdJ("onCreateAccessPolicies",(function(e){return t.handleCreateAccessPolicies(e)})),u.ALo(7,"async"),u.ALo(8,"i18n"),u.ALo(9,"i18n"),u.ALo(10,"i18n"),u.ALo(11,"i18n"),u._uU(12,"\n  "),u.qZA(),u._uU(13,"\n"),u.qZA(),u._uU(14,"\n")),2&e&&(u.xp6(3),u.hij("\n    ",u.lcZ(4,6,"projectServiceAccountsDescription"),"\n  "),u.xp6(3),u.Q6J("rows",u.lcZ(7,8,t.rows$))("label",u.lcZ(8,10,"serviceAccounts"))("hint",u.lcZ(9,12,"projectServiceAccountsSelectHint"))("columnTitle",u.lcZ(10,14,"serviceAccounts"))("emptyMessage",u.lcZ(11,16,"projectEmptyServiceAccountAccessPolicies")))},dependencies:[uo,s.Ov,H.C],encapsulation:2});var Uo=n(14677),_o=n(36835),Zo=n(8427),Ao=n(93814);const bo=function(){return[".."]},yo=function(){return["secrets"]},xo=function(){return["people"]},So=function(){return["service-accounts"]};function To(e,t){if(1&e&&(u.TgZ(0,"sm-header",1),u._uU(1,"\n  "),u.TgZ(2,"bit-breadcrumbs",2),u._uU(3,"\n    "),u.TgZ(4,"bit-breadcrumb",3),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n  "),u.qZA(),u._uU(8,"\n  "),u.TgZ(9,"bit-tab-nav-bar",4),u._uU(10,"\n    "),u.TgZ(11,"bit-tab-link",5),u._uU(12),u.ALo(13,"i18n"),u.qZA(),u._uU(14,"\n    "),u.TgZ(15,"bit-tab-link",5),u._uU(16),u.ALo(17,"i18n"),u.qZA(),u._uU(18,"\n    "),u.TgZ(19,"bit-tab-link",5),u._uU(20),u.ALo(21,"i18n"),u.qZA(),u._uU(22,"\n  "),u.qZA(),u._uU(23,"\n  "),u._UZ(24,"sm-new-menu"),u._uU(25,"\n"),u.qZA()),2&e){const e=t.ngIf;u.Q6J("title",e.name),u.xp6(4),u.Q6J("route",u.DdM(17,bo)),u.xp6(1),u.Oqu(u.lcZ(6,9,"projects")),u.xp6(6),u.Q6J("route",u.DdM(18,yo)),u.xp6(1),u.Oqu(u.lcZ(13,11,"secrets")),u.xp6(3),u.Q6J("route",u.DdM(19,xo)),u.xp6(1),u.Oqu(u.lcZ(17,13,"people")),u.xp6(3),u.Q6J("route",u.DdM(20,So)),u.xp6(1),u.Oqu(u.lcZ(21,15,"serviceAccounts"))}}class Io{constructor(e,t){this.route=e,this.projectService=t}ngOnInit(){this.project$=this.route.params.pipe((0,ve.w)((e=>this.projectService.getByProjectId(e.projectId))))}}Io.ɵfac=function(e){return new(e||Io)(u.Y36(c.gz),u.Y36(Ye))},Io.ɵcmp=u.Xpm({type:Io,selectors:[["sm-project"]],decls:5,vars:3,consts:[["icon","bwi-collection",3,"title",4,"ngIf"],["icon","bwi-collection",3,"title"],["slot","breadcrumbs"],["icon","bwi-angle-left",3,"route"],["label","Main","slot","tabs"],[3,"route"]],template:function(e,t){1&e&&(u.YNc(0,To,26,21,"sm-header",0),u.ALo(1,"async"),u._uU(2,"\n"),u._UZ(3,"router-outlet"),u._uU(4,"\n")),2&e&&u.Q6J("ngIf",u.lcZ(1,1,t.project$))},dependencies:[s.O5,c.lC,Uo.f,_o.G,dn,pn,Zo.n,Ao.L,s.Ov,H.C],encapsulation:2});var qo=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class Po{constructor(e,t,n){this.route=e,this.projectService=t,this.dialogService=n}ngOnInit(){this.projects$=this.projectService.project$.pipe((0,ge.O)(null),(0,po.V)(this.route.params),(0,ve.w)((([e,t])=>qo(this,void 0,void 0,(function*(){return this.organizationId=t.organizationId,yield this.getProjects()})))))}getProjects(){return qo(this,void 0,void 0,(function*(){return yield this.projectService.getProjects(this.organizationId)}))}openEditProject(e){this.dialogService.open(ot,{data:{organizationId:this.organizationId,operation:et.Edit,projectId:e}})}openNewProjectDialog(){this.dialogService.open(ot,{data:{organizationId:this.organizationId,operation:et.Add}})}openDeleteProjectDialog(e){this.dialogService.open(We,{data:{projects:e}})}}Po.ɵfac=function(e){return new(e||Po)(u.Y36(c.gz),u.Y36(Ye),u.Y36(Me.x))},Po.ɵcmp=u.Xpm({type:Po,selectors:[["sm-projects"]],decls:12,vars:8,consts:[["bitInput","",3,"placeholder","ngModel","ngModelChange"],[3,"projects","search","newProjectEvent","editProjectEvent","deleteProjectEvent"]],template:function(e,t){1&e&&(u.TgZ(0,"sm-header"),u._uU(1,"\n  "),u.TgZ(2,"input",0),u.NdJ("ngModelChange",(function(e){return t.search=e})),u.ALo(3,"i18n"),u.qZA(),u._uU(4,"\n  "),u._UZ(5,"sm-new-menu"),u._uU(6,"\n"),u.qZA(),u._uU(7,"\n"),u.TgZ(8,"sm-projects-list",1),u.NdJ("newProjectEvent",(function(){return t.openNewProjectDialog()}))("editProjectEvent",(function(e){return t.openEditProject(e)}))("deleteProjectEvent",(function(e){return t.openDeleteProjectDialog(e)})),u.ALo(9,"async"),u._uU(10,"\n"),u.qZA(),u._uU(11,"\n")),2&e&&(u.xp6(2),u.Q6J("placeholder",u.lcZ(3,4,"searchProjects"))("ngModel",t.search),u.xp6(6),u.Q6J("projects",u.lcZ(9,6,t.projects$))("search",t.search))},dependencies:[me.Fj,me.JJ,me.On,$e.G,dn,pn,xn,s.Ov,H.C],encapsulation:2});const jo=[{path:"",component:Po},{path:":projectId",component:Io,children:[{path:"",pathMatch:"full",redirectTo:"secrets"},{path:"secrets",component:mo},{path:"people",component:lo},{path:"service-accounts",component:wo}]}];class ko{}ko.ɵfac=function(e){return new(e||ko)},ko.ɵmod=u.oAB({type:ko}),ko.ɵinj=u.cJS({imports:[c.Bz.forChild(jo),c.Bz]});class Co{}Co.ɵfac=function(e){return new(e||Co)},Co.ɵmod=u.oAB({type:Co}),Co.ɵinj=u.cJS({imports:[f,ko,Ui.J]});var Lo=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class Oo{constructor(e,t,n,i,o){this.route=e,this.secretService=t,this.dialogService=n,this.platformUtilsService=i,this.i18nService=o}ngOnInit(){this.secrets$=this.secretService.secret$.pipe((0,ge.O)(null),(0,po.V)(this.route.params),(0,ve.w)((([e,t])=>Lo(this,void 0,void 0,(function*(){return this.organizationId=t.organizationId,yield this.getSecrets()}))))),this.route.snapshot.queryParams.search&&(this.search=this.route.snapshot.queryParams.search)}getSecrets(){return Lo(this,void 0,void 0,(function*(){return yield this.secretService.getSecrets(this.organizationId)}))}openEditSecret(e){this.dialogService.open(kt,{data:{organizationId:this.organizationId,operation:_t.Edit,secretId:e}})}openDeleteSecret(e){this.dialogService.open(Ut,{data:{secretIds:e}})}openNewSecretDialog(){this.dialogService.open(kt,{data:{organizationId:this.organizationId,operation:_t.Add}})}copySecretName(e){this.platformUtilsService.copyToClipboard(e),this.platformUtilsService.showToast("success",null,this.i18nService.t("valueCopied",this.i18nService.t("name")))}copySecretValue(e){return Lo(this,void 0,void 0,(function*(){const t=yield this.secretService.getBySecretId(e);this.platformUtilsService.copyToClipboard(t.value),this.platformUtilsService.showToast("success",null,this.i18nService.t("valueCopied",this.i18nService.t("value")))}))}}Oo.ɵfac=function(e){return new(e||Oo)(u.Y36(c.gz),u.Y36(gt),u.Y36(Me.x),u.Y36(Qe.P),u.Y36(Ee.D))},Oo.ɵcmp=u.Xpm({type:Oo,selectors:[["sm-secrets"]],decls:11,vars:8,consts:[["bitInput","",3,"placeholder","ngModel","ngModelChange"],[3,"secrets","search","deleteSecretsEvent","newSecretEvent","editSecretEvent","copySecretNameEvent","copySecretValueEvent"]],template:function(e,t){1&e&&(u.TgZ(0,"sm-header"),u._uU(1,"\n  "),u.TgZ(2,"input",0),u.NdJ("ngModelChange",(function(e){return t.search=e})),u.ALo(3,"i18n"),u.qZA(),u._uU(4,"\n  "),u._UZ(5,"sm-new-menu"),u._uU(6,"\n"),u.qZA(),u._uU(7,"\n"),u.TgZ(8,"sm-secrets-list",1),u.NdJ("deleteSecretsEvent",(function(e){return t.openDeleteSecret(e)}))("newSecretEvent",(function(){return t.openNewSecretDialog()}))("editSecretEvent",(function(e){return t.openEditSecret(e)}))("copySecretNameEvent",(function(e){return t.copySecretName(e)}))("copySecretValueEvent",(function(e){return t.copySecretValue(e)})),u.ALo(9,"async"),u.qZA(),u._uU(10,"\n")),2&e&&(u.xp6(2),u.Q6J("placeholder",u.lcZ(3,4,"searchSecrets"))("ngModel",t.search),u.xp6(6),u.Q6J("secrets",u.lcZ(9,6,t.secrets$))("search",t.search))},dependencies:[me.Fj,me.JJ,me.On,$e.G,dn,pn,zn,s.Ov,H.C],encapsulation:2});const Jo=[{path:"",component:Oo}];class No{}No.ɵfac=function(e){return new(e||No)},No.ɵmod=u.oAB({type:No}),No.ɵinj=u.cJS({imports:[c.Bz.forChild(Jo),c.Bz]});class Do{}Do.ɵfac=function(e){return new(e||Do)},Do.ɵmod=u.oAB({type:Do}),Do.ɵinj=u.cJS({imports:[f,No]});var zo=n(77494),Yo=n(22089),Eo=n(13992);class Qo{}class Mo{}class Go extends Ce.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name"),this.clientSecret=this.getResponseProperty("ClientSecret"),this.expireAt=this.getResponseProperty("ExpireAt"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate")}}class Ro extends Ce.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name"),this.scopes=this.getResponseProperty("Scopes"),this.expireAt=this.getResponseProperty("ExpireAt"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate")}}class Fo{}var Bo=n(75966),$o=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class Vo{constructor(e,t,n,i){this.cryptoService=e,this.apiService=t,this.cryptoFunctionService=n,this.encryptService=i,this._accessTokenVersion="0",this._accessToken=new ue.x,this.accessToken$=this._accessToken.asObservable()}getAccessTokens(e,t){return $o(this,void 0,void 0,(function*(){const n=yield this.apiService.send("GET","/service-accounts/"+t+"/access-tokens",null,!0,!0),i=new qe.L(n,Ro);return yield this.createAccessTokenViews(e,i.data)}))}createAccessToken(e,t,n){return $o(this,void 0,void 0,(function*(){const i=yield this.cryptoFunctionService.randomBytes(16),o=yield this.cryptoFunctionService.hkdf(i,"bitwarden-accesstoken","sm-access-token",64,"sha256"),s=new Eo.N(o),c=yield this.createAccessTokenRequest(e,s,n),r=yield this.apiService.send("POST","/service-accounts/"+t+"/access-tokens",c,!0,!0),a=new Go(r);this._accessToken.next(null);const u=Bi.c.fromBufferToB64(i);return`${this._accessTokenVersion}.${a.id}.${a.clientSecret}:${u}`}))}revokeAccessTokens(e,t){return $o(this,void 0,void 0,(function*(){const n=new Mo;n.ids=t,yield this.apiService.send("POST","/service-accounts/"+e+"/access-tokens/revoke",n,!0,!1),this._accessToken.next(null)}))}createAccessTokenRequest(e,t,n){return $o(this,void 0,void 0,(function*(){const i=yield this.getOrganizationKey(e),o=new Qo,[s,c,r]=yield Promise.all([yield this.encryptService.encrypt(n.name,i),yield this.encryptService.encrypt(JSON.stringify({encryptionKey:i.keyB64}),t),yield this.encryptService.encrypt(t.keyB64,i)]);return o.name=s,o.encryptedPayload=c,o.key=r,o.expireAt=n.expireAt,o}))}getOrganizationKey(e){return $o(this,void 0,void 0,(function*(){return yield this.cryptoService.getOrgKey(e)}))}createAccessTokenViews(e,t){return $o(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(e);return yield Promise.all(t.map((e=>$o(this,void 0,void 0,(function*(){const t=new Fo;return t.id=e.id,t.name=yield this.encryptService.decryptToUtf8(new Ie._(e.name),n),t.scopes=e.scopes,t.expireAt=e.expireAt?new Date(e.expireAt):null,t.creationDate=new Date(e.creationDate),t.revisionDate=new Date(e.revisionDate),t})))))}))}}Vo.ɵfac=function(e){return new(e||Vo)(u.LFG(Je.$),u.LFG(Ne.s),u.LFG(Bo.O),u.LFG(De.U))},Vo.ɵprov=u.Yz7({token:Vo,factory:Vo.ɵfac,providedIn:"root"});class Ko{constructor(e,t,n,i){this.dialogRef=e,this.data=t,this.platformUtilsService=n,this.i18nService=i,this.dialogRef.disableClose=!0}ngOnInit(){if(!this.data.subTitle||!this.data.accessToken)throw this.dialogRef.close(),new Error("The access token dialog was not called with the appropriate values.")}copyAccessToken(){this.platformUtilsService.copyToClipboard(this.data.accessToken),this.platformUtilsService.showToast("success",null,this.i18nService.t("accessTokenCreatedAndCopied")),this.dialogRef.close()}}Ko.ɵfac=function(e){return new(e||Ko)(u.Y36(fe.zj),u.Y36(fe.Kt),u.Y36(Qe.P),u.Y36(Ee.D))},Ko.ɵcmp=u.Xpm({type:Ko,selectors:[["sm-access-token-dialog"]],decls:48,vars:35,consts:[["dialogSize","default"],["bitDialogTitle",""],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],["bitDialogContent",""],["type","info",3,"title"],[1,"tw-mb-0"],["bitInput","","disabled","","rows","4"],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","button","bitButton","","buttonType","primary",3,"click"],["aria-hidden","true",1,"bwi","bwi-clone"]],template:function(e,t){1&e&&(u.TgZ(0,"bit-dialog",0),u._uU(1,"\n  "),u.ynx(2,1),u._uU(3,"\n    "),u.TgZ(4,"span"),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n    "),u.TgZ(8,"span",2),u._uU(9),u.qZA(),u._uU(10,"\n  "),u.BQk(),u._uU(11,"\n\n  "),u.TgZ(12,"div",3),u._uU(13,"\n    "),u.TgZ(14,"bit-callout",4),u.ALo(15,"i18n"),u._uU(16),u.ALo(17,"i18n"),u._UZ(18,"br"),u._uU(19),u.ALo(20,"i18n"),u.ALo(21,"i18n"),u.ALo(22,"date"),u.qZA(),u._uU(23,"\n\n    "),u.TgZ(24,"bit-form-field",5),u._uU(25,"\n      "),u.TgZ(26,"bit-label"),u._uU(27),u.ALo(28,"i18n"),u.qZA(),u._uU(29,"\n      "),u.TgZ(30,"textarea",6),u._uU(31),u.qZA(),u._uU(32,"\n    "),u.qZA(),u._uU(33),u.ALo(34,"i18n"),u.ALo(35,"i18n"),u.ALo(36,"date"),u.qZA(),u._uU(37,"\n\n  "),u.TgZ(38,"div",7),u._uU(39,"\n    "),u.TgZ(40,"button",8),u.NdJ("click",(function(){return t.copyAccessToken()})),u._uU(41,"\n      "),u._UZ(42,"i",9),u._uU(43),u.ALo(44,"i18n"),u.qZA(),u._uU(45,"\n  "),u.qZA(),u._uU(46,"\n"),u.qZA(),u._uU(47,"\n")),2&e&&(u.xp6(5),u.Oqu(u.lcZ(6,11,"createAccessToken")),u.xp6(4),u.hij("\n      ",t.data.subTitle,"\n    "),u.xp6(5),u.Q6J("title",u.lcZ(15,13,"accessTokenCallOutTitle")),u.xp6(2),u.hij("\n      ",u.lcZ(17,15,"downloadAccessToken"),""),u.xp6(3),u.AsE("\n      ",u.lcZ(20,17,"expiresOnAccessToken"),"\n      ",null===t.data.expirationDate?u.lcZ(21,19,"never"):u.xi3(22,21,t.data.expirationDate,"medium"),"\n    "),u.xp6(8),u.Oqu(u.lcZ(28,24,"accessToken")),u.xp6(4),u.Oqu(t.data.accessToken),u.xp6(2),u.AsE("\n    ",u.lcZ(34,26,"expiresOnAccessToken"),"\n    ",null===t.data.expirationDate?u.lcZ(35,28,"never"):u.xi3(36,30,t.data.expirationDate,"medium"),"\n  "),u.xp6(10),u.hij("\n      ",u.lcZ(44,33,"copyToken"),"\n    "))},dependencies:[we.r,Fe.O,Ue.a,Be.d,$e.G,Ve.u,s.uU,H.C],encapsulation:2});var Ho=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};function Xo(e,t){if(1&e&&(u.TgZ(0,"option",6),u._uU(1),u.ALo(2,"i18n"),u.qZA()),2&e){const e=t.$implicit;u.Q6J("ngValue",e),u.xp6(1),u.hij("\n        ",u.xi3(2,2,"days",e),"\n      ")}}function Wo(e,t){if(1&e&&(u.TgZ(0,"bit-form-field"),u._uU(1,"\n    "),u.TgZ(2,"bit-label"),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n    "),u._UZ(6,"input",7),u.ALo(7,"date"),u._uU(8,"\n  "),u.qZA()),2&e){const e=u.oxw();u.xp6(3),u.Oqu(u.lcZ(4,2,"expirationDate")),u.xp6(3),u.Q6J("min",u.xi3(7,4,e.currentDate,"YYYY-MM-ddThh:mm"))}}class es{constructor(e){this.datePipe=e,this.destroy$=new ue.x,this.currentDate=new Date,this.form=new me.cw({expires:new me.NI("never",[me.kI.required]),expireDateTime:new me.NI("",[me.kI.required])}),this._onChange=e=>{},this.onTouched=()=>{}}set touched(e){e&&this.form.markAllAsTouched()}ngOnInit(){return Ho(this,void 0,void 0,(function*(){this.form.valueChanges.pipe((0,he.R)(this.destroy$)).subscribe((()=>{this._onChange(this.getExpiresDate())}))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(e){this._onChange=e}registerOnTouched(e){this.onTouched=e}validate(e){return"custom"==this.form.value.expires&&this.form.value.expireDateTime||"custom"!==this.form.value.expires?null:{required:!0}}writeValue(e){null==e&&this.form.setValue({expires:"never",expireDateTime:null}),e&&this.form.setValue({expires:"custom",expireDateTime:this.datePipe.transform(e,"YYYY-MM-ddThh:mm")})}setDisabledState(e){e?this.form.disable():this.form.enable()}getExpiresDate(){if("never"==this.form.value.expires)return null;if("custom"==this.form.value.expires)return new Date(this.form.value.expireDateTime);const e=new Date;return e.setDate(e.getDate()+Number(this.form.value.expires)),e}}es.ɵfac=function(e){return new(e||es)(u.Y36(s.uU))},es.ɵcmp=u.Xpm({type:es,selectors:[["sm-expiration-options"]],inputs:{expirationDayOptions:"expirationDayOptions",touched:"touched"},features:[u._Bn([{provide:me.JU,multi:!0,useExisting:es},{provide:me.Cf,multi:!0,useExisting:es}])],decls:25,vars:12,consts:[[3,"formGroup"],["bitInput","","formControlName","expires"],["ngValue","never"],[3,"ngValue",4,"ngFor","ngForOf"],["ngValue","custom"],[4,"ngIf"],[3,"ngValue"],["bitInput","","type","datetime-local","formControlName","expireDateTime",3,"min"]],template:function(e,t){1&e&&(u.ynx(0,0),u._uU(1,"\n  "),u.TgZ(2,"bit-form-field"),u._uU(3,"\n    "),u.TgZ(4,"bit-label"),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n    "),u.TgZ(8,"select",1),u._uU(9,"\n      "),u.TgZ(10,"option",2),u._uU(11),u.ALo(12,"i18n"),u.qZA(),u._uU(13,"\n      "),u.YNc(14,Xo,3,5,"option",3),u._uU(15,"\n      "),u.TgZ(16,"option",4),u._uU(17),u.ALo(18,"i18n"),u.qZA(),u._uU(19,"\n    "),u.qZA(),u._uU(20,"\n  "),u.qZA(),u._uU(21,"\n  "),u.YNc(22,Wo,9,7,"bit-form-field",5),u._uU(23,"\n"),u.BQk(),u._uU(24,"\n")),2&e&&(u.Q6J("formGroup",t.form),u.xp6(5),u.Oqu(u.lcZ(6,6,"expires")),u.xp6(6),u.Oqu(u.lcZ(12,8,"never")),u.xp6(3),u.Q6J("ngForOf",t.expirationDayOptions),u.xp6(3),u.Oqu(u.lcZ(18,10,"custom")),u.xp6(5),u.Q6J("ngIf","custom"===t.form.value.expires))},dependencies:[s.sg,s.O5,me.YN,me.Kr,me.Fj,me.EJ,me.JJ,me.JL,me.sg,me.u,Be.d,$e.G,Ve.u,s.uU,H.C],encapsulation:2});var ts=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class ns{constructor(e,t,n,i){this.dialogRef=e,this.data=t,this.dialogService=n,this.accessService=i,this.formGroup=new me.cw({name:new me.NI("",[me.kI.required,me.kI.maxLength(80)]),expirationDateControl:new me.NI(null)}),this.loading=!1,this.expirationDayOptions=[7,30,60],this.submit=()=>ts(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const e=new Fo;e.name=this.formGroup.value.name,e.expireAt=this.formGroup.value.expirationDateControl;const t=yield this.accessService.createAccessToken(this.data.organizationId,this.data.serviceAccountView.id,e);this.openAccessTokenDialog(this.data.serviceAccountView.name,t,e.expireAt),this.dialogRef.close()}))}ngOnInit(){var e,t;return ts(this,void 0,void 0,(function*(){if(!this.data.organizationId||!(null===(e=this.data.serviceAccountView)||void 0===e?void 0:e.id)||!(null===(t=this.data.serviceAccountView)||void 0===t?void 0:t.name))throw this.dialogRef.close(),new Error("The access token create dialog was not called with the appropriate operation values.")}))}openAccessTokenDialog(e,t,n){this.dialogService.open(Ko,{data:{subTitle:e,expirationDate:n,accessToken:t}})}static openNewAccessTokenDialog(e,t,n){const i=new Ct;return i.id=t,i.name="placeholder",e.open(ns,{data:{organizationId:n,serviceAccountView:i}})}}function is(e,t){1&e&&(u.TgZ(0,"div",6),u._uU(1,"\n  "),u._UZ(2,"i",7),u._uU(3,"\n"),u.qZA())}function os(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"sm-no-items"),u._uU(1,"\n  "),u.ynx(2,8),u._uU(3),u.ALo(4,"i18n"),u.BQk(),u._uU(5,"\n  "),u.ynx(6,9),u._uU(7),u.ALo(8,"i18n"),u.BQk(),u._uU(9,"\n  "),u.TgZ(10,"button",10),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.newAccessTokenEvent.emit())})),u._uU(11,"\n    "),u._UZ(12,"i",11),u._uU(13),u.ALo(14,"i18n"),u.qZA(),u._uU(15,"\n"),u.qZA()}2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,3,"accessTokensNoItemsTitle")),u.xp6(4),u.Oqu(u.lcZ(8,5,"accessTokensNoItemsDesc")),u.xp6(6),u.hij("\n    ",u.lcZ(14,7,"createAccessToken"),"\n  "))}function ss(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",20),u._uU(1,"\n      "),u.TgZ(2,"td",16),u._uU(3,"\n        "),u.TgZ(4,"input",21),u.NdJ("change",(function(t){const n=u.CHM(e).$implicit,i=u.oxw(3);return u.KtG(t?i.selection.toggle(n.id):null)})),u.qZA(),u._uU(5,"\n      "),u.qZA(),u._uU(6,"\n      "),u.TgZ(7,"td",16),u._uU(8),u.qZA(),u._uU(9,"\n      "),u.TgZ(10,"td",16),u._uU(11),u.ALo(12,"i18n"),u.qZA(),u._uU(13,"\n      "),u.TgZ(14,"td",16),u._uU(15),u.ALo(16,"i18n"),u.ALo(17,"date"),u.qZA(),u._uU(18,"\n      "),u.TgZ(19,"td",16),u._uU(20),u.ALo(21,"date"),u.qZA(),u._uU(22,"\n      "),u.TgZ(23,"td",16),u._uU(24,"\n        "),u._UZ(25,"button",22),u.ALo(26,"i18n"),u.ALo(27,"i18n"),u._uU(28,"\n      "),u.qZA(),u._uU(29,"\n\n      "),u.TgZ(30,"bit-menu",null,23),u._uU(32,"\n        "),u.TgZ(33,"button",3),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,n=u.oxw(3);return u.KtG(n.revokeAccessTokensEvent.emit([t]))})),u._uU(34,"\n          "),u.TgZ(35,"span",5),u._uU(36,"\n            "),u._UZ(37,"i",4),u._uU(38),u.ALo(39,"i18n"),u.qZA(),u._uU(40,"\n        "),u.qZA(),u._uU(41,"\n      "),u.qZA(),u._uU(42,"\n    "),u.qZA()}if(2&e){const e=t.$implicit,n=u.MAs(31),i=u.oxw(3);u.xp6(4),u.Q6J("checked",i.selection.isSelected(e.id)),u.xp6(4),u.Oqu(e.name),u.xp6(3),u.Oqu(u.lcZ(12,9,i.permission(e))),u.xp6(4),u.hij("\n        ",null===e.expireAt?u.lcZ(16,11,"never"):u.xi3(17,13,e.expireAt,"medium"),"\n      "),u.xp6(5),u.Oqu(u.xi3(21,16,e.revisionDate,"medium")),u.xp6(5),u.Q6J("title",u.lcZ(26,19,"options"))("bitMenuTriggerFor",n),u.uIk("aria-label",u.lcZ(27,21,"options")),u.xp6(13),u.hij("\n            ",u.lcZ(39,23,"revokeAccessToken"),"\n          ")}}function cs(e,t){if(1&e&&(u._uU(0,"\n    "),u.YNc(1,ss,43,25,"tr",19),u._uU(2,"\n  ")),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("ngForOf",e.tokens)}}function rs(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-table"),u._uU(1,"\n  "),u.ynx(2,12),u._uU(3,"\n    "),u.TgZ(4,"tr"),u._uU(5,"\n      "),u.TgZ(6,"th",13),u._uU(7,"\n        "),u.TgZ(8,"label",14),u._uU(9,"\n          "),u.TgZ(10,"input",15),u.NdJ("change",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(t?n.toggleAll():null)})),u.qZA(),u._uU(11),u.ALo(12,"i18n"),u.qZA(),u._uU(13,"\n      "),u.qZA(),u._uU(14,"\n      "),u.TgZ(15,"th",16),u._uU(16),u.ALo(17,"i18n"),u.qZA(),u._uU(18,"\n      "),u.TgZ(19,"th",16),u._uU(20),u.ALo(21,"i18n"),u.qZA(),u._uU(22,"\n      "),u.TgZ(23,"th",16),u._uU(24),u.ALo(25,"i18n"),u.qZA(),u._uU(26,"\n      "),u.TgZ(27,"th",16),u._uU(28),u.ALo(29,"i18n"),u.qZA(),u._uU(30,"\n      "),u.TgZ(31,"th",13),u._uU(32,"\n        "),u._UZ(33,"button",17),u.ALo(34,"i18n"),u.ALo(35,"i18n"),u._uU(36,"\n      "),u.qZA(),u._uU(37,"\n    "),u.qZA(),u._uU(38,"\n  "),u.BQk(),u._uU(39,"\n  "),u.YNc(40,cs,3,1,"ng-template",18),u._uU(41,"\n"),u.qZA()}if(2&e){const e=u.oxw(),t=u.MAs(7);u.xp6(10),u.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected()),u.xp6(1),u.hij("\n          ",u.lcZ(12,10,"all"),"\n        "),u.xp6(5),u.Oqu(u.lcZ(17,12,"name")),u.xp6(4),u.Oqu(u.lcZ(21,14,"permissions")),u.xp6(4),u.Oqu(u.lcZ(25,16,"expires")),u.xp6(4),u.Oqu(u.lcZ(29,18,"lastEdited")),u.xp6(5),u.Q6J("bitMenuTriggerFor",t)("title",u.lcZ(34,20,"options")),u.uIk("aria-label",u.lcZ(35,22,"options"))}}ns.ɵfac=function(e){return new(e||ns)(u.Y36(fe.zj),u.Y36(fe.Kt),u.Y36(Me.x),u.Y36(Vo))},ns.ɵcmp=u.Xpm({type:ns,selectors:[["sm-access-token-create-dialog"]],decls:62,vars:26,consts:[[3,"formGroup","bitSubmit"],["dialogSize","default"],["bitDialogTitle",""],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],["bitDialogContent",""],["bitInput","","formControlName","name"],[1,"tw-mb-6"],[1,"tw-mb-0"],["bitInput","","disabled",""],["selected","","value","canRead"],[1,"tw-text-sm","tw-text-muted"],["formControlName","expirationDateControl",3,"expirationDayOptions","touched"],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","submit","bitButton","","buttonType","primary","bitFormButton","",1,"tw-normal-case"],["type","button","bitButton","","buttonType","secondary","bitFormButton","","bitDialogClose",""]],template:function(e,t){1&e&&(u.TgZ(0,"form",0),u._uU(1,"\n  "),u.TgZ(2,"bit-dialog",1),u._uU(3,"\n    "),u.ynx(4,2),u._uU(5,"\n      "),u.TgZ(6,"span"),u._uU(7),u.ALo(8,"i18n"),u.qZA(),u._uU(9,"\n      "),u.TgZ(10,"span",3),u._uU(11),u.qZA(),u._uU(12,"\n    "),u.BQk(),u._uU(13,"\n\n    "),u.TgZ(14,"div",4),u._uU(15,"\n      "),u.TgZ(16,"bit-form-field"),u._uU(17,"\n        "),u.TgZ(18,"bit-label"),u._uU(19),u.ALo(20,"i18n"),u.qZA(),u._uU(21,"\n        "),u._UZ(22,"input",5),u._uU(23,"\n      "),u.qZA(),u._uU(24,"\n      "),u.TgZ(25,"div",6),u._uU(26,"\n        "),u.TgZ(27,"bit-form-field",7),u._uU(28,"\n          "),u.TgZ(29,"bit-label"),u._uU(30),u.ALo(31,"i18n"),u.qZA(),u._uU(32,"\n          "),u.TgZ(33,"select",8),u._uU(34,"\n            "),u.TgZ(35,"option",9),u._uU(36),u.ALo(37,"i18n"),u.qZA(),u._uU(38,"\n          "),u.qZA(),u._uU(39,"\n        "),u.qZA(),u._uU(40,"\n        "),u.TgZ(41,"span",10),u._uU(42),u.ALo(43,"i18n"),u.qZA(),u._uU(44,"\n      "),u.qZA(),u._uU(45,"\n      "),u._UZ(46,"sm-expiration-options",11),u._uU(47,"\n    "),u.qZA(),u._uU(48,"\n\n    "),u.TgZ(49,"div",12),u._uU(50,"\n      "),u.TgZ(51,"button",13),u._uU(52),u.ALo(53,"i18n"),u.qZA(),u._uU(54,"\n      "),u.TgZ(55,"button",14),u._uU(56),u.ALo(57,"i18n"),u.qZA(),u._uU(58,"\n    "),u.qZA(),u._uU(59,"\n  "),u.qZA(),u._uU(60,"\n"),u.qZA(),u._uU(61,"\n")),2&e&&(u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(7),u.Oqu(u.lcZ(8,12,"createAccessToken")),u.xp6(4),u.hij("\n        ",t.data.serviceAccountView.name,"\n      "),u.xp6(8),u.Oqu(u.lcZ(20,14,"name")),u.xp6(11),u.Oqu(u.lcZ(31,16,"permissions")),u.xp6(6),u.hij("\n              ",u.lcZ(37,18,"canRead"),"\n            "),u.xp6(6),u.hij("\n          ",u.lcZ(43,20,"accessTokenPermissionsBetaNotification"),"\n        "),u.xp6(4),u.Q6J("expirationDayOptions",t.expirationDayOptions)("touched",t.formGroup.controls.expirationDateControl.touched),u.xp6(6),u.hij("\n        ",u.lcZ(53,22,"createAccessToken"),"\n      "),u.xp6(4),u.hij("\n        ",u.lcZ(57,24,"cancel"),"\n      "))},dependencies:[me._Y,me.YN,me.Kr,me.Fj,me.JJ,me.JL,me.sg,me.u,Ge.b,Re.u,we.r,Ue.a,_e.f,Be.d,$e.G,Ve.u,es,H.C],encapsulation:2});class as{constructor(){this.newAccessTokenEvent=new u.vpe,this.revokeAccessTokensEvent=new u.vpe,this.selection=new hn.Ov(!0,[])}get tokens(){return this._tokens}set tokens(e){this.selection.clear(),this._tokens=e}isAllSelected(){return this.selection.selected.length===this.tokens.length}toggleAll(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.tokens.map((e=>e.id)))}revokeSelected(){const e=this.tokens.filter((e=>this.selection.selected.includes(e.id)));this.revokeAccessTokensEvent.emit(e)}permission(e){return"canRead"}}as.ɵfac=function(e){return new(e||as)},as.ɵcmp=u.Xpm({type:as,selectors:[["sm-access-list"]],inputs:{tokens:"tokens"},outputs:{newAccessTokenEvent:"newAccessTokenEvent",revokeAccessTokensEvent:"revokeAccessTokensEvent"},decls:19,vars:6,consts:[["class","tw-items-center tw-justify-center tw-pt-64 tw-text-center",4,"ngIf"],[4,"ngIf"],["tableMenu",""],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-minus-circle"],[1,"tw-text-danger"],[1,"tw-items-center","tw-justify-center","tw-pt-64","tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"],["slot","title"],["slot","description"],["type","button","slot","button","bitButton","","buttonType","secondary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus"],["header",""],["bitCell","",1,"tw-w-0"],[1,"tw-m-0","tw-flex","tw-w-fit","tw-gap-2","!tw-font-bold","!tw-text-muted"],["type","checkbox",3,"checked","indeterminate","change"],["bitCell",""],["type","button","bitIconButton","bwi-ellipsis-v","buttonType","main",3,"bitMenuTriggerFor","title"],["body",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["type","checkbox",3,"checked","change"],["type","button","bitIconButton","bwi-ellipsis-v","buttonType","main",3,"title","bitMenuTriggerFor"],["tokenMenu",""]],template:function(e,t){1&e&&(u.YNc(0,is,4,0,"div",0),u._uU(1,"\n\n"),u.YNc(2,os,16,9,"sm-no-items",1),u._uU(3,"\n\n"),u.YNc(4,rs,42,24,"bit-table",1),u._uU(5,"\n\n"),u.TgZ(6,"bit-menu",null,2),u._uU(8,"\n  "),u.TgZ(9,"button",3),u.NdJ("click",(function(){return t.revokeSelected()})),u._uU(10,"\n    "),u._UZ(11,"i",4),u._uU(12,"\n    "),u.TgZ(13,"span",5),u._uU(14),u.ALo(15,"i18n"),u.qZA(),u._uU(16,"\n  "),u.qZA(),u._uU(17,"\n"),u.qZA(),u._uU(18,"\n")),2&e&&(u.Q6J("ngIf",!t.tokens),u.xp6(2),u.Q6J("ngIf",0==(null==t.tokens?null:t.tokens.length)),u.xp6(2),u.Q6J("ngIf",(null==t.tokens?null:t.tokens.length)>=1),u.xp6(10),u.Oqu(u.lcZ(15,4,"revokeAccessTokens")))},dependencies:[s.sg,s.O5,we.r,x.Q,Xt.M,Wt.t,en.e,Ze.a,Ae.Y,be.v,Ze.f,wn,s.uU,H.C],encapsulation:2});var us=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class ls{constructor(e,t,n,i,o){this.route=e,this.accessService=t,this.dialogService=n,this.modalService=i,this.platformUtilsService=o}ngOnInit(){this.accessTokens$=this.accessService.accessToken$.pipe((0,ge.O)(null),(0,po.V)(this.route.params),(0,ve.w)((([e,t])=>us(this,void 0,void 0,(function*(){return this.organizationId=t.organizationId,this.serviceAccountId=t.serviceAccountId,yield this.getAccessTokens()})))))}revoke(e){return us(this,void 0,void 0,(function*(){(yield this.verifyUser())&&(yield this.accessService.revokeAccessTokens(this.serviceAccountId,e.map((e=>e.id))),this.platformUtilsService.showToast("success",null,"Access tokens revoked."))}))}openNewAccessTokenDialog(){ns.openNewAccessTokenDialog(this.dialogService,this.serviceAccountId,this.organizationId)}verifyUser(){const e=this.modalService.open(Yo.i,{allowMultipleModals:!0,data:{confirmDescription:"revokeAccessTokenDesc",confirmButtonText:"revokeAccessToken",modalTitle:"revokeAccessToken"}});if(null!=e)return e.onClosedPromise()}getAccessTokens(){return us(this,void 0,void 0,(function*(){return yield this.accessService.getAccessTokens(this.organizationId,this.serviceAccountId)}))}}ls.ɵfac=function(e){return new(e||ls)(u.Y36(c.gz),u.Y36(Vo),u.Y36(Me.x),u.Y36(zo.Z),u.Y36(Qe.P))},ls.ɵcmp=u.Xpm({type:ls,selectors:[["sm-access-tokens"]],decls:3,vars:3,consts:[[3,"tokens","newAccessTokenEvent","revokeAccessTokensEvent"]],template:function(e,t){1&e&&(u.TgZ(0,"sm-access-list",0),u.NdJ("newAccessTokenEvent",(function(){return t.openNewAccessTokenDialog()}))("revokeAccessTokensEvent",(function(e){return t.revoke(e)})),u.ALo(1,"async"),u.qZA(),u._uU(2,"\n")),2&e&&u.Q6J("tokens",u.lcZ(1,1,t.accessTokens$))},dependencies:[as,s.Ov],encapsulation:2});class ds{constructor(e,t){this.route=e,this.accessPolicyService=t,this.destroy$=new ue.x,this.rows$=this.accessPolicyService.serviceAccountAccessPolicyChanges$.pipe((0,ge.O)(null),(0,po.V)(this.route.params),(0,ve.w)((([e,t])=>this.accessPolicyService.getServiceAccountAccessPolicies(t.serviceAccountId))),(0,y.U)((e=>{const t=[];return e.userAccessPolicies.forEach((e=>{t.push({type:"user",name:e.organizationUserName,id:e.organizationUserId,accessPolicyId:e.id,read:e.read,write:e.write,icon:uo.userIcon,static:!0})})),e.groupAccessPolicies.forEach((e=>{t.push({type:"group",name:e.groupName,id:e.groupId,accessPolicyId:e.id,read:e.read,write:e.write,icon:uo.groupIcon,static:!0})})),t})))}handleCreateAccessPolicies(e){const t=new Ti;return t.userAccessPolicies=e.filter((e=>"user"===uo.getAccessItemType(e))).map((e=>{const t=new Ai;return t.grantedServiceAccountId=this.serviceAccountId,t.organizationUserId=e.id,t.read=!0,t.write=!0,t})),t.groupAccessPolicies=e.filter((e=>"group"===uo.getAccessItemType(e))).map((e=>{const t=new yi;return t.grantedServiceAccountId=this.serviceAccountId,t.groupId=e.id,t.read=!0,t.write=!0,t})),this.accessPolicyService.createServiceAccountAccessPolicies(this.serviceAccountId,t)}ngOnInit(){this.route.params.pipe((0,he.R)(this.destroy$)).subscribe((e=>{this.serviceAccountId=e.serviceAccountId}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}ds.ɵfac=function(e){return new(e||ds)(u.Y36(c.gz),u.Y36(Mi))},ds.ɵcmp=u.Xpm({type:ds,selectors:[["sm-service-account-people"]],decls:15,vars:18,consts:[[1,"tw-mt-4","tw-w-2/5"],[1,"tw-mt-6"],["granteeType","people",3,"rows","label","hint","columnTitle","emptyMessage","onCreateAccessPolicies"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._uU(1,"\n  "),u.TgZ(2,"p",1),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"sm-access-selector",2),u.NdJ("onCreateAccessPolicies",(function(e){return t.handleCreateAccessPolicies(e)})),u.ALo(7,"async"),u.ALo(8,"i18n"),u.ALo(9,"i18n"),u.ALo(10,"i18n"),u.ALo(11,"i18n"),u._uU(12,"\n  "),u.qZA(),u._uU(13,"\n"),u.qZA(),u._uU(14,"\n")),2&e&&(u.xp6(3),u.hij("\n    ",u.lcZ(4,6,"serviceAccountPeopleDescription"),"\n  "),u.xp6(3),u.Q6J("rows",u.lcZ(7,8,t.rows$))("label",u.lcZ(8,10,"people"))("hint",u.lcZ(9,12,"projectPeopleSelectHint"))("columnTitle",u.lcZ(10,14,"groupSlashUser"))("emptyMessage",u.lcZ(11,16,"projectEmptyPeopleAccessPolicies")))},dependencies:[uo,s.Ov,H.C],encapsulation:2});class ps{constructor(e,t){this.route=e,this.accessPolicyService=t,this.destroy$=new ue.x,this.rows$=this.accessPolicyService.serviceAccountGrantedPolicyChanges$.pipe((0,ge.O)(null),(0,po.V)(this.route.params),(0,ve.w)((([e,t])=>this.accessPolicyService.getGrantedPolicies(t.serviceAccountId,t.organizationId))),(0,y.U)((e=>e.map((e=>({type:"project",name:e.grantedProjectName,id:e.grantedProjectId,accessPolicyId:e.id,read:e.read,write:e.write,icon:uo.projectIcon,static:!0}))))))}handleCreateAccessPolicies(e){const t=e.filter((e=>"project"===uo.getAccessItemType(e))).map((e=>{const t=new xi;return t.serviceAccountId=this.serviceAccountId,t.grantedProjectId=e.id,t.read=!0,t.write=!1,t}));return this.accessPolicyService.createGrantedPolicies(this.organizationId,this.serviceAccountId,t)}ngOnInit(){this.route.params.pipe((0,he.R)(this.destroy$)).subscribe((e=>{this.organizationId=e.organizationId,this.serviceAccountId=e.serviceAccountId}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}ps.ɵfac=function(e){return new(e||ps)(u.Y36(c.gz),u.Y36(Mi))},ps.ɵcmp=u.Xpm({type:ps,selectors:[["sm-service-account-projects"]],decls:15,vars:18,consts:[[1,"tw-mt-4","tw-w-2/5"],[1,"tw-mt-6"],["granteeType","projects",3,"rows","label","hint","columnTitle","emptyMessage","onCreateAccessPolicies"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._uU(1,"\n  "),u.TgZ(2,"p",1),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"sm-access-selector",2),u.NdJ("onCreateAccessPolicies",(function(e){return t.handleCreateAccessPolicies(e)})),u.ALo(7,"async"),u.ALo(8,"i18n"),u.ALo(9,"i18n"),u.ALo(10,"i18n"),u.ALo(11,"i18n"),u._uU(12,"\n  "),u.qZA(),u._uU(13,"\n"),u.qZA(),u._uU(14,"\n")),2&e&&(u.xp6(3),u.hij("\n    ",u.lcZ(4,6,"serviceAccountProjectsDescription"),"\n  "),u.xp6(3),u.Q6J("rows",u.lcZ(7,8,t.rows$))("label",u.lcZ(8,10,"projects"))("hint",u.lcZ(9,12,"newSaSelectAccess"))("columnTitle",u.lcZ(10,14,"projects"))("emptyMessage",u.lcZ(11,16,"serviceAccountEmptyProjectAccesspolicies")))},dependencies:[uo,s.Ov,H.C],encapsulation:2});const hs=function(){return[".."]},gs=function(){return["projects"]},vs=function(){return["people"]},fs=function(){return["access"]};function ms(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"sm-header",1),u._uU(1,"\n  "),u.TgZ(2,"bit-breadcrumbs",2),u._uU(3,"\n    "),u.TgZ(4,"bit-breadcrumb",3),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n  "),u.qZA(),u._uU(8,"\n  "),u._UZ(9,"sm-new-menu"),u._uU(10,"\n  "),u.TgZ(11,"bit-tab-nav-bar",4),u._uU(12,"\n    "),u.TgZ(13,"bit-tab-link",5),u._uU(14),u.ALo(15,"i18n"),u.qZA(),u._uU(16,"\n    "),u.TgZ(17,"bit-tab-link",5),u._uU(18),u.ALo(19,"i18n"),u.qZA(),u._uU(20,"\n    "),u.TgZ(21,"bit-tab-link",5),u._uU(22),u.ALo(23,"i18n"),u.qZA(),u._uU(24,"\n  "),u.qZA(),u._uU(25,"\n  "),u.TgZ(26,"button",6),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.openNewAccessTokenDialog())})),u._uU(27,"\n    "),u._UZ(28,"i",7),u._uU(29),u.ALo(30,"i18n"),u.qZA(),u._uU(31,"\n"),u.qZA()}if(2&e){const e=t.ngIf;u.Q6J("title",e.name),u.xp6(4),u.Q6J("route",u.DdM(20,hs)),u.xp6(1),u.Oqu(u.lcZ(6,10,"serviceAccounts")),u.xp6(8),u.Q6J("route",u.DdM(21,gs)),u.xp6(1),u.Oqu(u.lcZ(15,12,"projects")),u.xp6(3),u.Q6J("route",u.DdM(22,vs)),u.xp6(1),u.Oqu(u.lcZ(19,14,"people")),u.xp6(3),u.Q6J("route",u.DdM(23,fs)),u.xp6(1),u.Oqu(u.lcZ(23,16,"accessTokens")),u.xp6(7),u.hij("\n    ",u.lcZ(30,18,"createAccessToken"),"\n  ")}}class ws{constructor(e,t,n){this.route=e,this.serviceAccountService=t,this.dialogService=n,this.serviceAccount$=this.route.params.pipe((0,ve.w)((e=>(this.serviceAccountId=e.serviceAccountId,this.organizationId=e.organizationId,this.serviceAccountService.getServiceAccounts(e.organizationId).then((t=>t.find((t=>t.id===e.serviceAccountId))))))))}openNewAccessTokenDialog(){ns.openNewAccessTokenDialog(this.dialogService,this.serviceAccountId,this.organizationId)}}function Us(e,t){1&e&&(u.TgZ(0,"div",6),u._uU(1,"\n  "),u._UZ(2,"i",7),u._uU(3,"\n"),u.qZA())}function _s(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"sm-no-items"),u._uU(1,"\n  "),u.ynx(2,8),u._uU(3),u.ALo(4,"i18n"),u.BQk(),u._uU(5,"\n  "),u.ynx(6,9),u._uU(7),u.ALo(8,"i18n"),u.BQk(),u._uU(9,"\n  "),u.TgZ(10,"button",10),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.newServiceAccountEvent.emit())})),u._uU(11,"\n    "),u._UZ(12,"i",11),u._uU(13),u.ALo(14,"i18n"),u.qZA(),u._uU(15,"\n"),u.qZA()}2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,3,"serviceAccountsNoItemsTitle")),u.xp6(4),u.Oqu(u.lcZ(8,5,"serviceAccountsNoItemsMessage")),u.xp6(6),u.hij("\n    ",u.lcZ(14,7,"newServiceAccount"),"\n  "))}function Zs(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",21),u._uU(1,"\n      "),u.TgZ(2,"td",17),u._uU(3,"\n        "),u.TgZ(4,"input",22),u.NdJ("change",(function(t){const n=u.CHM(e).$implicit,i=u.oxw(3);return u.KtG(t?i.selection.toggle(n.id):null)})),u.qZA(),u._uU(5,"\n      "),u.qZA(),u._uU(6,"\n      "),u.TgZ(7,"td",23),u._uU(8,"\n        "),u._UZ(9,"i",24),u._uU(10,"\n      "),u.qZA(),u._uU(11,"\n      "),u.TgZ(12,"td",25),u._uU(13,"\n        "),u.TgZ(14,"a",26),u._uU(15),u.qZA(),u._uU(16,"\n      "),u.qZA(),u._uU(17,"\n      "),u.TgZ(18,"td",17),u._uU(19,"\n        "),u._uU(20,"\n        "),u.TgZ(21,"span"),u._uU(22," 0 "),u.qZA(),u._uU(23,"\n      "),u.qZA(),u._uU(24,"\n      "),u.TgZ(25,"td",17),u._uU(26),u.ALo(27,"date"),u.qZA(),u._uU(28,"\n      "),u.TgZ(29,"td",17),u._uU(30,"\n        "),u._UZ(31,"button",18),u.ALo(32,"i18n"),u.ALo(33,"i18n"),u._uU(34,"\n      "),u.qZA(),u._uU(35,"\n      "),u.TgZ(36,"bit-menu",null,27),u._uU(38,"\n        "),u.TgZ(39,"a",28),u._uU(40,"\n          "),u._UZ(41,"i",29),u._uU(42),u.ALo(43,"i18n"),u.qZA(),u._uU(44,"\n        "),u.TgZ(45,"button",30),u._uU(46,"\n          "),u._UZ(47,"i",4),u._uU(48,"\n          "),u.TgZ(49,"span",5),u._uU(50),u.ALo(51,"i18n"),u.qZA(),u._uU(52,"\n        "),u.qZA(),u._uU(53,"\n      "),u.qZA(),u._uU(54,"\n    "),u.qZA()}if(2&e){const e=t.$implicit,n=u.MAs(37),i=u.oxw(3);u.xp6(4),u.Q6J("checked",i.selection.isSelected(e.id)),u.xp6(10),u.Q6J("routerLink",e.id),u.xp6(1),u.hij("\n          ",e.name,"\n        "),u.xp6(11),u.Oqu(u.xi3(27,10,e.revisionDate,"medium")),u.xp6(5),u.Q6J("title",u.lcZ(32,13,"options"))("bitMenuTriggerFor",n),u.uIk("aria-label",u.lcZ(33,15,"options")),u.xp6(8),u.Q6J("routerLink",e.id),u.xp6(3),u.hij("\n          ",u.lcZ(43,17,"viewServiceAccount"),"\n        "),u.xp6(8),u.hij("\n            ",u.lcZ(51,19,"deleteServiceAccount"),"\n          ")}}function As(e,t){if(1&e&&(u._uU(0,"\n    "),u.YNc(1,Zs,55,21,"tr",20),u._uU(2,"\n  ")),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("ngForOf",e.serviceAccounts)}}function bs(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-table"),u._uU(1,"\n  "),u.ynx(2,12),u._uU(3,"\n    "),u.TgZ(4,"tr"),u._uU(5,"\n      "),u.TgZ(6,"th",13),u._uU(7,"\n        "),u.TgZ(8,"label",14),u._uU(9,"\n          "),u.TgZ(10,"input",15),u.NdJ("change",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(t?n.toggleAll():null)})),u.qZA(),u._uU(11),u.ALo(12,"i18n"),u.qZA(),u._uU(13,"\n      "),u.qZA(),u._uU(14,"\n      "),u.TgZ(15,"th",16),u._uU(16),u.ALo(17,"i18n"),u.qZA(),u._uU(18,"\n      "),u.TgZ(19,"th",17),u._uU(20),u.ALo(21,"i18n"),u.qZA(),u._uU(22,"\n      "),u.TgZ(23,"th",17),u._uU(24),u.ALo(25,"i18n"),u.qZA(),u._uU(26,"\n      "),u.TgZ(27,"th",13),u._uU(28,"\n        "),u._UZ(29,"button",18),u.ALo(30,"i18n"),u.ALo(31,"i18n"),u._uU(32,"\n      "),u.qZA(),u._uU(33,"\n    "),u.qZA(),u._uU(34,"\n  "),u.BQk(),u._uU(35,"\n  "),u.YNc(36,As,3,1,"ng-template",19),u._uU(37,"\n"),u.qZA()}if(2&e){const e=u.oxw(),t=u.MAs(7);u.xp6(10),u.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected()),u.xp6(1),u.hij("\n          ",u.lcZ(12,9,"all"),"\n        "),u.xp6(5),u.Oqu(u.lcZ(17,11,"name")),u.xp6(4),u.Oqu(u.lcZ(21,13,"secrets")),u.xp6(4),u.Oqu(u.lcZ(25,15,"lastEdited")),u.xp6(5),u.Q6J("title",u.lcZ(30,17,"options"))("bitMenuTriggerFor",t),u.uIk("aria-label",u.lcZ(31,19,"options"))}}ws.ɵfac=function(e){return new(e||ws)(u.Y36(c.gz),u.Y36(Nt),u.Y36(Me.x))},ws.ɵcmp=u.Xpm({type:ws,selectors:[["sm-service-account"]],decls:5,vars:3,consts:[["icon","bwi-wrench",3,"title",4,"ngIf"],["icon","bwi-wrench",3,"title"],["slot","breadcrumbs"],["icon","bwi-angle-left",3,"route"],["label","Main","slot","tabs"],[3,"route"],["type","button","slot","secondary","bitButton","","buttonType","secondary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus"]],template:function(e,t){1&e&&(u.YNc(0,ms,32,24,"sm-header",0),u.ALo(1,"async"),u._uU(2,"\n"),u._UZ(3,"router-outlet"),u._uU(4,"\n")),2&e&&u.Q6J("ngIf",u.lcZ(1,1,t.serviceAccount$))},dependencies:[s.O5,c.lC,we.r,Uo.f,_o.G,dn,pn,Zo.n,Ao.L,s.Ov,H.C],encapsulation:2});class ys{constructor(){this.newServiceAccountEvent=new u.vpe,this.deleteServiceAccountsEvent=new u.vpe,this.onServiceAccountCheckedEvent=new u.vpe,this.destroy$=new ue.x,this.selection=new hn.Ov(!0,[]),this.selection.changed.pipe((0,he.R)(this.destroy$)).subscribe((e=>this.onServiceAccountCheckedEvent.emit(this.selection.selected)))}get serviceAccounts(){return this._serviceAccounts}set serviceAccounts(e){this.selection.clear(),this._serviceAccounts=e}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}isAllSelected(){return this.selection.selected.length===this.serviceAccounts.length}toggleAll(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.serviceAccounts.map((e=>e.id)))}bulkDeleteServiceAccounts(){this.selection.selected.length>=1&&this.deleteServiceAccountsEvent.emit(this.selection.selected)}}ys.ɵfac=function(e){return new(e||ys)},ys.ɵcmp=u.Xpm({type:ys,selectors:[["sm-service-accounts-list"]],inputs:{serviceAccounts:"serviceAccounts"},outputs:{newServiceAccountEvent:"newServiceAccountEvent",deleteServiceAccountsEvent:"deleteServiceAccountsEvent",onServiceAccountCheckedEvent:"onServiceAccountCheckedEvent"},decls:19,vars:6,consts:[["class","tw-items-center tw-justify-center tw-pt-64 tw-text-center",4,"ngIf"],[4,"ngIf"],["tableMenu",""],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-trash","tw-text-danger"],[1,"tw-text-danger"],[1,"tw-items-center","tw-justify-center","tw-pt-64","tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"],["slot","title"],["slot","description"],["slot","button","type","button","bitButton","","buttonType","secondary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus"],["header",""],["bitCell","",1,"tw-w-0"],[1,"!tw-mb-0","tw-flex","tw-w-fit","tw-gap-2","!tw-font-bold","!tw-text-muted"],["type","checkbox",3,"checked","indeterminate","change"],["bitCell","","colspan","2"],["bitCell",""],["type","button","bitIconButton","bwi-ellipsis-v","buttonType","main",3,"title","bitMenuTriggerFor"],["body",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["type","checkbox",3,"checked","change"],["bitCell","",1,"tw-w-0","tw-pr-0"],["aria-hidden","true",1,"bwi","bwi-wrench","tw-text-muted"],["bitCell","",1,"tw-break-all"],["bitLink","",3,"routerLink"],["serviceAccountMenu",""],["type","button","bitMenuItem","",3,"routerLink"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-eye"],["type","button","bitMenuItem",""]],template:function(e,t){1&e&&(u.YNc(0,Us,4,0,"div",0),u._uU(1,"\n\n"),u.YNc(2,_s,16,9,"sm-no-items",1),u._uU(3,"\n\n"),u.YNc(4,bs,38,21,"bit-table",1),u._uU(5,"\n\n"),u.TgZ(6,"bit-menu",null,2),u._uU(8,"\n  "),u.TgZ(9,"button",3),u.NdJ("click",(function(){return t.bulkDeleteServiceAccounts()})),u._uU(10,"\n    "),u._UZ(11,"i",4),u._uU(12,"\n    "),u.TgZ(13,"span",5),u._uU(14),u.ALo(15,"i18n"),u.qZA(),u._uU(16,"\n  "),u.qZA(),u._uU(17,"\n"),u.qZA(),u._uU(18,"\n")),2&e&&(u.Q6J("ngIf",!t.serviceAccounts),u.xp6(2),u.Q6J("ngIf",0==(null==t.serviceAccounts?null:t.serviceAccounts.length)),u.xp6(2),u.Q6J("ngIf",(null==t.serviceAccounts?null:t.serviceAccounts.length)>=1),u.xp6(10),u.hij("\n      ",u.lcZ(15,4,"deleteServiceAccounts"),"\n    "))},dependencies:[s.sg,s.O5,c.yS,we.r,x.Q,Mt.r,Xt.M,Wt.t,en.e,Ze.a,Ae.Y,be.v,Ze.f,wn,s.uU,H.C],encapsulation:2});var xs=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class Ss{constructor(e,t,n){this.route=e,this.dialogService=t,this.serviceAccountService=n}ngOnInit(){this.serviceAccounts$=this.serviceAccountService.serviceAccount$.pipe((0,ge.O)(null),(0,po.V)(this.route.params),(0,ve.w)((([e,t])=>xs(this,void 0,void 0,(function*(){return this.organizationId=t.organizationId,yield this.getServiceAccounts()})))))}openNewServiceAccountDialog(){this.dialogService.open(Qt,{data:{organizationId:this.organizationId}})}getServiceAccounts(){return xs(this,void 0,void 0,(function*(){return yield this.serviceAccountService.getServiceAccounts(this.organizationId)}))}}Ss.ɵfac=function(e){return new(e||Ss)(u.Y36(c.gz),u.Y36(Me.x),u.Y36(Nt))},Ss.ɵcmp=u.Xpm({type:Ss,selectors:[["sm-service-accounts"]],decls:11,vars:6,consts:[["bitInput","",3,"placeholder"],[3,"serviceAccounts","newServiceAccountEvent"]],template:function(e,t){1&e&&(u.TgZ(0,"sm-header"),u._uU(1,"\n  "),u._UZ(2,"input",0),u.ALo(3,"i18n"),u._uU(4,"\n  "),u._UZ(5,"sm-new-menu"),u._uU(6,"\n"),u.qZA(),u._uU(7,"\n"),u.TgZ(8,"sm-service-accounts-list",1),u.NdJ("newServiceAccountEvent",(function(){return t.openNewServiceAccountDialog()})),u.ALo(9,"async"),u.qZA(),u._uU(10,"\n")),2&e&&(u.xp6(2),u.Q6J("placeholder",u.lcZ(3,2,"searchServiceAccounts")),u.xp6(6),u.Q6J("serviceAccounts",u.lcZ(9,4,t.serviceAccounts$)))},dependencies:[$e.G,dn,pn,ys,s.Ov,H.C],encapsulation:2});const Ts=[{path:"",component:Ss},{path:":serviceAccountId",component:ws,children:[{path:"",pathMatch:"full",redirectTo:"projects"},{path:"access",component:ls},{path:"people",component:ds},{path:"projects",component:ps}]}];class Is{}Is.ɵfac=function(e){return new(e||Is)},Is.ɵmod=u.oAB({type:Is}),Is.ɵinj=u.cJS({imports:[c.Bz.forChild(Ts),c.Bz]});class qs{}qs.ɵfac=function(e){return new(e||qs)},qs.ɵmod=u.oAB({type:qs}),qs.ɵinj=u.cJS({imports:[f,Is,Ui.J]});var Ps=n(25679);class js extends Error{constructor(e){super(e)}}class ks{}class Cs{}class Ls{}class Os extends Ce.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name")}}class Js extends Ce.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.key=this.getResponseProperty("Key"),this.value=this.getResponseProperty("Value"),this.note=this.getResponseProperty("Note");const t=this.getResponseProperty("ProjectIds");this.projectIds=null==t?void 0:t.map((e=>e.toString()))}}class Ns extends Ce.c{constructor(e){super(e);const t=this.getResponseProperty("Projects"),n=this.getResponseProperty("Secrets");this.projects=null==t?void 0:t.map((e=>new Os(e))),this.secrets=null==n?void 0:n.map((e=>new Js(e)))}}class Ds{}class zs{}class Ys{}var Es=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class Qs{constructor(e,t,n,i){this.apiService=e,this.encryptService=t,this.cryptoService=n,this.i18nService=i}export(e,t="json"){return Es(this,void 0,void 0,(function*(){let n={};try{n=yield this.apiService.send("GET","/sm/"+e+"/export?format="+t,null,!0,!0)}catch(i){return null}return JSON.stringify(yield this.decryptExport(e,new Ns(n)),null,"  ")}))}import(e,t){return Es(this,void 0,void 0,(function*(){let n={};try{n=JSON.parse(t);const i=yield this.encryptImport(e,n);yield this.apiService.send("POST","/sm/"+e+"/import",i,!0,!0)}catch(i){const e=new Ps.i(i,400);return this.handleServerError(e,n)}}))}encryptImport(e,t){return Es(this,void 0,void 0,(function*(){const n=new ks;try{const i=yield this.cryptoService.getOrgKey(e);n.projects=[],n.secrets=[],n.projects=yield Promise.all(t.projects.map((e=>Es(this,void 0,void 0,(function*(){const t=new Cs;return t.id=e.id,t.name=yield this.encryptService.encrypt(e.name,i),t}))))),n.secrets=yield Promise.all(t.secrets.map((e=>Es(this,void 0,void 0,(function*(){const t=new Ls;return[t.key,t.value,t.note]=yield Promise.all([this.encryptService.encrypt(e.key,i),this.encryptService.encrypt(e.value,i),this.encryptService.encrypt(e.note,i)]),t.id=e.id,t.projectIds=e.projectIds,t})))))}catch(i){return null}return n}))}decryptExport(e,t){return Es(this,void 0,void 0,(function*(){const n=yield this.cryptoService.getOrgKey(e),i=new Ds;return i.projects=[],i.secrets=[],i.projects=yield Promise.all(t.projects.map((e=>Es(this,void 0,void 0,(function*(){const t=new zs;return t.id=e.id,t.name=yield this.encryptService.decryptToUtf8(new Ie._(e.name),n),t}))))),i.secrets=yield Promise.all(t.secrets.map((e=>Es(this,void 0,void 0,(function*(){const t=new Ys;return[t.key,t.value,t.note]=yield Promise.all([this.encryptService.decryptToUtf8(new Ie._(e.key),n),this.encryptService.decryptToUtf8(new Ie._(e.value),n),this.encryptService.decryptToUtf8(new Ie._(e.note),n)]),t.id=e.id,t.projectIds=e.projectIds,t}))))),i}))}handleServerError(e,t){if(null==e.validationErrors)return new js(e.message);const n=new js;return n.lines=[],Object.entries(e.validationErrors).forEach((([e,i],o)=>{let s,c;const r=Number(e.match(/[0-9]+/)[0]);switch(e.match(/^\w+/)[0]){case"Projects":s=t.projects[r],c="Project";break;case"Secrets":s=t.secrets[r],c="Secret";break;default:return}n.lines.push({id:r+1,type:"Project"==c?"Project":"Secret",key:s.key,errorMessage:i.length>0?i[0]:""})})),n}}Qs.ɵfac=function(e){return new(e||Qs)(u.LFG(Ne.s),u.LFG(De.U),u.LFG(Je.$),u.LFG(Ee.D))},Qs.ɵprov=u.Yz7({token:Qs,factory:Qs.ɵfac,providedIn:"root"});var Ms=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class Gs{constructor(e){this.i18nService=e}getFileName(e=null,t="json"){return Ms(this,void 0,void 0,(function*(){const n=yield(0,Fi.z)(this.i18nService.locale$),i=(0,s.p6)(new Date,"yyyyMMddHHmmss",n);return"bitwarden"+(e?"_"+e:"")+"_export_"+i+"."+t}))}}Gs.ɵfac=function(e){return new(e||Gs)(u.LFG(Ee.D))},Gs.ɵprov=u.Yz7({token:Gs,factory:Gs.ɵfac,providedIn:"root"});var Rs=n(86290),Fs=n(27885),Bs=n(53707),$s=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};function Vs(e,t){if(1&e&&(u.TgZ(0,"option",7),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("ngValue",e),u.xp6(1),u.Oqu(e)}}class Ks{constructor(e,t,n,i,o,s,c,r,a){this.route=e,this.i18nService=t,this.organizationService=n,this.platformUtilsService=i,this.smPortingService=o,this.fileDownloadService=s,this.logService=c,this.modalService=r,this.secretsManagerApiService=a,this.destroy$=new ue.x,this.exportFormats=["json"],this.formGroup=new me.cw({format:new me.NI("json",[me.kI.required])}),this.submit=()=>$s(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;(yield this.verifyUser())&&(yield this.doExport())}))}ngOnInit(){return $s(this,void 0,void 0,(function*(){this.route.params.pipe((0,ve.w)((e=>$s(this,void 0,void 0,(function*(){return yield this.organizationService.get(e.organizationId)})))),(0,he.R)(this.destroy$)).subscribe((e=>{this.orgName=e.name,this.orgId=e.id})),this.formGroup.get("format").disable()}))}ngOnDestroy(){return $s(this,void 0,void 0,(function*(){this.destroy$.next(),this.destroy$.complete()}))}doExport(){return $s(this,void 0,void 0,(function*(){try{const e=yield this.secretsManagerApiService.export(this.orgId,this.formGroup.get("format").value);yield this.downloadFile(e,this.formGroup.get("format").value),this.platformUtilsService.showToast("success",null,this.i18nService.t("dataExportSuccess"))}catch(e){this.logService.error(e)}}))}downloadFile(e,t){return $s(this,void 0,void 0,(function*(){const n=yield this.smPortingService.getFileName(null,t);this.fileDownloadService.download({fileName:n,blobData:e,blobOptions:{type:"text/plain"}})}))}verifyUser(){const e=this.modalService.open(Yo.i,{allowMultipleModals:!0,data:{confirmDescription:"exportWarningDesc",confirmButtonText:"exportVault",modalTitle:"confirmVaultExport"}});if(null!=e)return e.onClosedPromise()}}function Hs(e,t){if(1&e&&(u.TgZ(0,"tr",8),u._uU(1,"\n          "),u.TgZ(2,"td",9),u._uU(3),u.qZA(),u._uU(4,"\n          "),u.TgZ(5,"td",3),u._uU(6),u.qZA(),u._uU(7,"\n        "),u.qZA()),2&e){const e=t.$implicit;u.xp6(3),u.lnq("[",e.id,"] [",e.type,"] ",e.key,""),u.xp6(3),u.Oqu(e.errorMessage)}}function Xs(e,t){if(1&e&&(u._uU(0,"\n        "),u.YNc(1,Hs,8,4,"tr",7),u._uU(2,"\n      ")),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngForOf",e.errorLines)}}Ks.ɵfac=function(e){return new(e||Ks)(u.Y36(c.gz),u.Y36(Ee.D),u.Y36(V.Mn),u.Y36(Qe.P),u.Y36(Gs),u.Y36(Rs._),u.Y36(Fs.$),u.Y36(zo.Z),u.Y36(Qs))},Ks.ɵcmp=u.Xpm({type:Ks,selectors:[["sm-export"]],decls:29,vars:16,consts:[[3,"formGroup","bitSubmit"],[1,"tw-my-4","tw-max-w-xl"],["type","info",3,"title"],[1,"tw-max-w-sm"],["bitInput","","formControlName","format"],[3,"ngValue",4,"ngFor","ngForOf"],["bitButton","","bitFormButton","","type","submit","buttonType","primary"],[3,"ngValue"]],template:function(e,t){1&e&&(u._UZ(0,"sm-header"),u._uU(1,"\n\n"),u.TgZ(2,"form",0),u._uU(3,"\n  "),u.TgZ(4,"div",1),u._uU(5,"\n    "),u.TgZ(6,"app-callout",2),u.ALo(7,"i18n"),u._uU(8),u.ALo(9,"i18n"),u.qZA(),u._uU(10,"\n  "),u.qZA(),u._uU(11,"\n\n  "),u.TgZ(12,"bit-form-field",3),u._uU(13,"\n    "),u.TgZ(14,"bit-label"),u._uU(15),u.ALo(16,"i18n"),u.qZA(),u._uU(17,"\n    "),u.TgZ(18,"select",4),u._uU(19,"\n      "),u.YNc(20,Vs,2,2,"option",5),u._uU(21,"\n    "),u.qZA(),u._uU(22,"\n  "),u.qZA(),u._uU(23,"\n\n  "),u.TgZ(24,"button",6),u._uU(25),u.ALo(26,"i18n"),u.qZA(),u._uU(27,"\n"),u.qZA(),u._uU(28,"\n")),2&e&&(u.xp6(2),u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(4),u.s9C("title",u.lcZ(7,7,"exportingOrganizationSecretDataTitle")),u.xp6(2),u.hij("\n      ",u.xi3(9,9,"exportingOrganizationSecretDataDescription",t.orgName),"\n    "),u.xp6(7),u.Oqu(u.lcZ(16,12,"fileFormat")),u.xp6(5),u.Q6J("ngForOf",t.exportFormats),u.xp6(5),u.hij("\n    ",u.lcZ(26,14,"exportData"),"\n  "))},dependencies:[s.sg,me._Y,me.YN,me.Kr,me.EJ,me.JJ,me.JL,me.sg,me.u,Bs.O,Ge.b,Re.u,we.r,Be.d,$e.G,Ve.u,dn,H.C],encapsulation:2});class Ws{constructor(e,t,n){this.dialogRef=e,this.i18nService=t,this.data=n,this.errorLines=n.error.lines}}Ws.ɵfac=function(e){return new(e||Ws)(u.Y36(fe.zj),u.Y36(Ee.D),u.Y36(fe.Kt))},Ws.ɵcmp=u.Xpm({type:Ws,selectors:[["sm-import-error-dialog"]],decls:40,vars:15,consts:[["bitDialogTitle",""],["bitDialogContent",""],["header",""],["bitCell",""],["body",""],["bitDialogFooter",""],["bitButton","","bitDialogClose","","buttonType","primary","type","button"],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell","",1,"tw-break-all"]],template:function(e,t){1&e&&(u.TgZ(0,"bit-dialog"),u._uU(1,"\n  "),u.TgZ(2,"span",0),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"span",1),u._uU(7,"\n    "),u.TgZ(8,"div"),u._uU(9),u.ALo(10,"i18n"),u.qZA(),u._uU(11,"\n    "),u.TgZ(12,"bit-table"),u._uU(13,"\n      "),u.ynx(14,2),u._uU(15,"\n        "),u.TgZ(16,"tr"),u._uU(17,"\n          "),u.TgZ(18,"th",3),u._uU(19),u.ALo(20,"i18n"),u.qZA(),u._uU(21,"\n          "),u.TgZ(22,"th",3),u._uU(23),u.ALo(24,"i18n"),u.qZA(),u._uU(25,"\n        "),u.qZA(),u._uU(26,"\n      "),u.BQk(),u._uU(27,"\n      "),u.YNc(28,Xs,3,1,"ng-template",4),u._uU(29,"\n    "),u.qZA(),u._uU(30,"\n  "),u.qZA(),u._uU(31,"\n  "),u.TgZ(32,"div",5),u._uU(33,"\n    "),u.TgZ(34,"button",6),u._uU(35),u.ALo(36,"i18n"),u.qZA(),u._uU(37,"\n  "),u.qZA(),u._uU(38,"\n"),u.qZA(),u._uU(39,"\n")),2&e&&(u.xp6(3),u.hij("\n    ",u.lcZ(4,5,"importError"),"\n  "),u.xp6(6),u.Oqu(u.lcZ(10,7,"resolveTheErrorsBelowAndTryAgain")),u.xp6(10),u.Oqu(u.lcZ(20,9,"name")),u.xp6(4),u.Oqu(u.lcZ(24,11,"description")),u.xp6(12),u.hij("\n      ",u.lcZ(36,13,"ok"),"\n    "))},dependencies:[s.sg,we.r,Ue.a,_e.f,Ze.a,Ae.Y,be.v,Ze.f,H.C],encapsulation:2});var ec=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class tc{constructor(e,t,n,i,o,s,c,r){this.route=e,this.i18nService=t,this.organizationService=n,this.platformUtilsService=i,this.fileDownloadService=o,this.logService=s,this.secretsManagerPortingApiService=c,this.dialogService=r,this.destroy$=new ue.x,this.orgId=null,this.formGroup=new me.cw({pastedContents:new me.NI("")}),this.submit=()=>ec(this,void 0,void 0,(function*(){var e;const t=document.getElementById("file"),n=yield this.getImportContents(t,this.formGroup.get("pastedContents").value.trim());if(null!=n)try{const t=yield this.secretsManagerPortingApiService.import(this.orgId,n);if((null===(e=null==t?void 0:t.lines)||void 0===e?void 0:e.length)>0)return void this.openImportErrorDialog(t);if(null!=t)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("errorReadingImportFile"));this.platformUtilsService.showToast("success",null,this.i18nService.t("importSuccess")),this.clearForm()}catch(i){this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("errorReadingImportFile")),this.logService.error(i)}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("selectFile"))}))}ngOnInit(){return ec(this,void 0,void 0,(function*(){this.route.params.pipe((0,he.R)(this.destroy$)).subscribe((e=>{this.orgId=e.organizationId}))}))}ngOnDestroy(){return ec(this,void 0,void 0,(function*(){this.destroy$.next(),this.destroy$.complete()}))}getImportContents(e,t){return ec(this,void 0,void 0,(function*(){const n=e.files;if(!(null!=n&&0!==n.length||null!=t&&""!==t))return null;let i=t;if(null!=n&&n.length>0)try{const e=yield this.getFileContents(n[0]);null!=e&&(i=e)}catch(o){this.logService.error(o)}return null==i||""===i?null:i}))}setSelectedFile(e){const t=e.target,n=t.files.length>0?t.files[0]:null;this.selectedFile=n}clearForm(){document.getElementById("file").value="",this.selectedFile=null,this.formGroup.reset({pastedContents:""})}getFileContents(e){return new Promise(((t,n)=>{const i=new FileReader;i.readAsText(e,"utf-8"),i.onload=e=>{t(e.target.result)},i.onerror=()=>{n()}}))}openImportErrorDialog(e){this.dialogService.open(Ws,{data:{error:e}})}}tc.ɵfac=function(e){return new(e||tc)(u.Y36(c.gz),u.Y36(Ee.D),u.Y36(V.Mn),u.Y36(Qe.P),u.Y36(Rs._),u.Y36(Fs.$),u.Y36(Qs),u.Y36(Me.x))},tc.ɵcmp=u.Xpm({type:tc,selectors:[["sm-import"]],decls:48,vars:26,consts:[[1,"tw-max-w-xl",3,"formGroup","bitSubmit"],[1,"file-selector"],["bitButton","","type","button","buttonType","secondary",3,"click"],["hidden","","bitInput","","type","file","id","file","name","file","accept","application/JSON",1,"form-control-file",3,"change"],["fileSelector",""],[1,"my-4"],["for","pastedContents"],["bitInput","","id","pastedContents","name","FileContents","formControlName","pastedContents",1,"form-control"],["bitButton","","bitformButton","","type","submit","buttonType","primary"]],template:function(e,t){if(1&e){const e=u.EpF();u._UZ(0,"sm-header"),u._uU(1,"\n\n"),u.TgZ(2,"form",0),u._uU(3,"\n  "),u.TgZ(4,"bit-form-field"),u._uU(5,"\n    "),u.TgZ(6,"bit-label"),u._uU(7),u.ALo(8,"i18n"),u.qZA(),u._uU(9,"\n    "),u.TgZ(10,"div",1),u._uU(11,"\n      "),u.TgZ(12,"button",2),u.NdJ("click",(function(){u.CHM(e);const t=u.MAs(19);return u.KtG(t.click())})),u._uU(13),u.ALo(14,"i18n"),u.qZA(),u._uU(15),u.ALo(16,"i18n"),u.qZA(),u._uU(17,"\n    "),u.TgZ(18,"input",3,4),u.NdJ("change",(function(e){return t.setSelectedFile(e)})),u.qZA(),u._uU(20,"\n    "),u.TgZ(21,"bit-hint"),u._uU(22),u.ALo(23,"i18n"),u.qZA(),u._uU(24,"\n  "),u.qZA(),u._uU(25,"\n  "),u.TgZ(26,"div",5),u._uU(27),u.ALo(28,"i18n"),u.qZA(),u._uU(29,"\n  "),u.TgZ(30,"bit-form-field"),u._uU(31,"\n    "),u.TgZ(32,"bit-label",6),u._uU(33),u.ALo(34,"i18n"),u.qZA(),u._uU(35,"\n    "),u._UZ(36,"textarea",7),u._uU(37,"\n    "),u.TgZ(38,"bit-hint"),u._uU(39),u.ALo(40,"i18n"),u.qZA(),u._uU(41,"\n  "),u.qZA(),u._uU(42,"\n  "),u.TgZ(43,"button",8),u._uU(44),u.ALo(45,"i18n"),u.qZA(),u._uU(46,"\n"),u.qZA(),u._uU(47,"\n")}if(2&e){let e;u.xp6(2),u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(5),u.Oqu(u.lcZ(8,10,"fileUpload")),u.xp6(6),u.hij("\n        ",u.lcZ(14,12,"chooseFile"),"\n      "),u.xp6(2),u.hij("\n      ",null!==(e=null==t.selectedFile?null:t.selectedFile.name)&&void 0!==e?e:u.lcZ(16,14,"noFileChosen"),"\n    "),u.xp6(7),u.hij("",u.lcZ(23,16,"acceptedFormats")," JSON"),u.xp6(5),u.hij("\n    ",u.lcZ(28,18,"or"),"\n  "),u.xp6(6),u.Oqu(u.lcZ(34,20,"copyPasteImportContents")),u.xp6(6),u.hij("",u.lcZ(40,22,"acceptedFormats")," JSON"),u.xp6(5),u.hij("\n    ",u.lcZ(45,24,"importData"),"\n  ")}},dependencies:[me._Y,me.Fj,me.JJ,me.JL,me.sg,me.u,Re.u,we.r,Be.d,$e.G,Ve.u,Ki.M,dn,H.C],encapsulation:2});const nc=[{path:"import",component:tc,data:{titleId:"importData"}},{path:"export",component:Ks,data:{titleId:"exportData"}}];class ic{}ic.ɵfac=function(e){return new(e||ic)},ic.ɵmod=u.oAB({type:ic}),ic.ɵinj=u.cJS({imports:[c.Bz.forChild(nc),c.Bz]});class oc{}oc.ɵfac=function(e){return new(e||oc)},oc.ɵmod=u.oAB({type:oc}),oc.ɵinj=u.cJS({providers:[Gs,Qs],imports:[f,ic]});var sc=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class cc{canActivate(e){return sc(this,void 0,void 0,(function*(){return!0}))}}cc.ɵfac=function(e){return new(e||cc)},cc.ɵprov=u.Yz7({token:cc,factory:cc.ɵfac});var rc=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class ac{constructor(e,t,n,i,o){this.dialogRef=e,this.secretService=t,this.i18nService=n,this.platformUtilsService=i,this.data=o,this.delete=()=>rc(this,void 0,void 0,(function*(){yield this.secretService.deleteTrashed(this.data.organizationId,this.data.secretIds);const e=1===this.data.secretIds.length?"hardDeleteSuccessToast":"hardDeletesSuccessToast";this.dialogRef.close(this.data.secretIds),this.platformUtilsService.showToast("success",null,this.i18nService.t(e))}))}get title(){return 1===this.data.secretIds.length?"hardDeleteSecret":"hardDeleteSecrets"}get submitButtonText(){return 1===this.data.secretIds.length?"deleteSecret":"deleteSecrets"}}ac.ɵfac=function(e){return new(e||ac)(u.Y36(fe.zj),u.Y36(gt),u.Y36(Ee.D),u.Y36(Qe.P),u.Y36(fe.Kt))},ac.ɵcmp=u.Xpm({type:ac,selectors:[["sm-secret-hard-delete-dialog"]],decls:23,vars:15,consts:[["bitDialogTitle",""],["bitDialogContent",""],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","button","bitButton","","buttonType","primary",3,"bitAction"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""]],template:function(e,t){1&e&&(u.TgZ(0,"bit-simple-dialog"),u._uU(1,"\n  "),u.TgZ(2,"span",0),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"span",1),u._uU(7),u.ALo(8,"i18n"),u.ALo(9,"i18n"),u.qZA(),u._uU(10,"\n  "),u.TgZ(11,"div",2),u._uU(12,"\n    "),u.TgZ(13,"button",3),u._uU(14),u.ALo(15,"i18n"),u.qZA(),u._uU(16,"\n    "),u.TgZ(17,"button",4),u._uU(18),u.ALo(19,"i18n"),u.qZA(),u._uU(20,"\n  "),u.qZA(),u._uU(21,"\n"),u.qZA(),u._uU(22,"\n")),2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,5,t.title)),u.xp6(4),u.hij("\n    ",1===t.data.secretIds.length?u.lcZ(8,7,"hardDeleteSecretConfirmation"):u.lcZ(9,9,"hardDeleteSecretsConfirmation"),"\n  "),u.xp6(6),u.Q6J("bitAction",t.delete),u.xp6(1),u.hij("\n      ",u.lcZ(15,11,t.submitButtonText),"\n    "),u.xp6(4),u.hij("\n      ",u.lcZ(19,13,"close"),"\n    "))},dependencies:[vt.Q,we.r,ft.r,_e.f,H.C],encapsulation:2});var uc=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class lc{constructor(e,t,n,i,o){this.dialogRef=e,this.secretService=t,this.i18nService=n,this.platformUtilsService=i,this.data=o,this.restore=()=>uc(this,void 0,void 0,(function*(){let e="";yield this.secretService.restoreTrashed(this.data.organizationId,this.data.secretIds),e=1===this.data.secretIds.length?"secretRestoredSuccessToast":"secretsRestoredSuccessToast",this.dialogRef.close(this.data.secretIds),this.platformUtilsService.showToast("success",null,this.i18nService.t(e))}))}get title(){return 1===this.data.secretIds.length?"restoreSecret":"restoreSecrets"}}lc.ɵfac=function(e){return new(e||lc)(u.Y36(fe.zj),u.Y36(gt),u.Y36(Ee.D),u.Y36(Qe.P),u.Y36(fe.Kt))},lc.ɵcmp=u.Xpm({type:lc,selectors:[["sm-secret-restore-dialog"]],decls:23,vars:15,consts:[["bitDialogTitle",""],["bitDialogContent",""],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","button","bitButton","","buttonType","primary",3,"bitAction"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""]],template:function(e,t){1&e&&(u.TgZ(0,"bit-simple-dialog"),u._uU(1,"\n  "),u.TgZ(2,"span",0),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"span",1),u._uU(7),u.ALo(8,"i18n"),u.ALo(9,"i18n"),u.qZA(),u._uU(10,"\n  "),u.TgZ(11,"div",2),u._uU(12,"\n    "),u.TgZ(13,"button",3),u._uU(14),u.ALo(15,"i18n"),u.qZA(),u._uU(16,"\n    "),u.TgZ(17,"button",4),u._uU(18),u.ALo(19,"i18n"),u.qZA(),u._uU(20,"\n  "),u.qZA(),u._uU(21,"\n"),u.qZA(),u._uU(22,"\n")),2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,5,t.title)),u.xp6(4),u.hij("\n    ",1===t.data.secretIds.length?u.lcZ(8,7,"restoreSecretPrompt"):u.lcZ(9,9,"restoreSecretsPrompt"),"\n  "),u.xp6(6),u.Q6J("bitAction",t.restore),u.xp6(1),u.hij("\n      ",u.lcZ(15,11,t.title),"\n    "),u.xp6(4),u.hij("\n      ",u.lcZ(19,13,"close"),"\n    "))},dependencies:[vt.Q,we.r,ft.r,_e.f,H.C],encapsulation:2});var dc=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function c(e){try{a(i.next(e))}catch(t){s(t)}}function r(e){try{a(i.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};class pc{constructor(e,t,n){this.route=e,this.secretService=t,this.dialogService=n}ngOnInit(){this.secrets$=this.secretService.secret$.pipe((0,ge.O)(null),(0,po.V)(this.route.params),(0,ve.w)((([e,t])=>dc(this,void 0,void 0,(function*(){return this.organizationId=t.organizationId,yield this.getSecrets()})))))}getSecrets(){return dc(this,void 0,void 0,(function*(){return yield this.secretService.getTrashedSecrets(this.organizationId)}))}openDeleteSecret(e){this.dialogService.open(ac,{data:{secretIds:e,organizationId:this.organizationId}})}openRestoreSecret(e){this.dialogService.open(lc,{data:{secretIds:e,organizationId:this.organizationId}})}}pc.ɵfac=function(e){return new(e||pc)(u.Y36(c.gz),u.Y36(gt),u.Y36(Me.x))},pc.ɵcmp=u.Xpm({type:pc,selectors:[["sm-trash"]],decls:8,vars:4,consts:[[3,"secrets","trash","deleteSecretsEvent","restoreSecretsEvent"]],template:function(e,t){1&e&&(u.TgZ(0,"sm-header"),u._uU(1,"\n  "),u._UZ(2,"sm-new-menu"),u._uU(3,"\n"),u.qZA(),u._uU(4,"\n"),u.TgZ(5,"sm-secrets-list",0),u.NdJ("deleteSecretsEvent",(function(e){return t.openDeleteSecret(e)}))("restoreSecretsEvent",(function(e){return t.openRestoreSecret(e)})),u.ALo(6,"async"),u.qZA(),u._uU(7,"\n")),2&e&&(u.xp6(5),u.Q6J("secrets",u.lcZ(6,2,t.secrets$))("trash",!0))},dependencies:[dn,pn,zn,s.Ov],encapsulation:2});const hc=[{path:"",component:pc}];class gc{}gc.ɵfac=function(e){return new(e||gc)},gc.ɵmod=u.oAB({type:gc}),gc.ɵinj=u.cJS({imports:[c.Bz.forChild(hc),c.Bz]});class vc{}vc.ɵfac=function(e){return new(e||vc)},vc.ɵmod=u.oAB({type:vc}),vc.ɵinj=u.cJS({imports:[f,gc]});const fc=[(0,w.M)("secretsManager",{path:":organizationId",component:U,canActivate:[m.G,cc],data:{organizationPermissions:e=>e.canAccessSecretsManager},children:[{path:"",component:ce,outlet:"sidebar"},{path:"secrets",loadChildren:()=>Do,data:{titleId:"secrets"}},{path:"projects",loadChildren:()=>Co,data:{titleId:"projects"}},{path:"service-accounts",loadChildren:()=>qs,data:{titleId:"serviceAccounts"}},{path:"trash",loadChildren:()=>vc,data:{titleId:"trash"}},{path:"settings",loadChildren:()=>oc},{path:"",loadChildren:()=>wi,pathMatch:"full"}]})];class mc{}mc.ɵfac=function(e){return new(e||mc)},mc.ɵmod=u.oAB({type:mc}),mc.ɵinj=u.cJS({imports:[c.Bz.forChild(fc),c.Bz]});class wc{}wc.ɵfac=function(e){return new(e||wc)},wc.ɵmod=u.oAB({type:wc}),wc.ɵinj=u.cJS({providers:[cc],imports:[i.m,f,mc,p]})}}]);
//# sourceMappingURL=585.945ee9811bea7e023824.js.map