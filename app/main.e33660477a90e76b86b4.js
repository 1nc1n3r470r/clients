(()=>{var e,t,n,i={5012:(e,t,n)=>{"use strict";n.d(t,{f:()=>c});var i=n(47447),r=n(49135),o=n(31878),a=n(53385),s=n(16746),l=n(20911),d=n(53857);class c{}c.ɵfac=function(e){return new(e||c)},c.ɵmod=d["ɵɵdefineNgModule"]({type:c}),c.ɵinj=d["ɵɵdefineInjector"]({imports:[[a.m,s.H,l.D,r.D,i._,o.Q]]})},47447:(e,t,n)=>{"use strict";n.d(t,{_:()=>o});var i=n(53385),r=n(53857);class o{}o.ɵfac=function(e){return new(e||o)},o.ɵmod=r["ɵɵdefineNgModule"]({type:o}),o.ɵinj=r["ɵɵdefineInjector"]({imports:[[i.m]]})},49135:(e,t,n)=>{"use strict";n.d(t,{D:()=>r});var i=n(53857);class r{}r.ɵfac=function(e){return new(e||r)},r.ɵmod=i["ɵɵdefineNgModule"]({type:r}),r.ɵinj=i["ɵɵdefineInjector"]({imports:[[]]})},31878:(e,t,n)=>{"use strict";n.d(t,{Q:()=>o});var i=n(53385),r=n(53857);class o{}o.ɵfac=function(e){return new(e||o)},o.ɵmod=r["ɵɵdefineNgModule"]({type:o}),o.ɵinj=r["ɵɵdefineInjector"]({imports:[[i.m]]})},53385:(e,t,n)=>{"use strict";n.d(t,{m:()=>rt});var i=n(50808),r=n(52187),o=n(81177),a=n.n(o),s=n(38074),l=n.n(s),d=n(20550),c=n.n(d),p=n(47150),u=n.n(p),m=n(97595),h=n.n(m),v=n(98982),g=n.n(v),f=n(75440),x=n.n(f),y=n(11380),S=n.n(y),b=n(76152),w=n.n(b),I=n(92465),C=n.n(I),E=n(11911),k=n.n(E),P=n(95211),A=n.n(P),O=n(3691),T=n.n(O),B=n(47803),M=n.n(B),D=n(97613),F=n.n(D),R=n(26868),U=n.n(R),z=n(77353),N=n.n(z),V=n(19700),H=n.n(V),j=n(91400),L=n.n(j),K=n(84724),G=n.n(K),q=n(74540),_=n.n(q),$=n(90822),W=n.n($),Q=n(11782),Y=n.n(Q),Z=n(3386),J=n.n(Z),X=n(89087),ee=n.n(X),te=n(64449),ne=n.n(te),ie=n(51628),re=n.n(ie),oe=n(31466),ae=n.n(oe),se=n(19098),le=n.n(se),de=n(86476),ce=n.n(de),pe=n(54727),ue=n.n(pe),me=n(60851),he=n.n(me),ve=n(22689),ge=n.n(ve),fe=n(93404),xe=n.n(fe),ye=n(76627),Se=n.n(ye),be=n(11748),we=n.n(be),Ie=n(17945),Ce=n.n(Ie),Ee=n(86670),ke=n.n(Ee),Pe=n(56331),Ae=n.n(Pe),Oe=n(79750),Te=n.n(Oe),Be=n(82987),Me=n.n(Be),De=n(19621),Fe=n.n(De),Re=n(60530),Ue=n.n(Re),ze=n(35403),Ne=n.n(ze),Ve=n(53292),He=n.n(Ve),je=n(57810),Le=n.n(je),Ke=n(9746),Ge=n.n(Ke),qe=n(88549),_e=n.n(qe),$e=n(50273),We=n.n($e),Qe=n(79757),Ye=n.n(Qe),Ze=n(68405),Je=n(2982),Xe=n(11859),et=n(25635),tt=n(51470),nt=n(1791),it=n(53857);(0,r.registerLocaleData)(a(),"af"),(0,r.registerLocaleData)(l(),"az"),(0,r.registerLocaleData)(c(),"be"),(0,r.registerLocaleData)(u(),"bg"),(0,r.registerLocaleData)(h(),"bn"),(0,r.registerLocaleData)(g(),"bs"),(0,r.registerLocaleData)(x(),"ca"),(0,r.registerLocaleData)(S(),"cs"),(0,r.registerLocaleData)(w(),"da"),(0,r.registerLocaleData)(C(),"de"),(0,r.registerLocaleData)(k(),"el"),(0,r.registerLocaleData)(A(),"en-GB"),(0,r.registerLocaleData)(T(),"en-IN"),(0,r.registerLocaleData)(M(),"eo"),(0,r.registerLocaleData)(F(),"es"),(0,r.registerLocaleData)(U(),"et"),(0,r.registerLocaleData)(N(),"fi"),(0,r.registerLocaleData)(H(),"fil"),(0,r.registerLocaleData)(L(),"fr"),(0,r.registerLocaleData)(G(),"he"),(0,r.registerLocaleData)(_(),"hi"),(0,r.registerLocaleData)(W(),"hr"),(0,r.registerLocaleData)(Y(),"hu"),(0,r.registerLocaleData)(J(),"id"),(0,r.registerLocaleData)(ee(),"it"),(0,r.registerLocaleData)(ne(),"ja"),(0,r.registerLocaleData)(re(),"ka"),(0,r.registerLocaleData)(ae(),"km"),(0,r.registerLocaleData)(le(),"kn"),(0,r.registerLocaleData)(ce(),"ko"),(0,r.registerLocaleData)(ue(),"lv"),(0,r.registerLocaleData)(he(),"ml"),(0,r.registerLocaleData)(ge(),"nb"),(0,r.registerLocaleData)(xe(),"nl"),(0,r.registerLocaleData)(Se(),"nn"),(0,r.registerLocaleData)(we(),"pl"),(0,r.registerLocaleData)(Ce(),"pt-BR"),(0,r.registerLocaleData)(ke(),"pt-PT"),(0,r.registerLocaleData)(Ae(),"ro"),(0,r.registerLocaleData)(Te(),"ru"),(0,r.registerLocaleData)(Me(),"si"),(0,r.registerLocaleData)(Fe(),"sk"),(0,r.registerLocaleData)(Ue(),"sl"),(0,r.registerLocaleData)(Ne(),"sr"),(0,r.registerLocaleData)(He(),"sv"),(0,r.registerLocaleData)(Le(),"tr"),(0,r.registerLocaleData)(Ge(),"uk"),(0,r.registerLocaleData)(_e(),"vi"),(0,r.registerLocaleData)(We(),"zh-CN"),(0,r.registerLocaleData)(Ye(),"zh-TW");class rt{}rt.ɵfac=function(e){return new(e||rt)},rt.ɵmod=it["ɵɵdefineNgModule"]({type:rt}),rt.ɵinj=it["ɵɵdefineInjector"]({providers:[r.DatePipe],imports:[[r.CommonModule,i.DragDropModule,Ze.FormsModule,Xe.InfiniteScrollModule,tt.b,Ze.ReactiveFormsModule,Je.RouterModule,nt.TX,nt.hJ,nt.df,et.ToastrModule,nt.TX,nt.hJ,nt.$9,nt.kx,nt.oc],r.CommonModule,i.DragDropModule,Ze.FormsModule,Xe.InfiniteScrollModule,tt.b,Ze.ReactiveFormsModule,Je.RouterModule,nt.TX,nt.hJ,nt.df,et.ToastrModule,nt.TX,nt.hJ,nt.$9,nt.kx,nt.oc]})},16746:(e,t,n)=>{"use strict";n.d(t,{H:()=>a});var i=n(53385),r=n(18126),o=n(53857);class a{}a.ɵfac=function(e){return new(e||a)},a.ɵmod=o["ɵɵdefineNgModule"]({type:a}),a.ɵinj=o["ɵɵdefineInjector"]({providers:[r.n],imports:[[i.m]]})},18126:(e,t,n)=>{"use strict";n.d(t,{n:()=>y});var i=n(56130),r=n(76899),o=n(33652),a=n(62247),s=n(81394),l=n(70368),d=n(53857),c=n(64184),p=n(41320),u=n(75402),m=n(3906),h=n(56815),v=n(44279),g=n(94820),f=n(55602),x=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class y extends o.n{constructor(e,t,n,r,o,a,s,l){super(e,t,n,r,o,a),this.i18nService=s,this.apiService=l,this._collapsedFilterNodes=new i.X(null),this.collapsedFilterNodes$=this._collapsedFilterNodes.asObservable()}buildCollapsedFilterNodes(){const e=Object.create(null,{buildCollapsedFilterNodes:{get:()=>super.buildCollapsedFilterNodes}});return x(this,void 0,void 0,(function*(){const t=yield e.buildCollapsedFilterNodes.call(this);return this._collapsedFilterNodes.next(t),t}))}storeCollapsedFilterNodes(e){const t=Object.create(null,{storeCollapsedFilterNodes:{get:()=>super.storeCollapsedFilterNodes}});return x(this,void 0,void 0,(function*(){yield t.storeCollapsedFilterNodes.call(this,e),this._collapsedFilterNodes.next(e)}))}ensureVaultFiltersAreExpanded(){const e=Object.create(null,{buildCollapsedFilterNodes:{get:()=>super.buildCollapsedFilterNodes}});return x(this,void 0,void 0,(function*(){const t=yield e.buildCollapsedFilterNodes.call(this);t.has("vaults")&&(t.delete("vaults"),yield this.storeCollapsedFilterNodes(t))}))}buildAdminCollections(e){return x(this,void 0,void 0,(function*(){let t=[];const n=yield this.apiService.getCollections(e);if(null!=(null==n?void 0:n.data)&&n.data.length){const e=n.data.map((e=>new s.F(new a.Z(e))));t=yield this.collectionService.decryptMany(e)}const i=new l.n;i.name=this.i18nService.t("unassigned"),i.organizationId=e,t.push(i);const o=yield this.collectionService.getAllNested(t);return new r.H({fullList:t,nestedList:o})}))}}y.ɵfac=function(e){return new(e||y)(d["ɵɵinject"](c.b),d["ɵɵinject"](p.M),d["ɵɵinject"](u.s),d["ɵɵinject"](m.u),d["ɵɵinject"](h.a),d["ɵɵinject"](v.d),d["ɵɵinject"](g.D),d["ɵɵinject"](f.s))},y.ɵprov=d["ɵɵdefineInjectable"]({token:y,factory:y.ɵfac})},20911:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var i=n(53385),r=n(53857);class o{}o.ɵfac=function(e){return new(e||o)},o.ɵmod=r["ɵɵdefineNgModule"]({type:o}),o.ɵinj=r["ɵɵdefineInjector"]({imports:[[i.m]]})},7448:(e,t,n)=>{"use strict";n.d(t,{v:()=>c});var i=n(53857),r=n(2982),o=n(41320),a=n(32100),s=n(94820),l=n(72523),d=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class c{constructor(e,t,n,i,r){this.router=e,this.organizationService=t,this.platformUtilsService=n,this.i18nService=i,this.syncService=r}canActivate(e,t){return d(this,void 0,void 0,(function*(){null==(yield this.syncService.getLastSync())&&(yield this.syncService.fullSync(!1));const n=yield this.organizationService.get(e.params.organizationId);if(null==n)return this.router.createUrlTree(["/"]);if(!n.isOwner&&!n.enabled)return this.platformUtilsService.showToast("error",null,this.i18nService.t("organizationIsDisabled")),this.router.createUrlTree(["/"]);const i=null==e.data?[]:e.data.permissions;if(null!=i&&!n.hasAnyPermission(i)){const e=t.root.queryParamMap.get("itemId")||t.root.queryParamMap.get("cipherId");return e?this.router.createUrlTree(["/vault"],{queryParams:{itemId:e}}):(this.platformUtilsService.showToast("error",null,this.i18nService.t("accessDenied")),this.router.createUrlTree(["/"]))}return!0}))}}c.ɵfac=function(e){return new(e||c)(i["ɵɵinject"](r.Router),i["ɵɵinject"](o.M),i["ɵɵinject"](a.P),i["ɵɵinject"](s.D),i["ɵɵinject"](l._))},c.ɵprov=i["ɵɵdefineInjectable"]({token:c,factory:c.ɵfac})},74965:(e,t,n)=>{"use strict";var i,r=n(23457),o=n(53857),a=(n(59908),n(38291)),s=n(50808),l=n(52781),d=n(68405),c=n(15574),p=n(2982),u=n(11859),m=n(51470);!function(e){e[e.LoggedOut=0]="LoggedOut",e[e.Locked=1]="Locked",e[e.Unlocked=2]="Unlocked"}(i||(i={}));class h{}class v{}var g=n(77128),f=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class x{constructor(e,t,n,i){this.authService=e,this.router=t,this.messagingService=n,this.keyConnectorService=i}canActivate(e,t){return f(this,void 0,void 0,(function*(){const e=yield this.authService.getAuthStatus();return e===i.LoggedOut?(this.messagingService.send("authBlocked",{url:t.url}),!1):e===i.Locked?(null!=t&&this.messagingService.send("lockedUrl",{url:t.url}),this.router.createUrlTree(["lock"],{queryParams:{promptBiometric:!0}})):!(!t.url.includes("remove-password")&&(yield this.keyConnectorService.getConvertAccountRequired()))||this.router.createUrlTree(["/remove-password"])}))}}x.ɵfac=function(e){return new(e||x)(o["ɵɵinject"](h),o["ɵɵinject"](p.Router),o["ɵɵinject"](v),o["ɵɵinject"](g.J))},x.ɵprov=o["ɵɵdefineInjectable"]({token:x,factory:x.ɵfac});var y=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class S{constructor(e,t){this.authService=e,this.router=t,this.homepage="vault",this.loginpage="login"}canActivate(){return y(this,void 0,void 0,(function*(){const e=yield this.authService.getAuthStatus();if(e===i.Locked)return!0;const t=e===i.LoggedOut?this.loginpage:this.homepage;return this.router.createUrlTree([t])}))}}S.ɵfac=function(e){return new(e||S)(o["ɵɵinject"](h),o["ɵɵinject"](p.Router))},S.ɵprov=o["ɵɵdefineInjectable"]({token:S,factory:S.ɵfac});var b=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class w{constructor(e,t){this.authService=e,this.router=t,this.homepage="vault"}canActivate(){return b(this,void 0,void 0,(function*(){const e=yield this.authService.getAuthStatus();return e===i.LoggedOut||(e===i.Locked?this.router.createUrlTree(["lock"]):this.router.createUrlTree([this.homepage]))}))}}w.ɵfac=function(e){return new(e||w)(o["ɵɵinject"](h),o["ɵɵinject"](p.Router))},w.ɵprov=o["ɵɵdefineInjectable"]({token:w,factory:w.ɵfac});class I{}var C=n(87714),E=n(32100),k=n(94820),P=n(64184),A=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class O{constructor(e,t,n,i,r){this.router=e,this.platformUtilService=t,this.i18nService=n,this.route=i,this.stateService=r,this.loading=!0,this.authed=!1,this.requiredParameters=[],this.failedShortMessage="inviteAcceptFailedShort",this.failedMessage="inviteAcceptFailed"}ngOnInit(){this.route.queryParams.pipe((0,C.P)()).subscribe((e=>A(this,void 0,void 0,(function*(){let t=this.requiredParameters.some((t=>null==(null==e?void 0:e[t])||""===e[t])),n=null;if(!t)if(this.authed=yield this.stateService.getIsAuthenticated(),this.authed)try{yield this.authedHandler(e)}catch(i){t=!0,n=i.message}else this.email=e.email,yield this.unauthedHandler(e);if(t){const e=null!=n?this.i18nService.t(this.failedShortMessage,n):this.i18nService.t(this.failedMessage);this.platformUtilService.showToast("error",null,e,{timeout:1e4}),this.router.navigate(["/"])}this.loading=!1}))))}}O.ɵfac=function(e){return new(e||O)(o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](P.b))},O.ɵdir=o["ɵɵdefineDirective"]({type:O});var T=n(55602),B=n(52187),M=n(17404),D=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function F(e,t){1&e&&(o["ɵɵelementStart"](0,"div",2),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div"),o["ɵɵtext"](3,"\n    "),o["ɵɵelement"](4,"img",3),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"p",4),o["ɵɵtext"](7,"\n      "),o["ɵɵelement"](8,"i",5),o["ɵɵpipe"](9,"i18n"),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"span",6),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](8),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](9,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,4,"loading")))}const R=function(e){return{email:e}};function U(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",7),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",8),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",9),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"p",10),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"div",11),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"div",12),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"p",4),o["ɵɵtext"](15),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n          "),o["ɵɵelementStart"](17,"p"),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n          "),o["ɵɵelement"](21,"hr"),o["ɵɵtext"](22,"\n          "),o["ɵɵelementStart"](23,"div",13),o["ɵɵtext"](24,"\n            "),o["ɵɵelementStart"](25,"a",14),o["ɵɵtext"](26),o["ɵɵpipe"](27,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n            "),o["ɵɵelementStart"](29,"a",15),o["ɵɵtext"](30),o["ɵɵpipe"](31,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,7,"emergencyAccess")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("\n            ",e.name,"\n          "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](19,9,"acceptEmergencyAccess")),o["ɵɵadvance"](7),o["ɵɵproperty"]("queryParams",o["ɵɵpureFunction1"](15,R,e.email)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](27,11,"logIn"),"\n            "),o["ɵɵadvance"](3),o["ɵɵproperty"]("queryParams",o["ɵɵpureFunction1"](17,R,e.email)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](31,13,"createAccount"),"\n            ")}}class z extends O{constructor(e,t,n,i,r,o){super(e,t,n,i,o),this.apiService=r,this.requiredParameters=["id","name","email","token"],this.failedShortMessage="emergencyInviteAcceptFailedShort",this.failedMessage="emergencyInviteAcceptFailed"}authedHandler(e){return D(this,void 0,void 0,(function*(){const t=new I;t.token=e.token,this.actionPromise=this.apiService.postEmergencyAccessAccept(e.id,t),yield this.actionPromise,this.platformUtilService.showToast("success",this.i18nService.t("inviteAccepted"),this.i18nService.t("emergencyInviteAcceptedDesc"),{timeout:1e4}),this.router.navigate(["/vault"])}))}unauthedHandler(e){return D(this,void 0,void 0,(function*(){this.name=e.name,null!=this.name&&(this.name=this.name.replace(/\+/g," "))}))}}z.ɵfac=function(e){return new(e||z)(o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](P.b))},z.ɵcmp=o["ɵɵdefineComponent"]({type:z,selectors:[["app-accept-emergency"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:4,vars:2,consts:[["class","mt-5 d-flex justify-content-center",4,"ngIf"],["class","container",4,"ngIf"],[1,"mt-5","d-flex","justify-content-center"],["alt","Bitwarden",1,"mb-4","logo","logo-themed"],[1,"text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-2x","text-muted",3,"title"],[1,"sr-only"],[1,"container"],[1,"row","justify-content-md-center","mt-5"],[1,"col-5"],[1,"lead","text-center","mb-4"],[1,"card","d-block"],[1,"card-body"],[1,"d-flex"],["routerLink","/login",1,"btn","btn-primary","btn-block",3,"queryParams"],["routerLink","/register",1,"btn","btn-primary","btn-block","ml-2","mt-0",3,"queryParams"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,F,17,6,"div",0),o["ɵɵtext"](1,"\n"),o["ɵɵtemplate"](2,U,38,19,"div",1),o["ɵɵtext"](3,"\n")),2&e&&(o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&!t.authed))},directives:[B.NgIf,p.RouterLinkWithHref],pipes:[M.C],encapsulation:2});var N=n(14512);class V{}var H=n(92785),j=n(44279),L=n(27885),K=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function G(e,t){1&e&&(o["ɵɵelementStart"](0,"div",2),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div"),o["ɵɵtext"](3,"\n    "),o["ɵɵelement"](4,"img",3),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"p",4),o["ɵɵtext"](7,"\n      "),o["ɵɵelement"](8,"i",5),o["ɵɵpipe"](9,"i18n"),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"span",6),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](8),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](9,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,4,"loading")))}const q=function(e){return{email:e}};function _(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",7),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",8),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",9),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"p",10),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"div",11),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"div",12),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"p",4),o["ɵɵtext"](15),o["ɵɵelementStart"](16,"strong",13),o["ɵɵtext"](17),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n          "),o["ɵɵelementStart"](20,"p"),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n          "),o["ɵɵelement"](24,"hr"),o["ɵɵtext"](25,"\n          "),o["ɵɵelementStart"](26,"div",14),o["ɵɵtext"](27,"\n            "),o["ɵɵelementStart"](28,"a",15),o["ɵɵtext"](29),o["ɵɵpipe"](30,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n            "),o["ɵɵelementStart"](32,"a",16),o["ɵɵtext"](33),o["ɵɵpipe"](34,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,8,"joinOrganization")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("\n            ",e.orgName,"\n            "),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.email),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](22,10,"joinOrganizationDesc")),o["ɵɵadvance"](7),o["ɵɵproperty"]("queryParams",o["ɵɵpureFunction1"](16,q,e.email)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](30,12,"logIn"),"\n            "),o["ɵɵadvance"](3),o["ɵɵproperty"]("queryParams",o["ɵɵpureFunction1"](18,q,e.email)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](34,14,"createAccount"),"\n            ")}}class $ extends O{constructor(e,t,n,i,r,o,a,s,l){super(e,t,n,i,o),this.apiService=r,this.cryptoService=a,this.policyService=s,this.logService=l,this.requiredParameters=["organizationId","organizationUserId","token"]}authedHandler(e){return K(this,void 0,void 0,(function*(){this.actionPromise=this.prepareAcceptRequest(e).then((t=>K(this,void 0,void 0,(function*(){yield this.apiService.postOrganizationUserAccept(e.organizationId,e.organizationUserId,t)})))),yield this.actionPromise,this.platformUtilService.showToast("success",this.i18nService.t("inviteAccepted"),this.i18nService.t("inviteAcceptedDesc"),{timeout:1e4}),yield this.stateService.setOrganizationInvitation(null),this.router.navigate(["/vault"])}))}unauthedHandler(e){return K(this,void 0,void 0,(function*(){this.orgName=e.organizationName,null!=this.orgName&&(this.orgName=this.orgName.replace(/\+/g," ")),yield this.stateService.setOrganizationInvitation(e)}))}prepareAcceptRequest(e){return K(this,void 0,void 0,(function*(){const t=new V;if(t.token=e.token,yield this.performResetPasswordAutoEnroll(e)){const n=yield this.apiService.getOrganizationKeys(e.organizationId);if(null==n)throw new Error(this.i18nService.t("resetPasswordOrgKeysError"));const i=N.c.fromB64ToArray(n.publicKey),r=yield this.cryptoService.getEncKey(),o=yield this.cryptoService.rsaEncrypt(r.key,i.buffer);t.resetPasswordKey=o.encryptedString}return t}))}performResetPasswordAutoEnroll(e){return K(this,void 0,void 0,(function*(){let t=null;try{const n=yield this.apiService.getPoliciesByToken(e.organizationId,e.token,e.email,e.organizationUserId);t=this.policyService.mapPoliciesFromToken(n)}catch(n){this.logService.error(n)}if(null!=t){const n=this.policyService.getResetPasswordPolicyOptions(t,e.organizationId);return n[1]&&n[0].autoEnrollEnabled}return!1}))}}$.ɵfac=function(e){return new(e||$)(o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](L.$))},$.ɵcmp=o["ɵɵdefineComponent"]({type:$,selectors:[["app-accept-organization"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:4,vars:2,consts:[["class","mt-5 d-flex justify-content-center",4,"ngIf"],["class","container",4,"ngIf"],[1,"mt-5","d-flex","justify-content-center"],["src","../../images/logo-dark@2x.png","alt","Bitwarden",1,"mb-4","logo"],[1,"text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-2x","text-muted",3,"title"],[1,"sr-only"],[1,"container"],[1,"row","justify-content-md-center","mt-5"],[1,"col-5"],[1,"lead","text-center","mb-4"],[1,"card","d-block"],[1,"card-body"],[1,"d-block","mt-2"],[1,"d-flex"],["routerLink","/login",1,"btn","btn-primary","btn-block",3,"queryParams"],["routerLink","/register",1,"btn","btn-primary","btn-block","ml-2","mt-0",3,"queryParams"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,G,17,6,"div",0),o["ɵɵtext"](1,"\n"),o["ɵɵtemplate"](2,_,41,20,"div",1),o["ɵɵtext"](3,"\n")),2&e&&(o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&!t.authed))},directives:[B.NgIf,p.RouterLinkWithHref],pipes:[M.C],encapsulation:2});class W{constructor(e){this.email=e}}var Q=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};var Y=n(24610),Z=n(62374),J=n(85356);class X extends class{constructor(e,t,n,i,r){this.router=e,this.i18nService=t,this.apiService=n,this.platformUtilsService=i,this.logService=r,this.email="",this.successRoute="login"}submit(){return Q(this,void 0,void 0,(function*(){if(null!=this.email&&""!==this.email)if(-1!==this.email.indexOf("@"))try{this.formPromise=this.apiService.postPasswordHint(new W(this.email)),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("masterPassSent")),null!=this.onSuccessfulSubmit?this.onSuccessfulSubmit():null!=this.router&&this.router.navigate([this.successRoute])}catch(e){this.logService.error(e)}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("invalidEmail"));else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("emailRequired"))}))}}{constructor(e,t,n,i,r){super(e,t,n,i,r)}}X.ɵfac=function(e){return new(e||X)(o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$))},X.ɵcmp=o["ɵɵdefineComponent"]({type:X,selectors:[["app-hint"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:52,vars:22,consts:[["ngNativeValidate","",1,"container",3,"appApiAction","ngSubmit"],["form",""],[1,"row","justify-content-md-center","mt-5"],[1,"col-5"],[1,"lead","text-center","mb-4"],[1,"card","d-block"],[1,"card-body"],[1,"form-group"],["for","email"],["id","email","type","text","name","Email","required","","appAutofocus","","inputmode","email","appInputVerbatim","false",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-text","text-muted"],[1,"d-flex"],["type","submit",1,"btn","btn-primary","btn-block","btn-submit",3,"disabled"],[3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["routerLink","/login",1,"btn","btn-outline-secondary","btn-block","ml-2","mt-0"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",3),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"p",4),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"div",5),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"div",6),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"div",7),o["ɵɵtext"](16,"\n            "),o["ɵɵelementStart"](17,"label",8),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n            "),o["ɵɵelementStart"](21,"input",9),o["ɵɵlistener"]("ngModelChange",(function(e){return t.email=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n            "),o["ɵɵelementStart"](23,"small",10),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n          "),o["ɵɵelement"](28,"hr"),o["ɵɵtext"](29,"\n          "),o["ɵɵelementStart"](30,"div",11),o["ɵɵtext"](31,"\n            "),o["ɵɵelementStart"](32,"button",12),o["ɵɵtext"](33,"\n              "),o["ɵɵelementStart"](34,"span",13),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n              "),o["ɵɵelement"](38,"i",14),o["ɵɵpipe"](39,"i18n"),o["ɵɵtext"](40,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n            "),o["ɵɵelementStart"](42,"a",15),o["ɵɵtext"](43),o["ɵɵpipe"](44,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,10,"passwordHint")),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](19,12,"emailAddress")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.email),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](25,14,"enterEmailToGetHint")),o["ɵɵadvance"](8),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](36,16,"submit")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](39,18,"loading")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](44,20,"cancel"),"\n            ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,d.DefaultValueAccessor,d.RequiredValidator,Z.U,J.b,d.NgControlStatus,d.NgModel,p.RouterLinkWithHref],pipes:[M.C],encapsulation:2});var ee,te,ne=n(20236);!function(e){e[e.ServerAuthorization=1]="ServerAuthorization",e[e.LocalAuthorization=2]="LocalAuthorization"}(ee||(ee={})),function(e){e.Auto="auto",e.Biometric="biometric"}(te||(te={}));var ie=n(71498);class re{}class oe{}class ae{}var se=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class le{constructor(e,t,n,i,r,o,a,s,l,d,c,p){this.router=e,this.i18nService=t,this.platformUtilsService=n,this.messagingService=i,this.cryptoService=r,this.vaultTimeoutService=o,this.environmentService=a,this.stateService=s,this.apiService=l,this.logService=d,this.keyConnectorService=c,this.ngZone=p,this.masterPassword="",this.pin="",this.showPassword=!1,this.pinLock=!1,this.webVaultHostname="",this.successRoute="vault",this.invalidPinAttempts=0}ngOnInit(){return se(this,void 0,void 0,(function*(){yield this.load(),this.stateService.activeAccount.subscribe((()=>se(this,void 0,void 0,(function*(){yield this.load()}))))}))}submit(){return se(this,void 0,void 0,(function*(){if(this.pinLock&&(null==this.pin||""===this.pin))return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("pinRequired"));if(!this.pinLock&&(null==this.masterPassword||""===this.masterPassword))return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPassRequired"));const e=yield this.stateService.getKdfType(),t=yield this.stateService.getKdfIterations();if(this.pinLock){let i=!0;try{if(this.pinSet[0]){const n=yield this.cryptoService.makeKeyFromPin(this.pin,this.email,e,t,yield this.stateService.getDecryptedPinProtected()),r=yield this.cryptoService.getEncKey(n),o=yield this.stateService.getProtectedPin();i=(yield this.cryptoService.decryptToUtf8(new ie._(o),r))!==this.pin,i||(yield this.setKeyAndContinue(n))}else{const n=yield this.cryptoService.makeKeyFromPin(this.pin,this.email,e,t);i=!1,yield this.setKeyAndContinue(n)}}catch(n){i=!0}if(i){if(this.invalidPinAttempts++,this.invalidPinAttempts>=5)return void this.messagingService.send("logout");this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("invalidPin"))}}else{const n=yield this.cryptoService.makeKey(this.masterPassword,this.email,e,t);let r=!1;if(null!=(yield this.cryptoService.getKeyHash()))r=yield this.cryptoService.compareAndUpdateKeyHash(this.masterPassword,n);else{const e=new re,t=yield this.cryptoService.hashPassword(this.masterPassword,n,ee.ServerAuthorization);e.masterPasswordHash=t;try{this.formPromise=this.apiService.postAccountVerifyPassword(e),yield this.formPromise,r=!0;const t=yield this.cryptoService.hashPassword(this.masterPassword,n,ee.LocalAuthorization);yield this.cryptoService.setKeyHash(t)}catch(i){this.logService.error(i)}}if(r){if(this.pinSet[0]){const i=yield this.stateService.getProtectedPin(),r=yield this.cryptoService.getEncKey(n),o=yield this.cryptoService.decryptToUtf8(new ie._(i),r),a=yield this.cryptoService.makePinKey(o,this.email,e,t);yield this.stateService.setDecryptedPinProtected(yield this.cryptoService.encrypt(n.key,a))}yield this.setKeyAndContinue(n)}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("invalidMasterPassword"))}}))}logOut(){return se(this,void 0,void 0,(function*(){(yield this.platformUtilsService.showDialog(this.i18nService.t("logOutConfirmation"),this.i18nService.t("logOut"),this.i18nService.t("logOut"),this.i18nService.t("cancel")))&&this.messagingService.send("logout")}))}unlockBiometric(){return se(this,void 0,void 0,(function*(){if(!this.biometricLock)return;const e=null!=(yield this.cryptoService.getKey(te.Biometric));return e&&(yield this.doContinue()),e}))}togglePassword(){this.showPassword=!this.showPassword;const e=document.getElementById(this.pinLock?"pin":"masterPassword");this.ngZone.isStable?e.focus():this.ngZone.onStable.pipe((0,ne.q)(1)).subscribe((()=>e.focus()))}setKeyAndContinue(e){return se(this,void 0,void 0,(function*(){yield this.cryptoService.setKey(e),yield this.doContinue()}))}doContinue(){return se(this,void 0,void 0,(function*(){yield this.stateService.setBiometricLocked(!1),yield this.stateService.setEverBeenUnlocked(!0);const e=yield this.stateService.getDisableFavicon();yield this.stateService.setDisableFavicon(!!e),this.messagingService.send("unlocked"),null!=this.onSuccessfulSubmit?yield this.onSuccessfulSubmit():null!=this.router&&this.router.navigate([this.successRoute])}))}load(){return se(this,void 0,void 0,(function*(){this.pinSet=yield this.vaultTimeoutService.isPinLockSet(),this.pinLock=this.pinSet[0]&&null!=(yield this.stateService.getDecryptedPinProtected())||this.pinSet[1],this.supportsBiometric=yield this.platformUtilsService.supportsBiometric(),this.biometricLock=(yield this.vaultTimeoutService.isBiometricLockSet())&&((yield this.cryptoService.hasKeyStored(te.Biometric))||!this.platformUtilsService.supportsSecureStorage()),this.biometricText=yield this.stateService.getBiometricText(),this.email=yield this.stateService.getEmail();const e=yield this.keyConnectorService.getUsesKeyConnector();this.hideInput=e&&!this.pinLock,!e||this.biometricLock||this.pinLock||(yield this.vaultTimeoutService.logOut());const t=this.environmentService.getWebVaultUrl(),n="https://vault.bitwarden.com"===t?"https://bitwarden.com":t;this.webVaultHostname=N.c.getHostname(n)}))}}le.ɵfac=function(e){return new(e||le)(o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](oe),o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](g.J),o["ɵɵdirectiveInject"](o.NgZone))},le.ɵdir=o["ɵɵdefineDirective"]({type:le});var de=n(99054);class ce{constructor(e,t,n,i){this.router=e,this.activatedRoute=t,this.titleService=n,this.previousUrl=void 0,this.currentUrl=void 0,this.currentUrl=this.router.url,e.events.pipe((0,de.h)((e=>e instanceof p.NavigationEnd))).subscribe((e=>{var t,n,r,o,a,s,l;this.currentUrl=e.url;let d=i.t("pageTitle","Bitwarden"),c=this.activatedRoute.firstChild;for(;c.firstChild;)c=c.firstChild;const p=null===(n=null===(t=null==c?void 0:c.snapshot)||void 0===t?void 0:t.data)||void 0===n?void 0:n.titleId,u=null===(o=null===(r=null==c?void 0:c.snapshot)||void 0===r?void 0:r.data)||void 0===o?void 0:o.title,m=null===(l=!(null===(s=null===(a=null==c?void 0:c.snapshot)||void 0===a?void 0:a.data)||void 0===s?void 0:s.doNotSaveUrl))||void 0===l||l;if(null!=p||null!=u){const e=null!=u?u:i.t(p);null!=e&&""!==e&&(d=e+" | "+d)}this.titleService.setTitle(d),m&&this.setPreviousUrl(this.currentUrl)}))}getPreviousUrl(){return this.previousUrl}setPreviousUrl(e){this.previousUrl=e}}ce.ɵfac=function(e){return new(e||ce)(o["ɵɵinject"](p.Router),o["ɵɵinject"](p.ActivatedRoute),o["ɵɵinject"](r.Title),o["ɵɵinject"](k.D))},ce.ɵprov=o["ɵɵdefineInjectable"]({token:ce,factory:ce.ɵfac});class pe{constructor(e,t){this.el=e,this.renderer=t}set appA11yTitle(e){this.title=e}ngOnInit(){this.el.nativeElement.hasAttribute("title")||this.renderer.setAttribute(this.el.nativeElement,"title",this.title),this.el.nativeElement.hasAttribute("aria-label")||this.renderer.setAttribute(this.el.nativeElement,"aria-label",this.title)}}pe.ɵfac=function(e){return new(e||pe)(o["ɵɵdirectiveInject"](o.ElementRef),o["ɵɵdirectiveInject"](o.Renderer2))},pe.ɵdir=o["ɵɵdefineDirective"]({type:pe,selectors:[["","appA11yTitle",""]],inputs:{appA11yTitle:"appA11yTitle"}});var ue=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const me=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}};class he extends le{constructor(e,t,n,i,r,o,a,s,l,d,c,p,u){super(e,t,n,i,r,o,a,l,d,c,p,u),this.routerService=s}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return ue(this,void 0,void 0,(function*(){yield e.ngOnInit.call(this),this.onSuccessfulSubmit=()=>ue(this,void 0,void 0,(function*(){const e=this.routerService.getPreviousUrl();e&&"/"!==e&&-1===e.indexOf("lock")&&(this.successRoute=e),this.router.navigateByUrl(this.successRoute)}))}))}}var ve;he.ɵfac=function(e){return new(e||he)(o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](oe),o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](ce),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](g.J),o["ɵɵdirectiveInject"](o.NgZone))},he.ɵcmp=o["ɵɵdefineComponent"]({type:he,selectors:[["app-lock"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:68,vars:31,consts:[["ngNativeValidate","",1,"container",3,"appApiAction","ngSubmit"],["form",""],[1,"row","justify-content-md-center","mt-5"],[1,"col-5"],[1,"text-center","mb-4"],["aria-hidden","true",1,"bwi","bwi-lock","bwi-4x","text-muted"],[1,"lead","text-center","mx-4","mb-4"],[1,"card","d-block"],[1,"card-body"],[1,"form-group"],["for","masterPassword"],[1,"d-flex"],["id","masterPassword","name","MasterPassword","required","","appAutofocus","","appInputVerbatim","",1,"text-monospace","form-control",3,"type","ngModel","ngModelChange"],["type","button",1,"ml-1","btn","btn-link",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],[1,"text-muted","form-text"],["type","submit",1,"btn","btn-primary","btn-block","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-unlock"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button",1,"btn","btn-outline-secondary","btn-block","ml-2","mt-0",3,"click"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",3),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"p",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelement"](9,"i",5),o["ɵɵtext"](10,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n      "),o["ɵɵelementStart"](12,"p",6),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n      "),o["ɵɵelementStart"](16,"div",7),o["ɵɵtext"](17,"\n        "),o["ɵɵelementStart"](18,"div",8),o["ɵɵtext"](19,"\n          "),o["ɵɵelementStart"](20,"div",9),o["ɵɵtext"](21,"\n            "),o["ɵɵelementStart"](22,"label",10),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n            "),o["ɵɵelementStart"](26,"div",11),o["ɵɵtext"](27,"\n              "),o["ɵɵelementStart"](28,"input",12),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPassword=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n              "),o["ɵɵelementStart"](30,"button",13),o["ɵɵlistener"]("click",(function(){return t.togglePassword()})),o["ɵɵpipe"](31,"i18n"),o["ɵɵtext"](32,"\n                "),o["ɵɵelement"](33,"i",14),o["ɵɵtext"](34,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n            "),o["ɵɵelementStart"](37,"small",15),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n          "),o["ɵɵelement"](42,"hr"),o["ɵɵtext"](43,"\n          "),o["ɵɵelementStart"](44,"div",11),o["ɵɵtext"](45,"\n            "),o["ɵɵelementStart"](46,"button",16),o["ɵɵtext"](47,"\n              "),o["ɵɵelementStart"](48,"span"),o["ɵɵtext"](49," "),o["ɵɵelement"](50,"i",17),o["ɵɵtext"](51),o["ɵɵpipe"](52,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n              "),o["ɵɵelement"](54,"i",18),o["ɵɵpipe"](55,"i18n"),o["ɵɵtext"](56,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](57,"\n            "),o["ɵɵelementStart"](58,"button",19),o["ɵɵlistener"]("click",(function(){return t.logOut()})),o["ɵɵtext"](59),o["ɵɵpipe"](60,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](62,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](63,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](13),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,12,"yourVaultIsLocked")),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](24,14,"masterPass")),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("type",t.showPassword?"text":"password"),o["ɵɵproperty"]("ngModel",t.masterPassword),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](31,16,"toggleVisibility")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](28,me,!t.showPassword,t.showPassword)),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind3"](39,18,"loggedInAsEmailOn",t.email,t.webVaultHostname),"\n            "),o["ɵɵadvance"](8),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](52,22,"unlock")," "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](55,24,"loading")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](60,26,"logOut"),"\n            ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,d.DefaultValueAccessor,d.RequiredValidator,Z.U,J.b,d.NgControlStatus,d.NgModel,pe,B.NgClass],pipes:[M.C],encapsulation:2}),function(e){e[e.Password=0]="Password",e[e.Sso=1]="Sso",e[e.Api=2]="Api"}(ve||(ve={}));class ge{constructor(e,t,n,i){this.email=e,this.masterPassword=t,this.captchaToken=n,this.twoFactor=i,this.type=ve.Password}}class fe{constructor(e,t,n,i,r){this.code=e,this.codeVerifier=t,this.redirectUrl=n,this.orgId=i,this.twoFactor=r,this.type=ve.Sso}}class xe extends class{constructor(e,t,n,i,r,o,a){this.win=e,this.webVaultUrl=t,this.path=n,this.iframeId=i,this.successCallback=r,this.errorCallback=o,this.infoCallback=a,this.parseFunction=this.parseMessage.bind(this),this.connectorLink=e.document.createElement("a")}stop(){this.sendMessage("stop")}start(){this.sendMessage("start")}sendMessage(e){this.iframe&&this.iframe.src&&this.iframe.contentWindow&&this.iframe.contentWindow.postMessage(e,this.iframe.src)}base64Encode(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode("0x"+t))))}cleanup(){this.win.removeEventListener("message",this.parseFunction,!1)}createParams(e,t){return new URLSearchParams({data:this.base64Encode(JSON.stringify(e)),parent:encodeURIComponent(this.win.document.location.href),v:t.toString()})}initComponent(e){this.connectorLink.href=`${this.webVaultUrl}/${this.path}?${e}`,this.iframe=this.win.document.getElementById(this.iframeId),this.iframe.src=this.connectorLink.href,this.win.addEventListener("message",this.parseFunction,!1)}parseMessage(e){if(!this.validMessage(e))return;const t=e.data.split("|");"success"===t[0]&&this.successCallback?this.successCallback(t[1]):"error"===t[0]&&this.errorCallback?this.errorCallback(t[1]):"info"===t[0]&&this.infoCallback&&this.infoCallback(t[1])}validMessage(e){return null!=e.origin&&""!==e.origin&&e.origin===this.connectorLink.origin&&null!=e.data&&"string"==typeof e.data&&(0===e.data.indexOf("success|")||0===e.data.indexOf("error|")||0===e.data.indexOf("info|"))}}{constructor(e,t,n,i,r,o){super(e,t,"captcha-connector.html","hcaptcha_iframe",i,r,(e=>{const t=JSON.parse(e);"string"!=typeof t?(this.iframe.height=t.height.toString(),this.iframe.width=t.width.toString()):o(t)})),this.i18nService=n}init(e){super.initComponent(this.createParams({siteKey:e,locale:this.i18nService.translationLocale},1))}}var ye=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Se{constructor(e,t,n){this.environmentService=e,this.i18nService=t,this.platformUtilsService=n,this.captchaSiteKey=null,this.captchaToken=null}setupCaptcha(){return ye(this,void 0,void 0,(function*(){const e=this.environmentService.getWebVaultUrl();this.captcha=new xe(window,e,this.i18nService,(e=>{this.captchaToken=e}),(e=>{this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),e)}),(e=>{this.platformUtilsService.showToast("info",this.i18nService.t("info"),e)}))}))}showCaptcha(){return!N.c.isNullOrWhitespace(this.captchaSiteKey)}handleCaptchaRequired(e){return!N.c.isNullOrWhitespace(e.captchaSiteKey)&&(this.captchaSiteKey=e.captchaSiteKey,this.captcha.init(e.captchaSiteKey),!0)}}Se.ɵfac=function(e){return new(e||Se)(o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P))},Se.ɵdir=o["ɵɵdefineDirective"]({type:Se,inputs:{captchaSiteKey:"captchaSiteKey"}});class be{}class we{}var Ie=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Ce extends Se{constructor(e,t,n,i,r,o,a,s,l,d){super(o,i,n),this.authService=e,this.router=t,this.stateService=r,this.passwordGenerationService=a,this.cryptoFunctionService=s,this.logService=l,this.ngZone=d,this.email="",this.rememberEmail=!0,this.masterPassword="",this.showPassword=!1,this.twoFactorRoute="2fa",this.successRoute="vault",this.forcePasswordResetRoute="update-temp-password",this.alwaysRememberEmail=!1}ngOnInit(){return Ie(this,void 0,void 0,(function*(){null!=this.email&&""!==this.email||(this.email=yield this.stateService.getRememberedEmail(),null==this.email&&(this.email="")),this.alwaysRememberEmail||(this.rememberEmail=null!=(yield this.stateService.getRememberedEmail())),N.c.isBrowser&&!N.c.isNode&&this.focusInput()}))}submit(){return Ie(this,void 0,void 0,(function*(){if(yield this.setupCaptcha(),null!=this.email&&""!==this.email)if(-1!==this.email.indexOf("@"))if(null!=this.masterPassword&&""!==this.masterPassword)try{const e=new ge(this.email,this.masterPassword,this.captchaToken,null);this.formPromise=this.authService.logIn(e);const t=yield this.formPromise;if(this.rememberEmail||this.alwaysRememberEmail?yield this.stateService.setRememberedEmail(this.email):yield this.stateService.setRememberedEmail(null),this.handleCaptchaRequired(t))return;if(t.requiresTwoFactor)null!=this.onSuccessfulLoginTwoFactorNavigate?this.onSuccessfulLoginTwoFactorNavigate():this.router.navigate([this.twoFactorRoute]);else if(t.forcePasswordReset)null!=this.onSuccessfulLoginForceResetNavigate?this.onSuccessfulLoginForceResetNavigate():this.router.navigate([this.forcePasswordResetRoute]);else{const e=yield this.stateService.getDisableFavicon();yield this.stateService.setDisableFavicon(!!e),null!=this.onSuccessfulLogin&&this.onSuccessfulLogin(),null!=this.onSuccessfulLoginNavigate?this.onSuccessfulLoginNavigate():this.router.navigate([this.successRoute])}}catch(e){this.logService.error(e)}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPassRequired"));else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("invalidEmail"));else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("emailRequired"))}))}togglePassword(){this.showPassword=!this.showPassword,this.ngZone.isStable?document.getElementById("masterPassword").focus():this.ngZone.onStable.pipe((0,ne.q)(1)).subscribe((()=>document.getElementById("masterPassword").focus()))}launchSsoBrowser(e,t){return Ie(this,void 0,void 0,(function*(){const n={type:"password",length:64,uppercase:!0,lowercase:!0,numbers:!0,special:!1},i=yield this.passwordGenerationService.generatePassword(n),r=yield this.passwordGenerationService.generatePassword(n),o=yield this.cryptoFunctionService.hash(r,"sha256"),a=N.c.fromBufferToUrlB64(o);yield this.stateService.setSsoState(i),yield this.stateService.setSsoCodeVerifier(r);const s=this.environmentService.getWebVaultUrl();this.platformUtilsService.launchUri(s+"/#/sso?clientId="+e+"&redirectUri="+encodeURIComponent(t)+"&state="+i+"&codeChallenge="+a)}))}focusInput(){document.getElementById(null==this.email||""===this.email?"email":"masterPassword").focus()}}Ce.ɵfac=function(e){return new(e||Ce)(o["ɵɵdirectiveInject"](h),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](we),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](o.NgZone))},Ce.ɵdir=o["ɵɵdefineDirective"]({type:Ce,inputs:{email:"email",rememberEmail:"rememberEmail"},features:[o["ɵɵInheritDefinitionFeature"]]});class Ee{constructor(e){this.id=e.id,this.organizationId=e.organizationId,this.type=e.type,this.data=e.data,this.enabled=e.enabled}}class ke extends P.b{}var Pe=n(53707),Ae=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Oe(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",31),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"resetPasswordPolicyAutoEnroll")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](3,4,"resetPasswordAutoEnrollInviteWarning"),"\n          "))}const Te=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}},Be=function(e){return{email:e}};class Me extends Ce{constructor(e,t,n,i,r,o,a,s,l,d,c,p,u,m,h){super(e,t,r,n,u,o,a,s,c,p),this.route=i,this.apiService=l,this.policyService=d,this.stateService=u,this.messagingService=m,this.routerService=h,this.showResetPasswordAutoEnrollWarning=!1,this.onSuccessfulLogin=()=>Ae(this,void 0,void 0,(function*(){this.messagingService.send("setFullWidth")})),this.onSuccessfulLoginNavigate=this.goAfterLogIn}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return Ae(this,void 0,void 0,(function*(){this.route.queryParams.pipe((0,C.P)()).subscribe((t=>Ae(this,void 0,void 0,(function*(){if(null!=t.email&&t.email.indexOf("@")>-1&&(this.email=t.email),null!=t.premium)this.routerService.setPreviousUrl("/settings/premium");else if(null!=t.org){const e=this.router.createUrlTree(["create-organization"],{queryParams:{plan:t.org}});this.routerService.setPreviousUrl(e.toString())}if(null!=t.sponsorshipToken){const e=this.router.createUrlTree(["setup/families-for-enterprise"],{queryParams:{token:t.sponsorshipToken}});this.routerService.setPreviousUrl(e.toString())}yield e.ngOnInit.call(this),this.rememberEmail=yield this.stateService.getRememberEmail()}))));const t=yield this.stateService.getOrganizationInvitation();if(null!=t){let e=null;try{this.policies=yield this.apiService.getPoliciesByToken(t.organizationId,t.token,t.email,t.organizationUserId),e=this.policyService.mapPoliciesFromToken(this.policies)}catch(n){this.logService.error(n)}if(null!=e){const n=this.policyService.getResetPasswordPolicyOptions(e,t.organizationId);this.showResetPasswordAutoEnrollWarning=n[1]&&n[0].autoEnrollEnabled,this.enforcedPasswordPolicyOptions=yield this.policyService.getMasterPasswordPolicyOptions(e)}}}))}goAfterLogIn(){return Ae(this,void 0,void 0,(function*(){if(null!=this.enforcedPasswordPolicyOptions){const e=this.passwordGenerationService.passwordStrength(this.masterPassword,this.getPasswordStrengthUserInput()),t=null==e?null:e.score;if(!this.policyService.evaluateMasterPassword(t,this.masterPassword,this.enforcedPasswordPolicyOptions)){const e={};return this.policies.data.map((t=>e[t.id]=new Ee(t))),yield this.policyService.replace(e),void this.router.navigate(["update-password"])}}const e=this.routerService.getPreviousUrl();e?this.router.navigateByUrl(e):this.router.navigate([this.successRoute])}))}submit(){const e=Object.create(null,{submit:{get:()=>super.submit}});return Ae(this,void 0,void 0,(function*(){yield this.stateService.setRememberEmail(this.rememberEmail),this.rememberEmail||(yield this.stateService.setRememberedEmail(null)),yield e.submit.call(this)}))}getPasswordStrengthUserInput(){let e=[];const t=this.email.indexOf("@");return t>-1&&(e=e.concat(this.email.substr(0,t).trim().toLowerCase().split(/[^A-Za-z0-9]/))),e}}Me.ɵfac=function(e){return new(e||Me)(o["ɵɵdirectiveInject"](h),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](we),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](o.NgZone),o["ɵɵdirectiveInject"](ke),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](ce))},Me.ɵcmp=o["ɵɵdefineComponent"]({type:Me,selectors:[["app-login"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:104,vars:45,consts:[["ngNativeValidate","",1,"container",3,"appApiAction","ngSubmit"],["form",""],[1,"row","justify-content-md-center","mt-5"],[1,"col-5"],["alt","Bitwarden",1,"mb-2","logo","logo-themed"],[1,"lead","text-center","mx-4","mb-4"],[1,"card","d-block"],[1,"card-body"],["type","warning",3,"title",4,"ngIf"],[1,"form-group"],["for","email"],["id","email","type","text","name","Email","required","","inputmode","email","appInputVerbatim","false",1,"form-control",3,"ngModel","ngModelChange"],["for","masterPassword"],[1,"d-flex"],["id","masterPassword","name","MasterPassword","required","","appInputVerbatim","",1,"text-monospace","form-control",3,"type","ngModel","ngModelChange"],["type","button",1,"ml-1","btn","btn-link",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],[1,"form-text"],["routerLink","/hint"],[1,"form-check","mb-3"],["type","checkbox","id","rememberEmail","name","RememberEmail",1,"form-check-input",3,"ngModel","ngModelChange"],["for","rememberEmail",1,"form-check-label"],[1,"mb-n3",3,"hidden"],["id","hcaptcha_iframe","height","80"],["type","submit",1,"btn","btn-primary","btn-block","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-sign-in"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["routerLink","/register",1,"btn","btn-outline-secondary","btn-block","ml-2","mt-0",3,"queryParams"],["aria-hidden","true",1,"bwi","bwi-pencil-square"],["routerLink","/sso",1,"btn","btn-outline-secondary","btn-block","mt-2"],["aria-hidden","true",1,"bwi","bwi-bank"],["type","warning",3,"title"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",3),o["ɵɵtext"](6,"\n      "),o["ɵɵelement"](7,"img",4),o["ɵɵtext"](8,"\n      "),o["ɵɵelementStart"](9,"p",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n      "),o["ɵɵelementStart"](13,"div",6),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"div",7),o["ɵɵtext"](16,"\n          "),o["ɵɵtemplate"](17,Oe,4,6,"app-callout",8),o["ɵɵtext"](18,"\n          "),o["ɵɵelementStart"](19,"div",9),o["ɵɵtext"](20,"\n            "),o["ɵɵelementStart"](21,"label",10),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n            "),o["ɵɵelementStart"](25,"input",11),o["ɵɵlistener"]("ngModelChange",(function(e){return t.email=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n          "),o["ɵɵelementStart"](28,"div",9),o["ɵɵtext"](29,"\n            "),o["ɵɵelementStart"](30,"label",12),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n            "),o["ɵɵelementStart"](34,"div",13),o["ɵɵtext"](35,"\n              "),o["ɵɵelementStart"](36,"input",14),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPassword=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n              "),o["ɵɵelementStart"](38,"button",15),o["ɵɵlistener"]("click",(function(){return t.togglePassword()})),o["ɵɵpipe"](39,"i18n"),o["ɵɵtext"](40,"\n                "),o["ɵɵelement"](41,"i",16),o["ɵɵtext"](42,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n            "),o["ɵɵelementStart"](45,"small",17),o["ɵɵtext"](46,"\n              "),o["ɵɵelementStart"](47,"a",18),o["ɵɵtext"](48),o["ɵɵpipe"](49,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n          "),o["ɵɵelementStart"](53,"div",19),o["ɵɵtext"](54,"\n            "),o["ɵɵelementStart"](55,"input",20),o["ɵɵlistener"]("ngModelChange",(function(e){return t.rememberEmail=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n            "),o["ɵɵelementStart"](57,"label",21),o["ɵɵtext"](58),o["ɵɵpipe"](59,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n          "),o["ɵɵelementStart"](62,"div",22),o["ɵɵtext"](63,"\n            "),o["ɵɵelement"](64,"iframe",23),o["ɵɵtext"](65,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n          "),o["ɵɵelement"](67,"hr"),o["ɵɵtext"](68,"\n          "),o["ɵɵelementStart"](69,"div",13),o["ɵɵtext"](70,"\n            "),o["ɵɵelementStart"](71,"button",24),o["ɵɵtext"](72,"\n              "),o["ɵɵelementStart"](73,"span"),o["ɵɵtext"](74," "),o["ɵɵelement"](75,"i",25),o["ɵɵtext"](76),o["ɵɵpipe"](77,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](78,"\n              "),o["ɵɵelement"](79,"i",26),o["ɵɵpipe"](80,"i18n"),o["ɵɵtext"](81,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](82,"\n            "),o["ɵɵelementStart"](83,"a",27),o["ɵɵtext"](84,"\n              "),o["ɵɵelement"](85,"i",28),o["ɵɵtext"](86),o["ɵɵpipe"](87,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](88,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](89,"\n          "),o["ɵɵelementStart"](90,"div",13),o["ɵɵtext"](91,"\n            "),o["ɵɵelementStart"](92,"a",29),o["ɵɵtext"](93,"\n              "),o["ɵɵelement"](94,"i",30),o["ɵɵtext"](95),o["ɵɵpipe"](96,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](97,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](98,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](99,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](100,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](101,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](102,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](103,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,20,"loginOrCreateNewAccount")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngIf",t.showResetPasswordAutoEnrollWarning),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,22,"emailAddress")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.email),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](32,24,"masterPass")),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("type",t.showPassword?"text":"password"),o["ɵɵproperty"]("ngModel",t.masterPassword),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](39,26,"toggleVisibility")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](40,Te,!t.showPassword,t.showPassword)),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](49,28,"getMasterPasswordHint")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngModel",t.rememberEmail),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](59,30,"rememberEmail")),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",!t.showCaptcha()),o["ɵɵadvance"](9),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](77,32,"logIn")," "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](80,34,"loading")),o["ɵɵadvance"](4),o["ɵɵproperty"]("queryParams",o["ɵɵpureFunction1"](43,Be,t.email)),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](87,36,"createAccount"),"\n            "),o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](96,38,"enterpriseSingleSignOn"),"\n            ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,d.DefaultValueAccessor,d.RequiredValidator,J.b,d.NgControlStatus,d.NgModel,pe,B.NgClass,p.RouterLinkWithHref,d.CheckboxControlValueAccessor,Pe.O],pipes:[M.C],encapsulation:2});class De{}var Fe=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Re{constructor(e,t,n,i,r){this.router=e,this.apiService=t,this.platformUtilsService=n,this.i18nService=i,this.logService=r}submit(){return Fe(this,void 0,void 0,(function*(){try{const e=new De;e.email=this.email.trim().toLowerCase(),this.formPromise=this.apiService.postAccountRecoverDelete(e),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("deleteRecoverEmailSent")),this.router.navigate(["/"])}catch(e){this.logService.error(e)}}))}}Re.ɵfac=function(e){return new(e||Re)(o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](L.$))},Re.ɵcmp=o["ɵɵdefineComponent"]({type:Re,selectors:[["app-recover-delete"]],decls:52,vars:21,consts:[["ngNativeValidate","",1,"container",3,"appApiAction","ngSubmit"],["form",""],[1,"row","justify-content-md-center","mt-5"],[1,"col-5"],[1,"lead","text-center","mb-4"],[1,"card"],[1,"card-body"],[1,"form-group"],["for","email"],["id","email","type","text","name","Email","required","","appAutofocus","","inputmode","email","appInputVerbatim","false",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-flex"],["type","submit",1,"btn","btn-primary","btn-block","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["routerLink","/login",1,"btn","btn-outline-secondary","btn-block","ml-2","mt-0"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",3),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"p",4),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"div",5),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"div",6),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"p"),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n          "),o["ɵɵelementStart"](19,"div",7),o["ɵɵtext"](20,"\n            "),o["ɵɵelementStart"](21,"label",8),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n            "),o["ɵɵelementStart"](25,"input",9),o["ɵɵlistener"]("ngModelChange",(function(e){return t.email=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n          "),o["ɵɵelement"](28,"hr"),o["ɵɵtext"](29,"\n          "),o["ɵɵelementStart"](30,"div",10),o["ɵɵtext"](31,"\n            "),o["ɵɵelementStart"](32,"button",11),o["ɵɵtext"](33,"\n              "),o["ɵɵelementStart"](34,"span"),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n              "),o["ɵɵelement"](38,"i",12),o["ɵɵpipe"](39,"i18n"),o["ɵɵtext"](40,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n            "),o["ɵɵelementStart"](42,"a",13),o["ɵɵtext"](43),o["ɵɵpipe"](44,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,9,"deleteAccount")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,11,"deleteRecoverDesc")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,13,"emailAddress")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.email),o["ɵɵadvance"](7),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](36,15,"submit")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](39,17,"loading")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](44,19,"cancel"),"\n            ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,d.DefaultValueAccessor,d.RequiredValidator,Z.U,J.b,d.NgControlStatus,d.NgModel,p.RouterLinkWithHref],pipes:[M.C],encapsulation:2});class Ue extends re{}var ze=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Ne{constructor(e,t,n,i,r,o,a){this.router=e,this.apiService=t,this.platformUtilsService=n,this.i18nService=i,this.cryptoService=r,this.authService=o,this.logService=a}submit(){return ze(this,void 0,void 0,(function*(){try{const e=new Ue;e.recoveryCode=this.recoveryCode.replace(/\s/g,"").toLowerCase(),e.email=this.email.trim().toLowerCase();const t=yield this.authService.makePreloginKey(this.masterPassword,e.email);e.masterPasswordHash=yield this.cryptoService.hashPassword(this.masterPassword,t),this.formPromise=this.apiService.postTwoFactorRecover(e),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("twoStepRecoverDisabled")),this.router.navigate(["/"])}catch(e){this.logService.error(e)}}))}}Ne.ɵfac=function(e){return new(e||Ne)(o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](h),o["ɵɵdirectiveInject"](L.$))},Ne.ɵcmp=o["ɵɵdefineComponent"]({type:Ne,selectors:[["app-recover-two-factor"]],decls:74,vars:32,consts:[["ngNativeValidate","",1,"container",3,"appApiAction","ngSubmit"],["form",""],[1,"row","justify-content-md-center","mt-5"],[1,"col-5"],[1,"lead","text-center","mb-4"],[1,"card"],[1,"card-body"],["href","https://bitwarden.com/help/lost-two-step-device/","target","_blank","rel","noopener"],[1,"form-group"],["for","email"],["id","email","type","text","name","Email","required","","appAutofocus","","inputmode","email","appInputVerbatim","false",1,"form-control",3,"ngModel","ngModelChange"],["for","masterPassword"],["id","masterPassword","type","password","name","MasterPassword","required","","appInputVerbatim","",1,"form-control",3,"ngModel","ngModelChange"],["for","recoveryCode"],["id","recoveryCode","type","text","name","RecoveryCode","required","","appInputVerbatim","",1,"text-monospace","form-control",3,"ngModel","ngModelChange"],[1,"d-flex"],["type","submit",1,"btn","btn-primary","btn-block","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["routerLink","/login",1,"btn","btn-outline-secondary","btn-block","ml-2","mt-0"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",3),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"p",4),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"div",5),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"div",6),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"p"),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementStart"](18,"a",7),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementStart"](23,"div",8),o["ɵɵtext"](24,"\n            "),o["ɵɵelementStart"](25,"label",9),o["ɵɵtext"](26),o["ɵɵpipe"](27,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n            "),o["ɵɵelementStart"](29,"input",10),o["ɵɵlistener"]("ngModelChange",(function(e){return t.email=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n          "),o["ɵɵelementStart"](32,"div",8),o["ɵɵtext"](33,"\n            "),o["ɵɵelementStart"](34,"label",11),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n            "),o["ɵɵelementStart"](38,"input",12),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPassword=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n          "),o["ɵɵelementStart"](41,"div",8),o["ɵɵtext"](42,"\n            "),o["ɵɵelementStart"](43,"label",13),o["ɵɵtext"](44),o["ɵɵpipe"](45,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n            "),o["ɵɵelementStart"](47,"input",14),o["ɵɵlistener"]("ngModelChange",(function(e){return t.recoveryCode=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n          "),o["ɵɵelement"](50,"hr"),o["ɵɵtext"](51,"\n          "),o["ɵɵelementStart"](52,"div",15),o["ɵɵtext"](53,"\n            "),o["ɵɵelementStart"](54,"button",16),o["ɵɵtext"](55,"\n              "),o["ɵɵelementStart"](56,"span"),o["ɵɵtext"](57),o["ɵɵpipe"](58,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n              "),o["ɵɵelement"](60,"i",17),o["ɵɵpipe"](61,"i18n"),o["ɵɵtext"](62,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](63,"\n            "),o["ɵɵelementStart"](64,"a",18),o["ɵɵtext"](65),o["ɵɵpipe"](66,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](68,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](69,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](70,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](71,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](73,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,14,"recoverAccountTwoStep")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](17,16,"recoverAccountTwoStepDesc"),"\n            "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](20,18,"learnMore")),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](27,20,"emailAddress")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.email),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](36,22,"masterPass")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.masterPassword),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](45,24,"recoveryCodeTitle")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.recoveryCode),o["ɵɵadvance"](7),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](58,26,"submit")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](61,28,"loading")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](66,30,"cancel"),"\n            ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,d.DefaultValueAccessor,d.RequiredValidator,Z.U,J.b,d.NgControlStatus,d.NgModel,p.RouterLinkWithHref],pipes:[M.C],encapsulation:2});class Ve{static validateInputsDoesntMatch(e,t){return n=>{var i;return n.parent&&n.parent.controls&&(null==n?void 0:n.value)===(null===(i=null==n?void 0:n.parent)||void 0===i?void 0:i.controls)[e].value?{inputsMatchError:{message:t}}:null}}static validateInputsMatch(e,t){return n=>{var i;return n.parent&&n.parent.controls?(null==n?void 0:n.value)===(null===(i=null==n?void 0:n.parent)||void 0===i?void 0:i.controls)[e].value?null:{inputsDoesntMatchError:{message:t}}:null}}static validateFormInputsMatch(e,t,n){return i=>{const r=i.controls[e],o=i.controls[t];r.value!==o.value?o.setErrors({inputsDoesntMatchError:{message:n}}):o.setErrors(null)}}}var He=n(74862);class je{constructor(e,t){this.publicKey=e,this.encryptedPrivateKey=t}}class Le{constructor(e,t,n,i,r,o,a,s,l){this.email=e,this.name=t,this.masterPasswordHash=n,this.key=r,this.kdf=o,this.kdfIterations=a,this.referenceData=s,this.captchaResponse=l,this.masterPasswordHint=i||null}}class Ke{}var Ge=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class qe extends Se{constructor(e,t,n,i,r,a,s,l,c,p,u,m){super(u,r,c),this.formValidationErrorService=e,this.formBuilder=t,this.authService=n,this.router=i,this.cryptoService=a,this.apiService=s,this.stateService=l,this.passwordGenerationService=p,this.logService=m,this.isInTrialFlow=!1,this.createdAccount=new o.EventEmitter,this.showPassword=!1,this.showTerms=!0,this.showErrorSummary=!1,this.formGroup=this.formBuilder.group({email:["",[d.Validators.required,d.Validators.email]],name:[""],masterPassword:["",[d.Validators.required,d.Validators.minLength(8)]],confirmMasterPassword:["",[d.Validators.required,d.Validators.minLength(8)]],hint:[null,[Ve.validateInputsDoesntMatch("masterPassword",this.i18nService.t("hintEqualsPassword"))]],acceptPolicies:[!1,[this.acceptPoliciesValidation()]]},{validator:Ve.validateFormInputsMatch("masterPassword","confirmMasterPassword",this.i18nService.t("masterPassDoesntMatch"))}),this.successRoute="login",this.showTerms=!c.isSelfHost()}ngOnInit(){return Ge(this,void 0,void 0,(function*(){this.setupCaptcha()}))}get masterPasswordScoreWidth(){return null==this.masterPasswordScore?0:20*(this.masterPasswordScore+1)}get masterPasswordScoreColor(){switch(this.masterPasswordScore){case 4:return"success";case 3:return"primary";case 2:return"warning";default:return"danger"}}get masterPasswordScoreText(){switch(this.masterPasswordScore){case 4:return this.i18nService.t("strong");case 3:return this.i18nService.t("good");case 2:return this.i18nService.t("weak");default:return null!=this.masterPasswordScore?this.i18nService.t("weak"):null}}submit(e=!0){var t,n,i,r,o;return Ge(this,void 0,void 0,(function*(){let a=null===(t=this.formGroup.get("email"))||void 0===t?void 0:t.value,s=null===(n=this.formGroup.get("name"))||void 0===n?void 0:n.value;const l=null===(i=this.formGroup.get("masterPassword"))||void 0===i?void 0:i.value,d=null===(r=this.formGroup.get("hint"))||void 0===r?void 0:r.value;if(this.formGroup.markAllAsTouched(),this.showErrorSummary=!0,this.formGroup.get("acceptPolicies").hasError("required"))return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("acceptPoliciesRequired"));if(this.formGroup.invalid&&!e)return;if(this.formGroup.invalid&&e){const e=this.getErrorToastMessage();return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),e)}const c=this.passwordGenerationService.passwordStrength(l,this.getPasswordStrengthUserInput());if(null!=c&&c.score<3){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("weakMasterPasswordDesc"),this.i18nService.t("weakMasterPassword"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return}s=""===s?null:s,a=a.trim().toLowerCase();const p=He.jg,u=He.wH,m=yield this.cryptoService.makeKey(l,a,p,u),h=yield this.cryptoService.makeEncKey(m),v=yield this.cryptoService.hashPassword(l,m),g=yield this.cryptoService.makeKeyPair(h[0]),f=new Le(a,s,v,d,h[1].encryptedString,p,u,this.referenceData,this.captchaToken);f.keys=new je(g[0],g[1].encryptedString);const x=yield this.stateService.getOrganizationInvitation();null!=x&&null!=x.token&&null!=x.organizationUserId&&(f.token=x.token,f.organizationUserId=x.organizationUserId);try{this.formPromise=this.apiService.postRegister(f);try{yield this.formPromise}catch(y){if(this.handleCaptchaRequired(y))return;throw y}this.platformUtilsService.showToast("success",null,this.i18nService.t("newAccountCreated")),this.isInTrialFlow?this.createdAccount.emit(null===(o=this.formGroup.get("email"))||void 0===o?void 0:o.value):this.router.navigate([this.successRoute],{queryParams:{email:a}})}catch(y){this.logService.error(y)}}))}togglePassword(){this.showPassword=!this.showPassword}updatePasswordStrength(){var e;const t=null===(e=this.formGroup.get("masterPassword"))||void 0===e?void 0:e.value;null!=this.masterPasswordStrengthTimeout&&clearTimeout(this.masterPasswordStrengthTimeout),this.masterPasswordStrengthTimeout=setTimeout((()=>{const e=this.passwordGenerationService.passwordStrength(t,this.getPasswordStrengthUserInput());this.masterPasswordScore=null==e?null:e.score}),300)}getPasswordStrengthUserInput(){var e;let t=[];const n=null===(e=this.formGroup.get("email"))||void 0===e?void 0:e.value,i=this.formGroup.get("name").value,r=n.indexOf("@");return r>-1&&(t=t.concat(n.substr(0,r).trim().toLowerCase().split(/[^A-Za-z0-9]/))),null!=i&&""!==i&&(t=t.concat(i.trim().toLowerCase().split(" "))),t}getErrorToastMessage(){const e=this.formValidationErrorService.getFormValidationErrors(this.formGroup.controls).shift();if(e)switch(e.errorName){case"email":return this.i18nService.t("invalidEmail");case"inputsDoesntMatchError":return this.i18nService.t("masterPassDoesntMatch");case"inputsMatchError":return this.i18nService.t("hintEqualsPassword");default:return this.i18nService.t(this.errorTag(e))}}errorTag(e){const t=e.errorName.charAt(0).toUpperCase()+e.errorName.slice(1);return`${e.controlName}${t}`}acceptPoliciesValidation(){return e=>!e.value&&this.showTerms?{required:!0}:null}}qe.ɵfac=function(e){return new(e||qe)(o["ɵɵdirectiveInject"](Ke),o["ɵɵdirectiveInject"](d.FormBuilder),o["ɵɵdirectiveInject"](h),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](L.$))},qe.ɵdir=o["ɵɵdefineDirective"]({type:qe,inputs:{isInTrialFlow:"isInTrialFlow"},outputs:{createdAccount:"createdAccount"},features:[o["ɵɵInheritDefinitionFeature"]]});var _e=n(77547);class $e extends _e.Z{constructor(e){super(),null!=e&&(this.id=e.id,this.organizationId=e.organizationId,this.type=e.type,this.data=e.data,this.enabled=e.enabled)}}class We{}var Qe=n(43548),Ye=n(21509);class Ze{}Ze.ɵfac=function(e){return new(e||Ze)},Ze.ɵdir=o["ɵɵdefineDirective"]({type:Ze,selectors:[["bit-label"]]});var Je=n(11512),Xe=n(17935),et=n(64707),tt=n(1e4);function nt(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n      ",e.text,"\n    ")}}const it=function(e){return{width:e}};class rt{constructor(e){this.i18nService=e,this.showText=!1,this.scoreWidth=0,this.color="bg-danger"}ngOnChanges(){switch(this.scoreWidth=null==this.score?0:20*(this.score+1),this.score){case 4:this.color="bg-success",this.text=this.i18nService.t("strong");break;case 3:this.color="bg-primary",this.text=this.i18nService.t("good");break;case 2:this.color="bg-warning",this.text=this.i18nService.t("weak");break;default:this.color="bg-danger",this.text=null!=this.score?this.i18nService.t("weak"):null}}}rt.ɵfac=function(e){return new(e||rt)(o["ɵɵdirectiveInject"](k.D))},rt.ɵcmp=o["ɵɵdefineComponent"]({type:rt,selectors:[["app-password-strength"]],inputs:{score:"score",showText:"showText"},features:[o["ɵɵNgOnChangesFeature"]],decls:8,vars:8,consts:[[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",3,"ngStyle"],[4,"ngIf"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵtemplate"](4,nt,2,1,"ng-container",2),o["ɵɵtext"](5,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n")),2&e&&(o["ɵɵadvance"](2),o["ɵɵclassMapInterpolate1"]("progress-bar ",t.color,""),o["ɵɵproperty"]("ngStyle",o["ɵɵpureFunction1"](6,it,t.scoreWidth+"%")),o["ɵɵattribute"]("aria-valuenow",t.scoreWidth),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.showText&&t.text))},directives:[B.NgStyle,B.NgIf],encapsulation:2});const ot=function(e){return{"tw-invisible":e}};class at{constructor(){this.buttonType="primary",this.disabled=!1}}at.ɵfac=function(e){return new(e||at)},at.ɵcmp=o["ɵɵdefineComponent"]({type:at,selectors:[["bit-submit-button"]],inputs:{buttonType:"buttonType",disabled:"disabled",loading:"loading"},ngContentSelectors:["*"],decls:16,vars:8,consts:[["bitButton","","type","submit",3,"buttonType","disabled"],[1,"tw-relative"],[3,"ngClass"],[1,"tw-absolute","tw-inset-0",3,"ngClass"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-lg","bwi-spin","tw-align-baseline"]],template:function(e,t){1&e&&(o["ɵɵprojectionDef"](),o["ɵɵelementStart"](0,"button",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"span",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"span",2),o["ɵɵtext"](5,"\n      "),o["ɵɵprojection"](6),o["ɵɵtext"](7,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementStart"](9,"span",3),o["ɵɵtext"](10,"\n      "),o["ɵɵelement"](11,"i",4),o["ɵɵtext"](12,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n")),2&e&&(o["ɵɵproperty"]("buttonType",t.buttonType)("disabled",t.loading||t.disabled),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](4,ot,t.loading)),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](6,ot,!t.loading)))},directives:[et.H,B.NgClass],encapsulation:2});var st=n(16048),lt=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function dt(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",21),o["ɵɵtext"](1,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("enforcedPolicyOptions",e.enforcedPolicyOptions)}}function ct(e,t){1&e&&(o["ɵɵelementStart"](0,"div",22),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",23),o["ɵɵtext"](3,"\n        "),o["ɵɵelement"](4,"input",24),o["ɵɵtext"](5,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"bit-label",25),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelement"](10,"br"),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"a",26),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,",\n        "),o["ɵɵelementStart"](16,"a",27),o["ɵɵtext"](17),o["ɵɵpipe"](18,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n    "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](9,3,"acceptPolicies"),""),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,5,"termsOfService")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](18,7,"privacyPolicy")))}function pt(e,t){if(1&e&&o["ɵɵelement"](0,"bit-error-summary",28),2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("formGroup",e.formGroup)}}const ut=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}};class mt extends qe{constructor(e,t,n,i,r,o,a,s,l,d,c,p,u){super(e,t,n,i,r,o,a,s,l,d,p,u),this.policyService=c,this.showErrorSummary=!1}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});var t;return lt(this,void 0,void 0,(function*(){yield e.ngOnInit.call(this),this.queryParamEmail&&(null===(t=this.formGroup.get("email"))||void 0===t||t.setValue(this.queryParamEmail))}))}submit(){const e=Object.create(null,{submit:{get:()=>super.submit}});var t;return lt(this,void 0,void 0,(function*(){null==this.enforcedPolicyOptions||this.policyService.evaluateMasterPassword(this.masterPasswordScore,null===(t=this.formGroup.get("masterPassword"))||void 0===t?void 0:t.value,this.enforcedPolicyOptions)?yield e.submit.call(this,!1):this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordPolicyRequirementsNotMet"))}))}}mt.ɵfac=function(e){return new(e||mt)(o["ɵɵdirectiveInject"](Ke),o["ɵɵdirectiveInject"](d.FormBuilder),o["ɵɵdirectiveInject"](h),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](L.$))},mt.ɵcmp=o["ɵɵdefineComponent"]({type:mt,selectors:[["app-register-form"]],inputs:{queryParamEmail:"queryParamEmail",enforcedPolicyOptions:"enforcedPolicyOptions"},features:[o["ɵɵInheritDefinitionFeature"]],decls:123,vars:52,consts:[[1,"tw-container","tw-mx-auto",3,"appApiAction","formGroup","ngSubmit"],["form",""],[1,"tw-mb-3"],["bitInput","","type","email","formControlName","email"],["bitInput","","type","text","formControlName","name"],["type","info",3,"enforcedPolicyOptions",4,"ngIf"],["bitInput","","formControlName","masterPassword",3,"type","input"],["type","button","bitSuffix","","bitButton","",3,"click"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-eye",3,"ngClass"],[1,"tw-font-semibold"],[3,"score","showText"],["bitInput","","formControlName","confirmMasterPassword",3,"type"],["bitInput","","type","text","formControlName","hint"],[3,"hidden"],["id","hcaptcha_iframe","height","80"],["class","tw-flex tw-items-start tw-mb-3",4,"ngIf"],[1,"tw-flex","tw-mb-3"],[3,"loading"],["bitButton","","buttonType","secondary","routerLink","/login",1,"tw-inline-flex","tw-items-center","tw-ml-3","tw-px-3"],[1,"bwi","bwi-sign-in","tw-mr-2"],[3,"formGroup",4,"ngIf"],["type","info",3,"enforcedPolicyOptions"],[1,"tw-flex","tw-items-start","tw-mb-3"],[1,"tw-flex","tw-items-center","tw-h-6"],["bitInput","","type","checkbox","formControlName","acceptPolicies",1,"tw-w-4","tw-rounded","tw-border","tw-border-gray-300"],[1,"ml-2"],["href","https://bitwarden.com/terms/","target","_blank","rel","noopener"],["href","https://bitwarden.com/privacy/","target","_blank","rel","noopener"],[3,"formGroup"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div"),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",2),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"bit-form-field"),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"bit-label"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelement"](13,"input",3),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"bit-hint"),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n\n    "),o["ɵɵelementStart"](21,"div",2),o["ɵɵtext"](22,"\n      "),o["ɵɵelementStart"](23,"bit-form-field"),o["ɵɵtext"](24,"\n        "),o["ɵɵelementStart"](25,"bit-label"),o["ɵɵtext"](26),o["ɵɵpipe"](27,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n        "),o["ɵɵelement"](29,"input",4),o["ɵɵtext"](30,"\n        "),o["ɵɵelementStart"](31,"bit-hint"),o["ɵɵtext"](32),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n\n    "),o["ɵɵelementStart"](37,"div",2),o["ɵɵtext"](38,"\n      "),o["ɵɵtemplate"](39,dt,2,1,"app-callout",5),o["ɵɵtext"](40,"\n      "),o["ɵɵelementStart"](41,"bit-form-field"),o["ɵɵtext"](42,"\n        "),o["ɵɵelementStart"](43,"bit-label"),o["ɵɵtext"](44),o["ɵɵpipe"](45,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n        "),o["ɵɵelementStart"](47,"input",6),o["ɵɵlistener"]("input",(function(){return t.updatePasswordStrength()})),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n        "),o["ɵɵelementStart"](49,"button",7),o["ɵɵlistener"]("click",(function(){return t.togglePassword()})),o["ɵɵtext"](50,"\n          "),o["ɵɵelement"](51,"i",8),o["ɵɵtext"](52,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n        "),o["ɵɵelementStart"](54,"bit-hint"),o["ɵɵtext"](55,"\n          "),o["ɵɵelementStart"](56,"span",9),o["ɵɵtext"](57,"Important:"),o["ɵɵelementEnd"](),o["ɵɵtext"](58),o["ɵɵpipe"](59,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n      "),o["ɵɵelementStart"](62,"app-password-strength",10),o["ɵɵtext"](63,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n\n    "),o["ɵɵelementStart"](66,"div",2),o["ɵɵtext"](67,"\n      "),o["ɵɵelementStart"](68,"bit-form-field"),o["ɵɵtext"](69,"\n        "),o["ɵɵelementStart"](70,"bit-label"),o["ɵɵtext"](71),o["ɵɵpipe"](72,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](73,"\n        "),o["ɵɵelement"](74,"input",11),o["ɵɵtext"](75,"\n        "),o["ɵɵelementStart"](76,"button",7),o["ɵɵlistener"]("click",(function(){return t.togglePassword()})),o["ɵɵtext"](77,"\n          "),o["ɵɵelement"](78,"i",8),o["ɵɵtext"](79,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](80,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](81,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](82,"\n\n    "),o["ɵɵelementStart"](83,"div",2),o["ɵɵtext"](84,"\n      "),o["ɵɵelementStart"](85,"bit-form-field"),o["ɵɵtext"](86,"\n        "),o["ɵɵelementStart"](87,"bit-label"),o["ɵɵtext"](88),o["ɵɵpipe"](89,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](90,"\n        "),o["ɵɵelement"](91,"input",12),o["ɵɵtext"](92,"\n        "),o["ɵɵelementStart"](93,"bit-hint"),o["ɵɵtext"](94),o["ɵɵpipe"](95,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](96,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](97,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](98,"\n\n    "),o["ɵɵelementStart"](99,"div",13),o["ɵɵtext"](100,"\n      "),o["ɵɵelement"](101,"iframe",14),o["ɵɵtext"](102,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](103,"\n\n    "),o["ɵɵtemplate"](104,ct,21,9,"div",15),o["ɵɵtext"](105,"\n\n    "),o["ɵɵelementStart"](106,"div",16),o["ɵɵtext"](107,"\n      "),o["ɵɵelementStart"](108,"bit-submit-button",17),o["ɵɵtext"](109),o["ɵɵpipe"](110,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](111,"\n      "),o["ɵɵelementStart"](112,"a",18),o["ɵɵtext"](113,"\n        "),o["ɵɵelement"](114,"i",19),o["ɵɵtext"](115),o["ɵɵpipe"](116,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](117,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](118,"\n    "),o["ɵɵtemplate"](119,pt,1,1,"bit-error-summary",20),o["ɵɵtext"](120,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](121,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](122,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise)("formGroup",t.formGroup),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,24,"emailAddress")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,26,"emailAddressDesc")),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](27,28,"name")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](33,30,"yourNameDesc")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngIf",t.enforcedPolicyOptions),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](45,32,"masterPass")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("type",t.showPassword?"text":"password"),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](46,ut,!t.showPassword,t.showPassword)),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](59,34,"masterPassImportant"),"\n        "),o["ɵɵadvance"](4),o["ɵɵproperty"]("score",t.masterPasswordScore)("showText",!0),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](72,36,"reTypeMasterPass")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("type",t.showPassword?"text":"password"),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](49,ut,!t.showPassword,t.showPassword)),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](89,38,"masterPassHint")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](95,40,"masterPassHintDesc")),o["ɵɵadvance"](5),o["ɵɵproperty"]("hidden",!t.showCaptcha()),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",t.showTerms),o["ɵɵadvance"](4),o["ɵɵproperty"]("loading",e.loading),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](110,42,"createAccount")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](116,44,"logIn"),"\n      "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.showErrorSummary)}},directives:[d["ɵNgNoValidate"],d.NgControlStatusGroup,Y.b,d.FormGroupDirective,Ye.d,Ze,Je.G,d.DefaultValueAccessor,d.NgControlStatus,d.FormControlName,Xe.M,B.NgIf,et.H,tt.e,B.NgClass,rt,at,p.RouterLinkWithHref,Pe.O,d.CheckboxControlValueAccessor,st.P],pipes:[M.C],encapsulation:2});var ht=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function vt(e,t){1&e&&(o["ɵɵelementStart"](0,"header",15),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",2),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"div",3),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"div",16),o["ɵɵtext"](7,"\n          "),o["ɵɵelement"](8,"img",17),o["ɵɵtext"](9,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n  "),o["ɵɵelementEnd"]())}function gt(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3,"The Bitwarden Password Manager"),o["ɵɵelementEnd"](),o["ɵɵtext"](4,"\n            "),o["ɵɵelementStart"](5,"h2"),o["ɵɵtext"](6,"\n              Trusted by millions of individuals, teams, and organizations worldwide for secure\n              password storage and sharing.\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"p"),o["ɵɵtext"](9,"Store logins, secure notes, and more"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n            "),o["ɵɵelementStart"](11,"p"),o["ɵɵtext"](12,"Collaborate and share securely"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementStart"](14,"p"),o["ɵɵtext"](15,"Access anywhere on any device"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementStart"](17,"p"),o["ɵɵtext"](18,"Create your account to get started"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"]())}function ft(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1,"Teams"),o["ɵɵelement"](2,"br"),o["ɵɵelementEnd"]())}function xt(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1,"Enterprise"),o["ɵɵelementEnd"]())}function yt(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3,"\n              Start Your "),o["ɵɵtemplate"](4,ft,3,0,"span",13),o["ɵɵtemplate"](5,xt,2,0,"span",13),o["ɵɵtext"](6," Free Trial Now\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"h2"),o["ɵɵtext"](9,"\n              Millions of individuals, teams, and organizations worldwide trust Bitwarden for secure\n              password storage and sharing.\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n            "),o["ɵɵelementStart"](11,"p"),o["ɵɵtext"](12,"Collaborate and share securely"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementStart"](14,"p"),o["ɵɵtext"](15,"Deploy and manage quickly and easily"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementStart"](17,"p"),o["ɵɵtext"](18,"Access anywhere on any device"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n            "),o["ɵɵelementStart"](20,"p"),o["ɵɵtext"](21,"Create your account to get started"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf","teams1"===e.layout||"teams1"===e.layout),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf","enterprise2"===e.layout)}}function St(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1,"Teams"),o["ɵɵelement"](2,"br"),o["ɵɵelementEnd"]())}function bt(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1,"Enterprise"),o["ɵɵelementEnd"]())}function wt(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3,"\n              Start Your "),o["ɵɵtemplate"](4,St,3,0,"span",13),o["ɵɵtemplate"](5,bt,2,0,"span",13),o["ɵɵtext"](6," Free Trial Now\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"h2"),o["ɵɵtext"](9,"\n              Millions of individuals, teams, and organizations worldwide trust Bitwarden for secure\n              password storage and sharing.\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n            "),o["ɵɵelementStart"](11,"p"),o["ɵɵtext"](12,"Collaborate and share securely"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementStart"](14,"p"),o["ɵɵtext"](15,"Deploy and manage quickly and easily"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementStart"](17,"p"),o["ɵɵtext"](18,"Access anywhere on any device"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n            "),o["ɵɵelementStart"](20,"p"),o["ɵɵtext"](21,"Create your account to get started"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf","cnetcmpgnteams"===e.layout),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf","cnetcmpgnent"===e.layout)}}function It(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3,"Start Your Premium Account Now"),o["ɵɵelementEnd"](),o["ɵɵtext"](4,"\n            "),o["ɵɵelementStart"](5,"h2"),o["ɵɵtext"](6,"\n              Millions of individuals, teams, and organizations worldwide trust Bitwarden for secure\n              password storage and sharing.\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"p"),o["ɵɵtext"](9,"Store logins, secure notes, and more"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n            "),o["ɵɵelementStart"](11,"p"),o["ɵɵtext"](12,"Secure your account with advanced two-step login"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementStart"](14,"p"),o["ɵɵtext"](15,"Access anywhere on any device"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementStart"](17,"p"),o["ɵɵtext"](18,"Create your account to get started"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"]())}function Ct(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",16),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"div",18),o["ɵɵtext"](3,"\n          "),o["ɵɵtext"](4,"\n          "),o["ɵɵtemplate"](5,gt,20,0,"div",13),o["ɵɵtext"](6,"\n\n          "),o["ɵɵtext"](7,"\n          "),o["ɵɵtemplate"](8,yt,23,2,"div",13),o["ɵɵtext"](9,"\n\n          "),o["ɵɵtext"](10,"\n          "),o["ɵɵtemplate"](11,wt,23,2,"div",13),o["ɵɵtext"](12,"\n\n          "),o["ɵɵtext"](13,"\n          "),o["ɵɵtemplate"](14,It,20,0,"div",13),o["ɵɵtext"](15,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf","teams"===e.layout||"enterprise"===e.layout||"enterprise1"===e.layout||"default"===e.layout),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf","teams1"===e.layout||"teams2"===e.layout||"enterprise2"===e.layout),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf","cnetcmpgnteams"===e.layout||"cnetcmpgnent"===e.layout),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf","cnetcmpgnind"===e.layout)}}function Et(e,t){1&e&&(o["ɵɵelementStart"](0,"h1",19),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"createAccount")))}function kt(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",20),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"createOrganizationStep1")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](3,4,"createOrganizationCreatePersonalAccount"),"\n                "))}function Pt(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"figure"),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"figcaption"),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"cite"),o["ɵɵtext"](7,"\n                "),o["ɵɵelement"](8,"img",21),o["ɵɵtext"](9,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵelementStart"](12,"blockquote",22),o["ɵɵtext"](13,'\n              "No more excuses; start using Bitwarden today. The identity you save could be your\n              own. The money definitely will be."\n            '),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementEnd"]())}function At(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"figure"),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"figcaption"),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"cite"),o["ɵɵtext"](7,"\n                "),o["ɵɵelement"](8,"img",23),o["ɵɵtext"](9,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵelementStart"](12,"blockquote",22),o["ɵɵtext"](13,"\n              “Bitwarden boasts the backing of some of the world's best security experts and an\n              attractive, easy-to-use interface”\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementEnd"]())}function Ot(e,t){1&e&&(o["ɵɵelementStart"](0,"div",24),o["ɵɵtext"](1,"\n        "),o["ɵɵelement"](2,"img",25),o["ɵɵtext"](3,"\n      "),o["ɵɵelementEnd"]())}function Tt(e,t){1&e&&(o["ɵɵelementStart"](0,"div",24),o["ɵɵtext"](1,"\n        "),o["ɵɵelement"](2,"img",25),o["ɵɵtext"](3,"\n      "),o["ɵɵelementEnd"]())}const Bt=function(e){return["layout",e]},Mt=function(e,t){return{"col-5":e,"col-12":t}};class Dt extends qe{constructor(e,t,n,i,r,o,a,s,l,d,c,p,u,m,h){super(e,t,n,i,r,o,a,l,d,c,u,m),this.route=s,this.policyService=p,this.routerService=h,this.email="",this.showCreateOrgMessage=!1,this.layout=""}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return ht(this,void 0,void 0,(function*(){this.route.queryParams.pipe((0,C.P)()).subscribe((e=>{if(this.referenceData=new We,null!=e.email&&e.email.indexOf("@")>-1&&(this.email=e.email),null!=e.premium)this.routerService.setPreviousUrl("/settings/premium");else if(null!=e.org){this.showCreateOrgMessage=!0,this.referenceData.flow=e.org;const t=this.router.createUrlTree(["create-organization"],{queryParams:{plan:e.org}});this.routerService.setPreviousUrl(t.toString())}if(null!=e.layout&&(this.layout=this.referenceData.layout=e.layout),null!=e.reference?this.referenceData.id=e.reference:this.referenceData.id=("; "+document.cookie).split("; reference=").pop().split(";").shift(),null!=e.sponsorshipToken){const t=this.router.createUrlTree(["setup/families-for-enterprise"],{queryParams:{plan:e.sponsorshipToken}});this.routerService.setPreviousUrl(t.toString())}""===this.referenceData.id&&(this.referenceData.id=null)}));const t=yield this.stateService.getOrganizationInvitation();if(null!=t)try{const e=yield this.apiService.getPoliciesByToken(t.organizationId,t.token,t.email,t.organizationUserId);if(null!=e.data){const t=e.data.map((e=>new Ee(e)));this.policies=t.map((e=>new $e(e)))}}catch(n){this.logService.error(n)}null!=this.policies&&(this.enforcedPolicyOptions=yield this.policyService.getMasterPasswordPolicyOptions(this.policies)),yield e.ngOnInit.call(this)}))}}Dt.ɵfac=function(e){return new(e||Dt)(o["ɵɵdirectiveInject"](Ke),o["ɵɵdirectiveInject"](d.FormBuilder),o["ɵɵdirectiveInject"](h),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](ce))},Dt.ɵcmp=o["ɵɵdefineComponent"]({type:Dt,selectors:[["app-register"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:49,vars:21,consts:[[1,"layout",3,"ngClass"],["class","header",4,"ngIf"],[1,"container"],[1,"row"],["class","col-7",4,"ngIf"],[3,"ngClass"],[1,"row","justify-content-md-center","mt-5"],["class","lead text-center mb-4",4,"ngIf"],[1,"card","d-block"],[1,"card-body"],["type","info","icon","bwi bwi-thumb-tack",3,"title",4,"ngIf"],[3,"queryParamEmail","enforcedPolicyOptions"],[1,"col-7","d-flex","align-items-center"],[4,"ngIf"],["class","col-5 d-flex align-items-center justify-content-center",4,"ngIf"],[1,"header"],[1,"col-7"],["alt","Bitwarden","src","../../images/register-layout/logo-horizontal-white.svg",1,"logo","mb-2"],[1,"mt-5"],[1,"lead","text-center","mb-4"],["type","info","icon","bwi bwi-thumb-tack",3,"title"],["src","../../images/register-layout/cnet-logo.svg","alt","cnet logo",1,"w-25","d-block","mx-auto"],[1,"mx-auto","text-center","px-4"],["src","../../images/register-layout/forbes-logo.svg","alt","Forbes Logo",1,"w-25","d-block","mx-auto"],[1,"col-5","d-flex","align-items-center","justify-content-center"],["src","../../images/register-layout/usnews-360-badge.svg","alt","US News 360 Reviews Best Password Manager",1,"w-50","d-block"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵtext"](2,"\n  "),o["ɵɵtemplate"](3,vt,13,0,"header",1),o["ɵɵtext"](4,"\n\n  "),o["ɵɵelementStart"](5,"div",2),o["ɵɵtext"](6,"\n    "),o["ɵɵelementStart"](7,"div",3),o["ɵɵtext"](8,"\n      "),o["ɵɵtemplate"](9,Ct,17,4,"div",4),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"div",5),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"div",6),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"div",5),o["ɵɵtext"](16,"\n            "),o["ɵɵtemplate"](17,Et,3,3,"h1",7),o["ɵɵtext"](18,"\n            "),o["ɵɵelementStart"](19,"div",8),o["ɵɵtext"](20,"\n              "),o["ɵɵelementStart"](21,"div",9),o["ɵɵtext"](22,"\n                "),o["ɵɵtemplate"](23,kt,4,6,"app-callout",10),o["ɵɵtext"](24,"\n                "),o["ɵɵelement"](25,"app-register-form",11),o["ɵɵtext"](26,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n    "),o["ɵɵelementStart"](33,"div",3),o["ɵɵtext"](34,"\n      "),o["ɵɵelementStart"](35,"div",12),o["ɵɵtext"](36,"\n        "),o["ɵɵtemplate"](37,Pt,16,0,"div",13),o["ɵɵtext"](38,"\n\n        "),o["ɵɵtemplate"](39,At,16,0,"div",13),o["ɵɵtext"](40,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n      "),o["ɵɵtemplate"](42,Ot,4,0,"div",14),o["ɵɵtext"](43,"\n      "),o["ɵɵtemplate"](44,Tt,4,0,"div",14),o["ɵɵtext"](45,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n")),2&e&&(o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](13,Bt,t.layout)),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf","default"===t.layout||"teams"===t.layout||"teams1"===t.layout||"teams2"===t.layout||"enterprise"===t.layout||"enterprise1"===t.layout||"enterprise2"===t.layout||"cnetcmpgnent"===t.layout||"cnetcmpgnteams"===t.layout||"cnetcmpgnind"===t.layout),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",t.layout),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](15,Mt,t.layout,!t.layout)),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](18,Mt,!t.layout,t.layout)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.layout),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",t.showCreateOrgMessage),o["ɵɵadvance"](2),o["ɵɵproperty"]("queryParamEmail",t.email)("enforcedPolicyOptions",t.enforcedPolicyOptions),o["ɵɵadvance"](12),o["ɵɵproperty"]("ngIf","cnetcmpgnent"===t.layout||"cnetcmpgnteams"===t.layout||"cnetcmpgnind"===t.layout),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf","teams"===t.layout||"teams1"===t.layout||"teams2"===t.layout||"enterprise"===t.layout||"enterprise1"===t.layout||"enterprise2"===t.layout||"default"===t.layout),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf","cnetcmpgnent"===t.layout||"cnetcmpgnteams"===t.layout||"cnetcmpgnind"===t.layout),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf","teams"===t.layout||"teams1"===t.layout||"teams2"===t.layout||"enterprise"===t.layout||"enterprise1"===t.layout||"enterprise2"===t.layout||"default"===t.layout))},directives:[B.NgClass,B.NgIf,mt,Pe.O],pipes:[M.C],encapsulation:2});var Ft=n(72523),Rt=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Ut{constructor(e,t,n,i,r,o,a){this.router=e,this.stateService=t,this.apiService=n,this.syncService=i,this.platformUtilsService=r,this.i18nService=o,this.keyConnectorService=a,this.continuing=!1,this.leaving=!1,this.loading=!0}ngOnInit(){return Rt(this,void 0,void 0,(function*(){this.organization=yield this.keyConnectorService.getManagingOrganization(),this.email=yield this.stateService.getEmail(),yield this.syncService.fullSync(!1),this.loading=!1}))}convert(){return Rt(this,void 0,void 0,(function*(){this.continuing=!0,this.actionPromise=this.keyConnectorService.migrateUser();try{yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("removedMasterPassword")),yield this.keyConnectorService.removeConvertAccountRequired(),this.router.navigate([""])}catch(e){this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),e.message)}}))}leave(){return Rt(this,void 0,void 0,(function*(){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("leaveOrganizationConfirmation"),this.organization.name,this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{this.leaving=!0,this.actionPromise=this.apiService.postLeaveOrganization(this.organization.id).then((()=>this.syncService.fullSync(!0))),yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("leftOrganization")),yield this.keyConnectorService.removeConvertAccountRequired(),this.router.navigate([""])}catch(e){this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),e)}}))}}function zt(e,t){1&e&&(o["ɵɵelementStart"](0,"div",2),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div"),o["ɵɵtext"](3,"\n    "),o["ɵɵelement"](4,"img",3),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"p",4),o["ɵɵtext"](7,"\n      "),o["ɵɵelement"](8,"i",5),o["ɵɵpipe"](9,"i18n"),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"span",6),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](8),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](9,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,4,"loading")))}function Nt(e,t){1&e&&(o["ɵɵelement"](0,"i",16),o["ɵɵpipe"](1,"i18n")),2&e&&o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,1,"loading"))}function Vt(e,t){1&e&&(o["ɵɵelement"](0,"i",16),o["ɵɵpipe"](1,"i18n")),2&e&&o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,1,"loading"))}function Ht(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",7),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",8),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",9),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"p",10),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelement"](10,"hr"),o["ɵɵtext"](11,"\n      "),o["ɵɵelementStart"](12,"div",11),o["ɵɵtext"](13,"\n        "),o["ɵɵelementStart"](14,"div",12),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"p"),o["ɵɵtext"](17),o["ɵɵpipe"](18,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n\n          "),o["ɵɵelementStart"](20,"button",13),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().convert()})),o["ɵɵtext"](21,"\n            "),o["ɵɵtemplate"](22,Nt,2,3,"i",14),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n          "),o["ɵɵelementStart"](26,"button",15),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().leave()})),o["ɵɵtext"](27,"\n            "),o["ɵɵtemplate"](28,Vt,2,3,"i",14),o["ɵɵtext"](29),o["ɵɵpipe"](30,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,8,"removeMasterPassword")),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](18,10,"convertOrganizationEncryptionDesc",e.organization.name)),o["ɵɵadvance"](3),o["ɵɵproperty"]("disabled",e.actionPromise),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.continuing),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](24,13,"removeMasterPassword"),"\n          "),o["ɵɵadvance"](3),o["ɵɵproperty"]("disabled",e.actionPromise),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.leaving),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](30,15,"leaveOrganization"),"\n          ")}}Ut.ɵfac=function(e){return new(e||Ut)(o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](g.J))},Ut.ɵdir=o["ɵɵdefineDirective"]({type:Ut});class jt extends Ut{}jt.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](jt)))(t||jt)}}(),jt.ɵcmp=o["ɵɵdefineComponent"]({type:jt,selectors:[["app-remove-password"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:4,vars:2,consts:[["class","mt-5 d-flex justify-content-center",4,"ngIf"],["class","container",4,"ngIf"],[1,"mt-5","d-flex","justify-content-center"],["alt","Bitwarden",1,"mb-4","logo","logo-themed"],[1,"text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-2x","text-muted",3,"title"],[1,"sr-only"],[1,"container"],[1,"row","justify-content-md-center","mt-5"],[1,"col-5"],[1,"lead","text-center","mb-4"],[1,"card","d-block"],[1,"card-body"],["type","button",1,"btn","btn-primary","btn-block",3,"disabled","click"],["class","bwi bwi-spinner bwi-spin","aria-hidden","true",3,"title",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-block",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,zt,17,6,"div",0),o["ɵɵtext"](1,"\n"),o["ɵɵtemplate"](2,Ht,36,17,"div",1),o["ɵɵtext"](3,"\n")),2&e&&(o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading))},directives:[B.NgIf],pipes:[M.C],encapsulation:2});class Lt extends re{}class Kt{constructor(e,t,n,i,r,o,a){this.masterPasswordHash=e,this.key=t,this.masterPasswordHint=n,this.kdf=i,this.kdfIterations=r,this.orgIdentifier=o,this.keys=a}}var Gt=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class qt{constructor(e,t,n,i,r,o,a){this.i18nService=e,this.cryptoService=t,this.messagingService=n,this.passwordGenerationService=i,this.platformUtilsService=r,this.policyService=o,this.stateService=a}ngOnInit(){var e;return Gt(this,void 0,void 0,(function*(){this.email=yield this.stateService.getEmail(),null!==(e=this.enforcedPolicyOptions)&&void 0!==e||(this.enforcedPolicyOptions=yield this.policyService.getMasterPasswordPolicyOptions())}))}submit(){return Gt(this,void 0,void 0,(function*(){if(!(yield this.strongPassword()))return;if(!(yield this.setupSubmitActions()))return;const e=yield this.stateService.getEmail();null==this.kdf&&(this.kdf=yield this.stateService.getKdfType()),null==this.kdfIterations&&(this.kdfIterations=yield this.stateService.getKdfIterations());const t=yield this.cryptoService.makeKey(this.masterPassword,e.trim().toLowerCase(),this.kdf,this.kdfIterations),n=yield this.cryptoService.hashPassword(this.masterPassword,t);let i=null;i=null==(yield this.cryptoService.getEncKey())?yield this.cryptoService.makeEncKey(t):yield this.cryptoService.remakeEncKey(t),yield this.performSubmitActions(n,t,i)}))}setupSubmitActions(){return Gt(this,void 0,void 0,(function*(){return!0}))}performSubmitActions(e,t,n){return Gt(this,void 0,void 0,(function*(){}))}strongPassword(){return Gt(this,void 0,void 0,(function*(){if(null==this.masterPassword||""===this.masterPassword)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPassRequired")),!1;if(this.masterPassword.length<8)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPassLength")),!1;if(this.masterPassword!==this.masterPasswordRetype)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPassDoesntMatch")),!1;const e=this.passwordGenerationService.passwordStrength(this.masterPassword,this.getPasswordStrengthUserInput());if(null!=this.enforcedPolicyOptions&&!this.policyService.evaluateMasterPassword(e.score,this.masterPassword,this.enforcedPolicyOptions))return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordPolicyRequirementsNotMet")),!1;if(null!=e&&e.score<3){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("weakMasterPasswordDesc"),this.i18nService.t("weakMasterPassword"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1}return!0}))}updatePasswordStrength(){null!=this.masterPasswordStrengthTimeout&&clearTimeout(this.masterPasswordStrengthTimeout),this.masterPasswordStrengthTimeout=setTimeout((()=>{const e=this.passwordGenerationService.passwordStrength(this.masterPassword,this.getPasswordStrengthUserInput());this.masterPasswordScore=null==e?null:e.score}),300)}logOut(){return Gt(this,void 0,void 0,(function*(){(yield this.platformUtilsService.showDialog(this.i18nService.t("logOutConfirmation"),this.i18nService.t("logOut"),this.i18nService.t("logOut"),this.i18nService.t("cancel")))&&this.messagingService.send("logout")}))}getPasswordStrengthUserInput(){let e=[];const t=this.email.indexOf("@");return t>-1&&(e=e.concat(this.email.substr(0,t).trim().toLowerCase().split(/[^A-Za-z0-9]/))),e}}qt.ɵfac=function(e){return new(e||qt)(o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](P.b))},qt.ɵdir=o["ɵɵdefineDirective"]({type:qt});var _t=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class $t extends qt{constructor(e,t,n,i,r,o,a,s,l,d,c){super(e,t,n,i,r,o,c),this.router=a,this.apiService=s,this.syncService=l,this.route=d,this.syncLoading=!0,this.showPassword=!1,this.hint="",this.identifier=null,this.resetPasswordAutoEnroll=!1,this.successRoute="vault"}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return _t(this,void 0,void 0,(function*(){if(yield this.syncService.fullSync(!0),this.syncLoading=!1,this.route.queryParams.pipe((0,C.P)()).subscribe((e=>_t(this,void 0,void 0,(function*(){null!=e.identifier&&(this.identifier=e.identifier)})))),null!=this.identifier)try{const e=yield this.apiService.getOrganizationAutoEnrollStatus(this.identifier);this.orgId=e.id,this.resetPasswordAutoEnroll=e.resetPasswordEnabled,this.enforcedPolicyOptions=yield this.policyService.getMasterPasswordPoliciesForInvitedUsers(this.orgId)}catch(t){this.platformUtilsService.showToast("error",null,this.i18nService.t("errorOccurred"))}e.ngOnInit.call(this)}))}setupSubmitActions(){return _t(this,void 0,void 0,(function*(){return this.kdf=He.jg,this.kdfIterations=He.wH,!0}))}performSubmitActions(e,t,n){return _t(this,void 0,void 0,(function*(){const i=yield this.cryptoService.makeKeyPair(n[0]),r=new Kt(e,n[1].encryptedString,this.hint,this.kdf,this.kdfIterations,this.identifier,new je(i[0],i[1].encryptedString));try{this.resetPasswordAutoEnroll?this.formPromise=this.apiService.setPassword(r).then((()=>_t(this,void 0,void 0,(function*(){return yield this.onSetPasswordSuccess(t,n,i),this.apiService.getOrganizationKeys(this.orgId)})))).then((t=>_t(this,void 0,void 0,(function*(){if(null==t)throw new Error(this.i18nService.t("resetPasswordOrgKeysError"));const n=yield this.stateService.getUserId(),i=N.c.fromB64ToArray(t.publicKey),r=yield this.cryptoService.getEncKey(),o=yield this.cryptoService.rsaEncrypt(r.key,i.buffer),a=new Lt;return a.masterPasswordHash=e,a.resetPasswordKey=o.encryptedString,this.apiService.putOrganizationUserResetPasswordEnrollment(this.orgId,n,a)})))):this.formPromise=this.apiService.setPassword(r).then((()=>_t(this,void 0,void 0,(function*(){yield this.onSetPasswordSuccess(t,n,i)})))),yield this.formPromise,null!=this.onSuccessfulChangePassword?this.onSuccessfulChangePassword():this.router.navigate([this.successRoute])}catch(o){this.platformUtilsService.showToast("error",null,this.i18nService.t("errorOccurred"))}}))}togglePassword(e){this.showPassword=!this.showPassword,document.getElementById(e?"masterPasswordRetype":"masterPassword").focus()}onSetPasswordSuccess(e,t,n){return _t(this,void 0,void 0,(function*(){yield this.stateService.setKdfType(this.kdf),yield this.stateService.setKdfIterations(this.kdfIterations),yield this.cryptoService.setKey(e),yield this.cryptoService.setEncKey(t[1].encryptedString),yield this.cryptoService.setEncPrivateKey(n[1].encryptedString);const i=yield this.cryptoService.hashPassword(this.masterPassword,e,ee.LocalAuthorization);yield this.cryptoService.setKeyHash(i)}))}}function Wt(e,t){1&e&&(o["ɵɵelementStart"](0,"div",8),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",9),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](5,4,"loading"),"\n        "))}function Qt(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",30),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"resetPasswordPolicyAutoEnroll")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](3,4,"resetPasswordAutoEnrollInviteWarning"),"\n          "))}function Yt(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",31),o["ɵɵtext"](1,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵproperty"]("enforcedPolicyOptions",e.enforcedPolicyOptions)}}$t.ɵfac=function(e){return new(e||$t)(o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](P.b))},$t.ɵdir=o["ɵɵdefineDirective"]({type:$t,features:[o["ɵɵInheritDefinitionFeature"]]});const Zt=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}};function Jt(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",10),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"app-callout",11),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵtemplate"](6,Qt,4,6,"app-callout",12),o["ɵɵtext"](7,"\n          "),o["ɵɵelementStart"](8,"div",13),o["ɵɵtext"](9,"\n            "),o["ɵɵtemplate"](10,Yt,2,1,"app-callout",14),o["ɵɵtext"](11,"\n            "),o["ɵɵelementStart"](12,"label",15),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n            "),o["ɵɵelementStart"](16,"div",16),o["ɵɵtext"](17,"\n              "),o["ɵɵelementStart"](18,"div",17),o["ɵɵtext"](19,"\n                "),o["ɵɵelementStart"](20,"input",18),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().masterPassword=t}))("input",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().updatePasswordStrength()})),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n                "),o["ɵɵelementStart"](22,"app-password-strength",19),o["ɵɵtext"](23,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n              "),o["ɵɵelementStart"](26,"div"),o["ɵɵtext"](27,"\n                "),o["ɵɵelementStart"](28,"button",20),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().togglePassword(!1)})),o["ɵɵpipe"](29,"i18n"),o["ɵɵtext"](30,"\n                  "),o["ɵɵelement"](31,"i",21),o["ɵɵtext"](32,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n                "),o["ɵɵelement"](34,"div",22),o["ɵɵtext"](35,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n            "),o["ɵɵelementStart"](38,"small",23),o["ɵɵtext"](39),o["ɵɵpipe"](40,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n          "),o["ɵɵelementStart"](43,"div",13),o["ɵɵtext"](44,"\n            "),o["ɵɵelementStart"](45,"label",24),o["ɵɵtext"](46),o["ɵɵpipe"](47,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n            "),o["ɵɵelementStart"](49,"div",16),o["ɵɵtext"](50,"\n              "),o["ɵɵelementStart"](51,"input",25),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().masterPasswordRetype=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n              "),o["ɵɵelementStart"](53,"button",20),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().togglePassword(!0)})),o["ɵɵpipe"](54,"i18n"),o["ɵɵtext"](55,"\n                "),o["ɵɵelement"](56,"i",21),o["ɵɵtext"](57,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n          "),o["ɵɵelementStart"](61,"div",13),o["ɵɵtext"](62,"\n            "),o["ɵɵelementStart"](63,"label",26),o["ɵɵtext"](64),o["ɵɵpipe"](65,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n            "),o["ɵɵelementStart"](67,"input",27),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().hint=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](68,"\n            "),o["ɵɵelementStart"](69,"small",23),o["ɵɵtext"](70),o["ɵɵpipe"](71,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](73,"\n          "),o["ɵɵelement"](74,"hr"),o["ɵɵtext"](75,"\n          "),o["ɵɵelementStart"](76,"div",16),o["ɵɵtext"](77,"\n            "),o["ɵɵelementStart"](78,"button",28),o["ɵɵtext"](79,"\n              "),o["ɵɵelement"](80,"i",9),o["ɵɵpipe"](81,"i18n"),o["ɵɵtext"](82,"\n              "),o["ɵɵelementStart"](83,"span"),o["ɵɵtext"](84),o["ɵɵpipe"](85,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](86,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](87,"\n            "),o["ɵɵelementStart"](88,"button",29),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().logOut()})),o["ɵɵtext"](89),o["ɵɵpipe"](90,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](91,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](92,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](),t=o["ɵɵreference"](1);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,23,"ssoCompleteRegistration")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.resetPasswordAutoEnroll),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.enforcedPolicyOptions),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,25,"masterPass")),o["ɵɵadvance"](7),o["ɵɵpropertyInterpolate"]("type",e.showPassword?"text":"password"),o["ɵɵproperty"]("ngModel",e.masterPassword),o["ɵɵadvance"](2),o["ɵɵproperty"]("score",e.masterPasswordScore)("showText",!0),o["ɵɵadvance"](6),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](29,27,"toggleVisibility")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](45,Zt,!e.showPassword,e.showPassword)),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](40,29,"masterPassDesc")),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](47,31,"reTypeMasterPass")),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("type",e.showPassword?"text":"password"),o["ɵɵproperty"]("ngModel",e.masterPasswordRetype),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](54,33,"toggleVisibility")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](48,Zt,!e.showPassword,e.showPassword)),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](65,35,"masterPassHint")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.hint),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](71,37,"masterPassHintDesc")),o["ɵɵadvance"](8),o["ɵɵproperty"]("disabled",t.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](81,39,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](85,41,"submit")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](90,43,"logOut"),"\n            ")}}class Xt extends $t{constructor(e,t,n,i,r,o,a,s,l,d,c){super(t,n,i,r,o,a,s,e,l,d,c)}}Xt.ɵfac=function(e){return new(e||Xt)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](P.b))},Xt.ɵcmp=o["ɵɵdefineComponent"]({type:Xt,selectors:[["app-set-password"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:21,vars:6,consts:[["ngNativeValidate","","autocomplete","off",3,"appApiAction","ngSubmit"],["form",""],[1,"row","justify-content-md-center","mt-5"],[1,"col-5"],[1,"lead","text-center","mb-4"],[1,"card","d-block"],["class","card-body text-center",4,"ngIf"],["class","card-body",4,"ngIf"],[1,"card-body","text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[1,"card-body"],["type","info"],["type","warning",3,"title",4,"ngIf"],[1,"form-group"],["type","info",3,"enforcedPolicyOptions",4,"ngIf"],["for","masterPassword"],[1,"d-flex"],[1,"w-100"],["id","masterPassword","name","MasterPasswordHash","required","","appInputVerbatim","",1,"text-monospace","form-control","mb-1",3,"type","ngModel","ngModelChange","input"],[3,"score","showText"],["type","button",1,"ml-1","btn","btn-link",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],[1,"progress-bar","invisible"],[1,"form-text","text-muted"],["for","masterPasswordRetype"],["id","masterPasswordRetype","name","MasterPasswordRetype","required","","appInputVerbatim","",1,"text-monospace","form-control",3,"type","ngModel","ngModelChange"],["for","hint"],["id","hint","type","text","name","Hint",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","btn-block","btn-submit",3,"disabled"],["type","button",1,"btn","btn-outline-secondary","btn-block","ml-2","mt-0",3,"click"],["type","warning",3,"title"],["type","info",3,"enforcedPolicyOptions"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",3),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"p",4),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"div",5),o["ɵɵtext"](12,"\n        "),o["ɵɵtemplate"](13,Wt,6,6,"div",6),o["ɵɵtext"](14,"\n        "),o["ɵɵtemplate"](15,Jt,93,51,"div",7),o["ɵɵtext"](16,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n")),2&e&&(o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,4,"setMasterPassword")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",t.syncLoading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.syncLoading))},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,Pe.O,d.DefaultValueAccessor,d.RequiredValidator,J.b,d.NgControlStatus,d.NgModel,rt,pe,B.NgClass],pipes:[M.C],encapsulation:2});var en=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class tn{constructor(e,t,n,i,r,o,a,s,l,d,c){this.authService=e,this.router=t,this.i18nService=n,this.route=i,this.stateService=r,this.platformUtilsService=o,this.apiService=a,this.cryptoFunctionService=s,this.environmentService=l,this.passwordGenerationService=d,this.logService=c,this.loggingIn=!1,this.twoFactorRoute="2fa",this.successRoute="lock",this.changePasswordRoute="set-password",this.forcePasswordResetRoute="update-temp-password"}ngOnInit(){return en(this,void 0,void 0,(function*(){this.route.queryParams.pipe((0,C.P)()).subscribe((e=>en(this,void 0,void 0,(function*(){if(null!=e.code&&null!=e.state){const t=yield this.stateService.getSsoCodeVerifier(),n=yield this.stateService.getSsoState();yield this.stateService.setSsoCodeVerifier(null),yield this.stateService.setSsoState(null),null!=e.code&&null!=t&&null!=n&&this.checkState(n,e.state)&&(yield this.logIn(e.code,t,this.getOrgIdentifierFromState(e.state)))}else null!=e.clientId&&null!=e.redirectUri&&null!=e.state&&null!=e.codeChallenge&&(this.redirectUri=e.redirectUri,this.state=e.state,this.codeChallenge=e.codeChallenge,this.clientId=e.clientId)}))))}))}submit(e,t){return en(this,void 0,void 0,(function*(){if(null==this.identifier||""===this.identifier)return void this.platformUtilsService.showToast("error",this.i18nService.t("ssoValidationFailed"),this.i18nService.t("ssoIdentifierRequired"));this.initiateSsoFormPromise=this.apiService.preValidateSso(this.identifier);const n=yield this.initiateSsoFormPromise,i=yield this.buildAuthorizeUrl(e,t,n.token);this.platformUtilsService.launchUri(i,{sameWindow:!0})}))}buildAuthorizeUrl(e,t,n){return en(this,void 0,void 0,(function*(){let i=this.codeChallenge,r=this.state;const o={type:"password",length:64,uppercase:!0,lowercase:!0,numbers:!0,special:!1};if(null==i){const e=yield this.passwordGenerationService.generatePassword(o),t=yield this.cryptoFunctionService.hash(e,"sha256");i=N.c.fromBufferToUrlB64(t),yield this.stateService.setSsoCodeVerifier(e)}null==r&&(r=yield this.passwordGenerationService.generatePassword(o),e&&(r+=`_returnUri='${e}'`)),r+=`_identifier=${this.identifier}`,yield this.stateService.setSsoState(r);let a=this.environmentService.getIdentityUrl()+"/connect/authorize?client_id="+this.clientId+"&redirect_uri="+encodeURIComponent(this.redirectUri)+"&response_type=code&scope=api offline_access&state="+r+"&code_challenge="+i+"&code_challenge_method=S256&response_mode=query&domain_hint="+encodeURIComponent(this.identifier)+"&ssoToken="+encodeURIComponent(n);if(t){const e=yield this.apiService.getSsoUserIdentifier();a+=`&user_identifier=${encodeURIComponent(e)}`}return a}))}logIn(e,t,n){return en(this,void 0,void 0,(function*(){this.loggingIn=!0;try{const i=new fe(e,t,this.redirectUri,n);this.formPromise=this.authService.logIn(i);const r=yield this.formPromise;if(r.requiresTwoFactor)null!=this.onSuccessfulLoginTwoFactorNavigate?this.onSuccessfulLoginTwoFactorNavigate():this.router.navigate([this.twoFactorRoute],{queryParams:{identifier:n,sso:"true"}});else if(r.resetMasterPassword)null!=this.onSuccessfulLoginChangePasswordNavigate?this.onSuccessfulLoginChangePasswordNavigate():this.router.navigate([this.changePasswordRoute],{queryParams:{identifier:n}});else if(r.forcePasswordReset)null!=this.onSuccessfulLoginForceResetNavigate?this.onSuccessfulLoginForceResetNavigate():this.router.navigate([this.forcePasswordResetRoute]);else{const e=yield this.stateService.getDisableFavicon();yield this.stateService.setDisableFavicon(!!e),null!=this.onSuccessfulLogin&&this.onSuccessfulLogin(),null!=this.onSuccessfulLoginNavigate?this.onSuccessfulLoginNavigate():this.router.navigate([this.successRoute])}}catch(i){this.logService.error(i),"Key Connector error"===i.message&&this.platformUtilsService.showToast("error",null,this.i18nService.t("ssoKeyConnectorError"))}this.loggingIn=!1}))}getOrgIdentifierFromState(e){if(null==e)return null;const t=e.split("_identifier=");return t.length>1?t[1]:null}checkState(e,t){if(null==e)return!1;if(null==t)return!1;const n=e.split("_identifier="),i=t.split("_identifier=");return n[0]===i[0]}}tn.ɵfac=function(e){return new(e||tn)(o["ɵɵdirectiveInject"](h),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](we),o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](L.$))},tn.ɵdir=o["ɵɵdefineDirective"]({type:tn});var nn=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function rn(e,t){1&e&&(o["ɵɵelementStart"](0,"div",7),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",8),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](5,4,"loading"),"\n        "))}function on(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",7),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"div",9),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"label",10),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵelementStart"](12,"input",11),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().identifier=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n          "),o["ɵɵelement"](15,"hr"),o["ɵɵtext"](16,"\n          "),o["ɵɵelementStart"](17,"div",12),o["ɵɵtext"](18,"\n            "),o["ɵɵelementStart"](19,"button",13),o["ɵɵtext"](20,"\n              "),o["ɵɵelementStart"](21,"span"),o["ɵɵtext"](22," "),o["ɵɵelement"](23,"i",14),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n              "),o["ɵɵelement"](27,"i",8),o["ɵɵpipe"](28,"i18n"),o["ɵɵtext"](29,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n            "),o["ɵɵelementStart"](31,"a",15),o["ɵɵtext"](32),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](),t=o["ɵɵreference"](1);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,7,"ssoLogInWithOrgIdentifier")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,9,"organizationIdentifier")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.identifier),o["ɵɵadvance"](7),o["ɵɵproperty"]("disabled",t.loading),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](25,11,"logIn")," "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](28,13,"loading")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](33,15,"cancel"),"\n            ")}}class an extends tn{constructor(e,t,n,i,r,o,a,s,l,d,c){super(e,t,n,i,r,o,a,s,l,d,c),this.redirectUri=window.location.origin+"/sso-connector.html",this.clientId="web"}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return nn(this,void 0,void 0,(function*(){e.ngOnInit.call(this),this.route.queryParams.pipe((0,C.P)()).subscribe((e=>nn(this,void 0,void 0,(function*(){if(null!=e.identifier)this.identifier=e.identifier;else{const e=yield this.stateService.getSsoOrgIdentifier();null!=e&&(this.identifier=e)}}))))}))}submit(){const e=Object.create(null,{submit:{get:()=>super.submit}});return nn(this,void 0,void 0,(function*(){yield this.stateService.setSsoOrganizationIdentifier(this.identifier),"browser"===this.clientId&&(document.cookie=`ssoHandOffMessage=${this.i18nService.t("ssoHandOff")};SameSite=strict`),e.submit.call(this)}))}}an.ɵfac=function(e){return new(e||an)(o["ɵɵdirectiveInject"](h),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](we),o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](L.$))},an.ɵcmp=o["ɵɵdefineComponent"]({type:an,selectors:[["app-sso"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:19,vars:3,consts:[["ngNativeValidate","",1,"container",3,"appApiAction","ngSubmit"],["form",""],[1,"row","justify-content-md-center","mt-5"],[1,"col-5"],["alt","Bitwarden",1,"logo","mb-2","logo-themed"],[1,"card","d-block","mt-4"],["class","card-body",4,"ngIf"],[1,"card-body"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[1,"form-group"],["for","identifier"],["id","identifier","type","text","name","Identifier","required","","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-flex"],["type","submit",1,"btn","btn-primary","btn-block","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-sign-in"],["routerLink","/login",1,"btn","btn-outline-secondary","btn-block","ml-2","mt-0"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",3),o["ɵɵtext"](6,"\n      "),o["ɵɵelement"](7,"img",4),o["ɵɵtext"](8,"\n      "),o["ɵɵelementStart"](9,"div",5),o["ɵɵtext"](10,"\n        "),o["ɵɵtemplate"](11,rn,6,6,"div",6),o["ɵɵtext"](12,"\n        "),o["ɵɵtemplate"](13,on,36,17,"div",6),o["ɵɵtext"](14,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n")),2&e&&(o["ɵɵproperty"]("appApiAction",t.initiateSsoFormPromise),o["ɵɵadvance"](11),o["ɵɵproperty"]("ngIf",t.loggingIn),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loggingIn))},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,d.DefaultValueAccessor,d.RequiredValidator,Z.U,d.NgControlStatus,d.NgModel,p.RouterLinkWithHref],pipes:[M.C],encapsulation:2});var sn,ln=n(75220);!function(e){e[e.Authenticator=0]="Authenticator",e[e.Email=1]="Email",e[e.Duo=2]="Duo",e[e.Yubikey=3]="Yubikey",e[e.U2f=4]="U2f",e[e.Remember=5]="Remember",e[e.OrganizationDuo=6]="OrganizationDuo",e[e.WebAuthn=7]="WebAuthn"}(sn||(sn={}));class dn{constructor(e,t,n,i,r,o,a,s){this.win=e,this.webVaultUrl=t,this.webAuthnNewTab=n,this.platformUtilsService=i,this.i18nService=r,this.successCallback=o,this.errorCallback=a,this.infoCallback=s,this.iframe=null,this.parseFunction=this.parseMessage.bind(this),this.connectorLink=e.document.createElement("a")}init(e){const t=new URLSearchParams({data:this.base64Encode(JSON.stringify(e)),parent:encodeURIComponent(this.win.document.location.href),btnText:encodeURIComponent(this.i18nService.t("webAuthnAuthenticate")),v:"1"});this.webAuthnNewTab?(t.append("locale",this.i18nService.translationLocale),this.platformUtilsService.launchUri(`${this.webVaultUrl}/webauthn-fallback-connector.html?${t}`)):(this.connectorLink.href=`${this.webVaultUrl}/webauthn-connector.html?${t}`,this.iframe=this.win.document.getElementById("webauthn_iframe"),this.iframe.allow="publickey-credentials-get "+new URL(this.webVaultUrl).origin,this.iframe.src=this.connectorLink.href,this.win.addEventListener("message",this.parseFunction,!1))}stop(){this.sendMessage("stop")}start(){this.sendMessage("start")}sendMessage(e){this.iframe&&this.iframe.src&&this.iframe.contentWindow&&this.iframe.contentWindow.postMessage(e,this.iframe.src)}base64Encode(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode("0x"+t))))}cleanup(){this.win.removeEventListener("message",this.parseFunction,!1)}parseMessage(e){if(!this.validMessage(e))return;const t=e.data.split("|");"success"===t[0]&&this.successCallback?this.successCallback(t[1]):"error"===t[0]&&this.errorCallback?this.errorCallback(t[1]):"info"===t[0]&&this.infoCallback&&this.infoCallback(t[1])}validMessage(e){return null!=e.origin&&""!==e.origin&&e.origin===this.connectorLink.origin&&null!=e.data&&"string"==typeof e.data&&(0===e.data.indexOf("success|")||0===e.data.indexOf("error|")||0===e.data.indexOf("info|"))}}class cn{constructor(e=null,t=null,n=!1){this.provider=e,this.token=t,this.remember=n}}class pn extends re{}const un={[sn.Authenticator]:{type:sn.Authenticator,name:null,description:null,priority:1,sort:1,premium:!1},[sn.Yubikey]:{type:sn.Yubikey,name:null,description:null,priority:3,sort:2,premium:!0},[sn.Duo]:{type:sn.Duo,name:"Duo",description:null,priority:2,sort:3,premium:!0},[sn.OrganizationDuo]:{type:sn.OrganizationDuo,name:"Duo (Organization)",description:null,priority:10,sort:4,premium:!1},[sn.Email]:{type:sn.Email,name:null,description:null,priority:0,sort:6,premium:!1},[sn.WebAuthn]:{type:sn.WebAuthn,name:null,description:null,priority:4,sort:5,premium:!0}};class mn{}class hn{}var vn=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class gn extends Se{constructor(e,t,n,i,r,o,a,s,l,d,c,p){super(a,n,r),this.authService=e,this.router=t,this.i18nService=n,this.apiService=i,this.platformUtilsService=r,this.win=o,this.environmentService=a,this.stateService=s,this.route=l,this.logService=d,this.twoFactorService=c,this.appIdService=p,this.token="",this.remember=!1,this.webAuthnReady=!1,this.webAuthnNewTab=!1,this.providers=un,this.providerType=sn,this.selectedProviderType=sn.Authenticator,this.webAuthnSupported=!1,this.webAuthn=null,this.title="",this.twoFactorEmail=null,this.identifier=null,this.loginRoute="login",this.successRoute="vault",this.webAuthnSupported=this.platformUtilsService.supportsWebAuthn(o)}get webAuthnAllow(){return`publickey-credentials-get ${this.environmentService.getWebVaultUrl()}`}ngOnInit(){return vn(this,void 0,void 0,(function*(){if(this.authing&&null!=this.twoFactorService.getProviders()){if(this.route.queryParams.pipe((0,C.P)()).subscribe((e=>{null!=e.identifier&&(this.identifier=e.identifier)})),this.needsLock&&(this.successRoute="lock"),null!=this.win&&this.webAuthnSupported){const e=this.environmentService.getWebVaultUrl();this.webAuthn=new dn(this.win,e,this.webAuthnNewTab,this.platformUtilsService,this.i18nService,(e=>{this.token=e,this.submit()}),(e=>{this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),e)}),(e=>{"ready"===e&&(this.webAuthnReady=!0)}))}this.selectedProviderType=this.twoFactorService.getDefaultProvider(this.webAuthnSupported),yield this.init()}else this.router.navigate([this.loginRoute])}))}ngOnDestroy(){this.cleanupWebAuthn(),this.webAuthn=null}init(){return vn(this,void 0,void 0,(function*(){if(null==this.selectedProviderType)return void(this.title=this.i18nService.t("loginUnavailable"));this.cleanupWebAuthn(),this.title=un[this.selectedProviderType].name;const e=this.twoFactorService.getProviders().get(this.selectedProviderType);switch(this.selectedProviderType){case sn.WebAuthn:this.webAuthnNewTab||setTimeout((()=>{this.authWebAuthn()}),500);break;case sn.Duo:case sn.OrganizationDuo:setTimeout((()=>{ln.init({iframe:void 0,host:e.Host,sig_request:e.Signature,submit_callback:e=>vn(this,void 0,void 0,(function*(){const t=e.querySelector('input[name="sig_response"]');null!=t&&(this.token=t.value,yield this.submit())}))})}),0);break;case sn.Email:this.twoFactorEmail=e.Email,this.twoFactorService.getProviders().size>1&&(yield this.sendEmail(!1))}}))}submit(){return vn(this,void 0,void 0,(function*(){if(yield this.setupCaptcha(),null!=this.token&&""!==this.token){if(this.selectedProviderType===sn.WebAuthn){if(null==this.webAuthn)return;this.webAuthn.stop()}else this.selectedProviderType!==sn.Email&&this.selectedProviderType!==sn.Authenticator||(this.token=this.token.replace(" ","").trim());try{yield this.doSubmit()}catch(e){this.selectedProviderType===sn.WebAuthn&&null!=this.webAuthn&&this.webAuthn.start()}}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("verificationCodeRequired"))}))}doSubmit(){return vn(this,void 0,void 0,(function*(){this.formPromise=this.authService.logInTwoFactor(new cn(this.selectedProviderType,this.token,this.remember),this.captchaToken);const e=yield this.formPromise,t=yield this.stateService.getDisableFavicon();yield this.stateService.setDisableFavicon(!!t),this.handleCaptchaRequired(e)||(null!=this.onSuccessfulLogin&&this.onSuccessfulLogin(),e.resetMasterPassword&&(this.successRoute="set-password"),e.forcePasswordReset&&(this.successRoute="update-temp-password"),null!=this.onSuccessfulLoginNavigate?this.onSuccessfulLoginNavigate():this.router.navigate([this.successRoute],{queryParams:{identifier:this.identifier}}))}))}sendEmail(e){return vn(this,void 0,void 0,(function*(){if(this.selectedProviderType===sn.Email&&null==this.emailPromise){try{const t=new pn;t.email=this.authService.email,t.masterPasswordHash=this.authService.masterPasswordHash,t.deviceIdentifier=yield this.appIdService.getAppId(),this.emailPromise=this.apiService.postTwoFactorEmail(t),yield this.emailPromise,e&&this.platformUtilsService.showToast("success",null,this.i18nService.t("verificationCodeEmailSent",this.twoFactorEmail))}catch(t){this.logService.error(t)}this.emailPromise=null}}))}authWebAuthn(){const e=this.twoFactorService.getProviders().get(this.selectedProviderType);this.webAuthnSupported&&null!=this.webAuthn&&this.webAuthn.init(e)}cleanupWebAuthn(){null!=this.webAuthn&&(this.webAuthn.stop(),this.webAuthn.cleanup())}get authing(){return this.authService.authingWithPassword()||this.authService.authingWithSso()||this.authService.authingWithApiKey()}get needsLock(){return this.authService.authingWithSso()||this.authService.authingWithApiKey()}}gn.ɵfac=function(e){return new(e||gn)(o["ɵɵdirectiveInject"](h),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Window),o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](mn),o["ɵɵdirectiveInject"](hn))},gn.ɵdir=o["ɵɵdefineDirective"]({type:gn,features:[o["ɵɵInheritDefinitionFeature"]]});var fn=n(91504),xn=n(31148);class yn{constructor(){this._onCreated=new xn.x,this._onClose=new xn.x,this._onClosed=new xn.x,this._onShow=new xn.x,this._onShown=new xn.x,this.onCreated=this._onCreated.asObservable(),this.onClose=this._onClose.asObservable(),this.onClosed=this._onClosed.asObservable(),this.onShow=this._onShow.asObservable(),this.onShown=this._onShow.asObservable()}show(){this._onShow.next()}shown(){this._onShown.next()}close(e){this.lastResult=e,this._onClose.next(e)}closed(){this._onClosed.next(this.lastResult)}created(e){this._onCreated.next(e)}onClosedPromise(){return this.onClosed.pipe((0,C.P)()).toPromise()}}const Sn=["modalContent"];function bn(e,t){}class wn{constructor(e,t,n,i,r){this.modalService=e,this.cd=t,this.el=n,this.focusTrapFactory=i,this.modalRef=r}ngAfterViewInit(){this.loadChildComponent(this.childComponentType),null!=this.setComponentParameters&&this.setComponentParameters(this.componentRef.instance),this.cd.detectChanges(),this.modalRef.created(this.el.nativeElement),this.focusTrap=this.focusTrapFactory.create(this.el.nativeElement.querySelector(".modal-dialog")),null==this.el.nativeElement.querySelector("[appAutoFocus]")&&this.focusTrap.focusFirstTabbableElementWhenReady()}loadChildComponent(e){const t=this.modalService.resolveComponentFactory(e);this.modalContentRef.clear(),this.componentRef=this.modalContentRef.createComponent(t)}ngOnDestroy(){this.componentRef&&this.componentRef.destroy(),this.focusTrap.destroy()}close(){this.modalRef.close()}getFocus(){const e=this.el.nativeElement.querySelector("[appAutoFocus]");null==e||e.focus()}}wn.ɵfac=function(e){return new(e||wn)(o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](o.ChangeDetectorRef),o["ɵɵdirectiveInject"](o.ElementRef),o["ɵɵdirectiveInject"](fn.ConfigurableFocusTrapFactory),o["ɵɵdirectiveInject"](yn))},wn.ɵcmp=o["ɵɵdefineComponent"]({type:wn,selectors:[["app-modal"]],viewQuery:function(e,t){if(1&e&&o["ɵɵviewQuery"](Sn,7,o.ViewContainerRef),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.modalContentRef=e.first)}},decls:2,vars:0,consts:[["modalContent",""]],template:function(e,t){1&e&&o["ɵɵtemplate"](0,bn,0,0,"ng-template",null,0,o["ɵɵtemplateRefExtractor"])},encapsulation:2});class In{constructor(e,t){this._parentInjector=e,this._additionalTokens=t}get(e,t,n){var i;return null!==(i=this._additionalTokens.get(e))&&void 0!==i?i:this._parentInjector.get(e,t)}}var Cn=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class En{constructor(){this.allowMultipleModals=!1}}class kn{constructor(e,t,n){this.componentFactoryResolver=e,this.applicationRef=t,this.injector=n,this.modalList=[],this.factoryResolvers=new Map,document.addEventListener("keyup",(e=>{"Escape"===e.key&&this.modalCount>0&&this.topModal.instance.close()}))}get modalCount(){return this.modalList.length}get topModal(){return this.modalList[this.modalCount-1]}openViewRef(e,t,n=null){return Cn(this,void 0,void 0,(function*(){const[i,r]=this.openInternal(e,null,!1);return r.instance.setComponentParameters=n,t.insert(r.hostView),yield i.onCreated.pipe((0,C.P)()).toPromise(),[i,r.instance.componentRef.instance]}))}open(e,t){var n;if((null===(n=null==t?void 0:t.allowMultipleModals)||void 0===n||!n)&&this.modalCount>0)return;const[i,r]=this.openInternal(e,t,!0);return i}registerComponentFactoryResolver(e,t){this.factoryResolvers.set(e,t)}resolveComponentFactory(e){return this.factoryResolvers.has(e)?this.factoryResolvers.get(e).resolveComponentFactory(e):this.componentFactoryResolver.resolveComponentFactory(e)}openInternal(e,t,n){const[i,r]=this.createModalComponent(t);if(r.instance.childComponentType=e,n){this.applicationRef.attachView(r.hostView);const e=r.hostView.rootNodes[0];document.body.appendChild(e)}return i.onClosed.pipe((0,C.P)()).subscribe((()=>{n&&this.applicationRef.detachView(r.hostView),r.destroy(),this.modalList.pop(),this.modalCount>0&&this.topModal.instance.getFocus()})),this.setupHandlers(i),this.modalList.push(r),[i,r]}setupHandlers(e){let t=null;e.onCreated.pipe((0,C.P)()).subscribe((n=>{document.body.classList.add("modal-open");const i=n.querySelector(".modal"),r=i.querySelector(".modal-dialog");t=document.createElement("div"),t.className="modal-backdrop fade",t.style.zIndex=`${this.modalCount}040`,i.prepend(t),r.addEventListener("click",(e=>{e.stopPropagation()})),r.style.zIndex=`${this.modalCount}050`;const o=Array.from(n.querySelectorAll('.modal-backdrop, .modal *[data-dismiss="modal"]'));for(const t of o)t.addEventListener("click",(()=>{e.close()}))})),e.onClose.pipe((0,C.P)()).subscribe((()=>{e.closed(),0===this.modalCount&&document.body.classList.remove("modal-open")}))}createModalComponent(e){const t=new yn,n=new WeakMap;n.set(En,e),n.set(yn,t);return[t,this.componentFactoryResolver.resolveComponentFactory(wn).create(new In(this.injector,n))]}}kn.ɵfac=function(e){return new(e||kn)(o["ɵɵinject"](o.ComponentFactoryResolver),o["ɵɵinject"](o.ApplicationRef),o["ɵɵinject"](o.Injector))},kn.ɵprov=o["ɵɵdefineInjectable"]({token:kn,factory:kn.ɵfac});class Pn{constructor(e,t,n,i,r){this.twoFactorService=e,this.router=t,this.i18nService=n,this.platformUtilsService=i,this.win=r,this.onProviderSelected=new o.EventEmitter,this.onRecoverSelected=new o.EventEmitter,this.providers=[]}ngOnInit(){this.providers=this.twoFactorService.getSupportedProviders(this.win)}choose(e){this.onProviderSelected.emit(e.type)}recover(){this.platformUtilsService.launchUri("https://bitwarden.com/help/lost-two-step-device/"),this.onRecoverSelected.emit()}}function An(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",19),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"div",11),o["ɵɵtext"](3,"\n              "),o["ɵɵelementStart"](4,"div",12),o["ɵɵtext"](5,"\n                "),o["ɵɵelement"](6,"img",20),o["ɵɵtext"](7,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementStart"](9,"div",14),o["ɵɵtext"](10,"\n                "),o["ɵɵelementStart"](11,"h3"),o["ɵɵtext"](12),o["ɵɵelementEnd"](),o["ɵɵtext"](13),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n              "),o["ɵɵelementStart"](15,"div",15),o["ɵɵtext"](16,"\n                "),o["ɵɵelementStart"](17,"button",16),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"]().choose(t)})),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit;o["ɵɵadvance"](6),o["ɵɵclassMap"]("mfaType"+e.type),o["ɵɵproperty"]("alt",e.name+" logo"),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](e.name),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",e.description,"\n              "),o["ɵɵadvance"](4),o["ɵɵattribute"]("aria-describedby",e.name),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](19,7,"select"),"\n                ")}}Pn.ɵfac=function(e){return new(e||Pn)(o["ɵɵdirectiveInject"](mn),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Window))},Pn.ɵdir=o["ɵɵdefineDirective"]({type:Pn,outputs:{onProviderSelected:"onProviderSelected",onRecoverSelected:"onRecoverSelected"}});class On extends Pn{constructor(e,t,n,i){super(e,t,n,i,window)}}On.ɵfac=function(e){return new(e||On)(o["ɵɵdirectiveInject"](mn),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P))},On.ɵcmp=o["ɵɵdefineComponent"]({type:On,selectors:[["app-two-factor-options"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:65,vars:22,consts:[["role","dialog","aria-modal","true","aria-labelledby","twoStepOptionsTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","twoStepOptionsTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],[1,"list-group","list-group-flush-2fa"],["class","list-group-item list-group-item-action",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"two-factor-content"],[1,"logo-col"],["alt","rc logo",1,"recovery-code-img"],[1,"text-col"],[1,"btn-col"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"list-group-item","list-group-item-action"],[3,"alt"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h2",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"button",5),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"span",6),o["ɵɵtext"](16,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"div",7),o["ɵɵtext"](21,"\n        "),o["ɵɵelementStart"](22,"div",8),o["ɵɵtext"](23,"\n          "),o["ɵɵtemplate"](24,An,23,9,"div",9),o["ɵɵtext"](25,"\n          "),o["ɵɵelementStart"](26,"div",10),o["ɵɵlistener"]("click",(function(){return t.recover()})),o["ɵɵtext"](27,"\n            "),o["ɵɵelementStart"](28,"div",11),o["ɵɵtext"](29,"\n              "),o["ɵɵelementStart"](30,"div",12),o["ɵɵtext"](31,"\n                "),o["ɵɵelement"](32,"img",13),o["ɵɵtext"](33,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n              "),o["ɵɵelementStart"](35,"div",14),o["ɵɵtext"](36,"\n                "),o["ɵɵelementStart"](37,"h3"),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40),o["ɵɵpipe"](41,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n              "),o["ɵɵelementStart"](43,"div",15),o["ɵɵtext"](44,"\n                "),o["ɵɵelementStart"](45,"button",16),o["ɵɵlistener"]("click",(function(){return t.recover()})),o["ɵɵpipe"](46,"i18n"),o["ɵɵtext"](47),o["ɵɵpipe"](48,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n      "),o["ɵɵelementStart"](55,"div",17),o["ɵɵtext"](56,"\n        "),o["ɵɵelementStart"](57,"button",18),o["ɵɵtext"](58),o["ɵɵpipe"](59,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](62,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](63,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,8,"twoStepOptions")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,10,"close")),o["ɵɵadvance"](12),o["ɵɵproperty"]("ngForOf",t.providers),o["ɵɵadvance"](14),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](39,12,"recoveryCodeTitle")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](41,14,"recoveryCodeDesc"),"\n              "),o["ɵɵadvance"](5),o["ɵɵattribute"]("aria-descibedby",o["ɵɵpipeBind1"](46,16,"recoveryCodeTitle")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](48,18,"select"),"\n                "),o["ɵɵadvance"](11),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](59,20,"close"),"\n        "))},directives:[pe,B.NgForOf],pipes:[M.C],encapsulation:2});class Tn{onClick(e){e.preventDefault()}}Tn.ɵfac=function(e){return new(e||Tn)},Tn.ɵdir=o["ɵɵdefineDirective"]({type:Tn,selectors:[["","appStopClick",""]],hostBindings:function(e,t){1&e&&o["ɵɵlistener"]("click",(function(e){return t.onClick(e)}))}});var Bn=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const Mn=["twoFactorOptions"];function Dn(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](2,1,"enterVerificationCodeApp"),"\n            "))}function Fn(e,t){if(1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind2"](2,1,"enterVerificationCodeEmail",e.twoFactorEmail),"\n            ")}}function Rn(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",24),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).sendEmail(!0)})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵproperty"]("appApiAction",e.emailPromise),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](2,2,"sendVerificationCodeEmailAgain"),"\n                ")}}function Un(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",22),o["ɵɵtext"](1,"\n                "),o["ɵɵtemplate"](2,Rn,3,4,"a",23),o["ɵɵtext"](3,"\n              "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.selectedProviderType===e.providerType.Email)}}function zn(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵtemplate"](2,Dn,3,3,"p",7),o["ɵɵtext"](3,"\n            "),o["ɵɵtemplate"](4,Fn,3,4,"p",7),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"div",18),o["ɵɵtext"](7,"\n              "),o["ɵɵelementStart"](8,"label",19),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n              "),o["ɵɵelementStart"](12,"input",20),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().token=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵtemplate"](14,Un,4,1,"small",21),o["ɵɵtext"](15,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n          "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.selectedProviderType===e.providerType.Authenticator),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.selectedProviderType===e.providerType.Email),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,5,"verificationCode")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.token),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.selectedProviderType===e.providerType.Email)}}function Nn(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"p",15),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"picture"),o["ɵɵtext"](7,"\n              "),o["ɵɵelement"](8,"source",25),o["ɵɵtext"](9,"\n              "),o["ɵɵelement"](10,"source",26),o["ɵɵtext"](11,"\n              "),o["ɵɵelement"](12,"img",27),o["ɵɵtext"](13,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n            "),o["ɵɵelementStart"](15,"div",18),o["ɵɵtext"](16,"\n              "),o["ɵɵelementStart"](17,"label",19),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n              "),o["ɵɵelementStart"](21,"input",28),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().token=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n          "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"insertYubiKey")),o["ɵɵadvance"](15),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](19,5,"verificationCode")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.token)}}function Vn(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"div",29),o["ɵɵtext"](3,"\n              "),o["ɵɵelement"](4,"iframe",30),o["ɵɵtext"](5,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("allow",e.webAuthnAllow)}}function Hn(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"div",31),o["ɵɵtext"](3,"\n              "),o["ɵɵelement"](4,"iframe",32),o["ɵɵtext"](5,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementContainerEnd"]())}function jn(e,t){1&e&&(o["ɵɵelement"](0,"i",33),o["ɵɵpipe"](1,"i18n")),2&e&&o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,1,"loading"))}function Ln(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",34),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"input",35),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().remember=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"label",36),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngModel",e.remember),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,2,"rememberMe"))}}function Kn(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"p"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,2,"noTwoStepProviders")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,4,"noTwoStepProviders2")))}function Gn(e,t){if(1&e&&(o["ɵɵelementStart"](0,"button",37),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"span"),o["ɵɵtext"](3,"\n                "),o["ɵɵelement"](4,"i",38),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵelement"](8,"i",39),o["ɵɵpipe"](9,"i18n"),o["ɵɵtext"](10,"\n            "),o["ɵɵelementEnd"]()),2&e){o["ɵɵnextContext"]();const e=o["ɵɵreference"](1);o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](6,3,"continue"),"\n              "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](9,5,"loading"))}}function qn(e,t){}const _n=function(e){return{"col-9":e}};class $n extends gn{constructor(e,t,n,i,r,o,a,s,l,d,c,p,u){super(e,t,n,i,r,window,a,o,l,d,c,p),this.modalService=s,this.routerService=u,this.onSuccessfulLoginNavigate=this.goAfterLogIn}anotherMethod(){return Bn(this,void 0,void 0,(function*(){const[e]=yield this.modalService.openViewRef(On,this.twoFactorOptionsModal,(t=>{t.onProviderSelected.subscribe((t=>Bn(this,void 0,void 0,(function*(){e.close(),this.selectedProviderType=t,yield this.init()})))),t.onRecoverSelected.subscribe((()=>{e.close()}))}))}))}goAfterLogIn(){return Bn(this,void 0,void 0,(function*(){const e=this.routerService.getPreviousUrl();e?this.router.navigateByUrl(e):this.router.navigate([this.successRoute],{queryParams:{identifier:this.identifier}})}))}}$n.ɵfac=function(e){return new(e||$n)(o["ɵɵdirectiveInject"](h),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](mn),o["ɵɵdirectiveInject"](hn),o["ɵɵdirectiveInject"](ce))},$n.ɵcmp=o["ɵɵdefineComponent"]({type:$n,selectors:[["app-two-factor"]],viewQuery:function(e,t){if(1&e&&o["ɵɵviewQuery"](Mn,7,o.ViewContainerRef),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.twoFactorOptionsModal=e.first)}},features:[o["ɵɵInheritDefinitionFeature"]],decls:59,vars:20,consts:[["ngNativeValidate","","autocomplete","off",1,"container",3,"appApiAction","ngSubmit"],["form",""],[1,"row","justify-content-md-center","mt-5"],[1,"col-5",3,"ngClass"],[1,"lead","text-center","mb-4"],[1,"card","d-block"],[1,"card-body"],[4,"ngIf"],["class","bwi bwi-spinner text-muted bwi-spin pull-right","aria-hidden","true",3,"title",4,"ngIf"],["class","form-check",4,"ngIf"],[3,"hidden"],["id","hcaptcha_iframe","height","80"],[1,"d-flex","mb-3"],["type","submit","class","btn btn-primary btn-block btn-submit",3,"disabled",4,"ngIf"],["routerLink","/login",1,"btn","btn-outline-secondary","btn-block","ml-2","mt-0"],[1,"text-center"],["href","#","appStopClick","",3,"click"],["twoFactorOptions",""],[1,"form-group"],["for","code",1,"sr-only"],["id","code","type","text","name","Code","required","","appAutofocus","","inputmode","tel","appInputVerbatim","",1,"form-control",3,"ngModel","ngModelChange"],["class","form-text",4,"ngIf"],[1,"form-text"],["href","#","appStopClick","",3,"appApiAction","click",4,"ngIf"],["href","#","appStopClick","",3,"appApiAction","click"],["srcset","../../images/yubikey.avif","type","image/avif"],["srcset","../../images/yubikey.webp","type","image/webp"],["src","../../images/yubikey.jpg","alt","",1,"rounded","img-fluid","mb-3"],["id","code","type","password","name","Code","required","","appAutofocus","","appInputVerbatim","","autocomplete","new-password",1,"form-control",3,"ngModel","ngModelChange"],["id","web-authn-frame",1,"mb-3"],["id","webauthn_iframe",3,"allow"],["id","duo-frame",1,"mb-3"],["id","duo_iframe"],["aria-hidden","true",1,"bwi","bwi-spinner","text-muted","bwi-spin","pull-right",3,"title"],[1,"form-check"],["id","remember","type","checkbox","name","Remember",1,"form-check-input",3,"ngModel","ngModelChange"],["for","remember",1,"form-check-label"],["type","submit",1,"btn","btn-primary","btn-block","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-sign-in"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",3),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"p",4),o["ɵɵtext"](8),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"div",5),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"div",6),o["ɵɵtext"](13,"\n          "),o["ɵɵtemplate"](14,zn,17,7,"ng-container",7),o["ɵɵtext"](15,"\n          "),o["ɵɵtemplate"](16,Nn,24,7,"ng-container",7),o["ɵɵtext"](17,"\n          "),o["ɵɵtemplate"](18,Vn,7,1,"ng-container",7),o["ɵɵtext"](19,"\n          "),o["ɵɵtemplate"](20,Hn,7,0,"ng-container",7),o["ɵɵtext"](21,"\n          "),o["ɵɵtemplate"](22,jn,2,3,"i",8),o["ɵɵtext"](23,"\n          "),o["ɵɵtemplate"](24,Ln,8,4,"div",9),o["ɵɵtext"](25,"\n          "),o["ɵɵtemplate"](26,Kn,10,6,"ng-container",7),o["ɵɵtext"](27,"\n          "),o["ɵɵelement"](28,"hr"),o["ɵɵtext"](29,"\n          "),o["ɵɵelementStart"](30,"div",10),o["ɵɵtext"](31,"\n            "),o["ɵɵelement"](32,"iframe",11),o["ɵɵtext"](33,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n          "),o["ɵɵelementStart"](35,"div",12),o["ɵɵtext"](36,"\n            "),o["ɵɵtemplate"](37,Gn,11,7,"button",13),o["ɵɵtext"](38,"\n            "),o["ɵɵelementStart"](39,"a",14),o["ɵɵtext"](40),o["ɵɵpipe"](41,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n          "),o["ɵɵelementStart"](44,"div",15),o["ɵɵtext"](45,"\n            "),o["ɵɵelementStart"](46,"a",16),o["ɵɵlistener"]("click",(function(){return t.anotherMethod()})),o["ɵɵtext"](47),o["ɵɵpipe"](48,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n"),o["ɵɵtemplate"](56,qn,0,0,"ng-template",null,17,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](58,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](18,_n,t.selectedProviderType===t.providerType.Duo||t.selectedProviderType===t.providerType.OrganizationDuo)),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](t.title),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",t.selectedProviderType===t.providerType.Email||t.selectedProviderType===t.providerType.Authenticator),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.selectedProviderType===t.providerType.Yubikey),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.selectedProviderType===t.providerType.WebAuthn),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.selectedProviderType===t.providerType.Duo||t.selectedProviderType===t.providerType.OrganizationDuo),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.loading&&t.selectedProviderType===t.providerType.WebAuthn),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",null!=t.selectedProviderType),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",null==t.selectedProviderType),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",!t.showCaptcha()),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngIf",null!=t.selectedProviderType&&t.selectedProviderType!==t.providerType.Duo&&t.selectedProviderType!==t.providerType.OrganizationDuo&&t.selectedProviderType!==t.providerType.WebAuthn),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](41,14,"cancel"),"\n            "),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](48,16,"useAnotherTwoStepMethod"))}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,B.NgClass,B.NgIf,p.RouterLinkWithHref,Tn,d.DefaultValueAccessor,d.RequiredValidator,Z.U,J.b,d.NgControlStatus,d.NgModel,d.CheckboxControlValueAccessor],pipes:[M.C],encapsulation:2});var Wn=n(24540);class Qn extends re{}var Yn=n(20510),Zn=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Jn extends qt{constructor(e,t,n,i,r,o,a,s,l,d,c){super(t,o,a,i,n,r,l),this.router=e,this.apiService=s,this.userVerificationService=d,this.logService=c,this.showPassword=!1}togglePassword(e){this.showPassword=!this.showPassword,document.getElementById(e?"masterPasswordRetype":"masterPassword").focus()}cancel(){return Zn(this,void 0,void 0,(function*(){yield this.stateService.setOrganizationInvitation(null),this.router.navigate(["/vault"])}))}setupSubmitActions(){return Zn(this,void 0,void 0,(function*(){if(null==this.currentMasterPassword||""===this.currentMasterPassword)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPassRequired")),!1;const e={type:Wn.R.MasterPassword,secret:this.currentMasterPassword};try{yield this.userVerificationService.verifyUser(e)}catch(t){return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),t.message),!1}return this.kdf=yield this.stateService.getKdfType(),this.kdfIterations=yield this.stateService.getKdfIterations(),!0}))}performSubmitActions(e,t,n){return Zn(this,void 0,void 0,(function*(){try{const t=new Qn;t.masterPasswordHash=yield this.cryptoService.hashPassword(this.currentMasterPassword,null),t.newMasterPasswordHash=e,t.key=n[1].encryptedString,this.apiService.postPassword(t),this.platformUtilsService.showToast("success",this.i18nService.t("masterPasswordChanged"),this.i18nService.t("logBackIn")),null!=this.onSuccessfulChangePassword?this.onSuccessfulChangePassword():this.messagingService.send("logout")}catch(t){this.logService.error(t)}}))}}function Xn(e,t){if(1&e&&o["ɵɵelement"](0,"app-callout",22),2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("enforcedPolicyOptions",e.enforcedPolicyOptions)}}Jn.ɵfac=function(e){return new(e||Jn)(o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](Yn.i),o["ɵɵdirectiveInject"](L.$))},Jn.ɵdir=o["ɵɵdefineDirective"]({type:Jn,features:[o["ɵɵInheritDefinitionFeature"]]});class ei extends Jn{constructor(e,t,n,i,r,o,a,s,l,d,c){super(e,t,n,i,r,o,a,s,d,c,l)}}ei.ɵfac=function(e){return new(e||ei)(o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](Yn.i))},ei.ɵcmp=o["ɵɵdefineComponent"]({type:ei,selectors:[["app-update-password"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:91,vars:33,consts:[["ngNativeValidate","","autocomplete","off",3,"appApiAction","ngSubmit"],["form",""],[1,"row","justify-content-md-center","mt-5"],[1,"col-4"],[1,"lead","text-center","mb-4"],[1,"card","d-block"],[1,"card-body"],["type","warning"],["type","info",3,"enforcedPolicyOptions",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"form-group"],["for","currentMasterPassword"],["id","currentMasterPassword","type","password","name","MasterPasswordHash","required","","appInputVerbatim","",1,"form-control",3,"ngModel","ngModelChange"],["for","newMasterPassword"],["id","newMasterPassword","type","password","name","NewMasterPasswordHash","required","","appInputVerbatim","","autocomplete","new-password",1,"form-control","mb-1",3,"ngModel","ngModelChange","input"],[3,"score","showText"],["for","masterPasswordRetype"],["id","masterPasswordRetype","type","password","name","MasterPasswordRetype","required","","appInputVerbatim","","autocomplete","new-password",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"fa","fa-spinner","fa-spin",3,"title"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","info",3,"enforcedPolicyOptions"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",3),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"p",4),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"div",5),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"div",6),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"app-callout",7),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n          "),o["ɵɵtemplate"](19,Xn,1,1,"app-callout",8),o["ɵɵtext"](20,"\n\n          "),o["ɵɵelementStart"](21,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](23,"\n            "),o["ɵɵelementStart"](24,"div",9),o["ɵɵtext"](25,"\n              "),o["ɵɵelementStart"](26,"div",10),o["ɵɵtext"](27,"\n                "),o["ɵɵelementStart"](28,"div",11),o["ɵɵtext"](29,"\n                  "),o["ɵɵelementStart"](30,"label",12),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n                  "),o["ɵɵelementStart"](34,"input",13),o["ɵɵlistener"]("ngModelChange",(function(e){return t.currentMasterPassword=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n            "),o["ɵɵelementStart"](39,"div",9),o["ɵɵtext"](40,"\n              "),o["ɵɵelementStart"](41,"div",10),o["ɵɵtext"](42,"\n                "),o["ɵɵelementStart"](43,"div",11),o["ɵɵtext"](44,"\n                  "),o["ɵɵelementStart"](45,"label",14),o["ɵɵtext"](46),o["ɵɵpipe"](47,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n                  "),o["ɵɵelementStart"](49,"input",15),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPassword=e}))("input",(function(){return t.updatePasswordStrength()})),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n                  "),o["ɵɵelement"](51,"app-password-strength",16),o["ɵɵtext"](52,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n              "),o["ɵɵelementStart"](55,"div",10),o["ɵɵtext"](56,"\n                "),o["ɵɵelementStart"](57,"div",11),o["ɵɵtext"](58,"\n                  "),o["ɵɵelementStart"](59,"label",17),o["ɵɵtext"](60),o["ɵɵpipe"](61,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](62,"\n                  "),o["ɵɵelementStart"](63,"input",18),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPasswordRetype=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n            "),o["ɵɵelementStart"](68,"button",19),o["ɵɵtext"](69,"\n              "),o["ɵɵelement"](70,"i",20),o["ɵɵpipe"](71,"i18n"),o["ɵɵtext"](72,"\n              "),o["ɵɵelementStart"](73,"span"),o["ɵɵtext"](74),o["ɵɵpipe"](75,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](77,"\n            "),o["ɵɵelementStart"](78,"button",21),o["ɵɵlistener"]("click",(function(){return t.cancel()})),o["ɵɵtext"](79,"\n              "),o["ɵɵelementStart"](80,"span"),o["ɵɵtext"](81),o["ɵɵpipe"](82,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](83,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](84,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](85,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](86,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](87,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](88,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](89,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](90,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,17,"updateMasterPassword")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](17,19,"masterPasswordInvalidWarning")," "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.enforcedPolicyOptions),o["ɵɵadvance"](2),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](32,21,"currentMasterPass")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.currentMasterPassword),o["ɵɵadvance"](12),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](47,23,"newMasterPass")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.masterPassword),o["ɵɵadvance"](2),o["ɵɵproperty"]("score",t.masterPasswordScore)("showText",!0),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](61,25,"confirmNewMasterPass")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.masterPasswordRetype),o["ɵɵadvance"](5),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](71,27,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](75,29,"changeMasterPassword")),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](82,31,"cancel"))}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,Pe.O,B.NgIf,d.DefaultValueAccessor,d.RequiredValidator,J.b,d.NgControlStatus,d.NgModel,rt],pipes:[M.C],encapsulation:2});class ti{}class ni extends ti{}var ii=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class ri extends qt{constructor(e,t,n,i,r,o,a,s,l,d){super(e,r,o,n,t,i,s),this.apiService=a,this.syncService=l,this.logService=d,this.showPassword=!1}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return ii(this,void 0,void 0,(function*(){yield this.syncService.fullSync(!0),e.ngOnInit.call(this)}))}togglePassword(e){this.showPassword=!this.showPassword,document.getElementById(e?"masterPasswordRetype":"masterPassword").focus()}setupSubmitActions(){return ii(this,void 0,void 0,(function*(){return this.enforcedPolicyOptions=yield this.policyService.getMasterPasswordPolicyOptions(),this.email=yield this.stateService.getEmail(),this.kdf=yield this.stateService.getKdfType(),this.kdfIterations=yield this.stateService.getKdfIterations(),!0}))}submit(){return ii(this,void 0,void 0,(function*(){if((yield this.strongPassword())&&(yield this.setupSubmitActions()))try{const e=yield this.cryptoService.makeKey(this.masterPassword,this.email.trim().toLowerCase(),this.kdf,this.kdfIterations),t=yield this.cryptoService.hashPassword(this.masterPassword,e),n=yield this.cryptoService.getEncKey(),i=yield this.cryptoService.remakeEncKey(e,n);yield this.performSubmitActions(t,e,i)}catch(e){this.logService.error(e)}}))}performSubmitActions(e,t,n){return ii(this,void 0,void 0,(function*(){try{const t=new ni;t.key=n[1].encryptedString,t.newMasterPasswordHash=e,t.masterPasswordHint=this.hint,this.formPromise=this.apiService.putUpdateTempPassword(t),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("updatedMasterPassword")),null!=this.onSuccessfulChangePassword?this.onSuccessfulChangePassword():this.messagingService.send("logout")}catch(t){this.logService.error(t)}}))}}function oi(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",26),o["ɵɵtext"](1,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("enforcedPolicyOptions",e.enforcedPolicyOptions)}}ri.ɵfac=function(e){return new(e||ri)(o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](L.$))},ri.ɵdir=o["ɵɵdefineDirective"]({type:ri,features:[o["ɵɵInheritDefinitionFeature"]]});const ai=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}};class si extends ri{constructor(e,t,n,i,r,o,a,s,l,d){super(e,t,n,i,r,o,a,l,d,s)}}si.ɵfac=function(e){return new(e||si)(o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](Ft._))},si.ɵcmp=o["ɵɵdefineComponent"]({type:si,selectors:[["app-update-temp-password"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:105,vars:51,consts:[["ngNativeValidate","","autocomplete","off",3,"appApiAction","ngSubmit"],["form",""],[1,"row","justify-content-md-center","mt-5"],[1,"col-4"],[1,"lead","text-center","mb-4"],[1,"card","d-block"],[1,"card-body"],["type","warning"],[1,"form-group"],["type","info",3,"enforcedPolicyOptions",4,"ngIf"],["for","masterPassword"],[1,"d-flex"],[1,"w-100"],["id","masterPassword","name","MasterPasswordHash","required","","appInputVerbatim","",1,"text-monospace","form-control","mb-1",3,"type","ngModel","ngModelChange","input"],[3,"score","showText"],["type","button",1,"ml-1","btn","btn-link",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],[1,"progress-bar","invisible"],["for","masterPasswordRetype"],["id","masterPasswordRetype","name","MasterPasswordRetype","required","","appInputVerbatim","",1,"text-monospace","form-control",3,"type","ngModel","ngModelChange"],["for","hint"],["id","hint","type","text","name","Hint",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-text","text-muted"],["type","submit",1,"btn","btn-primary","btn-block","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button",1,"btn","btn-outline-secondary","btn-block","ml-2","mt-0",3,"click"],["type","info",3,"enforcedPolicyOptions"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",3),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"p",4),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"div",5),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"div",6),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"app-callout",7),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n          "),o["ɵɵelementStart"](19,"div",8),o["ɵɵtext"](20,"\n            "),o["ɵɵtemplate"](21,oi,2,1,"app-callout",9),o["ɵɵtext"](22,"\n            "),o["ɵɵelementStart"](23,"label",10),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n            "),o["ɵɵelementStart"](27,"div",11),o["ɵɵtext"](28,"\n              "),o["ɵɵelementStart"](29,"div",12),o["ɵɵtext"](30,"\n                "),o["ɵɵelementStart"](31,"input",13),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPassword=e}))("input",(function(){return t.updatePasswordStrength()})),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n                "),o["ɵɵelementStart"](33,"app-password-strength",14),o["ɵɵtext"](34,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n              "),o["ɵɵelementStart"](37,"div"),o["ɵɵtext"](38,"\n                "),o["ɵɵelementStart"](39,"button",15),o["ɵɵlistener"]("click",(function(){return t.togglePassword(!1)})),o["ɵɵpipe"](40,"i18n"),o["ɵɵtext"](41,"\n                  "),o["ɵɵelement"](42,"i",16),o["ɵɵtext"](43,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n                "),o["ɵɵelement"](45,"div",17),o["ɵɵtext"](46,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n          "),o["ɵɵelementStart"](50,"div",8),o["ɵɵtext"](51,"\n            "),o["ɵɵelementStart"](52,"label",18),o["ɵɵtext"](53),o["ɵɵpipe"](54,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n            "),o["ɵɵelementStart"](56,"div",11),o["ɵɵtext"](57,"\n              "),o["ɵɵelementStart"](58,"input",19),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPasswordRetype=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n              "),o["ɵɵelementStart"](60,"button",15),o["ɵɵlistener"]("click",(function(){return t.togglePassword(!0)})),o["ɵɵpipe"](61,"i18n"),o["ɵɵtext"](62,"\n                "),o["ɵɵelement"](63,"i",16),o["ɵɵtext"](64,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n          "),o["ɵɵelementStart"](68,"div",8),o["ɵɵtext"](69,"\n            "),o["ɵɵelementStart"](70,"label",20),o["ɵɵtext"](71),o["ɵɵpipe"](72,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](73,"\n            "),o["ɵɵelementStart"](74,"input",21),o["ɵɵlistener"]("ngModelChange",(function(e){return t.hint=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](75,"\n            "),o["ɵɵelementStart"](76,"small",22),o["ɵɵtext"](77),o["ɵɵpipe"](78,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](79,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](80,"\n          "),o["ɵɵelement"](81,"hr"),o["ɵɵtext"](82,"\n          "),o["ɵɵelementStart"](83,"div",11),o["ɵɵtext"](84,"\n            "),o["ɵɵelementStart"](85,"button",23),o["ɵɵtext"](86,"\n              "),o["ɵɵelement"](87,"i",24),o["ɵɵpipe"](88,"i18n"),o["ɵɵtext"](89,"\n              "),o["ɵɵelementStart"](90,"span"),o["ɵɵtext"](91),o["ɵɵpipe"](92,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](93,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](94,"\n            "),o["ɵɵelementStart"](95,"button",25),o["ɵɵlistener"]("click",(function(){return t.logOut()})),o["ɵɵtext"](96),o["ɵɵpipe"](97,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](98,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](99,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](100,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](101,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](102,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](103,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](104,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,23,"updateMasterPassword")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](17,25,"updateMasterPasswordWarning")," "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",t.enforcedPolicyOptions),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](25,27,"masterPass")),o["ɵɵadvance"](7),o["ɵɵpropertyInterpolate"]("type",t.showPassword?"text":"password"),o["ɵɵproperty"]("ngModel",t.masterPassword),o["ɵɵadvance"](2),o["ɵɵproperty"]("score",t.masterPasswordScore)("showText",!0),o["ɵɵadvance"](6),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](40,29,"toggleVisibility")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](45,ai,!t.showPassword,t.showPassword)),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](54,31,"reTypeMasterPass")),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("type",t.showPassword?"text":"password"),o["ɵɵproperty"]("ngModel",t.masterPasswordRetype),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](61,33,"toggleVisibility")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](48,ai,!t.showPassword,t.showPassword)),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](72,35,"masterPassHint")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.hint),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](78,37,"masterPassHintDesc")),o["ɵɵadvance"](8),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](88,39,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](92,41,"submit")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](97,43,"logOut"),"\n            ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,Pe.O,B.NgIf,d.DefaultValueAccessor,d.RequiredValidator,J.b,d.NgControlStatus,d.NgModel,rt,pe,B.NgClass],pipes:[M.C],encapsulation:2});class li{constructor(e,t){this.userId=e,this.token=t}}var di=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class ci{constructor(e,t,n,i,r,o,a){this.router=e,this.platformUtilsService=t,this.i18nService=n,this.route=i,this.apiService=r,this.logService=o,this.stateService=a}ngOnInit(){this.route.queryParams.pipe((0,C.P)()).subscribe((e=>di(this,void 0,void 0,(function*(){if(null!=e.userId&&null!=e.token)try{return yield this.apiService.postAccountVerifyEmailToken(new li(e.userId,e.token)),(yield this.stateService.getIsAuthenticated())&&(yield this.apiService.refreshIdentityToken()),this.platformUtilsService.showToast("success",null,this.i18nService.t("emailVerified")),void this.router.navigate(["/"])}catch(t){this.logService.error(t)}this.platformUtilsService.showToast("error",null,this.i18nService.t("emailVerifiedFailed")),this.router.navigate(["/"])}))))}}ci.ɵfac=function(e){return new(e||ci)(o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](P.b))},ci.ɵcmp=o["ɵɵdefineComponent"]({type:ci,selectors:[["app-verify-email-token"]],decls:18,vars:6,consts:[[1,"mt-5","d-flex","justify-content-center"],["alt","Bitwarden",1,"mb-4","logo","logo-themed"],[1,"text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-2x","text-muted",3,"title"],[1,"sr-only"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div"),o["ɵɵtext"](3,"\n    "),o["ɵɵelement"](4,"img",1),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"p",2),o["ɵɵtext"](7,"\n      "),o["ɵɵelement"](8,"i",3),o["ɵɵpipe"](9,"i18n"),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"span",4),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n")),2&e&&(o["ɵɵadvance"](8),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](9,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,4,"loading")))},pipes:[M.C],encapsulation:2});class pi{constructor(e,t){this.userId=e,this.token=t}}var ui=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class mi{constructor(e,t,n,i,r,o){this.router=e,this.apiService=t,this.platformUtilsService=n,this.i18nService=i,this.route=r,this.logService=o}ngOnInit(){this.route.queryParams.pipe((0,C.P)()).subscribe((e=>ui(this,void 0,void 0,(function*(){null!=e.userId&&null!=e.token&&null!=e.email?(this.userId=e.userId,this.token=e.token,this.email=e.email):this.router.navigate(["/"])}))))}submit(){return ui(this,void 0,void 0,(function*(){try{const e=new pi(this.userId,this.token);this.formPromise=this.apiService.postAccountRecoverDeleteToken(e),yield this.formPromise,this.platformUtilsService.showToast("success",this.i18nService.t("accountDeleted"),this.i18nService.t("accountDeletedDesc")),this.router.navigate(["/"])}catch(e){this.logService.error(e)}}))}}mi.ɵfac=function(e){return new(e||mi)(o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](L.$))},mi.ɵcmp=o["ɵɵdefineComponent"]({type:mi,selectors:[["app-verify-recover-delete"]],decls:53,vars:21,consts:[["ngNativeValidate","",1,"container",3,"appApiAction","ngSubmit"],["form",""],[1,"row","justify-content-md-center","mt-5"],[1,"col-5"],[1,"lead","text-center","mb-4"],[1,"card"],[1,"card-body"],["type","warning"],[1,"text-center"],[1,"d-flex"],["type","submit",1,"btn","btn-danger","btn-block","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["routerLink","/login",1,"btn","btn-outline-secondary","btn-block","ml-2","mt-0"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",3),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"p",4),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"div",5),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"div",6),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"app-callout",7),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n          "),o["ɵɵelementStart"](19,"p",8),o["ɵɵtext"](20,"\n            "),o["ɵɵelementStart"](21,"strong"),o["ɵɵtext"](22),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n          "),o["ɵɵelementStart"](25,"p"),o["ɵɵtext"](26),o["ɵɵpipe"](27,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n          "),o["ɵɵelement"](29,"hr"),o["ɵɵtext"](30,"\n          "),o["ɵɵelementStart"](31,"div",9),o["ɵɵtext"](32,"\n            "),o["ɵɵelementStart"](33,"button",10),o["ɵɵtext"](34,"\n              "),o["ɵɵelementStart"](35,"span"),o["ɵɵtext"](36),o["ɵɵpipe"](37,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n              "),o["ɵɵelement"](39,"i",11),o["ɵɵpipe"](40,"i18n"),o["ɵɵtext"](41,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n            "),o["ɵɵelementStart"](43,"a",12),o["ɵɵtext"](44),o["ɵɵpipe"](45,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,9,"deleteAccount")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,11,"deleteAccountWarning")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](t.email),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](27,13,"deleteRecoverConfirmDesc")),o["ɵɵadvance"](7),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](37,15,"deleteAccount")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](40,17,"loading")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](45,19,"cancel"),"\n            ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,Pe.O,p.RouterLinkWithHref],pipes:[M.C],encapsulation:2});var hi=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class vi{constructor(e,t){this.router=e,this.authService=t}canActivate(e){return hi(this,void 0,void 0,(function*(){const t=yield this.authService.getAuthStatus();return t===i.LoggedOut?this.router.createUrlTree(["/login"],{queryParams:e.queryParams}):t===i.Locked?this.router.createUrlTree(["/lock"],{queryParams:e.queryParams}):this.router.createUrlTree(["/vault"],{queryParams:e.queryParams})}))}}vi.ɵfac=function(e){return new(e||vi)(o["ɵɵinject"](p.Router),o["ɵɵinject"](h))},vi.ɵprov=o["ɵɵdefineInjectable"]({token:vi,factory:vi.ɵfac});var gi=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class fi{constructor(e){this.platformUtilsService=e,this.year="2015"}ngOnInit(){return gi(this,void 0,void 0,(function*(){this.year=(new Date).getFullYear().toString(),this.version=yield this.platformUtilsService.getApplicationVersion(),document.body.classList.add("layout_frontend")}))}ngOnDestroy(){document.body.classList.remove("layout_frontend")}}fi.ɵfac=function(e){return new(e||fi)(o["ɵɵdirectiveInject"](E.P))},fi.ɵcmp=o["ɵɵdefineComponent"]({type:fi,selectors:[["app-frontend-layout"]],decls:8,vars:5,consts:[[1,"container","my-5","text-muted","text-center"]],template:function(e,t){1&e&&(o["ɵɵelement"](0,"router-outlet"),o["ɵɵtext"](1,"\n"),o["ɵɵelementStart"](2,"div",0),o["ɵɵtext"](3),o["ɵɵelement"](4,"br"),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n  © ",t.year," Bitwarden Inc. "),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind2"](6,2,"versionNumber",t.version),"\n"))},directives:[p.RouterOutlet],pipes:[M.C],encapsulation:2});var xi=n(63628);const yi={manage:[xi.P.CreateNewCollections,xi.P.EditAnyCollection,xi.P.DeleteAnyCollection,xi.P.EditAssignedCollections,xi.P.DeleteAssignedCollections,xi.P.AccessEventLogs,xi.P.ManageGroups,xi.P.ManageUsers,xi.P.ManagePolicies,xi.P.ManageSso],tools:[xi.P.AccessImportExport,xi.P.AccessReports],settings:[xi.P.ManageOrganization]};class Si{static getPermissions(e){return"admin"===e?Object.values(yi).reduce(((e,t)=>e.concat(t)),[]):yi[e]}static canAccessAdmin(e){return this.canAccessTools(e)||this.canAccessSettings(e)||this.canAccessManage(e)}static canAccessTools(e){return e.hasAnyPermission(Si.getPermissions("tools"))}static canAccessSettings(e){return e.hasAnyPermission(Si.getPermissions("settings"))}static canAccessManage(e){return e.hasAnyPermission(Si.getPermissions("manage"))}}class bi{}class wi{}var Ii=n(41320);class Ci{}var Ei=n(26194),ki=n(73974),Pi=n(91849),Ai=n(44234);class Oi{onClick(e){e.stopPropagation()}}Oi.ɵfac=function(e){return new(e||Oi)},Oi.ɵdir=o["ɵɵdefineDirective"]({type:Oi,selectors:[["","appStopProp",""]],hostBindings:function(e,t){1&e&&o["ɵɵlistener"]("click",(function(e){return t.onClick(e)}))}});var Ti=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const Bi=function(e){return{"rounded-circle":e}};function Mi(e,t){if(1&e&&o["ɵɵelement"](0,"img",1),2&e){const e=o["ɵɵnextContext"]();o["ɵɵpropertyInterpolate"]("title",e.data),o["ɵɵproperty"]("src",e.sanitizer.bypassSecurityTrustResourceUrl(e.src),o["ɵɵsanitizeUrl"])("ngClass",o["ɵɵpureFunction1"](3,Bi,e.circle))}}class Di{constructor(e,t,n){this.sanitizer=e,this.cryptoFunctionService=t,this.stateService=n,this.size=45,this.charCount=2,this.textColor="#ffffff",this.fontSize=20,this.fontWeight=300,this.dynamic=!1,this.circle=!1}ngOnInit(){this.dynamic||this.generate()}ngOnChanges(){this.dynamic&&this.generate()}generate(){return Ti(this,void 0,void 0,(function*(){if((yield this.stateService.getEnableGravitars())&&null!=this.email){const e=yield this.cryptoFunctionService.hash(this.email.toLowerCase().trim(),"md5"),t=N.c.fromBufferToHex(e).toLowerCase();this.src="https://www.gravatar.com/avatar/"+t+"?s="+this.size+"&r=pg&d=retro"}else{let e=null;const t=this.data.toUpperCase();this.charCount>1&&(e=this.getFirstLetters(t,this.charCount)),null==e&&(e=this.unicodeSafeSubstring(t,this.charCount)),e.match(N.c.regexpEmojiPresentation)&&(e=e.match(N.c.regexpEmojiPresentation)[0]);const n=this.getCharText(e),i=this.stringToColor(t),r=this.getSvg(this.size,i);r.appendChild(n);const o=window.document.createElement("div").appendChild(r).outerHTML,a=window.btoa(unescape(encodeURIComponent(o)));this.src="data:image/svg+xml;base64,"+a}}))}stringToColor(e){let t=0;for(let i=0;i<e.length;i++)t=e.charCodeAt(i)+((t<<5)-t);let n="#";for(let i=0;i<3;i++){n+=("00"+(t>>8*i&255).toString(16)).substr(-2)}return n}getFirstLetters(e,t){const n=e.split(" ");if(n.length>1){let e="";for(let i=0;i<t;i++)e+=this.unicodeSafeSubstring(n[i],1);return e}return null}getSvg(e,t){const n=window.document.createElement("svg");return n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("pointer-events","none"),n.setAttribute("width",e.toString()),n.setAttribute("height",e.toString()),n.style.backgroundColor=t,n.style.width=e+"px",n.style.height=e+"px",n}getCharText(e){const t=window.document.createElement("text");return t.setAttribute("text-anchor","middle"),t.setAttribute("y","50%"),t.setAttribute("x","50%"),t.setAttribute("dy","0.35em"),t.setAttribute("pointer-events","auto"),t.setAttribute("fill",this.textColor),t.setAttribute("font-family",'"Open Sans","Helvetica Neue",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"'),t.textContent=e,t.style.fontWeight=this.fontWeight.toString(),t.style.fontSize=this.fontSize+"px",t}unicodeSafeSubstring(e,t){const n=e.match(/./gu);return null!=n?n.slice(0,t).join(""):""}}Di.ɵfac=function(e){return new(e||Di)(o["ɵɵdirectiveInject"](r.DomSanitizer),o["ɵɵdirectiveInject"](we),o["ɵɵdirectiveInject"](P.b))},Di.ɵcmp=o["ɵɵdefineComponent"]({type:Di,selectors:[["app-avatar"]],inputs:{data:"data",email:"email",size:"size",charCount:"charCount",textColor:"textColor",fontSize:"fontSize",fontWeight:"fontWeight",dynamic:"dynamic",circle:"circle"},features:[o["ɵɵNgOnChangesFeature"]],decls:1,vars:1,consts:[[3,"src","title","ngClass",4,"ngIf"],[3,"src","title","ngClass"]],template:function(e,t){1&e&&o["ɵɵtemplate"](0,Mi,1,5,"img",0),2&e&&o["ɵɵproperty"]("ngIf",t.src)},directives:[B.NgIf,B.NgClass],encapsulation:2});var Fi=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const Ri=function(e){return["/organizations",e]};function Ui(e,t){if(1&e&&(o["ɵɵelementStart"](0,"li",6),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"a",30),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("routerLink",o["ɵɵpureFunction1"](4,Ri,e.organizations[0].id)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,2,"organizations"))}}const zi=function(e){return["/providers",e]};function Ni(e,t){if(1&e&&(o["ɵɵelementStart"](0,"li",6),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"a",30),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("routerLink",o["ɵɵpureFunction1"](4,zi,e.providers[0].id)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,2,"provider"))}}function Vi(e,t){1&e&&(o["ɵɵelementStart"](0,"li",6),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"a",31),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,1,"provider")))}function Hi(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵtemplate"](2,Ni,6,6,"li",11),o["ɵɵtext"](3,"\n          "),o["ɵɵtemplate"](4,Vi,6,3,"li",11),o["ɵɵtext"](5,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",1==e.providers.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.providers.length>1)}}function ji(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",32),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"app-avatar",33),o["ɵɵtext"](3,"\n              "),o["ɵɵelementStart"](4,"div",34),o["ɵɵtext"](5,"\n                "),o["ɵɵelementStart"](6,"span"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n                "),o["ɵɵelementStart"](10,"small",35),o["ɵɵtext"](11),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("data",e.name)("email",e.email)("circle",!0),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,5,"loggedInAs")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](e.name)}}const Li=function(e){return{"nav-background-alt":e}};class Ki{constructor(e,t,n,i,r,o,a,s,l){this.messagingService=e,this.platformUtilsService=t,this.tokenService=n,this.providerService=i,this.syncService=r,this.organizationService=o,this.i18nService=a,this.broadcasterService=s,this.ngZone=l,this.selfHosted=!1,this.providers=[],this.organizations=[],this.selfHosted=this.platformUtilsService.isSelfHost()}ngOnInit(){return Fi(this,void 0,void 0,(function*(){this.name=yield this.tokenService.getName(),this.email=yield this.tokenService.getEmail(),null!=this.name&&""!==this.name.trim()||(this.name=this.email),null==(yield this.syncService.getLastSync())&&(yield this.syncService.fullSync(!1)),this.providers=yield this.providerService.getAll(),this.organizations=yield this.buildOrganizations(),this.broadcasterService.subscribe(this.constructor.name,(e=>Fi(this,void 0,void 0,(function*(){this.ngZone.run((()=>Fi(this,void 0,void 0,(function*(){switch(e.command){case"organizationCreated":this.organizations.length<1&&(this.organizations=yield this.buildOrganizations())}}))))}))))}))}buildOrganizations(){return Fi(this,void 0,void 0,(function*(){return(yield this.organizationService.getAll()).filter((e=>Si.canAccessAdmin(e))).sort(N.c.getSortFunction(this.i18nService,"name"))}))}lock(){this.messagingService.send("lockVault")}logOut(){this.messagingService.send("logout")}}Ki.ɵfac=function(e){return new(e||Ki)(o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](bi),o["ɵɵdirectiveInject"](wi),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Ci),o["ɵɵdirectiveInject"](o.NgZone))},Ki.ɵcmp=o["ɵɵdefineComponent"]({type:Ki,selectors:[["app-navbar"]],decls:106,vars:38,consts:[[1,"navbar","navbar-expand","navbar-dark",3,"ngClass"],[1,"container"],["routerLink","/",1,"navbar-brand",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-shield"],[1,"collapse","navbar-collapse"],[1,"navbar-nav"],["routerLinkActive","active",1,"nav-item"],["routerLink","/vault",1,"nav-link"],["routerLink","/sends",1,"nav-link"],["routerLink","/tools",1,"nav-link"],["routerLink","/reports",1,"nav-link"],["class","nav-item","routerLinkActive","active",4,"ngIf"],[4,"ngIf"],[1,"navbar-nav","flex-row","ml-md-auto","d-none","d-md-flex"],[1,"tw-border-0","tw-bg-transparent","tw-text-alt2","tw-opacity-70","hover:tw-opacity-90",3,"bitMenuTriggerFor"],["aria-hidden","true",1,"bwi","bwi-user-circle","bwi-lg"],["aria-hidden","true",1,"bwi","bwi-caret-down","bwi-sm"],[1,"dropdown-menu"],["accountMenu",""],[1,"tw-max-w-[300px]","tw-min-w-[200px]","tw-flex","tw-flex-col"],["class","tw-flex tw-items-center tw-leading-tight tw-text-info tw-py-1 tw-px-4","appStopProp","",4,"ngIf"],["bitMenuItem","","routerLink","/settings/account"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-user"],["bitMenuItem","","href","https://bitwarden.com/help/","target","_blank","rel","noopener"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-question-circle"],["bitMenuItem","","href","https://bitwarden.com/download/","target","_blank","rel","noopener"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-download"],["bitMenuItem","","type","button",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-lock"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-sign-out"],[1,"nav-link",3,"routerLink"],["routerLink","/providers",1,"nav-link"],["appStopProp","",1,"tw-flex","tw-items-center","tw-leading-tight","tw-text-info","tw-py-1","tw-px-4"],["size","25","fontSize","14",3,"data","email","circle"],[1,"tw-ml-2","tw-block","tw-overflow-hidden","tw-whitespace-nowrap"],[1,"tw-text-muted","tw-block","tw-overflow-hidden","tw-whitespace-nowrap"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"nav",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"a",2),o["ɵɵpipe"](5,"i18n"),o["ɵɵtext"](6,"\n      "),o["ɵɵelement"](7,"i",3),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n    "),o["ɵɵelementStart"](10,"div",4),o["ɵɵtext"](11,"\n      "),o["ɵɵelementStart"](12,"ul",5),o["ɵɵtext"](13,"\n        "),o["ɵɵelementStart"](14,"li",6),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"a",7),o["ɵɵtext"](17),o["ɵɵpipe"](18,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementStart"](21,"li",6),o["ɵɵtext"](22,"\n          "),o["ɵɵelementStart"](23,"a",8),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n        "),o["ɵɵelementStart"](28,"li",6),o["ɵɵtext"](29,"\n          "),o["ɵɵelementStart"](30,"a",9),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n        "),o["ɵɵelementStart"](35,"li",6),o["ɵɵtext"](36,"\n          "),o["ɵɵelementStart"](37,"a",10),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n        "),o["ɵɵtemplate"](42,Ui,6,6,"li",11),o["ɵɵtext"](43,"\n        "),o["ɵɵtemplate"](44,Hi,6,2,"ng-container",12),o["ɵɵtext"](45,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n    "),o["ɵɵelementStart"](48,"ul",13),o["ɵɵtext"](49,"\n      "),o["ɵɵelementStart"](50,"li"),o["ɵɵtext"](51,"\n        "),o["ɵɵelementStart"](52,"button",14),o["ɵɵtext"](53,"\n          "),o["ɵɵelement"](54,"i",15),o["ɵɵtext"](55,"\n          "),o["ɵɵelement"](56,"i",16),o["ɵɵtext"](57,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n        "),o["ɵɵelementStart"](59,"bit-menu",17,18),o["ɵɵtext"](61,"\n          "),o["ɵɵelementStart"](62,"div",19),o["ɵɵtext"](63,"\n            "),o["ɵɵtemplate"](64,ji,14,7,"div",20),o["ɵɵtext"](65,"\n            "),o["ɵɵelement"](66,"bit-menu-divider"),o["ɵɵtext"](67,"\n            "),o["ɵɵelementStart"](68,"a",21),o["ɵɵtext"](69,"\n              "),o["ɵɵelement"](70,"i",22),o["ɵɵtext"](71),o["ɵɵpipe"](72,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](73,"\n            "),o["ɵɵelementStart"](74,"a",23),o["ɵɵtext"](75,"\n              "),o["ɵɵelement"](76,"i",24),o["ɵɵtext"](77),o["ɵɵpipe"](78,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](79,"\n            "),o["ɵɵelementStart"](80,"a",25),o["ɵɵtext"](81,"\n              "),o["ɵɵelement"](82,"i",26),o["ɵɵtext"](83),o["ɵɵpipe"](84,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](85,"\n            "),o["ɵɵelement"](86,"bit-menu-divider"),o["ɵɵtext"](87,"\n            "),o["ɵɵelementStart"](88,"button",27),o["ɵɵlistener"]("click",(function(){return t.lock()})),o["ɵɵtext"](89,"\n              "),o["ɵɵelement"](90,"i",28),o["ɵɵtext"](91),o["ɵɵpipe"](92,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](93,"\n            "),o["ɵɵelementStart"](94,"button",27),o["ɵɵlistener"]("click",(function(){return t.logOut()})),o["ɵɵtext"](95,"\n              "),o["ɵɵelement"](96,"i",29),o["ɵɵtext"](97),o["ɵɵpipe"](98,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](99,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](100,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](101,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](102,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](103,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](104,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](105,"\n")),2&e){const e=o["ɵɵreference"](60);o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](36,Li,t.selfHosted)),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind2"](5,15,"pageTitle","Bitwarden")),o["ɵɵadvance"](13),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](18,18,"vaults")),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](25,20,"send")),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](32,22,"tools")),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](39,24,"reports")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.organizations.length>=1),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.providers.length>=1),o["ɵɵadvance"](8),o["ɵɵproperty"]("bitMenuTriggerFor",e),o["ɵɵadvance"](12),o["ɵɵproperty"]("ngIf",t.name),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](72,26,"accountSettings"),"\n            "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](78,28,"getHelp"),"\n            "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](84,30,"getApps"),"\n            "),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](92,32,"lockNow"),"\n            "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](98,34,"logOut"),"\n            ")}},directives:[B.NgClass,p.RouterLinkWithHref,pe,p.RouterLinkActive,B.NgIf,Ei.t,ki.M,Pi.n,Ai.e,Oi,Di],pipes:[M.C],encapsulation:2});var Gi=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class qi{constructor(e){this.platformUtilsService=e,this.year="2015"}ngOnInit(){return Gi(this,void 0,void 0,(function*(){this.year=(new Date).getFullYear().toString(),this.version=yield this.platformUtilsService.getApplicationVersion()}))}}qi.ɵfac=function(e){return new(e||qi)(o["ɵɵdirectiveInject"](E.P))},qi.ɵcmp=o["ɵɵdefineComponent"]({type:qi,selectors:[["app-footer"]],decls:15,vars:5,consts:[[1,"container","footer","text-muted"],[1,"row"],[1,"col"],[1,"col","text-center"],[1,"col","text-right"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n    "),o["ɵɵelement"](7,"div",3),o["ɵɵtext"](8,"\n    "),o["ɵɵelementStart"](9,"div",4),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n")),2&e&&(o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("© ",t.year," Bitwarden Inc."),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind2"](11,2,"versionNumber",t.version),"\n    "))},pipes:[M.C],encapsulation:2});class _i{ngOnInit(){document.body.classList.remove("layout_frontend")}}_i.ɵfac=function(e){return new(e||_i)},_i.ɵcmp=o["ɵɵdefineComponent"]({type:_i,selectors:[["app-user-layout"]],decls:6,vars:0,template:function(e,t){1&e&&(o["ɵɵelement"](0,"app-navbar"),o["ɵɵtext"](1,"\n"),o["ɵɵelement"](2,"router-outlet"),o["ɵɵtext"](3,"\n"),o["ɵɵelement"](4,"app-footer"),o["ɵɵtext"](5,"\n"))},directives:[Ki,p.RouterOutlet,qi],encapsulation:2});var $i=n(13243);function Wi(e,t){1&e&&(o["ɵɵtext"](0,"\n  "),o["ɵɵelementStart"](1,"div",0),o["ɵɵtext"](2,"\n    "),o["ɵɵprojection"](3),o["ɵɵtext"](4,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"))}class Qi extends $i.CdkStep{constructor(){super(...arguments),this.subLabel=""}}Qi.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](Qi)))(t||Qi)}}(),Qi.ɵcmp=o["ɵɵdefineComponent"]({type:Qi,selectors:[["app-vertical-step"]],inputs:{subLabel:"subLabel"},features:[o["ɵɵProvidersFeature"]([{provide:$i.CdkStep,useExisting:Qi}]),o["ɵɵInheritDefinitionFeature"]],ngContentSelectors:["*"],decls:2,vars:0,consts:[[1,"tw-pl-7","tw-inline-block","tw-border-0","tw-border-l","tw-border-solid","tw-border-secondary-300","tw-w-10/12"]],template:function(e,t){1&e&&(o["ɵɵprojectionDef"](),o["ɵɵtemplate"](0,Wi,6,0,"ng-template"),o["ɵɵtext"](1,"\n"))},encapsulation:2});const Yi=function(e,t,n){return{"tw-text-contrast tw-bg-primary-500":e,"tw-text-main tw-bg-secondary-300":t,"tw-text-muted tw-bg-transparent":n}};function Zi(e,t){if(1&e&&(o["ɵɵelementStart"](0,"span",7),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction3"](2,Yi,e.selected,!e.selected&&!e.disabled&&e.step.editable,e.disabled)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n      ",e.stepNumber,"\n    ")}}function Ji(e,t){1&e&&(o["ɵɵelementStart"](0,"span",8),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",9),o["ɵɵtext"](3,"\n    "),o["ɵɵelementEnd"]())}const Xi=function(e){return{"hover:tw-bg-secondary-100":e}},er=function(e){return{"tw-font-bold":e}},tr=function(e){return{"tw-mt-1":e}};class nr{constructor(){this.onSelectStep=new o.EventEmitter,this.disabled=!1,this.selected=!1}selectStep(){this.onSelectStep.emit()}}function ir(e,t){if(1&e&&o["ɵɵelement"](0,"div",5),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵproperty"]("ngTemplateOutlet",e.selected?e.selected.content:null)}}function rr(e,t){1&e&&o["ɵɵelement"](0,"div",6)}function or(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"li"),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"app-vertical-step-content",2),o["ɵɵlistener"]("onSelectStep",(function(){const t=o["ɵɵrestoreView"](e).index;return o["ɵɵnextContext"]().selectStepByIndex(t)})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n      "),o["ɵɵtemplate"](4,ir,1,1,"div",3),o["ɵɵtext"](5,"\n      "),o["ɵɵtemplate"](6,rr,1,0,"div",4),o["ɵɵtext"](7,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=t.last,r=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("disabled",r.isStepDisabled(n))("selected",r.selectedIndex===n)("step",e)("stepNumber",n+1),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",r.selectedIndex===n),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!(i||r.selectedIndex===n))}}nr.ɵfac=function(e){return new(e||nr)},nr.ɵcmp=o["ɵɵdefineComponent"]({type:nr,selectors:[["app-vertical-step-content"]],inputs:{disabled:"disabled",selected:"selected",step:"step",stepNumber:"stepNumber"},outputs:{onSelectStep:"onSelectStep"},decls:19,vars:15,consts:[[1,"tw-m-2.5","tw-text-center","tw-h-16"],[1,"tw-w-full","tw-flex","tw-border-none","tw-bg-transparent","tw-items-center",3,"disabled","ngClass","click"],["class","tw-rounded-full tw-font-bold tw-leading-9 tw-mr-3.5 tw-w-9",3,"ngClass",4,"ngIf"],["class","tw-text-contrast tw-bg-primary-500 tw-rounded-full tw-font-bold tw-leading-9 tw-mr-3.5 tw-w-9",4,"ngIf"],[1,"tw-text-left","tw-txt-main","tw-leading-snug","tw-h-12","tw-mt-3.5",3,"ngClass"],[1,"main-label","text","tw-text-main","tw-mb-1",3,"ngClass"],[1,"sub-label","small","tw-text-muted"],[1,"tw-rounded-full","tw-font-bold","tw-leading-9","tw-mr-3.5","tw-w-9",3,"ngClass"],[1,"tw-text-contrast","tw-bg-primary-500","tw-rounded-full","tw-font-bold","tw-leading-9","tw-mr-3.5","tw-w-9"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-check","tw-p-1"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"button",1),o["ɵɵlistener"]("click",(function(){return t.selectStep()})),o["ɵɵtext"](3,"\n    "),o["ɵɵtemplate"](4,Zi,2,6,"span",2),o["ɵɵtext"](5,"\n    "),o["ɵɵtemplate"](6,Ji,4,0,"span",3),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"div",4),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"p",5),o["ɵɵtext"](11),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n      "),o["ɵɵelementStart"](13,"p",6),o["ɵɵtext"](14),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n")),2&e&&(o["ɵɵadvance"](2),o["ɵɵproperty"]("disabled",t.disabled)("ngClass",o["ɵɵpureFunction1"](9,Xi,!t.disabled&&t.step.editable)),o["ɵɵattribute"]("aria-expanded",t.selected),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.step.completed),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.step.completed),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](11,er,t.selected)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](13,tr,!t.step.subLabel)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",t.step.label,"\n      "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](t.step.subLabel))},directives:[B.NgClass,B.NgIf],encapsulation:2});class ar extends $i.CdkStepper{constructor(){super(...arguments),this.activeClass="active"}isNextButtonHidden(){return!(this.steps.length===this.selectedIndex+1)}isStepDisabled(e){var t;return this.selectedIndex!==e&&(this.selectedIndex!==e-1||!(null===(t=this.steps.find(((t,n)=>n==e-1)))||void 0===t?void 0:t.completed))}selectStepByIndex(e){this.selectedIndex=e}}function sr(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",1,2),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"bit-form-field"),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"bit-label"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelement"](9,"input",3),o["ɵɵtext"](10,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("formGroup",e.formGroup),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,2,"organizationName"))}}function lr(e,t){1&e&&(o["ɵɵelementStart"](0,"bit-form-field",7),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"bit-label"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n      "),o["ɵɵelement"](6,"input",10),o["ɵɵtext"](7,"\n    "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,1,"clientOwnerEmail")))}function dr(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",6),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"bit-form-field",7),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"bit-label"),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n      "),o["ɵɵelement"](8,"input",3),o["ɵɵtext"](9,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementStart"](11,"bit-form-field",7),o["ɵɵtext"](12,"\n      "),o["ɵɵelementStart"](13,"bit-label"),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n      "),o["ɵɵelement"](17,"input",8),o["ɵɵtext"](18,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n    "),o["ɵɵtemplate"](20,lr,8,3,"bit-form-field",9),o["ɵɵtext"](21,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,3,"organizationName")),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](15,5,"billingEmail")),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",e.isProvider)}}function cr(e,t){1&e&&(o["ɵɵelementStart"](0,"div",14),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"bit-form-field",7),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"bit-label"),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelement"](8,"input",15),o["ɵɵtext"](9,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,1,"businessName")))}function pr(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"input",11),o["ɵɵlistener"]("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).changedBusinessOwned.emit()})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"bit-label",12),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵtemplate"](8,cr,11,3,"div",13),o["ɵɵtext"](9,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,2,"accountOwnedBusiness")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.formGroup.controls.businessOwned.value)}}function ur(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",1,2),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"h2"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n  "),o["ɵɵtemplate"](7,dr,22,7,"div",4),o["ɵɵtext"](8,"\n  "),o["ɵɵtemplate"](9,pr,10,4,"div",5),o["ɵɵtext"](10,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("formGroup",e.formGroup),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](5,4,"generalInformation")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.createOrganization),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.isProvider&&!e.acceptingSponsorship)}}ar.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](ar)))(t||ar)}}(),ar.ɵcmp=o["ɵɵdefineComponent"]({type:ar,selectors:[["app-vertical-stepper"]],inputs:{activeClass:"activeClass"},features:[o["ɵɵProvidersFeature"]([{provide:$i.CdkStepper,useExisting:ar}]),o["ɵɵInheritDefinitionFeature"]],decls:8,vars:1,consts:[[1,"tw-flex","tw-list-none","tw-flex-col","tw-flex-wrap","tw-p-5"],[4,"ngFor","ngForOf"],[3,"disabled","selected","step","stepNumber","onSelectStep"],["class","tw-pl-7 tw-inline-block",3,"ngTemplateOutlet",4,"ngIf"],["class","tw-h-6 tw-ml-8 tw-border-0 tw-border-l tw-border-solid tw-border-secondary-300",4,"ngIf"],[1,"tw-pl-7","tw-inline-block",3,"ngTemplateOutlet"],[1,"tw-h-6","tw-ml-8","tw-border-0","tw-border-l","tw-border-solid","tw-border-secondary-300"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"ul",0),o["ɵɵtext"](3,"\n    "),o["ɵɵtemplate"](4,or,8,6,"li",1),o["ɵɵtext"](5,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",t.steps))},directives:[B.NgForOf,nr,B.NgIf,B.NgTemplateOutlet],encapsulation:2});class mr{constructor(){this.nameOnly=!1,this.createOrganization=!0,this.isProvider=!1,this.acceptingSponsorship=!1,this.changedBusinessOwned=new o.EventEmitter}}mr.ɵfac=function(e){return new(e||mr)},mr.ɵcmp=o["ɵɵdefineComponent"]({type:mr,selectors:[["app-org-info"]],inputs:{nameOnly:"nameOnly",createOrganization:"createOrganization",isProvider:"isProvider",acceptingSponsorship:"acceptingSponsorship",formGroup:"formGroup"},outputs:{changedBusinessOwned:"changedBusinessOwned"},decls:4,vars:2,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["form",""],["bitInput","","type","text","formControlName","name"],["class","tw-flex tw-w-full tw-space-x-4",4,"ngIf"],[4,"ngIf"],[1,"tw-flex","tw-w-full","tw-space-x-4"],[1,"tw-w-1/2"],["bitInput","","type","email","formControlName","billingEmail"],["class","tw-w-1/2",4,"ngIf"],["bitInput","","type","email","formControlName","clientOwnerEmail"],["type","checkbox","name","businessOwned","formControlName","businessOwned",3,"change"],["for","businessOwned",1,"tw-mb-3"],["class","tw-mt-4",4,"ngIf"],[1,"tw-mt-4"],["bitInput","","type","text","formControlName","businessName"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,sr,12,4,"form",0),o["ɵɵtext"](1,"\n"),o["ɵɵtemplate"](2,ur,11,6,"form",0),o["ɵɵtext"](3,"\n")),2&e&&(o["ɵɵproperty"]("ngIf",t.nameOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.nameOnly))},directives:[B.NgIf,d["ɵNgNoValidate"],d.NgControlStatusGroup,d.FormGroupDirective,Ye.d,Ze,Je.G,d.DefaultValueAccessor,d.NgControlStatus,d.FormControlName,d.CheckboxControlValueAccessor],pipes:[M.C],encapsulation:2});class hr{}hr.ɵfac=function(e){return new(e||hr)},hr.ɵcmp=o["ɵɵdefineComponent"]({type:hr,selectors:[["app-teams-content"]],decls:24,vars:0,consts:[[1,"!tw-text-alt2"],[1,"tw-pt-24"],[1,"tw-text-3xl","tw-text-main","tw-mt-12"],[1,"tw-mt-2.5","tw-mb-20"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"h1",0),o["ɵɵtext"](1,"You've chosen Bitwarden for Teams"),o["ɵɵelementEnd"](),o["ɵɵtext"](2,"\n"),o["ɵɵelementStart"](3,"div",1),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"h2"),o["ɵɵtext"](6,"What you can do with Btiwarden for Teams"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementStart"](9,"div",2),o["ɵɵtext"](10,"\n  "),o["ɵɵelementStart"](11,"p",3),o["ɵɵtext"](12,"Collaborate and share securely"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementStart"](14,"p",3),o["ɵɵtext"](15,"Deploy and manage quickly and easily"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n  "),o["ɵɵelementStart"](17,"p",3),o["ɵɵtext"](18,"Access anywhere on any device"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n  "),o["ɵɵelementStart"](20,"p",3),o["ɵɵtext"](21,"Create your account to get started"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n"))},encapsulation:2});class vr{}vr.ɵfac=function(e){return new(e||vr)},vr.ɵcmp=o["ɵɵdefineComponent"]({type:vr,selectors:[["app-enterprise-content"]],decls:24,vars:0,consts:[[1,"!tw-text-alt2"],[1,"tw-pt-24"],[1,"tw-text-3xl","tw-text-main","tw-mt-12"],[1,"tw-mt-2.5","tw-mb-20"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"h1",0),o["ɵɵtext"](1,"You've chosen Bitwarden for Enterprise"),o["ɵɵelementEnd"](),o["ɵɵtext"](2,"\n"),o["ɵɵelementStart"](3,"div",1),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"h2"),o["ɵɵtext"](6,"What you can do with Bitwarden for Enterprise"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n\n"),o["ɵɵelementStart"](9,"div",2),o["ɵɵtext"](10,"\n  "),o["ɵɵelementStart"](11,"p",3),o["ɵɵtext"](12,"Collaborate and share securely"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementStart"](14,"p",3),o["ɵɵtext"](15,"Deploy and manage quickly and easily"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n  "),o["ɵɵelementStart"](17,"p",3),o["ɵɵtext"](18,"Access anywhere on any device"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n  "),o["ɵɵelementStart"](20,"p",3),o["ɵɵtext"](21,"Create your account to get started"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n"))},encapsulation:2});class gr{}gr.ɵfac=function(e){return new(e||gr)},gr.ɵcmp=o["ɵɵdefineComponent"]({type:gr,selectors:[["app-families-content"]],decls:24,vars:0,consts:[[1,"!tw-text-alt2"],[1,"tw-pt-24"],[1,"tw-text-3xl","tw-text-main","tw-mt-12"],[1,"tw-mt-2.5","tw-mb-20"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"h1",0),o["ɵɵtext"](1,"You've chosen Bitwarden for Families"),o["ɵɵelementEnd"](),o["ɵɵtext"](2,"\n"),o["ɵɵelementStart"](3,"div",1),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"h2"),o["ɵɵtext"](6,"\n    Trusted by millions of individuals, teams, and organizations worldwide for secure password\n    storage and sharing.\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementStart"](9,"div",2),o["ɵɵtext"](10,"\n  "),o["ɵɵelementStart"](11,"p",3),o["ɵɵtext"](12,"Collaborate and share securely"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementStart"](14,"p",3),o["ɵɵtext"](15,"Deploy and manage quickly and easily"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n  "),o["ɵɵelementStart"](17,"p",3),o["ɵɵtext"](18,"Access anywhere on any device"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n  "),o["ɵɵelementStart"](20,"p",3),o["ɵɵtext"](21,"Create your account to get started"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n"))},encapsulation:2});const fr=["stepper"];function xr(e,t){1&e&&o["ɵɵelement"](0,"app-teams-content")}function yr(e,t){1&e&&o["ɵɵelement"](0,"app-enterprise-content")}function Sr(e,t){1&e&&o["ɵɵelement"](0,"app-families-content")}class br{constructor(e,t,n){this.route=e,this.formBuilder=t,this.titleCasePipe=n,this.email="",this.org="teams",this.orgInfoSubLabel="",this.orgInfoFormGroup=this.formBuilder.group({name:["",[d.Validators.required]],additionalStorage:[0,[d.Validators.min(0),d.Validators.max(99)]],additionalSeats:[0,[d.Validators.min(0),d.Validators.max(1e5)]],businessName:[""],plan:[],product:[]})}ngOnInit(){this.route.queryParams.pipe((0,C.P)()).subscribe((e=>{null!=e.email&&e.email.indexOf("@")>-1&&(this.email=e.email),e.org&&(this.org=e.org)}))}stepSelectionChange(e){1===e.selectedIndex&&""===this.orgInfoFormGroup.controls.name.value?this.orgInfoSubLabel="Enter your "+this.titleCasePipe.transform(this.org)+" organization information":1===e.previouslySelectedIndex&&(this.orgInfoSubLabel=this.orgInfoFormGroup.controls.name.value)}createdAccount(e){this.email=e,this.verticalStepper.next()}}br.ɵfac=function(e){return new(e||br)(o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](d.FormBuilder),o["ɵɵdirectiveInject"](B.TitleCasePipe))},br.ɵcmp=o["ɵɵdefineComponent"]({type:br,selectors:[["app-trial"]],viewQuery:function(e,t){if(1&e&&o["ɵɵviewQuery"](fr,7),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.verticalStepper=e.first)}},decls:78,vars:11,consts:[[1,"tw-bg-background-alt2","tw-h-96","tw--mt-48","tw-absolute","tw--skew-y-3","tw-w-full","tw--z-10"],[1,"tw-flex","tw-max-w-screen-xl","tw-min-w-4xl","tw-mx-auto","tw-px-4"],[1,"tw-w-1/2"],["alt","Bitwarden","src","../../images/register-layout/logo-horizontal-white.svg",1,"tw-mt-6",2,"height","50px","width","335px"],[1,"tw-pt-12"],[4,"ngIf"],[1,"tw-pt-56"],[1,"tw-rounded","tw-border","tw-border-solid","tw-bg-background","tw-border-secondary-300"],[1,"tw-h-12","tw-flex","tw-items-center","tw-rounded-t","tw-bg-secondary-100","tw-w-full"],[1,"tw-uppercase","tw-pl-4","tw-text-base","tw-mb-0","tw-font-bold"],["linear","",3,"selectionChange"],["stepper",""],["label","Create Account",3,"editable","subLabel"],[3,"isInTrialFlow","createdAccount"],["label","Organization Information",3,"subLabel"],[3,"nameOnly","formGroup"],["bitButton","","buttonType","primary","cdkStepperNext","",3,"disabled"],["label","Billing"],["bitButton","","buttonType","secondary","cdkStepperPrevious",""],["bitButton","","buttonType","primary","cdkStepperNext",""],["label","Confirmation Details","subLabel","Fancy sub label"]],template:function(e,t){1&e&&(o["ɵɵelement"](0,"div",0),o["ɵɵtext"](1,"\n\n"),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n  "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n    "),o["ɵɵelement"](6,"img",3),o["ɵɵtext"](7,"\n    "),o["ɵɵtext"](8,"\n    "),o["ɵɵelementStart"](9,"div",4),o["ɵɵtext"](10,"\n      "),o["ɵɵtext"](11,"\n      "),o["ɵɵtemplate"](12,xr,1,0,"app-teams-content",5),o["ɵɵtext"](13,"\n      "),o["ɵɵtext"](14,"\n      "),o["ɵɵtemplate"](15,yr,1,0,"app-enterprise-content",5),o["ɵɵtext"](16,"\n      "),o["ɵɵtext"](17,"\n      "),o["ɵɵtemplate"](18,Sr,1,0,"app-families-content",5),o["ɵɵtext"](19,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n  "),o["ɵɵelementStart"](22,"div",2),o["ɵɵtext"](23,"\n    "),o["ɵɵelementStart"](24,"div",6),o["ɵɵtext"](25,"\n      "),o["ɵɵelementStart"](26,"div",7),o["ɵɵtext"](27,"\n        "),o["ɵɵelementStart"](28,"div",8),o["ɵɵtext"](29,"\n          "),o["ɵɵelementStart"](30,"h2",9),o["ɵɵtext"](31),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n        "),o["ɵɵelementStart"](34,"app-vertical-stepper",10,11),o["ɵɵlistener"]("selectionChange",(function(e){return t.stepSelectionChange(e)})),o["ɵɵtext"](36,"\n          "),o["ɵɵelementStart"](37,"app-vertical-step",12),o["ɵɵtext"](38,"\n            "),o["ɵɵelementStart"](39,"app-register-form",13),o["ɵɵlistener"]("createdAccount",(function(e){return t.createdAccount(e)})),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n          "),o["ɵɵelementStart"](42,"app-vertical-step",14),o["ɵɵtext"](43,"\n            "),o["ɵɵelement"](44,"app-org-info",15),o["ɵɵtext"](45,"\n            "),o["ɵɵelementStart"](46,"button",16),o["ɵɵtext"](47,"\n              Next\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n          "),o["ɵɵelementStart"](50,"app-vertical-step",17),o["ɵɵtext"](51,"\n            "),o["ɵɵtext"](52,"\n            "),o["ɵɵelementStart"](53,"p"),o["ɵɵtext"](54,'This is content of "Step 3"'),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n            "),o["ɵɵelementStart"](56,"button",18),o["ɵɵtext"](57,"Back"),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n            "),o["ɵɵelementStart"](59,"button",19),o["ɵɵtext"](60,"Complete step"),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](62,"\n          "),o["ɵɵelementStart"](63,"app-vertical-step",20),o["ɵɵtext"](64,"\n            "),o["ɵɵtext"](65,"\n            "),o["ɵɵelementStart"](66,"p"),o["ɵɵtext"](67,'This is any content of "Step 4"'),o["ɵɵelementEnd"](),o["ɵɵtext"](68,"\n            "),o["ɵɵelementStart"](69,"button",19),o["ɵɵtext"](70,"Complete"),o["ɵɵelementEnd"](),o["ɵɵtext"](71,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](73,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](74,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](75,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](77,"\n")),2&e&&(o["ɵɵadvance"](12),o["ɵɵproperty"]("ngIf","teams"===t.org),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf","enterprise"===t.org),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf","families"===t.org),o["ɵɵadvance"](13),o["ɵɵtextInterpolate1"]("\n            Start your 7-Day free trial of Bitwarden for ",t.org,"\n          "),o["ɵɵadvance"](6),o["ɵɵproperty"]("editable",!1)("subLabel",t.email),o["ɵɵadvance"](2),o["ɵɵproperty"]("isInTrialFlow",!0),o["ɵɵadvance"](3),o["ɵɵproperty"]("subLabel",t.orgInfoSubLabel),o["ɵɵadvance"](2),o["ɵɵproperty"]("nameOnly",!0)("formGroup",t.orgInfoFormGroup),o["ɵɵadvance"](2),o["ɵɵproperty"]("disabled",t.orgInfoFormGroup.get("name").hasError("required")))},directives:[B.NgIf,ar,Qi,mt,mr,d.NgControlStatusGroup,d.FormGroupDirective,et.H,$i.CdkStepperNext,$i.CdkStepperPrevious,hr,vr,gr],encapsulation:2});var wr=n(5012),Ir=n(53385),Cr=n(16746);class Er{calculateSearchBarLocalizationString(e){return"favorites"===e.status?"searchFavorites":"trash"===e.status?"searchTrash":null!=e.cipherType?"searchType":null!=e.selectedFolderId&&"none"!=e.selectedFolderId?"searchFolder":e.selectedCollection?"searchCollection":null!=e.selectedOrganizationId?"searchOrganization":e.myVaultOnly?"searchMyVault":"searchVault"}}class kr{}kr.ɵfac=function(e){return new(e||kr)},kr.ɵmod=o["ɵɵdefineNgModule"]({type:kr}),kr.ɵinj=o["ɵɵdefineInjector"]({providers:[{provide:Er,useClass:Er}],imports:[[Ir.m,Cr.H,wr.f],Ir.m,Cr.H,wr.f]});class Pr{constructor(e){this.selectedCollection=!1,this.selectedFolder=!1,this.myVaultOnly=!1,this.refreshCollectionsAndFolders=!1,Object.assign(this,e)}resetFilter(){this.cipherType=null,this.status=null,this.selectedCollection=!1,this.selectedCollectionId=null,this.selectedFolder=!1,this.selectedFolderId=null}resetOrganization(){this.myVaultOnly=!1,this.selectedOrganizationId=null,this.resetFilter()}buildFilter(){return e=>{let t=!0;return"favorites"===this.status&&t&&(t=e.favorite),"trash"===this.status&&t&&(t=e.isDeleted),null!=this.cipherType&&t&&(t=e.type===this.cipherType),this.selectedFolder&&null==this.selectedFolderId&&t&&(t=null==e.folderId),this.selectedFolder&&null!=this.selectedFolderId&&t&&(t=e.folderId===this.selectedFolderId),this.selectedCollection&&null==this.selectedCollectionId&&t&&(t=null!=e.organizationId&&(null==e.collectionIds||0===e.collectionIds.length)),this.selectedCollection&&null!=this.selectedCollectionId&&t&&(t=null!=e.collectionIds&&e.collectionIds.includes(this.selectedCollectionId)),null!=this.selectedOrganizationId&&t&&(t=e.organizationId===this.selectedOrganizationId),this.myVaultOnly&&t&&(t=null===e.organizationId),t}}}var Ar=n(91414),Or=n(68730),Tr=n(1937);class Br extends Tr.a{constructor(e){super(e),this.id=e.id}}var Mr=n(45733);class Dr extends Mr.i{constructor(e){super(e),this.id=e.id}}class Fr{constructor(){this.ciphers=[],this.folders=[],this.sends=[]}}var Rr=n(75402),Ur=n(3906),zr=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Nr{constructor(e,t,n,i,r,o,a,s,l){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.cryptoService=i,this.messagingService=r,this.syncService=o,this.folderService=a,this.cipherService=s,this.logService=l}submit(){return zr(this,void 0,void 0,(function*(){if(!(yield this.cryptoService.hasEncKey()))if(null!=this.masterPassword&&""!==this.masterPassword)try{this.formPromise=this.makeRequest().then((e=>this.apiService.postAccountKey(e))),yield this.formPromise,this.platformUtilsService.showToast("success",this.i18nService.t("keyUpdated"),this.i18nService.t("logBackInOthersToo"),{timeout:15e3}),this.messagingService.send("logout")}catch(e){this.logService.error(e)}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPassRequired"))}))}makeRequest(){return zr(this,void 0,void 0,(function*(){const e=yield this.cryptoService.getKey(),t=yield this.cryptoService.makeEncKey(e),n=yield this.cryptoService.getPrivateKey();let i=null;null!=n&&(i=yield this.cryptoService.encrypt(n,t[0]));const r=new Fr;r.privateKey=null!=i?i.encryptedString:null,r.key=t[1].encryptedString,r.masterPasswordHash=yield this.cryptoService.hashPassword(this.masterPassword,null),yield this.syncService.fullSync(!0);const o=yield(0,Or.z)(this.folderService.folderViews$);for(let s=0;s<o.length;s++){if(null==o[s].id)continue;const e=yield this.folderService.encrypt(o[s],t[0]);r.folders.push(new Dr(e))}const a=yield this.cipherService.getAllDecrypted();for(let s=0;s<a.length;s++){if(null!=a[s].organizationId)continue;const e=yield this.cipherService.encrypt(a[s],t[0]);r.ciphers.push(new Br(e))}return r}))}}Nr.ɵfac=function(e){return new(e||Nr)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](Rr.s),o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](L.$))},Nr.ɵcmp=o["ɵɵdefineComponent"]({type:Nr,selectors:[["app-update-key"]],decls:63,vars:33,consts:[["role","dialog","aria-modal","true","aria-labelledby","updateEncKeyTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","updateEncKeyTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["href","https://bitwarden.com/help/account-encryption-key/#rotate-your-encryption-key","target","_blank","rel","noopener"],["type","warning"],["for","masterPassword"],["id","masterPassword","type","password","name","MasterPasswordHash","required","","appAutofocus","","appInputVerbatim","",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"button",6),o["ɵɵpipe"](14,"i18n"),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"span",7),o["ɵɵtext"](17,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementStart"](21,"div",8),o["ɵɵtext"](22,"\n        "),o["ɵɵelementStart"](23,"p"),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵpipe"](26,"i18n"),o["ɵɵelementStart"](27,"a",9),o["ɵɵtext"](28),o["ɵɵpipe"](29,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n        "),o["ɵɵelementStart"](32,"app-callout",10),o["ɵɵtext"](33),o["ɵɵpipe"](34,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n        "),o["ɵɵelementStart"](36,"label",11),o["ɵɵtext"](37),o["ɵɵpipe"](38,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n        "),o["ɵɵelementStart"](40,"input",12),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPassword=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n      "),o["ɵɵelementStart"](43,"div",13),o["ɵɵtext"](44,"\n        "),o["ɵɵelementStart"](45,"button",14),o["ɵɵtext"](46,"\n          "),o["ɵɵelement"](47,"i",15),o["ɵɵpipe"](48,"i18n"),o["ɵɵtext"](49,"\n          "),o["ɵɵelementStart"](50,"span"),o["ɵɵtext"](51),o["ɵɵpipe"](52,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n        "),o["ɵɵelementStart"](55,"button",16),o["ɵɵtext"](56),o["ɵɵpipe"](57,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](62,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,13,"updateEncryptionKey")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](14,15,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate2"]("\n          ",o["ɵɵpipeBind1"](25,17,"updateEncryptionKeyShortDesc")," ",o["ɵɵpipeBind1"](26,19,"updateEncryptionKeyDesc"),"\n          "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](29,21,"learnMore")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](34,23,"updateEncryptionKeyWarning")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](38,25,"masterPass")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.masterPassword),o["ɵɵadvance"](5),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](48,27,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](52,29,"updateEncryptionKey")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](57,31,"close"),"\n        ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,Pe.O,d.DefaultValueAccessor,d.RequiredValidator,Z.U,J.b,d.NgControlStatus,d.NgModel],pipes:[M.C],encapsulation:2});var Vr,Hr=n(26702),jr=n(32001),Lr=n(70291);!function(e){e[e.Invited=0]="Invited",e[e.Accepted=1]="Accepted",e[e.Confirmed=2]="Confirmed",e[e.Deactivated=-1]="Deactivated"}(Vr||(Vr={}));var Kr=n(3650),Gr=n(97596),qr=n(41122),_r=n(60337),$r=n(65893),Wr=n(5644),Qr=n(83297),Yr=n(99053);class Zr{}var Jr=n(56815),Xr=n(65332);class eo{}var to=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class no{constructor(e,t,n,i,r,a,s,l,d,c,p,u,m){this.cipherService=e,this.folderService=t,this.i18nService=n,this.platformUtilsService=i,this.auditService=r,this.stateService=a,this.collectionService=s,this.messagingService=l,this.eventService=d,this.policyService=c,this.logService=p,this.passwordRepromptService=u,this.organizationService=m,this.cloneMode=!1,this.folderId=null,this.organizationId=null,this.onSavedCipher=new o.EventEmitter,this.onDeletedCipher=new o.EventEmitter,this.onRestoredCipher=new o.EventEmitter,this.onCancelled=new o.EventEmitter,this.onEditAttachments=new o.EventEmitter,this.onShareCipher=new o.EventEmitter,this.onEditCollections=new o.EventEmitter,this.onGeneratePassword=new o.EventEmitter,this.onGenerateUsername=new o.EventEmitter,this.editMode=!1,this.collections=[],this.showPassword=!1,this.showCardNumber=!1,this.showCardCode=!1,this.cipherType=jr.O,this.ownershipOptions=[],this.currentDate=new Date,this.allowPersonal=!0,this.reprompt=!1,this.canUseReprompt=!0,this.typeOptions=[{name:n.t("typeLogin"),value:jr.O.Login},{name:n.t("typeCard"),value:jr.O.Card},{name:n.t("typeIdentity"),value:jr.O.Identity},{name:n.t("typeSecureNote"),value:jr.O.SecureNote}],this.cardBrandOptions=[{name:"-- "+n.t("select")+" --",value:null},{name:"Visa",value:"Visa"},{name:"Mastercard",value:"Mastercard"},{name:"American Express",value:"Amex"},{name:"Discover",value:"Discover"},{name:"Diners Club",value:"Diners Club"},{name:"JCB",value:"JCB"},{name:"Maestro",value:"Maestro"},{name:"UnionPay",value:"UnionPay"},{name:"RuPay",value:"RuPay"},{name:n.t("other"),value:"Other"}],this.cardExpMonthOptions=[{name:"-- "+n.t("select")+" --",value:null},{name:"01 - "+n.t("january"),value:"1"},{name:"02 - "+n.t("february"),value:"2"},{name:"03 - "+n.t("march"),value:"3"},{name:"04 - "+n.t("april"),value:"4"},{name:"05 - "+n.t("may"),value:"5"},{name:"06 - "+n.t("june"),value:"6"},{name:"07 - "+n.t("july"),value:"7"},{name:"08 - "+n.t("august"),value:"8"},{name:"09 - "+n.t("september"),value:"9"},{name:"10 - "+n.t("october"),value:"10"},{name:"11 - "+n.t("november"),value:"11"},{name:"12 - "+n.t("december"),value:"12"}],this.identityTitleOptions=[{name:"-- "+n.t("select")+" --",value:null},{name:n.t("mr"),value:n.t("mr")},{name:n.t("mrs"),value:n.t("mrs")},{name:n.t("ms"),value:n.t("ms")},{name:n.t("dr"),value:n.t("dr")}],this.uriMatchOptions=[{name:n.t("defaultMatchDetection"),value:null},{name:n.t("baseDomain"),value:qr.I.Domain},{name:n.t("host"),value:qr.I.Host},{name:n.t("startsWith"),value:qr.I.StartsWith},{name:n.t("regEx"),value:qr.I.RegularExpression},{name:n.t("exact"),value:qr.I.Exact},{name:n.t("never"),value:qr.I.Never}],this.autofillOnPageLoadOptions=[{name:n.t("autoFillOnPageLoadUseDefault"),value:null},{name:n.t("autoFillOnPageLoadYes"),value:!0},{name:n.t("autoFillOnPageLoadNo"),value:!1}]}ngOnInit(){return to(this,void 0,void 0,(function*(){yield this.init()}))}init(){return to(this,void 0,void 0,(function*(){if(this.ownershipOptions.length&&(this.ownershipOptions=[]),yield this.policyService.policyAppliesToUser(Kr.M.PersonalOwnership))this.allowPersonal=!1;else{const e=yield this.stateService.getEmail();this.ownershipOptions.push({name:e,value:null})}(yield this.organizationService.getAll()).sort(N.c.getSortFunction(this.i18nService,"name")).forEach((e=>{e.enabled&&e.status===Vr.Confirmed&&this.ownershipOptions.push({name:e.name,value:e.id})})),this.allowPersonal||(this.organizationId=this.ownershipOptions[0].value),this.writeableCollections=yield this.loadCollections(),this.canUseReprompt=yield this.passwordRepromptService.enabled()}))}load(){return to(this,void 0,void 0,(function*(){this.editMode=null!=this.cipherId,this.editMode?(this.editMode=!0,this.cloneMode?(this.cloneMode=!0,this.title=this.i18nService.t("addItem")):this.title=this.i18nService.t("editItem")):this.title=this.i18nService.t("addItem");const e=yield this.stateService.getAddEditCipherInfo();if(null!=e&&(this.cipher=e.cipher,this.collectionIds=e.collectionIds),yield this.stateService.setAddEditCipherInfo(null),null==this.cipher)if(this.editMode){const e=yield this.loadCipher();this.cipher=yield e.decrypt(),this.cloneMode&&(this.cipher.name+=" - "+this.i18nService.t("clone"),null!=this.cipher.organizationId||this.allowPersonal||(this.cipher.organizationId=this.organizationId))}else this.cipher=new Ar.$,this.cipher.organizationId=null==this.organizationId?null:this.organizationId,this.cipher.folderId=this.folderId,this.cipher.type=null==this.type?jr.O.Login:this.type,this.cipher.login=new Qr.q,this.cipher.login.uris=[new Wr.E],this.cipher.card=new _r._,this.cipher.identity=new $r.t,this.cipher.secureNote=new Yr.z,this.cipher.secureNote.type=Gr.x.Generic,this.cipher.reprompt=Hr.N.None;null==this.cipher||this.editMode&&null==e&&!this.cloneMode||(yield this.organizationChanged(),null!=this.collectionIds&&this.collectionIds.length>0&&this.collections.length>0&&this.collections.forEach((e=>{this.collectionIds.indexOf(e.id)>-1&&(e.checked=!0)}))),this.folders$=this.folderService.folderViews$,this.editMode&&this.previousCipherId!==this.cipherId&&this.eventService.collect(Lr.t.Cipher_ClientViewed,this.cipherId),this.previousCipherId=this.cipherId,this.reprompt=this.cipher.reprompt!==Hr.N.None}))}submit(){return to(this,void 0,void 0,(function*(){if(this.cipher.isDeleted)return this.restore();if(null==this.cipher.name||""===this.cipher.name)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("nameRequired")),!1;if((!this.editMode||this.cloneMode)&&!this.allowPersonal&&null==this.cipher.organizationId)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("personalOwnershipSubmitError")),!1;this.editMode&&!this.cloneMode||this.cipher.type!==jr.O.Login||null==this.cipher.login.uris||1!==this.cipher.login.uris.length||null!=this.cipher.login.uris[0].uri&&""!==this.cipher.login.uris[0].uri||(this.cipher.login.uris=null),this.editMode&&!this.cloneMode||null==this.cipher.organizationId||(this.cipher.collectionIds=null==this.collections?[]:this.collections.filter((e=>e.checked)).map((e=>e.id))),this.cloneMode&&(this.cipher.id=null);const e=yield this.encryptCipher();try{return this.formPromise=this.saveCipher(e),yield this.formPromise,this.cipher.id=e.id,this.platformUtilsService.showToast("success",null,this.i18nService.t(this.editMode&&!this.cloneMode?"editedItem":"addedItem")),this.onSavedCipher.emit(this.cipher),this.messagingService.send(this.editMode&&!this.cloneMode?"editedCipher":"addedCipher"),!0}catch(t){this.logService.error(t)}return!1}))}addUri(){this.cipher.type===jr.O.Login&&(null==this.cipher.login.uris&&(this.cipher.login.uris=[]),this.cipher.login.uris.push(new Wr.E))}removeUri(e){if(this.cipher.type!==jr.O.Login||null==this.cipher.login.uris)return;const t=this.cipher.login.uris.indexOf(e);t>-1&&this.cipher.login.uris.splice(t,1)}trackByFunction(e,t){return e}cancel(){this.onCancelled.emit(this.cipher)}attachments(){this.onEditAttachments.emit(this.cipher)}share(){this.onShareCipher.emit(this.cipher)}editCollections(){this.onEditCollections.emit(this.cipher)}delete(){return to(this,void 0,void 0,(function*(){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t(this.cipher.isDeleted?"permanentlyDeleteItemConfirmation":"deleteItemConfirmation"),this.i18nService.t("deleteItem"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{this.deletePromise=this.deleteCipher(),yield this.deletePromise,this.platformUtilsService.showToast("success",null,this.i18nService.t(this.cipher.isDeleted?"permanentlyDeletedItem":"deletedItem")),this.onDeletedCipher.emit(this.cipher),this.messagingService.send(this.cipher.isDeleted?"permanentlyDeletedCipher":"deletedCipher")}catch(e){this.logService.error(e)}return!0}))}restore(){return to(this,void 0,void 0,(function*(){if(!this.cipher.isDeleted)return!1;if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("restoreItemConfirmation"),this.i18nService.t("restoreItem"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{this.restorePromise=this.restoreCipher(),yield this.restorePromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("restoredItem")),this.onRestoredCipher.emit(this.cipher),this.messagingService.send("restoredCipher")}catch(e){this.logService.error(e)}return!0}))}generateUsername(){var e,t;return to(this,void 0,void 0,(function*(){if(null===(t=null===(e=this.cipher.login)||void 0===e?void 0:e.username)||void 0===t?void 0:t.length){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("overwriteUsernameConfirmation"),this.i18nService.t("overwriteUsername"),this.i18nService.t("yes"),this.i18nService.t("no"))))return!1}return this.onGenerateUsername.emit(),!0}))}generatePassword(){var e,t;return to(this,void 0,void 0,(function*(){if(null===(t=null===(e=this.cipher.login)||void 0===e?void 0:e.password)||void 0===t?void 0:t.length){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("overwritePasswordConfirmation"),this.i18nService.t("overwritePassword"),this.i18nService.t("yes"),this.i18nService.t("no"))))return!1}return this.onGeneratePassword.emit(),!0}))}togglePassword(){this.showPassword=!this.showPassword,document.getElementById("loginPassword").focus(),this.editMode&&this.showPassword&&this.eventService.collect(Lr.t.Cipher_ClientToggledPasswordVisible,this.cipherId)}toggleCardNumber(){return to(this,void 0,void 0,(function*(){this.showCardNumber=!this.showCardNumber,this.showCardNumber&&this.eventService.collect(Lr.t.Cipher_ClientToggledCardNumberVisible,this.cipherId)}))}toggleCardCode(){this.showCardCode=!this.showCardCode,document.getElementById("cardCode").focus(),this.editMode&&this.showCardCode&&this.eventService.collect(Lr.t.Cipher_ClientToggledCardCodeVisible,this.cipherId)}toggleUriOptions(e){const t=e;t.showOptions=(null!=t.showOptions||null==e.match)&&!t.showOptions}loginUriMatchChanged(e){const t=e;t.showOptions=null==t.showOptions||t.showOptions}organizationChanged(){return to(this,void 0,void 0,(function*(){if(null!=this.writeableCollections&&this.writeableCollections.forEach((e=>e.checked=!1)),null!=this.cipher.organizationId){this.collections=this.writeableCollections.filter((e=>e.organizationId===this.cipher.organizationId));const e=yield this.organizationService.get(this.cipher.organizationId);null!=e&&(this.cipher.organizationUseTotp=e.useTotp)}else this.collections=[]}))}checkPassword(){return to(this,void 0,void 0,(function*(){if(null!=this.checkPasswordPromise)return;if(null==this.cipher.login||null==this.cipher.login.password||""===this.cipher.login.password)return;this.checkPasswordPromise=this.auditService.passwordLeaked(this.cipher.login.password);const e=yield this.checkPasswordPromise;this.checkPasswordPromise=null,e>0?this.platformUtilsService.showToast("warning",null,this.i18nService.t("passwordExposed",e.toString())):this.platformUtilsService.showToast("success",null,this.i18nService.t("passwordSafe"))}))}repromptChanged(){this.reprompt=!this.reprompt,this.reprompt?this.cipher.reprompt=Hr.N.Password:this.cipher.reprompt=Hr.N.None}loadCollections(){return to(this,void 0,void 0,(function*(){return(yield this.collectionService.getAllDecrypted()).filter((e=>!e.readOnly))}))}loadCipher(){return this.cipherService.get(this.cipherId)}encryptCipher(){return this.cipherService.encrypt(this.cipher)}saveCipher(e){return this.cipherService.saveWithServer(e)}deleteCipher(){return this.cipher.isDeleted?this.cipherService.deleteWithServer(this.cipher.id):this.cipherService.softDeleteWithServer(this.cipher.id)}restoreCipher(){return this.cipherService.restoreWithServer(this.cipher.id)}}no.ɵfac=function(e){return new(e||no)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](Rr.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Zr),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](Jr.a),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](Xr.P),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](eo),o["ɵɵdirectiveInject"](Ii.M))},no.ɵdir=o["ɵɵdefineDirective"]({type:no,inputs:{cloneMode:"cloneMode",folderId:"folderId",cipherId:"cipherId",type:"type",collectionIds:"collectionIds",organizationId:"organizationId"},outputs:{onSavedCipher:"onSavedCipher",onDeletedCipher:"onDeletedCipher",onRestoredCipher:"onRestoredCipher",onCancelled:"onCancelled",onEditAttachments:"onEditAttachments",onShareCipher:"onShareCipher",onEditCollections:"onEditCollections",onGeneratePassword:"onGeneratePassword",onGenerateUsername:"onGenerateUsername"}});class io{}var ro=n(69064),oo=n(98197);class ao{constructor(e,t){this.i18nService=e,this.eventService=t,this.addFieldType=ro.f.Text,this.linkedFieldOptions=[],this.cipherType=jr.O,this.fieldType=ro.f,this.eventType=Lr.t,this.addFieldTypeOptions=[{name:e.t("cfTypeText"),value:ro.f.Text},{name:e.t("cfTypeHidden"),value:ro.f.Hidden},{name:e.t("cfTypeBoolean"),value:ro.f.Boolean}],this.addFieldLinkedTypeOption={name:this.i18nService.t("cfTypeLinked"),value:ro.f.Linked}}ngOnChanges(e){null!=e.thisCipherType&&(this.setLinkedFieldOptions(),e.thisCipherType.firstChange||this.resetCipherLinkedFields())}addField(){null==this.cipher.fields&&(this.cipher.fields=[]);const e=new oo.k;e.type=this.addFieldType,e.newField=!0,e.type===ro.f.Linked&&(e.linkedId=this.linkedFieldOptions[0].value),this.cipher.fields.push(e)}removeField(e){const t=this.cipher.fields.indexOf(e);t>-1&&this.cipher.fields.splice(t,1)}toggleFieldValue(e){const t=e;t.showValue=!t.showValue,this.editMode&&t.showValue&&this.eventService.collect(Lr.t.Cipher_ClientToggledHiddenFieldVisible,this.cipher.id)}trackByFunction(e,t){return e}drop(e){(0,s.moveItemInArray)(this.cipher.fields,e.previousIndex,e.currentIndex)}setLinkedFieldOptions(){if(null==this.cipher.linkedFieldOptions)return;const e=[];this.cipher.linkedFieldOptions.forEach(((t,n)=>e.push({name:this.i18nService.t(t.i18nKey),value:n}))),this.linkedFieldOptions=e.sort(N.c.getSortFunction(this.i18nService,"name"))}resetCipherLinkedFields(){null!=this.cipher.fields&&0!==this.cipher.fields.length&&(null!=this.cipher.linkedFieldOptions?this.cipher.fields.filter((e=>e.type===ro.f.Linked)).forEach((e=>e.linkedId=this.linkedFieldOptions[0].value)):this.cipher.fields=this.cipher.fields.filter((e=>e.type!==ro.f.Linked)))}}ao.ɵfac=function(e){return new(e||ao)(o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Xr.P))},ao.ɵdir=o["ɵɵdefineDirective"]({type:ao,inputs:{cipher:"cipher",thisCipherType:"thisCipherType",editMode:"editMode"},features:[o["ɵɵNgOnChangesFeature"]]});class so{constructor(e,t){this.elementRef=e,this.renderer=t,this.trueValue=!0,this.falseValue=!1,this.propagateChange=e=>{}}onHostChange(e){this.propagateChange(e.target.checked?this.trueValue:this.falseValue)}writeValue(e){e===this.trueValue?this.renderer.setProperty(this.elementRef.nativeElement,"checked",!0):this.renderer.setProperty(this.elementRef.nativeElement,"checked",!1)}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}setDisabledState(e){}}function lo(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",20),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"input",12),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().$implicit.value=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"div",21),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"button",22),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).copy(t.value,"value","Field")})),o["ɵɵpipe"](7,"i18n"),o["ɵɵtext"](8,"\n                "),o["ɵɵelement"](9,"i",23),o["ɵɵtext"](10,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](),t=e.index,n=e.$implicit,i=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("id","fieldValue",t,""),o["ɵɵpropertyInterpolate1"]("name","Field.Value",t,""),o["ɵɵproperty"]("ngModel",n.value)("disabled",i.cipher.isDeleted||i.viewOnly),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](7,5,"copyValue"))}}so.ɵfac=function(e){return new(e||so)(o["ɵɵdirectiveInject"](o.ElementRef),o["ɵɵdirectiveInject"](o.Renderer2))},so.ɵdir=o["ɵɵdefineDirective"]({type:so,selectors:[["input","type","checkbox","appTrueFalseValue",""]],hostBindings:function(e,t){1&e&&o["ɵɵlistener"]("change",(function(e){return t.onHostChange(e)}))},inputs:{trueValue:"trueValue",falseValue:"falseValue"},features:[o["ɵɵProvidersFeature"]([{provide:d.NG_VALUE_ACCESSOR,useExisting:(0,o.forwardRef)((()=>so)),multi:!0}])]});const co=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}};function po(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",20),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"input",24),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().$implicit.value=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"div",21),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"button",25),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).toggleFieldValue(t)})),o["ɵɵpipe"](7,"i18n"),o["ɵɵtext"](8,"\n                "),o["ɵɵelementStart"](9,"i",26),o["ɵɵtext"](10,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n              "),o["ɵɵelementStart"](13,"button",25),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit,n=o["ɵɵnextContext"](2);return n.copy(t.value,"value",t.type===n.fieldType.Hidden?"H_Field":"Field")})),o["ɵɵpipe"](14,"i18n"),o["ɵɵtext"](15,"\n                "),o["ɵɵelement"](16,"i",23),o["ɵɵtext"](17,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](),t=e.index,n=e.$implicit,i=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("id","fieldValue",t,""),o["ɵɵpropertyInterpolate"]("type",n.showValue?"text":"password"),o["ɵɵpropertyInterpolate1"]("name","Field.Value",t,""),o["ɵɵproperty"]("ngModel",n.value)("disabled",i.cipher.isDeleted||i.viewOnly||!i.cipher.viewPassword&&!n.newField),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](7,10,"toggleVisibility")),o["ɵɵproperty"]("disabled",!i.cipher.viewPassword&&!n.newField),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](14,co,!n.showValue,n.showValue)),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](14,12,"copyValue")),o["ɵɵproperty"]("disabled",!i.cipher.viewPassword&&!n.newField)}}function uo(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function mo(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"select",28),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).$implicit.linkedId=t})),o["ɵɵtext"](1,"\n              "),o["ɵɵtemplate"](2,uo,2,2,"option",29),o["ɵɵtext"](3,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2),t=e.index,n=e.$implicit,i=o["ɵɵnextContext"](2);o["ɵɵpropertyInterpolate1"]("id","fieldValue",t,""),o["ɵɵpropertyInterpolate1"]("name","Field.Value",t,""),o["ɵɵproperty"]("ngModel",n.linkedId)("disabled",i.cipher.isDeleted||i.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",i.linkedFieldOptions)}}function ho(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",20),o["ɵɵtext"](1,"\n            "),o["ɵɵtemplate"](2,mo,4,5,"select",27),o["ɵɵtext"](3,"\n          "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===t.fieldType.Linked&&null!=t.cipher.linkedFieldOptions)}}function vo(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"input",31),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().$implicit.value=t})),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](),t=e.index,n=e.$implicit,i=o["ɵɵnextContext"](2);o["ɵɵpropertyInterpolate1"]("id","fieldValue",t,""),o["ɵɵpropertyInterpolate1"]("name","Field.Value",t,""),o["ɵɵproperty"]("ngModel",n.value)("disabled",i.cipher.isDeleted||i.viewOnly)}}function go(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",32),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).removeField(t)})),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n            "),o["ɵɵelement"](3,"i",33),o["ɵɵtext"](4,"\n          "),o["ɵɵelementEnd"]()}2&e&&o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](1,1,"remove"))}function fo(e,t){1&e&&(o["ɵɵelementStart"](0,"button",34),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n            "),o["ɵɵelement"](3,"i",35),o["ɵɵtext"](4,"\n          "),o["ɵɵelementEnd"]()),2&e&&o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](1,1,"dragToSort"))}function xo(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",6),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",7),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"div",8),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"label",9),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelementStart"](10,"a",10),o["ɵɵpipe"](11,"i18n"),o["ɵɵtext"](12,"\n            "),o["ɵɵelement"](13,"i",11),o["ɵɵtext"](14,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n        "),o["ɵɵelementStart"](17,"input",12),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.name=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"div",13),o["ɵɵtext"](21,"\n        "),o["ɵɵelementStart"](22,"label",9),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n        "),o["ɵɵelementStart"](26,"div",14),o["ɵɵtext"](27,"\n          "),o["ɵɵtext"](28,"\n          "),o["ɵɵtemplate"](29,lo,13,7,"div",15),o["ɵɵtext"](30,"\n          "),o["ɵɵtext"](31,"\n          "),o["ɵɵtemplate"](32,po,20,17,"div",15),o["ɵɵtext"](33,"\n          "),o["ɵɵtext"](34,"\n          "),o["ɵɵtemplate"](35,ho,4,1,"div",15),o["ɵɵtext"](36,"\n          "),o["ɵɵelementStart"](37,"div",16),o["ɵɵtext"](38,"\n            "),o["ɵɵtext"](39,"\n            "),o["ɵɵtemplate"](40,vo,1,4,"input",17),o["ɵɵtext"](41,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n          "),o["ɵɵtemplate"](43,go,5,3,"button",18),o["ɵɵtext"](44,"\n          "),o["ɵɵtemplate"](45,fo,5,3,"button",19),o["ɵɵtext"](46,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=o["ɵɵnextContext"](2);o["ɵɵadvance"](6),o["ɵɵpropertyInterpolate1"]("for","fieldName",n,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,15,"name")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](11,17,"learnMore")),o["ɵɵadvance"](7),o["ɵɵpropertyInterpolate1"]("id","fieldName",n,""),o["ɵɵpropertyInterpolate1"]("name","Field.Name",n,""),o["ɵɵproperty"]("ngModel",e.name)("disabled",i.cipher.isDeleted||i.viewOnly),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate1"]("for","fieldValue",n,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](24,19,"value")),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",e.type===i.fieldType.Text),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.type===i.fieldType.Hidden),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.type===i.fieldType.Linked),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.type===i.fieldType.Boolean),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!i.cipher.isDeleted&&!i.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!i.cipher.isDeleted&&!i.viewOnly)}}function yo(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",4),o["ɵɵlistener"]("cdkDropListDropped",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().drop(t)})),o["ɵɵtext"](1,"\n    "),o["ɵɵtemplate"](2,xo,49,21,"div",5),o["ɵɵtext"](3,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.cipher.fields)("ngForTrackBy",e.trackByFunction)}}function So(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",36),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().addField()})),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",37),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](4,1,"newCustomField"),"\n  "))}function bo(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function wo(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵproperty"]("ngValue",e.addFieldLinkedTypeOption.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",e.addFieldLinkedTypeOption.name,"\n        ")}}function Io(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",38),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",39),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"label",40),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n      "),o["ɵɵelementStart"](8,"select",41),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().addFieldType=t})),o["ɵɵtext"](9,"\n        "),o["ɵɵtemplate"](10,bo,2,2,"option",29),o["ɵɵtext"](11,"\n        "),o["ɵɵtemplate"](12,wo,2,2,"option",42),o["ɵɵtext"](13,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,4,"type")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.addFieldType),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.addFieldTypeOptions),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",null!=e.cipher.linkedFieldOptions)}}class Co extends ao{constructor(e,t){super(e,t)}}Co.ɵfac=function(e){return new(e||Co)(o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Xr.P))},Co.ɵcmp=o["ɵɵdefineComponent"]({type:Co,selectors:[["app-vault-add-edit-custom-fields"]],inputs:{viewOnly:"viewOnly",copy:"copy"},features:[o["ɵɵInheritDefinitionFeature"]],decls:14,vars:6,consts:[[1,"mt-4"],["cdkDropList","",3,"cdkDropListDropped",4,"ngIf"],["href","#","appStopClick","","class","d-inline-block mb-2",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["cdkDropList","",3,"cdkDropListDropped"],["class","row","cdkDrag","",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"row"],[1,"col-5","form-group"],[1,"d-flex"],[3,"for"],["href","https://bitwarden.com/help/custom-fields/","target","_blank","rel","noopener",1,"ml-auto",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],["type","text","appInputVerbatim","",1,"form-control",3,"id","name","ngModel","disabled","ngModelChange"],[1,"col-7","form-group"],[1,"d-flex","align-items-center"],["class","input-group",4,"ngIf"],[1,"flex-fill"],["type","checkbox","appTrueFalseValue","","trueValue","true","falseValue","false",3,"id","name","ngModel","disabled","ngModelChange",4,"ngIf"],["type","button","class","btn btn-link text-danger ml-2",3,"appA11yTitle","click",4,"ngIf"],["type","button","class","btn btn-link text-muted cursor-move",3,"appA11yTitle",4,"ngIf"],[1,"input-group"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-clone"],["appInputVerbatim","","autocomplete","new-password",1,"form-control","text-monospace",3,"id","type","name","ngModel","disabled","ngModelChange"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","disabled","click"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],["class","form-control",3,"id","name","ngModel","disabled","ngModelChange",4,"ngIf"],[1,"form-control",3,"id","name","ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["type","checkbox","appTrueFalseValue","","trueValue","true","falseValue","false",3,"id","name","ngModel","disabled","ngModelChange"],["type","button",1,"btn","btn-link","text-danger","ml-2",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-minus-circle","bwi-lg"],["type","button",1,"btn","btn-link","text-muted","cursor-move",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-hamburger","bwi-lg"],["href","#","appStopClick","",1,"d-inline-block","mb-2",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus-circle","bwi-fw"],[1,"row"],[1,"col-5"],["for","addFieldType",1,"sr-only"],["id","addFieldType","name","AddFieldType",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngIf"]],template:function(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h3",0),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵtemplate"](6,yo,4,2,"div",1),o["ɵɵtext"](7,"\n  "),o["ɵɵtext"](8,"\n  "),o["ɵɵtemplate"](9,So,5,3,"a",2),o["ɵɵtext"](10,"\n  "),o["ɵɵtemplate"](11,Io,16,6,"div",3),o["ɵɵtext"](12,"\n"),o["ɵɵelementContainerEnd"](),o["ɵɵtext"](13,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,4,"customFields")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.cipher.hasFields),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.cipher.isDeleted&&!t.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.cipher.isDeleted&&!t.viewOnly))},directives:[B.NgIf,s.CdkDropList,B.NgForOf,s.CdkDrag,pe,d.DefaultValueAccessor,J.b,d.NgControlStatus,d.NgModel,B.NgClass,d.SelectControlValueAccessor,d.NgSelectOption,d["ɵNgSelectMultipleOption"],so,d.CheckboxControlValueAccessor,Tn],pipes:[M.C],encapsulation:2});var Eo=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class ko{constructor(e,t,n){this.templateRef=e,this.viewContainer=t,this.stateService=n}ngOnInit(){return Eo(this,void 0,void 0,(function*(){(yield this.stateService.getCanAccessPremium())?this.viewContainer.clear():this.viewContainer.createEmbeddedView(this.templateRef)}))}}ko.ɵfac=function(e){return new(e||ko)(o["ɵɵdirectiveInject"](o.TemplateRef),o["ɵɵdirectiveInject"](o.ViewContainerRef),o["ɵɵdirectiveInject"](P.b))},ko.ɵdir=o["ɵɵdefineDirective"]({type:ko,selectors:[["","appNotPremium",""]]});var Po=n(66385);function Ao(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",1),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().premiumRequired()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](2,1,"premium"),"\n    "))}class Oo{constructor(e){this.messagingService=e}premiumRequired(){this.messagingService.send("premiumRequired")}}Oo.ɵfac=function(e){return new(e||Oo)(o["ɵɵdirectiveInject"](v))},Oo.ɵcmp=o["ɵɵdefineComponent"]({type:Oo,selectors:[["app-premium-badge"]],decls:3,vars:0,consts:[["type","button","bitBadge","","badgeType","success",3,"click",4,"appNotPremium"],["type","button","bitBadge","","badgeType","success",3,"click"]],template:function(e,t){1&e&&(o["ɵɵtext"](0,"\n    "),o["ɵɵtemplate"](1,Ao,3,3,"button",0),o["ɵɵtext"](2,"\n  "))},directives:[ko,Po.l],pipes:[M.C],encapsulation:2});var To=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Bo(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",26),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"personalOwnershipPolicyInEffect"),"\n        "))}function Mo(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function Do(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",16),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",17),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"label",27),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"select",28),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.type=t})),o["ɵɵtext"](9,"\n              "),o["ɵɵtemplate"](10,Mo,2,2,"option",29),o["ɵɵtext"](11,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,4,"whatTypeOfItem")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.type)("disabled",e.cipher.isDeleted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.typeOptions)}}function Fo(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.id),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function Ro(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",17),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"label",31),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"select",32),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.folderId=t})),o["ɵɵtext"](7,"\n              "),o["ɵɵtemplate"](8,Fo,2,2,"option",29),o["ɵɵpipe"](9,"async"),o["ɵɵtext"](10,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,4,"folder")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.folderId)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",o["ɵɵpipeBind1"](9,6,e.folders$))}}function Uo(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",41),o["ɵɵtext"](1,"\n                  "),o["ɵɵelementStart"](2,"button",50),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](3);return t.copy(t.cipher.login.username,"username","Username")})),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n                    "),o["ɵɵelement"](5,"i",44),o["ɵɵtext"](6,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n                "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](3,1,"copyUsername")))}function zo(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",57),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](4).generatePassword()})),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n                    "),o["ɵɵelement"](3,"i",58),o["ɵɵtext"](4,"\n                  "),o["ɵɵelementEnd"]()}2&e&&o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](1,1,"generatePassword"))}function No(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",51),o["ɵɵtext"](1,"\n                  "),o["ɵɵtemplate"](2,zo,5,3,"a",52),o["ɵɵtext"](3,"\n                  "),o["ɵɵelementStart"](4,"a",53,54),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).checkPassword()})),o["ɵɵpipe"](6,"i18n"),o["ɵɵtext"](7,"\n                    "),o["ɵɵelement"](8,"i",55),o["ɵɵtext"](9,"\n                    "),o["ɵɵelement"](10,"i",56),o["ɵɵpipe"](11,"i18n"),o["ɵɵtext"](12,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n                "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](5),t=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.cipher.viewPassword),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](6,6,"checkPassword")),o["ɵɵproperty"]("appApiAction",t.checkPasswordPromise),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](11,8,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}function Vo(e,t){1&e&&o["ɵɵelement"](0,"app-premium-badge",62)}function Ho(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",63),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](4).upgradeOrganization()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](2,1,"upgrade"),"\n                "))}function jo(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"img",59),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n                "),o["ɵɵtemplate"](5,Vo,1,0,"app-premium-badge",60),o["ɵɵtext"](6,"\n                "),o["ɵɵtemplate"](7,Ho,3,3,"a",61),o["ɵɵtext"](8,"\n              "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"verificationCodeTotp")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.organization&&!e.cipher.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.organization&&!e.organization.useTotp||!e.organization&&!e.canAccessPremium&&e.cipher.organizationId&&!e.cipher.organizationUseTotp)}}const Lo=function(e){return{"stroke-dashoffset.px":e}};function Ko(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",64),o["ɵɵtext"](1,"\n                "),o["ɵɵelementStart"](2,"span",65),o["ɵɵtext"](3,"\n                  "),o["ɵɵelementStart"](4,"span",66),o["ɵɵtext"](5),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n                  "),o["ɵɵnamespaceSVG"](),o["ɵɵelementStart"](7,"svg"),o["ɵɵtext"](8,"\n                    "),o["ɵɵelementStart"](9,"g"),o["ɵɵtext"](10,"\n                      "),o["ɵɵelement"](11,"circle",67),o["ɵɵtext"](12,"\n                      "),o["ɵɵelement"](13,"circle",68),o["ɵɵtext"](14,"\n                    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n                "),o["ɵɵnamespaceHTML"](),o["ɵɵelementStart"](18,"span",69),o["ɵɵpipe"](19,"i18n"),o["ɵɵtext"](20),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n                "),o["ɵɵelementStart"](22,"button",70),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](3);return t.copy(t.totpCode,"verificationCodeTotp","TOTP")})),o["ɵɵpipe"](23,"i18n"),o["ɵɵtext"](24,"\n                  "),o["ɵɵelement"](25,"i",71),o["ɵɵtext"](26,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n              "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.totpSec),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngStyle",o["ɵɵpureFunction1"](9,Lo,e.totpDash)),o["ɵɵadvance"](7),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](19,5,"verificationCodeTotp")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.totpCodeFormatted),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](23,7,"copyVerificationCode"))}}function Go(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                      ",e.name,"\n                    ")}}function qo(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",82),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](4).removeUri(t)})),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n                    "),o["ɵɵelement"](3,"i",83),o["ɵɵtext"](4,"\n                  "),o["ɵɵelementEnd"]()}2&e&&o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](1,1,"remove"))}function _o(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",16),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"div",73),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"label",74),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n                "),o["ɵɵelementStart"](8,"div",34),o["ɵɵtext"](9,"\n                  "),o["ɵɵelementStart"](10,"input",75),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.uri=t})),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n                  "),o["ɵɵelementStart"](13,"div",41),o["ɵɵtext"](14,"\n                    "),o["ɵɵelementStart"](15,"button",42),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).launch(t)})),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n                      "),o["ɵɵelement"](18,"i",76),o["ɵɵtext"](19,"\n                    "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n                    "),o["ɵɵelementStart"](21,"button",50),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).copy(t.uri,"uri","URI")})),o["ɵɵpipe"](22,"i18n"),o["ɵɵtext"](23,"\n                      "),o["ɵɵelement"](24,"i",44),o["ɵɵtext"](25,"\n                    "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n              "),o["ɵɵelementStart"](30,"div",77),o["ɵɵtext"](31,"\n                "),o["ɵɵelementStart"](32,"div",37),o["ɵɵtext"](33,"\n                  "),o["ɵɵelementStart"](34,"label",74),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n                  "),o["ɵɵelementStart"](38,"a",78),o["ɵɵpipe"](39,"i18n"),o["ɵɵtext"](40,"\n                    "),o["ɵɵelement"](41,"i",79),o["ɵɵtext"](42,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n                "),o["ɵɵelementStart"](45,"div",37),o["ɵɵtext"](46,"\n                  "),o["ɵɵelementStart"](47,"select",80),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.match=t}))("change",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).loginUriMatchChanged(t)})),o["ɵɵtext"](48,"\n                    "),o["ɵɵtemplate"](49,Go,2,2,"option",29),o["ɵɵtext"](50,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n                  "),o["ɵɵtemplate"](52,qo,5,3,"button",81),o["ɵɵtext"](53,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=o["ɵɵnextContext"](4);o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate1"]("for","loginUri",n,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](6,19,"uriPosition",n+1)),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate1"]("id","loginUri",n,""),o["ɵɵpropertyInterpolate1"]("name","Login.Uris[",n,"].Uri"),o["ɵɵpropertyInterpolate1"]("placeholder","",o["ɵɵpipeBind1"](11,22,"ex")," https://google.com"),o["ɵɵproperty"]("ngModel",e.uri)("disabled",i.cipher.isDeleted||i.viewOnly),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](16,24,"launch")),o["ɵɵproperty"]("disabled",!e.canLaunch),o["ɵɵadvance"](6),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](22,26,"copyUri")),o["ɵɵadvance"](13),o["ɵɵpropertyInterpolate1"]("for","loginUriMatch",n,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                    ",o["ɵɵpipeBind1"](36,28,"matchDetection"),"\n                  "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](39,30,"learnMore")),o["ɵɵadvance"](9),o["ɵɵpropertyInterpolate1"]("id","loginUriMatch",n,""),o["ɵɵpropertyInterpolate1"]("name","Login.Uris[",n,"].Match"),o["ɵɵproperty"]("ngModel",e.match)("disabled",i.cipher.isDeleted||i.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",i.uriMatchOptions),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!i.cipher.isDeleted&&!i.viewOnly)}}function $o(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵtemplate"](2,_o,56,32,"div",72),o["ɵɵtext"](3,"\n          "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.cipher.login.uris)("ngForTrackBy",e.trackByFunction)}}function Wo(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",84),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).addUri()})),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",85),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](4,1,"newUri"),"\n          "))}const Qo=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}},Yo=function(e){return{low:e}};function Zo(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",16),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"div",17),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"label",33),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"div",34),o["ɵɵtext"](11,"\n                "),o["ɵɵelementStart"](12,"input",35),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.login.username=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n                "),o["ɵɵtemplate"](14,Uo,8,3,"div",36),o["ɵɵtext"](15,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n            "),o["ɵɵelementStart"](18,"div",17),o["ɵɵtext"](19,"\n              "),o["ɵɵelementStart"](20,"div",37),o["ɵɵtext"](21,"\n                "),o["ɵɵelementStart"](22,"label",38),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n                "),o["ɵɵtemplate"](26,No,14,10,"div",39),o["ɵɵtext"](27,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n              "),o["ɵɵelementStart"](29,"div",34),o["ɵɵtext"](30,"\n                "),o["ɵɵelementStart"](31,"input",40),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.login.password=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n                "),o["ɵɵelementStart"](33,"div",41),o["ɵɵtext"](34,"\n                  "),o["ɵɵelementStart"](35,"button",42),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).togglePassword()})),o["ɵɵpipe"](36,"i18n"),o["ɵɵtext"](37,"\n                    "),o["ɵɵelement"](38,"i",43),o["ɵɵtext"](39,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n                  "),o["ɵɵelementStart"](41,"button",42),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2);return t.copy(t.cipher.login.password,"password","Password")})),o["ɵɵpipe"](42,"i18n"),o["ɵɵtext"](43,"\n                    "),o["ɵɵelement"](44,"i",44),o["ɵɵtext"](45,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n          "),o["ɵɵelementStart"](51,"div",16),o["ɵɵtext"](52,"\n            "),o["ɵɵelementStart"](53,"div",17),o["ɵɵtext"](54,"\n              "),o["ɵɵelementStart"](55,"label",45),o["ɵɵtext"](56),o["ɵɵpipe"](57,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n              "),o["ɵɵelementStart"](59,"input",46),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.login.totp=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n            "),o["ɵɵelementStart"](62,"div",47),o["ɵɵtext"](63,"\n              "),o["ɵɵtemplate"](64,jo,9,5,"div",21),o["ɵɵtext"](65,"\n              "),o["ɵɵtemplate"](66,Ko,28,11,"div",48),o["ɵɵtext"](67,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](68,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](69,"\n          "),o["ɵɵtemplate"](70,$o,4,2,"ng-container",21),o["ɵɵtext"](71,"\n          "),o["ɵɵtemplate"](72,Wo,5,3,"a",49),o["ɵɵtext"](73,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,23,"username")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngModel",e.cipher.login.username)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.cipher.isDeleted),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](24,25,"password")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.cipher.isDeleted&&!e.viewOnly),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("type",e.showPassword?"text":"password"),o["ɵɵproperty"]("ngModel",e.cipher.login.password)("disabled",e.cipher.isDeleted||!e.cipher.viewPassword||e.viewOnly),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](36,27,"toggleVisibility")),o["ɵɵproperty"]("disabled",!e.cipher.viewPassword),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](33,Qo,!e.showPassword,e.showPassword)),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](42,29,"copyPassword")),o["ɵɵproperty"]("disabled",!e.cipher.viewPassword),o["ɵɵadvance"](15),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](57,31,"authenticatorKeyTotp")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("type",e.cipher.viewPassword?"text":"password"),o["ɵɵproperty"]("ngModel",e.cipher.login.totp)("disabled",e.cipher.isDeleted||!e.cipher.viewPassword||e.viewOnly),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](36,Yo,e.totpLow)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.cipher.login.totp||!e.totpCode),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.cipher.login.totp&&e.totpCode),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.cipher.login.hasUris),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.cipher.isDeleted&&!e.viewOnly)}}function Jo(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function Xo(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                  ",e.name,"\n                ")}}function ea(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",16),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"div",17),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"label",86),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"input",87),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.cardholderName=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n            "),o["ɵɵelementStart"](13,"div",17),o["ɵɵtext"](14,"\n              "),o["ɵɵelementStart"](15,"label",88),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n              "),o["ɵɵelementStart"](19,"select",89),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.brand=t})),o["ɵɵtext"](20,"\n                "),o["ɵɵtemplate"](21,Jo,2,2,"option",29),o["ɵɵtext"](22,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n          "),o["ɵɵelementStart"](26,"div",16),o["ɵɵtext"](27,"\n            "),o["ɵɵelementStart"](28,"div",17),o["ɵɵtext"](29,"\n              "),o["ɵɵelementStart"](30,"label",90),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n              "),o["ɵɵelementStart"](34,"div",34),o["ɵɵtext"](35,"\n                "),o["ɵɵelementStart"](36,"input",91),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.number=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n                "),o["ɵɵelementStart"](38,"div",41),o["ɵɵtext"](39,"\n                  "),o["ɵɵelementStart"](40,"button",50),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).toggleCardNumber()})),o["ɵɵpipe"](41,"i18n"),o["ɵɵtext"](42,"\n                    "),o["ɵɵelement"](43,"i",43),o["ɵɵtext"](44,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n                  "),o["ɵɵelementStart"](46,"button",50),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2);return t.copy(t.cipher.card.number,"number","Number")})),o["ɵɵpipe"](47,"i18n"),o["ɵɵtext"](48,"\n                    "),o["ɵɵelement"](49,"i",44),o["ɵɵtext"](50,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n            "),o["ɵɵelementStart"](55,"div",92),o["ɵɵtext"](56,"\n              "),o["ɵɵelementStart"](57,"label",93),o["ɵɵtext"](58),o["ɵɵpipe"](59,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n              "),o["ɵɵelementStart"](61,"select",94),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.expMonth=t})),o["ɵɵtext"](62,"\n                "),o["ɵɵtemplate"](63,Xo,2,2,"option",29),o["ɵɵtext"](64,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n            "),o["ɵɵelementStart"](67,"div",92),o["ɵɵtext"](68,"\n              "),o["ɵɵelementStart"](69,"label",95),o["ɵɵtext"](70),o["ɵɵpipe"](71,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n              "),o["ɵɵelementStart"](73,"input",96),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.expYear=t})),o["ɵɵpipe"](74,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](75,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](77,"\n          "),o["ɵɵelementStart"](78,"div",16),o["ɵɵtext"](79,"\n            "),o["ɵɵelementStart"](80,"div",17),o["ɵɵtext"](81,"\n              "),o["ɵɵelementStart"](82,"label",97),o["ɵɵtext"](83),o["ɵɵpipe"](84,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](85,"\n              "),o["ɵɵelementStart"](86,"div",34),o["ɵɵtext"](87,"\n                "),o["ɵɵelementStart"](88,"input",98),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.code=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](89,"\n                "),o["ɵɵelementStart"](90,"div",41),o["ɵɵtext"](91,"\n                  "),o["ɵɵelementStart"](92,"button",50),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).toggleCardCode()})),o["ɵɵpipe"](93,"i18n"),o["ɵɵtext"](94,"\n                    "),o["ɵɵelement"](95,"i",43),o["ɵɵtext"](96,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](97,"\n                  "),o["ɵɵelementStart"](98,"button",50),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2);return t.copy(t.cipher.card.code,"securityCode","Security Code")})),o["ɵɵpipe"](99,"i18n"),o["ɵɵtext"](100,"\n                    "),o["ɵɵelement"](101,"i",44),o["ɵɵtext"](102,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](103,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](104,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](105,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](106,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](107,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,29,"cardholderName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.card.cardholderName)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,31,"brand")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.card.brand)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.cardBrandOptions),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](32,33,"number")),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("type",e.showCardNumber?"text":"password"),o["ɵɵproperty"]("ngModel",e.cipher.card.number)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](41,35,"toggleVisibility")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](51,Qo,!e.showCardNumber,e.showCardNumber)),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](47,37,"copyNumber")),o["ɵɵadvance"](12),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](59,39,"expirationMonth")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.card.expMonth)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.cardExpMonthOptions),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](71,41,"expirationYear")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate1"]("placeholder","",o["ɵɵpipeBind1"](74,43,"ex")," 2019"),o["ɵɵproperty"]("ngModel",e.cipher.card.expYear)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](84,45,"securityCode")),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("type",e.showCardCode?"text":"password"),o["ɵɵproperty"]("ngModel",e.cipher.card.code)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](93,47,"toggleVisibility")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](54,Qo,!e.showCardCode,e.showCardCode)),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](99,49,"securityCode"))}}function ta(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                  ",e.name,"\n                ")}}function na(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",16),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"div",99),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"label",100),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"select",101),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.title=t})),o["ɵɵtext"](11,"\n                "),o["ɵɵtemplate"](12,ta,2,2,"option",29),o["ɵɵtext"](13,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n          "),o["ɵɵelementStart"](17,"div",16),o["ɵɵtext"](18,"\n            "),o["ɵɵelementStart"](19,"div",99),o["ɵɵtext"](20,"\n              "),o["ɵɵelementStart"](21,"label",102),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n              "),o["ɵɵelementStart"](25,"input",103),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.firstName=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n            "),o["ɵɵelementStart"](28,"div",99),o["ɵɵtext"](29,"\n              "),o["ɵɵelementStart"](30,"label",104),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n              "),o["ɵɵelementStart"](34,"input",105),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.middleName=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n            "),o["ɵɵelementStart"](37,"div",99),o["ɵɵtext"](38,"\n              "),o["ɵɵelementStart"](39,"label",106),o["ɵɵtext"](40),o["ɵɵpipe"](41,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n              "),o["ɵɵelementStart"](43,"input",107),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.lastName=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n          "),o["ɵɵelementStart"](47,"div",16),o["ɵɵtext"](48,"\n            "),o["ɵɵelementStart"](49,"div",99),o["ɵɵtext"](50,"\n              "),o["ɵɵelementStart"](51,"label",108),o["ɵɵtext"](52),o["ɵɵpipe"](53,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n              "),o["ɵɵelementStart"](55,"input",109),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.username=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](57,"\n            "),o["ɵɵelementStart"](58,"div",99),o["ɵɵtext"](59,"\n              "),o["ɵɵelementStart"](60,"label",110),o["ɵɵtext"](61),o["ɵɵpipe"](62,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](63,"\n              "),o["ɵɵelementStart"](64,"input",111),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.company=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n          "),o["ɵɵelementStart"](68,"div",16),o["ɵɵtext"](69,"\n            "),o["ɵɵelementStart"](70,"div",99),o["ɵɵtext"](71,"\n              "),o["ɵɵelementStart"](72,"label",112),o["ɵɵtext"](73),o["ɵɵpipe"](74,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](75,"\n              "),o["ɵɵelementStart"](76,"input",113),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.ssn=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](77,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](78,"\n            "),o["ɵɵelementStart"](79,"div",99),o["ɵɵtext"](80,"\n              "),o["ɵɵelementStart"](81,"label",114),o["ɵɵtext"](82),o["ɵɵpipe"](83,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](84,"\n              "),o["ɵɵelementStart"](85,"input",115),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.passportNumber=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](86,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](87,"\n            "),o["ɵɵelementStart"](88,"div",99),o["ɵɵtext"](89,"\n              "),o["ɵɵelementStart"](90,"label",116),o["ɵɵtext"](91),o["ɵɵpipe"](92,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](93,"\n              "),o["ɵɵelementStart"](94,"input",117),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.licenseNumber=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](95,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](96,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](97,"\n          "),o["ɵɵelementStart"](98,"div",16),o["ɵɵtext"](99,"\n            "),o["ɵɵelementStart"](100,"div",17),o["ɵɵtext"](101,"\n              "),o["ɵɵelementStart"](102,"label",118),o["ɵɵtext"](103),o["ɵɵpipe"](104,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](105,"\n              "),o["ɵɵelementStart"](106,"input",119),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.email=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](107,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](108,"\n            "),o["ɵɵelementStart"](109,"div",17),o["ɵɵtext"](110,"\n              "),o["ɵɵelementStart"](111,"label",120),o["ɵɵtext"](112),o["ɵɵpipe"](113,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](114,"\n              "),o["ɵɵelementStart"](115,"input",121),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.phone=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](116,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](117,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](118,"\n          "),o["ɵɵelementStart"](119,"div",16),o["ɵɵtext"](120,"\n            "),o["ɵɵelementStart"](121,"div",17),o["ɵɵtext"](122,"\n              "),o["ɵɵelementStart"](123,"label",122),o["ɵɵtext"](124),o["ɵɵpipe"](125,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](126,"\n              "),o["ɵɵelementStart"](127,"input",123),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.address1=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](128,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](129,"\n            "),o["ɵɵelementStart"](130,"div",17),o["ɵɵtext"](131,"\n              "),o["ɵɵelementStart"](132,"label",124),o["ɵɵtext"](133),o["ɵɵpipe"](134,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](135,"\n              "),o["ɵɵelementStart"](136,"input",125),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.address2=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](137,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](138,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](139,"\n          "),o["ɵɵelementStart"](140,"div",16),o["ɵɵtext"](141,"\n            "),o["ɵɵelementStart"](142,"div",17),o["ɵɵtext"](143,"\n              "),o["ɵɵelementStart"](144,"label",126),o["ɵɵtext"](145),o["ɵɵpipe"](146,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](147,"\n              "),o["ɵɵelementStart"](148,"input",127),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.address3=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](149,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](150,"\n            "),o["ɵɵelementStart"](151,"div",17),o["ɵɵtext"](152,"\n              "),o["ɵɵelementStart"](153,"label",128),o["ɵɵtext"](154),o["ɵɵpipe"](155,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](156,"\n              "),o["ɵɵelementStart"](157,"input",129),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.city=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](158,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](159,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](160,"\n          "),o["ɵɵelementStart"](161,"div",16),o["ɵɵtext"](162,"\n            "),o["ɵɵelementStart"](163,"div",17),o["ɵɵtext"](164,"\n              "),o["ɵɵelementStart"](165,"label",130),o["ɵɵtext"](166),o["ɵɵpipe"](167,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](168,"\n              "),o["ɵɵelementStart"](169,"input",131),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.state=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](170,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](171,"\n            "),o["ɵɵelementStart"](172,"div",17),o["ɵɵtext"](173,"\n              "),o["ɵɵelementStart"](174,"label",132),o["ɵɵtext"](175),o["ɵɵpipe"](176,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](177,"\n              "),o["ɵɵelementStart"](178,"input",133),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.postalCode=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](179,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](180,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](181,"\n          "),o["ɵɵelementStart"](182,"div",16),o["ɵɵtext"](183,"\n            "),o["ɵɵelementStart"](184,"div",17),o["ɵɵtext"](185,"\n              "),o["ɵɵelementStart"](186,"label",134),o["ɵɵtext"](187),o["ɵɵpipe"](188,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](189,"\n              "),o["ɵɵelementStart"](190,"input",135),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.country=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](191,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](192,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](193,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,55,"title")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.title)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.identityTitleOptions),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,57,"firstName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.firstName)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](32,59,"middleName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.middleName)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](41,61,"lastName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.lastName)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](53,63,"username")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.username)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](62,65,"company")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.company)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](74,67,"ssn")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.ssn)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](83,69,"passportNumber")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.passportNumber)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](92,71,"licenseNumber")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.licenseNumber)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](104,73,"email")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.email)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](113,75,"phone")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.phone)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](125,77,"address1")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.address1)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](134,79,"address2")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.address2)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](146,81,"address3")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.address3)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](155,83,"cityTown")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.city)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](167,85,"stateProvince")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.state)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](176,87,"zipPostalCode")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.postalCode)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](188,89,"country")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.country)("disabled",e.cipher.isDeleted||e.viewOnly)}}function ia(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function ra(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"h3",136),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"div",16),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"div",137),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"label",138),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵelementStart"](14,"select",139),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.organizationId=t}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).organizationChanged()})),o["ɵɵtext"](15,"\n                "),o["ɵɵtemplate"](16,ia,2,2,"option",29),o["ɵɵtext"](17,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,5,"ownership")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,7,"whoOwnsThisItem")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.organizationId)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.ownershipOptions)}}function oa(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"noCollectionsInList"),"\n          "))}function aa(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",141),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"input",142),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.checked=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n              "),o["ɵɵelementStart"](4,"label",143),o["ɵɵtext"](5),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=o["ɵɵnextContext"](4);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("id","collection-",n,""),o["ɵɵpropertyInterpolate1"]("name","Collection[",n,"].Checked"),o["ɵɵproperty"]("ngModel",e.checked)("disabled",i.cipher.isDeleted||i.viewOnly),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("for","collection-",n,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function sa(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵtemplate"](2,aa,7,6,"div",140),o["ɵɵtext"](3,"\n          "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.collections)}}function la(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"h3",136),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵtemplate"](6,oa,3,3,"div",21),o["ɵɵtext"](7,"\n          "),o["ɵɵtemplate"](8,sa,4,1,"ng-container",21),o["ɵɵtext"](9,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"collections")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.collections||!e.collections.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.collections&&e.collections.length)}}function da(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"b",145),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5),o["ɵɵpipe"](6,"date"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](4,2,"datePasswordUpdated"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind2"](6,4,e.cipher.passwordRevisionDisplayDate,"medium"),"\n            ")}}function ca(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"b",145),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"a",146),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).viewHistory()})),o["ɵɵpipe"](7,"i18n"),o["ɵɵtext"](8),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](4,3,"passwordHistory"),":"),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](7,5,"view")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n                ",e.cipher.passwordHistory.length,"\n              ")}}function pa(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"date"),o["ɵɵelementStart"](3,"span",148),o["ɵɵtext"](4),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind2"](2,2,e.lastUsedDate,"short")," -\n                "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](e.password)}}function ua(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",62),o["ɵɵtext"](1,"\n              "),o["ɵɵtemplate"](2,pa,6,5,"div",147),o["ɵɵtext"](3,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.cipher.passwordHistory)}}function ma(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",144),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"div"),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"b",145),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9),o["ɵɵpipe"](10,"date"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵtemplate"](12,da,7,7,"div",21),o["ɵɵtext"](13,"\n            "),o["ɵɵtemplate"](14,ca,10,7,"div",21),o["ɵɵtext"](15,"\n            "),o["ɵɵtemplate"](16,ua,4,1,"div",60),o["ɵɵtext"](17,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](8,5,"dateUpdated"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind2"](10,7,e.cipher.revisionDate,"medium"),"\n            "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.showRevisionDate),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasPasswordHistory),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.viewingPasswordHistory)}}function ha(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"h3",136),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"div",141),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"input",149),o["ɵɵlistener"]("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).repromptChanged()})),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n            "),o["ɵɵelementStart"](10,"label",150),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementStart"](14,"a",151),o["ɵɵpipe"](15,"i18n"),o["ɵɵtext"](16,"\n              "),o["ɵɵelement"](17,"i",79),o["ɵɵtext"](18,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,5,"options")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngModel",e.reprompt)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,7,"passwordPrompt")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](15,9,"learnMore"))}}function va(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",13),o["ɵɵtext"](1,"\n        "),o["ɵɵtemplate"](2,Bo,3,3,"app-callout",14),o["ɵɵtext"](3,"\n        "),o["ɵɵtemplate"](4,Do,14,6,"div",15),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"div",16),o["ɵɵtext"](7,"\n          "),o["ɵɵelementStart"](8,"div",17),o["ɵɵtext"](9,"\n            "),o["ɵɵelementStart"](10,"label",18),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementStart"](14,"input",19),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().cipher.name=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n          "),o["ɵɵtemplate"](17,Ro,12,8,"div",20),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n        "),o["ɵɵtext"](20,"\n        "),o["ɵɵtemplate"](21,Zo,74,38,"ng-container",21),o["ɵɵtext"](22,"\n        "),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,ea,108,57,"ng-container",21),o["ɵɵtext"](25,"\n        "),o["ɵɵtext"](26,"\n        "),o["ɵɵtemplate"](27,na,194,91,"ng-container",21),o["ɵɵtext"](28,"\n        "),o["ɵɵelementStart"](29,"div",22),o["ɵɵtext"](30,"\n          "),o["ɵɵelementStart"](31,"label",23),o["ɵɵtext"](32),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n          "),o["ɵɵelementStart"](35,"textarea",24),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().cipher.notes=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n        "),o["ɵɵelement"](38,"app-vault-add-edit-custom-fields",25),o["ɵɵtext"](39,"\n        "),o["ɵɵtemplate"](40,ra,21,9,"ng-container",21),o["ɵɵtext"](41,"\n        "),o["ɵɵtemplate"](42,la,10,5,"ng-container",21),o["ɵɵtext"](43,"\n        "),o["ɵɵtemplate"](44,ma,19,10,"ng-container",21),o["ɵɵtext"](45,"\n        "),o["ɵɵtemplate"](46,ha,21,11,"ng-container",21),o["ɵɵtext"](47,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.allowOwnershipAssignment()&&!e.allowPersonal),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.editMode&&!e.viewOnly),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,20,"name")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.name)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.organization),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.cipher.type===e.cipherType.Login),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.cipher.type===e.cipherType.Card),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.cipher.type===e.cipherType.Identity),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](33,22,"notes")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.notes)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](3),o["ɵɵproperty"]("cipher",e.cipher)("thisCipherType",e.cipher.type)("viewOnly",e.viewOnly)("copy",e.copy.bind(e)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.allowOwnershipAssignment()),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",(!e.editMode||e.cloneMode)&&e.cipher.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.editMode),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.canUseReprompt)}}function ga(e,t){if(1&e&&(o["ɵɵelementStart"](0,"button",152),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",153),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](),t=o["ɵɵreference"](5);o["ɵɵproperty"]("disabled",t.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,5,null!=e.cipher&&e.cipher.isDeleted?"restore":"save"))}}const fa=function(e,t){return{"bwi-star-f":e,"bwi-star":t}};function xa(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",70),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).toggleFavorite()})),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n            "),o["ɵɵelement"](3,"i",43),o["ɵɵtext"](4,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](1,2,e.cipher.favorite?"unfavorite":"favorite")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](4,fa,e.cipher.favorite,!e.cipher.favorite))}}function ya(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",157,158),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).delete()})),o["ɵɵpipe"](2,"i18n"),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"i",159),o["ɵɵtext"](5,"\n            "),o["ɵɵelement"](6,"i",160),o["ɵɵpipe"](7,"i18n"),o["ɵɵtext"](8,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"](2);o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](2,6,t.cipher.isDeleted?"permanentlyDelete":"delete")),o["ɵɵproperty"]("disabled",e.loading)("appApiAction",t.deletePromise),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](7,8,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}function Sa(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",154),o["ɵɵtext"](1,"\n          "),o["ɵɵtemplate"](2,xa,5,7,"button",155),o["ɵɵtext"](3,"\n          "),o["ɵɵtemplate"](4,ya,9,10,"button",156),o["ɵɵtext"](5,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.organization&&!e.cipher.isDeleted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.editMode&&!e.cloneMode)}}class ba extends no{constructor(e,t,n,i,r,o,a,s,l,d,c,p,u,m,h){super(e,t,n,i,r,o,a,d,c,p,m,h,u),this.totpService=s,this.passwordGenerationService=l,this.messagingService=d,this.policyService=p,this.showRevisionDate=!1,this.hasPasswordHistory=!1,this.viewingPasswordHistory=!1,this.viewOnly=!1}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return To(this,void 0,void 0,(function*(){if(yield e.ngOnInit.call(this),yield this.load(),this.showRevisionDate=null!=this.cipher.passwordRevisionDisplayDate,this.hasPasswordHistory=this.cipher.hasPasswordHistory,this.cleanUp(),this.canAccessPremium=yield this.stateService.getCanAccessPremium(),this.cipher.type===jr.O.Login&&this.cipher.login.totp&&(this.cipher.organizationUseTotp||this.canAccessPremium)){yield this.totpUpdateCode();const e=this.totpService.getTimeInterval(this.cipher.login.totp);yield this.totpTick(e),this.totpInterval=window.setInterval((()=>To(this,void 0,void 0,(function*(){yield this.totpTick(e)}))),1e3)}}))}toggleFavorite(){this.cipher.favorite=!this.cipher.favorite}launch(e){e.canLaunch&&this.platformUtilsService.launchUri(e.launchUri)}copy(e,t,n){null!=e&&(this.platformUtilsService.copyToClipboard(e,{window}),this.platformUtilsService.showToast("info",null,this.i18nService.t("valueCopied",this.i18nService.t(t))),this.editMode&&("password"===t?this.eventService.collect(Lr.t.Cipher_ClientToggledHiddenFieldVisible,this.cipherId):"securityCode"===t?this.eventService.collect(Lr.t.Cipher_ClientCopiedCardCode,this.cipherId):"H_Field"===n&&this.eventService.collect(Lr.t.Cipher_ClientCopiedHiddenField,this.cipherId)))}generatePassword(){const e=Object.create(null,{generatePassword:{get:()=>super.generatePassword}});return To(this,void 0,void 0,(function*(){const t=yield e.generatePassword.call(this);if(t){const e=(yield this.passwordGenerationService.getOptions())[0];this.cipher.login.password=yield this.passwordGenerationService.generatePassword(e)}return t}))}premiumRequired(){this.canAccessPremium||this.messagingService.send("premiumRequired")}upgradeOrganization(){this.messagingService.send("upgradeOrganization",{organizationId:this.cipher.organizationId})}viewHistory(){this.viewingPasswordHistory=!this.viewingPasswordHistory}cleanUp(){this.totpInterval&&window.clearInterval(this.totpInterval)}totpUpdateCode(){return To(this,void 0,void 0,(function*(){if(null!=this.cipher&&this.cipher.type===jr.O.Login&&null!=this.cipher.login.totp)if(this.totpCode=yield this.totpService.getCode(this.cipher.login.totp),null!=this.totpCode)if(this.totpCode.length>4){const e=Math.floor(this.totpCode.length/2);this.totpCodeFormatted=this.totpCode.substring(0,e)+" "+this.totpCode.substring(e)}else this.totpCodeFormatted=this.totpCode;else this.totpCodeFormatted=null,this.totpInterval&&window.clearInterval(this.totpInterval);else this.totpInterval&&window.clearInterval(this.totpInterval)}))}allowOwnershipAssignment(){return(!this.editMode||this.cloneMode)&&null!=this.ownershipOptions&&(this.ownershipOptions.length>1||!this.allowPersonal)}totpTick(e){return To(this,void 0,void 0,(function*(){const t=Math.round((new Date).getTime()/1e3)%e;this.totpSec=e-t,this.totpDash=+(Math.round(78.6/e*t+"e+2")+"e-2"),this.totpLow=this.totpSec<=7,0===t&&(yield this.totpUpdateCode())}))}}ba.ɵfac=function(e){return new(e||ba)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](Rr.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Zr),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](Jr.a),o["ɵɵdirectiveInject"](io),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](Xr.P),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](eo))},ba.ɵcmp=o["ɵɵdefineComponent"]({type:ba,selectors:[["app-vault-add-edit"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:36,vars:11,consts:[["role","dialog","aria-modal","true","aria-labelledby","cipherAddEditTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],["ngNativeValidate","","autocomplete","off",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","cipherAddEditTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["class","ml-auto",4,"ngIf"],[1,"modal-body"],["type","info",4,"ngIf"],["class","row",4,"ngIf"],[1,"row"],[1,"col-6","form-group"],["for","name"],["id","name","type","text","name","Name","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","col-6 form-group",4,"ngIf"],[4,"ngIf"],[1,"form-group"],["for","notes"],["id","notes","name","Notes","rows","6",1,"form-control",3,"ngModel","disabled","ngModelChange"],[3,"cipher","thisCipherType","viewOnly","copy"],["type","info"],["for","type"],["id","type","name","Type","appAutofocus","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["for","folder"],["id","folder","name","FolderId",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","loginUsername"],[1,"input-group"],["id","loginUsername","type","text","name","Login.Username","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","input-group-append",4,"ngIf"],[1,"d-flex"],["for","loginPassword"],["class","ml-auto d-flex",4,"ngIf"],["id","loginPassword","name","Login.Password","appInputVerbatim","","autocomplete","new-password",1,"form-control","text-monospace",3,"type","ngModel","disabled","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","disabled","click"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-clone"],["for","loginTotp"],["id","loginTotp","name","Login.Totp","appInputVerbatim","",1,"form-control","text-monospace",3,"type","ngModel","disabled","ngModelChange"],[1,"col-6","form-group","totp","d-flex","align-items-end",3,"ngClass"],["class","d-flex align-items-center",4,"ngIf"],["href","#","appStopClick","","class","d-inline-block mb-3",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","click"],[1,"ml-auto","d-flex"],["href","#","class","d-block mr-2 bwi-icon-above-input","appStopClick","",3,"appA11yTitle","click",4,"ngIf"],["href","#","appStopClick","",1,"d-block","bwi-icon-above-input",3,"appA11yTitle","appApiAction","click"],["checkPasswordBtn",""],["aria-hidden","true",1,"bwi","bwi-lg","bwi-fw","bwi-check-circle",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-fw","bwi-spinner","bwi-spin",3,"hidden","title"],["href","#","appStopClick","",1,"d-block","mr-2","bwi-icon-above-input",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-fw","bwi-generate"],["src","../../images/totp-countdown.png","id","totpImage",1,"ml-2",3,"title"],["class","ml-3",4,"ngIf"],["href","#","appStopClick","","bitBadge","","badgeType","primary","class","tw-ml-4",3,"click",4,"ngIf"],[1,"ml-3"],["href","#","appStopClick","","bitBadge","","badgeType","primary",1,"tw-ml-4",3,"click"],[1,"d-flex","align-items-center"],[1,"totp-countdown","mr-3","ml-2"],[1,"totp-sec"],["r","12.6","cy","16","cx","16",1,"totp-circle","inner",3,"ngStyle"],["r","14","cy","16","cx","16",1,"totp-circle","outer"],[1,"totp-code","mr-2",3,"title"],["type","button",1,"btn","btn-link",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-clone"],["class","row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-7","form-group"],[3,"for"],["type","text","appInputVerbatim","",1,"form-control",3,"id","name","ngModel","disabled","placeholder","ngModelChange"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-share-square"],[1,"col-5","form-group"],["href","https://bitwarden.com/help/uri-match-detection/","target","_blank","rel","noopener",1,"ml-auto",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],[1,"form-control","overflow-hidden",3,"id","name","ngModel","disabled","ngModelChange","change"],["type","button","class","btn btn-link text-danger ml-2",3,"appA11yTitle","click",4,"ngIf"],["type","button",1,"btn","btn-link","text-danger","ml-2",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-minus-circle","bwi-lg"],["href","#","appStopClick","",1,"d-inline-block","mb-3",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus-circle","bwi-fw"],["for","cardCardholderName"],["id","cardCardholderName","type","text","name","Card.CardCardholderName",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","cardBrand"],["id","cardBrand","name","Card.Brand",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","cardNumber"],["id","cardNumber","name","Card.Number","appInputVerbatim","","autocomplete","new-password",1,"form-control","text-monospace",3,"type","ngModel","disabled","ngModelChange"],[1,"col","form-group"],["for","cardExpMonth"],["id","cardExpMonth","name","Card.ExpMonth",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","cardExpYear"],["id","cardExpYear","type","text","name","Card.ExpYear",1,"form-control",3,"ngModel","placeholder","disabled","ngModelChange"],["for","cardCode"],["id","cardCode","name","Card.Code","appInputVerbatim","","autocomplete","new-password",1,"form-control","text-monospace",3,"type","ngModel","disabled","ngModelChange"],[1,"col-4","form-group"],["for","idTitle"],["id","idTitle","name","Identity.Title",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idFirstName"],["id","idFirstName","type","text","name","Identity.FirstName",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idMiddleName"],["id","idMiddleName","type","text","name","Identity.MiddleName",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idLastName"],["id","idLastName","type","text","name","Identity.LastName",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idUsername"],["id","idUsername","type","text","name","Identity.Username","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idCompany"],["id","idCompany","type","text","name","Identity.Company",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idSsn"],["id","idSsn","type","text","name","Identity.SSN","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idPassportNumber"],["id","idPassportNumber","type","text","name","Identity.PassportNumber","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idLicenseNumber"],["id","idLicenseNumber","type","text","name","Identity.LicenseNumber","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idEmail"],["id","idEmail","type","text","inputmode","email","name","Identity.Email","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idPhone"],["id","idPhone","type","text","inputmode","tel","name","Identity.Phone",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idAddress1"],["id","idAddress1","type","text","name","Identity.Address1",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idAddress2"],["id","idAddress2","type","text","name","Identity.Address2",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idAddress3"],["id","idAddress3","type","text","name","Identity.Address3",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idCity"],["id","idCity","type","text","name","Identity.City",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idState"],["id","idState","type","text","name","Identity.State",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idPostalCode"],["id","idPostalCode","type","text","name","Identity.PostalCode",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idCountry"],["id","idCountry","type","text","name","Identity.Country",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"mt-4"],[1,"col-5"],["for","organizationId"],["id","organizationId","name","OrganizationId",1,"form-control",3,"ngModel","disabled","ngModelChange","change"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","id","name","disabled","ngModelChange"],[1,"form-check-label",3,"for"],[1,"small","text-muted","mt-4"],[1,"font-weight-semibold"],["href","#","appStopClick","",3,"title","click"],[4,"ngFor","ngForOf"],[1,"generated-wrapper","text-monospace","ml-2"],["type","checkbox","id","passwordPrompt","name","passwordPrompt",1,"form-check-input",3,"ngModel","disabled","change"],["for","passwordPrompt",1,"form-check-label"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/managing-items/#protect-individual-items",3,"appA11yTitle"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[1,"ml-auto"],["type","button","class","btn btn-link",3,"appA11yTitle","click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click"],["deleteBtn",""],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-lg","bwi-fw",3,"hidden","title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"button",6),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"span",7),o["ɵɵtext"](16,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵtemplate"](20,va,48,24,"div",8),o["ɵɵtext"](21,"\n      "),o["ɵɵelementStart"](22,"div",9),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,ga,9,7,"button",10),o["ɵɵtext"](25,"\n        "),o["ɵɵelementStart"](26,"button",11),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n        "),o["ɵɵtemplate"](30,Sa,6,2,"div",12),o["ɵɵtext"](31,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](t.title),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,7,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",t.cipher),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!t.viewOnly),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](28,9,t.viewOnly?"close":"cancel"),"\n        "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.cipher&&!t.viewOnly))},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,B.NgIf,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,Co,Pe.O,d.SelectControlValueAccessor,Z.U,B.NgForOf,d.NgSelectOption,d["ɵNgSelectMultipleOption"],J.b,B.NgClass,Tn,Oo,Po.l,B.NgStyle,d.CheckboxControlValueAccessor],pipes:[M.C,B.AsyncPipe,B.DatePipe],encapsulation:2});var wa=n(93638),Ia=n(86290),Ca=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Ea{constructor(e,t,n,i,r,a,s,l,d){this.cipherService=e,this.i18nService=t,this.cryptoService=n,this.platformUtilsService=i,this.apiService=r,this.win=a,this.logService=s,this.stateService=l,this.fileDownloadService=d,this.onUploadedAttachment=new o.EventEmitter,this.onDeletedAttachment=new o.EventEmitter,this.onReuploadedAttachment=new o.EventEmitter,this.deletePromises={},this.reuploadPromises={},this.emergencyAccessId=null}ngOnInit(){return Ca(this,void 0,void 0,(function*(){yield this.init()}))}submit(){return Ca(this,void 0,void 0,(function*(){if(!this.hasUpdatedKey)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("updateKey"));const e=document.getElementById("file"),t=e.files;if(null!=t&&0!==t.length)if(t[0].size>524288e3)this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("maxFileSize"));else{try{this.formPromise=this.saveCipherAttachment(t[0]),this.cipherDomain=yield this.formPromise,this.cipher=yield this.cipherDomain.decrypt(),this.platformUtilsService.showToast("success",null,this.i18nService.t("attachmentSaved")),this.onUploadedAttachment.emit()}catch(n){this.logService.error(n)}e.type="",e.type="file",e.value=""}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("selectFile"))}))}delete(e){return Ca(this,void 0,void 0,(function*(){if(null!=this.deletePromises[e.id])return;if(yield this.platformUtilsService.showDialog(this.i18nService.t("deleteAttachmentConfirmation"),this.i18nService.t("deleteAttachment"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")){try{this.deletePromises[e.id]=this.deleteCipherAttachment(e.id),yield this.deletePromises[e.id],this.platformUtilsService.showToast("success",null,this.i18nService.t("deletedAttachment"));const t=this.cipher.attachments.indexOf(e);t>-1&&this.cipher.attachments.splice(t,1)}catch(t){this.logService.error(t)}this.deletePromises[e.id]=null,this.onDeletedAttachment.emit()}}))}download(e){return Ca(this,void 0,void 0,(function*(){const t=e;if(t.downloading)return;if(!this.canAccessAttachments)return void this.platformUtilsService.showToast("error",this.i18nService.t("premiumRequired"),this.i18nService.t("premiumRequiredDesc"));let n;try{n=(yield this.apiService.getAttachmentData(this.cipher.id,e.id,this.emergencyAccessId)).url}catch(r){if(!(r instanceof wa.i&&404===r.statusCode))throw r instanceof wa.i?new Error(r.getSingleMessage()):r;n=e.url}t.downloading=!0;const i=yield fetch(new Request(n,{cache:"no-store"}));if(200!==i.status)return this.platformUtilsService.showToast("error",null,this.i18nService.t("errorOccurred")),void(t.downloading=!1);try{const t=yield i.arrayBuffer(),n=null!=e.key?e.key:yield this.cryptoService.getOrgKey(this.cipher.organizationId),r=yield this.cryptoService.decryptFromBytes(t,n);this.fileDownloadService.download({fileName:e.fileName,blobData:r})}catch(r){this.platformUtilsService.showToast("error",null,this.i18nService.t("errorOccurred"))}t.downloading=!1}))}init(){return Ca(this,void 0,void 0,(function*(){this.cipherDomain=yield this.loadCipher(),this.cipher=yield this.cipherDomain.decrypt(),this.hasUpdatedKey=yield this.cryptoService.hasEncKey();const e=yield this.stateService.getCanAccessPremium();if(this.canAccessAttachments=e||null!=this.cipher.organizationId,this.canAccessAttachments){if(!this.hasUpdatedKey){(yield this.platformUtilsService.showDialog(this.i18nService.t("updateKey"),this.i18nService.t("featureUnavailable"),this.i18nService.t("learnMore"),this.i18nService.t("cancel"),"warning"))&&this.platformUtilsService.launchUri("https://bitwarden.com/help/account-encryption-key/#rotate-your-encryption-key")}}else{(yield this.platformUtilsService.showDialog(this.i18nService.t("premiumRequiredDesc"),this.i18nService.t("premiumRequired"),this.i18nService.t("learnMore"),this.i18nService.t("cancel")))&&this.platformUtilsService.launchUri("https://vault.bitwarden.com/#/?premium=purchase")}}))}reuploadCipherAttachment(e,t){return Ca(this,void 0,void 0,(function*(){const n=e;if(null==e.key&&!n.downloading&&null==this.reuploadPromises[e.id])try{this.reuploadPromises[e.id]=Promise.resolve().then((()=>Ca(this,void 0,void 0,(function*(){n.downloading=!0;const i=yield fetch(new Request(e.url,{cache:"no-store"}));if(200!==i.status)return this.platformUtilsService.showToast("error",null,this.i18nService.t("errorOccurred")),void(n.downloading=!1);try{const n=yield i.arrayBuffer(),r=null!=e.key?e.key:yield this.cryptoService.getOrgKey(this.cipher.organizationId),o=yield this.cryptoService.decryptFromBytes(n,r);this.cipherDomain=yield this.cipherService.saveAttachmentRawWithServer(this.cipherDomain,e.fileName,o,t),this.cipher=yield this.cipherDomain.decrypt(),this.deletePromises[e.id]=this.deleteCipherAttachment(e.id),yield this.deletePromises[e.id];const a=this.cipher.attachments.filter((t=>t.id===e.id));if(a.length>0){const e=this.cipher.attachments.indexOf(a[0]);e>-1&&this.cipher.attachments.splice(e,1)}this.platformUtilsService.showToast("success",null,this.i18nService.t("attachmentSaved")),this.onReuploadedAttachment.emit()}catch(r){this.platformUtilsService.showToast("error",null,this.i18nService.t("errorOccurred"))}n.downloading=!1})))),yield this.reuploadPromises[e.id]}catch(i){this.logService.error(i)}}))}loadCipher(){return this.cipherService.get(this.cipherId)}saveCipherAttachment(e){return this.cipherService.saveAttachmentWithServer(this.cipherDomain,e)}deleteCipherAttachment(e){return this.cipherService.deleteAttachmentWithServer(this.cipher.id,e)}}Ea.ɵfac=function(e){return new(e||Ea)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](Window),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](Ia._))},Ea.ɵdir=o["ɵɵdefineDirective"]({type:Ea,inputs:{cipherId:"cipherId"},outputs:{onUploadedAttachment:"onUploadedAttachment",onDeletedAttachment:"onDeletedAttachment",onReuploadedAttachment:"onReuploadedAttachment"}});var ka=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Pa(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.cipher.name)}}function Aa(e,t){1&e&&o["ɵɵelement"](0,"i",24)}function Oa(e,t){1&e&&o["ɵɵelement"](0,"i",25)}function Ta(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",26),o["ɵɵtext"](1,"\n                    "),o["ɵɵelementStart"](2,"a",27),o["ɵɵtext"](3,"\n                      "),o["ɵɵelement"](4,"i",28),o["ɵɵpipe"](5,"i18n"),o["ɵɵtext"](6,"\n                      "),o["ɵɵelementStart"](7,"span",29),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n                    "),o["ɵɵelementStart"](11,"button",30,31),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).reupload(t)})),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n                  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](12),t=o["ɵɵnextContext"]().$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](5,5,"attachmentFixDesc")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,7,"attachmentFixDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("appApiAction",n.reuploadPromises[t.id])("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n                      ",o["ɵɵpipeBind1"](14,9,"fix"),"\n                    ")}}function Ba(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"td",32),o["ɵɵtext"](1,"\n                "),o["ɵɵelementStart"](2,"button",33,34),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).delete(t)})),o["ɵɵpipe"](4,"i18n"),o["ɵɵtext"](5,"\n                  "),o["ɵɵelement"](6,"i",35),o["ɵɵtext"](7,"\n                  "),o["ɵɵelement"](8,"i",36),o["ɵɵpipe"](9,"i18n"),o["ɵɵtext"](10,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n              "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](3),t=o["ɵɵnextContext"]().$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](4,6,"delete")),o["ɵɵproperty"]("appApiAction",n.deletePromises[t.id])("disabled",e.loading),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](9,8,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}function Ma(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",16),o["ɵɵtext"](3,"\n                "),o["ɵɵtemplate"](4,Aa,1,0,"i",17),o["ɵɵtext"](5,"\n                "),o["ɵɵtemplate"](6,Oa,1,0,"i",18),o["ɵɵtext"](7,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementStart"](9,"td",19),o["ɵɵtext"](10,"\n                "),o["ɵɵelementStart"](11,"div",20),o["ɵɵtext"](12,"\n                  "),o["ɵɵelementStart"](13,"a",21),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).download(t)})),o["ɵɵtext"](14),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n                  "),o["ɵɵtemplate"](16,Ta,16,11,"div",22),o["ɵɵtext"](17,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n                "),o["ɵɵelementStart"](19,"small"),o["ɵɵtext"](20),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n              "),o["ɵɵtemplate"](23,Ba,12,10,"td",23),o["ɵɵtext"](24,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!e.downloading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.downloading),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](e.fileName),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",n.showFixOldAttachments(e)),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](e.sizeName),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!n.viewOnly)}}function Da(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",14),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n            "),o["ɵɵtemplate"](4,Ma,25,6,"tr",15),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.cipher.attachments)}}function Fa(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"h3"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"label",37),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelement"](10,"input",38),o["ɵɵtext"](11,"\n          "),o["ɵɵelementStart"](12,"small",39),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"newAttachment")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,5,"file")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,7,"maxFileSize")))}function Ra(e,t){if(1&e&&(o["ɵɵelementStart"](0,"button",40),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",41),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"]()),2&e){o["ɵɵnextContext"]();const e=o["ɵɵreference"](5);o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,5,"save"))}}class Ua extends Ea{constructor(e,t,n,i,r,o,a,s){super(e,t,n,r,o,window,a,i,s),this.viewOnly=!1}reupload(e){return ka(this,void 0,void 0,(function*(){this.showFixOldAttachments(e)&&(yield this.reuploadCipherAttachment(e,!1))}))}showFixOldAttachments(e){return null==e.key&&null==this.cipher.organizationId}}Ua.ɵfac=function(e){return new(e||Ua)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Ia._))},Ua.ɵcmp=o["ɵɵdefineComponent"]({type:Ua,selectors:[["app-vault-attachments"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:42,vars:14,consts:[["role","dialog","aria-modal","true","aria-labelledby","attachmentsTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","attachmentsTitle",1,"modal-title"],[4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["class","table table-hover table-list",4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"table","table-hover","table-list"],[4,"ngFor","ngForOf"],[1,"table-list-icon"],["class","bwi bwi-fw bwi-lg bwi-file","aria-hidden","true",4,"ngIf"],["class","bwi bwi-spinner bwi-lg bwi-fw bwi-spin","aria-hidden","true",4,"ngIf"],[1,"wrap"],[1,"d-flex"],["href","#","appStopClick","",3,"click"],["class","ml-2",4,"ngIf"],["class","table-list-options",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-lg","bwi-file"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-lg","bwi-fw","bwi-spin"],[1,"ml-2"],["href","https://bitwarden.com/help/attachments/#fixing-old-attachments","target","_blank","rel","noopener"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle","text-warning",3,"title"],[1,"sr-only"],["type","button",1,"btn","btn-outline-primary","btn-sm","m-0","py-0","px-2",3,"appApiAction","disabled","click"],["reuploadBtn",""],[1,"table-list-options"],["type","button","appStopClick","",1,"btn","btn-outline-danger",3,"appA11yTitle","appApiAction","disabled","click"],["deleteBtn",""],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-lg","bwi-fw",3,"hidden","title"],["for","file",1,"sr-only"],["type","file","id","file","name","file","required","",1,"form-control-file"],[1,"form-text","text-muted"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵtemplate"](12,Pa,2,1,"small",6),o["ɵɵtext"](13,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"button",7),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"span",8),o["ɵɵtext"](19,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementStart"](23,"div",9),o["ɵɵtext"](24,"\n        "),o["ɵɵtemplate"](25,Da,7,1,"table",10),o["ɵɵtext"](26,"\n        "),o["ɵɵtemplate"](27,Fa,16,9,"div",6),o["ɵɵtext"](28,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n      "),o["ɵɵelementStart"](30,"div",11),o["ɵɵtext"](31,"\n        "),o["ɵɵtemplate"](32,Ra,9,7,"button",12),o["ɵɵtext"](33,"\n        "),o["ɵɵelementStart"](34,"button",13),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,8,"attachments"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.cipher),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](16,10,"close")),o["ɵɵadvance"](10),o["ɵɵproperty"]("ngIf",t.cipher&&t.cipher.hasAttachments),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.viewOnly),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!t.viewOnly),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](36,12,"close"),"\n        "))},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,pe,B.NgForOf,Tn],pipes:[M.C],encapsulation:2});class za{constructor(){this.indexedEntityId=null}}var Na=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Va{constructor(e){this.searchService=e,this.activeCipherId=null,this.onCipherClicked=new o.EventEmitter,this.onCipherRightClicked=new o.EventEmitter,this.onAddCipher=new o.EventEmitter,this.onAddCipherOptions=new o.EventEmitter,this.loaded=!1,this.ciphers=[],this.searchPlaceholder=null,this.filter=null,this.deleted=!1,this.searchPending=!1,this.searchTimeout=null,this.deletedFilter=e=>e.isDeleted===this.deleted}load(e=null,t=!1){return Na(this,void 0,void 0,(function*(){this.deleted=t||!1,yield this.applyFilter(e),this.loaded=!0}))}reload(e=null,t=!1){return Na(this,void 0,void 0,(function*(){this.loaded=!1,yield this.load(e,t)}))}refresh(){return Na(this,void 0,void 0,(function*(){yield this.reload(this.filter,this.deleted)}))}applyFilter(e=null){return Na(this,void 0,void 0,(function*(){this.filter=e,yield this.search(null)}))}search(e=null,t){return Na(this,void 0,void 0,(function*(){this.searchPending=!1,null!=this.searchTimeout&&clearTimeout(this.searchTimeout),null!=e?(this.searchPending=!0,this.searchTimeout=setTimeout((()=>Na(this,void 0,void 0,(function*(){yield this.doSearch(t),this.searchPending=!1}))),e)):yield this.doSearch(t)}))}selectCipher(e){this.onCipherClicked.emit(e)}rightClickCipher(e){this.onCipherRightClicked.emit(e)}addCipher(){this.onAddCipher.emit()}addCipherOptions(){this.onAddCipherOptions.emit()}isSearching(){return!this.searchPending&&this.searchService.isSearchable(this.searchText)}doSearch(e){return Na(this,void 0,void 0,(function*(){this.ciphers=yield this.searchService.searchCiphers(this.searchText,[this.filter,this.deletedFilter],e)}))}}Va.ɵfac=function(e){return new(e||Va)(o["ɵɵdirectiveInject"](za))},Va.ɵdir=o["ɵɵdefineDirective"]({type:Va,inputs:{activeCipherId:"activeCipherId"},outputs:{onCipherClicked:"onCipherClicked",onCipherRightClicked:"onCipherRightClicked",onAddCipher:"onAddCipher",onAddCipherOptions:"onAddCipherOptions"}});class Ha{constructor(e){this.el=e}onError(){this.el.nativeElement.src=this.appFallbackSrc}}Ha.ɵfac=function(e){return new(e||Ha)(o["ɵɵdirectiveInject"](o.ElementRef))},Ha.ɵdir=o["ɵɵdefineDirective"]({type:Ha,selectors:[["","appFallbackSrc",""]],hostBindings:function(e,t){1&e&&o["ɵɵlistener"]("error",(function(){return t.onError()}))},inputs:{appFallbackSrc:"appFallbackSrc"}});var ja=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function La(e,t){if(1&e&&o["ɵɵelement"](0,"img",3),2&e){const e=o["ɵɵnextContext"]();o["ɵɵpropertyInterpolate"]("appFallbackSrc",e.fallbackImage),o["ɵɵproperty"]("src",e.image,o["ɵɵsanitizeUrl"])}}function Ka(e,t){if(1&e&&o["ɵɵelement"](0,"i"),2&e){const e=o["ɵɵnextContext"]();o["ɵɵclassMapInterpolate1"]("bwi bwi-fw bwi-lg ",e.icon,"")}}const Ga={Visa:"card-visa",Mastercard:"card-mastercard",Amex:"card-amex",Discover:"card-discover","Diners Club":"card-diners-club",JCB:"card-jcb",Maestro:"card-maestro",UnionPay:"card-union-pay",RuPay:"card-ru-pay"};class qa{constructor(e,t){this.stateService=t,this.iconsUrl=e.getIconsUrl()}ngOnChanges(){return ja(this,void 0,void 0,(function*(){this.image=null,this.fallbackImage=null,this.imageEnabled=!(yield this.stateService.getDisableFavicon()),this.load()}))}load(){switch(this.cipher.type){case jr.O.Login:this.icon="bwi-globe",this.setLoginIcon();break;case jr.O.SecureNote:this.icon="bwi-sticky-note";break;case jr.O.Card:this.icon="bwi-credit-card",this.setCardIcon();break;case jr.O.Identity:this.icon="bwi-id-card"}}setLoginIcon(){if(this.cipher.login.uri){let t=this.cipher.login.uri,n=!1;if(0===t.indexOf("androidapp://")?(this.icon="bwi-android",this.image=null):0===t.indexOf("iosapp://")?(this.icon="bwi-apple",this.image=null):this.imageEnabled&&-1===t.indexOf("://")&&t.indexOf(".")>-1?(t="http://"+t,n=!0):this.imageEnabled&&(n=0===t.indexOf("http")&&t.indexOf(".")>-1),this.imageEnabled&&n)try{this.image=this.iconsUrl+"/"+N.c.getHostname(t)+"/icon.png",this.fallbackImage="images/bwi-globe.png"}catch(e){}}else this.image=null}setCardIcon(){const e=this.cipher.card.brand;this.imageEnabled&&e in Ga&&(this.icon="credit-card-icon "+Ga[e])}}qa.ɵfac=function(e){return new(e||qa)(o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](P.b))},qa.ɵcmp=o["ɵɵdefineComponent"]({type:qa,selectors:[["app-vault-icon"]],inputs:{cipher:"cipher"},features:[o["ɵɵNgOnChangesFeature"]],decls:7,vars:2,consts:[["aria-hidden","true",1,"icon"],["alt","","decoding","async","loading","lazy",3,"src","appFallbackSrc",4,"ngIf"],[3,"class",4,"ngIf"],["alt","","decoding","async","loading","lazy",3,"src","appFallbackSrc"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,La,1,2,"img",1),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,Ka,1,3,"i",2),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n")),2&e&&(o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.imageEnabled&&t.image),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.imageEnabled||!t.image))},directives:[B.NgIf,Ha],encapsulation:2});class _a{transform(e,t=25,n=!1,i="..."){return e.length<=t?e:(t-=i.length,n&&e.length>t&&e.indexOf(" ")>0&&(t=e.substring(0,t).lastIndexOf(" ")),e.substring(0,t)+i)}}_a.ɵfac=function(e){return new(e||_a)},_a.ɵpipe=o["ɵɵdefinePipe"]({name:"ellipsis",type:_a,pure:!0});class $a{constructor(e){this.i18nService=e,this.onOrganizationClicked=new o.EventEmitter}ngOnInit(){null!=this.organizationName&&""!==this.organizationName||(this.organizationName=this.i18nService.t("me"),this.color=this.stringToColor(this.profileName.toUpperCase())),null==this.color&&(this.color=this.stringToColor(this.organizationName.toUpperCase())),this.textColor=this.pickTextColorBasedOnBgColor()}stringToColor(e){let t=0;for(let i=0;i<e.length;i++)t=e.charCodeAt(i)+((t<<5)-t);let n="#";for(let i=0;i<3;i++){n+=("00"+(t>>8*i&255).toString(16)).substr(-2)}return n}pickTextColorBasedOnBgColor(){const e="#"===this.color.charAt(0)?this.color.substring(1,7):this.color;return.299*parseInt(e.substring(0,2),16)+.587*parseInt(e.substring(2,4),16)+.114*parseInt(e.substring(4,6),16)>186?"black !important":"white !important"}emitOnOrganizationClicked(){this.onOrganizationClicked.emit()}}$a.ɵfac=function(e){return new(e||$a)(o["ɵɵdirectiveInject"](k.D))},$a.ɵcmp=o["ɵɵdefineComponent"]({type:$a,selectors:[["app-org-badge"]],inputs:{organizationName:"organizationName",profileName:"profileName"},outputs:{onOrganizationClicked:"onOrganizationClicked"},decls:4,vars:9,consts:[["bitBadge","",3,"appA11yTitle","click"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"button",0),o["ɵɵlistener"]("click",(function(){return t.emitOnOrganizationClicked()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"ellipsis"),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n")),2&e&&(o["ɵɵstyleProp"]("color",t.textColor)("background-color",t.color),o["ɵɵpropertyInterpolate"]("appA11yTitle",t.organizationName),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind2"](2,6,t.organizationName,13),"\n"))},directives:[Po.l,pe],pipes:[_a],encapsulation:2});class Wa{transform(e,t){var n;return null===(n=t.find((t=>t.id===e)))||void 0===n?void 0:n.name}}Wa.ɵfac=function(e){return new(e||Wa)},Wa.ɵpipe=o["ɵɵdefinePipe"]({name:"orgNameFromId",type:Wa,pure:!0});var Qa=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Ya(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",24),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",23),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"attachmentsNeedFix")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"attachmentsNeedFix")))}function Za(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",22),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n            "),o["ɵɵelementStart"](5,"span",23),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵtemplate"](9,Ya,9,6,"ng-container",0),o["ɵɵtext"](10,"\n          "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"attachments")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,5,"attachments")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.showFixOldAttachments(e))}}function Ja(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"td",25),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"app-org-badge",26),o["ɵɵlistener"]("onOrganizationClicked",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).onOrganizationClicked(t.organizationId)})),o["ɵɵpipe"](3,"orgNameFromId"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("organizationName",o["ɵɵpipeBind2"](3,2,e.organizationId,t.organizations)),o["ɵɵpropertyInterpolate"]("profileName",t.profileName)}}function Xa(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2).$implicit;return o["ɵɵnextContext"](3).copy(t,t.login.password,"password","Password")})),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"i",27),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](4,1,"copyPassword"),"\n              "))}function es(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2).$implicit;return o["ɵɵnextContext"](3).copy(t,t.login.totp,"verificationCodeTotp","TOTP")})),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"i",27),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](4,1,"copyVerificationCode"),"\n              "))}function ts(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2).$implicit;return o["ɵɵnextContext"](3).launch(t.login.launchUri)})),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"i",28),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](4,1,"launch"),"\n              "))}function ns(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).copy(t,t.login.username,"username","Username")})),o["ɵɵtext"](3,"\n                "),o["ɵɵelement"](4,"i",27),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵtemplate"](8,Xa,5,3,"button",19),o["ɵɵtext"](9,"\n              "),o["ɵɵtemplate"](10,es,5,3,"button",19),o["ɵɵtext"](11,"\n              "),o["ɵɵtemplate"](12,ts,5,3,"button",19),o["ɵɵtext"](13,"\n            "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](3);o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](6,4,"copyUsername"),"\n              "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.viewPassword),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.displayTotpCopyButton(e)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.login.canLaunch)}}function is(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).clone(t)})),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",29),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,1,"clone"),"\n            "))}function rs(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).share(t)})),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",30),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,1,"moveToOrganization"),"\n            "))}function os(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).collections(t)})),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",31),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,1,"collections"),"\n            "))}function as(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).events(t)})),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",32),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,1,"eventLogs"),"\n            "))}function ss(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).restore(t)})),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",33),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,1,"restore"),"\n            "))}const ls=function(){return[]},ds=function(e){return{itemId:e}};function cs(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"td",5),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).checkCipher(t)})),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"input",6),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.checked=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n        "),o["ɵɵelementStart"](7,"td",7),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).checkCipher(t)})),o["ɵɵtext"](8,"\n          "),o["ɵɵelement"](9,"app-vault-icon",8),o["ɵɵtext"](10,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"td",9),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).checkCipher(t)})),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"a",10),o["ɵɵpipe"](15,"i18n"),o["ɵɵtext"](16),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n          "),o["ɵɵtemplate"](18,Za,11,7,"ng-container",0),o["ɵɵtext"](19,"\n          "),o["ɵɵelement"](20,"br"),o["ɵɵtext"](21,"\n          "),o["ɵɵelementStart"](22,"small",11),o["ɵɵtext"](23),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n        "),o["ɵɵtemplate"](26,Ja,6,5,"td",12),o["ɵɵtext"](27,"\n        "),o["ɵɵelementStart"](28,"td",13),o["ɵɵtext"](29,"\n          "),o["ɵɵelementStart"](30,"button",14),o["ɵɵpipe"](31,"i18n"),o["ɵɵtext"](32,"\n            "),o["ɵɵelement"](33,"i",15),o["ɵɵtext"](34,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n          "),o["ɵɵelementStart"](36,"bit-menu",null,16),o["ɵɵtext"](38,"\n            "),o["ɵɵtemplate"](39,ns,14,6,"ng-container",0),o["ɵɵtext"](40,"\n            "),o["ɵɵelementStart"](41,"button",17),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).attachments(t)})),o["ɵɵtext"](42,"\n              "),o["ɵɵelement"](43,"i",18),o["ɵɵtext"](44),o["ɵɵpipe"](45,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n            "),o["ɵɵtemplate"](47,is,5,3,"button",19),o["ɵɵtext"](48,"\n            "),o["ɵɵtemplate"](49,rs,5,3,"button",19),o["ɵɵtext"](50,"\n            "),o["ɵɵtemplate"](51,os,5,3,"button",19),o["ɵɵtext"](52,"\n            "),o["ɵɵtemplate"](53,as,5,3,"button",19),o["ɵɵtext"](54,"\n            "),o["ɵɵtemplate"](55,ss,5,3,"button",19),o["ɵɵtext"](56,"\n            "),o["ɵɵelementStart"](57,"button",17),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).delete(t)})),o["ɵɵtext"](58,"\n              "),o["ɵɵelementStart"](59,"span",20),o["ɵɵtext"](60,"\n                "),o["ɵɵelement"](61,"i",21),o["ɵɵtext"](62),o["ɵɵpipe"](63,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵreference"](37),i=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngModel",e.checked),o["ɵɵadvance"](5),o["ɵɵproperty"]("cipher",e),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](15,19,"editItem")),o["ɵɵproperty"]("routerLink",o["ɵɵpureFunction0"](27,ls))("queryParams",o["ɵɵpureFunction1"](28,ds,e.id)),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAttachments),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.subTitle),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",i.organizations.length>0&&!i.organization),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](31,21,"options")),o["ɵɵproperty"]("bitMenuTriggerFor",n),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngIf",e.type===i.cipherType.Login&&!e.isDeleted),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](45,23,"attachments"),"\n            "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",(!i.organization&&!e.organizationId||i.organization)&&!e.isDeleted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!i.organization&&!e.organizationId&&!e.isDeleted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.organizationId&&!e.isDeleted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.organizationId&&i.accessEvents),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.isDeleted),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](63,25,e.isDeleted?"permanentlyDelete":"delete"),"\n              ")}}function ps(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"table",3),o["ɵɵlistener"]("scrolled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).loadMore()})),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n      "),o["ɵɵtemplate"](4,cs,68,30,"tr",4),o["ɵɵtext"](5,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().ngIf,t=o["ɵɵnextContext"]();o["ɵɵproperty"]("infiniteScrollDistance",1)("infiniteScrollDisabled",!t.isPaging()),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e)}}function us(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",35),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n      "),o["ɵɵelementStart"](5,"span",23),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function ms(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",37),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](4).addCipher()})),o["ɵɵtext"](1,"\n        "),o["ɵɵelement"](2,"i",38),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](4,1,"addItem"),"\n      "))}function hs(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n      "),o["ɵɵtemplate"](6,ms,5,3,"button",36),o["ɵɵtext"](7,"\n    "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,2,"noItemsInList")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.showAddNew)}}function vs(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",34),o["ɵɵtext"](1,"\n    "),o["ɵɵtemplate"](2,us,9,6,"ng-container",0),o["ɵɵtext"](3,"\n    "),o["ɵɵtemplate"](4,hs,8,4,"ng-container",0),o["ɵɵtext"](5,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.loaded),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.loaded)}}function gs(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,ps,7,3,"table",1),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,vs,6,2,"div",2),o["ɵɵtext"](5,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=t.ngIf;o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.length)}}class fs extends Va{constructor(e,t,n,i,r,a,s,l,d,c,p){super(e),this.i18nService=t,this.platformUtilsService=n,this.cipherService=i,this.eventService=r,this.totpService=a,this.stateService=s,this.passwordRepromptService=l,this.logService=d,this.organizationService=c,this.tokenService=p,this.showAddNew=!0,this.onAttachmentsClicked=new o.EventEmitter,this.onShareClicked=new o.EventEmitter,this.onCollectionsClicked=new o.EventEmitter,this.onCloneClicked=new o.EventEmitter,this.onOrganzationBadgeClicked=new o.EventEmitter,this.pagedCiphers=[],this.pageSize=200,this.cipherType=jr.O,this.userHasPremiumAccess=!1,this.organizations=[],this.didScroll=!1,this.pagedCiphersCount=0,this.refreshing=!1}ngOnDestroy(){this.selectAll(!1)}load(e=null,t=!1){const n=Object.create(null,{load:{get:()=>super.load}});return Qa(this,void 0,void 0,(function*(){yield n.load.call(this,e,t),this.profileName=yield this.tokenService.getName(),this.organizations=yield this.organizationService.getAll(),this.userHasPremiumAccess=yield this.stateService.getCanAccessPremium()}))}loadMore(){if(this.ciphers.length<=this.pageSize)return;const e=this.pagedCiphers.length;let t=this.pageSize;this.refreshing&&0===e&&this.pagedCiphersCount>this.pageSize&&(t=this.pagedCiphersCount),this.ciphers.length>e&&(this.pagedCiphers=this.pagedCiphers.concat(this.ciphers.slice(e,e+t))),this.pagedCiphersCount=this.pagedCiphers.length,this.didScroll=this.pagedCiphers.length>this.pageSize}refresh(){return Qa(this,void 0,void 0,(function*(){try{this.refreshing=!0,yield this.reload(this.filter,this.deleted)}finally{this.refreshing=!1}}))}isPaging(){const e=this.isSearching();return e&&this.didScroll&&this.resetPaging(),!e&&this.ciphers.length>this.pageSize}resetPaging(){return Qa(this,void 0,void 0,(function*(){this.pagedCiphers=[],this.loadMore()}))}doSearch(e){return Qa(this,void 0,void 0,(function*(){this.ciphers=yield this.searchService.searchCiphers(this.searchText,[this.filter,this.deletedFilter],e),this.resetPaging()}))}launch(e){this.platformUtilsService.launchUri(e)}attachments(e){return Qa(this,void 0,void 0,(function*(){(yield this.repromptCipher(e))&&this.onAttachmentsClicked.emit(e)}))}share(e){return Qa(this,void 0,void 0,(function*(){(yield this.repromptCipher(e))&&this.onShareClicked.emit(e)}))}collections(e){this.onCollectionsClicked.emit(e)}clone(e){return Qa(this,void 0,void 0,(function*(){(yield this.repromptCipher(e))&&this.onCloneClicked.emit(e)}))}delete(e){return Qa(this,void 0,void 0,(function*(){if(!(yield this.repromptCipher(e)))return;if(null!=this.actionPromise)return;const t=e.isDeleted;if(!(yield this.platformUtilsService.showDialog(this.i18nService.t(t?"permanentlyDeleteItemConfirmation":"deleteItemConfirmation"),this.i18nService.t(t?"permanentlyDeleteItem":"deleteItem"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{this.actionPromise=this.deleteCipher(e.id,t),yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t(t?"permanentlyDeletedItem":"deletedItem")),this.refresh()}catch(n){this.logService.error(n)}this.actionPromise=null}))}restore(e){return Qa(this,void 0,void 0,(function*(){if(null!=this.actionPromise||!e.isDeleted)return;if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("restoreItemConfirmation"),this.i18nService.t("restoreItem"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{this.actionPromise=this.cipherService.restoreWithServer(e.id),yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("restoredItem")),this.refresh()}catch(t){this.logService.error(t)}this.actionPromise=null}))}copy(e,t,n,i){return Qa(this,void 0,void 0,(function*(){this.passwordRepromptService.protectedFields().includes(i)&&!(yield this.repromptCipher(e))||null==t||"TOTP"===i&&!this.displayTotpCopyButton(e)||(t===e.login.totp&&(t=yield this.totpService.getCode(t)),e.viewPassword&&(this.platformUtilsService.copyToClipboard(t,{window}),this.platformUtilsService.showToast("info",null,this.i18nService.t("valueCopied",this.i18nService.t(n))),"password"===n||"verificationCodeTotp"===n?this.eventService.collect(Lr.t.Cipher_ClientToggledHiddenFieldVisible,e.id):"securityCode"===n&&this.eventService.collect(Lr.t.Cipher_ClientCopiedCardCode,e.id)))}))}selectAll(e){e&&this.selectAll(!1);const t=e&&this.ciphers.length>500?500:this.ciphers.length;for(let n=0;n<t;n++)this.checkCipher(this.ciphers[n],e)}checkCipher(e,t){e.checked=null==t?!e.checked:t}getSelected(){return null==this.ciphers?[]:this.ciphers.filter((e=>!!e.checked))}getSelectedIds(){return this.getSelected().map((e=>e.id))}displayTotpCopyButton(e){var t,n;return null!==(n=null===(t=null==e?void 0:e.login)||void 0===t?void 0:t.hasTotp)&&void 0!==n&&n&&(e.organizationUseTotp||this.userHasPremiumAccess)}selectCipher(e){const t=Object.create(null,{selectCipher:{get:()=>super.selectCipher}});return Qa(this,void 0,void 0,(function*(){(yield this.repromptCipher(e))&&t.selectCipher.call(this,e)}))}onOrganizationClicked(e){this.onOrganzationBadgeClicked.emit(e)}deleteCipher(e,t){return t?this.cipherService.deleteWithServer(e):this.cipherService.softDeleteWithServer(e)}showFixOldAttachments(e){return e.hasOldAttachments&&null==e.organizationId}repromptCipher(e){return Qa(this,void 0,void 0,(function*(){return e.reprompt===Hr.N.None||(yield this.passwordRepromptService.showPasswordPrompt())}))}}fs.ɵfac=function(e){return new(e||fs)(o["ɵɵdirectiveInject"](za),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](Xr.P),o["ɵɵdirectiveInject"](io),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](eo),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](bi))},fs.ɵcmp=o["ɵɵdefineComponent"]({type:fs,selectors:[["app-vault-ciphers"]],inputs:{showAddNew:"showAddNew"},outputs:{onAttachmentsClicked:"onAttachmentsClicked",onShareClicked:"onShareClicked",onCollectionsClicked:"onCollectionsClicked",onCloneClicked:"onCloneClicked",onOrganzationBadgeClicked:"onOrganzationBadgeClicked"},features:[o["ɵɵInheritDefinitionFeature"]],decls:2,vars:1,consts:[[4,"ngIf"],["class","table table-hover table-list table-ciphers","infiniteScroll","",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled",4,"ngIf"],["class","no-items",4,"ngIf"],["infiniteScroll","",1,"table","table-hover","table-list","table-ciphers",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled"],[4,"ngFor","ngForOf"],[1,"table-list-checkbox",3,"click"],["type","checkbox","appStopProp","",3,"ngModel","ngModelChange"],[1,"table-list-icon",3,"click"],[3,"cipher"],[1,"reduced-lh","wrap",3,"click"],["appStopProp","","queryParamsHandling","merge",3,"routerLink","queryParams","title"],["appStopProp",""],["class","tw-w-28",4,"ngIf"],[1,"table-list-options"],["type","button",1,"tw-border-none","tw-bg-transparent","tw-text-main",3,"bitMenuTriggerFor","appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-ellipsis-v","bwi-lg"],["cipherOptions",""],["bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-paperclip"],["bitMenuItem","",3,"click",4,"ngIf"],[1,"tw-text-danger"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-trash"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"],[1,"sr-only"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-exclamation-triangle","text-warning",3,"title"],[1,"tw-w-28"],[3,"organizationName","profileName","onOrganizationClicked"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-clone"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-share-square"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-files"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-arrow-circle-right"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-collection"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-file-text"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-undo"],[1,"no-items"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],["class","btn btn-outline-primary",3,"click",4,"ngIf"],[1,"btn","btn-outline-primary",3,"click"],[1,"bwi","bwi-plus","bwi-fw"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,gs,6,2,"ng-container",0),o["ɵɵtext"](1,"\n")),2&e&&o["ɵɵproperty"]("ngIf",t.isPaging()?t.pagedCiphers:t.ciphers)},directives:[B.NgIf,u.InfiniteScrollDirective,B.NgForOf,d.CheckboxControlValueAccessor,Oi,d.NgControlStatus,d.NgModel,qa,p.RouterLinkWithHref,Ei.t,pe,ki.M,Ai.e,$a],pipes:[M.C,Wa],encapsulation:2});var xs=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class ys{constructor(e,t,n,i,r){this.collectionService=e,this.platformUtilsService=t,this.i18nService=n,this.cipherService=i,this.logService=r,this.allowSelectNone=!1,this.onSavedCollections=new o.EventEmitter,this.collections=[]}ngOnInit(){return xs(this,void 0,void 0,(function*(){yield this.load()}))}load(){return xs(this,void 0,void 0,(function*(){this.cipherDomain=yield this.loadCipher(),this.collectionIds=this.loadCipherCollections(),this.cipher=yield this.cipherDomain.decrypt(),this.collections=yield this.loadCollections(),this.collections.forEach((e=>e.checked=!1)),null!=this.collectionIds&&this.collections.forEach((e=>{e.checked=null!=this.collectionIds&&this.collectionIds.indexOf(e.id)>-1}))}))}submit(){return xs(this,void 0,void 0,(function*(){const e=this.collections.filter((e=>!!e.checked)).map((e=>e.id));if(this.allowSelectNone||0!==e.length){this.cipherDomain.collectionIds=e;try{this.formPromise=this.saveCollections(),yield this.formPromise,this.onSavedCollections.emit(),this.platformUtilsService.showToast("success",null,this.i18nService.t("editedItem"))}catch(t){this.logService.error(t)}}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("selectOneCollection"))}))}loadCipher(){return this.cipherService.get(this.cipherId)}loadCipherCollections(){return this.cipherDomain.collectionIds}loadCollections(){return xs(this,void 0,void 0,(function*(){return(yield this.collectionService.getAllDecrypted()).filter((e=>!e.readOnly&&e.organizationId===this.cipher.organizationId))}))}saveCollections(){return this.cipherService.saveCollectionsWithServer(this.cipherDomain)}}function Ss(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.cipher.name)}}function bs(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",17),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"button",18),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().selectAll(!0)})),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"button",18),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().selectAll(!1)})),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,2,"selectAll"),"\n            "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](8,4,"unselectAll"),"\n            "))}function ws(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"noCollectionsInList"),"\n        "))}function Is(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr",21),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).check(t)})),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",22),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"input",23),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.checked=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n              "),o["ɵɵelementStart"](7,"td"),o["ɵɵtext"](8),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate1"]("name","Collection[",n,"].Checked"),o["ɵɵproperty"]("ngModel",e.checked),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n                ",e.name,"\n              ")}}function Cs(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",19),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n            "),o["ɵɵtemplate"](4,Is,10,3,"tr",20),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.collections)}}ys.ɵfac=function(e){return new(e||ys)(o["ɵɵdirectiveInject"](Jr.a),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](L.$))},ys.ɵdir=o["ɵɵdefineDirective"]({type:ys,inputs:{cipherId:"cipherId",allowSelectNone:"allowSelectNone"},outputs:{onSavedCollections:"onSavedCollections"}});class Es extends ys{constructor(e,t,n,i,r){super(e,t,n,i,r)}ngOnDestroy(){this.selectAll(!1)}check(e,t){e.checked=null==t?!e.checked:t}selectAll(e){this.collections.forEach((t=>this.check(t,e)))}}Es.ɵfac=function(e){return new(e||Es)(o["ɵɵdirectiveInject"](Jr.a),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](L.$))},Es.ɵcmp=o["ɵɵdefineComponent"]({type:Es,selectors:[["app-vault-collections"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:63,vars:27,consts:[["role","dialog","aria-modal","true","aria-labelledby","collectionsTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","collectionsTitle",1,"modal-title"],[4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],[1,"d-flex"],["class","ml-auto d-flex",4,"ngIf"],["class","table table-hover table-list mb-0",4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"ml-auto","d-flex"],["type","button",1,"btn","btn-link","btn-sm","py-0",3,"click"],[1,"table","table-hover","table-list","mb-0"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"table-list-checkbox"],["type","checkbox","appStopProp","",3,"ngModel","name","ngModelChange"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵtemplate"](12,Ss,2,1,"small",6),o["ɵɵtext"](13,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"button",7),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"span",8),o["ɵɵtext"](19,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementStart"](23,"div",9),o["ɵɵtext"](24,"\n        "),o["ɵɵelementStart"](25,"p"),o["ɵɵtext"](26),o["ɵɵpipe"](27,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n        "),o["ɵɵelementStart"](29,"div",10),o["ɵɵtext"](30,"\n          "),o["ɵɵelementStart"](31,"h3"),o["ɵɵtext"](32),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n          "),o["ɵɵtemplate"](35,bs,10,6,"div",11),o["ɵɵtext"](36,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n        "),o["ɵɵtemplate"](38,ws,3,3,"div",6),o["ɵɵtext"](39,"\n        "),o["ɵɵtemplate"](40,Cs,7,1,"table",12),o["ɵɵtext"](41,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n      "),o["ɵɵelementStart"](43,"div",13),o["ɵɵtext"](44,"\n        "),o["ɵɵelementStart"](45,"button",14),o["ɵɵtext"](46,"\n          "),o["ɵɵelement"](47,"i",15),o["ɵɵpipe"](48,"i18n"),o["ɵɵtext"](49,"\n          "),o["ɵɵelementStart"](50,"span"),o["ɵɵtext"](51),o["ɵɵpipe"](52,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n        "),o["ɵɵelementStart"](55,"button",16),o["ɵɵtext"](56),o["ɵɵpipe"](57,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](62,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,13,"collections"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.cipher),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](16,15,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](27,17,"collectionsDesc")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](33,19,"collections")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.collections&&t.collections.length),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.collections||!t.collections.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.collections&&t.collections.length),o["ɵɵadvance"](5),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](48,21,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](52,23,"save")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](57,25,"cancel"),"\n        ")}},directives:[d["ɵNgNoValidate"],d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,pe,B.NgForOf,d.CheckboxControlValueAccessor,Oi,d.NgControlStatus,d.NgModel],pipes:[M.C],encapsulation:2});var ks=n(58255);class Ps{}var As=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Os{constructor(e,t,n,i,r){this.folderService=e,this.folderApiService=t,this.i18nService=n,this.platformUtilsService=i,this.logService=r,this.onSavedFolder=new o.EventEmitter,this.onDeletedFolder=new o.EventEmitter,this.editMode=!1,this.folder=new ks.a}ngOnInit(){return As(this,void 0,void 0,(function*(){yield this.init()}))}submit(){return As(this,void 0,void 0,(function*(){if(null==this.folder.name||""===this.folder.name)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("nameRequired")),!1;try{const e=yield this.folderService.encrypt(this.folder);return this.formPromise=this.folderApiService.save(e),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t(this.editMode?"editedFolder":"addedFolder")),this.onSavedFolder.emit(this.folder),!0}catch(e){this.logService.error(e)}return!1}))}delete(){return As(this,void 0,void 0,(function*(){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("deleteFolderConfirmation"),this.i18nService.t("deleteFolder"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{this.deletePromise=this.folderApiService.delete(this.folder.id),yield this.deletePromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("deletedFolder")),this.onDeletedFolder.emit(this.folder)}catch(e){this.logService.error(e)}return!0}))}init(){return As(this,void 0,void 0,(function*(){if(this.editMode=null!=this.folderId,this.editMode){this.editMode=!0,this.title=this.i18nService.t("editFolder");const e=yield this.folderService.get(this.folderId);this.folder=yield e.decrypt()}else this.title=this.i18nService.t("addFolder")}))}}function Ts(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17,18),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().delete()})),o["ɵɵpipe"](2,"i18n"),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"i",19),o["ɵɵtext"](5,"\n            "),o["ɵɵelement"](6,"i",20),o["ɵɵpipe"](7,"i18n"),o["ɵɵtext"](8,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](2,6,"delete")),o["ɵɵproperty"]("disabled",e.loading)("appApiAction",t.deletePromise),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](7,8,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}Os.ɵfac=function(e){return new(e||Os)(o["ɵɵdirectiveInject"](Rr.s),o["ɵɵdirectiveInject"](Ps),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$))},Os.ɵdir=o["ɵɵdefineDirective"]({type:Os,inputs:{folderId:"folderId"},outputs:{onSavedFolder:"onSavedFolder",onDeletedFolder:"onDeletedFolder"}});class Bs extends Os{constructor(e,t,n,i,r){super(e,t,n,i,r)}}Bs.ɵfac=function(e){return new(e||Bs)(o["ɵɵdirectiveInject"](Rr.s),o["ɵɵdirectiveInject"](Ps),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$))},Bs.ɵcmp=o["ɵɵdefineComponent"]({type:Bs,selectors:[["app-folder-add-edit"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:54,vars:20,consts:[["role","dialog","aria-modal","true","aria-labelledby","folderAddEditTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-sm"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","folderAddEditTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["for","name"],["id","name","type","text","name","Name","required","","appAutofocus","",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"ml-auto"],["type","button","class","btn btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click"],["deleteBtn",""],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-lg","bwi-fw",3,"hidden","title"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"button",6),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"span",7),o["ɵɵtext"](16,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"div",8),o["ɵɵtext"](21,"\n        "),o["ɵɵelementStart"](22,"label",9),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n        "),o["ɵɵelementStart"](26,"input",10),o["ɵɵlistener"]("ngModelChange",(function(e){return t.folder.name=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n      "),o["ɵɵelementStart"](29,"div",11),o["ɵɵtext"](30,"\n        "),o["ɵɵelementStart"](31,"button",12),o["ɵɵtext"](32,"\n          "),o["ɵɵelement"](33,"i",13),o["ɵɵpipe"](34,"i18n"),o["ɵɵtext"](35,"\n          "),o["ɵɵelementStart"](36,"span"),o["ɵɵtext"](37),o["ɵɵpipe"](38,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n        "),o["ɵɵelementStart"](41,"button",14),o["ɵɵtext"](42),o["ɵɵpipe"](43,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n        "),o["ɵɵelementStart"](45,"div",15),o["ɵɵtext"](46,"\n          "),o["ɵɵtemplate"](47,Ts,9,10,"button",16),o["ɵɵtext"](48,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](t.title),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,10,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](24,12,"name")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.folder.name),o["ɵɵadvance"](5),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](34,14,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](38,16,"save")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](43,18,"cancel"),"\n        "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",t.editMode)}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,d.DefaultValueAccessor,d.RequiredValidator,Z.U,d.NgControlStatus,d.NgModel,B.NgIf],pipes:[M.C],encapsulation:2});var Ms=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Ds{constructor(e,t,n,i,r,a){this.collectionService=e,this.platformUtilsService=t,this.i18nService=n,this.cipherService=i,this.logService=r,this.organizationService=a,this.onSharedCipher=new o.EventEmitter,this.collections=[],this.organizations=[],this.writeableCollections=[]}ngOnInit(){return Ms(this,void 0,void 0,(function*(){yield this.load()}))}load(){return Ms(this,void 0,void 0,(function*(){const e=yield this.collectionService.getAllDecrypted();this.writeableCollections=e.map((e=>e)).filter((e=>!e.readOnly));const t=yield this.organizationService.getAll();this.organizations=t.sort(N.c.getSortFunction(this.i18nService,"name")).filter((e=>e.enabled&&e.status===Vr.Confirmed));const n=yield this.cipherService.get(this.cipherId);this.cipher=yield n.decrypt(),null==this.organizationId&&this.organizations.length>0&&(this.organizationId=this.organizations[0].id),this.filterCollections()}))}filterCollections(){this.writeableCollections.forEach((e=>e.checked=!1)),null==this.organizationId||0===this.writeableCollections.length?this.collections=[]:this.collections=this.writeableCollections.filter((e=>e.organizationId===this.organizationId))}submit(){var e,t;return Ms(this,void 0,void 0,(function*(){const n=this.collections.filter((e=>!!e.checked)).map((e=>e.id));if(0===n.length)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("selectOneCollection"));const i=yield this.cipherService.get(this.cipherId),r=yield i.decrypt(),o=null!==(t=null===(e=this.organizations.find((e=>e.id===this.organizationId)))||void 0===e?void 0:e.name)&&void 0!==t?t:this.i18nService.t("organization");try{return this.formPromise=this.cipherService.shareWithServer(r,this.organizationId,n).then((()=>Ms(this,void 0,void 0,(function*(){this.onSharedCipher.emit(),this.platformUtilsService.showToast("success",null,this.i18nService.t("movedItemToOrg",r.name,o))})))),yield this.formPromise,!0}catch(a){this.logService.error(a)}return!1}))}get canSave(){if(null!=this.collections)for(let e=0;e<this.collections.length;e++)if(this.collections[e].checked)return!0;return!1}}function Fs(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.cipher.name)}}function Rs(e,t){1&e&&(o["ɵɵelementStart"](0,"div",14),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](2,1,"noOrganizationsList"),"\n      "))}function Us(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",22),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.id),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function zs(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",23),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"button",24),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).selectAll(!0)})),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"button",24),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).selectAll(!1)})),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,2,"selectAll"),"\n            "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](8,4,"unselectAll"),"\n            "))}function Ns(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"noCollectionsInList"),"\n        "))}function Vs(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr",27),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).check(t)})),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",28),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"input",29),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.checked=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n              "),o["ɵɵelementStart"](7,"td"),o["ɵɵtext"](8),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate1"]("name","Collection[",n,"].Checked"),o["ɵɵproperty"]("ngModel",e.checked),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n                ",e.name,"\n              ")}}function Hs(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",25),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n            "),o["ɵɵtemplate"](4,Vs,10,3,"tr",26),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.collections)}}function js(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",14),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"div",15),o["ɵɵtext"](7,"\n          "),o["ɵɵelementStart"](8,"label",16),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n          "),o["ɵɵelementStart"](12,"select",17),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().organizationId=t}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().filterCollections()})),o["ɵɵtext"](13,"\n            "),o["ɵɵtemplate"](14,Us,2,2,"option",18),o["ɵɵtext"](15,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementStart"](18,"div",19),o["ɵɵtext"](19,"\n          "),o["ɵɵelementStart"](20,"h3"),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n          "),o["ɵɵtemplate"](24,zs,10,6,"div",20),o["ɵɵtext"](25,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵtemplate"](27,Ns,3,3,"div",6),o["ɵɵtext"](28,"\n        "),o["ɵɵtemplate"](29,Hs,7,1,"table",21),o["ɵɵtext"](30,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,8,"moveToOrgDesc")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,10,"organization")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.organizations),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](22,12,"collections")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.collections&&e.collections.length),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.collections||!e.collections.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.collections&&e.collections.length)}}Ds.ɵfac=function(e){return new(e||Ds)(o["ɵɵdirectiveInject"](Jr.a),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Ii.M))},Ds.ɵdir=o["ɵɵdefineDirective"]({type:Ds,inputs:{cipherId:"cipherId",organizationId:"organizationId"},outputs:{onSharedCipher:"onSharedCipher"}});const Ls=function(e){return{loading:e}};function Ks(e,t){if(1&e&&(o["ɵɵelementStart"](0,"button",30),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",31),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](),t=o["ɵɵreference"](5);o["ɵɵproperty"]("disabled",t.loading||!e.canSave)("ngClass",o["ɵɵpureFunction1"](8,Ls,t.loading)),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,4,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,6,"save"))}}function Gs(e,t){1&e&&(o["ɵɵelementStart"](0,"a",32),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"newOrganization"),"\n        "))}class qs extends Ds{constructor(e,t,n,i,r,o){super(e,t,n,i,o,r)}ngOnDestroy(){this.selectAll(!1)}check(e,t){e.checked=null==t?!e.checked:t}selectAll(e){(e?this.collections:this.writeableCollections).forEach((t=>this.check(t,e)))}}qs.ɵfac=function(e){return new(e||qs)(o["ɵɵdirectiveInject"](Jr.a),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](L.$))},qs.ɵcmp=o["ɵɵdefineComponent"]({type:qs,selectors:[["app-vault-share"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:41,vars:15,consts:[["role","dialog","aria-modal","true","aria-labelledby","shareTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","shareTitle",1,"modal-title"],[4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit manual",3,"disabled","ngClass",4,"ngIf"],["href","#","routerLink","/create-organization","class","btn btn-primary",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"modal-body"],[1,"form-group"],["for","organization"],["id","organization","name","OrganizationId",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-flex"],["class","ml-auto d-flex",4,"ngIf"],["class","table table-hover table-list mb-0",4,"ngIf"],[3,"ngValue"],[1,"ml-auto","d-flex"],["type","button",1,"btn","btn-link","btn-sm","py-0",3,"click"],[1,"table","table-hover","table-list","mb-0"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"table-list-checkbox"],["type","checkbox","appStopProp","",3,"ngModel","name","ngModelChange"],["type","submit",1,"btn","btn-primary","btn-submit","manual",3,"disabled","ngClass"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["href","#","routerLink","/create-organization",1,"btn","btn-primary"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵtemplate"](12,Fs,2,1,"small",6),o["ɵɵtext"](13,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"button",7),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"span",8),o["ɵɵtext"](19,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵtemplate"](23,Rs,3,3,"div",9),o["ɵɵtext"](24,"\n      "),o["ɵɵtemplate"](25,js,31,14,"div",9),o["ɵɵtext"](26,"\n      "),o["ɵɵelementStart"](27,"div",10),o["ɵɵtext"](28,"\n        "),o["ɵɵtemplate"](29,Ks,9,10,"button",11),o["ɵɵtext"](30,"\n        "),o["ɵɵtemplate"](31,Gs,3,3,"a",12),o["ɵɵtext"](32,"\n        "),o["ɵɵelementStart"](33,"button",13),o["ɵɵtext"](34),o["ɵɵpipe"](35,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,9,"moveToOrganization"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.cipher),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](16,11,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",!t.organizations||!t.organizations.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.organizations&&t.organizations.length),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.organizations&&t.organizations.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.organizations||!t.organizations.length),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](35,13,"cancel"),"\n        "))},directives:[d["ɵNgNoValidate"],d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,pe,d.SelectControlValueAccessor,d.NgControlStatus,d.NgModel,B.NgForOf,d.NgSelectOption,d["ɵNgSelectMultipleOption"],d.CheckboxControlValueAccessor,Oi,B.NgClass,p.RouterLinkWithHref],pipes:[M.C],encapsulation:2});var _s=n(33652),$s=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Ws{constructor(e){this.vaultFilterService=e,this.activeFilter=new Pr,this.hideFolders=!1,this.hideCollections=!1,this.hideFavorites=!1,this.hideTrash=!1,this.hideOrganizations=!1,this.onFilterChange=new o.EventEmitter,this.onAddFolder=new o.EventEmitter,this.onEditFolder=new o.EventEmitter,this.isLoaded=!1}get displayCollections(){var e;return null!=(null===(e=this.collections)||void 0===e?void 0:e.fullList)&&this.collections.fullList.length>0}ngOnInit(){return $s(this,void 0,void 0,(function*(){this.collapsedFilterNodes=yield this.vaultFilterService.buildCollapsedFilterNodes(),this.organizations=yield this.vaultFilterService.buildOrganizations(),null!=this.organizations&&this.organizations.length>0&&(this.activePersonalOwnershipPolicy=yield this.vaultFilterService.checkForPersonalOwnershipPolicy(),this.activeSingleOrganizationPolicy=yield this.vaultFilterService.checkForSingleOrganizationPolicy()),this.folders$=yield this.vaultFilterService.buildNestedFolders(),this.collections=yield this.initCollections(),this.isLoaded=!0}))}initCollections(){return $s(this,void 0,void 0,(function*(){return yield this.vaultFilterService.buildCollections()}))}toggleFilterNodeCollapseState(e){return $s(this,void 0,void 0,(function*(){this.collapsedFilterNodes.has(e.id)?this.collapsedFilterNodes.delete(e.id):this.collapsedFilterNodes.add(e.id),yield this.vaultFilterService.storeCollapsedFilterNodes(this.collapsedFilterNodes)}))}applyFilter(e){return $s(this,void 0,void 0,(function*(){e.refreshCollectionsAndFolders&&(yield this.reloadCollectionsAndFolders(e),e=yield this.pruneInvalidatedFilterSelections(e)),this.onFilterChange.emit(e)}))}reloadCollectionsAndFolders(e){return $s(this,void 0,void 0,(function*(){this.folders$=yield this.vaultFilterService.buildNestedFolders(e.selectedOrganizationId),this.collections=e.myVaultOnly?null:yield this.vaultFilterService.buildCollections(e.selectedOrganizationId)}))}reloadOrganizations(){return $s(this,void 0,void 0,(function*(){this.organizations=yield this.vaultFilterService.buildOrganizations(),this.activePersonalOwnershipPolicy=yield this.vaultFilterService.checkForPersonalOwnershipPolicy(),this.activeSingleOrganizationPolicy=yield this.vaultFilterService.checkForSingleOrganizationPolicy()}))}addFolder(){this.onAddFolder.emit()}editFolder(e){this.onEditFolder.emit(e)}pruneInvalidatedFilterSelections(e){return $s(this,void 0,void 0,(function*(){return e=yield this.pruneInvalidFolderSelection(e),e=this.pruneInvalidCollectionSelection(e)}))}pruneInvalidFolderSelection(e){var t;return $s(this,void 0,void 0,(function*(){return e.selectedFolder&&!(null===(t=yield(0,Or.z)(this.folders$))||void 0===t?void 0:t.hasId(e.selectedFolderId))&&(e.selectedFolder=!1,e.selectedFolderId=null),e}))}pruneInvalidCollectionSelection(e){var t;return(e.myVaultOnly||e.selectedCollection&&null!=e.selectedCollectionId&&!(null===(t=this.collections)||void 0===t?void 0:t.hasId(e.selectedCollectionId)))&&(e.selectedCollection=!1,e.selectedCollectionId=null),e}}Ws.ɵfac=function(e){return new(e||Ws)(o["ɵɵdirectiveInject"](_s.n))},Ws.ɵdir=o["ɵɵdefineDirective"]({type:Ws,inputs:{activeFilter:"activeFilter",hideFolders:"hideFolders",hideCollections:"hideCollections",hideFavorites:"hideFavorites",hideTrash:"hideTrash",hideOrganizations:"hideOrganizations"},outputs:{onFilterChange:"onFilterChange",onAddFolder:"onAddFolder",onEditFolder:"onEditFolder"}});var Qs,Ys=n(18126),Zs=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Js{constructor(){this.hide=!1,this.onNodeCollapseStateChange=new o.EventEmitter,this.onFilterChange=new o.EventEmitter,this.organizationGrouping={id:"vaults",name:"allVaults"}}get displayMode(){let e="organizationMember";return null==this.organizations||this.organizations.length<1?e="noOrganizations":this.activePersonalOwnershipPolicy&&!this.activeSingleOrganizationPolicy?e="personalOwnershipPolicy":!this.activePersonalOwnershipPolicy&&this.activeSingleOrganizationPolicy?e="singleOrganizationPolicy":this.activePersonalOwnershipPolicy&&this.activeSingleOrganizationPolicy&&(e="singleOrganizationAndPersonalOwnershipPolicies"),e}get hasActiveFilter(){return this.activeFilter.myVaultOnly||null!=this.activeFilter.selectedOrganizationId}applyOrganizationFilter(e){return Zs(this,void 0,void 0,(function*(){this.activeFilter.selectedOrganizationId=e.id,this.activeFilter.myVaultOnly=!1,this.activeFilter.refreshCollectionsAndFolders=!0,this.applyFilter(this.activeFilter)}))}applyMyVaultFilter(){return Zs(this,void 0,void 0,(function*(){this.activeFilter.selectedOrganizationId=null,this.activeFilter.myVaultOnly=!0,this.activeFilter.refreshCollectionsAndFolders=!0,this.applyFilter(this.activeFilter)}))}clearFilter(){this.activeFilter.myVaultOnly=!1,this.activeFilter.selectedOrganizationId=null,this.applyFilter(new Pr(this.activeFilter))}applyFilter(e){this.onFilterChange.emit(e)}toggleCollapse(){return Zs(this,void 0,void 0,(function*(){this.onNodeCollapseStateChange.emit(this.organizationGrouping)}))}get isCollapsed(){return this.collapsedFilterNodes.has(this.organizationGrouping.id)}}Js.ɵfac=function(e){return new(e||Js)},Js.ɵdir=o["ɵɵdefineDirective"]({type:Js,inputs:{hide:"hide",collapsedFilterNodes:"collapsedFilterNodes",organizations:"organizations",activeFilter:"activeFilter",activePersonalOwnershipPolicy:"activePersonalOwnershipPolicy",activeSingleOrganizationPolicy:"activeSingleOrganizationPolicy"},outputs:{onNodeCollapseStateChange:"onNodeCollapseStateChange",onFilterChange:"onFilterChange"}}),function(e){e[e.Owner=0]="Owner",e[e.Admin=1]="Admin",e[e.User=2]="User",e[e.Manager=3]="Manager",e[e.Custom=4]="Custom"}(Qs||(Qs={}));class Xs{constructor(e){null!=e&&(this.id=e.id,this.name=e.name,this.status=e.status,this.type=e.type,this.enabled=e.enabled,this.usePolicies=e.usePolicies,this.useGroups=e.useGroups,this.useDirectory=e.useDirectory,this.useEvents=e.useEvents,this.useTotp=e.useTotp,this.use2fa=e.use2fa,this.useApi=e.useApi,this.useSso=e.useSso,this.useKeyConnector=e.useKeyConnector,this.useResetPassword=e.useResetPassword,this.selfHost=e.selfHost,this.usersGetPremium=e.usersGetPremium,this.seats=e.seats,this.maxCollections=e.maxCollections,this.maxStorageGb=e.maxStorageGb,this.ssoBound=e.ssoBound,this.identifier=e.identifier,this.permissions=e.permissions,this.resetPasswordEnrolled=e.resetPasswordEnrolled,this.userId=e.userId,this.hasPublicAndPrivateKeys=e.hasPublicAndPrivateKeys,this.providerId=e.providerId,this.providerName=e.providerName,this.isProviderUser=e.isProviderUser,this.familySponsorshipFriendlyName=e.familySponsorshipFriendlyName,this.familySponsorshipAvailable=e.familySponsorshipAvailable,this.planProductType=e.planProductType,this.keyConnectorEnabled=e.keyConnectorEnabled,this.keyConnectorUrl=e.keyConnectorUrl,this.familySponsorshipLastSyncDate=e.familySponsorshipLastSyncDate,this.familySponsorshipValidUntil=e.familySponsorshipValidUntil,this.familySponsorshipToDelete=e.familySponsorshipToDelete)}get canAccess(){return this.type===Qs.Owner||this.enabled&&this.status===Vr.Confirmed}get isManager(){return this.type===Qs.Manager||this.type===Qs.Owner||this.type===Qs.Admin}get isAdmin(){return this.type===Qs.Owner||this.type===Qs.Admin}get isOwner(){return this.type===Qs.Owner||this.isProviderUser}get canAccessEventLogs(){return this.isAdmin||this.permissions.accessEventLogs}get canAccessImportExport(){return this.isAdmin||this.permissions.accessImportExport}get canAccessReports(){return this.isAdmin||this.permissions.accessReports}get canCreateNewCollections(){var e;return this.isManager||(null!==(e=this.permissions.createNewCollections)&&void 0!==e?e:this.permissions.manageAllCollections)}get canEditAnyCollection(){var e;return this.isAdmin||(null!==(e=this.permissions.editAnyCollection)&&void 0!==e?e:this.permissions.manageAllCollections)}get canDeleteAnyCollection(){var e;return this.isAdmin||(null!==(e=this.permissions.deleteAnyCollection)&&void 0!==e?e:this.permissions.manageAllCollections)}get canViewAllCollections(){return this.canCreateNewCollections||this.canEditAnyCollection||this.canDeleteAnyCollection}get canEditAssignedCollections(){var e;return this.isManager||(null!==(e=this.permissions.editAssignedCollections)&&void 0!==e?e:this.permissions.manageAssignedCollections)}get canDeleteAssignedCollections(){var e;return this.isManager||(null!==(e=this.permissions.deleteAssignedCollections)&&void 0!==e?e:this.permissions.manageAssignedCollections)}get canViewAssignedCollections(){return this.canDeleteAssignedCollections||this.canEditAssignedCollections}get canManageGroups(){return this.isAdmin||this.permissions.manageGroups}get canManageSso(){return this.isAdmin||this.permissions.manageSso}get canManagePolicies(){return this.isAdmin||this.permissions.managePolicies}get canManageUsers(){return this.isAdmin||this.permissions.manageUsers}get canManageUsersPassword(){return this.isAdmin||this.permissions.manageResetPassword}get isExemptFromPolicies(){return this.canManagePolicies}hasAnyPermission(e){return(e.includes(xi.P.AccessEventLogs)&&this.canAccessEventLogs||e.includes(xi.P.AccessImportExport)&&this.canAccessImportExport||e.includes(xi.P.AccessReports)&&this.canAccessReports||e.includes(xi.P.CreateNewCollections)&&this.canCreateNewCollections||e.includes(xi.P.EditAnyCollection)&&this.canEditAnyCollection||e.includes(xi.P.DeleteAnyCollection)&&this.canDeleteAnyCollection||e.includes(xi.P.EditAssignedCollections)&&this.canEditAssignedCollections||e.includes(xi.P.DeleteAssignedCollections)&&this.canDeleteAssignedCollections||e.includes(xi.P.ManageGroups)&&this.canManageGroups||e.includes(xi.P.ManageOrganization)&&this.isOwner||e.includes(xi.P.ManagePolicies)&&this.canManagePolicies||e.includes(xi.P.ManageUsers)&&this.canManageUsers||e.includes(xi.P.ManageUsersPassword)&&this.canManageUsersPassword||e.includes(xi.P.ManageSso)&&this.canManageSso||e.includes(xi.P.ManageBilling)&&this.canManageBilling)&&(this.enabled||this.isOwner)}get canManageBilling(){return this.isOwner&&(this.isProviderUser||!this.hasProvider)}get hasProvider(){return null!=this.providerId||null!=this.providerName}}var el=n(73484),tl=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class nl{constructor(e,t,n,i,r,o,a,s,l){this.userVerificationService=e,this.apiService=t,this.platformUtilsService=n,this.i18nService=i,this.cryptoService=r,this.syncService=o,this.logService=a,this.modalRef=s,this.organization=l.data.organization}submit(){return tl(this,void 0,void 0,(function*(){let e="withdrawPasswordResetSuccess";this.formPromise=this.userVerificationService.buildRequest(this.verification,Lt).then((t=>tl(this,void 0,void 0,(function*(){let n=null;const i=yield this.apiService.getOrganizationKeys(this.organization.id);if(null==i)throw new Error(this.i18nService.t("resetPasswordOrgKeysError"));const r=N.c.fromB64ToArray(i.publicKey),o=yield this.cryptoService.getEncKey();n=(yield this.cryptoService.rsaEncrypt(o.key,r.buffer)).encryptedString,e="enrollPasswordResetSuccess",t.resetPasswordKey=n,yield this.apiService.putOrganizationUserResetPasswordEnrollment(this.organization.id,this.organization.userId,t),yield this.syncService.fullSync(!0)}))));try{yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t(e)),this.modalRef.close()}catch(t){this.logService.error(t)}}))}}nl.ɵfac=function(e){return new(e||nl)(o["ɵɵdirectiveInject"](Yn.i),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](yn),o["ɵɵdirectiveInject"](En))},nl.ɵcmp=o["ɵɵdefineComponent"]({type:nl,selectors:[["app-enroll-master-password-reset"]],decls:49,vars:21,consts:[["role","dialog","aria-modal","true","aria-labelledby","enrollMasterPasswordResetTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","enrollMasterPasswordResetTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","warning"],["name","secret",3,"ngModel","ngModelChange"],[1,"modal-footer"],[3,"loading"],["bitButton","","buttonType","secondary","type","button","data-dismiss","modal",3,"appA11yTitle"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"button",6),o["ɵɵpipe"](14,"i18n"),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"span",7),o["ɵɵtext"](17,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementStart"](21,"div",8),o["ɵɵtext"](22,"\n        "),o["ɵɵelementStart"](23,"app-callout",9),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵelementStart"](27,"app-user-verification",10),o["ɵɵlistener"]("ngModelChange",(function(e){return t.verification=e})),o["ɵɵtext"](28," "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n      "),o["ɵɵelementStart"](31,"div",11),o["ɵɵtext"](32,"\n        "),o["ɵɵelementStart"](33,"bit-submit-button",12),o["ɵɵtext"](34),o["ɵɵpipe"](35,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n        "),o["ɵɵelementStart"](37,"button",13),o["ɵɵpipe"](38,"i18n"),o["ɵɵtext"](39,"\n          "),o["ɵɵelementStart"](40,"span"),o["ɵɵtext"](41),o["ɵɵpipe"](42,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,9,"enrollPasswordReset"),"\n        "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](14,11,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](25,13,"resetPasswordEnrollmentWarning"),"\n        "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.verification),o["ɵɵadvance"](6),o["ɵɵproperty"]("loading",e.loading),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](35,15,"submit"),"\n        "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](38,17,"close")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](42,19,"cancel"),"\n          ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,Pe.O,el.W,d.NgControlStatus,d.NgModel,at,et.H],pipes:[M.C],encapsulation:2});var il=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class rl extends tn{constructor(e,t,n,i,r,o,a,s,l,d,c){super(i,r,t,o,l,e,n,a,d,s,c),this.returnUri="/settings/organizations",this.returnUri="/settings/organizations",this.redirectUri=window.location.origin+"/sso-connector.html",this.clientId="web"}ngAfterContentInit(){return il(this,void 0,void 0,(function*(){this.identifier=this.organization.identifier}))}}rl.ɵfac=function(e){return new(e||rl)(o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](h),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](we),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](L.$))},rl.ɵcmp=o["ɵɵdefineComponent"]({type:rl,selectors:[["app-link-sso"]],inputs:{organization:"organization"},features:[o["ɵɵInheritDefinitionFeature"]],decls:6,vars:3,consts:[["href","#","appStopClick","",1,"dropdown-item",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-link"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"a",0),o["ɵɵlistener"]("click",(function(){return t.submit(t.returnUri,!0)})),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",1),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](4,1,"linkSso"),"\n"))},directives:[Tn],pipes:[M.C],encapsulation:2});var ol=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function al(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",2),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",3),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function sl(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",8),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2);return t.toggleResetPasswordEnrollment(t.organization)})),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",9),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,1,"enrollPasswordReset"),"\n  "))}function ll(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",8),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2);return t.toggleResetPasswordEnrollment(t.organization)})),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",10),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,1,"withdrawPasswordReset"),"\n  "))}function dl(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",8),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](3);return t.unlinkSso(t.organization)})),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",13),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](4,1,"unlinkSso"),"\n    "))}function cl(e,t){if(1&e&&(o["ɵɵtext"](0,"\n      "),o["ɵɵelementStart"](1,"app-link-sso",14),o["ɵɵtext"](2," "),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n    ")),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](1),o["ɵɵproperty"]("organization",e.organization)}}function pl(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵtemplate"](2,dl,5,3,"button",11),o["ɵɵtext"](3,"\n    "),o["ɵɵtemplate"](4,cl,4,1,"ng-template",null,12,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](6,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵreference"](5),t=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.organization.ssoBound)("ngIfElse",e)}}function ul(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",4),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,sl,5,3,"button",5),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,ll,5,3,"button",5),o["ɵɵtext"](5,"\n  "),o["ɵɵtemplate"](6,pl,7,2,"ng-container",0),o["ɵɵtext"](7,"\n  "),o["ɵɵelementStart"](8,"button",6),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]();return t.leave(t.organization)})),o["ɵɵtext"](9,"\n    "),o["ɵɵelement"](10,"i",7),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",e.actionPromise),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.allowEnrollmentChanges(e.organization)&&!e.organization.resetPasswordEnrolled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.allowEnrollmentChanges(e.organization)&&e.organization.resetPasswordEnrolled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.organization.useSso&&e.organization.identifier),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](12,5,"leave"),"\n  ")}}class ml{constructor(e,t,n,i,r,o,a){this.platformUtilsService=e,this.i18nService=t,this.apiService=n,this.syncService=i,this.policyService=r,this.modalService=o,this.logService=a,this.loaded=!1}ngOnInit(){return ol(this,void 0,void 0,(function*(){yield this.load()}))}load(){return ol(this,void 0,void 0,(function*(){this.policies=yield this.policyService.getAll(Kr.M.ResetPassword),this.loaded=!0}))}allowEnrollmentChanges(e){if(e.usePolicies&&e.useResetPassword&&e.hasPublicAndPrivateKeys){const t=this.policies.find((t=>t.organizationId===e.id));if(null!=t&&t.enabled)return!e.resetPasswordEnrolled||!t.data.autoEnrollEnabled}return!1}showEnrolledStatus(e){return e.useResetPassword&&e.resetPasswordEnrolled&&this.policies.some((t=>t.organizationId===e.id&&t.enabled))}unlinkSso(e){return ol(this,void 0,void 0,(function*(){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("unlinkSsoConfirmation"),e.name,this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{this.actionPromise=this.apiService.deleteSsoUser(e.id).then((()=>this.syncService.fullSync(!0))),yield this.actionPromise,this.platformUtilsService.showToast("success",null,"Unlinked SSO"),yield this.load()}catch(t){this.logService.error(t)}}))}leave(e){return ol(this,void 0,void 0,(function*(){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("leaveOrganizationConfirmation"),e.name,this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{this.actionPromise=this.apiService.postLeaveOrganization(e.id).then((()=>this.syncService.fullSync(!0))),yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("leftOrganization")),yield this.load()}catch(t){this.logService.error(t)}}))}toggleResetPasswordEnrollment(e){return ol(this,void 0,void 0,(function*(){if(this.organization.resetPasswordEnrolled){const e=new Lt;e.masterPasswordHash="ignored",e.resetPasswordKey=null,this.actionPromise=this.apiService.putOrganizationUserResetPasswordEnrollment(this.organization.id,this.organization.userId,e);try{yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("withdrawPasswordResetSuccess")),this.syncService.fullSync(!0)}catch(t){this.logService.error(t)}}else this.modalService.open(nl,{allowMultipleModals:!0,data:{organization:e}})}))}}function hl(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"ul",4),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"li",5),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"span",6),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"button",7),o["ɵɵtext"](9,"\n              "),o["ɵɵelement"](10,"i",8),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementStart"](16,"li",9),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"span",6),o["ɵɵtext"](19,"\n            "),o["ɵɵelementStart"](20,"a",10),o["ɵɵtext"](21,"\n              "),o["ɵɵelement"](22,"i",11),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n    "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](11),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](12,2,"myVault"),"\n            "),o["ɵɵadvance"](12),o["ɵɵtextInterpolate1"]("\n               ",o["ɵɵpipeBind1"](24,4,"newOrganization"),"\n            "))}function vl(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"button",22),o["ɵɵtext"](3,"\n                "),o["ɵɵelement"](4,"i",23),o["ɵɵtext"](5,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n              "),o["ɵɵelementStart"](7,"bit-menu",24,25),o["ɵɵtext"](9,"\n                "),o["ɵɵelement"](10,"app-organization-options",26),o["ɵɵtext"](11,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n            "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵreference"](8),t=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵproperty"]("bitMenuTriggerFor",e),o["ɵɵadvance"](8),o["ɵɵproperty"]("organization",t)}}ml.ɵfac=function(e){return new(e||ml)(o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](L.$))},ml.ɵcmp=o["ɵɵdefineComponent"]({type:ml,selectors:[["app-organization-options"]],inputs:{organization:"organization"},decls:4,vars:2,consts:[[4,"ngIf"],["class","tw-max-w-[300px] tw-min-w-[200px] tw-flex tw-flex-col",3,"appApiAction",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted","tw-m-2",3,"title"],[1,"sr-only"],[1,"tw-max-w-[300px]","tw-min-w-[200px]","tw-flex","tw-flex-col",3,"appApiAction"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"dropdown-item","text-danger",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-sign-out"],[1,"dropdown-item",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-key"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-undo"],["class","dropdown-item",3,"click",4,"ngIf","ngIfElse"],["linkSso",""],["aria-hidden","true",1,"bwi","bwi-fw","bwi-chain-broken"],[3,"organization"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,al,9,6,"ng-container",0),o["ɵɵtext"](1,"\n"),o["ɵɵtemplate"](2,ul,14,7,"div",1),o["ɵɵtext"](3,"\n")),2&e&&(o["ɵɵproperty"]("ngIf",!t.loaded),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.loaded))},directives:[B.NgIf,Y.b,rl],pipes:[M.C],encapsulation:2});const gl=function(e){return{active:e}};function fl(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"li",19),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"span",6),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"button",20),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).applyOrganizationFilter(t)})),o["ɵɵtext"](5,"\n              "),o["ɵɵelement"](6,"i",21),o["ɵɵtext"](7),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵtemplate"](9,vl,13,2,"ng-container",0),o["ɵɵtext"](10,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](4);o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](3,gl,e.id===n.activeFilter.selectedOrganizationId)),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n              ",e.name,"\n            "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.id===n.activeFilter.selectedOrganizationId)}}function xl(e,t){if(1&e&&(o["ɵɵelementStart"](0,"ul",17),o["ɵɵtext"](1,"\n        "),o["ɵɵtemplate"](2,fl,12,5,"li",18),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"li",9),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"span",6),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"a",10),o["ɵɵtext"](9,"\n              "),o["ɵɵelement"](10,"i",11),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.organizations),o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n               ",o["ɵɵpipeBind1"](12,2,"newOrganization"),"\n            ")}}const yl=function(e,t){return{"bwi-angle-right":e,"bwi-angle-down":t}};function Sl(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",12),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"button",13),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).toggleCollapse()})),o["ɵɵpipe"](5,"i18n"),o["ɵɵtext"](6,"\n          "),o["ɵɵelement"](7,"i",14),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementStart"](10,"button",15),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).clearFilter()})),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n      "),o["ɵɵtemplate"](15,xl,16,4,"ul",16),o["ɵɵtext"](16,"\n    "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](5,6,"toggleCollapse")),o["ɵɵattribute"]("aria-expanded",!e.isCollapsed),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](10,yl,e.isCollapsed,!e.isCollapsed)),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](13,gl,!e.hasActiveFilter)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n           ",o["ɵɵpipeBind1"](12,8,e.organizationGrouping.name),"\n        "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!e.isCollapsed)}}function bl(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",12),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"button",27),o["ɵɵtext"](5,"\n          "),o["ɵɵelement"](6,"i",21),o["ɵɵtext"](7),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n    "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n          ",e.organizations[0].name,"\n        ")}}function wl(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"li",19),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"span",6),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"button",20),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).applyOrganizationFilter(t)})),o["ɵɵtext"](5,"\n              "),o["ɵɵelement"](6,"i",21),o["ɵɵtext"](7),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerStart"](9),o["ɵɵtext"](10,"\n              "),o["ɵɵelementStart"](11,"button",22),o["ɵɵtext"](12,"\n                "),o["ɵɵelement"](13,"i",23),o["ɵɵtext"](14,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n              "),o["ɵɵelementStart"](16,"bit-menu",24,25),o["ɵɵtext"](18,"\n                "),o["ɵɵelement"](19,"app-organization-options",26),o["ɵɵtext"](20,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n            "),o["ɵɵelementContainerEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵreference"](17),i=o["ɵɵnextContext"](4);o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](4,gl,e.id===i.activeFilter.selectedOrganizationId)),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n              ",e.name,"\n            "),o["ɵɵadvance"](4),o["ɵɵproperty"]("bitMenuTriggerFor",n),o["ɵɵadvance"](8),o["ɵɵproperty"]("organization",e)}}function Il(e,t){1&e&&(o["ɵɵelementStart"](0,"li",9),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"span",6),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"a",10),o["ɵɵtext"](5,"\n              "),o["ɵɵelement"](6,"i",11),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n        "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n               ",o["ɵɵpipeBind1"](8,1,"newOrganization"),"\n            "))}function Cl(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"ul",17),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"li",19),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"span",6),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"button",20),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).applyMyVaultFilter()})),o["ɵɵtext"](7,"\n              "),o["ɵɵelement"](8,"i",8),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵtemplate"](14,wl,24,6,"li",18),o["ɵɵtext"](15,"\n        "),o["ɵɵtemplate"](16,Il,11,3,"li",28),o["ɵɵtext"](17,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](6,gl,e.activeFilter.myVaultOnly)),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](10,4,"myVault"),"\n            "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",e.organizations),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!("singleOrganizationPolicy"===e.displayMode))}}function El(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",12),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"button",13),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).toggleCollapse()})),o["ɵɵpipe"](5,"i18n"),o["ɵɵtext"](6,"\n          "),o["ɵɵelement"](7,"i",14),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementStart"](10,"button",15),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).clearFilter()})),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n      "),o["ɵɵtemplate"](15,Cl,18,8,"ul",16),o["ɵɵtext"](16,"\n    "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](5,6,"toggleCollapse")),o["ɵɵattribute"]("aria-expanded",!e.isCollapsed),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](10,yl,e.isCollapsed,!e.isCollapsed)),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](13,gl,!e.hasActiveFilter)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n           ",o["ɵɵpipeBind1"](12,8,e.organizationGrouping.name),"\n        "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!e.isCollapsed)}}function kl(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementContainerStart"](2,1),o["ɵɵtext"](3,"\n    "),o["ɵɵtemplate"](4,hl,29,6,"ng-container",2),o["ɵɵtext"](5,"\n    "),o["ɵɵtemplate"](6,Sl,17,15,"ng-container",2),o["ɵɵtext"](7,"\n    "),o["ɵɵtemplate"](8,bl,10,1,"ng-container",2),o["ɵɵtext"](9,"\n    "),o["ɵɵtemplate"](10,El,17,15,"ng-container",3),o["ɵɵtext"](11,"\n  "),o["ɵɵelementContainerEnd"](),o["ɵɵtext"](12,"\n  "),o["ɵɵelement"](13,"hr"),o["ɵɵtext"](14,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngSwitch",e.displayMode),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngSwitchCase","noOrganizations"),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngSwitchCase","personalOwnershipPolicy"),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngSwitchCase","singleOrganizationAndPersonalOwnershipPolicies")}}class Pl extends Js{constructor(){super(...arguments),this.displayText="allVaults"}}Pl.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](Pl)))(t||Pl)}}(),Pl.ɵcmp=o["ɵɵdefineComponent"]({type:Pl,selectors:[["app-organization-filter"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:2,vars:1,consts:[[4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"filter-options"],[1,"filter-option","active"],[1,"filter-buttons"],[1,"filter-button"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-user"],[1,"filter-option"],["href","#","routerLink","/create-organization",1,"filter-button"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],[1,"filter-heading"],["aria-controls","organization-filters",1,"toggle-button",3,"title","click"],["aria-hidden","true",1,"bwi","bwi-fw",3,"ngClass"],[1,"filter-button",3,"ngClass","click"],["id","organization-filters","class","filter-options",4,"ngIf"],["id","organization-filters",1,"filter-options"],["class","filter-option",3,"ngClass",4,"ngFor","ngForOf"],[1,"filter-option",3,"ngClass"],[1,"filter-button",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-business"],[1,"org-options","ml-auto",3,"bitMenuTriggerFor"],["aria-hidden","true",1,"bwi","bwi-ellipsis-v"],[1,"filter-organization-options"],["orgMenu",""],[3,"organization"],[1,"filter-button","active"],["class","filter-option",4,"ngIf"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,kl,15,4,"ng-container",0),o["ɵɵtext"](1,"\n")),2&e&&o["ɵɵproperty"]("ngIf",!t.hide)},directives:[B.NgIf,B.NgSwitch,B.NgSwitchCase,B.NgSwitchDefault,p.RouterLinkWithHref,B.NgClass,B.NgForOf,Ei.t,ki.M,ml],pipes:[M.C],encapsulation:2});class Al{constructor(){this.hideFavorites=!1,this.hideTrash=!1,this.onFilterChange=new o.EventEmitter}get show(){return!(this.hideFavorites&&this.hideTrash)}applyFilter(e){this.activeFilter.resetFilter(),this.activeFilter.status=e,this.onFilterChange.emit(this.activeFilter)}}Al.ɵfac=function(e){return new(e||Al)},Al.ɵdir=o["ɵɵdefineDirective"]({type:Al,inputs:{hideFavorites:"hideFavorites",hideTrash:"hideTrash",activeFilter:"activeFilter"},outputs:{onFilterChange:"onFilterChange"}});const Ol=function(e){return{active:e}};function Tl(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"li",2),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"span",3),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"button",4),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).applyFilter("favorites")})),o["ɵɵtext"](5,"\n          "),o["ɵɵelement"](6,"i",7),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](4,Ol,"favorites"===e.activeFilter.status)),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](8,2,"favorites"),"\n        ")}}function Bl(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"li",2),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"span",3),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"button",4),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).applyFilter("trash")})),o["ɵɵtext"](5,"\n          "),o["ɵɵelement"](6,"i",8),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](4,Ol,"trash"===e.activeFilter.status)),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](8,2,"trash"),"\n        ")}}function Ml(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"ul",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"li",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"span",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"button",4),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().applyFilter("all")})),o["ɵɵtext"](9,"\n          "),o["ɵɵelement"](10,"i",5),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n    "),o["ɵɵtemplate"](16,Tl,11,6,"li",6),o["ɵɵtext"](17,"\n    "),o["ɵɵtemplate"](18,Bl,11,6,"li",6),o["ɵɵtext"](19,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n"),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](6,Ol,"all"===e.activeFilter.status)),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](12,4,"allItems"),"\n        "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!e.hideFavorites),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.hideTrash)}}class Dl extends Al{}Dl.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](Dl)))(t||Dl)}}(),Dl.ɵcmp=o["ɵɵdefineComponent"]({type:Dl,selectors:[["app-status-filter"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:2,vars:1,consts:[[4,"ngIf"],[1,"filter-options"],[1,"filter-option",3,"ngClass"],[1,"filter-buttons"],[1,"filter-button",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-filter"],["class","filter-option",3,"ngClass",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-star"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-trash"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,Ml,21,8,"ng-container",0),o["ɵɵtext"](1,"\n")),2&e&&o["ɵɵproperty"]("ngIf",t.show)},directives:[B.NgIf,B.NgClass],pipes:[M.C],encapsulation:2});var Fl=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Rl{constructor(){this.hide=!1,this.selectedCipherType=null,this.onNodeCollapseStateChange=new o.EventEmitter,this.onFilterChange=new o.EventEmitter,this.typesNode={id:"types",name:"types"},this.cipherTypeEnum=jr.O}get isCollapsed(){return this.collapsedFilterNodes.has(this.typesNode.id)}applyFilter(e){this.activeFilter.resetFilter(),this.activeFilter.cipherType=e,this.onFilterChange.emit(this.activeFilter)}toggleCollapse(){return Fl(this,void 0,void 0,(function*(){this.onNodeCollapseStateChange.emit(this.typesNode)}))}}Rl.ɵfac=function(e){return new(e||Rl)},Rl.ɵdir=o["ɵɵdefineDirective"]({type:Rl,inputs:{hide:"hide",collapsedFilterNodes:"collapsedFilterNodes",selectedCipherType:"selectedCipherType",activeFilter:"activeFilter"},outputs:{onNodeCollapseStateChange:"onNodeCollapseStateChange",onFilterChange:"onFilterChange"}});const Ul=function(e){return{active:e}};function zl(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"ul",4),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"li",5),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"span",6),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"button",7),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]();return t.applyFilter(t.cipherTypeEnum.Login)})),o["ɵɵtext"](7,"\n        "),o["ɵɵelement"](8,"i",8),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementStart"](14,"li",5),o["ɵɵtext"](15,"\n    "),o["ɵɵelementStart"](16,"span",6),o["ɵɵtext"](17,"\n      "),o["ɵɵelementStart"](18,"button",7),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]();return t.applyFilter(t.cipherTypeEnum.Card)})),o["ɵɵtext"](19,"\n        "),o["ɵɵelement"](20,"i",9),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n  "),o["ɵɵelementStart"](26,"li",5),o["ɵɵtext"](27,"\n    "),o["ɵɵelementStart"](28,"span",6),o["ɵɵtext"](29,"\n      "),o["ɵɵelementStart"](30,"button",7),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]();return t.applyFilter(t.cipherTypeEnum.Identity)})),o["ɵɵtext"](31,"\n        "),o["ɵɵelement"](32,"i",10),o["ɵɵtext"](33),o["ɵɵpipe"](34,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n  "),o["ɵɵelementStart"](38,"li",5),o["ɵɵtext"](39,"\n    "),o["ɵɵelementStart"](40,"span",6),o["ɵɵtext"](41,"\n      "),o["ɵɵelementStart"](42,"button",7),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]();return t.applyFilter(t.cipherTypeEnum.SecureNote)})),o["ɵɵtext"](43,"\n        "),o["ɵɵelement"](44,"i",11),o["ɵɵtext"](45),o["ɵɵpipe"](46,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](16,Ul,e.activeFilter.cipherType===e.cipherTypeEnum.Login)),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](10,8,"typeLogin"),"\n      "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](18,Ul,e.activeFilter.cipherType===e.cipherTypeEnum.Card)),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](22,10,"typeCard"),"\n      "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](20,Ul,e.activeFilter.cipherType===e.cipherTypeEnum.Identity)),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](34,12,"typeIdentity"),"\n      "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](22,Ul,e.activeFilter.cipherType===e.cipherTypeEnum.SecureNote)),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](46,14,"typeSecureNote"),"\n      ")}}const Nl=function(e,t){return{"bwi-angle-right":e,"bwi-angle-down":t}};class Vl extends Rl{}Vl.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](Vl)))(t||Vl)}}(),Vl.ɵcmp=o["ɵɵdefineComponent"]({type:Vl,selectors:[["app-type-filter"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:15,vars:12,consts:[[1,"filter-heading"],["aria-controls","type-filters",1,"toggle-button",3,"title","click"],["aria-hidden","true",1,"bwi","bwi-fw",3,"ngClass"],["id","type-filters","class","filter-options",4,"ngIf"],["id","type-filters",1,"filter-options"],[1,"filter-option",3,"ngClass"],[1,"filter-buttons"],[1,"filter-button",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-globe"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-credit-card"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-id-card"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-sticky-note"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"button",1),o["ɵɵlistener"]("click",(function(){return t.toggleCollapse()})),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n    "),o["ɵɵelement"](5,"i",2),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n  "),o["ɵɵelementStart"](8,"h3"),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n"),o["ɵɵtemplate"](13,zl,50,24,"ul",3),o["ɵɵtext"](14,"\n")),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,5,"toggleCollapse")),o["ɵɵattribute"]("aria-expanded",!t.isCollapsed),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](9,Nl,t.isCollapsed,!t.isCollapsed)),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](10,7,"types"),""),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!t.isCollapsed))},directives:[B.NgClass,B.NgIf],pipes:[M.C],encapsulation:2});var Hl=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class jl{constructor(){this.hide=!1,this.onNodeCollapseStateChange=new o.EventEmitter,this.onFilterChange=new o.EventEmitter,this.onAddFolder=new o.EventEmitter,this.onEditFolder=new o.EventEmitter,this.foldersGrouping={id:"folders",name:"folders"}}get folders(){var e;return null===(e=this.folderNodes)||void 0===e?void 0:e.fullList}get nestedFolders(){var e;return null===(e=this.folderNodes)||void 0===e?void 0:e.nestedList}applyFilter(e){this.activeFilter.resetFilter(),this.activeFilter.selectedFolder=!0,this.activeFilter.selectedFolderId=e.id,this.onFilterChange.emit(this.activeFilter)}addFolder(){this.onAddFolder.emit()}editFolder(e){this.onEditFolder.emit(e)}isCollapsed(e){return this.collapsedFilterNodes.has(e.id)}toggleCollapse(e){return Hl(this,void 0,void 0,(function*(){this.onNodeCollapseStateChange.emit(e)}))}}jl.ɵfac=function(e){return new(e||jl)},jl.ɵdir=o["ɵɵdefineDirective"]({type:jl,inputs:{hide:"hide",collapsedFilterNodes:"collapsedFilterNodes",folderNodes:"folderNodes",activeFilter:"activeFilter"},outputs:{onNodeCollapseStateChange:"onNodeCollapseStateChange",onFilterChange:"onFilterChange",onAddFolder:"onAddFolder",onEditFolder:"onEditFolder"}});const Ll=function(e,t){return{"bwi-angle-right":e,"bwi-angle-down":t}};function Kl(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",19),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](4).toggleCollapse(t.node)})),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n            "),o["ɵɵelement"](3,"i",3),o["ɵɵtext"](4,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](4);o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,4,"toggleCollapse")),o["ɵɵattribute"]("aria-expanded",!t.isCollapsed(e.node))("aria-controls",e.node.name+"_children"),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](6,Ll,t.isCollapsed(e.node),!t.isCollapsed(e.node)))}}function Gl(e,t){1&e&&o["ɵɵelement"](0,"i",20)}function ql(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",21),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](4).editFolder(t.node)})),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n            "),o["ɵɵelement"](3,"i",22),o["ɵɵtext"](4,"\n          "),o["ɵɵelementEnd"]()}2&e&&o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](1,1,"editFolder"))}function _l(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementContainerEnd"]())}const $l=function(e){return{$implicit:e}};function Wl(e,t){if(1&e&&(o["ɵɵelementStart"](0,"ul",23),o["ɵɵtext"](1,"\n          "),o["ɵɵtemplate"](2,_l,2,0,"ng-container",10),o["ɵɵtext"](3,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵnextContext"](2);const t=o["ɵɵreference"](3);o["ɵɵproperty"]("id",e.node.name+"_children"),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngTemplateOutlet",t)("ngTemplateOutletContext",o["ɵɵpureFunction1"](3,$l,e.children))}}const Ql=function(e){return{active:e}};function Yl(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"li",12),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"span",13),o["ɵɵtext"](3,"\n          "),o["ɵɵtemplate"](4,Kl,5,9,"button",14),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"button",15),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).applyFilter(t.node)})),o["ɵɵtext"](7,"\n            "),o["ɵɵtemplate"](8,Gl,1,0,"i",16),o["ɵɵtext"](9),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n          "),o["ɵɵtemplate"](11,ql,5,3,"button",17),o["ɵɵtext"](12,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵtemplate"](14,Wl,4,5,"ul",18),o["ɵɵtext"](15,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](4);o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](6,Ql,e.node.id===n.activeFilter.selectedFolderId&&n.activeFilter.selectedFolder)),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.children.length),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",0===e.children.length),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"](" ",e.node.name,"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.node.id),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.children.length&&!n.isCollapsed(e.node))}}function Zl(e,t){if(1&e&&(o["ɵɵtext"](0,"\n      "),o["ɵɵtemplate"](1,Yl,16,8,"li",11),o["ɵɵtext"](2,"\n    ")),2&e){const e=t.$implicit;o["ɵɵadvance"](1),o["ɵɵproperty"]("ngForOf",e)}}function Jl(e,t){1&e&&o["ɵɵelementContainer"](0)}function Xl(e,t){if(1&e&&(o["ɵɵelementStart"](0,"ul",8),o["ɵɵtext"](1,"\n    "),o["ɵɵtemplate"](2,Zl,3,1,"ng-template",null,9,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](4,"\n    "),o["ɵɵtemplate"](5,Jl,1,0,"ng-container",10),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵreference"](3),t=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵproperty"]("ngTemplateOutlet",e)("ngTemplateOutletContext",o["ɵɵpureFunction1"](2,$l,t.nestedFolders))}}function ed(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"button",2),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]();return t.toggleCollapse(t.foldersGrouping)})),o["ɵɵpipe"](5,"i18n"),o["ɵɵtext"](6,"\n      "),o["ɵɵelement"](7,"i",3),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n    "),o["ɵɵelementStart"](10,"h3",4),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n    "),o["ɵɵelementStart"](14,"button",5),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().addFolder()})),o["ɵɵpipe"](15,"i18n"),o["ɵɵtext"](16,"\n      "),o["ɵɵelement"](17,"i",6),o["ɵɵtext"](18,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n  "),o["ɵɵtemplate"](21,Xl,7,4,"ul",7),o["ɵɵtext"](22,"\n"),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](5,6,"toggleCollapse")),o["ɵɵattribute"]("aria-expanded",!e.isCollapsed(e.foldersGrouping)),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](12,Ll,e.isCollapsed(e.foldersGrouping),!e.isCollapsed(e.foldersGrouping))),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](12,8,"folders"),""),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](15,10,"addFolder")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngIf",!e.isCollapsed(e.foldersGrouping))}}class td extends jl{}td.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](td)))(t||td)}}(),td.ɵcmp=o["ɵɵdefineComponent"]({type:td,selectors:[["app-folder-filter"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:2,vars:1,consts:[[4,"ngIf"],[1,"filter-heading"],["aria-controls","folder-filters",1,"toggle-button",3,"title","click"],["aria-hidden","true",1,"bwi","bwi-fw",3,"ngClass"],[1,"filter-title"],[1,"text-muted","ml-auto","add-button",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],["id","folder-filters","class","filter-options",4,"ngIf"],["id","folder-filters",1,"filter-options"],["recursiveFolders",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","filter-option",3,"ngClass",4,"ngFor","ngForOf"],[1,"filter-option",3,"ngClass"],[1,"filter-buttons"],["class","toggle-button",3,"title","click",4,"ngIf"],[1,"filter-button",3,"click"],["class","bwi bwi-fw bwi-folder","aria-hidden","true",4,"ngIf"],["class","edit-button",3,"appA11yTitle","click",4,"ngIf"],["class","nested-filter-options",3,"id",4,"ngIf"],[1,"toggle-button",3,"title","click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-folder"],[1,"edit-button",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-pencil","bwi-fw"],[1,"nested-filter-options",3,"id"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,ed,23,15,"ng-container",0),o["ɵɵtext"](1,"\n")),2&e&&o["ɵɵproperty"]("ngIf",!t.hide)},directives:[B.NgIf,B.NgClass,pe,B.NgTemplateOutlet,B.NgForOf],pipes:[M.C],encapsulation:2});var nd=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class id{constructor(){this.hide=!1,this.onNodeCollapseStateChange=new o.EventEmitter,this.onFilterChange=new o.EventEmitter,this.collectionsGrouping={id:"collections",name:"collections"}}get collections(){var e;return null===(e=this.collectionNodes)||void 0===e?void 0:e.fullList}get nestedCollections(){var e;return null===(e=this.collectionNodes)||void 0===e?void 0:e.nestedList}get show(){return!this.hide&&null!=this.collections&&this.collections.length>0}isCollapsed(e){return this.collapsedFilterNodes.has(e.id)}applyFilter(e){this.activeFilter.resetFilter(),this.activeFilter.selectedCollection=!0,this.activeFilter.selectedCollectionId=e.id,this.onFilterChange.emit(this.activeFilter)}toggleCollapse(e){return nd(this,void 0,void 0,(function*(){this.onNodeCollapseStateChange.emit(e)}))}}id.ɵfac=function(e){return new(e||id)},id.ɵdir=o["ɵɵdefineDirective"]({type:id,inputs:{hide:"hide",collapsedFilterNodes:"collapsedFilterNodes",collectionNodes:"collectionNodes",activeFilter:"activeFilter"},outputs:{onNodeCollapseStateChange:"onNodeCollapseStateChange",onFilterChange:"onFilterChange"}});const rd=function(e,t){return{"bwi-angle-right":e,"bwi-angle-down":t}};function od(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",16),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](4).toggleCollapse(t.node)})),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n            "),o["ɵɵelement"](3,"i",3),o["ɵɵtext"](4,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](4);o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,4,"toggleCollapse")),o["ɵɵattribute"]("aria-expanded",!t.isCollapsed(e.node))("aria-controls",e.node.name+"_children"),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](6,rd,t.isCollapsed(e.node),!t.isCollapsed(e.node)))}}function ad(e,t){1&e&&o["ɵɵelement"](0,"i",17)}function sd(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementContainerEnd"]())}const ld=function(e){return{$implicit:e}};function dd(e,t){if(1&e&&(o["ɵɵelementStart"](0,"ul",18),o["ɵɵtext"](1,"\n          "),o["ɵɵtemplate"](2,sd,2,0,"ng-container",8),o["ɵɵtext"](3,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵnextContext"](2);const t=o["ɵɵreference"](3);o["ɵɵproperty"]("id",e.node.name+"_children"),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngTemplateOutlet",t)("ngTemplateOutletContext",o["ɵɵpureFunction1"](3,ld,e.children))}}const cd=function(e){return{active:e}};function pd(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"li",10),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"span",11),o["ɵɵtext"](3,"\n          "),o["ɵɵtemplate"](4,od,5,9,"button",12),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"button",13),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).applyFilter(t.node)})),o["ɵɵtext"](7,"\n            "),o["ɵɵtemplate"](8,ad,1,0,"i",14),o["ɵɵtext"](9),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵtemplate"](12,dd,4,5,"ul",15),o["ɵɵtext"](13,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](4);o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](5,cd,e.node.id===n.activeFilter.selectedCollectionId&&n.activeFilter.selectedCollection)),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.children.length),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",0===e.children.length),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"](" ",e.node.name,"\n          "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.children.length&&!n.isCollapsed(e.node))}}function ud(e,t){if(1&e&&(o["ɵɵtext"](0,"\n      "),o["ɵɵtemplate"](1,pd,14,7,"li",9),o["ɵɵtext"](2,"\n    ")),2&e){const e=t.$implicit;o["ɵɵadvance"](1),o["ɵɵproperty"]("ngForOf",e)}}function md(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementContainerEnd"]())}function hd(e,t){if(1&e&&(o["ɵɵelementStart"](0,"ul",6),o["ɵɵtext"](1,"\n    "),o["ɵɵtemplate"](2,ud,3,1,"ng-template",null,7,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](4,"\n    "),o["ɵɵtemplate"](5,md,2,0,"ng-container",8),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵreference"](3),t=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵproperty"]("ngTemplateOutlet",e)("ngTemplateOutletContext",o["ɵɵpureFunction1"](2,ld,t.nestedCollections))}}function vd(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"button",2),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]();return t.toggleCollapse(t.collectionsGrouping)})),o["ɵɵpipe"](5,"i18n"),o["ɵɵtext"](6,"\n      "),o["ɵɵelement"](7,"i",3),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n    "),o["ɵɵelementStart"](10,"h3",4),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n  "),o["ɵɵtemplate"](15,hd,7,4,"ul",5),o["ɵɵtext"](16,"\n"),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](5,5,"toggleCollapse")),o["ɵɵattribute"]("aria-expanded",!e.isCollapsed(e.collectionsGrouping)),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](9,rd,e.isCollapsed(e.collectionsGrouping),!e.isCollapsed(e.collectionsGrouping))),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](12,7,e.collectionsGrouping.name),""),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!e.isCollapsed(e.collectionsGrouping))}}class gd extends id{}gd.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](gd)))(t||gd)}}(),gd.ɵcmp=o["ɵɵdefineComponent"]({type:gd,selectors:[["app-collection-filter"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:2,vars:1,consts:[[4,"ngIf"],[1,"filter-heading"],["aria-controls","collection-filters",1,"toggle-button",3,"title","click"],["aria-hidden","true",1,"bwi","bwi-fw",3,"ngClass"],[1,"filter-title"],["id","collection-filters","class","filter-options",4,"ngIf"],["id","collection-filters",1,"filter-options"],["recursiveCollections",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","filter-option",3,"ngClass",4,"ngFor","ngForOf"],[1,"filter-option",3,"ngClass"],[1,"filter-buttons"],["class","toggle-button",3,"title","click",4,"ngIf"],[1,"filter-button",3,"click"],["class","bwi bwi-collection bwi-fw","aria-hidden","true",4,"ngIf"],["class","nested-filter-options",3,"id",4,"ngIf"],[1,"toggle-button",3,"title","click"],["aria-hidden","true",1,"bwi","bwi-collection","bwi-fw"],[1,"nested-filter-options",3,"id"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,vd,17,12,"ng-container",0),o["ɵɵtext"](1,"\n")),2&e&&o["ɵɵproperty"]("ngIf",t.show)},directives:[B.NgIf,B.NgClass,B.NgTemplateOutlet,B.NgForOf],pipes:[M.C],encapsulation:2});var fd=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function xd(e,t){1&e&&(o["ɵɵelementStart"](0,"div",3),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",4),o["ɵɵtext"](3,"\n  "),o["ɵɵelementEnd"]())}function yd(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",5),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementStart"](5,"a",6),o["ɵɵpipe"](6,"i18n"),o["ɵɵtext"](7,"\n        "),o["ɵɵelement"](8,"i",7),o["ɵɵtext"](9,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n    "),o["ɵɵelementStart"](12,"div",8),o["ɵɵtext"](13,"\n      "),o["ɵɵelementStart"](14,"input",9),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().searchText=t}))("input",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().searchTextChanged()})),o["ɵɵpipe"](15,"i18n"),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n      "),o["ɵɵelementStart"](18,"app-organization-filter",10),o["ɵɵlistener"]("onNodeCollapseStateChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().toggleFilterNodeCollapseState(t)}))("onFilterChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().applyFilter(t)})),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"div",11),o["ɵɵtext"](21,"\n        "),o["ɵɵelementStart"](22,"app-status-filter",12),o["ɵɵlistener"]("onFilterChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().applyFilter(t)})),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n      "),o["ɵɵelementStart"](25,"div",11),o["ɵɵtext"](26,"\n        "),o["ɵɵelementStart"](27,"app-type-filter",13),o["ɵɵlistener"]("onNodeCollapseStateChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().toggleFilterNodeCollapseState(t)}))("onFilterChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().applyFilter(t)})),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n      "),o["ɵɵelementStart"](30,"div",11),o["ɵɵtext"](31,"\n        "),o["ɵɵelementStart"](32,"app-folder-filter",14),o["ɵɵlistener"]("onNodeCollapseStateChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().toggleFilterNodeCollapseState(t)}))("onFilterChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().applyFilter(t)}))("onAddFolder",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().addFolder()}))("onEditFolder",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().editFolder(t)})),o["ɵɵpipe"](33,"async"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n      "),o["ɵɵelementStart"](36,"div",11),o["ɵɵtext"](37,"\n        "),o["ɵɵelementStart"](38,"app-collection-filter",15),o["ɵɵlistener"]("onNodeCollapseStateChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().toggleFilterNodeCollapseState(t)}))("onFilterChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().applyFilter(t)})),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](4,23,"filters"),"\n      "),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](6,25,"learnMore")),o["ɵɵadvance"](9),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](15,27,e.searchPlaceholder)||o["ɵɵpipeBind1"](16,29,"searchVault")),o["ɵɵproperty"]("ngModel",e.searchText),o["ɵɵadvance"](4),o["ɵɵproperty"]("hide",e.hideOrganizations)("activeFilter",e.activeFilter)("collapsedFilterNodes",e.collapsedFilterNodes)("organizations",e.organizations)("activePersonalOwnershipPolicy",e.activePersonalOwnershipPolicy)("activeSingleOrganizationPolicy",e.activeSingleOrganizationPolicy),o["ɵɵadvance"](4),o["ɵɵproperty"]("hideFavorites",e.hideFavorites)("hideTrash",e.hideTrash)("activeFilter",e.activeFilter),o["ɵɵadvance"](5),o["ɵɵproperty"]("activeFilter",e.activeFilter)("collapsedFilterNodes",e.collapsedFilterNodes),o["ɵɵadvance"](5),o["ɵɵproperty"]("hide",e.hideFolders)("activeFilter",e.activeFilter)("collapsedFilterNodes",e.collapsedFilterNodes)("folderNodes",o["ɵɵpipeBind1"](33,31,e.folders$)),o["ɵɵadvance"](6),o["ɵɵproperty"]("hide",e.hideCollections)("activeFilter",e.activeFilter)("collapsedFilterNodes",e.collapsedFilterNodes)("collectionNodes",e.collections)}}class Sd extends Ws{constructor(e){super(e),this.vaultFilterService=e,this.onSearchTextChanged=new o.EventEmitter,this.searchText=""}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return fd(this,void 0,void 0,(function*(){yield e.ngOnInit.call(this),this.vaultFilterService.collapsedFilterNodes$.subscribe((e=>{this.collapsedFilterNodes=e}))}))}searchTextChanged(){this.onSearchTextChanged.emit(this.searchText)}}Sd.ɵfac=function(e){return new(e||Sd)(o["ɵɵdirectiveInject"](Ys.n))},Sd.ɵcmp=o["ɵɵdefineComponent"]({type:Sd,selectors:[["app-vault-filter"]],outputs:{onSearchTextChanged:"onSearchTextChanged"},features:[o["ɵɵInheritDefinitionFeature"]],decls:7,vars:2,consts:[[1,"card","vault-filters"],["class","container loading-spinner",4,"ngIf"],[4,"ngIf"],[1,"container","loading-spinner"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-3x"],[1,"card-header","d-flex"],["href","https://bitwarden.com/help/searching-vault/","target","_blank","rel","noopener",1,"ml-auto",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],[1,"card-body"],["type","search","id","search","autocomplete","off","appAutofocus","",1,"form-control",3,"placeholder","ngModel","ngModelChange","input"],[3,"hide","activeFilter","collapsedFilterNodes","organizations","activePersonalOwnershipPolicy","activeSingleOrganizationPolicy","onNodeCollapseStateChange","onFilterChange"],[1,"filter"],[3,"hideFavorites","hideTrash","activeFilter","onFilterChange"],[3,"activeFilter","collapsedFilterNodes","onNodeCollapseStateChange","onFilterChange"],[3,"hide","activeFilter","collapsedFilterNodes","folderNodes","onNodeCollapseStateChange","onFilterChange","onAddFolder","onEditFolder"],[3,"hide","activeFilter","collapsedFilterNodes","collectionNodes","onNodeCollapseStateChange","onFilterChange"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,xd,4,0,"div",1),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,yd,42,33,"div",2),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n")),2&e&&(o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.isLoaded),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.isLoaded))},directives:[B.NgIf,pe,d.DefaultValueAccessor,Z.U,d.NgControlStatus,d.NgModel,Pl,Dl,Vl,td,gd],pipes:[M.C,B.AsyncPipe],encapsulation:2});class bd{constructor(e,t){this.ids=null==e?[]:e,this.organizationId=t}}var wd=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Id{constructor(e,t,n,i){this.cipherService=e,this.platformUtilsService=t,this.i18nService=n,this.apiService=i,this.cipherIds=[],this.permanent=!1,this.onDeleted=new o.EventEmitter}submit(){return wd(this,void 0,void 0,(function*(){this.organization&&this.organization.canEditAnyCollection?yield this.deleteCiphersAdmin():yield this.deleteCiphers(),yield this.formPromise,this.onDeleted.emit(),this.platformUtilsService.showToast("success",null,this.i18nService.t(this.permanent?"permanentlyDeletedItems":"deletedItems"))}))}deleteCiphers(){return wd(this,void 0,void 0,(function*(){this.permanent?this.formPromise=yield this.cipherService.deleteManyWithServer(this.cipherIds):this.formPromise=yield this.cipherService.softDeleteManyWithServer(this.cipherIds)}))}deleteCiphersAdmin(){return wd(this,void 0,void 0,(function*(){const e=new bd(this.cipherIds,this.organization.id);this.permanent?this.formPromise=yield this.apiService.deleteManyCiphersAdmin(e):this.formPromise=yield this.apiService.putDeleteManyCiphersAdmin(e)}))}}Id.ɵfac=function(e){return new(e||Id)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](T.s))},Id.ɵcmp=o["ɵɵdefineComponent"]({type:Id,selectors:[["app-vault-bulk-delete"]],inputs:{cipherIds:"cipherIds",permanent:"permanent",organization:"organization"},outputs:{onDeleted:"onDeleted"},decls:45,vars:21,consts:[["role","dialog","aria-modal","true","aria-labelledby","deleteSelectedTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-sm"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","deleteSelectedTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["appAutoFocus","","type","submit",1,"btn","btn-danger","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"button",6),o["ɵɵpipe"](14,"i18n"),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"span",7),o["ɵɵtext"](17,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementStart"](21,"div",8),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n      "),o["ɵɵelementStart"](25,"div",9),o["ɵɵtext"](26,"\n        "),o["ɵɵelementStart"](27,"button",10),o["ɵɵtext"](28,"\n          "),o["ɵɵelement"](29,"i",11),o["ɵɵpipe"](30,"i18n"),o["ɵɵtext"](31,"\n          "),o["ɵɵelementStart"](32,"span"),o["ɵɵtext"](33),o["ɵɵpipe"](34,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n        "),o["ɵɵelementStart"](37,"button",12),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,8,t.permanent?"permanentlyDeleteSelected":"deleteSelected"),"\n        "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](14,10,"close")),o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind2"](23,12,t.permanent?"permanentlyDeleteSelectedItemsDesc":"deleteSelectedItemsDesc",t.cipherIds.length),"\n      "),o["ɵɵadvance"](5),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](30,15,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](34,17,t.permanent?"permanentlyDelete":"delete")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](39,19,"cancel"),"\n        ")}},directives:[d["ɵNgNoValidate"],d.NgControlStatusGroup,d.NgForm,Y.b,pe],pipes:[M.C],encapsulation:2});var Cd=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Ed(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",17),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.id),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}class kd{constructor(e,t,n,i){this.cipherService=e,this.platformUtilsService=t,this.i18nService=n,this.folderService=i,this.cipherIds=[],this.onMoved=new o.EventEmitter,this.folderId=null}ngOnInit(){return Cd(this,void 0,void 0,(function*(){this.folders$=this.folderService.folderViews$,this.folderId=(yield(0,Or.z)(this.folders$))[0].id}))}submit(){return Cd(this,void 0,void 0,(function*(){this.formPromise=this.cipherService.moveManyWithServer(this.cipherIds,this.folderId),yield this.formPromise,this.onMoved.emit(),this.platformUtilsService.showToast("success",null,this.i18nService.t("movedItems"))}))}}kd.ɵfac=function(e){return new(e||kd)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Rr.s))},kd.ɵcmp=o["ɵɵdefineComponent"]({type:kd,selectors:[["app-vault-bulk-move"]],inputs:{cipherIds:"cipherIds"},outputs:{onMoved:"onMoved"},decls:61,vars:28,consts:[["role","dialog","aria-modal","true","aria-labelledby","moveSelectedTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-sm"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","moveSelectedTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],["for","folder"],["id","folder","name","FolderId",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[3,"ngValue"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"button",6),o["ɵɵpipe"](14,"i18n"),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"span",7),o["ɵɵtext"](17,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementStart"](21,"div",8),o["ɵɵtext"](22,"\n        "),o["ɵɵelementStart"](23,"p"),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵelementStart"](27,"div",9),o["ɵɵtext"](28,"\n          "),o["ɵɵelementStart"](29,"label",10),o["ɵɵtext"](30),o["ɵɵpipe"](31,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n          "),o["ɵɵelementStart"](33,"select",11),o["ɵɵlistener"]("ngModelChange",(function(e){return t.folderId=e})),o["ɵɵtext"](34,"\n            "),o["ɵɵtemplate"](35,Ed,2,2,"option",12),o["ɵɵpipe"](36,"async"),o["ɵɵtext"](37,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n      "),o["ɵɵelementStart"](41,"div",13),o["ɵɵtext"](42,"\n        "),o["ɵɵelementStart"](43,"button",14),o["ɵɵtext"](44,"\n          "),o["ɵɵelement"](45,"i",15),o["ɵɵpipe"](46,"i18n"),o["ɵɵtext"](47,"\n          "),o["ɵɵelementStart"](48,"span"),o["ɵɵtext"](49),o["ɵɵpipe"](50,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n        "),o["ɵɵelementStart"](53,"button",16),o["ɵɵtext"](54),o["ɵɵpipe"](55,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](57,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,11,"moveSelected"),"\n        "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](14,13,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](25,15,"moveSelectedItemsDesc",t.cipherIds.length)),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](31,18,"folder")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.folderId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",o["ɵɵpipeBind1"](36,20,t.folders$)),o["ɵɵadvance"](8),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](46,22,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](50,24,"save")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](55,26,"cancel"),"\n        ")}},directives:[d["ɵNgNoValidate"],d.NgControlStatusGroup,d.NgForm,Y.b,pe,d.SelectControlValueAccessor,d.NgControlStatus,d.NgModel,B.NgForOf,d.NgSelectOption,d["ɵNgSelectMultipleOption"]],pipes:[M.C,B.AsyncPipe],encapsulation:2});var Pd=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Ad{constructor(e,t,n){this.cipherService=e,this.platformUtilsService=t,this.i18nService=n,this.cipherIds=[],this.onRestored=new o.EventEmitter}submit(){return Pd(this,void 0,void 0,(function*(){this.formPromise=this.cipherService.restoreManyWithServer(this.cipherIds),yield this.formPromise,this.onRestored.emit(),this.platformUtilsService.showToast("success",null,this.i18nService.t("restoredItems"))}))}}Ad.ɵfac=function(e){return new(e||Ad)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D))},Ad.ɵcmp=o["ɵɵdefineComponent"]({type:Ad,selectors:[["app-vault-bulk-restore"]],inputs:{cipherIds:"cipherIds"},outputs:{onRestored:"onRestored"},decls:45,vars:21,consts:[["role","dialog","aria-modal","true","aria-labelledby","restoreSelectedTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-sm"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","restoreSelectedTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["appAutoFocus","","type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"button",6),o["ɵɵpipe"](14,"i18n"),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"span",7),o["ɵɵtext"](17,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementStart"](21,"div",8),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n      "),o["ɵɵelementStart"](25,"div",9),o["ɵɵtext"](26,"\n        "),o["ɵɵelementStart"](27,"button",10),o["ɵɵtext"](28,"\n          "),o["ɵɵelement"](29,"i",11),o["ɵɵpipe"](30,"i18n"),o["ɵɵtext"](31,"\n          "),o["ɵɵelementStart"](32,"span"),o["ɵɵtext"](33),o["ɵɵpipe"](34,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n        "),o["ɵɵelementStart"](37,"button",12),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,8,"restoreSelected"),"\n        "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](14,10,"close")),o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind2"](23,12,"restoreSelectedItemsDesc",t.cipherIds.length),"\n      "),o["ɵɵadvance"](5),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](30,15,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](34,17,"restore")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](39,19,"cancel"),"\n        ")}},directives:[d["ɵNgNoValidate"],d.NgControlStatusGroup,d.NgForm,Y.b,pe],pipes:[M.C],encapsulation:2});var Od=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Td(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",21),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.id),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function Bd(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",22),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"button",23),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().selectAll(!0)})),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"button",23),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().selectAll(!1)})),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,2,"selectAll"),"\n            "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](8,4,"unselectAll"),"\n            "))}function Md(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"noCollectionsInList"),"\n        "))}function Dd(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr",26),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).check(t)})),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",27),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"input",28),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.checked=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n              "),o["ɵɵelementStart"](7,"td"),o["ɵɵtext"](8),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate1"]("name","Collection[",n,"].Checked"),o["ɵɵproperty"]("ngModel",e.checked),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n                ",e.name,"\n              ")}}function Fd(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",24),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n            "),o["ɵɵtemplate"](4,Dd,10,3,"tr",25),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.collections)}}const Rd=function(e){return{loading:e}};class Ud{constructor(e,t,n,i,r,a){this.cipherService=e,this.platformUtilsService=t,this.i18nService=n,this.collectionService=i,this.organizationService=r,this.logService=a,this.ciphers=[],this.onShared=new o.EventEmitter,this.nonShareableCount=0,this.collections=[],this.organizations=[],this.shareableCiphers=[],this.writeableCollections=[]}ngOnInit(){return Od(this,void 0,void 0,(function*(){this.shareableCiphers=this.ciphers.filter((e=>!e.hasOldAttachments&&null==e.organizationId)),this.nonShareableCount=this.ciphers.length-this.shareableCiphers.length;const e=yield this.collectionService.getAllDecrypted();this.writeableCollections=e.filter((e=>!e.readOnly)),this.organizations=yield this.organizationService.getAll(),null==this.organizationId&&this.organizations.length>0&&(this.organizationId=this.organizations[0].id),this.filterCollections()}))}ngOnDestroy(){this.selectAll(!1)}filterCollections(){this.selectAll(!1),null==this.organizationId||0===this.writeableCollections.length?this.collections=[]:this.collections=this.writeableCollections.filter((e=>e.organizationId===this.organizationId))}submit(){var e,t;return Od(this,void 0,void 0,(function*(){const n=this.collections.filter((e=>e.checked)).map((e=>e.id));try{this.formPromise=this.cipherService.shareManyWithServer(this.shareableCiphers,this.organizationId,n),yield this.formPromise,this.onShared.emit();const i=null!==(t=null===(e=this.organizations.find((e=>e.id===this.organizationId)))||void 0===e?void 0:e.name)&&void 0!==t?t:this.i18nService.t("organization");this.platformUtilsService.showToast("success",null,this.i18nService.t("movedItemsToOrg",i))}catch(i){this.logService.error(i)}}))}check(e,t){e.checked=null==t?!e.checked:t}selectAll(e){(e?this.collections:this.writeableCollections).forEach((t=>this.check(t,e)))}get canSave(){if(null!=this.shareableCiphers&&this.shareableCiphers.length>0&&null!=this.collections)for(let e=0;e<this.collections.length;e++)if(this.collections[e].checked)return!0;return!1}}Ud.ɵfac=function(e){return new(e||Ud)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Jr.a),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](L.$))},Ud.ɵcmp=o["ɵɵdefineComponent"]({type:Ud,selectors:[["app-vault-bulk-share"]],inputs:{ciphers:"ciphers",organizationId:"organizationId"},outputs:{onShared:"onShared"},decls:77,vars:40,consts:[["role","dialog","aria-modal","true","aria-labelledby","moveSelectedToOrgTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","moveSelectedToOrgTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],["for","organization"],["id","organization","name","OrganizationId",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-flex"],["class","ml-auto d-flex",4,"ngIf"],[4,"ngIf"],["class","table table-hover table-list mb-0",4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit","manual",3,"disabled","ngClass"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[3,"ngValue"],[1,"ml-auto","d-flex"],["type","button",1,"btn","btn-link","btn-sm","py-0",3,"click"],[1,"table","table-hover","table-list","mb-0"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"table-list-checkbox"],["type","checkbox","appStopProp","",3,"ngModel","name","ngModelChange"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"button",6),o["ɵɵpipe"](14,"i18n"),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"span",7),o["ɵɵtext"](17,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementStart"](21,"div",8),o["ɵɵtext"](22,"\n        "),o["ɵɵelementStart"](23,"p"),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵelementStart"](27,"p"),o["ɵɵtext"](28),o["ɵɵpipe"](29,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n        "),o["ɵɵelementStart"](31,"div",9),o["ɵɵtext"](32,"\n          "),o["ɵɵelementStart"](33,"label",10),o["ɵɵtext"](34),o["ɵɵpipe"](35,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n          "),o["ɵɵelementStart"](37,"select",11),o["ɵɵlistener"]("ngModelChange",(function(e){return t.organizationId=e}))("change",(function(){return t.filterCollections()})),o["ɵɵtext"](38,"\n            "),o["ɵɵtemplate"](39,Td,2,2,"option",12),o["ɵɵtext"](40,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n        "),o["ɵɵelementStart"](43,"div",13),o["ɵɵtext"](44,"\n          "),o["ɵɵelementStart"](45,"h3"),o["ɵɵtext"](46),o["ɵɵpipe"](47,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n          "),o["ɵɵtemplate"](49,Bd,10,6,"div",14),o["ɵɵtext"](50,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n        "),o["ɵɵtemplate"](52,Md,3,3,"div",15),o["ɵɵtext"](53,"\n        "),o["ɵɵtemplate"](54,Fd,7,1,"table",16),o["ɵɵtext"](55,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n      "),o["ɵɵelementStart"](57,"div",17),o["ɵɵtext"](58,"\n        "),o["ɵɵelementStart"](59,"button",18),o["ɵɵtext"](60,"\n          "),o["ɵɵelement"](61,"i",19),o["ɵɵpipe"](62,"i18n"),o["ɵɵtext"](63,"\n          "),o["ɵɵelementStart"](64,"span"),o["ɵɵtext"](65),o["ɵɵpipe"](66,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](68,"\n        "),o["ɵɵelementStart"](69,"button",20),o["ɵɵtext"](70),o["ɵɵpipe"](71,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](73,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](74,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](75,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,17,"moveSelectedToOrg"),"\n        "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](14,19,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](25,21,"moveManyToOrgDesc")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind4"](29,23,"moveSelectedItemsCountDesc",t.ciphers.length,t.shareableCiphers.length,t.nonShareableCount),"\n        "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](35,28,"organization")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",t.organizations),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](47,30,"collections")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.collections&&t.collections.length),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.collections||!t.collections.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.collections&&t.collections.length),o["ɵɵadvance"](5),o["ɵɵproperty"]("disabled",e.loading||!t.canSave)("ngClass",o["ɵɵpureFunction1"](38,Rd,e.loading)),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](62,32,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](66,34,"save")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](71,36,"cancel"),"\n        ")}},directives:[d["ɵNgNoValidate"],d.NgControlStatusGroup,d.NgForm,Y.b,pe,d.SelectControlValueAccessor,d.NgControlStatus,d.NgModel,B.NgForOf,B.NgIf,B.NgClass,d.NgSelectOption,d["ɵNgSelectMultipleOption"],d.CheckboxControlValueAccessor,Oi],pipes:[M.C],encapsulation:2});var zd=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const Nd=["bulkDeleteTemplate"],Vd=["bulkRestoreTemplate"],Hd=["bulkMoveTemplate"],jd=["bulkShareTemplate"];function Ld(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",9),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().bulkMove()})),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",16),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](4,1,"moveSelected"),"\n    "))}function Kd(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",9),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().bulkShare()})),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",17),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](4,1,"moveSelectedToOrg"),"\n    "))}function Gd(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",18),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().bulkRestore()})),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",19),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](4,1,"restoreSelected"),"\n    "))}function qd(e,t){}function _d(e,t){}function $d(e,t){}function Wd(e,t){}class Qd{constructor(e,t,n,i){this.platformUtilsService=e,this.i18nService=t,this.modalService=n,this.passwordRepromptService=i}bulkDelete(){return zd(this,void 0,void 0,(function*(){if(!(yield this.promptPassword()))return;const e=this.ciphersComponent.getSelectedIds();if(0===e.length)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("nothingSelected"));const[t]=yield this.modalService.openViewRef(Id,this.bulkDeleteModalRef,(n=>{n.permanent=this.deleted,n.cipherIds=e,n.organization=this.organization,n.onDeleted.subscribe((()=>zd(this,void 0,void 0,(function*(){t.close(),yield this.ciphersComponent.refresh()}))))}))}))}bulkRestore(){return zd(this,void 0,void 0,(function*(){if(!(yield this.promptPassword()))return;const e=this.ciphersComponent.getSelectedIds();if(0===e.length)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("nothingSelected"));const[t]=yield this.modalService.openViewRef(Ad,this.bulkRestoreModalRef,(n=>{n.cipherIds=e,n.onRestored.subscribe((()=>zd(this,void 0,void 0,(function*(){t.close(),yield this.ciphersComponent.refresh()}))))}))}))}bulkShare(){return zd(this,void 0,void 0,(function*(){if(!(yield this.promptPassword()))return;const e=this.ciphersComponent.getSelected();if(0===e.length)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("nothingSelected"));const[t]=yield this.modalService.openViewRef(Ud,this.bulkShareModalRef,(n=>{n.ciphers=e,n.onShared.subscribe((()=>zd(this,void 0,void 0,(function*(){t.close(),yield this.ciphersComponent.refresh()}))))}))}))}bulkMove(){return zd(this,void 0,void 0,(function*(){if(!(yield this.promptPassword()))return;const e=this.ciphersComponent.getSelectedIds();if(0===e.length)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("nothingSelected"));const[t]=yield this.modalService.openViewRef(kd,this.bulkMoveModalRef,(n=>{n.cipherIds=e,n.onMoved.subscribe((()=>zd(this,void 0,void 0,(function*(){t.close(),yield this.ciphersComponent.refresh()}))))}))}))}selectAll(e){this.ciphersComponent.selectAll(e)}promptPassword(){return zd(this,void 0,void 0,(function*(){return!this.ciphersComponent.getSelected().find((e=>e.reprompt!==Hr.N.None))||(yield this.passwordRepromptService.showPasswordPrompt())}))}}Qd.ɵfac=function(e){return new(e||Qd)(o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](eo))},Qd.ɵcmp=o["ɵɵdefineComponent"]({type:Qd,selectors:[["app-vault-bulk-actions"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](Nd,7,o.ViewContainerRef),o["ɵɵviewQuery"](Vd,7,o.ViewContainerRef),o["ɵɵviewQuery"](Hd,7,o.ViewContainerRef),o["ɵɵviewQuery"](jd,7,o.ViewContainerRef)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.bulkDeleteModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.bulkRestoreModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.bulkMoveModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.bulkShareModalRef=e.first)}},inputs:{ciphersComponent:"ciphersComponent",deleted:"deleted",organization:"organization"},decls:50,vars:15,consts:[["appListDropdown","",1,"dropdown","mr-2"],["type","button","id","bulkActionsButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-sm","btn-outline-secondary","dropdown-toggle",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-cog"],["aria-labelledby","bulkActionsButton",1,"dropdown-menu","dropdown-menu-right"],["class","dropdown-item","appStopClick","",3,"click",4,"ngIf"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"dropdown-item","text-danger",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-trash"],[1,"dropdown-divider"],["appStopClick","",1,"dropdown-item",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-check-square"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-minus-square"],["bulkDeleteTemplate",""],["bulkRestoreTemplate",""],["bulkMoveTemplate",""],["bulkShareTemplate",""],["aria-hidden","true",1,"bwi","bwi-fw","bwi-folder"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-arrow-circle-right"],[1,"dropdown-item",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-undo"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"button",1),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n    "),o["ɵɵelement"](5,"i",2),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n  "),o["ɵɵelementStart"](8,"div",3),o["ɵɵtext"](9,"\n    "),o["ɵɵtemplate"](10,Ld,5,3,"button",4),o["ɵɵtext"](11,"\n    "),o["ɵɵtemplate"](12,Kd,5,3,"button",4),o["ɵɵtext"](13,"\n    "),o["ɵɵtemplate"](14,Gd,5,3,"button",5),o["ɵɵtext"](15,"\n    "),o["ɵɵelementStart"](16,"button",6),o["ɵɵlistener"]("click",(function(){return t.bulkDelete()})),o["ɵɵtext"](17,"\n      "),o["ɵɵelement"](18,"i",7),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n    "),o["ɵɵelement"](22,"div",8),o["ɵɵtext"](23,"\n    "),o["ɵɵelementStart"](24,"button",9),o["ɵɵlistener"]("click",(function(){return t.selectAll(!0)})),o["ɵɵtext"](25,"\n      "),o["ɵɵelement"](26,"i",10),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n    "),o["ɵɵelementStart"](30,"button",9),o["ɵɵlistener"]("click",(function(){return t.selectAll(!1)})),o["ɵɵtext"](31,"\n      "),o["ɵɵelement"](32,"i",11),o["ɵɵtext"](33),o["ɵɵpipe"](34,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n\n"),o["ɵɵtemplate"](38,qd,0,0,"ng-template",null,12,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](40,"\n"),o["ɵɵtemplate"](41,_d,0,0,"ng-template",null,13,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](43,"\n"),o["ɵɵtemplate"](44,$d,0,0,"ng-template",null,14,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](46,"\n"),o["ɵɵtemplate"](47,Wd,0,0,"ng-template",null,15,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](49,"\n")),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](3,7,"options")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",!t.deleted&&!t.organization),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.deleted&&!t.organization),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.deleted&&!t.organization),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](20,9,t.deleted?"permanentlyDeleteSelected":"deleteSelected"),"\n    "),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](28,11,"selectAll"),"\n    "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](34,13,"unselectAll"),"\n    "))},directives:[pe,B.NgIf,Tn],pipes:[M.C],encapsulation:2});var Yd=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Zd{constructor(e,t,n,i){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.logService=i}send(){return Yd(this,void 0,void 0,(function*(){if(null==this.actionPromise){try{this.actionPromise=this.apiService.postAccountVerifyEmail(),yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("checkInboxForVerification"))}catch(e){this.logService.error(e)}this.actionPromise=null}}))}}Zd.ɵfac=function(e){return new(e||Zd)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$))},Zd.ɵcmp=o["ɵɵdefineComponent"]({type:Zd,selectors:[["app-verify-email"]],decls:27,vars:14,consts:[[1,"card","border-warning"],[1,"card-header","bg-warning","text-white"],["aria-hidden","true",1,"bwi","bwi-envelope","bwi-fw"],[1,"card-body"],["type","button",1,"btn","btn-block","btn-outline-secondary","btn-submit",3,"appApiAction","disabled","click"],["sendBtn",""],["aria-hidden","true",1,"bwi","bwi-spin","bwi-spinner",3,"title"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelement"](4,"i",2),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n  "),o["ɵɵelementStart"](8,"div",3),o["ɵɵtext"](9,"\n    "),o["ɵɵelementStart"](10,"p"),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n    "),o["ɵɵelementStart"](14,"button",4,5),o["ɵɵlistener"]("click",(function(){return t.send()})),o["ɵɵtext"](16,"\n      "),o["ɵɵelement"](17,"i",6),o["ɵɵpipe"](18,"i18n"),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"span"),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n")),2&e){const e=o["ɵɵreference"](15);o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](6,6,"verifyEmail"),"\n  "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,8,"verifyEmailDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("appApiAction",t.actionPromise)("disabled",e.loading),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](18,10,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](22,12,"sendEmail"),"\n      ")}},directives:[Y.b],pipes:[M.C],encapsulation:2});var Jd=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const Xd=["vaultFilter"],ec=["attachments"],tc=["folderAddEdit"],nc=["cipherAddEdit"],ic=["share"],rc=["collections"],oc=["updateKeyTemplate"];function ac(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",27),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",28),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function sc(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",29),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().addCipher()})),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",30),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](4,1,"addItem"),"\n          "))}function lc(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",31),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",e.trashCleanupWarning,"\n      ")}}function dc(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",32),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"div",33),o["ɵɵtext"](3,"\n          "),o["ɵɵelement"](4,"i",34),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"div",35),o["ɵɵtext"](9,"\n          "),o["ɵɵelementStart"](10,"p"),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"button",36),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().updateKey()})),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](6,3,"updateKeyTitle"),"\n        "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,5,"updateEncryptionKeyShortDesc")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](16,7,"updateEncryptionKey"),"\n          "))}function cc(e,t){1&e&&o["ɵɵelement"](0,"app-verify-email",37)}function pc(e,t){1&e&&(o["ɵɵelementStart"](0,"div",32),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"div",33),o["ɵɵtext"](3,"\n          "),o["ɵɵelement"](4,"i",34),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"div",35),o["ɵɵtext"](9,"\n          "),o["ɵɵelementStart"](10,"p"),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"a",38),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](6,3,"updateBrowser"),"\n        "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,5,"updateBrowserDesc")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](16,7,"updateBrowser"),"\n          "))}function uc(e,t){1&e&&(o["ɵɵelementStart"](0,"div",39),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"div",40),o["ɵɵtext"](3,"\n          "),o["ɵɵelement"](4,"i",41),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"div",35),o["ɵɵtext"](9,"\n          "),o["ɵɵelementStart"](10,"p"),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"a",42),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](6,3,"goPremium"),"\n        "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,5,"premiumUpgradeUnlockFeatures")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](16,7,"goPremium"),"\n          "))}function mc(e,t){}function hc(e,t){}function vc(e,t){}function gc(e,t){}function fc(e,t){}function xc(e,t){}const yc=function(e,t){return{"col-6":e,"col-9":t}},Sc="VaultComponent";class bc{constructor(e,t,n,i,r,o,a,s,l,d,c,p,u,m,h,v,g,f){this.syncService=e,this.route=t,this.router=n,this.changeDetectorRef=i,this.i18nService=r,this.modalService=o,this.tokenService=a,this.cryptoService=s,this.messagingService=l,this.platformUtilsService=d,this.broadcasterService=c,this.ngZone=p,this.stateService=u,this.organizationService=m,this.vaultService=h,this.cipherService=v,this.passwordRepromptService=g,this.vaultFilterService=f,this.folderId=null,this.myVaultOnly=!1,this.showVerifyEmail=!1,this.showBrowserOutdated=!1,this.showUpdateKey=!1,this.showPremiumCallout=!1,this.trashCleanupWarning=null,this.activeFilter=new Pr}ngOnInit(){return Jd(this,void 0,void 0,(function*(){this.showVerifyEmail=!(yield this.tokenService.getEmailVerified()),this.showBrowserOutdated=-1!==window.navigator.userAgent.indexOf("MSIE"),this.trashCleanupWarning=this.i18nService.t(this.platformUtilsService.isSelfHost()?"trashCleanupWarningSelfHosted":"trashCleanupWarning"),this.route.queryParams.pipe((0,C.P)()).subscribe((e=>Jd(this,void 0,void 0,(function*(){yield this.syncService.fullSync(!1);const t=yield this.stateService.getCanAccessPremium();this.showPremiumCallout=!this.showVerifyEmail&&!t&&!this.platformUtilsService.isSelfHost(),this.filterComponent.reloadCollectionsAndFolders(this.activeFilter),this.filterComponent.reloadOrganizations(),this.showUpdateKey=!(yield this.cryptoService.hasEncKey());const n=wc(e);if(n){const t=new Ar.$;t.id=n,"clone"===e.action?yield this.cloneCipher(t):"edit"===e.action&&(yield this.editCipher(t))}yield this.ciphersComponent.reload(),this.route.queryParams.subscribe((e=>Jd(this,void 0,void 0,(function*(){const t=wc(e);t&&(null!=(yield this.cipherService.get(t))?this.editCipherId(t):(this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("unknownCipher")),this.router.navigate([],{queryParams:{itemId:null,cipherId:null},queryParamsHandling:"merge"})))})))),this.broadcasterService.subscribe(Sc,(e=>{this.ngZone.run((()=>Jd(this,void 0,void 0,(function*(){switch(e.command){case"syncCompleted":e.successfully&&(yield Promise.all([this.filterComponent.reloadCollectionsAndFolders(this.activeFilter),this.filterComponent.reloadOrganizations(),this.ciphersComponent.load(this.ciphersComponent.filter)]),this.changeDetectorRef.detectChanges())}}))))}))}))))}))}get isShowingCards(){return this.showBrowserOutdated||this.showPremiumCallout||this.showUpdateKey||this.showVerifyEmail}ngOnDestroy(){this.broadcasterService.unsubscribe(Sc)}applyVaultFilter(e){return Jd(this,void 0,void 0,(function*(){this.ciphersComponent.showAddNew="trash"!==e.status,this.activeFilter=e,yield this.ciphersComponent.reload(this.activeFilter.buildFilter(),"trash"===e.status),this.filterComponent.searchPlaceholder=this.vaultService.calculateSearchBarLocalizationString(this.activeFilter),this.go()}))}applyOrganizationFilter(e){return Jd(this,void 0,void 0,(function*(){null==e?(this.activeFilter.resetOrganization(),this.activeFilter.myVaultOnly=!0):this.activeFilter.selectedOrganizationId=e,yield this.vaultFilterService.ensureVaultFiltersAreExpanded(),yield this.applyVaultFilter(this.activeFilter)}))}filterSearchText(e){this.ciphersComponent.searchText=e,this.ciphersComponent.search(200)}editCipherAttachments(e){return Jd(this,void 0,void 0,(function*(){const t=yield this.stateService.getCanAccessPremium();if(null==e.organizationId&&!t)return void this.messagingService.send("premiumRequired");if(null!=e.organizationId){const t=yield this.organizationService.get(e.organizationId);if(null!=t&&(null==t.maxStorageGb||0===t.maxStorageGb))return void this.messagingService.send("upgradeOrganization",{organizationId:e.organizationId})}let n=!1;const[i]=yield this.modalService.openViewRef(Ua,this.attachmentsModalRef,(t=>{t.cipherId=e.id,t.onUploadedAttachment.subscribe((()=>n=!0)),t.onDeletedAttachment.subscribe((()=>n=!0)),t.onReuploadedAttachment.subscribe((()=>n=!0))}));i.onClosed.subscribe((()=>Jd(this,void 0,void 0,(function*(){n&&(yield this.ciphersComponent.refresh()),n=!1}))))}))}shareCipher(e){return Jd(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(qs,this.shareModalRef,(n=>{n.cipherId=e.id,n.onSharedCipher.subscribe((()=>Jd(this,void 0,void 0,(function*(){t.close(),yield this.ciphersComponent.refresh()}))))}))}))}editCipherCollections(e){return Jd(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(Es,this.collectionsModalRef,(n=>{n.cipherId=e.id,n.onSavedCollections.subscribe((()=>Jd(this,void 0,void 0,(function*(){t.close(),yield this.ciphersComponent.refresh()}))))}))}))}addFolder(){return Jd(this,void 0,void 0,(function*(){const[e]=yield this.modalService.openViewRef(Bs,this.folderAddEditModalRef,(t=>{t.folderId=null,t.onSavedFolder.subscribe((()=>Jd(this,void 0,void 0,(function*(){e.close(),yield this.filterComponent.reloadCollectionsAndFolders(this.activeFilter)}))))}))}))}editFolder(e){return Jd(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(Bs,this.folderAddEditModalRef,(n=>{n.folderId=e,n.onSavedFolder.subscribe((()=>Jd(this,void 0,void 0,(function*(){t.close(),yield this.filterComponent.reloadCollectionsAndFolders(this.activeFilter)})))),n.onDeletedFolder.subscribe((()=>Jd(this,void 0,void 0,(function*(){t.close(),yield this.filterComponent.reloadCollectionsAndFolders(this.activeFilter)}))))}))}))}addCipher(){return Jd(this,void 0,void 0,(function*(){const e=yield this.editCipher(null);if(e.type=this.activeFilter.cipherType,e.folderId="none"===this.folderId?null:this.folderId,null!=this.activeFilter.selectedCollectionId){const t=this.filterComponent.collections.fullList.filter((e=>e.id===this.activeFilter.selectedCollectionId));t.length>0&&(e.organizationId=t[0].organizationId,e.collectionIds=[this.activeFilter.selectedCollectionId])}this.activeFilter.selectedFolderId&&this.activeFilter.selectedFolder&&(e.folderId=this.activeFilter.selectedFolderId),this.activeFilter.selectedOrganizationId&&(e.organizationId=this.activeFilter.selectedOrganizationId)}))}editCipher(e){return Jd(this,void 0,void 0,(function*(){return this.editCipherId(null==e?void 0:e.id)}))}editCipherId(e){return Jd(this,void 0,void 0,(function*(){const t=yield this.cipherService.get(e);if(null!=t&&0!=t.reprompt&&!(yield this.passwordRepromptService.showPasswordPrompt()))return void this.go({cipherId:null,itemId:null});const[n,i]=yield this.modalService.openViewRef(ba,this.cipherAddEditModalRef,(t=>{t.cipherId=e,t.onSavedCipher.subscribe((()=>Jd(this,void 0,void 0,(function*(){n.close(),yield this.ciphersComponent.refresh()})))),t.onDeletedCipher.subscribe((()=>Jd(this,void 0,void 0,(function*(){n.close(),yield this.ciphersComponent.refresh()})))),t.onRestoredCipher.subscribe((()=>Jd(this,void 0,void 0,(function*(){n.close(),yield this.ciphersComponent.refresh()}))))}));return n.onClosedPromise().then((()=>{this.go({cipherId:null,itemId:null})})),i}))}cloneCipher(e){return Jd(this,void 0,void 0,(function*(){(yield this.editCipher(e)).cloneMode=!0}))}updateKey(){return Jd(this,void 0,void 0,(function*(){yield this.modalService.openViewRef(Nr,this.updateKeyModalRef)}))}go(e=null){null==e&&(e={favorites:"favorites"===this.activeFilter.status||null,type:this.activeFilter.cipherType,folderId:this.activeFilter.selectedFolderId,collectionId:this.activeFilter.selectedCollectionId,deleted:"trash"===this.activeFilter.status||null}),this.router.navigate([],{relativeTo:this.route,queryParams:e,queryParamsHandling:"merge",replaceUrl:!0})}}bc.ɵfac=function(e){return new(e||bc)(o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](o.ChangeDetectorRef),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](bi),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Ci),o["ɵɵdirectiveInject"](o.NgZone),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](Er),o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](eo),o["ɵɵdirectiveInject"](Ys.n))},bc.ɵcmp=o["ɵɵdefineComponent"]({type:bc,selectors:[["app-vault"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](Xd,7),o["ɵɵviewQuery"](fs,7),o["ɵɵviewQuery"](ec,7,o.ViewContainerRef),o["ɵɵviewQuery"](tc,7,o.ViewContainerRef),o["ɵɵviewQuery"](nc,7,o.ViewContainerRef),o["ɵɵviewQuery"](ic,7,o.ViewContainerRef),o["ɵɵviewQuery"](rc,7,o.ViewContainerRef),o["ɵɵviewQuery"](oc,7,o.ViewContainerRef)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.filterComponent=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.ciphersComponent=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.attachmentsModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.folderAddEditModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.cipherAddEditModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.shareModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.collectionsModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.updateKeyModalRef=e.first)}},decls:79,vars:18,consts:[[1,"container","page-content"],[1,"row"],[1,"col-3"],[1,"groupings"],[1,"content"],[1,"inner-content"],[3,"activeFilter","onFilterChange","onAddFolder","onEditFolder","onSearchTextChanged"],["vaultFilter",""],[3,"ngClass"],[1,"page-header","d-flex"],[3,"appApiAction"],["actionSpinner",""],[4,"ngIf"],[1,"ml-auto","d-flex"],[3,"ciphersComponent","deleted"],["type","button","class","btn btn-outline-primary btn-sm",3,"click",4,"ngIf"],["type","warning","icon","bwi-exclamation-triangle",4,"ngIf"],[3,"onCipherClicked","onAttachmentsClicked","onAddCipher","onShareClicked","onCollectionsClicked","onCloneClicked","onOrganzationBadgeClicked"],["class","card border-warning mb-4",4,"ngIf"],["class","d-block mb-4",4,"ngIf"],["class","card border-success mb-4",4,"ngIf"],["attachments",""],["folderAddEdit",""],["cipherAddEdit",""],["share",""],["collections",""],["updateKeyTemplate",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],["type","warning","icon","bwi-exclamation-triangle"],[1,"card","border-warning","mb-4"],[1,"card-header","bg-warning","text-white"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle","bwi-fw"],[1,"card-body"],["type","button",1,"btn","btn-block","btn-outline-secondary",3,"click"],[1,"d-block","mb-4"],["target","_blank","href","https://browser-update.org/update-browser.html","rel","noopener",1,"btn","btn-block","btn-outline-secondary"],[1,"card","border-success","mb-4"],[1,"card-header","bg-success","text-white"],["aria-hidden","true",1,"bwi","bwi-star-f","bwi-fw"],["routerLink","/settings/subscription/premium",1,"btn","btn-block","btn-outline-secondary"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"div",4),o["ɵɵtext"](9,"\n          "),o["ɵɵelementStart"](10,"div",5),o["ɵɵtext"](11,"\n            "),o["ɵɵelementStart"](12,"app-vault-filter",6,7),o["ɵɵlistener"]("onFilterChange",(function(e){return t.applyVaultFilter(e)}))("onAddFolder",(function(){return t.addFolder()}))("onEditFolder",(function(e){return t.editFolder(e.id)}))("onSearchTextChanged",(function(e){return t.filterSearchText(e)})),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n    "),o["ɵɵelementStart"](19,"div",8),o["ɵɵtext"](20,"\n      "),o["ɵɵelementStart"](21,"div",9),o["ɵɵtext"](22,"\n        "),o["ɵɵelementStart"](23,"h1"),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementStart"](26,"small",10,11),o["ɵɵtext"](28,"\n            "),o["ɵɵtemplate"](29,ac,9,6,"ng-container",12),o["ɵɵtext"](30,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n        "),o["ɵɵelementStart"](33,"div",13),o["ɵɵtext"](34,"\n          "),o["ɵɵelementStart"](35,"app-vault-bulk-actions",14),o["ɵɵtext"](36,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n          "),o["ɵɵtemplate"](38,sc,5,3,"button",15),o["ɵɵtext"](39,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n      "),o["ɵɵtemplate"](42,lc,2,1,"app-callout",16),o["ɵɵtext"](43,"\n      "),o["ɵɵelementStart"](44,"app-vault-ciphers",17),o["ɵɵlistener"]("onCipherClicked",(function(e){return t.editCipher(e)}))("onAttachmentsClicked",(function(e){return t.editCipherAttachments(e)}))("onAddCipher",(function(){return t.addCipher()}))("onShareClicked",(function(e){return t.shareCipher(e)}))("onCollectionsClicked",(function(e){return t.editCipherCollections(e)}))("onCloneClicked",(function(e){return t.cloneCipher(e)}))("onOrganzationBadgeClicked",(function(e){return t.applyOrganizationFilter(e)})),o["ɵɵtext"](45,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n    "),o["ɵɵelementStart"](48,"div",2),o["ɵɵtext"](49,"\n      "),o["ɵɵtemplate"](50,dc,19,9,"div",18),o["ɵɵtext"](51,"\n      "),o["ɵɵtemplate"](52,cc,1,0,"app-verify-email",19),o["ɵɵtext"](53,"\n      "),o["ɵɵtemplate"](54,pc,19,9,"div",18),o["ɵɵtext"](55,"\n      "),o["ɵɵtemplate"](56,uc,19,9,"div",20),o["ɵɵtext"](57,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n"),o["ɵɵtemplate"](61,mc,0,0,"ng-template",null,21,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](63,"\n"),o["ɵɵtemplate"](64,hc,0,0,"ng-template",null,22,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](66,"\n"),o["ɵɵtemplate"](67,vc,0,0,"ng-template",null,23,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](69,"\n"),o["ɵɵtemplate"](70,gc,0,0,"ng-template",null,24,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](72,"\n"),o["ɵɵtemplate"](73,fc,0,0,"ng-template",null,25,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](75,"\n"),o["ɵɵtemplate"](76,xc,0,0,"ng-template",null,26,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](78,"\n")),2&e){const e=o["ɵɵreference"](27);o["ɵɵadvance"](12),o["ɵɵproperty"]("activeFilter",t.activeFilter),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](15,yc,t.isShowingCards,!t.isShowingCards)),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](25,13,"vaultItems"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("appApiAction",t.ciphersComponent.actionPromise),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.loading),o["ɵɵadvance"](6),o["ɵɵproperty"]("ciphersComponent",t.ciphersComponent)("deleted","trash"===t.activeFilter.status),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf","trash"!==t.activeFilter.status),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf","trash"===t.activeFilter.status),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",t.showUpdateKey),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.showVerifyEmail),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.showBrowserOutdated),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.showPremiumCallout)}},directives:[Sd,B.NgClass,Y.b,B.NgIf,Qd,fs,Pe.O,Zd,p.RouterLinkWithHref],pipes:[M.C],encapsulation:2});const wc=e=>e.itemId||e.cipherId,Ic=[{path:"",component:bc,data:{titleId:"vaults"}}];class Cc{}Cc.ɵfac=function(e){return new(e||Cc)},Cc.ɵmod=o["ɵɵdefineNgModule"]({type:Cc}),Cc.ɵinj=o["ɵɵdefineInjector"]({imports:[[p.RouterModule.forChild(Ic)],p.RouterModule]});class Ec{}Ec.ɵfac=function(e){return new(e||Ec)},Ec.ɵmod=o["ɵɵdefineNgModule"]({type:Ec}),Ec.ɵinj=o["ɵɵdefineInjector"]({imports:[[kr,Cc]]});var kc,Pc=n(19576);!function(e){e[e.Android=0]="Android",e[e.iOS=1]="iOS",e[e.ChromeExtension=2]="ChromeExtension",e[e.FirefoxExtension=3]="FirefoxExtension",e[e.OperaExtension=4]="OperaExtension",e[e.EdgeExtension=5]="EdgeExtension",e[e.WindowsDesktop=6]="WindowsDesktop",e[e.MacOsDesktop=7]="MacOsDesktop",e[e.LinuxDesktop=8]="LinuxDesktop",e[e.ChromeBrowser=9]="ChromeBrowser",e[e.FirefoxBrowser=10]="FirefoxBrowser",e[e.OperaBrowser=11]="OperaBrowser",e[e.EdgeBrowser=12]="EdgeBrowser",e[e.IEBrowser=13]="IEBrowser",e[e.UnknownBrowser=14]="UnknownBrowser",e[e.AndroidAmazon=15]="AndroidAmazon",e[e.UWP=16]="UWP",e[e.SafariBrowser=17]="SafariBrowser",e[e.VivaldiBrowser=18]="VivaldiBrowser",e[e.VivaldiExtension=19]="VivaldiExtension",e[e.SafariExtension=20]="SafariExtension"}(kc||(kc={}));var Ac=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Oc{constructor(e,t){this.i18nService=e,this.policyService=t}getDefaultDateFilters(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59);e.setDate(e.getDate()-30);const n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0);return[this.toDateTimeLocalString(n),this.toDateTimeLocalString(t)]}formatDateFilters(e,t){const n=new Date(e),i=new Date(t+":59.999");if(isNaN(n.getTime())||isNaN(i.getTime())||i<n)throw new Error("Invalid date range.");return[n.toISOString(),i.toISOString()]}getEventInfo(e,t=new Tc){return Ac(this,void 0,void 0,(function*(){const n=this.getAppInfo(e.deviceType),{message:i,humanReadableMessage:r}=yield this.getEventMessage(e,t);return{message:i,humanReadableMessage:r,appIcon:n[0],appName:n[1]}}))}getEventMessage(e,t){return Ac(this,void 0,void 0,(function*(){let n="",i="";switch(e.type){case Lr.t.User_LoggedIn:n=i=this.i18nService.t("loggedIn");break;case Lr.t.User_ChangedPassword:n=i=this.i18nService.t("changedPassword");break;case Lr.t.User_Updated2fa:n=i=this.i18nService.t("enabledUpdated2fa");break;case Lr.t.User_Disabled2fa:n=i=this.i18nService.t("disabled2fa");break;case Lr.t.User_Recovered2fa:n=i=this.i18nService.t("recovered2fa");break;case Lr.t.User_FailedLogIn:n=i=this.i18nService.t("failedLogin");break;case Lr.t.User_FailedLogIn2fa:n=i=this.i18nService.t("failedLogin2fa");break;case Lr.t.User_ClientExportedVault:n=i=this.i18nService.t("exportedVault");break;case Lr.t.User_UpdatedTempPassword:n=i=this.i18nService.t("updatedMasterPassword");break;case Lr.t.User_MigratedKeyToKeyConnector:n=i=this.i18nService.t("migratedKeyConnector");break;case Lr.t.Cipher_Created:n=this.i18nService.t("createdItemId",this.formatCipherId(e,t)),i=this.i18nService.t("createdItemId",this.getShortId(e.cipherId));break;case Lr.t.Cipher_Updated:n=this.i18nService.t("editedItemId",this.formatCipherId(e,t)),i=this.i18nService.t("editedItemId",this.getShortId(e.cipherId));break;case Lr.t.Cipher_Deleted:n=this.i18nService.t("permanentlyDeletedItemId",this.formatCipherId(e,t)),i=this.i18nService.t("permanentlyDeletedItemId",this.getShortId(e.cipherId));break;case Lr.t.Cipher_SoftDeleted:n=this.i18nService.t("deletedItemId",this.formatCipherId(e,t)),i=this.i18nService.t("deletedItemId",this.getShortId(e.cipherId));break;case Lr.t.Cipher_Restored:n=this.i18nService.t("restoredItemId",this.formatCipherId(e,t)),i=this.i18nService.t("restoredItemId",this.formatCipherId(e,t));break;case Lr.t.Cipher_AttachmentCreated:n=this.i18nService.t("createdAttachmentForItem",this.formatCipherId(e,t)),i=this.i18nService.t("createdAttachmentForItem",this.getShortId(e.cipherId));break;case Lr.t.Cipher_AttachmentDeleted:n=this.i18nService.t("deletedAttachmentForItem",this.formatCipherId(e,t)),i=this.i18nService.t("deletedAttachmentForItem",this.getShortId(e.cipherId));break;case Lr.t.Cipher_Shared:n=this.i18nService.t("movedItemIdToOrg",this.formatCipherId(e,t)),i=this.i18nService.t("movedItemIdToOrg",this.getShortId(e.cipherId));break;case Lr.t.Cipher_ClientViewed:n=this.i18nService.t("viewedItemId",this.formatCipherId(e,t)),i=this.i18nService.t("viewedItemId",this.getShortId(e.cipherId));break;case Lr.t.Cipher_ClientToggledPasswordVisible:n=this.i18nService.t("viewedPasswordItemId",this.formatCipherId(e,t)),i=this.i18nService.t("viewedPasswordItemId",this.getShortId(e.cipherId));break;case Lr.t.Cipher_ClientToggledHiddenFieldVisible:n=this.i18nService.t("viewedHiddenFieldItemId",this.formatCipherId(e,t)),i=this.i18nService.t("viewedHiddenFieldItemId",this.getShortId(e.cipherId));break;case Lr.t.Cipher_ClientToggledCardCodeVisible:n=this.i18nService.t("viewedSecurityCodeItemId",this.formatCipherId(e,t)),i=this.i18nService.t("viewedSecurityCodeItemId",this.getShortId(e.cipherId));break;case Lr.t.Cipher_ClientCopiedHiddenField:n=this.i18nService.t("copiedHiddenFieldItemId",this.formatCipherId(e,t)),i=this.i18nService.t("copiedHiddenFieldItemId",this.getShortId(e.cipherId));break;case Lr.t.Cipher_ClientCopiedPassword:n=this.i18nService.t("copiedPasswordItemId",this.formatCipherId(e,t)),i=this.i18nService.t("copiedPasswordItemId",this.getShortId(e.cipherId));break;case Lr.t.Cipher_ClientCopiedCardCode:n=this.i18nService.t("copiedSecurityCodeItemId",this.formatCipherId(e,t)),i=this.i18nService.t("copiedSecurityCodeItemId",this.getShortId(e.cipherId));break;case Lr.t.Cipher_ClientAutofilled:n=this.i18nService.t("autofilledItemId",this.formatCipherId(e,t)),i=this.i18nService.t("autofilledItemId",this.getShortId(e.cipherId));break;case Lr.t.Cipher_UpdatedCollections:n=this.i18nService.t("editedCollectionsForItem",this.formatCipherId(e,t)),i=this.i18nService.t("editedCollectionsForItem",this.getShortId(e.cipherId));break;case Lr.t.Collection_Created:n=this.i18nService.t("createdCollectionId",this.formatCollectionId(e)),i=this.i18nService.t("createdCollectionId",this.getShortId(e.collectionId));break;case Lr.t.Collection_Updated:n=this.i18nService.t("editedCollectionId",this.formatCollectionId(e)),i=this.i18nService.t("editedCollectionId",this.getShortId(e.collectionId));break;case Lr.t.Collection_Deleted:n=this.i18nService.t("deletedCollectionId",this.formatCollectionId(e)),i=this.i18nService.t("deletedCollectionId",this.getShortId(e.collectionId));break;case Lr.t.Group_Created:n=this.i18nService.t("createdGroupId",this.formatGroupId(e)),i=this.i18nService.t("createdGroupId",this.getShortId(e.groupId));break;case Lr.t.Group_Updated:n=this.i18nService.t("editedGroupId",this.formatGroupId(e)),i=this.i18nService.t("editedGroupId",this.getShortId(e.groupId));break;case Lr.t.Group_Deleted:n=this.i18nService.t("deletedGroupId",this.formatGroupId(e)),i=this.i18nService.t("deletedGroupId",this.getShortId(e.groupId));break;case Lr.t.OrganizationUser_Invited:n=this.i18nService.t("invitedUserId",this.formatOrgUserId(e)),i=this.i18nService.t("invitedUserId",this.getShortId(e.organizationUserId));break;case Lr.t.OrganizationUser_Confirmed:n=this.i18nService.t("confirmedUserId",this.formatOrgUserId(e)),i=this.i18nService.t("confirmedUserId",this.getShortId(e.organizationUserId));break;case Lr.t.OrganizationUser_Updated:n=this.i18nService.t("editedUserId",this.formatOrgUserId(e)),i=this.i18nService.t("editedUserId",this.getShortId(e.organizationUserId));break;case Lr.t.OrganizationUser_Removed:n=this.i18nService.t("removedUserId",this.formatOrgUserId(e)),i=this.i18nService.t("removedUserId",this.getShortId(e.organizationUserId));break;case Lr.t.OrganizationUser_UpdatedGroups:n=this.i18nService.t("editedGroupsForUser",this.formatOrgUserId(e)),i=this.i18nService.t("editedGroupsForUser",this.getShortId(e.organizationUserId));break;case Lr.t.OrganizationUser_UnlinkedSso:n=this.i18nService.t("unlinkedSsoUser",this.formatOrgUserId(e)),i=this.i18nService.t("unlinkedSsoUser",this.getShortId(e.organizationUserId));break;case Lr.t.OrganizationUser_ResetPassword_Enroll:n=this.i18nService.t("eventEnrollPasswordReset",this.formatOrgUserId(e)),i=this.i18nService.t("eventEnrollPasswordReset",this.getShortId(e.organizationUserId));break;case Lr.t.OrganizationUser_ResetPassword_Withdraw:n=this.i18nService.t("eventWithdrawPasswordReset",this.formatOrgUserId(e)),i=this.i18nService.t("eventWithdrawPasswordReset",this.getShortId(e.organizationUserId));break;case Lr.t.OrganizationUser_AdminResetPassword:n=this.i18nService.t("eventAdminPasswordReset",this.formatOrgUserId(e)),i=this.i18nService.t("eventAdminPasswordReset",this.getShortId(e.organizationUserId));break;case Lr.t.OrganizationUser_ResetSsoLink:n=this.i18nService.t("eventResetSsoLink",this.formatOrgUserId(e)),i=this.i18nService.t("eventResetSsoLink",this.getShortId(e.organizationUserId));break;case Lr.t.OrganizationUser_FirstSsoLogin:n=this.i18nService.t("firstSsoLogin",this.formatOrgUserId(e)),i=this.i18nService.t("firstSsoLogin",this.getShortId(e.organizationUserId));break;case Lr.t.Organization_Updated:n=i=this.i18nService.t("editedOrgSettings");break;case Lr.t.Organization_PurgedVault:n=i=this.i18nService.t("purgedOrganizationVault");break;case Lr.t.Organization_VaultAccessed:n=i=this.i18nService.t("vaultAccessedByProvider");break;case Lr.t.Organization_EnabledSso:n=i=this.i18nService.t("enabledSso");break;case Lr.t.Organization_DisabledSso:n=i=this.i18nService.t("disabledSso");break;case Lr.t.Organization_EnabledKeyConnector:n=i=this.i18nService.t("enabledKeyConnector");break;case Lr.t.Organization_DisabledKeyConnector:n=i=this.i18nService.t("disabledKeyConnector");break;case Lr.t.Organization_SponsorshipsSynced:n=i=this.i18nService.t("sponsorshipsSynced");break;case Lr.t.Policy_Updated:{n=this.i18nService.t("modifiedPolicyId",this.formatPolicyId(e));const t=(yield this.policyService.getAll()).filter((t=>t.id===e.policyId))[0];let r=this.getShortId(e.policyId);null!=t&&(r=Kr.M[t.type]),i=this.i18nService.t("modifiedPolicyId",r);break}case Lr.t.ProviderUser_Invited:n=this.i18nService.t("invitedUserId",this.formatProviderUserId(e)),i=this.i18nService.t("invitedUserId",this.getShortId(e.providerUserId));break;case Lr.t.ProviderUser_Confirmed:n=this.i18nService.t("confirmedUserId",this.formatProviderUserId(e)),i=this.i18nService.t("confirmedUserId",this.getShortId(e.providerUserId));break;case Lr.t.ProviderUser_Updated:n=this.i18nService.t("editedUserId",this.formatProviderUserId(e)),i=this.i18nService.t("editedUserId",this.getShortId(e.providerUserId));break;case Lr.t.ProviderUser_Removed:n=this.i18nService.t("removedUserId",this.formatProviderUserId(e)),i=this.i18nService.t("removedUserId",this.getShortId(e.providerUserId));break;case Lr.t.ProviderOrganization_Created:n=this.i18nService.t("createdOrganizationId",this.formatProviderOrganizationId(e)),i=this.i18nService.t("createdOrganizationId",this.getShortId(e.providerOrganizationId));break;case Lr.t.ProviderOrganization_Added:n=this.i18nService.t("addedOrganizationId",this.formatProviderOrganizationId(e)),i=this.i18nService.t("addedOrganizationId",this.getShortId(e.providerOrganizationId));break;case Lr.t.ProviderOrganization_Removed:n=this.i18nService.t("removedOrganizationId",this.formatProviderOrganizationId(e)),i=this.i18nService.t("removedOrganizationId",this.getShortId(e.providerOrganizationId));break;case Lr.t.ProviderOrganization_VaultAccessed:n=this.i18nService.t("accessedClientVault",this.formatProviderOrganizationId(e)),i=this.i18nService.t("accessedClientVault",this.getShortId(e.providerOrganizationId))}return{message:""===n?null:n,humanReadableMessage:""===i?null:i}}))}getAppInfo(e){switch(e){case kc.Android:return["bwi-android",this.i18nService.t("mobile")+" - Android"];case kc.iOS:return["bwi-apple",this.i18nService.t("mobile")+" - iOS"];case kc.UWP:return["bwi-windows",this.i18nService.t("mobile")+" - Windows"];case kc.ChromeExtension:return["bwi-chrome",this.i18nService.t("extension")+" - Chrome"];case kc.FirefoxExtension:return["bwi-firefox",this.i18nService.t("extension")+" - Firefox"];case kc.OperaExtension:return["bwi-opera",this.i18nService.t("extension")+" - Opera"];case kc.EdgeExtension:return["bwi-edge",this.i18nService.t("extension")+" - Edge"];case kc.VivaldiExtension:return["bwi-puzzle",this.i18nService.t("extension")+" - Vivaldi"];case kc.SafariExtension:return["bwi-safari",this.i18nService.t("extension")+" - Safari"];case kc.WindowsDesktop:return["bwi-windows",this.i18nService.t("desktop")+" - Windows"];case kc.MacOsDesktop:return["bwi-apple",this.i18nService.t("desktop")+" - macOS"];case kc.LinuxDesktop:return["bwi-linux",this.i18nService.t("desktop")+" - Linux"];case kc.ChromeBrowser:return["bwi-globe",this.i18nService.t("webVault")+" - Chrome"];case kc.FirefoxBrowser:return["bwi-globe",this.i18nService.t("webVault")+" - Firefox"];case kc.OperaBrowser:return["bwi-globe",this.i18nService.t("webVault")+" - Opera"];case kc.SafariBrowser:return["bwi-globe",this.i18nService.t("webVault")+" - Safari"];case kc.VivaldiBrowser:return["bwi-globe",this.i18nService.t("webVault")+" - Vivaldi"];case kc.EdgeBrowser:return["bwi-globe",this.i18nService.t("webVault")+" - Edge"];case kc.IEBrowser:return["bwi-globe",this.i18nService.t("webVault")+" - IE"];case kc.UnknownBrowser:return["bwi-globe",this.i18nService.t("webVault")+" - "+this.i18nService.t("unknown")];default:return["bwi-globe",this.i18nService.t("unknown")]}}formatCipherId(e,t){const n=this.getShortId(e.cipherId);if(null==e.organizationId||!t.cipherInfo)return"<code>"+n+"</code>";const i=this.makeAnchor(n);return i.setAttribute("href","#/organizations/"+e.organizationId+"/vault?search="+n+"&viewEvents="+e.cipherId),i.outerHTML}formatGroupId(e){const t=this.getShortId(e.groupId),n=this.makeAnchor(t);return n.setAttribute("href","#/organizations/"+e.organizationId+"/manage/groups?search="+t),n.outerHTML}formatCollectionId(e){const t=this.getShortId(e.collectionId),n=this.makeAnchor(t);return n.setAttribute("href","#/organizations/"+e.organizationId+"/manage/collections?search="+t),n.outerHTML}formatOrgUserId(e){const t=this.getShortId(e.organizationUserId),n=this.makeAnchor(t);return n.setAttribute("href","#/organizations/"+e.organizationId+"/manage/people?search="+t+"&viewEvents="+e.organizationUserId),n.outerHTML}formatProviderUserId(e){const t=this.getShortId(e.providerUserId),n=this.makeAnchor(t);return n.setAttribute("href","#/providers/"+e.providerId+"/manage/people?search="+t+"&viewEvents="+e.providerUserId),n.outerHTML}formatProviderOrganizationId(e){const t=this.getShortId(e.providerOrganizationId),n=this.makeAnchor(t);return n.setAttribute("href","#/providers/"+e.providerId+"/clients?search="+t),n.outerHTML}formatPolicyId(e){const t=this.getShortId(e.policyId),n=this.makeAnchor(t);return n.setAttribute("href","#/organizations/"+e.organizationId+"/manage/policies?policyId="+e.policyId),n.outerHTML}makeAnchor(e){const t=document.createElement("a");return t.title=this.i18nService.t("view"),t.innerHTML="<code>"+e+"</code>",t}getShortId(e){return null==e?void 0:e.substring(0,8)}toDateTimeLocalString(e){return e.getFullYear()+"-"+this.pad(e.getMonth()+1)+"-"+this.pad(e.getDate())+"T"+this.pad(e.getHours())+":"+this.pad(e.getMinutes())}pad(e){const t=Math.floor(Math.abs(e));return(t<10?"0":"")+t}}Oc.ɵfac=function(e){return new(e||Oc)(o["ɵɵinject"](k.D),o["ɵɵinject"](j.d))},Oc.ɵprov=o["ɵɵdefineInjectable"]({token:Oc,factory:Oc.ɵfac});class Tc{constructor(){this.cipherInfo=!0}}var Bc=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Mc(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",11),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function Dc(e,t){1&e&&(o["ɵɵelementStart"](0,"div",12),o["ɵɵtext"](1,"\n        "),o["ɵɵelement"](2,"i",13),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n        "),o["ɵɵelementStart"](5,"span",14),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n      "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function Fc(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"noEventsInList"),"\n        "))}function Rc(e,t){1&e&&(o["ɵɵelementStart"](0,"th",34),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"user")))}function Uc(e,t){if(1&e&&(o["ɵɵelementStart"](0,"td"),o["ɵɵtext"](1,"\n                "),o["ɵɵelementStart"](2,"span",37),o["ɵɵtext"](3),o["ɵɵelementEnd"](),o["ɵɵtext"](4,"\n              "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",e.userEmail),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.userName)}}function zc(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"date"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"td"),o["ɵɵtext"](7,"\n                "),o["ɵɵelement"](8,"i",35),o["ɵɵtext"](9,"\n                "),o["ɵɵelementStart"](10,"span",14),o["ɵɵtext"](11),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵtemplate"](14,Uc,5,2,"td",25),o["ɵɵtext"](15,"\n              "),o["ɵɵelement"](16,"td",36),o["ɵɵtext"](17,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](4,10,e.date,"medium")),o["ɵɵadvance"](5),o["ɵɵclassMapInterpolate1"]("text-muted bwi bwi-lg ",e.appIcon,""),o["ɵɵpropertyInterpolate2"]("title","",e.appName,", ",e.ip,""),o["ɵɵadvance"](3),o["ɵɵtextInterpolate2"]("",e.appName,", ",e.ip,""),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",n.showUser),o["ɵɵadvance"](2),o["ɵɵproperty"]("innerHTML",e.message,o["ɵɵsanitizeHtml"])}}function Nc(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",28),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"thead"),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"tr"),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"th",29),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"th",30),o["ɵɵtext"](11,"\n                "),o["ɵɵelementStart"](12,"span",14),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n              "),o["ɵɵtemplate"](17,Rc,3,3,"th",31),o["ɵɵtext"](18,"\n              "),o["ɵɵelementStart"](19,"th",32),o["ɵɵtext"](20),o["ɵɵpipe"](21,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n          "),o["ɵɵelementStart"](25,"tbody"),o["ɵɵtext"](26,"\n            "),o["ɵɵtemplate"](27,zc,18,13,"tr",33),o["ɵɵtext"](28,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,5,"timestamp")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,7,"device")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.showUser),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](21,9,"event")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngForOf",e.events)}}function Vc(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",38,39),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).loadEvents(!1)})),o["ɵɵtext"](2,"\n          "),o["ɵɵelement"](3,"i",40),o["ɵɵpipe"](4,"i18n"),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"span"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"](2);o["ɵɵproperty"]("appApiAction",t.morePromise)("disabled",t.loaded&&e.loading),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](4,4,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,6,"loadMore"))}}const Hc=function(e){return{"bwi-spin":e}};function jc(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",12),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"div",15),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"div",16),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"label",17),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n            "),o["ɵɵelementStart"](10,"input",18),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().start=t})),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n            "),o["ɵɵelementStart"](13,"span",19),o["ɵɵtext"](14,"-"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n            "),o["ɵɵelementStart"](16,"label",20),o["ɵɵtext"](17),o["ɵɵpipe"](18,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n            "),o["ɵɵelementStart"](20,"input",21),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().end=t})),o["ɵɵpipe"](21,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n          "),o["ɵɵelementStart"](24,"button",22,23),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().loadEvents(!0)})),o["ɵɵtext"](26,"\n            "),o["ɵɵelement"](27,"i",24),o["ɵɵtext"](28),o["ɵɵpipe"](29,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n        "),o["ɵɵelement"](32,"hr"),o["ɵɵtext"](33,"\n        "),o["ɵɵtemplate"](34,Fc,3,3,"div",25),o["ɵɵtext"](35,"\n        "),o["ɵɵtemplate"](36,Nc,30,11,"table",26),o["ɵɵtext"](37,"\n        "),o["ɵɵtemplate"](38,Vc,10,8,"button",27),o["ɵɵtext"](39,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](25),t=o["ɵɵnextContext"]();o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,13,"startDate")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](11,15,"startDate")),o["ɵɵproperty"]("ngModel",t.start),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](18,17,"endDate")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](21,19,"endDate")),o["ɵɵproperty"]("ngModel",t.end),o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.refreshPromise)("disabled",t.loaded&&e.loading),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](23,Hc,t.loaded&&e.loading)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](29,21,"refresh"),"\n          "),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",!t.events||!t.events.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.events&&t.events.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.continuationToken)}}class Lc{constructor(e,t,n,i,r,o){this.apiService=e,this.i18nService=t,this.eventService=n,this.platformUtilsService=i,this.userNamePipe=r,this.logService=o,this.showUser=!1,this.loading=!0,this.loaded=!1,this.orgUsersUserIdMap=new Map,this.orgUsersIdMap=new Map}ngOnInit(){return Bc(this,void 0,void 0,(function*(){const e=this.eventService.getDefaultDateFilters();this.start=e[0],this.end=e[1],yield this.load()}))}load(){return Bc(this,void 0,void 0,(function*(){if(this.showUser){(yield this.apiService.getOrganizationUsers(this.organizationId)).data.forEach((e=>{const t=this.userNamePipe.transform(e);this.orgUsersIdMap.set(e.id,{name:t,email:e.email}),this.orgUsersUserIdMap.set(e.userId,{name:t,email:e.email})}))}yield this.loadEvents(!0),this.loaded=!0}))}loadEvents(e){return Bc(this,void 0,void 0,(function*(){if(null!=this.refreshPromise||null!=this.morePromise)return;let t,n=null;try{n=this.eventService.formatDateFilters(this.start,this.end)}catch(r){return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("invalidDateRange"))}this.loading=!0;try{let i;i="user"===this.entity&&this.providerId?this.apiService.getEventsProviderUser(this.providerId,this.entityId,n[0],n[1],e?null:this.continuationToken):"user"===this.entity?this.apiService.getEventsOrganizationUser(this.organizationId,this.entityId,n[0],n[1],e?null:this.continuationToken):this.apiService.getEventsCipher(this.entityId,n[0],n[1],e?null:this.continuationToken),e?this.refreshPromise=i:this.morePromise=i,t=yield i}catch(r){this.logService.error(r)}this.continuationToken=t.continuationToken;const i=yield Promise.all(t.data.map((e=>Bc(this,void 0,void 0,(function*(){const t=null==e.actingUserId?e.userId:e.actingUserId,n=yield this.eventService.getEventInfo(e),i=this.showUser&&null!=t&&this.orgUsersUserIdMap.has(t)?this.orgUsersUserIdMap.get(t):null;return{message:n.message,appIcon:n.appIcon,appName:n.appName,userId:t,userName:null!=i?i.name:this.showUser?this.i18nService.t("unknown"):null,userEmail:null!=i?i.email:this.showUser?"":null,date:e.date,ip:e.ipAddress,type:e.type}})))));!e&&null!=this.events&&this.events.length>0?this.events=this.events.concat(i):this.events=i,this.loading=!1,this.morePromise=null,this.refreshPromise=null}))}}Lc.ɵfac=function(e){return new(e||Lc)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Oc),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Pc.z),o["ɵɵdirectiveInject"](L.$))},Lc.ɵcmp=o["ɵɵdefineComponent"]({type:Lc,selectors:[["app-entity-events"]],inputs:{name:"name",entity:"entity",entityId:"entityId",organizationId:"organizationId",providerId:"providerId",showUser:"showUser"},decls:36,vars:12,consts:[["role","dialog","aria-modal","true","aria-labelledby","eventLogsTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","eventLogsTitle",1,"modal-title"],["class","text-muted",4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"text-muted"],[1,"modal-body"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"d-flex"],[1,"form-inline"],["for","start",1,"sr-only"],["type","datetime-local","id","start","placeholder","YYYY-MM-DDTHH:MM",1,"form-control","form-control-sm",3,"placeholder","ngModel","ngModelChange"],[1,"mx-2"],["for","end",1,"sr-only"],["type","datetime-local","id","end","placeholder","YYYY-MM-DDTHH:MM",1,"form-control","form-control-sm",3,"placeholder","ngModel","ngModelChange"],["type","button",1,"btn","btn-sm","btn-outline-primary","ml-3",3,"appApiAction","disabled","click"],["refreshBtn",""],["aria-hidden","true",1,"bwi","bwi-refresh","bwi-fw",3,"ngClass"],[4,"ngIf"],["class","table table-hover mb-0",4,"ngIf"],["type","button","class","btn btn-block btn-link btn-submit",3,"appApiAction","disabled","click",4,"ngIf"],[1,"table","table-hover","mb-0"],["width","210",1,"border-top-0"],["width","40",1,"border-top-0"],["class","border-top-0","width","150",4,"ngIf"],[1,"border-top-0"],[4,"ngFor","ngForOf"],["width","150",1,"border-top-0"],["aria-hidden","true",3,"title"],[3,"innerHTML"],[3,"appA11yTitle"],["type","button",1,"btn","btn-block","btn-link","btn-submit",3,"appApiAction","disabled","click"],["moreBtn",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h2",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵtemplate"](11,Mc,2,1,"small",5),o["ɵɵtext"](12,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵelementStart"](14,"button",6),o["ɵɵpipe"](15,"i18n"),o["ɵɵtext"](16,"\n          "),o["ɵɵelementStart"](17,"span",7),o["ɵɵtext"](18,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵtemplate"](22,Dc,9,6,"div",8),o["ɵɵtext"](23,"\n      "),o["ɵɵtemplate"](24,jc,40,25,"div",8),o["ɵɵtext"](25,"\n      "),o["ɵɵelementStart"](26,"div",9),o["ɵɵtext"](27,"\n        "),o["ɵɵelementStart"](28,"button",10),o["ɵɵtext"](29),o["ɵɵpipe"](30,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](10,6,"eventLogs"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.name),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](15,8,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",!t.loaded),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.loaded),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](30,10,"close"),"\n        "))},directives:[B.NgIf,pe,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,Y.b,B.NgClass,B.NgForOf],pipes:[M.C,B.DatePipe],encapsulation:2});var Kc=n(54408),Gc=n(11975);class qc{constructor(e){this.cipher=new Tr.a(e),this.collectionIds=e.collectionIds}}var _c=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function $c(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",26),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"personalOwnershipPolicyInEffect"),"\n        "))}function Wc(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function Qc(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",16),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",17),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"label",27),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"select",28),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.type=t})),o["ɵɵtext"](9,"\n              "),o["ɵɵtemplate"](10,Wc,2,2,"option",29),o["ɵɵtext"](11,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,4,"whatTypeOfItem")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.type)("disabled",e.cipher.isDeleted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.typeOptions)}}function Yc(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.id),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function Zc(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",17),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"label",31),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"select",32),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.folderId=t})),o["ɵɵtext"](7,"\n              "),o["ɵɵtemplate"](8,Yc,2,2,"option",29),o["ɵɵpipe"](9,"async"),o["ɵɵtext"](10,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,4,"folder")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.folderId)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",o["ɵɵpipeBind1"](9,6,e.folders$))}}function Jc(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",41),o["ɵɵtext"](1,"\n                  "),o["ɵɵelementStart"](2,"button",50),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](3);return t.copy(t.cipher.login.username,"username","Username")})),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n                    "),o["ɵɵelement"](5,"i",44),o["ɵɵtext"](6,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n                "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](3,1,"copyUsername")))}function Xc(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",57),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](4).generatePassword()})),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n                    "),o["ɵɵelement"](3,"i",58),o["ɵɵtext"](4,"\n                  "),o["ɵɵelementEnd"]()}2&e&&o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](1,1,"generatePassword"))}function ep(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",51),o["ɵɵtext"](1,"\n                  "),o["ɵɵtemplate"](2,Xc,5,3,"a",52),o["ɵɵtext"](3,"\n                  "),o["ɵɵelementStart"](4,"a",53,54),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).checkPassword()})),o["ɵɵpipe"](6,"i18n"),o["ɵɵtext"](7,"\n                    "),o["ɵɵelement"](8,"i",55),o["ɵɵtext"](9,"\n                    "),o["ɵɵelement"](10,"i",56),o["ɵɵpipe"](11,"i18n"),o["ɵɵtext"](12,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n                "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](5),t=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.cipher.viewPassword),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](6,6,"checkPassword")),o["ɵɵproperty"]("appApiAction",t.checkPasswordPromise),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](11,8,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}function tp(e,t){1&e&&o["ɵɵelement"](0,"app-premium-badge",62)}function np(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",63),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](4).upgradeOrganization()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](2,1,"upgrade"),"\n                "))}function ip(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"img",59),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n                "),o["ɵɵtemplate"](5,tp,1,0,"app-premium-badge",60),o["ɵɵtext"](6,"\n                "),o["ɵɵtemplate"](7,np,3,3,"a",61),o["ɵɵtext"](8,"\n              "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"verificationCodeTotp")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.organization&&!e.cipher.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.organization&&!e.organization.useTotp||!e.organization&&!e.canAccessPremium&&e.cipher.organizationId&&!e.cipher.organizationUseTotp)}}const rp=function(e){return{"stroke-dashoffset.px":e}};function op(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",64),o["ɵɵtext"](1,"\n                "),o["ɵɵelementStart"](2,"span",65),o["ɵɵtext"](3,"\n                  "),o["ɵɵelementStart"](4,"span",66),o["ɵɵtext"](5),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n                  "),o["ɵɵnamespaceSVG"](),o["ɵɵelementStart"](7,"svg"),o["ɵɵtext"](8,"\n                    "),o["ɵɵelementStart"](9,"g"),o["ɵɵtext"](10,"\n                      "),o["ɵɵelement"](11,"circle",67),o["ɵɵtext"](12,"\n                      "),o["ɵɵelement"](13,"circle",68),o["ɵɵtext"](14,"\n                    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n                "),o["ɵɵnamespaceHTML"](),o["ɵɵelementStart"](18,"span",69),o["ɵɵpipe"](19,"i18n"),o["ɵɵtext"](20),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n                "),o["ɵɵelementStart"](22,"button",70),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](3);return t.copy(t.totpCode,"verificationCodeTotp","TOTP")})),o["ɵɵpipe"](23,"i18n"),o["ɵɵtext"](24,"\n                  "),o["ɵɵelement"](25,"i",71),o["ɵɵtext"](26,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n              "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.totpSec),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngStyle",o["ɵɵpureFunction1"](9,rp,e.totpDash)),o["ɵɵadvance"](7),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](19,5,"verificationCodeTotp")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.totpCodeFormatted),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](23,7,"copyVerificationCode"))}}function ap(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                      ",e.name,"\n                    ")}}function sp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",82),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](4).removeUri(t)})),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n                    "),o["ɵɵelement"](3,"i",83),o["ɵɵtext"](4,"\n                  "),o["ɵɵelementEnd"]()}2&e&&o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](1,1,"remove"))}function lp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",16),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"div",73),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"label",74),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n                "),o["ɵɵelementStart"](8,"div",34),o["ɵɵtext"](9,"\n                  "),o["ɵɵelementStart"](10,"input",75),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.uri=t})),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n                  "),o["ɵɵelementStart"](13,"div",41),o["ɵɵtext"](14,"\n                    "),o["ɵɵelementStart"](15,"button",42),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).launch(t)})),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n                      "),o["ɵɵelement"](18,"i",76),o["ɵɵtext"](19,"\n                    "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n                    "),o["ɵɵelementStart"](21,"button",50),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).copy(t.uri,"uri","URI")})),o["ɵɵpipe"](22,"i18n"),o["ɵɵtext"](23,"\n                      "),o["ɵɵelement"](24,"i",44),o["ɵɵtext"](25,"\n                    "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n              "),o["ɵɵelementStart"](30,"div",77),o["ɵɵtext"](31,"\n                "),o["ɵɵelementStart"](32,"div",37),o["ɵɵtext"](33,"\n                  "),o["ɵɵelementStart"](34,"label",74),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n                  "),o["ɵɵelementStart"](38,"a",78),o["ɵɵpipe"](39,"i18n"),o["ɵɵtext"](40,"\n                    "),o["ɵɵelement"](41,"i",79),o["ɵɵtext"](42,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n                "),o["ɵɵelementStart"](45,"div",37),o["ɵɵtext"](46,"\n                  "),o["ɵɵelementStart"](47,"select",80),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.match=t}))("change",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).loginUriMatchChanged(t)})),o["ɵɵtext"](48,"\n                    "),o["ɵɵtemplate"](49,ap,2,2,"option",29),o["ɵɵtext"](50,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n                  "),o["ɵɵtemplate"](52,sp,5,3,"button",81),o["ɵɵtext"](53,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=o["ɵɵnextContext"](4);o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate1"]("for","loginUri",n,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](6,19,"uriPosition",n+1)),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate1"]("id","loginUri",n,""),o["ɵɵpropertyInterpolate1"]("name","Login.Uris[",n,"].Uri"),o["ɵɵpropertyInterpolate1"]("placeholder","",o["ɵɵpipeBind1"](11,22,"ex")," https://google.com"),o["ɵɵproperty"]("ngModel",e.uri)("disabled",i.cipher.isDeleted||i.viewOnly),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](16,24,"launch")),o["ɵɵproperty"]("disabled",!e.canLaunch),o["ɵɵadvance"](6),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](22,26,"copyUri")),o["ɵɵadvance"](13),o["ɵɵpropertyInterpolate1"]("for","loginUriMatch",n,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                    ",o["ɵɵpipeBind1"](36,28,"matchDetection"),"\n                  "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](39,30,"learnMore")),o["ɵɵadvance"](9),o["ɵɵpropertyInterpolate1"]("id","loginUriMatch",n,""),o["ɵɵpropertyInterpolate1"]("name","Login.Uris[",n,"].Match"),o["ɵɵproperty"]("ngModel",e.match)("disabled",i.cipher.isDeleted||i.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",i.uriMatchOptions),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!i.cipher.isDeleted&&!i.viewOnly)}}function dp(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵtemplate"](2,lp,56,32,"div",72),o["ɵɵtext"](3,"\n          "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.cipher.login.uris)("ngForTrackBy",e.trackByFunction)}}function cp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",84),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).addUri()})),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",85),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](4,1,"newUri"),"\n          "))}const pp=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}},up=function(e){return{low:e}};function mp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",16),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"div",17),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"label",33),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"div",34),o["ɵɵtext"](11,"\n                "),o["ɵɵelementStart"](12,"input",35),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.login.username=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n                "),o["ɵɵtemplate"](14,Jc,8,3,"div",36),o["ɵɵtext"](15,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n            "),o["ɵɵelementStart"](18,"div",17),o["ɵɵtext"](19,"\n              "),o["ɵɵelementStart"](20,"div",37),o["ɵɵtext"](21,"\n                "),o["ɵɵelementStart"](22,"label",38),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n                "),o["ɵɵtemplate"](26,ep,14,10,"div",39),o["ɵɵtext"](27,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n              "),o["ɵɵelementStart"](29,"div",34),o["ɵɵtext"](30,"\n                "),o["ɵɵelementStart"](31,"input",40),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.login.password=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n                "),o["ɵɵelementStart"](33,"div",41),o["ɵɵtext"](34,"\n                  "),o["ɵɵelementStart"](35,"button",42),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).togglePassword()})),o["ɵɵpipe"](36,"i18n"),o["ɵɵtext"](37,"\n                    "),o["ɵɵelement"](38,"i",43),o["ɵɵtext"](39,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n                  "),o["ɵɵelementStart"](41,"button",42),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2);return t.copy(t.cipher.login.password,"password","Password")})),o["ɵɵpipe"](42,"i18n"),o["ɵɵtext"](43,"\n                    "),o["ɵɵelement"](44,"i",44),o["ɵɵtext"](45,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n          "),o["ɵɵelementStart"](51,"div",16),o["ɵɵtext"](52,"\n            "),o["ɵɵelementStart"](53,"div",17),o["ɵɵtext"](54,"\n              "),o["ɵɵelementStart"](55,"label",45),o["ɵɵtext"](56),o["ɵɵpipe"](57,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n              "),o["ɵɵelementStart"](59,"input",46),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.login.totp=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n            "),o["ɵɵelementStart"](62,"div",47),o["ɵɵtext"](63,"\n              "),o["ɵɵtemplate"](64,ip,9,5,"div",21),o["ɵɵtext"](65,"\n              "),o["ɵɵtemplate"](66,op,28,11,"div",48),o["ɵɵtext"](67,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](68,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](69,"\n          "),o["ɵɵtemplate"](70,dp,4,2,"ng-container",21),o["ɵɵtext"](71,"\n          "),o["ɵɵtemplate"](72,cp,5,3,"a",49),o["ɵɵtext"](73,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,23,"username")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngModel",e.cipher.login.username)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.cipher.isDeleted),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](24,25,"password")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.cipher.isDeleted&&!e.viewOnly),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("type",e.showPassword?"text":"password"),o["ɵɵproperty"]("ngModel",e.cipher.login.password)("disabled",e.cipher.isDeleted||!e.cipher.viewPassword||e.viewOnly),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](36,27,"toggleVisibility")),o["ɵɵproperty"]("disabled",!e.cipher.viewPassword),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](33,pp,!e.showPassword,e.showPassword)),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](42,29,"copyPassword")),o["ɵɵproperty"]("disabled",!e.cipher.viewPassword),o["ɵɵadvance"](15),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](57,31,"authenticatorKeyTotp")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("type",e.cipher.viewPassword?"text":"password"),o["ɵɵproperty"]("ngModel",e.cipher.login.totp)("disabled",e.cipher.isDeleted||!e.cipher.viewPassword||e.viewOnly),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](36,up,e.totpLow)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.cipher.login.totp||!e.totpCode),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.cipher.login.totp&&e.totpCode),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.cipher.login.hasUris),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.cipher.isDeleted&&!e.viewOnly)}}function hp(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function vp(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                  ",e.name,"\n                ")}}function gp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",16),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"div",17),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"label",86),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"input",87),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.cardholderName=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n            "),o["ɵɵelementStart"](13,"div",17),o["ɵɵtext"](14,"\n              "),o["ɵɵelementStart"](15,"label",88),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n              "),o["ɵɵelementStart"](19,"select",89),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.brand=t})),o["ɵɵtext"](20,"\n                "),o["ɵɵtemplate"](21,hp,2,2,"option",29),o["ɵɵtext"](22,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n          "),o["ɵɵelementStart"](26,"div",16),o["ɵɵtext"](27,"\n            "),o["ɵɵelementStart"](28,"div",17),o["ɵɵtext"](29,"\n              "),o["ɵɵelementStart"](30,"label",90),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n              "),o["ɵɵelementStart"](34,"div",34),o["ɵɵtext"](35,"\n                "),o["ɵɵelementStart"](36,"input",91),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.number=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n                "),o["ɵɵelementStart"](38,"div",41),o["ɵɵtext"](39,"\n                  "),o["ɵɵelementStart"](40,"button",50),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).toggleCardNumber()})),o["ɵɵpipe"](41,"i18n"),o["ɵɵtext"](42,"\n                    "),o["ɵɵelement"](43,"i",43),o["ɵɵtext"](44,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n                  "),o["ɵɵelementStart"](46,"button",50),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2);return t.copy(t.cipher.card.number,"number","Number")})),o["ɵɵpipe"](47,"i18n"),o["ɵɵtext"](48,"\n                    "),o["ɵɵelement"](49,"i",44),o["ɵɵtext"](50,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n            "),o["ɵɵelementStart"](55,"div",92),o["ɵɵtext"](56,"\n              "),o["ɵɵelementStart"](57,"label",93),o["ɵɵtext"](58),o["ɵɵpipe"](59,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n              "),o["ɵɵelementStart"](61,"select",94),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.expMonth=t})),o["ɵɵtext"](62,"\n                "),o["ɵɵtemplate"](63,vp,2,2,"option",29),o["ɵɵtext"](64,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n            "),o["ɵɵelementStart"](67,"div",92),o["ɵɵtext"](68,"\n              "),o["ɵɵelementStart"](69,"label",95),o["ɵɵtext"](70),o["ɵɵpipe"](71,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n              "),o["ɵɵelementStart"](73,"input",96),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.expYear=t})),o["ɵɵpipe"](74,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](75,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](77,"\n          "),o["ɵɵelementStart"](78,"div",16),o["ɵɵtext"](79,"\n            "),o["ɵɵelementStart"](80,"div",17),o["ɵɵtext"](81,"\n              "),o["ɵɵelementStart"](82,"label",97),o["ɵɵtext"](83),o["ɵɵpipe"](84,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](85,"\n              "),o["ɵɵelementStart"](86,"div",34),o["ɵɵtext"](87,"\n                "),o["ɵɵelementStart"](88,"input",98),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.code=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](89,"\n                "),o["ɵɵelementStart"](90,"div",41),o["ɵɵtext"](91,"\n                  "),o["ɵɵelementStart"](92,"button",50),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).toggleCardCode()})),o["ɵɵpipe"](93,"i18n"),o["ɵɵtext"](94,"\n                    "),o["ɵɵelement"](95,"i",43),o["ɵɵtext"](96,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](97,"\n                  "),o["ɵɵelementStart"](98,"button",50),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2);return t.copy(t.cipher.card.code,"securityCode","Security Code")})),o["ɵɵpipe"](99,"i18n"),o["ɵɵtext"](100,"\n                    "),o["ɵɵelement"](101,"i",44),o["ɵɵtext"](102,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](103,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](104,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](105,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](106,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](107,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,29,"cardholderName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.card.cardholderName)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,31,"brand")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.card.brand)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.cardBrandOptions),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](32,33,"number")),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("type",e.showCardNumber?"text":"password"),o["ɵɵproperty"]("ngModel",e.cipher.card.number)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](41,35,"toggleVisibility")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](51,pp,!e.showCardNumber,e.showCardNumber)),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](47,37,"copyNumber")),o["ɵɵadvance"](12),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](59,39,"expirationMonth")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.card.expMonth)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.cardExpMonthOptions),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](71,41,"expirationYear")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate1"]("placeholder","",o["ɵɵpipeBind1"](74,43,"ex")," 2019"),o["ɵɵproperty"]("ngModel",e.cipher.card.expYear)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](84,45,"securityCode")),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("type",e.showCardCode?"text":"password"),o["ɵɵproperty"]("ngModel",e.cipher.card.code)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](93,47,"toggleVisibility")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](54,pp,!e.showCardCode,e.showCardCode)),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](99,49,"securityCode"))}}function fp(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                  ",e.name,"\n                ")}}function xp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",16),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"div",99),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"label",100),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"select",101),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.title=t})),o["ɵɵtext"](11,"\n                "),o["ɵɵtemplate"](12,fp,2,2,"option",29),o["ɵɵtext"](13,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n          "),o["ɵɵelementStart"](17,"div",16),o["ɵɵtext"](18,"\n            "),o["ɵɵelementStart"](19,"div",99),o["ɵɵtext"](20,"\n              "),o["ɵɵelementStart"](21,"label",102),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n              "),o["ɵɵelementStart"](25,"input",103),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.firstName=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n            "),o["ɵɵelementStart"](28,"div",99),o["ɵɵtext"](29,"\n              "),o["ɵɵelementStart"](30,"label",104),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n              "),o["ɵɵelementStart"](34,"input",105),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.middleName=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n            "),o["ɵɵelementStart"](37,"div",99),o["ɵɵtext"](38,"\n              "),o["ɵɵelementStart"](39,"label",106),o["ɵɵtext"](40),o["ɵɵpipe"](41,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n              "),o["ɵɵelementStart"](43,"input",107),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.lastName=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n          "),o["ɵɵelementStart"](47,"div",16),o["ɵɵtext"](48,"\n            "),o["ɵɵelementStart"](49,"div",99),o["ɵɵtext"](50,"\n              "),o["ɵɵelementStart"](51,"label",108),o["ɵɵtext"](52),o["ɵɵpipe"](53,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n              "),o["ɵɵelementStart"](55,"input",109),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.username=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](57,"\n            "),o["ɵɵelementStart"](58,"div",99),o["ɵɵtext"](59,"\n              "),o["ɵɵelementStart"](60,"label",110),o["ɵɵtext"](61),o["ɵɵpipe"](62,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](63,"\n              "),o["ɵɵelementStart"](64,"input",111),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.company=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n          "),o["ɵɵelementStart"](68,"div",16),o["ɵɵtext"](69,"\n            "),o["ɵɵelementStart"](70,"div",99),o["ɵɵtext"](71,"\n              "),o["ɵɵelementStart"](72,"label",112),o["ɵɵtext"](73),o["ɵɵpipe"](74,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](75,"\n              "),o["ɵɵelementStart"](76,"input",113),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.ssn=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](77,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](78,"\n            "),o["ɵɵelementStart"](79,"div",99),o["ɵɵtext"](80,"\n              "),o["ɵɵelementStart"](81,"label",114),o["ɵɵtext"](82),o["ɵɵpipe"](83,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](84,"\n              "),o["ɵɵelementStart"](85,"input",115),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.passportNumber=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](86,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](87,"\n            "),o["ɵɵelementStart"](88,"div",99),o["ɵɵtext"](89,"\n              "),o["ɵɵelementStart"](90,"label",116),o["ɵɵtext"](91),o["ɵɵpipe"](92,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](93,"\n              "),o["ɵɵelementStart"](94,"input",117),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.licenseNumber=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](95,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](96,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](97,"\n          "),o["ɵɵelementStart"](98,"div",16),o["ɵɵtext"](99,"\n            "),o["ɵɵelementStart"](100,"div",17),o["ɵɵtext"](101,"\n              "),o["ɵɵelementStart"](102,"label",118),o["ɵɵtext"](103),o["ɵɵpipe"](104,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](105,"\n              "),o["ɵɵelementStart"](106,"input",119),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.email=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](107,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](108,"\n            "),o["ɵɵelementStart"](109,"div",17),o["ɵɵtext"](110,"\n              "),o["ɵɵelementStart"](111,"label",120),o["ɵɵtext"](112),o["ɵɵpipe"](113,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](114,"\n              "),o["ɵɵelementStart"](115,"input",121),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.phone=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](116,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](117,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](118,"\n          "),o["ɵɵelementStart"](119,"div",16),o["ɵɵtext"](120,"\n            "),o["ɵɵelementStart"](121,"div",17),o["ɵɵtext"](122,"\n              "),o["ɵɵelementStart"](123,"label",122),o["ɵɵtext"](124),o["ɵɵpipe"](125,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](126,"\n              "),o["ɵɵelementStart"](127,"input",123),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.address1=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](128,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](129,"\n            "),o["ɵɵelementStart"](130,"div",17),o["ɵɵtext"](131,"\n              "),o["ɵɵelementStart"](132,"label",124),o["ɵɵtext"](133),o["ɵɵpipe"](134,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](135,"\n              "),o["ɵɵelementStart"](136,"input",125),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.address2=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](137,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](138,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](139,"\n          "),o["ɵɵelementStart"](140,"div",16),o["ɵɵtext"](141,"\n            "),o["ɵɵelementStart"](142,"div",17),o["ɵɵtext"](143,"\n              "),o["ɵɵelementStart"](144,"label",126),o["ɵɵtext"](145),o["ɵɵpipe"](146,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](147,"\n              "),o["ɵɵelementStart"](148,"input",127),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.address3=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](149,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](150,"\n            "),o["ɵɵelementStart"](151,"div",17),o["ɵɵtext"](152,"\n              "),o["ɵɵelementStart"](153,"label",128),o["ɵɵtext"](154),o["ɵɵpipe"](155,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](156,"\n              "),o["ɵɵelementStart"](157,"input",129),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.city=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](158,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](159,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](160,"\n          "),o["ɵɵelementStart"](161,"div",16),o["ɵɵtext"](162,"\n            "),o["ɵɵelementStart"](163,"div",17),o["ɵɵtext"](164,"\n              "),o["ɵɵelementStart"](165,"label",130),o["ɵɵtext"](166),o["ɵɵpipe"](167,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](168,"\n              "),o["ɵɵelementStart"](169,"input",131),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.state=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](170,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](171,"\n            "),o["ɵɵelementStart"](172,"div",17),o["ɵɵtext"](173,"\n              "),o["ɵɵelementStart"](174,"label",132),o["ɵɵtext"](175),o["ɵɵpipe"](176,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](177,"\n              "),o["ɵɵelementStart"](178,"input",133),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.postalCode=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](179,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](180,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](181,"\n          "),o["ɵɵelementStart"](182,"div",16),o["ɵɵtext"](183,"\n            "),o["ɵɵelementStart"](184,"div",17),o["ɵɵtext"](185,"\n              "),o["ɵɵelementStart"](186,"label",134),o["ɵɵtext"](187),o["ɵɵpipe"](188,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](189,"\n              "),o["ɵɵelementStart"](190,"input",135),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.country=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](191,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](192,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](193,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,55,"title")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.title)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.identityTitleOptions),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,57,"firstName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.firstName)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](32,59,"middleName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.middleName)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](41,61,"lastName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.lastName)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](53,63,"username")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.username)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](62,65,"company")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.company)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](74,67,"ssn")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.ssn)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](83,69,"passportNumber")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.passportNumber)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](92,71,"licenseNumber")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.licenseNumber)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](104,73,"email")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.email)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](113,75,"phone")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.phone)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](125,77,"address1")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.address1)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](134,79,"address2")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.address2)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](146,81,"address3")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.address3)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](155,83,"cityTown")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.city)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](167,85,"stateProvince")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.state)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](176,87,"zipPostalCode")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.postalCode)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](188,89,"country")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.country)("disabled",e.cipher.isDeleted||e.viewOnly)}}function yp(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function Sp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"h3",136),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"div",16),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"div",137),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"label",138),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵelementStart"](14,"select",139),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.organizationId=t}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).organizationChanged()})),o["ɵɵtext"](15,"\n                "),o["ɵɵtemplate"](16,yp,2,2,"option",29),o["ɵɵtext"](17,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,5,"ownership")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,7,"whoOwnsThisItem")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.organizationId)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.ownershipOptions)}}function bp(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"noCollectionsInList"),"\n          "))}function wp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",141),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"input",142),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.checked=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n              "),o["ɵɵelementStart"](4,"label",143),o["ɵɵtext"](5),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=o["ɵɵnextContext"](4);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("id","collection-",n,""),o["ɵɵpropertyInterpolate1"]("name","Collection[",n,"].Checked"),o["ɵɵproperty"]("ngModel",e.checked)("disabled",i.cipher.isDeleted||i.viewOnly),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("for","collection-",n,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function Ip(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵtemplate"](2,wp,7,6,"div",140),o["ɵɵtext"](3,"\n          "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.collections)}}function Cp(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"h3",136),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵtemplate"](6,bp,3,3,"div",21),o["ɵɵtext"](7,"\n          "),o["ɵɵtemplate"](8,Ip,4,1,"ng-container",21),o["ɵɵtext"](9,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"collections")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.collections||!e.collections.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.collections&&e.collections.length)}}function Ep(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"b",145),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5),o["ɵɵpipe"](6,"date"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](4,2,"datePasswordUpdated"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind2"](6,4,e.cipher.passwordRevisionDisplayDate,"medium"),"\n            ")}}function kp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"b",145),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"a",146),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).viewHistory()})),o["ɵɵpipe"](7,"i18n"),o["ɵɵtext"](8),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](4,3,"passwordHistory"),":"),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](7,5,"view")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n                ",e.cipher.passwordHistory.length,"\n              ")}}function Pp(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"date"),o["ɵɵelementStart"](3,"span",148),o["ɵɵtext"](4),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind2"](2,2,e.lastUsedDate,"short")," -\n                "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](e.password)}}function Ap(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",62),o["ɵɵtext"](1,"\n              "),o["ɵɵtemplate"](2,Pp,6,5,"div",147),o["ɵɵtext"](3,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.cipher.passwordHistory)}}function Op(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",144),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"div"),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"b",145),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9),o["ɵɵpipe"](10,"date"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵtemplate"](12,Ep,7,7,"div",21),o["ɵɵtext"](13,"\n            "),o["ɵɵtemplate"](14,kp,10,7,"div",21),o["ɵɵtext"](15,"\n            "),o["ɵɵtemplate"](16,Ap,4,1,"div",60),o["ɵɵtext"](17,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](8,5,"dateUpdated"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind2"](10,7,e.cipher.revisionDate,"medium"),"\n            "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.showRevisionDate),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasPasswordHistory),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.viewingPasswordHistory)}}function Tp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"h3",136),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"div",141),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"input",149),o["ɵɵlistener"]("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).repromptChanged()})),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n            "),o["ɵɵelementStart"](10,"label",150),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementStart"](14,"a",151),o["ɵɵpipe"](15,"i18n"),o["ɵɵtext"](16,"\n              "),o["ɵɵelement"](17,"i",79),o["ɵɵtext"](18,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,5,"options")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngModel",e.reprompt)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,7,"passwordPrompt")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](15,9,"learnMore"))}}function Bp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",13),o["ɵɵtext"](1,"\n        "),o["ɵɵtemplate"](2,$c,3,3,"app-callout",14),o["ɵɵtext"](3,"\n        "),o["ɵɵtemplate"](4,Qc,14,6,"div",15),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"div",16),o["ɵɵtext"](7,"\n          "),o["ɵɵelementStart"](8,"div",17),o["ɵɵtext"](9,"\n            "),o["ɵɵelementStart"](10,"label",18),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementStart"](14,"input",19),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().cipher.name=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n          "),o["ɵɵtemplate"](17,Zc,12,8,"div",20),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n        "),o["ɵɵtext"](20,"\n        "),o["ɵɵtemplate"](21,mp,74,38,"ng-container",21),o["ɵɵtext"](22,"\n        "),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,gp,108,57,"ng-container",21),o["ɵɵtext"](25,"\n        "),o["ɵɵtext"](26,"\n        "),o["ɵɵtemplate"](27,xp,194,91,"ng-container",21),o["ɵɵtext"](28,"\n        "),o["ɵɵelementStart"](29,"div",22),o["ɵɵtext"](30,"\n          "),o["ɵɵelementStart"](31,"label",23),o["ɵɵtext"](32),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n          "),o["ɵɵelementStart"](35,"textarea",24),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().cipher.notes=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n        "),o["ɵɵelement"](38,"app-vault-add-edit-custom-fields",25),o["ɵɵtext"](39,"\n        "),o["ɵɵtemplate"](40,Sp,21,9,"ng-container",21),o["ɵɵtext"](41,"\n        "),o["ɵɵtemplate"](42,Cp,10,5,"ng-container",21),o["ɵɵtext"](43,"\n        "),o["ɵɵtemplate"](44,Op,19,10,"ng-container",21),o["ɵɵtext"](45,"\n        "),o["ɵɵtemplate"](46,Tp,21,11,"ng-container",21),o["ɵɵtext"](47,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.allowOwnershipAssignment()&&!e.allowPersonal),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.editMode&&!e.viewOnly),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,20,"name")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.name)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.organization),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.cipher.type===e.cipherType.Login),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.cipher.type===e.cipherType.Card),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.cipher.type===e.cipherType.Identity),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](33,22,"notes")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.notes)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](3),o["ɵɵproperty"]("cipher",e.cipher)("thisCipherType",e.cipher.type)("viewOnly",e.viewOnly)("copy",e.copy.bind(e)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.allowOwnershipAssignment()),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",(!e.editMode||e.cloneMode)&&e.cipher.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.editMode),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.canUseReprompt)}}function Mp(e,t){if(1&e&&(o["ɵɵelementStart"](0,"button",152),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",153),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](),t=o["ɵɵreference"](5);o["ɵɵproperty"]("disabled",t.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,5,null!=e.cipher&&e.cipher.isDeleted?"restore":"save"))}}const Dp=function(e,t){return{"bwi-star-f":e,"bwi-star":t}};function Fp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",70),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).toggleFavorite()})),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n            "),o["ɵɵelement"](3,"i",43),o["ɵɵtext"](4,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](1,2,e.cipher.favorite?"unfavorite":"favorite")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](4,Dp,e.cipher.favorite,!e.cipher.favorite))}}function Rp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",157,158),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).delete()})),o["ɵɵpipe"](2,"i18n"),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"i",159),o["ɵɵtext"](5,"\n            "),o["ɵɵelement"](6,"i",160),o["ɵɵpipe"](7,"i18n"),o["ɵɵtext"](8,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"](2);o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](2,6,t.cipher.isDeleted?"permanentlyDelete":"delete")),o["ɵɵproperty"]("disabled",e.loading)("appApiAction",t.deletePromise),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](7,8,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}function Up(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",154),o["ɵɵtext"](1,"\n          "),o["ɵɵtemplate"](2,Fp,5,7,"button",155),o["ɵɵtext"](3,"\n          "),o["ɵɵtemplate"](4,Rp,9,10,"button",156),o["ɵɵtext"](5,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.organization&&!e.cipher.isDeleted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.editMode&&!e.cloneMode)}}class zp extends ba{constructor(e,t,n,i,r,o,a,s,l,d,c,p,u,m,h,v){super(e,t,n,i,r,o,a,s,l,c,p,u,v,m,h),this.apiService=d,this.originalCipher=null}allowOwnershipAssignment(){return null!=this.ownershipOptions&&(this.ownershipOptions.length>1||!this.allowPersonal)&&(null!=this.organization?this.cloneMode&&this.organization.canEditAnyCollection:!this.editMode||this.cloneMode)}loadCollections(){return this.organization.canEditAnyCollection?Promise.resolve(this.collections):super.loadCollections()}loadCipher(){const e=Object.create(null,{loadCipher:{get:()=>super.loadCipher}});return _c(this,void 0,void 0,(function*(){if(!this.organization.canEditAnyCollection)return yield e.loadCipher.call(this);const t=yield this.apiService.getCipherAdmin(this.cipherId),n=new Kc.O(t);return this.originalCipher=new Gc.t(n),new Gc.t(n)}))}encryptCipher(){return this.organization.canEditAnyCollection?this.cipherService.encrypt(this.cipher,null,this.originalCipher):super.encryptCipher()}saveCipher(e){const t=Object.create(null,{saveCipher:{get:()=>super.saveCipher}});return _c(this,void 0,void 0,(function*(){if(!this.organization.canEditAnyCollection||null==e.organizationId)return t.saveCipher.call(this,e);if(this.editMode&&!this.cloneMode){const t=new Tr.a(e);return this.apiService.putCipherAdmin(this.cipherId,t)}{const t=new qc(e);return this.apiService.postCipherAdmin(t)}}))}deleteCipher(){const e=Object.create(null,{deleteCipher:{get:()=>super.deleteCipher}});return _c(this,void 0,void 0,(function*(){return this.organization.canEditAnyCollection?this.cipher.isDeleted?this.apiService.deleteCipherAdmin(this.cipherId):this.apiService.putDeleteCipherAdmin(this.cipherId):e.deleteCipher.call(this)}))}}zp.ɵfac=function(e){return new(e||zp)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](Rr.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Zr),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](Jr.a),o["ɵɵdirectiveInject"](io),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](Xr.P),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](eo),o["ɵɵdirectiveInject"](Ii.M))},zp.ɵcmp=o["ɵɵdefineComponent"]({type:zp,selectors:[["app-org-vault-add-edit"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:36,vars:11,consts:[["role","dialog","aria-modal","true","aria-labelledby","cipherAddEditTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],["ngNativeValidate","","autocomplete","off",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","cipherAddEditTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["class","ml-auto",4,"ngIf"],[1,"modal-body"],["type","info",4,"ngIf"],["class","row",4,"ngIf"],[1,"row"],[1,"col-6","form-group"],["for","name"],["id","name","type","text","name","Name","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","col-6 form-group",4,"ngIf"],[4,"ngIf"],[1,"form-group"],["for","notes"],["id","notes","name","Notes","rows","6",1,"form-control",3,"ngModel","disabled","ngModelChange"],[3,"cipher","thisCipherType","viewOnly","copy"],["type","info"],["for","type"],["id","type","name","Type","appAutofocus","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["for","folder"],["id","folder","name","FolderId",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","loginUsername"],[1,"input-group"],["id","loginUsername","type","text","name","Login.Username","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","input-group-append",4,"ngIf"],[1,"d-flex"],["for","loginPassword"],["class","ml-auto d-flex",4,"ngIf"],["id","loginPassword","name","Login.Password","appInputVerbatim","","autocomplete","new-password",1,"form-control","text-monospace",3,"type","ngModel","disabled","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","disabled","click"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-clone"],["for","loginTotp"],["id","loginTotp","name","Login.Totp","appInputVerbatim","",1,"form-control","text-monospace",3,"type","ngModel","disabled","ngModelChange"],[1,"col-6","form-group","totp","d-flex","align-items-end",3,"ngClass"],["class","d-flex align-items-center",4,"ngIf"],["href","#","appStopClick","","class","d-inline-block mb-3",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","click"],[1,"ml-auto","d-flex"],["href","#","class","d-block mr-2 bwi-icon-above-input","appStopClick","",3,"appA11yTitle","click",4,"ngIf"],["href","#","appStopClick","",1,"d-block","bwi-icon-above-input",3,"appA11yTitle","appApiAction","click"],["checkPasswordBtn",""],["aria-hidden","true",1,"bwi","bwi-lg","bwi-fw","bwi-check-circle",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-fw","bwi-spinner","bwi-spin",3,"hidden","title"],["href","#","appStopClick","",1,"d-block","mr-2","bwi-icon-above-input",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-fw","bwi-generate"],["src","../../images/totp-countdown.png","id","totpImage",1,"ml-2",3,"title"],["class","ml-3",4,"ngIf"],["href","#","appStopClick","","bitBadge","","badgeType","primary","class","tw-ml-4",3,"click",4,"ngIf"],[1,"ml-3"],["href","#","appStopClick","","bitBadge","","badgeType","primary",1,"tw-ml-4",3,"click"],[1,"d-flex","align-items-center"],[1,"totp-countdown","mr-3","ml-2"],[1,"totp-sec"],["r","12.6","cy","16","cx","16",1,"totp-circle","inner",3,"ngStyle"],["r","14","cy","16","cx","16",1,"totp-circle","outer"],[1,"totp-code","mr-2",3,"title"],["type","button",1,"btn","btn-link",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-clone"],["class","row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-7","form-group"],[3,"for"],["type","text","appInputVerbatim","",1,"form-control",3,"id","name","ngModel","disabled","placeholder","ngModelChange"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-share-square"],[1,"col-5","form-group"],["href","https://bitwarden.com/help/uri-match-detection/","target","_blank","rel","noopener",1,"ml-auto",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],[1,"form-control","overflow-hidden",3,"id","name","ngModel","disabled","ngModelChange","change"],["type","button","class","btn btn-link text-danger ml-2",3,"appA11yTitle","click",4,"ngIf"],["type","button",1,"btn","btn-link","text-danger","ml-2",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-minus-circle","bwi-lg"],["href","#","appStopClick","",1,"d-inline-block","mb-3",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus-circle","bwi-fw"],["for","cardCardholderName"],["id","cardCardholderName","type","text","name","Card.CardCardholderName",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","cardBrand"],["id","cardBrand","name","Card.Brand",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","cardNumber"],["id","cardNumber","name","Card.Number","appInputVerbatim","","autocomplete","new-password",1,"form-control","text-monospace",3,"type","ngModel","disabled","ngModelChange"],[1,"col","form-group"],["for","cardExpMonth"],["id","cardExpMonth","name","Card.ExpMonth",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","cardExpYear"],["id","cardExpYear","type","text","name","Card.ExpYear",1,"form-control",3,"ngModel","placeholder","disabled","ngModelChange"],["for","cardCode"],["id","cardCode","name","Card.Code","appInputVerbatim","","autocomplete","new-password",1,"form-control","text-monospace",3,"type","ngModel","disabled","ngModelChange"],[1,"col-4","form-group"],["for","idTitle"],["id","idTitle","name","Identity.Title",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idFirstName"],["id","idFirstName","type","text","name","Identity.FirstName",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idMiddleName"],["id","idMiddleName","type","text","name","Identity.MiddleName",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idLastName"],["id","idLastName","type","text","name","Identity.LastName",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idUsername"],["id","idUsername","type","text","name","Identity.Username","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idCompany"],["id","idCompany","type","text","name","Identity.Company",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idSsn"],["id","idSsn","type","text","name","Identity.SSN","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idPassportNumber"],["id","idPassportNumber","type","text","name","Identity.PassportNumber","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idLicenseNumber"],["id","idLicenseNumber","type","text","name","Identity.LicenseNumber","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idEmail"],["id","idEmail","type","text","inputmode","email","name","Identity.Email","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idPhone"],["id","idPhone","type","text","inputmode","tel","name","Identity.Phone",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idAddress1"],["id","idAddress1","type","text","name","Identity.Address1",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idAddress2"],["id","idAddress2","type","text","name","Identity.Address2",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idAddress3"],["id","idAddress3","type","text","name","Identity.Address3",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idCity"],["id","idCity","type","text","name","Identity.City",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idState"],["id","idState","type","text","name","Identity.State",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idPostalCode"],["id","idPostalCode","type","text","name","Identity.PostalCode",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idCountry"],["id","idCountry","type","text","name","Identity.Country",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"mt-4"],[1,"col-5"],["for","organizationId"],["id","organizationId","name","OrganizationId",1,"form-control",3,"ngModel","disabled","ngModelChange","change"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","id","name","disabled","ngModelChange"],[1,"form-check-label",3,"for"],[1,"small","text-muted","mt-4"],[1,"font-weight-semibold"],["href","#","appStopClick","",3,"title","click"],[4,"ngFor","ngForOf"],[1,"generated-wrapper","text-monospace","ml-2"],["type","checkbox","id","passwordPrompt","name","passwordPrompt",1,"form-check-input",3,"ngModel","disabled","change"],["for","passwordPrompt",1,"form-check-label"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/managing-items/#protect-individual-items",3,"appA11yTitle"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[1,"ml-auto"],["type","button","class","btn btn-link",3,"appA11yTitle","click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click"],["deleteBtn",""],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-lg","bwi-fw",3,"hidden","title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"button",6),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"span",7),o["ɵɵtext"](16,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵtemplate"](20,Bp,48,24,"div",8),o["ɵɵtext"](21,"\n      "),o["ɵɵelementStart"](22,"div",9),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,Mp,9,7,"button",10),o["ɵɵtext"](25,"\n        "),o["ɵɵelementStart"](26,"button",11),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n        "),o["ɵɵtemplate"](30,Up,6,2,"div",12),o["ɵɵtext"](31,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](t.title),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,7,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",t.cipher),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!t.viewOnly),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](28,9,t.viewOnly?"close":"cancel"),"\n        "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.cipher&&!t.viewOnly))},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,B.NgIf,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,Co,Pe.O,d.SelectControlValueAccessor,Z.U,B.NgForOf,d.NgSelectOption,d["ɵNgSelectMultipleOption"],J.b,B.NgClass,Tn,Oo,Po.l,B.NgStyle,d.CheckboxControlValueAccessor],pipes:[M.C,B.AsyncPipe,B.DatePipe],encapsulation:2});var Np=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Vp(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.cipher.name)}}function Hp(e,t){1&e&&o["ɵɵelement"](0,"i",24)}function jp(e,t){1&e&&o["ɵɵelement"](0,"i",25)}function Lp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",26),o["ɵɵtext"](1,"\n                    "),o["ɵɵelementStart"](2,"a",27),o["ɵɵtext"](3,"\n                      "),o["ɵɵelement"](4,"i",28),o["ɵɵpipe"](5,"i18n"),o["ɵɵtext"](6,"\n                      "),o["ɵɵelementStart"](7,"span",29),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n                    "),o["ɵɵelementStart"](11,"button",30,31),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).reupload(t)})),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n                  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](12),t=o["ɵɵnextContext"]().$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](5,5,"attachmentFixDesc")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,7,"attachmentFixDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("appApiAction",n.reuploadPromises[t.id])("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n                      ",o["ɵɵpipeBind1"](14,9,"fix"),"\n                    ")}}function Kp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"td",32),o["ɵɵtext"](1,"\n                "),o["ɵɵelementStart"](2,"button",33,34),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).delete(t)})),o["ɵɵpipe"](4,"i18n"),o["ɵɵtext"](5,"\n                  "),o["ɵɵelement"](6,"i",35),o["ɵɵtext"](7,"\n                  "),o["ɵɵelement"](8,"i",36),o["ɵɵpipe"](9,"i18n"),o["ɵɵtext"](10,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n              "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](3),t=o["ɵɵnextContext"]().$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](4,6,"delete")),o["ɵɵproperty"]("appApiAction",n.deletePromises[t.id])("disabled",e.loading),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](9,8,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}function Gp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",16),o["ɵɵtext"](3,"\n                "),o["ɵɵtemplate"](4,Hp,1,0,"i",17),o["ɵɵtext"](5,"\n                "),o["ɵɵtemplate"](6,jp,1,0,"i",18),o["ɵɵtext"](7,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementStart"](9,"td",19),o["ɵɵtext"](10,"\n                "),o["ɵɵelementStart"](11,"div",20),o["ɵɵtext"](12,"\n                  "),o["ɵɵelementStart"](13,"a",21),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).download(t)})),o["ɵɵtext"](14),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n                  "),o["ɵɵtemplate"](16,Lp,16,11,"div",22),o["ɵɵtext"](17,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n                "),o["ɵɵelementStart"](19,"small"),o["ɵɵtext"](20),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n              "),o["ɵɵtemplate"](23,Kp,12,10,"td",23),o["ɵɵtext"](24,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!e.downloading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.downloading),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](e.fileName),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",n.showFixOldAttachments(e)),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](e.sizeName),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!n.viewOnly)}}function qp(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",14),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n            "),o["ɵɵtemplate"](4,Gp,25,6,"tr",15),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.cipher.attachments)}}function _p(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"h3"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"label",37),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelement"](10,"input",38),o["ɵɵtext"](11,"\n          "),o["ɵɵelementStart"](12,"small",39),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"newAttachment")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,5,"file")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,7,"maxFileSize")))}function $p(e,t){if(1&e&&(o["ɵɵelementStart"](0,"button",40),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",41),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"]()),2&e){o["ɵɵnextContext"]();const e=o["ɵɵreference"](5);o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,5,"save"))}}class Wp extends Ua{constructor(e,t,n,i,r,o,a,s){super(e,t,n,i,r,o,a,s),this.viewOnly=!1}reupload(e){const t=Object.create(null,{reuploadCipherAttachment:{get:()=>super.reuploadCipherAttachment}});return Np(this,void 0,void 0,(function*(){this.organization.canEditAnyCollection&&this.showFixOldAttachments(e)&&(yield t.reuploadCipherAttachment.call(this,e,!0))}))}loadCipher(){const e=Object.create(null,{loadCipher:{get:()=>super.loadCipher}});return Np(this,void 0,void 0,(function*(){if(!this.organization.canEditAnyCollection)return yield e.loadCipher.call(this);const t=yield this.apiService.getCipherAdmin(this.cipherId);return new Gc.t(new Kc.O(t))}))}saveCipherAttachment(e){return this.cipherService.saveAttachmentWithServer(this.cipherDomain,e,this.organization.canEditAnyCollection)}deleteCipherAttachment(e){return this.organization.canEditAnyCollection?this.apiService.deleteCipherAttachmentAdmin(this.cipherId,e):super.deleteCipherAttachment(e)}showFixOldAttachments(e){return null==e.key&&this.organization.canEditAnyCollection}}Wp.ɵfac=function(e){return new(e||Wp)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Ia._))},Wp.ɵcmp=o["ɵɵdefineComponent"]({type:Wp,selectors:[["app-org-vault-attachments"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:42,vars:14,consts:[["role","dialog","aria-modal","true","aria-labelledby","attachmentsTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","attachmentsTitle",1,"modal-title"],[4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["class","table table-hover table-list",4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"table","table-hover","table-list"],[4,"ngFor","ngForOf"],[1,"table-list-icon"],["class","bwi bwi-fw bwi-lg bwi-file","aria-hidden","true",4,"ngIf"],["class","bwi bwi-spinner bwi-lg bwi-fw bwi-spin","aria-hidden","true",4,"ngIf"],[1,"wrap"],[1,"d-flex"],["href","#","appStopClick","",3,"click"],["class","ml-2",4,"ngIf"],["class","table-list-options",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-lg","bwi-file"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-lg","bwi-fw","bwi-spin"],[1,"ml-2"],["href","https://bitwarden.com/help/attachments/#fixing-old-attachments","target","_blank","rel","noopener"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle","text-warning",3,"title"],[1,"sr-only"],["type","button",1,"btn","btn-outline-primary","btn-sm","m-0","py-0","px-2",3,"appApiAction","disabled","click"],["reuploadBtn",""],[1,"table-list-options"],["type","button","appStopClick","",1,"btn","btn-outline-danger",3,"appA11yTitle","appApiAction","disabled","click"],["deleteBtn",""],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-lg","bwi-fw",3,"hidden","title"],["for","file",1,"sr-only"],["type","file","id","file","name","file","required","",1,"form-control-file"],[1,"form-text","text-muted"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵtemplate"](12,Vp,2,1,"small",6),o["ɵɵtext"](13,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"button",7),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"span",8),o["ɵɵtext"](19,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementStart"](23,"div",9),o["ɵɵtext"](24,"\n        "),o["ɵɵtemplate"](25,qp,7,1,"table",10),o["ɵɵtext"](26,"\n        "),o["ɵɵtemplate"](27,_p,16,9,"div",6),o["ɵɵtext"](28,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n      "),o["ɵɵelementStart"](30,"div",11),o["ɵɵtext"](31,"\n        "),o["ɵɵtemplate"](32,$p,9,7,"button",12),o["ɵɵtext"](33,"\n        "),o["ɵɵelementStart"](34,"button",13),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,8,"attachments"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.cipher),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](16,10,"close")),o["ɵɵadvance"](10),o["ɵɵproperty"]("ngIf",t.cipher&&t.cipher.hasAttachments),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.viewOnly),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!t.viewOnly),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](36,12,"close"),"\n        "))},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,pe,B.NgForOf,Tn],pipes:[M.C],encapsulation:2});var Qp=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Yp(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",24),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",23),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"attachmentsNeedFix")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"attachmentsNeedFix")))}function Zp(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",22),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n            "),o["ɵɵelementStart"](5,"span",23),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵtemplate"](9,Yp,9,6,"ng-container",0),o["ɵɵtext"](10,"\n          "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"attachments")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,5,"attachments")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.showFixOldAttachments(e))}}function Jp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"td",25),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"app-org-badge",26),o["ɵɵlistener"]("onOrganizationClicked",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).onOrganizationClicked(t.organizationId)})),o["ɵɵpipe"](3,"orgNameFromId"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("organizationName",o["ɵɵpipeBind2"](3,2,e.organizationId,t.organizations)),o["ɵɵpropertyInterpolate"]("profileName",t.profileName)}}function Xp(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2).$implicit;return o["ɵɵnextContext"](3).copy(t,t.login.password,"password","Password")})),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"i",27),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](4,1,"copyPassword"),"\n              "))}function eu(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2).$implicit;return o["ɵɵnextContext"](3).copy(t,t.login.totp,"verificationCodeTotp","TOTP")})),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"i",27),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](4,1,"copyVerificationCode"),"\n              "))}function tu(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2).$implicit;return o["ɵɵnextContext"](3).launch(t.login.launchUri)})),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"i",28),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](4,1,"launch"),"\n              "))}function nu(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).copy(t,t.login.username,"username","Username")})),o["ɵɵtext"](3,"\n                "),o["ɵɵelement"](4,"i",27),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵtemplate"](8,Xp,5,3,"button",19),o["ɵɵtext"](9,"\n              "),o["ɵɵtemplate"](10,eu,5,3,"button",19),o["ɵɵtext"](11,"\n              "),o["ɵɵtemplate"](12,tu,5,3,"button",19),o["ɵɵtext"](13,"\n            "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](3);o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](6,4,"copyUsername"),"\n              "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.viewPassword),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.displayTotpCopyButton(e)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.login.canLaunch)}}function iu(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).clone(t)})),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",29),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,1,"clone"),"\n            "))}function ru(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).share(t)})),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",30),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,1,"moveToOrganization"),"\n            "))}function ou(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).collections(t)})),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",31),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,1,"collections"),"\n            "))}function au(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).events(t)})),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",32),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,1,"eventLogs"),"\n            "))}function su(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).restore(t)})),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",33),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,1,"restore"),"\n            "))}const lu=function(){return[]},du=function(e){return{itemId:e}};function cu(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"td",5),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).checkCipher(t)})),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"input",6),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.checked=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n        "),o["ɵɵelementStart"](7,"td",7),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).checkCipher(t)})),o["ɵɵtext"](8,"\n          "),o["ɵɵelement"](9,"app-vault-icon",8),o["ɵɵtext"](10,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"td",9),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).checkCipher(t)})),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"a",10),o["ɵɵpipe"](15,"i18n"),o["ɵɵtext"](16),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n          "),o["ɵɵtemplate"](18,Zp,11,7,"ng-container",0),o["ɵɵtext"](19,"\n          "),o["ɵɵelement"](20,"br"),o["ɵɵtext"](21,"\n          "),o["ɵɵelementStart"](22,"small",11),o["ɵɵtext"](23),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n        "),o["ɵɵtemplate"](26,Jp,6,5,"td",12),o["ɵɵtext"](27,"\n        "),o["ɵɵelementStart"](28,"td",13),o["ɵɵtext"](29,"\n          "),o["ɵɵelementStart"](30,"button",14),o["ɵɵpipe"](31,"i18n"),o["ɵɵtext"](32,"\n            "),o["ɵɵelement"](33,"i",15),o["ɵɵtext"](34,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n          "),o["ɵɵelementStart"](36,"bit-menu",null,16),o["ɵɵtext"](38,"\n            "),o["ɵɵtemplate"](39,nu,14,6,"ng-container",0),o["ɵɵtext"](40,"\n            "),o["ɵɵelementStart"](41,"button",17),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).attachments(t)})),o["ɵɵtext"](42,"\n              "),o["ɵɵelement"](43,"i",18),o["ɵɵtext"](44),o["ɵɵpipe"](45,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n            "),o["ɵɵtemplate"](47,iu,5,3,"button",19),o["ɵɵtext"](48,"\n            "),o["ɵɵtemplate"](49,ru,5,3,"button",19),o["ɵɵtext"](50,"\n            "),o["ɵɵtemplate"](51,ou,5,3,"button",19),o["ɵɵtext"](52,"\n            "),o["ɵɵtemplate"](53,au,5,3,"button",19),o["ɵɵtext"](54,"\n            "),o["ɵɵtemplate"](55,su,5,3,"button",19),o["ɵɵtext"](56,"\n            "),o["ɵɵelementStart"](57,"button",17),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).delete(t)})),o["ɵɵtext"](58,"\n              "),o["ɵɵelementStart"](59,"span",20),o["ɵɵtext"](60,"\n                "),o["ɵɵelement"](61,"i",21),o["ɵɵtext"](62),o["ɵɵpipe"](63,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵreference"](37),i=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngModel",e.checked),o["ɵɵadvance"](5),o["ɵɵproperty"]("cipher",e),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](15,19,"editItem")),o["ɵɵproperty"]("routerLink",o["ɵɵpureFunction0"](27,lu))("queryParams",o["ɵɵpureFunction1"](28,du,e.id)),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAttachments),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.subTitle),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",i.organizations.length>0&&!i.organization),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](31,21,"options")),o["ɵɵproperty"]("bitMenuTriggerFor",n),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngIf",e.type===i.cipherType.Login&&!e.isDeleted),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](45,23,"attachments"),"\n            "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",(!i.organization&&!e.organizationId||i.organization)&&!e.isDeleted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!i.organization&&!e.organizationId&&!e.isDeleted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.organizationId&&!e.isDeleted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.organizationId&&i.accessEvents),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.isDeleted),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](63,25,e.isDeleted?"permanentlyDelete":"delete"),"\n              ")}}function pu(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"table",3),o["ɵɵlistener"]("scrolled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).loadMore()})),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n      "),o["ɵɵtemplate"](4,cu,68,30,"tr",4),o["ɵɵtext"](5,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().ngIf,t=o["ɵɵnextContext"]();o["ɵɵproperty"]("infiniteScrollDistance",1)("infiniteScrollDisabled",!t.isPaging()),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e)}}function uu(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",35),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n      "),o["ɵɵelementStart"](5,"span",23),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function mu(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",37),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](4).addCipher()})),o["ɵɵtext"](1,"\n        "),o["ɵɵelement"](2,"i",38),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](4,1,"addItem"),"\n      "))}function hu(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n      "),o["ɵɵtemplate"](6,mu,5,3,"button",36),o["ɵɵtext"](7,"\n    "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,2,"noItemsInList")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.showAddNew)}}function vu(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",34),o["ɵɵtext"](1,"\n    "),o["ɵɵtemplate"](2,uu,9,6,"ng-container",0),o["ɵɵtext"](3,"\n    "),o["ɵɵtemplate"](4,hu,8,4,"ng-container",0),o["ɵɵtext"](5,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.loaded),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.loaded)}}function gu(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,pu,7,3,"table",1),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,vu,6,2,"div",2),o["ɵɵtext"](5,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=t.ngIf;o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.length)}}class fu extends fs{constructor(e,t,n,i,r,a,s,l,d,c,p,u){super(e,t,n,i,r,a,d,s,l,c,p),this.apiService=u,this.onEventsClicked=new o.EventEmitter,this.accessEvents=!1,this.allCiphers=[]}load(e=null,t=!1){return Qp(this,void 0,void 0,(function*(){this.deleted=t||!1,this.organization.canEditAnyCollection?(this.accessEvents=this.organization.useEvents,this.allCiphers=yield this.cipherService.getAllFromApiForOrganization(this.organization.id)):this.allCiphers=(yield this.cipherService.getAllDecrypted()).filter((e=>e.organizationId===this.organization.id)),yield this.searchService.indexCiphers(this.organization.id,this.allCiphers),yield this.applyFilter(e),this.loaded=!0}))}applyFilter(e=null){const t=Object.create(null,{applyFilter:{get:()=>super.applyFilter}});return Qp(this,void 0,void 0,(function*(){if(this.organization.canViewAllCollections)yield t.applyFilter.call(this,e);else{const n=t=>t.organizationId===this.organization.id&&(null==e||e(t));yield t.applyFilter.call(this,n)}}))}search(e=null){const t=Object.create(null,{search:{get:()=>super.search}});return Qp(this,void 0,void 0,(function*(){yield t.search.call(this,e,this.allCiphers)}))}events(e){this.onEventsClicked.emit(e)}deleteCipher(e){return this.organization.canEditAnyCollection?this.deleted?this.apiService.deleteCipherAdmin(e):this.apiService.putDeleteCipherAdmin(e):super.deleteCipher(e,this.deleted)}showFixOldAttachments(e){return this.organization.canEditAnyCollection&&e.hasOldAttachments}}fu.ɵfac=function(e){return new(e||fu)(o["ɵɵdirectiveInject"](za),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](Xr.P),o["ɵɵdirectiveInject"](io),o["ɵɵdirectiveInject"](eo),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](bi),o["ɵɵdirectiveInject"](T.s))},fu.ɵcmp=o["ɵɵdefineComponent"]({type:fu,selectors:[["app-org-vault-ciphers"]],outputs:{onEventsClicked:"onEventsClicked"},features:[o["ɵɵInheritDefinitionFeature"]],decls:2,vars:1,consts:[[4,"ngIf"],["class","table table-hover table-list table-ciphers","infiniteScroll","",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled",4,"ngIf"],["class","no-items",4,"ngIf"],["infiniteScroll","",1,"table","table-hover","table-list","table-ciphers",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled"],[4,"ngFor","ngForOf"],[1,"table-list-checkbox",3,"click"],["type","checkbox","appStopProp","",3,"ngModel","ngModelChange"],[1,"table-list-icon",3,"click"],[3,"cipher"],[1,"reduced-lh","wrap",3,"click"],["appStopProp","","queryParamsHandling","merge",3,"routerLink","queryParams","title"],["appStopProp",""],["class","tw-w-28",4,"ngIf"],[1,"table-list-options"],["type","button",1,"tw-border-none","tw-bg-transparent","tw-text-main",3,"bitMenuTriggerFor","appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-ellipsis-v","bwi-lg"],["cipherOptions",""],["bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-paperclip"],["bitMenuItem","",3,"click",4,"ngIf"],[1,"tw-text-danger"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-trash"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"],[1,"sr-only"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-exclamation-triangle","text-warning",3,"title"],[1,"tw-w-28"],[3,"organizationName","profileName","onOrganizationClicked"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-clone"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-share-square"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-files"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-arrow-circle-right"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-collection"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-file-text"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-undo"],[1,"no-items"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],["class","btn btn-outline-primary",3,"click",4,"ngIf"],[1,"btn","btn-outline-primary",3,"click"],[1,"bwi","bwi-plus","bwi-fw"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,gu,6,2,"ng-container",0),o["ɵɵtext"](1,"\n")),2&e&&o["ɵɵproperty"]("ngIf",t.isPaging()?t.pagedCiphers:t.ciphers)},directives:[B.NgIf,u.InfiniteScrollDirective,B.NgForOf,d.CheckboxControlValueAccessor,Oi,d.NgControlStatus,d.NgModel,qa,p.RouterLinkWithHref,Ei.t,pe,ki.M,Ai.e,$a],pipes:[M.C,Wa],encapsulation:2});class xu{constructor(e){this.collectionIds=null==e?[]:e}}var yu=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Su(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.cipher.name)}}function bu(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",17),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"button",18),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().selectAll(!0)})),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"button",18),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().selectAll(!1)})),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,2,"selectAll"),"\n            "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](8,4,"unselectAll"),"\n            "))}function wu(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"noCollectionsInList"),"\n        "))}function Iu(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr",21),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).check(t)})),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",22),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"input",23),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.checked=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n              "),o["ɵɵelementStart"](7,"td"),o["ɵɵtext"](8),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate1"]("name","Collection[",n,"].Checked"),o["ɵɵproperty"]("ngModel",e.checked),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n                ",e.name,"\n              ")}}function Cu(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",19),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n            "),o["ɵɵtemplate"](4,Iu,10,3,"tr",20),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.collections)}}class Eu extends Es{constructor(e,t,n,i,r,o){super(e,t,n,i,o),this.apiService=r,this.allowSelectNone=!0}loadCipher(){const e=Object.create(null,{loadCipher:{get:()=>super.loadCipher}});return yu(this,void 0,void 0,(function*(){if(!this.organization.canViewAllCollections)return yield e.loadCipher.call(this);const t=yield this.apiService.getCipherAdmin(this.cipherId);return new Gc.t(new Kc.O(t))}))}loadCipherCollections(){return this.organization.canViewAllCollections?this.collectionIds:super.loadCipherCollections()}loadCollections(){return this.organization.canViewAllCollections?Promise.resolve(this.collections):super.loadCollections()}saveCollections(){if(this.organization.canEditAnyCollection){const e=new xu(this.cipherDomain.collectionIds);return this.apiService.putCipherCollectionsAdmin(this.cipherId,e)}return super.saveCollections()}}Eu.ɵfac=function(e){return new(e||Eu)(o["ɵɵdirectiveInject"](Jr.a),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](L.$))},Eu.ɵcmp=o["ɵɵdefineComponent"]({type:Eu,selectors:[["app-org-vault-collections"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:63,vars:27,consts:[["role","dialog","aria-modal","true","aria-labelledby","collectionsTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","collectionsTitle",1,"modal-title"],[4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],[1,"d-flex"],["class","ml-auto d-flex",4,"ngIf"],["class","table table-hover table-list mb-0",4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"ml-auto","d-flex"],["type","button",1,"btn","btn-link","btn-sm","py-0",3,"click"],[1,"table","table-hover","table-list","mb-0"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"table-list-checkbox"],["type","checkbox","appStopProp","",3,"ngModel","name","ngModelChange"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵtemplate"](12,Su,2,1,"small",6),o["ɵɵtext"](13,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"button",7),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"span",8),o["ɵɵtext"](19,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementStart"](23,"div",9),o["ɵɵtext"](24,"\n        "),o["ɵɵelementStart"](25,"p"),o["ɵɵtext"](26),o["ɵɵpipe"](27,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n        "),o["ɵɵelementStart"](29,"div",10),o["ɵɵtext"](30,"\n          "),o["ɵɵelementStart"](31,"h3"),o["ɵɵtext"](32),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n          "),o["ɵɵtemplate"](35,bu,10,6,"div",11),o["ɵɵtext"](36,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n        "),o["ɵɵtemplate"](38,wu,3,3,"div",6),o["ɵɵtext"](39,"\n        "),o["ɵɵtemplate"](40,Cu,7,1,"table",12),o["ɵɵtext"](41,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n      "),o["ɵɵelementStart"](43,"div",13),o["ɵɵtext"](44,"\n        "),o["ɵɵelementStart"](45,"button",14),o["ɵɵtext"](46,"\n          "),o["ɵɵelement"](47,"i",15),o["ɵɵpipe"](48,"i18n"),o["ɵɵtext"](49,"\n          "),o["ɵɵelementStart"](50,"span"),o["ɵɵtext"](51),o["ɵɵpipe"](52,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n        "),o["ɵɵelementStart"](55,"button",16),o["ɵɵtext"](56),o["ɵɵpipe"](57,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](62,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,13,"collections"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.cipher),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](16,15,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](27,17,"collectionsDesc")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](33,19,"collections")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.collections&&t.collections.length),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.collections||!t.collections.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.collections&&t.collections.length),o["ɵɵadvance"](5),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](48,21,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](52,23,"save")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](57,25,"cancel"),"\n        ")}},directives:[d["ɵNgNoValidate"],d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,pe,B.NgForOf,d.CheckboxControlValueAccessor,Oi,d.NgControlStatus,d.NgModel],pipes:[M.C],encapsulation:2});var ku=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Pu(e,t){1&e&&(o["ɵɵelementStart"](0,"div",3),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",4),o["ɵɵtext"](3,"\n  "),o["ɵɵelementEnd"]())}function Au(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",5),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementStart"](5,"a",6),o["ɵɵpipe"](6,"i18n"),o["ɵɵtext"](7,"\n        "),o["ɵɵelement"](8,"i",7),o["ɵɵtext"](9,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n    "),o["ɵɵelementStart"](12,"div",8),o["ɵɵtext"](13,"\n      "),o["ɵɵelementStart"](14,"input",9),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().searchText=t}))("input",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().searchTextChanged()})),o["ɵɵpipe"](15,"i18n"),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n      "),o["ɵɵelementStart"](18,"app-organization-filter",10),o["ɵɵlistener"]("onNodeCollapseStateChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().toggleFilterNodeCollapseState(t)}))("onFilterChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().applyFilter(t)})),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"div",11),o["ɵɵtext"](21,"\n        "),o["ɵɵelementStart"](22,"app-status-filter",12),o["ɵɵlistener"]("onFilterChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().applyFilter(t)})),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n      "),o["ɵɵelementStart"](25,"div",11),o["ɵɵtext"](26,"\n        "),o["ɵɵelementStart"](27,"app-type-filter",13),o["ɵɵlistener"]("onNodeCollapseStateChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().toggleFilterNodeCollapseState(t)}))("onFilterChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().applyFilter(t)})),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n      "),o["ɵɵelementStart"](30,"div",11),o["ɵɵtext"](31,"\n        "),o["ɵɵelementStart"](32,"app-folder-filter",14),o["ɵɵlistener"]("onNodeCollapseStateChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().toggleFilterNodeCollapseState(t)}))("onFilterChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().applyFilter(t)}))("onAddFolder",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().addFolder()}))("onEditFolder",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().editFolder(t)})),o["ɵɵpipe"](33,"async"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n      "),o["ɵɵelementStart"](36,"div",11),o["ɵɵtext"](37,"\n        "),o["ɵɵelementStart"](38,"app-collection-filter",15),o["ɵɵlistener"]("onNodeCollapseStateChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().toggleFilterNodeCollapseState(t)}))("onFilterChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().applyFilter(t)})),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](4,23,"filters"),"\n      "),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](6,25,"learnMore")),o["ɵɵadvance"](9),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](15,27,e.searchPlaceholder)||o["ɵɵpipeBind1"](16,29,"searchVault")),o["ɵɵproperty"]("ngModel",e.searchText),o["ɵɵadvance"](4),o["ɵɵproperty"]("hide",e.hideOrganizations)("activeFilter",e.activeFilter)("collapsedFilterNodes",e.collapsedFilterNodes)("organizations",e.organizations)("activePersonalOwnershipPolicy",e.activePersonalOwnershipPolicy)("activeSingleOrganizationPolicy",e.activeSingleOrganizationPolicy),o["ɵɵadvance"](4),o["ɵɵproperty"]("hideFavorites",e.hideFavorites)("hideTrash",e.hideTrash)("activeFilter",e.activeFilter),o["ɵɵadvance"](5),o["ɵɵproperty"]("activeFilter",e.activeFilter)("collapsedFilterNodes",e.collapsedFilterNodes),o["ɵɵadvance"](5),o["ɵɵproperty"]("hide",e.hideFolders)("activeFilter",e.activeFilter)("collapsedFilterNodes",e.collapsedFilterNodes)("folderNodes",o["ɵɵpipeBind1"](33,31,e.folders$)),o["ɵɵadvance"](6),o["ɵɵproperty"]("hide",e.hideCollections)("activeFilter",e.activeFilter)("collapsedFilterNodes",e.collapsedFilterNodes)("collectionNodes",e.collections)}}class Ou extends Sd{constructor(){super(...arguments),this.hideOrganizations=!0,this.hideFavorites=!0,this.hideFolders=!0}initCollections(){return ku(this,void 0,void 0,(function*(){return this.organization.canEditAnyCollection?yield this.vaultFilterService.buildAdminCollections(this.organization.id):yield this.vaultFilterService.buildCollections(this.organization.id)}))}reloadCollectionsAndFolders(){return ku(this,void 0,void 0,(function*(){this.collections=yield this.initCollections()}))}}Ou.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](Ou)))(t||Ou)}}(),Ou.ɵcmp=o["ɵɵdefineComponent"]({type:Ou,selectors:[["app-organization-vault-filter"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:7,vars:2,consts:[[1,"card","vault-filters"],["class","container loading-spinner",4,"ngIf"],[4,"ngIf"],[1,"container","loading-spinner"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-3x"],[1,"card-header","d-flex"],["href","https://bitwarden.com/help/searching-vault/","target","_blank","rel","noopener",1,"ml-auto",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],[1,"card-body"],["type","search","id","search","autocomplete","off","appAutofocus","",1,"form-control",3,"placeholder","ngModel","ngModelChange","input"],[3,"hide","activeFilter","collapsedFilterNodes","organizations","activePersonalOwnershipPolicy","activeSingleOrganizationPolicy","onNodeCollapseStateChange","onFilterChange"],[1,"filter"],[3,"hideFavorites","hideTrash","activeFilter","onFilterChange"],[3,"activeFilter","collapsedFilterNodes","onNodeCollapseStateChange","onFilterChange"],[3,"hide","activeFilter","collapsedFilterNodes","folderNodes","onNodeCollapseStateChange","onFilterChange","onAddFolder","onEditFolder"],[3,"hide","activeFilter","collapsedFilterNodes","collectionNodes","onNodeCollapseStateChange","onFilterChange"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,Pu,4,0,"div",1),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,Au,42,33,"div",2),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n")),2&e&&(o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.isLoaded),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.isLoaded))},directives:[B.NgIf,pe,d.DefaultValueAccessor,Z.U,d.NgControlStatus,d.NgModel,Pl,Dl,Vl,td,gd],pipes:[M.C,B.AsyncPipe],encapsulation:2});var Tu=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const Bu=["vaultFilter"],Mu=["attachments"],Du=["cipherAddEdit"],Fu=["collections"],Ru=["eventsTemplate"];function Uu(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",22),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",23),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function zu(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",24),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().addCipher()})),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",25),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](4,1,"addItem"),"\n          "))}function Nu(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",26),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",e.trashCleanupWarning,"\n      ")}}function Vu(e,t){}function Hu(e,t){}function ju(e,t){}function Lu(e,t){}const Ku="OrgVaultComponent";class Gu{constructor(e,t,n,i,r,o,a,s,l,d,c,p,u,m){this.route=e,this.organizationService=t,this.router=n,this.changeDetectorRef=i,this.syncService=r,this.i18nService=o,this.modalService=a,this.messagingService=s,this.broadcasterService=l,this.ngZone=d,this.platformUtilsService=c,this.vaultService=p,this.cipherService=u,this.passwordRepromptService=m,this.collectionId=null,this.type=null,this.trashCleanupWarning=null,this.activeFilter=new Pr,this.firstLoaded=!0}ngOnInit(){this.trashCleanupWarning=this.i18nService.t(this.platformUtilsService.isSelfHost()?"trashCleanupWarningSelfHosted":"trashCleanupWarning"),this.route.parent.params.subscribe((e=>Tu(this,void 0,void 0,(function*(){this.organization=yield this.organizationService.get(e.organizationId),this.vaultFilterComponent.organization=this.organization,this.ciphersComponent.organization=this.organization,this.route.queryParams.pipe((0,C.P)()).subscribe((e=>Tu(this,void 0,void 0,(function*(){if(this.ciphersComponent.searchText=this.vaultFilterComponent.searchText=e.search,this.organization.canViewAllCollections||(yield this.syncService.fullSync(!1),this.broadcasterService.subscribe(Ku,(e=>{this.ngZone.run((()=>Tu(this,void 0,void 0,(function*(){switch(e.command){case"syncCompleted":e.successfully&&(yield Promise.all([this.vaultFilterComponent.reloadCollectionsAndFolders(),this.ciphersComponent.refresh()]),this.changeDetectorRef.detectChanges())}}))))}))),this.firstLoaded&&(yield this.vaultFilterComponent.reloadCollectionsAndFolders()),this.firstLoaded=!0,yield this.ciphersComponent.reload(),null!=e.viewEvents){const t=this.ciphersComponent.ciphers.filter((t=>t.id===e.viewEvents));t.length>0&&this.viewEvents(t[0])}this.route.queryParams.subscribe((e=>Tu(this,void 0,void 0,(function*(){const t=qu(e);t&&(this.organization.canEditAnyCollection||null!=(yield this.cipherService.get(t))?this.editCipherId(t):(this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("unknownCipher")),this.router.navigate([],{queryParams:{cipherId:null,itemId:null},queryParamsHandling:"merge"})))}))))}))))}))))}get deleted(){return"trash"===this.activeFilter.status}ngOnDestroy(){this.broadcasterService.unsubscribe(Ku)}applyVaultFilter(e){return Tu(this,void 0,void 0,(function*(){this.ciphersComponent.showAddNew="trash"!==e.status,this.activeFilter=e,yield this.ciphersComponent.reload(this.activeFilter.buildFilter(),"trash"===e.status),this.vaultFilterComponent.searchPlaceholder=this.vaultService.calculateSearchBarLocalizationString(this.activeFilter),this.go()}))}filterSearchText(e){this.ciphersComponent.searchText=e,this.ciphersComponent.search(200)}editCipherAttachments(e){return Tu(this,void 0,void 0,(function*(){if(null==this.organization.maxStorageGb||0===this.organization.maxStorageGb)return void this.messagingService.send("upgradeOrganization",{organizationId:e.organizationId});let t=!1;const[n]=yield this.modalService.openViewRef(Wp,this.attachmentsModalRef,(n=>{n.organization=this.organization,n.cipherId=e.id,n.onUploadedAttachment.subscribe((()=>t=!0)),n.onDeletedAttachment.subscribe((()=>t=!0))}));n.onClosed.subscribe((()=>Tu(this,void 0,void 0,(function*(){t&&(yield this.ciphersComponent.refresh()),t=!1}))))}))}editCipherCollections(e){return Tu(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(Eu,this.collectionsModalRef,(n=>{this.organization.canEditAnyCollection&&(n.collectionIds=e.collectionIds,n.collections=this.vaultFilterComponent.collections.fullList.filter((e=>!e.readOnly))),n.organization=this.organization,n.cipherId=e.id,n.onSavedCollections.subscribe((()=>Tu(this,void 0,void 0,(function*(){t.close(),yield this.ciphersComponent.refresh()}))))}))}))}addCipher(){return Tu(this,void 0,void 0,(function*(){const e=yield this.editCipher(null);e.organizationId=this.organization.id,e.type=this.type,this.organization.canEditAnyCollection&&(e.collections=this.vaultFilterComponent.collections.fullList.filter((e=>!e.readOnly))),null!=this.collectionId&&(e.collectionIds=[this.collectionId])}))}editCipher(e){return Tu(this,void 0,void 0,(function*(){return this.editCipherId(null==e?void 0:e.id)}))}editCipherId(e){return Tu(this,void 0,void 0,(function*(){const t=yield this.cipherService.get(e);if(null!=t&&0!=t.reprompt&&!(yield this.passwordRepromptService.showPasswordPrompt()))return void this.go({cipherId:null,itemId:null});const[n,i]=yield this.modalService.openViewRef(zp,this.cipherAddEditModalRef,(t=>{t.organization=this.organization,t.cipherId=e,t.onSavedCipher.subscribe((()=>Tu(this,void 0,void 0,(function*(){n.close(),yield this.ciphersComponent.refresh()})))),t.onDeletedCipher.subscribe((()=>Tu(this,void 0,void 0,(function*(){n.close(),yield this.ciphersComponent.refresh()})))),t.onRestoredCipher.subscribe((()=>Tu(this,void 0,void 0,(function*(){n.close(),yield this.ciphersComponent.refresh()}))))}));return n.onClosedPromise().then((()=>{this.go({cipherId:null,itemId:null})})),i}))}cloneCipher(e){return Tu(this,void 0,void 0,(function*(){const t=yield this.editCipher(e);t.cloneMode=!0,t.organizationId=this.organization.id,this.organization.canEditAnyCollection&&(t.collections=this.vaultFilterComponent.collections.fullList.filter((e=>!e.readOnly))),t.collectionIds=e.collectionIds}))}viewEvents(e){return Tu(this,void 0,void 0,(function*(){yield this.modalService.openViewRef(Lc,this.eventsModalRef,(t=>{t.name=e.name,t.organizationId=this.organization.id,t.entityId=e.id,t.showUser=!0,t.entity="cipher"}))}))}go(e=null){null==e&&(e={type:this.activeFilter.cipherType,collectionId:this.activeFilter.selectedCollectionId,deleted:!!this.deleted||null}),this.router.navigate([],{relativeTo:this.route,queryParams:e,queryParamsHandling:"merge",replaceUrl:!0})}}Gu.ɵfac=function(e){return new(e||Gu)(o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](o.ChangeDetectorRef),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](Ci),o["ɵɵdirectiveInject"](o.NgZone),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Er),o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](eo))},Gu.ɵcmp=o["ɵɵdefineComponent"]({type:Gu,selectors:[["app-org-vault"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](Bu,7),o["ɵɵviewQuery"](fu,7),o["ɵɵviewQuery"](Mu,7,o.ViewContainerRef),o["ɵɵviewQuery"](Du,7,o.ViewContainerRef),o["ɵɵviewQuery"](Fu,7,o.ViewContainerRef),o["ɵɵviewQuery"](Ru,7,o.ViewContainerRef)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.vaultFilterComponent=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.ciphersComponent=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.attachmentsModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.cipherAddEditModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.collectionsModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.eventsModalRef=e.first)}},decls:62,vars:11,consts:[[1,"container","page-content"],[1,"row"],[1,"col-3"],[1,"groupings"],[1,"content"],[1,"inner-content"],[3,"activeFilter","onFilterChange","onSearchTextChanged"],["vaultFilter",""],[1,"col-9"],[1,"page-header","d-flex"],[3,"appApiAction"],["actionSpinner",""],[4,"ngIf"],[1,"ml-auto","d-flex"],[3,"ciphersComponent","deleted","organization"],["type","button","class","btn btn-outline-primary btn-sm ml-auto",3,"click",4,"ngIf"],["type","warning","icon","bwi bwi-exclamation-triangle",4,"ngIf"],[3,"onCipherClicked","onAttachmentsClicked","onAddCipher","onCollectionsClicked","onEventsClicked","onCloneClicked"],["attachments",""],["cipherAddEdit",""],["collections",""],["eventsTemplate",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["type","button",1,"btn","btn-outline-primary","btn-sm","ml-auto",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],["type","warning","icon","bwi bwi-exclamation-triangle"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"div",4),o["ɵɵtext"](9,"\n          "),o["ɵɵelementStart"](10,"div",5),o["ɵɵtext"](11,"\n            "),o["ɵɵelementStart"](12,"app-organization-vault-filter",6,7),o["ɵɵlistener"]("onFilterChange",(function(e){return t.applyVaultFilter(e)}))("onSearchTextChanged",(function(e){return t.filterSearchText(e)})),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n    "),o["ɵɵelementStart"](19,"div",8),o["ɵɵtext"](20,"\n      "),o["ɵɵelementStart"](21,"div",9),o["ɵɵtext"](22,"\n        "),o["ɵɵelementStart"](23,"h1"),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementStart"](26,"small",10,11),o["ɵɵtext"](28,"\n            "),o["ɵɵtemplate"](29,Uu,9,6,"ng-container",12),o["ɵɵtext"](30,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n        "),o["ɵɵelementStart"](33,"div",13),o["ɵɵtext"](34,"\n          "),o["ɵɵelementStart"](35,"app-vault-bulk-actions",14),o["ɵɵtext"](36,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n          "),o["ɵɵtemplate"](38,zu,5,3,"button",15),o["ɵɵtext"](39,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n      "),o["ɵɵtemplate"](42,Nu,2,1,"app-callout",16),o["ɵɵtext"](43,"\n      "),o["ɵɵelementStart"](44,"app-org-vault-ciphers",17),o["ɵɵlistener"]("onCipherClicked",(function(e){return t.editCipher(e)}))("onAttachmentsClicked",(function(e){return t.editCipherAttachments(e)}))("onAddCipher",(function(){return t.addCipher()}))("onCollectionsClicked",(function(e){return t.editCipherCollections(e)}))("onEventsClicked",(function(e){return t.viewEvents(e)}))("onCloneClicked",(function(e){return t.cloneCipher(e)})),o["ɵɵtext"](45,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n"),o["ɵɵtemplate"](50,Vu,0,0,"ng-template",null,18,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](52,"\n"),o["ɵɵtemplate"](53,Hu,0,0,"ng-template",null,19,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](55,"\n"),o["ɵɵtemplate"](56,ju,0,0,"ng-template",null,20,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](58,"\n"),o["ɵɵtemplate"](59,Lu,0,0,"ng-template",null,21,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](61,"\n")),2&e){const e=o["ɵɵreference"](27);o["ɵɵadvance"](12),o["ɵɵproperty"]("activeFilter",t.activeFilter),o["ɵɵadvance"](12),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](25,9,"vaultItems"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("appApiAction",t.ciphersComponent.actionPromise),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.loading),o["ɵɵadvance"](6),o["ɵɵproperty"]("ciphersComponent",t.ciphersComponent)("deleted",t.deleted)("organization",t.organization),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.deleted),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.deleted)}},directives:[Ou,Y.b,B.NgIf,Qd,fu,Pe.O],pipes:[M.C],encapsulation:2});const qu=e=>e.itemId||e.cipherId,_u=[{path:"",component:Gu,data:{titleId:"vaults"}}];class $u{}$u.ɵfac=function(e){return new(e||$u)},$u.ɵmod=o["ɵɵdefineNgModule"]({type:$u}),$u.ɵinj=o["ɵɵdefineInjector"]({imports:[[p.RouterModule.forChild(_u)],p.RouterModule]});class Wu{}Wu.ɵfac=function(e){return new(e||Wu)},Wu.ɵmod=o["ɵɵdefineNgModule"]({type:Wu}),Wu.ɵinj=o["ɵɵdefineInjector"]({imports:[[kr,$u]]});var Qu=n(7448),Yu=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Zu(e,t){1&e&&(o["ɵɵelementStart"](0,"div",16),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",17),o["ɵɵtext"](3,"\n        "),o["ɵɵelement"](4,"i",18),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](6,1,"organizationIsDisabled"),"\n      "))}function Ju(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",19),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",17),o["ɵɵtext"](3,"\n        "),o["ɵɵelement"](4,"i",18),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind2"](6,1,"accessingUsingProvider",e.activeOrganization.providerName),"\n      ")}}const Xu=function(e){return["/organizations",e]};function em(e,t){if(1&e&&(o["ɵɵelementStart"](0,"li",20),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"a",21),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"i",22),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"span",23),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](10),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("routerLink",o["ɵɵpureFunction1"](6,Xu,e.id)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",e.id===n.activeOrganization.id?"visible":"invisible"),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,4,"currentOrganization")),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",e.name,"\n        ")}}function tm(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",1),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"button",2),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n    "),o["ɵɵelement"](5,"app-avatar",3),o["ɵɵtext"](6,"\n    "),o["ɵɵelementStart"](7,"div",1),o["ɵɵtext"](8,"\n      "),o["ɵɵelementStart"](9,"div",4),o["ɵɵtext"](10,"\n        "),o["ɵɵelementStart"](11,"span"),o["ɵɵtext"](12),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵelementStart"](14,"small",5),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementStart"](19,"div",6),o["ɵɵtext"](20,"\n        "),o["ɵɵelement"](21,"i",7),o["ɵɵtext"](22,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n  "),o["ɵɵelementStart"](26,"div"),o["ɵɵtext"](27,"\n    "),o["ɵɵtemplate"](28,Zu,8,3,"div",8),o["ɵɵtext"](29,"\n    "),o["ɵɵtemplate"](30,Ju,8,4,"div",9),o["ɵɵtext"](31,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n\n  "),o["ɵɵelementStart"](33,"bit-menu",null,10),o["ɵɵtext"](35,"\n    "),o["ɵɵelementStart"](36,"ul",11),o["ɵɵtext"](37,"\n      "),o["ɵɵtemplate"](38,em,12,8,"li",12),o["ɵɵtext"](39,"\n      "),o["ɵɵelement"](40,"bit-menu-divider"),o["ɵɵtext"](41,"\n      "),o["ɵɵelementStart"](42,"li",13),o["ɵɵtext"](43,"\n        "),o["ɵɵelementStart"](44,"a",14),o["ɵɵtext"](45,"\n          "),o["ɵɵelement"](46,"i",15),o["ɵɵtext"](47),o["ɵɵpipe"](48,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵreference"](34),t=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("appA11yTitle",o["ɵɵpipeBind1"](3,11,"organizationPicker"))("bitMenuTriggerFor",e),o["ɵɵadvance"](3),o["ɵɵproperty"]("data",t.activeOrganization.name)("circle",!0)("dynamic",!0),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](t.activeOrganization.name),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](16,13,"organization")),o["ɵɵadvance"](13),o["ɵɵproperty"]("ngIf",!t.activeOrganization.enabled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.activeOrganization.isProviderUser),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngForOf",t.organizations),o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](48,15,"newOrganization"),"")}}class nm{constructor(e,t){this.organizationService=e,this.i18nService=t,this.activeOrganization=null,this.organizations=[],this.loaded=!1}ngOnInit(){return Yu(this,void 0,void 0,(function*(){yield this.load()}))}load(){return Yu(this,void 0,void 0,(function*(){const e=yield this.organizationService.getAll();this.organizations=e.filter((e=>Si.canAccessAdmin(e))).sort(N.c.getSortFunction(this.i18nService,"name")),this.loaded=!0}))}}nm.ɵfac=function(e){return new(e||nm)(o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](k.D))},nm.ɵcmp=o["ɵɵdefineComponent"]({type:nm,selectors:[["app-organization-switcher"]],inputs:{activeOrganization:"activeOrganization"},decls:2,vars:1,consts:[["class","tw-flex",4,"ngIf"],[1,"tw-flex"],["type","button","id","pickerButton",1,"tw-flex","tw-items-center","tw-bg-background-alt","tw-border-none",3,"appA11yTitle","bitMenuTriggerFor"],["size","45",3,"data","circle","dynamic"],[1,"org-name","tw-ml-3"],[1,"tw-text-muted"],[1,"tw-ml-3"],["aria-hidden","true",1,"bwi","bwi-angle-down","tw-text-main"],["class","tw-ml-3 tw-border tw-border-solid tw-rounded tw-border-danger-500 tw-text-danger",4,"ngIf"],["class","tw-ml-3 tw-border tw-border-solid tw-rounded tw-border-info-500 tw-text-info",4,"ngIf"],["orgPickerMenu",""],["aria-labelledby","pickerButton",1,"tw-p-0","tw-m-0"],["class","tw-list-none tw-flex tw-flex-col","role","none",4,"ngFor","ngForOf"],["role","none",1,"tw-list-none"],["bitMenuItem","","routerLink","/create-organization"],[1,"bwi","bwi-plus","mr-2"],[1,"tw-ml-3","tw-border","tw-border-solid","tw-rounded","tw-border-danger-500","tw-text-danger"],[1,"tw-py-2","tw-px-5"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle"],[1,"tw-ml-3","tw-border","tw-border-solid","tw-rounded","tw-border-info-500","tw-text-info"],["role","none",1,"tw-list-none","tw-flex","tw-flex-col"],["bitMenuItem","",3,"routerLink"],[1,"bwi","bwi-check","mr-2",3,"ngClass"],[1,"tw-sr-only"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,tm,53,17,"div",0),o["ɵɵtext"](1,"\n")),2&e&&o["ɵɵproperty"]("ngIf",t.loaded&&null!=t.activeOrganization)},directives:[B.NgIf,pe,Ei.t,Di,ki.M,B.NgForOf,Pi.n,p.RouterLinkWithHref,Ai.e,B.NgClass],pipes:[M.C],encapsulation:2});var im=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function rm(e,t){if(1&e&&(o["ɵɵelementStart"](0,"li",6),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"a",10),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"i",11),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("routerLink",e.manageRoute),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](6,2,"manage"),"\n          ")}}function om(e,t){if(1&e&&(o["ɵɵelementStart"](0,"li",6),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"a",10),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"i",12),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("routerLink",e.toolsRoute),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](6,2,"tools"),"\n          ")}}function am(e,t){1&e&&(o["ɵɵelementStart"](0,"li",6),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"a",13),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"i",14),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](6,1,"settings"),"\n          "))}function sm(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",1),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",2),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",3),o["ɵɵtext"](5,"\n      "),o["ɵɵelement"](6,"app-organization-switcher",4),o["ɵɵtext"](7,"\n      "),o["ɵɵelementStart"](8,"ul",5),o["ɵɵtext"](9,"\n        "),o["ɵɵelementStart"](10,"li",6),o["ɵɵtext"](11,"\n          "),o["ɵɵelementStart"](12,"a",7),o["ɵɵtext"](13,"\n            "),o["ɵɵelement"](14,"i",8),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵtemplate"](19,rm,8,4,"li",9),o["ɵɵtext"](20,"\n        "),o["ɵɵtemplate"](21,om,8,4,"li",9),o["ɵɵtext"](22,"\n        "),o["ɵɵtemplate"](23,am,8,3,"li",9),o["ɵɵtext"](24,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](6),o["ɵɵproperty"]("activeOrganization",e.organization),o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](16,5,"vault"),"\n          "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.showManageTab),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.showToolsTab),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.showSettingsTab)}}const lm="OrganizationLayoutComponent";class dm{constructor(e,t,n,i){this.route=e,this.organizationService=t,this.broadcasterService=n,this.ngZone=i}ngOnInit(){document.body.classList.remove("layout_frontend"),this.route.params.subscribe((e=>im(this,void 0,void 0,(function*(){this.organizationId=e.organizationId,yield this.load()})))),this.broadcasterService.subscribe(lm,(e=>{this.ngZone.run((()=>im(this,void 0,void 0,(function*(){switch(e.command){case"updatedOrgLicense":yield this.load()}}))))}))}ngOnDestroy(){this.broadcasterService.unsubscribe(lm)}load(){return im(this,void 0,void 0,(function*(){this.organization=yield this.organizationService.get(this.organizationId)}))}get showManageTab(){return Si.canAccessManage(this.organization)}get showToolsTab(){return Si.canAccessTools(this.organization)}get showSettingsTab(){return Si.canAccessSettings(this.organization)}get toolsRoute(){return this.organization.canAccessImportExport?"tools/import":"tools/exposed-passwords-report"}get manageRoute(){let e;switch(!0){case this.organization.canManageUsers:e="manage/people";break;case this.organization.canViewAssignedCollections||this.organization.canViewAllCollections:e="manage/collections";break;case this.organization.canManageGroups:e="manage/groups";break;case this.organization.canManagePolicies:e="manage/policies";break;case this.organization.canManageSso:e="manage/sso";break;case this.organization.canAccessEventLogs:e="manage/events"}return e}}dm.ɵfac=function(e){return new(e||dm)(o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](Ci),o["ɵɵdirectiveInject"](o.NgZone))},dm.ɵcmp=o["ɵɵdefineComponent"]({type:dm,selectors:[["app-organization-layout"]],decls:8,vars:1,consts:[["class","org-nav",4,"ngIf"],[1,"org-nav"],[1,"container","d-flex"],[1,"d-flex","flex-column"],[1,"my-auto","pl-1",3,"activeOrganization"],[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","vault","routerLinkActive","active",1,"nav-link"],["aria-hidden","true",1,"bwi","bwi-lock"],["class","nav-item",4,"ngIf"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],["aria-hidden","true",1,"bwi","bwi-sliders"],["aria-hidden","true",1,"bwi","bwi-wrench"],["routerLink","settings","routerLinkActive","active",1,"nav-link"],["aria-hidden","true",1,"bwi","bwi-cogs"]],template:function(e,t){1&e&&(o["ɵɵelement"](0,"app-navbar"),o["ɵɵtext"](1,"\n"),o["ɵɵtemplate"](2,sm,28,7,"div",0),o["ɵɵtext"](3,"\n"),o["ɵɵelement"](4,"router-outlet"),o["ɵɵtext"](5,"\n"),o["ɵɵelement"](6,"app-footer"),o["ɵɵtext"](7,"\n")),2&e&&(o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.organization))},directives:[Ki,B.NgIf,p.RouterOutlet,qi,nm,p.RouterLinkWithHref,p.RouterLinkActive],pipes:[M.C],encapsulation:2});var cm=n(62247),pm=n(81394),um=n(5712);class mm{constructor(e,t,n){this.id=e,this.readOnly=t,this.hidePasswords=n}}var hm=n(74169),vm=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function gm(e,t){1&e&&(o["ɵɵelementStart"](0,"div",14),o["ɵɵtext"](1,"\n        "),o["ɵɵelement"](2,"i",15),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n        "),o["ɵɵelementStart"](5,"span",16),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n      "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function fm(e,t){if(1&e&&(o["ɵɵelementStart"](0,"span",28),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.selectedCount)}}function xm(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"hr"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,1,"noUsersInList"),"\n          "))}function ym(e,t){1&e&&(o["ɵɵelementStart"](0,"th"),o["ɵɵtext"](1," "),o["ɵɵelementEnd"]())}function Sm(e,t){1&e&&(o["ɵɵelementStart"](0,"th",29),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](2,1,"hidePasswords"),"\n                "))}function bm(e,t){1&e&&(o["ɵɵelementStart"](0,"th",29),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](2,1,"readOnly"),"\n                "))}function wm(e,t){1&e&&(o["ɵɵelementStart"](0,"span",39),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"invited")))}function Im(e,t){1&e&&(o["ɵɵelementStart"](0,"span",40),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"accepted")))}function Cm(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",41),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function Em(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n                    "),o["ɵɵelement"](2,"i",42),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n                    "),o["ɵɵelementStart"](5,"span",16),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n                  "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"userAccessAllItems")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"userAccessAllItems")))}function km(e,t){if(1&e&&(o["ɵɵelementStart"](0,"td"),o["ɵɵtext"](1,"\n                  "),o["ɵɵtemplate"](2,Em,9,6,"ng-container",24),o["ɵɵtext"](3,"\n                "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.accessAll)}}function Pm(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"owner")))}function Am(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"admin")))}function Om(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"manager")))}function Tm(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"user")))}function Bm(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"custom")))}function Mm(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"td",43),o["ɵɵtext"](1,"\n                  "),o["ɵɵelementStart"](2,"input",44),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().$implicit.hidePasswords=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n                "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("name","",e.id.substr(0,8),"_HidePasswords"),o["ɵɵproperty"]("ngModel",e.hidePasswords)("disabled",e.accessAll||!e.checked)}}function Dm(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"td",43),o["ɵɵtext"](1,"\n                  "),o["ɵɵelementStart"](2,"input",44),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().$implicit.readOnly=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n                "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("name","",e.id.substr(0,8),"_ReadOnly"),o["ɵɵproperty"]("ngModel",e.readOnly)("disabled",e.accessAll||!e.checked)}}function Fm(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr",30),o["ɵɵtext"](1,"\n                "),o["ɵɵelementStart"](2,"td",31),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).check(t)})),o["ɵɵtext"](3,"\n                  "),o["ɵɵelementStart"](4,"input",32),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.checked=t}))("change",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).selectedChanged(t)})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n                "),o["ɵɵelementStart"](7,"td",33),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).check(t)})),o["ɵɵtext"](8,"\n                  "),o["ɵɵelementStart"](9,"app-avatar",34),o["ɵɵpipe"](10,"userName"),o["ɵɵtext"](11,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n                "),o["ɵɵelementStart"](14,"td"),o["ɵɵtext"](15),o["ɵɵtemplate"](16,wm,3,3,"span",35),o["ɵɵtext"](17,"\n                  "),o["ɵɵtemplate"](18,Im,3,3,"span",36),o["ɵɵtext"](19,"\n                  "),o["ɵɵtemplate"](20,Cm,2,1,"small",37),o["ɵɵtext"](21,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n                "),o["ɵɵtemplate"](23,km,4,1,"td",24),o["ɵɵtext"](24,"\n                "),o["ɵɵelementStart"](25,"td"),o["ɵɵtext"](26,"\n                  "),o["ɵɵtemplate"](27,Pm,3,3,"span",24),o["ɵɵtext"](28,"\n                  "),o["ɵɵtemplate"](29,Am,3,3,"span",24),o["ɵɵtext"](30,"\n                  "),o["ɵɵtemplate"](31,Om,3,3,"span",24),o["ɵɵtext"](32,"\n                  "),o["ɵɵtemplate"](33,Tm,3,3,"span",24),o["ɵɵtext"](34,"\n                  "),o["ɵɵtemplate"](35,Bm,3,3,"span",24),o["ɵɵtext"](36,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n                "),o["ɵɵtemplate"](38,Mm,4,3,"td",38),o["ɵɵtext"](39,"\n                "),o["ɵɵtemplate"](40,Dm,4,3,"td",38),o["ɵɵtext"](41,"\n              "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate1"]("name","",e.id.substr(0,8),"_Checked"),o["ɵɵproperty"]("ngModel",e.checked)("disabled","collection"===n.entity&&e.accessAll),o["ɵɵadvance"](5),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](10,19,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n                  ",e.email,"\n                  "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.status===n.organizationUserStatusType.Invited),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===n.organizationUserStatusType.Accepted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.name),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf","collection"===n.entity),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.type===n.organizationUserType.Owner),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===n.organizationUserType.Admin),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===n.organizationUserType.Manager),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===n.organizationUserType.User),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===n.organizationUserType.Custom),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf","collection"===n.entity),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf","collection"===n.entity)}}const Rm=function(e){return{active:e}};function Um(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",14),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",17),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"div",18),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"label",19),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"input",20),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().searchText=t})),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementStart"](14,"div",21),o["ɵɵtext"](15,"\n              "),o["ɵɵelementStart"](16,"button",22),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().filterSelected(!1)})),o["ɵɵtext"](17),o["ɵɵpipe"](18,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n              "),o["ɵɵelementStart"](20,"button",22),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().filterSelected(!0)})),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵtemplate"](23,fm,2,1,"span",23),o["ɵɵtext"](24,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n          "),o["ɵɵtemplate"](28,xm,5,3,"ng-container",24),o["ɵɵtext"](29,"\n          "),o["ɵɵelementStart"](30,"table",25),o["ɵɵtext"](31,"\n            "),o["ɵɵelementStart"](32,"thead"),o["ɵɵtext"](33,"\n              "),o["ɵɵelementStart"](34,"tr"),o["ɵɵtext"](35,"\n                "),o["ɵɵelementStart"](36,"th"),o["ɵɵtext"](37," "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n                "),o["ɵɵelementStart"](39,"th"),o["ɵɵtext"](40," "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n                "),o["ɵɵelementStart"](42,"th"),o["ɵɵtext"](43),o["ɵɵpipe"](44,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n                "),o["ɵɵtemplate"](46,ym,2,0,"th",24),o["ɵɵtext"](47,"\n                "),o["ɵɵelementStart"](48,"th"),o["ɵɵtext"](49),o["ɵɵpipe"](50,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n                "),o["ɵɵtemplate"](52,Sm,3,3,"th",26),o["ɵɵtext"](53,"\n                "),o["ɵɵtemplate"](54,bm,3,3,"th",26),o["ɵɵtext"](55,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](57,"\n            "),o["ɵɵelementStart"](58,"tbody"),o["ɵɵtext"](59,"\n              "),o["ɵɵtemplate"](60,Fm,42,21,"tr",27),o["ɵɵtext"](61,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](62,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](63,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,16,"search")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](11,18,"search")),o["ɵɵproperty"]("ngModel",e.searchText),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](28,Rm,!e.showSelected)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](18,20,"all"),"\n              "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](30,Rm,e.showSelected)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](22,22,"selected"),"\n                "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.selectedCount),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!e.searchedUsers.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("hidden",!e.searchedUsers.length),o["ɵɵadvance"](13),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](44,24,"name")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf","collection"===e.entity),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](50,26,"userType")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf","collection"===e.entity),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf","collection"===e.entity),o["ɵɵadvance"](6),o["ɵɵproperty"]("cdkVirtualForOf",e.searchedUsers)}}class zm{constructor(e,t,n,i,r){this.search=e,this.apiService=t,this.i18nService=n,this.platformUtilsService=i,this.logService=r,this.onEditedUsers=new o.EventEmitter,this.organizationUserType=Qs,this.organizationUserStatusType=Vr,this.showSelected=!1,this.loading=!0,this.selectedCount=0,this.allUsers=[]}ngOnInit(){return vm(this,void 0,void 0,(function*(){yield this.loadUsers(),this.loading=!1}))}get users(){return this.showSelected?this.allUsers.filter((e=>e.checked)):this.allUsers}get searchedUsers(){return this.search.transform(this.users,this.searchText,"name","email","id")}get scrollViewportStyle(){return`min-height: 120px; height: ${120+46*this.searchedUsers.length}px`}loadUsers(){return vm(this,void 0,void 0,(function*(){const e=yield this.apiService.getOrganizationUsers(this.organizationId);if(this.allUsers=e.data.map((e=>e)).sort(N.c.getSortFunction(this.i18nService,"email")),"group"===this.entity){const t=yield this.apiService.getGroupUsers(this.organizationId,this.entityId);null!=t&&e.data.length>0&&t.forEach((t=>{const n=e.data.filter((e=>e.id===t));null!=n&&n.length>0&&(n[0].checked=!0)}))}else if("collection"===this.entity){const t=yield this.apiService.getCollectionUsers(this.organizationId,this.entityId);null!=t&&e.data.length>0&&t.forEach((t=>{const n=e.data.filter((e=>!e.accessAll&&e.id===t.id));null!=n&&n.length>0&&(n[0].checked=!0,n[0].readOnly=t.readOnly,n[0].hidePasswords=t.hidePasswords)}))}this.allUsers.forEach((e=>{"collection"===this.entity&&e.accessAll&&(e.checked=!0),e.checked&&this.selectedCount++}))}))}check(e){"collection"===this.entity&&e.accessAll||(e.checked=!e.checked,this.selectedChanged(e))}selectedChanged(e){e.checked?this.selectedCount++:("collection"===this.entity&&(e.readOnly=!1,e.hidePasswords=!1),this.selectedCount--)}filterSelected(e){this.showSelected=e}submit(){return vm(this,void 0,void 0,(function*(){try{if("group"===this.entity){const e=this.users.filter((e=>e.checked)).map((e=>e.id));this.formPromise=this.apiService.putGroupUsers(this.organizationId,this.entityId,e)}else{const e=this.users.filter((e=>e.checked&&!e.accessAll)).map((e=>new mm(e.id,!!e.readOnly,!!e.hidePasswords)));this.formPromise=this.apiService.putCollectionUsers(this.organizationId,this.entityId,e)}yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("updatedUsers")),this.onEditedUsers.emit()}catch(e){this.logService.error(e)}}))}}zm.ɵfac=function(e){return new(e||zm)(o["ɵɵdirectiveInject"](um.C),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$))},zm.ɵcmp=o["ɵɵdefineComponent"]({type:zm,selectors:[["app-entity-users"]],inputs:{entity:"entity",entityId:"entityId",entityName:"entityName",organizationId:"organizationId"},outputs:{onEditedUsers:"onEditedUsers"},features:[o["ɵɵProvidersFeature"]([um.C])],decls:51,vars:22,consts:[["role","dialog","aria-modal","true","aria-labelledby","userAccessTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","userAccessTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],["itemSize","46","minBufferPx","600","maxBufferPx","1200"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"modal-body"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"d-flex"],[1,"mr-3"],["for","search",1,"sr-only"],["type","search","id","search","name","SearchText",1,"form-control","form-control-sm",3,"placeholder","ngModel","ngModelChange"],["role","group",1,"btn-group","btn-group-sm"],["type","button",1,"btn","btn-outline-secondary",3,"ngClass","click"],["bitBadge","","badgeType","info",4,"ngIf"],[4,"ngIf"],[1,"table","table-hover","table-list","mb-0",3,"hidden"],["width","100","class","text-center",4,"ngIf"],["class","",4,"cdkVirtualFor","cdkVirtualForOf"],["bitBadge","","badgeType","info"],["width","100",1,"text-center"],[1,""],[1,"table-list-checkbox",3,"click"],["type","checkbox","appStopProp","",3,"ngModel","name","disabled","ngModelChange","change"],["width","30",3,"click"],["size","25",3,"data","email","circle","fontSize"],["bitBadge","","badgeType","secondary",4,"ngIf"],["bitBadge","","badgeType","warning",4,"ngIf"],["class","text-muted d-block",4,"ngIf"],["class","text-center",4,"ngIf"],["bitBadge","","badgeType","secondary"],["bitBadge","","badgeType","warning"],[1,"text-muted","d-block"],["aria-hidden","true",1,"bwi","bwi-filter",3,"title"],[1,"text-center"],["type","checkbox",3,"ngModel","name","disabled","ngModelChange"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementStart"](12,"small"),o["ɵɵtext"](13),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementStart"](16,"button",6),o["ɵɵpipe"](17,"i18n"),o["ɵɵtext"](18,"\n          "),o["ɵɵelementStart"](19,"span",7),o["ɵɵtext"](20,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵtemplate"](24,gm,9,6,"div",8),o["ɵɵtext"](25,"\n      "),o["ɵɵelementStart"](26,"cdk-virtual-scroll-viewport",9),o["ɵɵtext"](27,"\n        "),o["ɵɵtemplate"](28,Um,64,32,"div",8),o["ɵɵtext"](29,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n      "),o["ɵɵelementStart"](31,"div",10),o["ɵɵtext"](32,"\n        "),o["ɵɵelementStart"](33,"button",11),o["ɵɵtext"](34,"\n          "),o["ɵɵelement"](35,"i",12),o["ɵɵpipe"](36,"i18n"),o["ɵɵtext"](37,"\n          "),o["ɵɵelementStart"](38,"span"),o["ɵɵtext"](39),o["ɵɵpipe"](40,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n        "),o["ɵɵelementStart"](43,"button",13),o["ɵɵtext"](44),o["ɵɵpipe"](45,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,12,"userAccess"),"\n          "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](t.entityName),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](17,14,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",t.loading||!t.users),o["ɵɵadvance"](2),o["ɵɵstyleMap"](t.scrollViewportStyle),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&t.users&&t.searchedUsers),o["ɵɵadvance"](5),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](36,16,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](40,18,"save")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](45,20,"close"),"\n        ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,B.NgIf,hm.CdkVirtualScrollViewport,hm.CdkFixedSizeVirtualScroll,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,B.NgClass,hm.CdkVirtualForOf,Po.l,d.CheckboxControlValueAccessor,Oi,Di],pipes:[M.C,Pc.z],encapsulation:2});var Nm=n(20537),Vm=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Hm(e,t){1&e&&(o["ɵɵelementStart"](0,"div",13),o["ɵɵtext"](1,"\n        "),o["ɵɵelement"](2,"i",14),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n        "),o["ɵɵelementStart"](5,"span",15),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n      "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function jm(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",25),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"button",26),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).selectAll(!0)})),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"button",26),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).selectAll(!1)})),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n            "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](4,2,"selectAll"),"\n              "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](8,4,"unselectAll"),"\n              "))}function Lm(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"noGroupsInList"),"\n          "))}function Km(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n                    "),o["ɵɵelement"](2,"i",35),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n                    "),o["ɵɵelementStart"](5,"span",15),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n                  "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"groupAccessAllItems")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"groupAccessAllItems")))}function Gm(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n                "),o["ɵɵelementStart"](2,"td",30),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).check(t)})),o["ɵɵtext"](3,"\n                  "),o["ɵɵelementStart"](4,"input",31),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.checked=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n                "),o["ɵɵelementStart"](7,"td",32),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).check(t)})),o["ɵɵtext"](8),o["ɵɵtemplate"](9,Km,9,6,"ng-container",22),o["ɵɵtext"](10,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n                "),o["ɵɵelementStart"](12,"td",33),o["ɵɵtext"](13,"\n                  "),o["ɵɵelementStart"](14,"input",34),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.hidePasswords=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n                "),o["ɵɵelementStart"](17,"td",33),o["ɵɵtext"](18,"\n                  "),o["ɵɵelementStart"](19,"input",34),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.readOnly=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n              "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=o["ɵɵnextContext"](4);o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate1"]("name","Groups[",n,"].Checked"),o["ɵɵproperty"]("ngModel",e.checked)("disabled",e.accessAll||!i.canSave),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n                  ",e.name,"\n                  "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.accessAll),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate1"]("name","Groups[",n,"].HidePasswords"),o["ɵɵproperty"]("ngModel",e.hidePasswords)("disabled",!e.checked||e.accessAll||!i.canSave),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate1"]("name","Groups[",n,"].ReadOnly"),o["ɵɵproperty"]("ngModel",e.readOnly)("disabled",!e.checked||e.accessAll||!i.canSave)}}function qm(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",27),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"thead"),o["ɵɵtext"](3,"\n              "),o["ɵɵelementStart"](4,"tr"),o["ɵɵtext"](5,"\n                "),o["ɵɵelementStart"](6,"th"),o["ɵɵtext"](7," "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n                "),o["ɵɵelementStart"](9,"th"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n                "),o["ɵɵelementStart"](13,"th",28),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n                "),o["ɵɵelementStart"](17,"th",28),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n            "),o["ɵɵelementStart"](23,"tbody"),o["ɵɵtext"](24,"\n              "),o["ɵɵtemplate"](25,Gm,22,11,"tr",29),o["ɵɵtext"](26,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n          "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,4,"name")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](15,6,"hidePasswords")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](19,8,"readOnly")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngForOf",e.groups)}}function _m(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"h3",23),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵtemplate"](5,jm,10,6,"div",12),o["ɵɵtext"](6,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n          "),o["ɵɵtemplate"](8,Lm,3,3,"div",22),o["ɵɵtext"](9,"\n          "),o["ɵɵtemplate"](10,qm,28,10,"table",24),o["ɵɵtext"](11,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,4,"groupAccess"),"\n            "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.groups&&e.groups.length&&e.canSave),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.groups||!e.groups.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.groups&&e.groups.length)}}function $m(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",13),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"div",16),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"label",17),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n          "),o["ɵɵelementStart"](8,"input",18),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().name=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n        "),o["ɵɵelementStart"](11,"div",16),o["ɵɵtext"](12,"\n          "),o["ɵɵelementStart"](13,"label",19),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n          "),o["ɵɵelementStart"](17,"input",20),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().externalId=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n          "),o["ɵɵelementStart"](19,"small",21),o["ɵɵtext"](20),o["ɵɵpipe"](21,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,_m,12,6,"ng-container",22),o["ɵɵtext"](25,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,8,"name")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.name)("disabled",!e.canSave),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](15,10,"externalId")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.externalId)("disabled",!e.canSave),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](21,12,"externalIdDesc")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.accessGroups)}}function Wm(e,t){if(1&e&&(o["ɵɵelementStart"](0,"button",36),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",37),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"]()),2&e){o["ɵɵnextContext"]();const e=o["ɵɵreference"](5);o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,5,"save"))}}function Qm(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",39,40),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).delete()})),o["ɵɵpipe"](2,"i18n"),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"i",41),o["ɵɵtext"](5,"\n            "),o["ɵɵelement"](6,"i",42),o["ɵɵpipe"](7,"i18n"),o["ɵɵtext"](8,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"](2);o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](2,6,"delete")),o["ɵɵproperty"]("disabled",e.loading)("appApiAction",t.deletePromise),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](7,8,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}function Ym(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",25),o["ɵɵtext"](1,"\n          "),o["ɵɵtemplate"](2,Qm,9,10,"button",38),o["ɵɵtext"](3,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.editMode)}}class Zm{constructor(e,t,n,i,r,a){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.cryptoService=i,this.logService=r,this.organizationService=a,this.onSavedCollection=new o.EventEmitter,this.onDeletedCollection=new o.EventEmitter,this.loading=!0,this.editMode=!1,this.accessGroups=!1,this.groups=[]}ngOnInit(){return Vm(this,void 0,void 0,(function*(){const e=yield this.organizationService.get(this.organizationId);if(this.accessGroups=e.useGroups,this.editMode=this.loading=null!=this.collectionId,this.accessGroups){const e=yield this.apiService.getGroups(this.organizationId);this.groups=e.data.map((e=>e)).sort(N.c.getSortFunction(this.i18nService,"name"))}if(this.orgKey=yield this.cryptoService.getOrgKey(this.organizationId),this.editMode){this.editMode=!0,this.title=this.i18nService.t("editCollection");try{const e=yield this.apiService.getCollectionDetails(this.organizationId,this.collectionId);this.name=yield this.cryptoService.decryptToUtf8(new ie._(e.name),this.orgKey),this.externalId=e.externalId,null!=e.groups&&this.groups.length>0&&e.groups.forEach((e=>{const t=this.groups.filter((t=>!t.accessAll&&t.id===e.id));null!=t&&t.length>0&&(t[0].checked=!0,t[0].readOnly=e.readOnly,t[0].hidePasswords=e.hidePasswords)}))}catch(t){this.logService.error(t)}}else this.title=this.i18nService.t("addCollection");this.groups.forEach((e=>{e.accessAll&&(e.checked=!0)})),this.loading=!1}))}check(e,t){e.accessAll||(e.checked=null==t?!e.checked:t,e.checked||(e.readOnly=!1,e.hidePasswords=!1))}selectAll(e){this.groups.forEach((t=>this.check(t,e)))}submit(){return Vm(this,void 0,void 0,(function*(){if(null==this.orgKey)throw new Error("No encryption key for this organization.");const e=new Nm.W;e.name=(yield this.cryptoService.encrypt(this.name,this.orgKey)).encryptedString,e.externalId=this.externalId,e.groups=this.groups.filter((e=>e.checked&&!e.accessAll)).map((e=>new mm(e.id,!!e.readOnly,!!e.hidePasswords)));try{this.editMode?this.formPromise=this.apiService.putCollection(this.organizationId,this.collectionId,e):this.formPromise=this.apiService.postCollection(this.organizationId,e),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t(this.editMode?"editedCollectionId":"createdCollectionId",this.name)),this.onSavedCollection.emit()}catch(t){this.logService.error(t)}}))}delete(){return Vm(this,void 0,void 0,(function*(){if(!this.editMode)return;if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("deleteCollectionConfirmation"),this.name,this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{this.deletePromise=this.apiService.deleteCollection(this.organizationId,this.collectionId),yield this.deletePromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("deletedCollectionId",this.name)),this.onDeletedCollection.emit()}catch(e){this.logService.error(e)}}))}}Zm.ɵfac=function(e){return new(e||Zm)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Ii.M))},Zm.ɵcmp=o["ɵɵdefineComponent"]({type:Zm,selectors:[["app-collection-add-edit"]],inputs:{collectionId:"collectionId",organizationId:"organizationId",canSave:"canSave",canDelete:"canDelete"},outputs:{onSavedCollection:"onSavedCollection",onDeletedCollection:"onDeletedCollection"},decls:38,vars:12,consts:[["role","dialog","aria-modal","true","aria-labelledby","collectionAddEditTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","collectionAddEditTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["class","ml-auto",4,"ngIf"],[1,"modal-body"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"form-group"],["for","name"],["id","name","type","text","name","Name","required","","appAutofocus","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","externalId"],["id","externalId","type","text","name","ExternalId",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"form-text","text-muted"],[4,"ngIf"],[1,"mt-4","d-flex","mb-0"],["class","table table-hover table-list mb-0",4,"ngIf"],[1,"ml-auto"],["type","button",1,"btn","btn-link","btn-sm","py-0",3,"click"],[1,"table","table-hover","table-list","mb-0"],["width","100",1,"text-center"],[4,"ngFor","ngForOf"],[1,"table-list-checkbox",3,"click"],["type","checkbox","appStopProp","",3,"ngModel","name","disabled","ngModelChange"],[3,"click"],[1,"text-center"],["type","checkbox",3,"ngModel","name","disabled","ngModelChange"],["aria-hidden","true",1,"bwi","bwi-filter","text-muted","bwi-fw",3,"title"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","class","btn btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click"],["deleteBtn",""],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-lg","bwi-fw",3,"hidden","title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"button",6),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"span",7),o["ɵɵtext"](16,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵtemplate"](20,Hm,9,6,"div",8),o["ɵɵtext"](21,"\n      "),o["ɵɵtemplate"](22,$m,26,14,"div",8),o["ɵɵtext"](23,"\n      "),o["ɵɵelementStart"](24,"div",9),o["ɵɵtext"](25,"\n        "),o["ɵɵtemplate"](26,Wm,9,7,"button",10),o["ɵɵtext"](27,"\n        "),o["ɵɵelementStart"](28,"button",11),o["ɵɵtext"](29),o["ɵɵpipe"](30,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n        "),o["ɵɵtemplate"](32,Ym,4,1,"div",12),o["ɵɵtext"](33,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](t.title),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,8,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.canSave),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](30,10,"cancel"),"\n        "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.canDelete))},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,B.NgIf,d.DefaultValueAccessor,d.RequiredValidator,Z.U,d.NgControlStatus,d.NgModel,B.NgForOf,d.CheckboxControlValueAccessor,Oi],pipes:[M.C],encapsulation:2});var Jm=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const Xm=["addEdit"],eh=["usersTemplate"];function th(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",8),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().add()})),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",9),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](4,1,"newCollection"),"\n    "))}function nh(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",10),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",11),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function ih(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"noCollectionsInList")))}function rh(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",24),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2).$implicit;return o["ɵɵnextContext"](3).users(t)})),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"i",25),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](4,1,"users"),"\n              "))}function oh(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",26),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2).$implicit;return o["ɵɵnextContext"](3).delete(t)})),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"i",27),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](4,1,"delete"),"\n              "))}function ah(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",18),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"button",19),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelement"](5,"i",20),o["ɵɵtext"](6,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"div",21),o["ɵɵtext"](9,"\n              "),o["ɵɵtemplate"](10,rh,5,3,"a",22),o["ɵɵtext"](11,"\n              "),o["ɵɵtemplate"](12,oh,5,3,"a",23),o["ɵɵtext"](13,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n          "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](3,3,"options")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",t.canEdit(e)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.canDelete(e))}}function sh(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"td"),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"a",15),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).edit(t)})),o["ɵɵtext"](5),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"td",16),o["ɵɵtext"](9,"\n          "),o["ɵɵtemplate"](10,ah,15,5,"div",17),o["ɵɵtext"](11,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](3);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.name),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",n.canEdit(e)||n.canDelete(e))}}function lh(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"table",13),o["ɵɵlistener"]("scrolled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).loadMore()})),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n      "),o["ɵɵtemplate"](4,sh,13,2,"tr",14),o["ɵɵtext"](5,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().ngIf,t=o["ɵɵnextContext"]();o["ɵɵproperty"]("infiniteScrollDistance",1)("infiniteScrollDisabled",!t.isPaging()),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e)}}function dh(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,ih,3,3,"p",5),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,lh,7,3,"table",12),o["ɵɵtext"](5,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=t.ngIf;o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.length)}}function ch(e,t){}function ph(e,t){}class uh{constructor(e,t,n,i,r,o,a,s,l){this.apiService=e,this.route=t,this.collectionService=n,this.modalService=i,this.i18nService=r,this.platformUtilsService=o,this.searchService=a,this.logService=s,this.organizationService=l,this.loading=!0,this.canCreate=!1,this.didScroll=!1,this.pageSize=100,this.pagedCollectionsCount=0}ngOnInit(){return Jm(this,void 0,void 0,(function*(){this.route.parent.parent.params.subscribe((e=>Jm(this,void 0,void 0,(function*(){this.organizationId=e.organizationId,yield this.load(),this.route.queryParams.pipe((0,C.P)()).subscribe((e=>Jm(this,void 0,void 0,(function*(){this.searchText=e.search}))))}))))}))}load(){return Jm(this,void 0,void 0,(function*(){this.organization=yield this.organizationService.get(this.organizationId),this.canCreate=this.organization.canCreateNewCollections;const e=e=>Jm(this,void 0,void 0,(function*(){const t=e.data.filter((e=>e.organizationId===this.organizationId)).map((e=>new pm.F(new cm.Z(e))));return yield this.collectionService.decryptMany(t)}));if(this.organization.canViewAssignedCollections){const t=yield this.apiService.getUserCollections();this.assignedCollections=yield e(t)}if(this.organization.canViewAllCollections){const t=yield this.apiService.getCollections(this.organizationId);this.collections=yield e(t)}else this.collections=this.assignedCollections;this.resetPaging(),this.loading=!1}))}loadMore(){if(!this.collections||this.collections.length<=this.pageSize)return;const e=this.pagedCollections.length;let t=this.pageSize;0===e&&this.pagedCollectionsCount>this.pageSize&&(t=this.pagedCollectionsCount),this.collections.length>e&&(this.pagedCollections=this.pagedCollections.concat(this.collections.slice(e,e+t))),this.pagedCollectionsCount=this.pagedCollections.length,this.didScroll=this.pagedCollections.length>this.pageSize}edit(e){return Jm(this,void 0,void 0,(function*(){const t=null==e&&this.canCreate,n=null!=e&&this.canEdit(e),i=null!=e&&this.canDelete(e);if(!(t||n||i))return void this.platformUtilsService.showToast("error",null,this.i18nService.t("missingPermissions"));const[r]=yield this.modalService.openViewRef(Zm,this.addEditModalRef,(o=>{o.organizationId=this.organizationId,o.collectionId=null!=e?e.id:null,o.canSave=t||n,o.canDelete=i,o.onSavedCollection.subscribe((()=>{r.close(),this.load()})),o.onDeletedCollection.subscribe((()=>{r.close(),this.removeCollection(e)}))}))}))}add(){this.edit(null)}delete(e){return Jm(this,void 0,void 0,(function*(){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("deleteCollectionConfirmation"),e.name,this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{yield this.apiService.deleteCollection(this.organizationId,e.id),this.platformUtilsService.showToast("success",null,this.i18nService.t("deletedCollectionId",e.name)),this.removeCollection(e)}catch(t){this.logService.error(t),this.platformUtilsService.showToast("error",null,this.i18nService.t("missingPermissions"))}}))}users(e){return Jm(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(zm,this.usersModalRef,(n=>{n.organizationId=this.organizationId,n.entity="collection",n.entityId=e.id,n.entityName=e.name,n.onEditedUsers.subscribe((()=>{this.load(),t.close()}))}))}))}resetPaging(){return Jm(this,void 0,void 0,(function*(){this.pagedCollections=[],this.loadMore()}))}isSearching(){return this.searchService.isSearchable(this.searchText)}isPaging(){const e=this.isSearching();return e&&this.didScroll&&this.resetPaging(),!e&&this.collections&&this.collections.length>this.pageSize}canEdit(e){return!!this.organization.canEditAnyCollection||!(!this.organization.canEditAssignedCollections||!this.assignedCollections.some((t=>t.id===e.id)))}canDelete(e){return!!this.organization.canDeleteAnyCollection||!(!this.organization.canDeleteAssignedCollections||!this.assignedCollections.some((t=>t.id===e.id)))}removeCollection(e){const t=this.collections.indexOf(e);t>-1&&(this.collections.splice(t,1),this.resetPaging())}}uh.ɵfac=function(e){return new(e||uh)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](Jr.a),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](za),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Ii.M))},uh.ɵcmp=o["ɵɵdefineComponent"]({type:uh,selectors:[["app-org-manage-collections"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](Xm,7,o.ViewContainerRef),o["ɵɵviewQuery"](eh,7,o.ViewContainerRef)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.addEditModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.usersModalRef=e.first)}},decls:33,vars:18,consts:[[1,"page-header","d-flex"],[1,"ml-auto","d-flex"],["for","search",1,"sr-only"],["type","search","id","search",1,"form-control","form-control-sm",3,"placeholder","ngModel","ngModelChange"],["type","button","class","btn btn-sm btn-outline-primary ml-3",3,"click",4,"ngIf"],[4,"ngIf"],["addEdit",""],["usersTemplate",""],["type","button",1,"btn","btn-sm","btn-outline-primary","ml-3",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["class","table table-hover table-list","infiniteScroll","",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled",4,"ngIf"],["infiniteScroll","",1,"table","table-hover","table-list",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled"],[4,"ngFor","ngForOf"],["href","#","appStopClick","",3,"click"],[1,"table-list-options"],["class","dropdown","appListDropdown","",4,"ngIf"],["appListDropdown","",1,"dropdown"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-cog","bwi-lg"],[1,"dropdown-menu","dropdown-menu-right"],["class","dropdown-item","href","#","appStopClick","",3,"click",4,"ngIf"],["class","dropdown-item text-danger","href","#","appStopClick","",3,"click",4,"ngIf"],["href","#","appStopClick","",1,"dropdown-item",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-users"],["href","#","appStopClick","",1,"dropdown-item","text-danger",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-trash"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"div",1),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"div"),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"label",2),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n      "),o["ɵɵelementStart"](14,"input",3),o["ɵɵlistener"]("ngModelChange",(function(e){return t.searchText=e})),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n    "),o["ɵɵtemplate"](18,th,5,3,"button",4),o["ɵɵtext"](19,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n"),o["ɵɵtemplate"](22,nh,9,6,"ng-container",5),o["ɵɵtext"](23,"\n"),o["ɵɵtemplate"](24,dh,6,2,"ng-container",5),o["ɵɵpipe"](25,"search"),o["ɵɵtext"](26,"\n"),o["ɵɵtemplate"](27,ch,0,0,"ng-template",null,6,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](29,"\n"),o["ɵɵtemplate"](30,ph,0,0,"ng-template",null,7,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](32,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,7,"collections")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,9,"search")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](15,11,"search")),o["ɵɵproperty"]("ngModel",t.searchText),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.canCreate),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&(t.isPaging()?t.pagedCollections:o["ɵɵpipeBind4"](25,13,t.collections,t.searchText,"name","id"))))},directives:[d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,B.NgIf,u.InfiniteScrollDirective,B.NgForOf,Tn,pe],pipes:[M.C,um.C],encapsulation:2});class mh{constructor(e){this.message=e.message,this.humanReadableMessage=e.humanReadableMessage,this.appIcon=e.appIcon,this.appName=e.appName,this.userId=e.userId,this.userName=e.userName,this.userEmail=e.userEmail,this.date=e.date,this.ip=e.ip,this.type=e.type,this.installationId=e.installationId}}var hh=n(14424),vh=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class gh{constructor(e,t,n,i,r,o){this.eventService=e,this.i18nService=t,this.exportService=n,this.platformUtilsService=i,this.logService=r,this.fileDownloadService=o,this.loading=!0,this.loaded=!1,this.dirtyDates=!0;const a=this.eventService.getDefaultDateFilters();this.start=a[0],this.end=a[1]}exportEvents(){return vh(this,void 0,void 0,(function*(){if(this.appApiPromiseUnfulfilled()||this.dirtyDates)return;this.loading=!0;const e=this.parseDates();if(null!=e){try{this.exportPromise=this.export(e[0],e[1]),yield this.exportPromise}catch(t){this.logService.error(`Handled exception: ${t}`)}this.exportPromise=null,this.loading=!1}}))}loadEvents(e){return vh(this,void 0,void 0,(function*(){if(this.appApiPromiseUnfulfilled())return;const t=this.parseDates();if(null==t)return;this.loading=!0;let n=[];try{const i=this.loadAndParseEvents(t[0],t[1],e?null:this.continuationToken);e?this.refreshPromise=i:this.morePromise=i;const r=yield i;this.continuationToken=r.continuationToken,n=r.events}catch(i){this.logService.error(`Handled exception: ${i}`)}!e&&null!=this.events&&this.events.length>0?this.events=this.events.concat(n):this.events=n,this.dirtyDates=!1,this.loading=!1,this.morePromise=null,this.refreshPromise=null}))}loadAndParseEvents(e,t,n){return vh(this,void 0,void 0,(function*(){const i=yield this.requestEvents(e,t,n),r=yield Promise.all(i.data.map((e=>vh(this,void 0,void 0,(function*(){const t=null==e.actingUserId?e.userId:e.actingUserId,n=yield this.eventService.getEventInfo(e),i=this.getUserName(e,t),r=null!=i?i.name:this.i18nService.t("unknown");return new mh({message:n.message,humanReadableMessage:n.humanReadableMessage,appIcon:n.appIcon,appName:n.appName,userId:t,userName:null!=e.installationId?`Installation: ${e.installationId}`:r,userEmail:null!=i?i.email:"",date:e.date,ip:e.ipAddress,type:e.type,installationId:e.installationId})})))));return{continuationToken:i.continuationToken,events:r}}))}parseDates(){let e=null;try{e=this.eventService.formatDateFilters(this.start,this.end)}catch(t){return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("invalidDateRange")),null}return e}appApiPromiseUnfulfilled(){return null!=this.refreshPromise||null!=this.morePromise||null!=this.exportPromise}export(e,t){return vh(this,void 0,void 0,(function*(){let n=this.continuationToken,i=[].concat(this.events);for(;null!=n;){const r=yield this.loadAndParseEvents(e,t,n);n=r.continuationToken,i=i.concat(r.events)}const r=yield this.exportService.getEventExport(i),o=this.exportService.getFileName(this.exportFileName,"csv");this.fileDownloadService.download({fileName:o,blobData:r,blobOptions:{type:"text/plain"}})}))}}gh.ɵfac=function(e){return new(e||gh)(o["ɵɵdirectiveInject"](Oc),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](hh.T),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Ia._))},gh.ɵdir=o["ɵɵdefineDirective"]({type:gh});var fh=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function xh(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",16),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",17),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function yh(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"noEventsInList")))}function Sh(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"td"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"date"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"td"),o["ɵɵtext"](7,"\n          "),o["ɵɵelement"](8,"i",26),o["ɵɵtext"](9,"\n          "),o["ɵɵelementStart"](10,"span",17),o["ɵɵtext"](11),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵelementStart"](14,"td"),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"span",27),o["ɵɵtext"](17),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n        "),o["ɵɵelement"](20,"td",28),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](4,11,e.date,"medium")),o["ɵɵadvance"](5),o["ɵɵclassMapInterpolate1"]("text-muted bwi bwi-lg ",e.appIcon,""),o["ɵɵpropertyInterpolate2"]("title","",e.appName,", ",e.ip,""),o["ɵɵadvance"](3),o["ɵɵtextInterpolate2"]("",e.appName,", ",e.ip,""),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("title",e.userEmail),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.userName),o["ɵɵadvance"](3),o["ɵɵproperty"]("innerHTML",e.message,o["ɵɵsanitizeHtml"])}}function bh(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",20),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"thead"),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"tr"),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"th",21),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementStart"](10,"th",22),o["ɵɵtext"](11,"\n          "),o["ɵɵelementStart"](12,"span",17),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n        "),o["ɵɵelementStart"](17,"th",23),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementStart"](21,"th",24),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n    "),o["ɵɵelementStart"](27,"tbody"),o["ɵɵtext"](28,"\n      "),o["ɵɵtemplate"](29,Sh,22,14,"tr",25),o["ɵɵtext"](30,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,5,"timestamp")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,7,"device")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](19,9,"user")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,11,"event")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngForOf",e.events)}}function wh(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",29,30),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).loadEvents(!1)})),o["ɵɵtext"](2,"\n    "),o["ɵɵelement"](3,"i",31),o["ɵɵpipe"](4,"i18n"),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"span"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"](2);o["ɵɵproperty"]("appApiAction",t.morePromise)("disabled",t.loaded&&e.loading),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](4,4,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,6,"loadMore"))}}function Ih(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,yh,3,3,"p",15),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,bh,32,13,"table",18),o["ɵɵtext"](5,"\n  "),o["ɵɵtemplate"](6,wh,10,8,"button",19),o["ɵɵtext"](7,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.events||!e.events.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.events&&e.events.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.continuationToken)}}const Ch=function(e){return{"bwi-spin":e}},Eh=function(e){return{loading:e}};class kh extends gh{constructor(e,t,n,i,r,o,a,s,l,d,c,p){super(n,i,r,o,s,p),this.apiService=e,this.route=t,this.router=a,this.userNamePipe=l,this.organizationService=d,this.providerService=c,this.exportFileName="org-events",this.orgUsersUserIdMap=new Map}ngOnInit(){return fh(this,void 0,void 0,(function*(){this.route.parent.parent.params.subscribe((e=>fh(this,void 0,void 0,(function*(){this.organizationId=e.organizationId,this.organization=yield this.organizationService.get(this.organizationId),null!=this.organization&&this.organization.useEvents?yield this.load():this.router.navigate(["/organizations",this.organizationId])}))))}))}load(){return fh(this,void 0,void 0,(function*(){if((yield this.apiService.getOrganizationUsers(this.organizationId)).data.forEach((e=>{const t=this.userNamePipe.transform(e);this.orgUsersUserIdMap.set(e.userId,{name:t,email:e.email})})),null!=this.organization.providerId)try{if(null!=(yield this.providerService.get(this.organization.providerId))&&(yield this.providerService.get(this.organization.providerId)).canManageUsers){(yield this.apiService.getProviderUsers(this.organization.providerId)).data.forEach((e=>{const t=this.userNamePipe.transform(e);this.orgUsersUserIdMap.set(e.userId,{name:`${t} (${this.organization.providerName})`,email:e.email})}))}}catch(e){this.logService.warning(e)}yield this.loadEvents(!0),this.loaded=!0}))}requestEvents(e,t,n){return this.apiService.getEventsOrganization(this.organizationId,e,t,n)}getUserName(e,t){return null==t?null:this.orgUsersUserIdMap.has(t)?this.orgUsersUserIdMap.get(t):null!=e.providerId&&e.providerId===this.organization.providerId?{name:this.organization.providerName}:null}}kh.ɵfac=function(e){return new(e||kh)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](Oc),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](hh.T),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Pc.z),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](wi),o["ɵɵdirectiveInject"](Ia._))},kh.ɵcmp=o["ɵɵdefineComponent"]({type:kh,selectors:[["app-org-events"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:57,vars:35,consts:[[1,"page-header","d-flex"],[1,"ml-auto","d-flex"],[1,"form-inline"],["for","start",1,"sr-only"],["type","datetime-local","id","start","placeholder","YYYY-MM-DDTHH:MM",1,"form-control","form-control-sm",3,"placeholder","ngModel","ngModelChange","change"],[1,"mx-2"],["for","end",1,"sr-only"],["type","datetime-local","id","end","placeholder","YYYY-MM-DDTHH:MM",1,"form-control","form-control-sm",3,"placeholder","ngModel","ngModelChange","change"],[1,"d-inline",3,"appApiAction"],["refreshForm",""],["type","button",1,"btn","btn-sm","btn-outline-primary","ml-3",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-refresh","bwi-fw",3,"ngClass"],["exportForm",""],["type","button",1,"btn","btn-sm","btn-outline-primary","btn-submit","manual","ml-3",3,"ngClass","disabled","click"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin"],[4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["class","table table-hover",4,"ngIf"],["type","button","class","btn btn-block btn-link btn-submit",3,"appApiAction","disabled","click",4,"ngIf"],[1,"table","table-hover"],["width","210",1,"border-top-0"],["width","40",1,"border-top-0"],["width","150",1,"border-top-0"],[1,"border-top-0"],[4,"ngFor","ngForOf"],["aria-hidden","true",3,"title"],[3,"title"],[3,"innerHTML"],["type","button",1,"btn","btn-block","btn-link","btn-submit",3,"appApiAction","disabled","click"],["moreBtn",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"div",1),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"div",2),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"label",3),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n      "),o["ɵɵelementStart"](14,"input",4),o["ɵɵlistener"]("ngModelChange",(function(e){return t.start=e}))("change",(function(){return t.dirtyDates=!0})),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n      "),o["ɵɵelementStart"](17,"span",5),o["ɵɵtext"](18,"-"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"label",6),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵelementStart"](24,"input",7),o["ɵɵlistener"]("ngModelChange",(function(e){return t.end=e}))("change",(function(){return t.dirtyDates=!0})),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n    "),o["ɵɵelementStart"](28,"form",8,9),o["ɵɵtext"](30,"\n      "),o["ɵɵelementStart"](31,"button",10),o["ɵɵlistener"]("click",(function(){return t.loadEvents(!0)})),o["ɵɵtext"](32,"\n        "),o["ɵɵelement"](33,"i",11),o["ɵɵtext"](34),o["ɵɵpipe"](35,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n    "),o["ɵɵelementStart"](38,"form",8,12),o["ɵɵtext"](40,"\n      "),o["ɵɵelementStart"](41,"button",13),o["ɵɵlistener"]("click",(function(){return t.exportEvents()})),o["ɵɵtext"](42,"\n        "),o["ɵɵelement"](43,"i",14),o["ɵɵtext"](44,"\n        "),o["ɵɵelementStart"](45,"span"),o["ɵɵtext"](46),o["ɵɵpipe"](47,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n"),o["ɵɵtemplate"](53,xh,9,6,"ng-container",15),o["ɵɵtext"](54,"\n"),o["ɵɵtemplate"](55,Ih,8,3,"ng-container",15),o["ɵɵtext"](56,"\n")),2&e){const e=o["ɵɵreference"](29),n=o["ɵɵreference"](39);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,17,"eventLogs")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,19,"startDate")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](15,21,"startDate")),o["ɵɵproperty"]("ngModel",t.start),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](22,23,"endDate")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](25,25,"endDate")),o["ɵɵproperty"]("ngModel",t.end),o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.refreshPromise),o["ɵɵadvance"](3),o["ɵɵproperty"]("disabled",t.loaded&&e.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](31,Ch,t.loaded&&e.loading)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](35,27,"refresh"),"\n      "),o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.exportPromise),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](33,Eh,n.loading))("disabled",t.loaded&&n.loading||t.dirtyDates),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](47,29,"export")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngIf",!t.loaded),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.loaded)}},directives:[d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,d["ɵNgNoValidate"],d.NgControlStatusGroup,d.NgForm,Y.b,B.NgClass,B.NgIf,B.NgForOf],pipes:[M.C,B.DatePipe],encapsulation:2});class Ph{constructor(){this.collections=[]}}var Ah=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Oh(e,t){1&e&&(o["ɵɵelementStart"](0,"div",15),o["ɵɵtext"](1,"\n        "),o["ɵɵelement"](2,"i",16),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n        "),o["ɵɵelementStart"](5,"span",17),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n      "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function Th(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",13),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"button",36),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).selectAll(!0)})),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"button",36),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).selectAll(!1)})),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,2,"selectAll"),"\n            "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](8,4,"unselectAll"),"\n            "))}function Bh(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"noCollectionsInList"),"\n          "))}function Mh(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n                "),o["ɵɵelementStart"](2,"td",41),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).check(t)})),o["ɵɵtext"](3,"\n                  "),o["ɵɵelementStart"](4,"input",42),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.checked=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n                "),o["ɵɵelementStart"](7,"td",43),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).check(t)})),o["ɵɵtext"](8),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n                "),o["ɵɵelementStart"](10,"td",44),o["ɵɵtext"](11,"\n                  "),o["ɵɵelementStart"](12,"input",45),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.hidePasswords=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n                "),o["ɵɵelementStart"](15,"td",44),o["ɵɵtext"](16,"\n                  "),o["ɵɵelementStart"](17,"input",45),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.readOnly=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n              "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate1"]("name","Collection[",n,"].Checked"),o["ɵɵproperty"]("ngModel",e.checked),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n                  ",e.name,"\n                "),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate1"]("name","Collection[",n,"].HidePasswords"),o["ɵɵproperty"]("ngModel",e.hidePasswords)("disabled",!e.checked),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate1"]("name","Collection[",n,"].ReadOnly"),o["ɵɵproperty"]("ngModel",e.readOnly)("disabled",!e.checked)}}function Dh(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",38),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"thead"),o["ɵɵtext"](3,"\n              "),o["ɵɵelementStart"](4,"tr"),o["ɵɵtext"](5,"\n                "),o["ɵɵelementStart"](6,"th"),o["ɵɵtext"](7," "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n                "),o["ɵɵelementStart"](9,"th"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n                "),o["ɵɵelementStart"](13,"th",39),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n                "),o["ɵɵelementStart"](17,"th",39),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n            "),o["ɵɵelementStart"](23,"tbody"),o["ɵɵtext"](24,"\n              "),o["ɵɵtemplate"](25,Mh,20,9,"tr",40),o["ɵɵtext"](26,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n          "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,4,"name")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](15,6,"hidePasswords")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](19,8,"readOnly")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngForOf",e.collections)}}function Fh(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵtemplate"](2,Bh,3,3,"div",35),o["ɵɵtext"](3,"\n          "),o["ɵɵtemplate"](4,Dh,28,10,"table",37),o["ɵɵtext"](5,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.collections||!e.collections.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.collections&&e.collections.length)}}const Rh=function(e){return{"mb-0":e}};function Uh(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",15),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"div",18),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"label",19),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n          "),o["ɵɵelementStart"](8,"input",20),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().name=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n        "),o["ɵɵelementStart"](11,"div",18),o["ɵɵtext"](12,"\n          "),o["ɵɵelementStart"](13,"label",21),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n          "),o["ɵɵelementStart"](17,"input",22),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().externalId=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n          "),o["ɵɵelementStart"](19,"small",23),o["ɵɵtext"](20),o["ɵɵpipe"](21,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n        "),o["ɵɵelementStart"](24,"h3",24),o["ɵɵtext"](25,"\n          "),o["ɵɵelementStart"](26,"div",25),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵelementStart"](29,"a",26),o["ɵɵpipe"](30,"i18n"),o["ɵɵtext"](31,"\n              "),o["ɵɵelement"](32,"i",27),o["ɵɵtext"](33,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n          "),o["ɵɵtemplate"](36,Th,10,6,"div",28),o["ɵɵtext"](37,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n        "),o["ɵɵelementStart"](39,"div",29),o["ɵɵtext"](40,"\n          "),o["ɵɵelementStart"](41,"div",30),o["ɵɵtext"](42,"\n            "),o["ɵɵelementStart"](43,"input",31),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().access=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n            "),o["ɵɵelementStart"](45,"label",32),o["ɵɵtext"](46),o["ɵɵpipe"](47,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n          "),o["ɵɵelementStart"](50,"div",30),o["ɵɵtext"](51,"\n            "),o["ɵɵelementStart"](52,"input",33),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().access=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n            "),o["ɵɵelementStart"](54,"label",34),o["ɵɵtext"](55),o["ɵɵpipe"](56,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](57,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n        "),o["ɵɵtemplate"](60,Fh,6,2,"ng-container",35),o["ɵɵtext"](61,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,14,"name")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.name),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](15,16,"externalId")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.externalId),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](21,18,"externalIdDesc")),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](28,20,"accessControl"),"\n            "),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](30,22,"learnMore")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngIf","selected"===e.access&&e.collections&&e.collections.length),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](28,Rh,"selected"!==e.access)),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngModel",e.access),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](47,24,"groupAccessAllItems"),"\n            "),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngModel",e.access),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](56,26,"groupAccessSelectedCollections"),"\n            "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf","selected"===e.access)}}function zh(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",46,47),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().delete()})),o["ɵɵpipe"](2,"i18n"),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"i",48),o["ɵɵtext"](5,"\n            "),o["ɵɵelement"](6,"i",49),o["ɵɵpipe"](7,"i18n"),o["ɵɵtext"](8,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](2,6,"delete")),o["ɵɵproperty"]("disabled",e.loading)("appApiAction",t.deletePromise),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](7,8,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}class Nh{constructor(e,t,n,i,r){this.apiService=e,this.i18nService=t,this.collectionService=n,this.platformUtilsService=i,this.logService=r,this.onSavedGroup=new o.EventEmitter,this.onDeletedGroup=new o.EventEmitter,this.loading=!0,this.editMode=!1,this.access="selected",this.collections=[]}ngOnInit(){return Ah(this,void 0,void 0,(function*(){if(this.editMode=this.loading=null!=this.groupId,yield this.loadCollections(),this.editMode){this.editMode=!0,this.title=this.i18nService.t("editGroup");try{const e=yield this.apiService.getGroupDetails(this.organizationId,this.groupId);this.access=e.accessAll?"all":"selected",this.name=e.name,this.externalId=e.externalId,null!=e.collections&&null!=this.collections&&e.collections.forEach((e=>{const t=this.collections.filter((t=>t.id===e.id));null!=t&&t.length>0&&(t[0].checked=!0,t[0].readOnly=e.readOnly,t[0].hidePasswords=e.hidePasswords)}))}catch(e){this.logService.error(e)}}else this.title=this.i18nService.t("addGroup");this.loading=!1}))}loadCollections(){return Ah(this,void 0,void 0,(function*(){const e=(yield this.apiService.getCollections(this.organizationId)).data.map((e=>new pm.F(new cm.Z(e))));this.collections=yield this.collectionService.decryptMany(e)}))}check(e,t){e.checked=null==t?!e.checked:t,e.checked||(e.readOnly=!1)}selectAll(e){this.collections.forEach((t=>this.check(t,e)))}submit(){return Ah(this,void 0,void 0,(function*(){const e=new Ph;e.name=this.name,e.externalId=this.externalId,e.accessAll="all"===this.access,e.accessAll||(e.collections=this.collections.filter((e=>e.checked)).map((e=>new mm(e.id,!!e.readOnly,!!e.hidePasswords))));try{this.editMode?this.formPromise=this.apiService.putGroup(this.organizationId,this.groupId,e):this.formPromise=this.apiService.postGroup(this.organizationId,e),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t(this.editMode?"editedGroupId":"createdGroupId",this.name)),this.onSavedGroup.emit()}catch(t){this.logService.error(t)}}))}delete(){return Ah(this,void 0,void 0,(function*(){if(!this.editMode)return;if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("deleteGroupConfirmation"),this.name,this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{this.deletePromise=this.apiService.deleteGroup(this.organizationId,this.groupId),yield this.deletePromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("deletedGroupId",this.name)),this.onDeletedGroup.emit()}catch(e){this.logService.error(e)}}))}}Nh.ɵfac=function(e){return new(e||Nh)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Jr.a),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$))},Nh.ɵcmp=o["ɵɵdefineComponent"]({type:Nh,selectors:[["app-group-add-edit"]],inputs:{groupId:"groupId",organizationId:"organizationId"},outputs:{onSavedGroup:"onSavedGroup",onDeletedGroup:"onDeletedGroup"},decls:49,vars:18,consts:[["role","dialog","aria-modal","true","aria-labelledby","groupAddEditTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","groupAddEditTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"ml-auto"],["type","button","class","btn btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click",4,"ngIf"],[1,"modal-body"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"form-group"],["for","name"],["id","name","type","text","name","Name","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","externalId"],["id","externalId","type","text","name","ExternalId",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-text","text-muted"],[1,"mt-4","d-flex"],[1,"mb-2"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/user-types-access-control/#access-control",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],["class","ml-auto",4,"ngIf"],[1,"form-group",3,"ngClass"],[1,"form-check"],["type","radio","name","access","id","accessAll","value","all",1,"form-check-input",3,"ngModel","ngModelChange"],["for","accessAll",1,"form-check-label"],["type","radio","name","access","id","accessSelected","value","selected",1,"form-check-input",3,"ngModel","ngModelChange"],["for","accessSelected",1,"form-check-label"],[4,"ngIf"],["type","button",1,"btn","btn-link","btn-sm","py-0",3,"click"],["class","table table-hover table-list mb-0",4,"ngIf"],[1,"table","table-hover","table-list","mb-0"],["width","100",1,"text-center"],[4,"ngFor","ngForOf"],[1,"table-list-checkbox",3,"click"],["type","checkbox","appStopProp","",3,"ngModel","name","ngModelChange"],[3,"click"],[1,"text-center"],["type","checkbox",3,"ngModel","name","disabled","ngModelChange"],["type","button",1,"btn","btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click"],["deleteBtn",""],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-lg","bwi-fw",3,"hidden","title"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"button",6),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"span",7),o["ɵɵtext"](16,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵtemplate"](20,Oh,9,6,"div",8),o["ɵɵtext"](21,"\n      "),o["ɵɵtemplate"](22,Uh,62,30,"div",8),o["ɵɵtext"](23,"\n      "),o["ɵɵelementStart"](24,"div",9),o["ɵɵtext"](25,"\n        "),o["ɵɵelementStart"](26,"button",10),o["ɵɵtext"](27,"\n          "),o["ɵɵelement"](28,"i",11),o["ɵɵpipe"](29,"i18n"),o["ɵɵtext"](30,"\n          "),o["ɵɵelementStart"](31,"span"),o["ɵɵtext"](32),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n        "),o["ɵɵelementStart"](36,"button",12),o["ɵɵtext"](37),o["ɵɵpipe"](38,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n        "),o["ɵɵelementStart"](40,"div",13),o["ɵɵtext"](41,"\n          "),o["ɵɵtemplate"](42,zh,9,10,"button",14),o["ɵɵtext"](43,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](t.title),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,10,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading),o["ɵɵadvance"](4),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](29,12,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](33,14,"save")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](38,16,"cancel"),"\n        "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",t.editMode)}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,B.NgIf,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,B.NgClass,d.RadioControlValueAccessor,B.NgForOf,d.CheckboxControlValueAccessor,Oi],pipes:[M.C],encapsulation:2});var Vh=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const Hh=["addEdit"],jh=["usersTemplate"];function Lh(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",9),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",10),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function Kh(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"noGroupsInList")))}function Gh(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"td"),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"a",14),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).edit(t)})),o["ɵɵtext"](5),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"td",15),o["ɵɵtext"](9,"\n          "),o["ɵɵelementStart"](10,"div",16),o["ɵɵtext"](11,"\n            "),o["ɵɵelementStart"](12,"button",17),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n              "),o["ɵɵelement"](15,"i",18),o["ɵɵtext"](16,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n            "),o["ɵɵelementStart"](18,"div",19),o["ɵɵtext"](19,"\n              "),o["ɵɵelementStart"](20,"a",20),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).users(t)})),o["ɵɵtext"](21,"\n                "),o["ɵɵelement"](22,"i",21),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n              "),o["ɵɵelementStart"](26,"a",22),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).delete(t)})),o["ɵɵtext"](27,"\n                "),o["ɵɵelement"](28,"i",23),o["ɵɵtext"](29),o["ɵɵpipe"](30,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit;o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.name),o["ɵɵadvance"](7),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,4,"options")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](24,6,"users"),"\n              "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](30,8,"delete"),"\n              ")}}function qh(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"table",12),o["ɵɵlistener"]("scrolled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).loadMore()})),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n      "),o["ɵɵtemplate"](4,Gh,35,10,"tr",13),o["ɵɵtext"](5,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().ngIf,t=o["ɵɵnextContext"]();o["ɵɵproperty"]("infiniteScrollDistance",1)("infiniteScrollDisabled",!t.isPaging()),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e)}}function _h(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,Kh,3,3,"p",6),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,qh,7,3,"table",11),o["ɵɵtext"](5,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=t.ngIf;o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.length)}}function $h(e,t){}function Wh(e,t){}class Qh{constructor(e,t,n,i,r,o,a,s,l){this.apiService=e,this.route=t,this.i18nService=n,this.modalService=i,this.platformUtilsService=r,this.router=o,this.searchService=a,this.logService=s,this.organizationService=l,this.loading=!0,this.didScroll=!1,this.pageSize=100,this.pagedGroupsCount=0}ngOnInit(){return Vh(this,void 0,void 0,(function*(){this.route.parent.parent.params.subscribe((e=>Vh(this,void 0,void 0,(function*(){this.organizationId=e.organizationId;const t=yield this.organizationService.get(this.organizationId);null!=t&&t.useGroups?(yield this.load(),this.route.queryParams.pipe((0,C.P)()).subscribe((e=>Vh(this,void 0,void 0,(function*(){this.searchText=e.search}))))):this.router.navigate(["/organizations",this.organizationId])}))))}))}load(){return Vh(this,void 0,void 0,(function*(){const e=yield this.apiService.getGroups(this.organizationId),t=null!=e.data&&e.data.length>0?e.data:[];t.sort(N.c.getSortFunction(this.i18nService,"name")),this.groups=t,this.resetPaging(),this.loading=!1}))}loadMore(){if(!this.groups||this.groups.length<=this.pageSize)return;const e=this.pagedGroups.length;let t=this.pageSize;0===e&&this.pagedGroupsCount>this.pageSize&&(t=this.pagedGroupsCount),this.groups.length>e&&(this.pagedGroups=this.pagedGroups.concat(this.groups.slice(e,e+t))),this.pagedGroupsCount=this.pagedGroups.length,this.didScroll=this.pagedGroups.length>this.pageSize}edit(e){return Vh(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(Nh,this.addEditModalRef,(n=>{n.organizationId=this.organizationId,n.groupId=null!=e?e.id:null,n.onSavedGroup.subscribe((()=>{t.close(),this.load()})),n.onDeletedGroup.subscribe((()=>{t.close(),this.removeGroup(e)}))}))}))}add(){this.edit(null)}delete(e){return Vh(this,void 0,void 0,(function*(){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("deleteGroupConfirmation"),e.name,this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{yield this.apiService.deleteGroup(this.organizationId,e.id),this.platformUtilsService.showToast("success",null,this.i18nService.t("deletedGroupId",e.name)),this.removeGroup(e)}catch(t){this.logService.error(t)}}))}users(e){return Vh(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(zm,this.usersModalRef,(n=>{n.organizationId=this.organizationId,n.entity="group",n.entityId=e.id,n.entityName=e.name,n.onEditedUsers.subscribe((()=>{t.close()}))}))}))}resetPaging(){return Vh(this,void 0,void 0,(function*(){this.pagedGroups=[],this.loadMore()}))}isSearching(){return this.searchService.isSearchable(this.searchText)}isPaging(){const e=this.isSearching();return e&&this.didScroll&&this.resetPaging(),!e&&this.groups&&this.groups.length>this.pageSize}removeGroup(e){const t=this.groups.indexOf(e);t>-1&&(this.groups.splice(t,1),this.resetPaging())}}Qh.ɵfac=function(e){return new(e||Qh)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](za),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Ii.M))},Qh.ɵcmp=o["ɵɵdefineComponent"]({type:Qh,selectors:[["app-org-groups"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](Hh,7,o.ViewContainerRef),o["ɵɵviewQuery"](jh,7,o.ViewContainerRef)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.addEditModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.usersModalRef=e.first)}},decls:37,vars:20,consts:[[1,"page-header","d-flex"],[1,"ml-auto","d-flex"],["for","search",1,"sr-only"],["type","search","id","search",1,"form-control","form-control-sm",3,"placeholder","ngModel","ngModelChange"],["type","button",1,"btn","btn-sm","btn-outline-primary","ml-3",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],[4,"ngIf"],["addEdit",""],["usersTemplate",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["class","table table-hover table-list","infiniteScroll","",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled",4,"ngIf"],["infiniteScroll","",1,"table","table-hover","table-list",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled"],[4,"ngFor","ngForOf"],["href","#","appStopClick","",3,"click"],[1,"table-list-options"],["appListDropdown","",1,"dropdown"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-cog","bwi-lg"],[1,"dropdown-menu","dropdown-menu-right"],["href","#","appStopClick","",1,"dropdown-item",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-users"],["href","#","appStopClick","",1,"dropdown-item","text-danger",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-trash"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"div",1),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"div"),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"label",2),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n      "),o["ɵɵelementStart"](14,"input",3),o["ɵɵlistener"]("ngModelChange",(function(e){return t.searchText=e})),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n    "),o["ɵɵelementStart"](18,"button",4),o["ɵɵlistener"]("click",(function(){return t.add()})),o["ɵɵtext"](19,"\n      "),o["ɵɵelement"](20,"i",5),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n"),o["ɵɵtemplate"](26,Lh,9,6,"ng-container",6),o["ɵɵtext"](27,"\n"),o["ɵɵtemplate"](28,_h,6,2,"ng-container",6),o["ɵɵpipe"](29,"search"),o["ɵɵtext"](30,"\n"),o["ɵɵtemplate"](31,$h,0,0,"ng-template",null,7,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](33,"\n"),o["ɵɵtemplate"](34,Wh,0,0,"ng-template",null,8,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](36,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,7,"groups")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,9,"search")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](15,11,"search")),o["ɵɵproperty"]("ngModel",t.searchText),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](22,13,"newGroup"),"\n    "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&(t.isPaging()?t.pagedGroups:o["ɵɵpipeBind4"](29,15,t.groups,t.searchText,"name","id"))))},directives:[d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,B.NgIf,u.InfiniteScrollDirective,B.NgForOf,Tn,pe],pipes:[M.C,um.C],encapsulation:2});var Yh=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Zh(e,t){1&e&&(o["ɵɵelementStart"](0,"a",14),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"people"),"\n          "))}function Jh(e,t){1&e&&(o["ɵɵelementStart"](0,"a",15),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"collections"),"\n          "))}function Xh(e,t){1&e&&(o["ɵɵelementStart"](0,"a",16),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"groups"),"\n          "))}function ev(e,t){1&e&&(o["ɵɵelementStart"](0,"a",17),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"policies"),"\n          "))}function tv(e,t){1&e&&(o["ɵɵelementStart"](0,"a",18),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"singleSignOn"),"\n          "))}function nv(e,t){1&e&&(o["ɵɵelementStart"](0,"a",19),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"eventLogs"),"\n          "))}function iv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",5),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"div",6),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"div",7),o["ɵɵtext"](7,"\n          "),o["ɵɵtemplate"](8,Zh,3,3,"a",8),o["ɵɵtext"](9,"\n          "),o["ɵɵtemplate"](10,Jh,3,3,"a",9),o["ɵɵtext"](11,"\n          "),o["ɵɵtemplate"](12,Xh,3,3,"a",10),o["ɵɵtext"](13,"\n          "),o["ɵɵtemplate"](14,ev,3,3,"a",11),o["ɵɵtext"](15,"\n          "),o["ɵɵtemplate"](16,tv,3,3,"a",12),o["ɵɵtext"](17,"\n          "),o["ɵɵtemplate"](18,nv,3,3,"a",13),o["ɵɵtext"](19,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,7,"manage")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.organization.canManageUsers),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.organization.canViewAllCollections||e.organization.canViewAssignedCollections),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.organization.canManageGroups&&e.accessGroups),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.organization.canManagePolicies&&e.accessPolicies),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.organization.canManageSso&&e.accessSso),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.organization.canAccessEventLogs&&e.accessEvents)}}class rv{constructor(e,t){this.route=e,this.organizationService=t,this.accessPolicies=!1,this.accessGroups=!1,this.accessEvents=!1,this.accessSso=!1}ngOnInit(){this.route.parent.params.subscribe((e=>Yh(this,void 0,void 0,(function*(){this.organization=yield this.organizationService.get(e.organizationId),this.accessPolicies=this.organization.usePolicies,this.accessSso=this.organization.useSso,this.accessEvents=this.organization.useEvents,this.accessGroups=this.organization.useGroups}))))}}rv.ɵfac=function(e){return new(e||rv)(o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](Ii.M))},rv.ɵcmp=o["ɵɵdefineComponent"]({type:rv,selectors:[["app-org-manage"]],decls:16,vars:1,consts:[[1,"container","page-content"],[1,"row"],[1,"col-3"],["class","card",4,"ngIf"],[1,"col-9"],[1,"card"],[1,"card-header"],[1,"list-group","list-group-flush"],["routerLink","people","class","list-group-item","routerLinkActive","active",4,"ngIf"],["routerLink","collections","class","list-group-item","routerLinkActive","active",4,"ngIf"],["routerLink","groups","class","list-group-item","routerLinkActive","active",4,"ngIf"],["routerLink","policies","class","list-group-item","routerLinkActive","active",4,"ngIf"],["routerLink","sso","class","list-group-item","routerLinkActive","active",4,"ngIf"],["routerLink","events","class","list-group-item","routerLinkActive","active",4,"ngIf"],["routerLink","people","routerLinkActive","active",1,"list-group-item"],["routerLink","collections","routerLinkActive","active",1,"list-group-item"],["routerLink","groups","routerLinkActive","active",1,"list-group-item"],["routerLink","policies","routerLinkActive","active",1,"list-group-item"],["routerLink","sso","routerLinkActive","active",1,"list-group-item"],["routerLink","events","routerLinkActive","active",1,"list-group-item"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵtemplate"](6,iv,21,9,"div",3),o["ɵɵtext"](7,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementStart"](9,"div",4),o["ɵɵtext"](10,"\n      "),o["ɵɵelement"](11,"router-outlet"),o["ɵɵtext"](12,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n")),2&e&&(o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",t.organization))},directives:[B.NgIf,p.RouterOutlet,p.RouterLinkWithHref,p.RouterLinkActive],pipes:[M.C],encapsulation:2});var ov=n(36478);class av extends je{constructor(e,t){super(e,t)}}class sv{constructor(e){this.ids=null==e?[]:e}}class lv{}var dv=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function cv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",18),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}class pv{constructor(e,t,n){this.cryptoService=e,this.logService=t,this.stateService=n,this.onConfirmedUser=new o.EventEmitter,this.dontAskAgain=!1,this.loading=!0}ngOnInit(){return dv(this,void 0,void 0,(function*(){try{if(null!=this.publicKey){const e=yield this.cryptoService.getFingerprint(this.userId,this.publicKey.buffer);null!=e&&(this.fingerprint=e.join("-"))}}catch(e){this.logService.error(e)}this.loading=!1}))}submit(){return dv(this,void 0,void 0,(function*(){this.loading||(this.dontAskAgain&&(yield this.stateService.setAutoConfirmFingerprints(!0)),this.onConfirmedUser.emit())}))}}pv.ɵfac=function(e){return new(e||pv)(o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](P.b))},pv.ɵcmp=o["ɵɵdefineComponent"]({type:pv,selectors:[["app-user-confirm"]],inputs:{name:"name",userId:"userId",publicKey:"publicKey"},outputs:{onConfirmedUser:"onConfirmedUser"},decls:69,vars:29,consts:[["role","dialog","aria-modal","true","aria-labelledby","confirmUserTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","confirmUserTitle",1,"modal-title"],["class","text-muted",4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["href","https://bitwarden.com/help/fingerprint-phrase/","target","_blank","rel","noopener"],[1,"form-check"],["type","checkbox","id","dontAskAgain","name","DontAskAgain",1,"form-check-input",3,"ngModel","ngModelChange"],["for","dontAskAgain",1,"form-check-label"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"text-muted"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵtemplate"](12,cv,2,1,"small",6),o["ɵɵtext"](13,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"button",7),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"span",8),o["ɵɵtext"](19,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementStart"](23,"div",9),o["ɵɵtext"](24,"\n        "),o["ɵɵelementStart"](25,"p"),o["ɵɵtext"](26),o["ɵɵpipe"](27,"i18n"),o["ɵɵelementStart"](28,"a",10),o["ɵɵtext"](29),o["ɵɵpipe"](30,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n        "),o["ɵɵelementStart"](33,"p"),o["ɵɵtext"](34,"\n          "),o["ɵɵelementStart"](35,"code"),o["ɵɵtext"](36),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n        "),o["ɵɵelementStart"](39,"div",11),o["ɵɵtext"](40,"\n          "),o["ɵɵelementStart"](41,"input",12),o["ɵɵlistener"]("ngModelChange",(function(e){return t.dontAskAgain=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n          "),o["ɵɵelementStart"](43,"label",13),o["ɵɵtext"](44),o["ɵɵpipe"](45,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n      "),o["ɵɵelementStart"](49,"div",14),o["ɵɵtext"](50,"\n        "),o["ɵɵelementStart"](51,"button",15),o["ɵɵtext"](52,"\n          "),o["ɵɵelement"](53,"i",16),o["ɵɵpipe"](54,"i18n"),o["ɵɵtext"](55,"\n          "),o["ɵɵelementStart"](56,"span"),o["ɵɵtext"](57),o["ɵɵpipe"](58,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n        "),o["ɵɵelementStart"](61,"button",17),o["ɵɵtext"](62),o["ɵɵpipe"](63,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](68,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,13,"confirmUser"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.name),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](16,15,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](27,17,"fingerprintEnsureIntegrityVerify"),"\n          "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](30,19,"learnMore"),""),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](t.fingerprint),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngModel",t.dontAskAgain),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](45,21,"dontAskFingerprintAgain"),"\n          "),o["ɵɵadvance"](7),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](54,23,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](58,25,"confirm")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](63,27,"cancel"),"\n        ")}},directives:[d["ɵNgNoValidate"],d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,pe,d.CheckboxControlValueAccessor,d.NgControlStatus,d.NgModel],pipes:[M.C],encapsulation:2});var uv=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const mv=["confirmTemplate"];class hv{constructor(e,t,n,i,r,o,a,s,l,d,c){this.apiService=e,this.searchService=t,this.i18nService=n,this.platformUtilsService=i,this.cryptoService=r,this.validationService=o,this.modalService=a,this.logService=s,this.searchPipe=l,this.userNamePipe=d,this.stateService=c,this.loading=!0,this.statusMap=new Map,this.users=[],this.pagedUsers=[],this.allUsers=[],this.activeUsers=[],this.didScroll=!1,this.pageSize=100,this.pagedUsersCount=0}get allCount(){return null!=this.activeUsers?this.activeUsers.length:0}get invitedCount(){return this.statusMap.has(this.userStatusType.Invited)?this.statusMap.get(this.userStatusType.Invited).length:0}get acceptedCount(){return this.statusMap.has(this.userStatusType.Accepted)?this.statusMap.get(this.userStatusType.Accepted).length:0}get confirmedCount(){return this.statusMap.has(this.userStatusType.Confirmed)?this.statusMap.get(this.userStatusType.Confirmed).length:0}get deactivatedCount(){return this.statusMap.has(this.userStatusType.Deactivated)?this.statusMap.get(this.userStatusType.Deactivated).length:0}get showConfirmUsers(){return null!=this.activeUsers&&null!=this.statusMap&&this.activeUsers.length>1&&this.confirmedCount>0&&this.confirmedCount<3&&this.acceptedCount>0}get showBulkConfirmUsers(){return this.acceptedCount>0}load(){return uv(this,void 0,void 0,(function*(){const e=yield this.getUsers();this.statusMap.clear(),this.activeUsers=[];for(const t of N.c.iterateEnum(this.userStatusType))this.statusMap.set(t,[]);this.allUsers=null!=e.data&&e.data.length>0?e.data:[],this.allUsers.sort(N.c.getSortFunction(this.i18nService,"email")),this.allUsers.forEach((e=>{this.statusMap.has(e.status)?this.statusMap.get(e.status).push(e):this.statusMap.set(e.status,[e]),e.status!==this.userStatusType.Deactivated&&this.activeUsers.push(e)})),this.filter(this.status),this.loading=!1}))}filter(e){this.status=e,null!=this.status?this.users=this.statusMap.get(this.status):this.users=this.activeUsers,this.selectAll(!1),this.resetPaging()}loadMore(){if(!this.users||this.users.length<=this.pageSize)return;const e=this.pagedUsers.length;let t=this.pageSize;0===e&&this.pagedUsersCount>this.pageSize&&(t=this.pagedUsersCount),this.users.length>e&&(this.pagedUsers=this.pagedUsers.concat(this.users.slice(e,e+t))),this.pagedUsersCount=this.pagedUsers.length,this.didScroll=this.pagedUsers.length>this.pageSize}checkUser(e,t){e.checked=null==t?!e.checked:t}selectAll(e){e&&this.selectAll(!1);const t=this.searchPipe.transform(this.users,this.searchText,"name","email","id"),n=e&&t.length>500?500:t.length;for(let i=0;i<n;i++)this.checkUser(t[i],e)}resetPaging(){return uv(this,void 0,void 0,(function*(){this.pagedUsers=[],this.loadMore()}))}invite(){this.edit(null)}remove(e){return uv(this,void 0,void 0,(function*(){if(!(yield this.platformUtilsService.showDialog(this.deleteWarningMessage(e),this.userNamePipe.transform(e),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;this.actionPromise=this.deleteUser(e.id);try{yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("removedUserId",this.userNamePipe.transform(e))),this.removeUser(e)}catch(t){this.validationService.showError(t)}this.actionPromise=null}))}deactivate(e){return uv(this,void 0,void 0,(function*(){if(!(yield this.platformUtilsService.showDialog(this.deactivateWarningMessage(),this.i18nService.t("deactivateUserId",this.userNamePipe.transform(e)),this.i18nService.t("deactivate"),this.i18nService.t("cancel"),"warning")))return!1;this.actionPromise=this.deactivateUser(e.id);try{yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("deactivatedUserId",this.userNamePipe.transform(e))),yield this.load()}catch(t){this.validationService.showError(t)}this.actionPromise=null}))}activate(e){return uv(this,void 0,void 0,(function*(){if(!(yield this.platformUtilsService.showDialog(this.activateWarningMessage(),this.i18nService.t("activateUserId",this.userNamePipe.transform(e)),this.i18nService.t("activate"),this.i18nService.t("cancel"),"warning")))return!1;this.actionPromise=this.activateUser(e.id);try{yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("activatedUserId",this.userNamePipe.transform(e))),yield this.load()}catch(t){this.validationService.showError(t)}this.actionPromise=null}))}reinvite(e){return uv(this,void 0,void 0,(function*(){if(null==this.actionPromise){this.actionPromise=this.reinviteUser(e.id);try{yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("hasBeenReinvited",this.userNamePipe.transform(e)))}catch(t){this.validationService.showError(t)}this.actionPromise=null}}))}confirm(e){return uv(this,void 0,void 0,(function*(){const t=t=>uv(this,void 0,void 0,(function*(){try{this.actionPromise=this.confirmUser(e,t),yield this.actionPromise,function(t){e.status=t.userStatusType.Confirmed;const n=t.statusMap.get(t.userStatusType.Accepted).indexOf(e);n>-1&&(t.statusMap.get(t.userStatusType.Accepted).splice(n,1),t.statusMap.get(t.userStatusType.Confirmed).push(e))}(this),this.platformUtilsService.showToast("success",null,this.i18nService.t("hasBeenConfirmed",this.userNamePipe.transform(e)))}catch(n){throw this.validationService.showError(n),n}finally{this.actionPromise=null}}));if(null==this.actionPromise)try{const i=yield this.apiService.getUserPublicKey(e.userId),r=N.c.fromB64ToArray(i.publicKey),o=yield this.stateService.getAutoConfirmFingerPrints();if(null==o||!o){const[n]=yield this.modalService.openViewRef(pv,this.confirmModalRef,(i=>{i.name=this.userNamePipe.transform(e),i.userId=null!=e?e.userId:null,i.publicKey=r,i.onConfirmedUser.subscribe((()=>uv(this,void 0,void 0,(function*(){try{i.formPromise=t(r),yield i.formPromise,n.close()}catch(e){this.logService.error(e)}}))))}));return}try{const t=yield this.cryptoService.getFingerprint(e.userId,r.buffer);this.logService.info(`User's fingerprint: ${t.join("-")}`)}catch(n){this.logService.error(n)}yield t(r)}catch(n){this.logService.error(`Handled exception: ${n}`)}}))}isSearching(){return this.searchService.isSearchable(this.searchText)}isPaging(){const e=this.isSearching();return e&&this.didScroll&&this.resetPaging(),!e&&this.users&&this.users.length>this.pageSize}deleteWarningMessage(e){return this.i18nService.t("removeUserConfirmation")}deactivateWarningMessage(){return this.i18nService.t("deactivateUserConfirmation")}activateWarningMessage(){return this.i18nService.t("activateUserConfirmation")}getCheckedUsers(){return this.users.filter((e=>e.checked))}removeUser(e){let t=this.users.indexOf(e);t>-1&&(this.users.splice(t,1),this.resetPaging()),this.statusMap.has(e.status)&&(t=this.statusMap.get(e.status).indexOf(e),t>-1&&this.statusMap.get(e.status).splice(t,1))}}hv.ɵfac=function(e){return new(e||hv)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](za),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](ov.R),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](um.C),o["ɵɵdirectiveInject"](Pc.z),o["ɵɵdirectiveInject"](P.b))},hv.ɵdir=o["ɵɵdefineDirective"]({type:hv,viewQuery:function(e,t){if(1&e&&o["ɵɵviewQuery"](mv,7,o.ViewContainerRef),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.confirmModalRef=e.first)}}});class vv{constructor(e){this.keys=e}}var gv=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function fv(e,t){1&e&&(o["ɵɵelementStart"](0,"div",15),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",16),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](5,4,"loading"),"\n        "))}function xv(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",17),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"noSelectedUsersApplicable"),"\n        "))}function yv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",18),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",e.error,"\n        ")}}function Sv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",26),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function bv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",23),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"app-avatar",24),o["ɵɵpipe"](5,"userName"),o["ɵɵtext"](6,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementStart"](9,"td"),o["ɵɵtext"](10),o["ɵɵtemplate"](11,Sv,2,1,"small",25),o["ɵɵtext"](12,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵelementStart"](14,"td"),o["ɵɵtext"](15),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](5,7,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n                ",e.email,"\n                "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.name),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n                ",n.fingerprints.get(e.id),"\n              ")}}function wv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",26),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function Iv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",23),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"app-avatar",24),o["ɵɵpipe"](5,"userName"),o["ɵɵtext"](6,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementStart"](9,"td"),o["ɵɵtext"](10),o["ɵɵtemplate"](11,wv,2,1,"small",25),o["ɵɵtext"](12,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵelementStart"](14,"td"),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](4),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](5,7,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n                ",e.email,"\n                "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.name),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](16,9,"bulkFilteredMessage"),"\n              ")}}function Cv(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementStart"](5,"a",19),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelementStart"](10,"table",20),o["ɵɵtext"](11,"\n            "),o["ɵɵelementStart"](12,"thead"),o["ɵɵtext"](13,"\n              "),o["ɵɵelementStart"](14,"tr"),o["ɵɵtext"](15,"\n                "),o["ɵɵelementStart"](16,"th",21),o["ɵɵtext"](17),o["ɵɵpipe"](18,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n                "),o["ɵɵelementStart"](20,"th"),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n            "),o["ɵɵtemplate"](26,bv,17,9,"tr",22),o["ɵɵtext"](27,"\n            "),o["ɵɵtemplate"](28,Iv,18,11,"tr",22),o["ɵɵtext"](29,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,6,"fingerprintEnsureIntegrityVerify"),"\n            "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](7,8,"learnMore"),""),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](18,10,"user")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](22,12,"fingerprint")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",e.filteredUsers),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.excludedUsers)}}function Ev(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",26),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function kv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"td"),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](2);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",t.statuses.get(e.id),"\n              ")}}function Pv(e,t){1&e&&(o["ɵɵelementStart"](0,"td"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](2,1,"bulkFilteredMessage"),"\n              "))}function Av(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",23),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"app-avatar",24),o["ɵɵpipe"](5,"userName"),o["ɵɵtext"](6,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementStart"](9,"td"),o["ɵɵtext"](10),o["ɵɵtemplate"](11,Ev,2,1,"small",25),o["ɵɵtext"](12,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵtemplate"](14,kv,2,1,"td",11),o["ɵɵtext"](15,"\n              "),o["ɵɵtemplate"](16,Pv,3,3,"td",11),o["ɵɵtext"](17,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](5,8,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n                ",e.email,"\n                "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.name),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",n.statuses.has(e.id)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!n.statuses.has(e.id))}}function Ov(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"table",20),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"thead"),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"tr"),o["ɵɵtext"](7,"\n                "),o["ɵɵelementStart"](8,"th",21),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n                "),o["ɵɵelementStart"](12,"th"),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n            "),o["ɵɵtemplate"](18,Av,18,10,"tr",22),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,3,"user")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,5,"status")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",e.filteredUsers)}}function Tv(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",27),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",16),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,5,"confirm"))}}class Bv{constructor(e,t,n){this.cryptoService=e,this.apiService=t,this.i18nService=n,this.publicKeys=new Map,this.fingerprints=new Map,this.statuses=new Map,this.loading=!0,this.done=!1}ngOnInit(){return gv(this,void 0,void 0,(function*(){this.excludedUsers=this.users.filter((e=>!this.isAccepted(e))),this.filteredUsers=this.users.filter((e=>this.isAccepted(e))),this.filteredUsers.length<=0&&(this.done=!0);const e=yield this.getPublicKeys();for(const t of e.data){const e=N.c.fromB64ToArray(t.key),n=yield this.cryptoService.getFingerprint(t.userId,e.buffer);null!=n&&(this.publicKeys.set(t.id,e),this.fingerprints.set(t.id,n.join("-")))}this.loading=!1}))}submit(){return gv(this,void 0,void 0,(function*(){this.loading=!0;try{const e=yield this.getCryptoKey(),t=[];for(const n of this.filteredUsers){const i=this.publicKeys.get(n.id);if(null==i)continue;const r=yield this.cryptoService.rsaEncrypt(e.key,i.buffer);t.push({id:n.id,key:r.encryptedString})}(yield this.postConfirmRequest(t)).data.forEach((e=>{const t=""!==e.error?e.error:this.i18nService.t("bulkConfirmMessage");this.statuses.set(e.id,t)})),this.done=!0}catch(e){this.error=e.message}this.loading=!1}))}isAccepted(e){return e.status===Vr.Accepted}getPublicKeys(){return gv(this,void 0,void 0,(function*(){const e=new sv(this.filteredUsers.map((e=>e.id)));return yield this.apiService.postOrganizationUsersPublicKey(this.organizationId,e)}))}getCryptoKey(){return this.cryptoService.getOrgKey(this.organizationId)}postConfirmRequest(e){return gv(this,void 0,void 0,(function*(){const t=new vv(e);return yield this.apiService.postOrganizationUserBulkConfirm(this.organizationId,t)}))}}Bv.ɵfac=function(e){return new(e||Bv)(o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D))},Bv.ɵcmp=o["ɵɵdefineComponent"]({type:Bv,selectors:[["app-bulk-confirm"]],inputs:{organizationId:"organizationId",users:"users"},decls:45,vars:15,consts:[["role","dialog","aria-modal","true","aria-labelledby","bulkTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","bulkTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["class","card-body text-center",4,"ngIf"],["type","danger",4,"ngIf"],["type","error",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled","click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"card-body","text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","danger"],["type","error"],["href","https://bitwarden.com/help/fingerprint-phrase/","target","_blank","rel","noopener"],[1,"table","table-hover","table-list"],["colspan","2"],[4,"ngFor","ngForOf"],["width","30"],["size","25",3,"data","email","circle","fontSize"],["class","text-muted d-block",4,"ngIf"],[1,"text-muted","d-block"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled","click"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h2",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"button",5),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"span",6),o["ɵɵtext"](16,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"div",7),o["ɵɵtext"](21,"\n        "),o["ɵɵtemplate"](22,fv,6,6,"div",8),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,xv,3,3,"app-callout",9),o["ɵɵtext"](25,"\n        "),o["ɵɵtemplate"](26,yv,2,1,"app-callout",10),o["ɵɵtext"](27,"\n        "),o["ɵɵtemplate"](28,Cv,31,14,"ng-container",11),o["ɵɵtext"](29,"\n        "),o["ɵɵtemplate"](30,Ov,21,7,"ng-container",11),o["ɵɵtext"](31,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n      "),o["ɵɵelementStart"](33,"div",12),o["ɵɵtext"](34,"\n        "),o["ɵɵtemplate"](35,Tv,9,7,"button",13),o["ɵɵtext"](36,"\n        "),o["ɵɵelementStart"](37,"button",14),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](10,9,"confirmUsers"),"\n        "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,11,"close")),o["ɵɵadvance"](10),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.filteredUsers.length<=0),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.error),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&!t.done),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&t.done),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!t.done),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](39,13,"close"),"\n        "))},directives:[pe,B.NgIf,Pe.O,B.NgForOf,Di],pipes:[M.C,Pc.z],encapsulation:2});var Mv=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Dv(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",14),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"noSelectedUsersApplicable"),"\n        "))}function Fv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",15),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",e.error,"\n        ")}}function Rv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",20),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",e.usersWarning,"\n          ")}}function Uv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",24),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function zv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",21),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"app-avatar",22),o["ɵɵpipe"](5,"userName"),o["ɵɵtext"](6,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementStart"](9,"td"),o["ɵɵtext"](10),o["ɵɵtemplate"](11,Uv,2,1,"small",23),o["ɵɵtext"](12,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](4),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](5,6,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n                ",e.email,"\n                "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.name)}}function Nv(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵtemplate"](2,Rv,2,1,"app-callout",16),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"table",17),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"thead"),o["ɵɵtext"](7,"\n              "),o["ɵɵelementStart"](8,"tr"),o["ɵɵtext"](9,"\n                "),o["ɵɵelementStart"](10,"th",18),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n            "),o["ɵɵtemplate"](16,zv,14,8,"tr",19),o["ɵɵtext"](17,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.users.length>0&&!e.error),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,3,"user")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",e.users)}}function Vv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",24),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function Hv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"td"),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](2);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",t.statuses.get(e.id),"\n              ")}}function jv(e,t){1&e&&(o["ɵɵelementStart"](0,"td"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](2,1,"bulkFilteredMessage"),"\n              "))}function Lv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",21),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"app-avatar",22),o["ɵɵpipe"](5,"userName"),o["ɵɵtext"](6,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementStart"](9,"td"),o["ɵɵtext"](10),o["ɵɵtemplate"](11,Vv,2,1,"small",23),o["ɵɵtext"](12,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵtemplate"](14,Hv,2,1,"td",10),o["ɵɵtext"](15,"\n              "),o["ɵɵtemplate"](16,jv,3,3,"td",10),o["ɵɵtext"](17,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](5,8,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n                ",e.email,"\n                "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.name),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",n.statuses.has(e.id)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!n.statuses.has(e.id))}}function Kv(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"table",17),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"thead"),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"tr"),o["ɵɵtext"](7,"\n                "),o["ɵɵelementStart"](8,"th",18),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n                "),o["ɵɵelementStart"](12,"th"),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n            "),o["ɵɵtemplate"](18,Lv,18,10,"tr",19),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,3,"user")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,5,"status")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",e.users)}}function Gv(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",25),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",26),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span"),o["ɵɵtext"](6),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](e.bulkTitle)}}class qv{constructor(e,t,n,i){this.apiService=e,this.i18nService=t,this.modalRef=n,this.statuses=new Map,this.loading=!1,this.done=!1,this.isDeactivating=i.data.isDeactivating,this.organizationId=i.data.organizationId,this.users=i.data.users}get bulkTitle(){const e=this.isDeactivating?"deactivateUsers":"activateUsers";return this.i18nService.t(e)}get usersWarning(){const e=this.isDeactivating?"deactivateUsersWarning":"activateUsersWarning";return this.i18nService.t(e)}submit(){return Mv(this,void 0,void 0,(function*(){this.loading=!0;try{const e=yield this.performBulkUserAction(),t=this.isDeactivating?"bulkDeactivatedMessage":"bulkActivatedMessage";e.data.forEach((e=>{const n=""!==e.error?e.error:this.i18nService.t(t);this.statuses.set(e.id,n)})),this.done=!0}catch(e){this.error=e.message}this.loading=!1,this.modalRef.close()}))}performBulkUserAction(){return Mv(this,void 0,void 0,(function*(){const e=new sv(this.users.map((e=>e.id)));return this.isDeactivating?yield this.apiService.deactivateManyOrganizationUsers(this.organizationId,e):yield this.apiService.activateManyOrganizationUsers(this.organizationId,e)}))}}qv.ɵfac=function(e){return new(e||qv)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](yn),o["ɵɵdirectiveInject"](En))},qv.ɵcmp=o["ɵɵdefineComponent"]({type:qv,selectors:[["app-bulk-deactivate"]],decls:42,vars:12,consts:[["role","dialog","aria-modal","true","aria-labelledby","bulkTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","bulkTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","danger",4,"ngIf"],["type","error",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled","click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["type","danger"],["type","error"],["type","warning",4,"ngIf"],[1,"table","table-hover","table-list"],["colspan","2"],[4,"ngFor","ngForOf"],["type","warning"],["width","30"],["size","25",3,"data","email","circle","fontSize"],["class","text-muted d-block",4,"ngIf"],[1,"text-muted","d-block"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h2",4),o["ɵɵtext"](9),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n        "),o["ɵɵelementStart"](11,"button",5),o["ɵɵpipe"](12,"i18n"),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"span",6),o["ɵɵtext"](15,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementStart"](19,"div",7),o["ɵɵtext"](20,"\n        "),o["ɵɵtemplate"](21,Dv,3,3,"app-callout",8),o["ɵɵtext"](22,"\n        "),o["ɵɵtemplate"](23,Fv,2,1,"app-callout",9),o["ɵɵtext"](24,"\n        "),o["ɵɵtemplate"](25,Nv,19,5,"ng-container",10),o["ɵɵtext"](26,"\n        "),o["ɵɵtemplate"](27,Kv,21,7,"ng-container",10),o["ɵɵtext"](28,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n      "),o["ɵɵelementStart"](30,"div",11),o["ɵɵtext"](31,"\n        "),o["ɵɵtemplate"](32,Gv,8,5,"button",12),o["ɵɵtext"](33,"\n        "),o["ɵɵelementStart"](34,"button",13),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n          ",t.bulkTitle,"\n        "),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](12,8,"close")),o["ɵɵadvance"](10),o["ɵɵproperty"]("ngIf",t.users.length<=0),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.error),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.done),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.done),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!t.done&&t.users.length>0),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](36,10,"close"),"\n        "))},directives:[pe,B.NgIf,Pe.O,B.NgForOf,Di],pipes:[M.C,Pc.z],encapsulation:2});var _v=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function $v(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",14),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"noSelectedUsersApplicable"),"\n        "))}function Wv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",15),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",e.error,"\n        ")}}function Qv(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",20),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"removeUsersWarning"),"\n          "))}function Yv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",24),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function Zv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",21),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"app-avatar",22),o["ɵɵpipe"](5,"userName"),o["ɵɵtext"](6,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementStart"](9,"td"),o["ɵɵtext"](10),o["ɵɵtemplate"](11,Yv,2,1,"small",23),o["ɵɵtext"](12,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](4),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](5,6,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n                ",e.email,"\n                "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.name)}}function Jv(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵtemplate"](2,Qv,3,3,"app-callout",16),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"table",17),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"thead"),o["ɵɵtext"](7,"\n              "),o["ɵɵelementStart"](8,"tr"),o["ɵɵtext"](9,"\n                "),o["ɵɵelementStart"](10,"th",18),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n            "),o["ɵɵtemplate"](16,Zv,14,8,"tr",19),o["ɵɵtext"](17,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.users.length>0&&!e.error),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,3,"user")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",e.users)}}function Xv(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",24),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function eg(e,t){if(1&e&&(o["ɵɵelementStart"](0,"td"),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](2);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",t.statuses.get(e.id),"\n              ")}}function tg(e,t){1&e&&(o["ɵɵelementStart"](0,"td"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](2,1,"bulkFilteredMessage"),"\n              "))}function ng(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",21),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"app-avatar",22),o["ɵɵpipe"](5,"userName"),o["ɵɵtext"](6,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementStart"](9,"td"),o["ɵɵtext"](10),o["ɵɵtemplate"](11,Xv,2,1,"small",23),o["ɵɵtext"](12,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵtemplate"](14,eg,2,1,"td",10),o["ɵɵtext"](15,"\n              "),o["ɵɵtemplate"](16,tg,3,3,"td",10),o["ɵɵtext"](17,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](5,8,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n                ",e.email,"\n                "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.name),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",n.statuses.has(e.id)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!n.statuses.has(e.id))}}function ig(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"table",17),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"thead"),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"tr"),o["ɵɵtext"](7,"\n                "),o["ɵɵelementStart"](8,"th",18),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n                "),o["ɵɵelementStart"](12,"th"),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n            "),o["ɵɵtemplate"](18,ng,18,10,"tr",19),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,3,"user")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,5,"status")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",e.users)}}function rg(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",25),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",26),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,5,"removeUsers"))}}class og{constructor(e,t){this.apiService=e,this.i18nService=t,this.statuses=new Map,this.loading=!1,this.done=!1}submit(){return _v(this,void 0,void 0,(function*(){this.loading=!0;try{(yield this.deleteUsers()).data.forEach((e=>{const t=""!==e.error?e.error:this.i18nService.t("bulkRemovedMessage");this.statuses.set(e.id,t)})),this.done=!0}catch(e){this.error=e.message}this.loading=!1}))}deleteUsers(){return _v(this,void 0,void 0,(function*(){const e=new sv(this.users.map((e=>e.id)));return yield this.apiService.deleteManyOrganizationUsers(this.organizationId,e)}))}}function ag(e,t){1&e&&(o["ɵɵelementStart"](0,"div",12),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",13),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](5,4,"loading"),"\n        "))}function sg(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",22),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.user.name)}}function lg(e,t){if(1&e&&(o["ɵɵelementStart"](0,"td",23),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",e.message,"\n            ")}}function dg(e,t){if(1&e&&(o["ɵɵelementStart"](0,"td"),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",e.message,"\n            ")}}function cg(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"td",17),o["ɵɵtext"](3,"\n              "),o["ɵɵelement"](4,"app-avatar",18),o["ɵɵpipe"](5,"userName"),o["ɵɵtext"](6,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"td"),o["ɵɵtext"](9),o["ɵɵtemplate"](10,sg,2,1,"small",19),o["ɵɵtext"](11,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n            "),o["ɵɵtemplate"](13,lg,2,1,"td",20),o["ɵɵtext"](14,"\n            "),o["ɵɵtemplate"](15,dg,2,1,"td",21),o["ɵɵtext"](16,"\n          "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](4),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](5,8,e.user))("email",e.user.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n              ",e.user.email,"\n              "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.user.name),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.error),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.error)}}function pg(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",14),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"thead"),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"tr"),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"th",15),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"th"),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n          "),o["ɵɵtemplate"](16,cg,17,10,"tr",16),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,3,"user")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,5,"status")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",e.users)}}og.ɵfac=function(e){return new(e||og)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D))},og.ɵcmp=o["ɵɵdefineComponent"]({type:og,selectors:[["app-bulk-remove"]],inputs:{organizationId:"organizationId",users:"users"},decls:43,vars:14,consts:[["role","dialog","aria-modal","true","aria-labelledby","bulkTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","bulkTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","danger",4,"ngIf"],["type","error",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled","click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["type","danger"],["type","error"],["type","warning",4,"ngIf"],[1,"table","table-hover","table-list"],["colspan","2"],[4,"ngFor","ngForOf"],["type","warning"],["width","30"],["size","25",3,"data","email","circle","fontSize"],["class","text-muted d-block",4,"ngIf"],[1,"text-muted","d-block"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h2",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"button",5),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"span",6),o["ɵɵtext"](16,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"div",7),o["ɵɵtext"](21,"\n        "),o["ɵɵtemplate"](22,$v,3,3,"app-callout",8),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,Wv,2,1,"app-callout",9),o["ɵɵtext"](25,"\n        "),o["ɵɵtemplate"](26,Jv,19,5,"ng-container",10),o["ɵɵtext"](27,"\n        "),o["ɵɵtemplate"](28,ig,21,7,"ng-container",10),o["ɵɵtext"](29,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n      "),o["ɵɵelementStart"](31,"div",11),o["ɵɵtext"](32,"\n        "),o["ɵɵtemplate"](33,rg,9,7,"button",12),o["ɵɵtext"](34,"\n        "),o["ɵɵelementStart"](35,"button",13),o["ɵɵtext"](36),o["ɵɵpipe"](37,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](10,8,"removeUsers"),"\n        "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,10,"close")),o["ɵɵadvance"](10),o["ɵɵproperty"]("ngIf",t.users.length<=0),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.error),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.done),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.done),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!t.done&&t.users.length>0),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](37,12,"close"),"\n        "))},directives:[pe,B.NgIf,Pe.O,B.NgForOf,Di],pipes:[M.C,Pc.z],encapsulation:2});class ug{constructor(){this.loading=!1}}ug.ɵfac=function(e){return new(e||ug)},ug.ɵcmp=o["ɵɵdefineComponent"]({type:ug,selectors:[["app-bulk-status"]],decls:37,vars:11,consts:[["role","dialog","aria-modal","true","aria-labelledby","bulkTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","bulkTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["class","card-body text-center",4,"ngIf"],["class","table table-hover table-list",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"card-body","text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[1,"table","table-hover","table-list"],["colspan","2"],[4,"ngFor","ngForOf"],["width","30"],["size","25",3,"data","email","circle","fontSize"],["class","text-muted d-block",4,"ngIf"],["class","text-danger",4,"ngIf"],[4,"ngIf"],[1,"text-muted","d-block"],[1,"text-danger"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h2",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"button",5),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"span",6),o["ɵɵtext"](16,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"div",7),o["ɵɵtext"](21,"\n        "),o["ɵɵtemplate"](22,ag,6,6,"div",8),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,pg,18,7,"table",9),o["ɵɵtext"](25,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n      "),o["ɵɵelementStart"](27,"div",10),o["ɵɵtext"](28,"\n        "),o["ɵɵelementStart"](29,"button",11),o["ɵɵtext"](30),o["ɵɵpipe"](31,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](10,5,"bulkConfirmStatus"),"\n        "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,7,"close")),o["ɵɵadvance"](10),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](31,9,"close"),"\n        "))},directives:[pe,B.NgIf,B.NgForOf,Di],pipes:[M.C,Pc.z],encapsulation:2});var mg=n(42738),hg=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function vg(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function gg(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",31),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵpropertyInterpolate"]("enforcedPolicyMessage",o["ɵɵpipeBind1"](1,2,"resetPasswordMasterPasswordPolicyInEffect")),o["ɵɵproperty"]("enforcedPolicyOptions",e.enforcedPolicyOptions)}}const fg=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}};class xg{constructor(e,t,n,i,r,a,s){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.passwordGenerationService=i,this.policyService=r,this.cryptoService=a,this.logService=s,this.onPasswordReset=new o.EventEmitter,this.newPassword=null,this.showPassword=!1}ngOnInit(){return hg(this,void 0,void 0,(function*(){this.enforcedPolicyOptions=yield this.policyService.getMasterPasswordPolicyOptions()}))}get loggedOutWarningName(){return null!=this.name?this.name:this.i18nService.t("thisUser")}generatePassword(){return hg(this,void 0,void 0,(function*(){const e=(yield this.passwordGenerationService.getOptions())[0];this.newPassword=yield this.passwordGenerationService.generatePassword(e),this.updatePasswordStrength()}))}togglePassword(){this.showPassword=!this.showPassword,document.getElementById("newPassword").focus()}copy(e){null!=e&&(this.platformUtilsService.copyToClipboard(e,{window}),this.platformUtilsService.showToast("info",null,this.i18nService.t("valueCopied",this.i18nService.t("password"))))}submit(){return hg(this,void 0,void 0,(function*(){if(null==this.newPassword||""===this.newPassword)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPassRequired")),!1;if(this.newPassword.length<8)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPassLength")),!1;if(null==this.enforcedPolicyOptions||this.policyService.evaluateMasterPassword(this.masterPasswordScore,this.newPassword,this.enforcedPolicyOptions)){if(this.masterPasswordScore<3){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("weakMasterPasswordDesc"),this.i18nService.t("weakMasterPassword"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1}try{this.formPromise=this.apiService.getOrganizationUserResetPasswordDetails(this.organizationId,this.id).then((e=>hg(this,void 0,void 0,(function*(){if(null==e)throw new Error(this.i18nService.t("resetPasswordDetailsError"));const t=e.kdf,n=e.kdfIterations,i=e.resetPasswordKey,r=e.encryptedPrivateKey,o=yield this.cryptoService.getOrgKey(this.organizationId),a=yield this.cryptoService.decryptToBytes(new ie._(r),o),s=yield this.cryptoService.rsaDecrypt(i,a),l=new mg.N(s),d=yield this.cryptoService.makeKey(this.newPassword,this.email.trim().toLowerCase(),t,n),c=yield this.cryptoService.hashPassword(this.newPassword,d),p=yield this.cryptoService.remakeEncKey(d,l),u=new ti;return u.key=p[1].encryptedString,u.newMasterPasswordHash=c,this.apiService.putOrganizationUserResetPassword(this.organizationId,this.id,u)})))),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("resetPasswordSuccess")),this.onPasswordReset.emit()}catch(e){this.logService.error(e)}}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPasswordPolicyRequirementsNotMet"))}))}updatePasswordStrength(){null!=this.newPasswordStrengthTimeout&&clearTimeout(this.newPasswordStrengthTimeout),this.newPasswordStrengthTimeout=setTimeout((()=>{const e=this.passwordGenerationService.passwordStrength(this.newPassword,this.getPasswordStrengthUserInput());this.masterPasswordScore=null==e?null:e.score}),300)}getPasswordStrengthUserInput(){let e=[];const t=this.email.indexOf("@");return t>-1&&(e=e.concat(this.email.substr(0,t).trim().toLowerCase().split(/[^A-Za-z0-9]/))),null!=this.name&&""!==this.name&&(e=e.concat(this.name.trim().toLowerCase().split(" "))),e}}xg.ɵfac=function(e){return new(e||xg)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](L.$))},xg.ɵcmp=o["ɵɵdefineComponent"]({type:xg,selectors:[["app-reset-password"]],inputs:{name:"name",email:"email",id:"id",organizationId:"organizationId"},outputs:{onPasswordReset:"onPasswordReset"},decls:97,vars:43,consts:[["role","dialog","aria-modal","true","aria-labelledby","resetPasswordTitle",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","resetPasswordTitle",1,"modal-title"],["class","text-muted",4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","warning"],["type","info",3,"enforcedPolicyOptions","enforcedPolicyMessage",4,"ngIf"],[1,"row"],[1,"col","form-group"],[1,"d-flex"],["for","newPassword"],[1,"ml-auto","d-flex"],["href","#","appStopClick","",1,"d-block","mr-2","bwi-icon-above-input",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-fw","bwi-refresh"],[1,"input-group","mb-1"],["id","newPassword","appAutofocus","","name","NewPassword","required","","appInputVerbatim","","autocomplete","new-password",1,"form-control","text-monospace",3,"type","ngModel","ngModelChange","input"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-clone"],[3,"score","showText"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"text-muted"],["type","info",3,"enforcedPolicyOptions","enforcedPolicyMessage"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵtemplate"](12,vg,2,1,"small",6),o["ɵɵtext"](13,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"button",7),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"span",8),o["ɵɵtext"](19,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementStart"](23,"div",9),o["ɵɵtext"](24,"\n        "),o["ɵɵelementStart"](25,"app-callout",10),o["ɵɵtext"](26),o["ɵɵpipe"](27,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n        "),o["ɵɵtemplate"](29,gg,3,4,"app-callout",11),o["ɵɵtext"](30,"\n        "),o["ɵɵelementStart"](31,"div",12),o["ɵɵtext"](32,"\n          "),o["ɵɵelementStart"](33,"div",13),o["ɵɵtext"](34,"\n            "),o["ɵɵelementStart"](35,"div",14),o["ɵɵtext"](36,"\n              "),o["ɵɵelementStart"](37,"label",15),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n              "),o["ɵɵelementStart"](41,"div",16),o["ɵɵtext"](42,"\n                "),o["ɵɵelementStart"](43,"a",17),o["ɵɵlistener"]("click",(function(){return t.generatePassword()})),o["ɵɵpipe"](44,"i18n"),o["ɵɵtext"](45,"\n                  "),o["ɵɵelement"](46,"i",18),o["ɵɵtext"](47,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n            "),o["ɵɵelementStart"](51,"div",19),o["ɵɵtext"](52,"\n              "),o["ɵɵelementStart"](53,"input",20),o["ɵɵlistener"]("ngModelChange",(function(e){return t.newPassword=e}))("input",(function(){return t.updatePasswordStrength()})),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n              "),o["ɵɵelementStart"](55,"div",21),o["ɵɵtext"](56,"\n                "),o["ɵɵelementStart"](57,"button",22),o["ɵɵlistener"]("click",(function(){return t.togglePassword()})),o["ɵɵpipe"](58,"i18n"),o["ɵɵtext"](59,"\n                  "),o["ɵɵelement"](60,"i",23),o["ɵɵtext"](61,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](62,"\n                "),o["ɵɵelementStart"](63,"button",22),o["ɵɵlistener"]("click",(function(){return t.copy(t.newPassword)})),o["ɵɵpipe"](64,"i18n"),o["ɵɵtext"](65,"\n                  "),o["ɵɵelement"](66,"i",24),o["ɵɵtext"](67,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](68,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](69,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](70,"\n            "),o["ɵɵelementStart"](71,"app-password-strength",25),o["ɵɵtext"](72,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](73,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](74,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](75,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n      "),o["ɵɵelementStart"](77,"div",26),o["ɵɵtext"](78,"\n        "),o["ɵɵelementStart"](79,"button",27),o["ɵɵtext"](80,"\n          "),o["ɵɵelement"](81,"i",28),o["ɵɵpipe"](82,"i18n"),o["ɵɵtext"](83,"\n          "),o["ɵɵelementStart"](84,"span"),o["ɵɵtext"](85),o["ɵɵpipe"](86,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](87,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](88,"\n        "),o["ɵɵelementStart"](89,"button",29),o["ɵɵtext"](90),o["ɵɵpipe"](91,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](92,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](93,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](94,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](95,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](96,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,19,"resetPassword"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.name),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](16,21,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind2"](27,23,"resetPasswordLoggedOutWarning",t.loggedOutWarningName),"\n        "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.enforcedPolicyOptions),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](39,26,"newPassword")),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](44,28,"generatePassword")),o["ɵɵadvance"](10),o["ɵɵpropertyInterpolate"]("type",t.showPassword?"text":"password"),o["ɵɵproperty"]("ngModel",t.newPassword),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](58,30,"toggleVisibility")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](40,fg,!t.showPassword,t.showPassword)),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](64,32,"copyPassword")),o["ɵɵadvance"](8),o["ɵɵproperty"]("score",t.masterPasswordScore)("showText",!0),o["ɵɵadvance"](8),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](82,34,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](86,36,"save")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](91,38,"cancel"),"\n        ")}},directives:[d["ɵNgNoValidate"],d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,pe,Pe.O,Tn,d.DefaultValueAccessor,Z.U,d.RequiredValidator,J.b,d.NgControlStatus,d.NgModel,B.NgClass,rt],pipes:[M.C],encapsulation:2});var yg=n(33459);class Sg extends yg.c{constructor(e=null){if(super(e),null==e)return this;this.accessEventLogs=this.getResponseProperty("AccessEventLogs"),this.accessImportExport=this.getResponseProperty("AccessImportExport"),this.accessReports=this.getResponseProperty("AccessReports"),this.manageAllCollections=this.getResponseProperty("ManageAllCollections"),this.manageAssignedCollections=this.getResponseProperty("ManageAssignedCollections"),this.createNewCollections=this.getResponseProperty("CreateNewCollections"),this.editAnyCollection=this.getResponseProperty("EditAnyCollection"),this.deleteAnyCollection=this.getResponseProperty("DeleteAnyCollection"),this.editAssignedCollections=this.getResponseProperty("EditAssignedCollections"),this.deleteAssignedCollections=this.getResponseProperty("DeleteAssignedCollections"),this.manageCiphers=this.getResponseProperty("ManageCiphers"),this.manageGroups=this.getResponseProperty("ManageGroups"),this.manageSso=this.getResponseProperty("ManageSso"),this.managePolicies=this.getResponseProperty("ManagePolicies"),this.manageUsers=this.getResponseProperty("ManageUsers"),this.manageResetPassword=this.getResponseProperty("ManageResetPassword")}}class bg{constructor(){this.emails=[],this.collections=[]}}class wg{constructor(){this.collections=[]}}function Ig(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",6),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"input",7),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.set(t)})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"label",3),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("name",n.pascalize(e.id))("id",e.id)("ngModel",e.get()),o["ɵɵadvance"](2),o["ɵɵproperty"]("for",e.id),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](6,5,e.id),"\n      ")}}class Cg{constructor(){this.onSavedUser=new o.EventEmitter,this.onDeletedUser=new o.EventEmitter}get parentIndeterminate(){return!this.parentChecked&&this.checkboxes.some((e=>e.get()))}get parentChecked(){return this.checkboxes.every((e=>e.get()))}set parentChecked(e){this.checkboxes.forEach((t=>{t.set(e)}))}pascalize(e){return N.c.camelToPascalCase(e)}}Cg.ɵfac=function(e){return new(e||Cg)},Cg.ɵcmp=o["ɵɵdefineComponent"]({type:Cg,selectors:[["app-nested-checkbox"]],inputs:{parentId:"parentId",checkboxes:"checkboxes"},outputs:{onSavedUser:"onSavedUser",onDeletedUser:"onDeletedUser"},decls:17,vars:9,consts:[[1,"form-group","mb-0"],[1,"form-check","mt-1","form-check-block"],["type","checkbox",1,"form-check-input",3,"name","id","ngModel","indeterminate","ngModelChange"],[1,"form-check-label","font-weight-normal",3,"for"],[1,"form-group","form-group-child-check","mb-0"],["class","form-check mt-1",4,"ngFor","ngForOf"],[1,"form-check","mt-1"],["type","checkbox",1,"form-check-input",3,"name","id","ngModel","ngModelChange"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"input",2),o["ɵɵlistener"]("ngModelChange",(function(e){return t.parentChecked=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"label",3),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n  "),o["ɵɵelementStart"](11,"div",4),o["ɵɵtext"](12,"\n    "),o["ɵɵtemplate"](13,Ig,8,7,"div",5),o["ɵɵtext"](14,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵproperty"]("name",t.pascalize(t.parentId))("id",t.parentId)("ngModel",t.parentChecked)("indeterminate",t.parentIndeterminate),o["ɵɵadvance"](2),o["ɵɵproperty"]("for",t.parentId),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](8,7,t.parentId),"\n    "),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngForOf",t.checkboxes))},directives:[d.CheckboxControlValueAccessor,d.NgControlStatus,d.NgModel,B.NgForOf],pipes:[M.C],encapsulation:2});var Eg=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function kg(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",18),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function Pg(e,t){1&e&&(o["ɵɵelementStart"](0,"span",19),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"deactivated")))}function Ag(e,t){1&e&&(o["ɵɵelementStart"](0,"div",20),o["ɵɵtext"](1,"\n        "),o["ɵɵelement"](2,"i",21),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n        "),o["ɵɵelementStart"](5,"span",22),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n      "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function Og(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"div",47),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"label",48),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵelementStart"](12,"input",49),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).emails=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementStart"](14,"small",18),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,4,"inviteUserDesc")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,6,"email")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.emails),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](16,8,"inviteMultipleEmailDesc","20"))}}function Tg(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"h3",37),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"div",50),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"div",51),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"div",38),o["ɵɵtext"](11,"\n                "),o["ɵɵelementStart"](12,"label",52),o["ɵɵtext"](13,"Manager Permissions"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n                "),o["ɵɵelement"](15,"hr",53),o["ɵɵtext"](16,"\n                "),o["ɵɵelementStart"](17,"app-nested-checkbox",54),o["ɵɵtext"](18,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n            "),o["ɵɵelementStart"](22,"div",51),o["ɵɵtext"](23,"\n              "),o["ɵɵelementStart"](24,"div",38),o["ɵɵtext"](25,"\n                "),o["ɵɵelementStart"](26,"label",52),o["ɵɵtext"](27,"Admin Permissions"),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n                "),o["ɵɵelement"](29,"hr",53),o["ɵɵtext"](30,"\n                "),o["ɵɵelementStart"](31,"div",55),o["ɵɵtext"](32,"\n                  "),o["ɵɵelementStart"](33,"div",56),o["ɵɵtext"](34,"\n                    "),o["ɵɵelementStart"](35,"input",57),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).permissions.accessEventLogs=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n                    "),o["ɵɵelementStart"](37,"label",58),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n                "),o["ɵɵelementStart"](43,"div",55),o["ɵɵtext"](44,"\n                  "),o["ɵɵelementStart"](45,"div",56),o["ɵɵtext"](46,"\n                    "),o["ɵɵelementStart"](47,"input",59),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).permissions.accessImportExport=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n                    "),o["ɵɵelementStart"](49,"label",60),o["ɵɵtext"](50),o["ɵɵpipe"](51,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n                "),o["ɵɵelementStart"](55,"div",55),o["ɵɵtext"](56,"\n                  "),o["ɵɵelementStart"](57,"div",56),o["ɵɵtext"](58,"\n                    "),o["ɵɵelementStart"](59,"input",61),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).permissions.accessReports=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n                    "),o["ɵɵelementStart"](61,"label",62),o["ɵɵtext"](62),o["ɵɵpipe"](63,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n                "),o["ɵɵelementStart"](67,"app-nested-checkbox",63),o["ɵɵtext"](68,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](69,"\n                "),o["ɵɵelementStart"](70,"div",55),o["ɵɵtext"](71,"\n                  "),o["ɵɵelementStart"](72,"div",56),o["ɵɵtext"](73,"\n                    "),o["ɵɵelementStart"](74,"input",64),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).permissions.manageGroups=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](75,"\n                    "),o["ɵɵelementStart"](76,"label",65),o["ɵɵtext"](77),o["ɵɵpipe"](78,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](79,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](80,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](81,"\n                "),o["ɵɵelementStart"](82,"div",55),o["ɵɵtext"](83,"\n                  "),o["ɵɵelementStart"](84,"div",56),o["ɵɵtext"](85,"\n                    "),o["ɵɵelementStart"](86,"input",66),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).permissions.manageSso=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](87,"\n                    "),o["ɵɵelementStart"](88,"label",67),o["ɵɵtext"](89),o["ɵɵpipe"](90,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](91,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](92,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](93,"\n                "),o["ɵɵelementStart"](94,"div",55),o["ɵɵtext"](95,"\n                  "),o["ɵɵelementStart"](96,"div",56),o["ɵɵtext"](97,"\n                    "),o["ɵɵelementStart"](98,"input",68),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).permissions.managePolicies=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](99,"\n                    "),o["ɵɵelementStart"](100,"label",69),o["ɵɵtext"](101),o["ɵɵpipe"](102,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](103,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](104,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](105,"\n                "),o["ɵɵelementStart"](106,"div",55),o["ɵɵtext"](107,"\n                  "),o["ɵɵelementStart"](108,"div",56),o["ɵɵtext"](109,"\n                    "),o["ɵɵelementStart"](110,"input",70),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).permissions.manageUsers=t}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).handleDependentPermissions()})),o["ɵɵelementEnd"](),o["ɵɵtext"](111,"\n                    "),o["ɵɵelementStart"](112,"label",71),o["ɵɵtext"](113),o["ɵɵpipe"](114,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](115,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](116,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](117,"\n                "),o["ɵɵelementStart"](118,"div",55),o["ɵɵtext"](119,"\n                  "),o["ɵɵelementStart"](120,"div",56),o["ɵɵtext"](121,"\n                    "),o["ɵɵelementStart"](122,"input",72),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).permissions.manageResetPassword=t}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).handleDependentPermissions()})),o["ɵɵelementEnd"](),o["ɵɵtext"](123,"\n                    "),o["ɵɵelementStart"](124,"label",73),o["ɵɵtext"](125),o["ɵɵpipe"](126,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](127,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](128,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](129,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](130,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](131,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](132,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,19,"permissions"),"\n          "),o["ɵɵadvance"](14),o["ɵɵproperty"]("checkboxes",e.manageAssignedCollectionsCheckboxes),o["ɵɵadvance"](18),o["ɵɵproperty"]("ngModel",e.permissions.accessEventLogs),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                      ",o["ɵɵpipeBind1"](39,21,"accessEventLogs"),"\n                    "),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngModel",e.permissions.accessImportExport),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                      ",o["ɵɵpipeBind1"](51,23,"accessImportExport"),"\n                    "),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngModel",e.permissions.accessReports),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                      ",o["ɵɵpipeBind1"](63,25,"accessReports"),"\n                    "),o["ɵɵadvance"](5),o["ɵɵproperty"]("checkboxes",e.manageAllCollectionsCheckboxes),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngModel",e.permissions.manageGroups),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                      ",o["ɵɵpipeBind1"](78,27,"manageGroups"),"\n                    "),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngModel",e.permissions.manageSso),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                      ",o["ɵɵpipeBind1"](90,29,"manageSso"),"\n                    "),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngModel",e.permissions.managePolicies),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                      ",o["ɵɵpipeBind1"](102,31,"managePolicies"),"\n                    "),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngModel",e.permissions.manageUsers),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                      ",o["ɵɵpipeBind1"](114,33,"manageUsers"),"\n                    "),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngModel",e.permissions.manageResetPassword),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                      ",o["ɵɵpipeBind1"](126,35,"manageResetPassword"),"\n                    ")}}function Bg(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",15),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"button",74),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).selectAll(!0)})),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"button",74),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).selectAll(!1)})),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,2,"selectAll"),"\n            "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](8,4,"unselectAll"),"\n            "))}function Mg(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"noCollectionsInList"),"\n          "))}function Dg(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n                "),o["ɵɵelementStart"](2,"td",79),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).check(t)})),o["ɵɵtext"](3,"\n                  "),o["ɵɵelementStart"](4,"input",80),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.checked=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n                "),o["ɵɵelementStart"](7,"td",81),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).check(t)})),o["ɵɵtext"](8),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n                "),o["ɵɵelementStart"](10,"td",82),o["ɵɵtext"](11,"\n                  "),o["ɵɵelementStart"](12,"input",83),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.hidePasswords=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n                "),o["ɵɵelementStart"](15,"td",82),o["ɵɵtext"](16,"\n                  "),o["ɵɵelementStart"](17,"input",83),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.readOnly=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n              "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate1"]("name","Collection[",n,"].Checked"),o["ɵɵproperty"]("ngModel",e.checked),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n                  ",e.name,"\n                "),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate1"]("name","Collection[",n,"].HidePasswords"),o["ɵɵproperty"]("ngModel",e.hidePasswords)("disabled",!e.checked),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate1"]("name","Collection[",n,"].ReadOnly"),o["ɵɵproperty"]("ngModel",e.readOnly)("disabled",!e.checked)}}function Fg(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",76),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"thead"),o["ɵɵtext"](3,"\n              "),o["ɵɵelementStart"](4,"tr"),o["ɵɵtext"](5,"\n                "),o["ɵɵelementStart"](6,"th"),o["ɵɵtext"](7," "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n                "),o["ɵɵelementStart"](9,"th"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n                "),o["ɵɵelementStart"](13,"th",77),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n                "),o["ɵɵelementStart"](17,"th",77),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n            "),o["ɵɵelementStart"](23,"tbody"),o["ɵɵtext"](24,"\n              "),o["ɵɵtemplate"](25,Dg,20,9,"tr",78),o["ɵɵtext"](26,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n          "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,4,"name")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](15,6,"hidePasswords")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](19,8,"readOnly")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngForOf",e.collections)}}function Rg(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵtemplate"](2,Mg,3,3,"div",23),o["ɵɵtext"](3,"\n          "),o["ɵɵtemplate"](4,Fg,28,10,"table",75),o["ɵɵtext"](5,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.collections||!e.collections.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.collections&&e.collections.length)}}const Ug=function(e){return{"mb-0":e}};function zg(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",20),o["ɵɵtext"](1,"\n        "),o["ɵɵtemplate"](2,Og,19,11,"ng-container",23),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"h3"),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementStart"](7,"a",24),o["ɵɵpipe"](8,"i18n"),o["ɵɵtext"](9,"\n            "),o["ɵɵelement"](10,"i",25),o["ɵɵtext"](11,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵelementStart"](14,"div",26),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"input",27),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().type=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"label",28),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementStart"](21,"small"),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵelementStart"](27,"div",26),o["ɵɵtext"](28,"\n          "),o["ɵɵelementStart"](29,"input",29),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().type=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n          "),o["ɵɵelementStart"](31,"label",30),o["ɵɵtext"](32),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementStart"](34,"small"),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n        "),o["ɵɵelementStart"](40,"div",26),o["ɵɵtext"](41,"\n          "),o["ɵɵelementStart"](42,"input",31),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().type=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n          "),o["ɵɵelementStart"](44,"label",32),o["ɵɵtext"](45),o["ɵɵpipe"](46,"i18n"),o["ɵɵelementStart"](47,"small"),o["ɵɵtext"](48),o["ɵɵpipe"](49,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n        "),o["ɵɵelementStart"](53,"div",26),o["ɵɵtext"](54,"\n          "),o["ɵɵelementStart"](55,"input",33),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().type=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n          "),o["ɵɵelementStart"](57,"label",34),o["ɵɵtext"](58),o["ɵɵpipe"](59,"i18n"),o["ɵɵelementStart"](60,"small"),o["ɵɵtext"](61),o["ɵɵpipe"](62,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](63,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n        "),o["ɵɵelementStart"](66,"div",26),o["ɵɵtext"](67,"\n          "),o["ɵɵelementStart"](68,"input",35),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().type=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](69,"\n          "),o["ɵɵelementStart"](70,"label",36),o["ɵɵtext"](71),o["ɵɵpipe"](72,"i18n"),o["ɵɵelementStart"](73,"small"),o["ɵɵtext"](74),o["ɵɵpipe"](75,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](77,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](78,"\n        "),o["ɵɵtemplate"](79,Tg,133,37,"ng-container",23),o["ɵɵtext"](80,"\n        "),o["ɵɵelementStart"](81,"h3",37),o["ɵɵtext"](82,"\n          "),o["ɵɵelementStart"](83,"div",38),o["ɵɵtext"](84),o["ɵɵpipe"](85,"i18n"),o["ɵɵelementStart"](86,"a",39),o["ɵɵpipe"](87,"i18n"),o["ɵɵtext"](88,"\n              "),o["ɵɵelement"](89,"i",25),o["ɵɵtext"](90,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](91,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](92,"\n          "),o["ɵɵtemplate"](93,Bg,10,6,"div",40),o["ɵɵtext"](94,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](95,"\n        "),o["ɵɵelementStart"](96,"div",41),o["ɵɵtext"](97,"\n          "),o["ɵɵelementStart"](98,"div",42),o["ɵɵtext"](99,"\n            "),o["ɵɵelementStart"](100,"input",43),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().access=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](101,"\n            "),o["ɵɵelementStart"](102,"label",44),o["ɵɵtext"](103),o["ɵɵpipe"](104,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](105,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](106,"\n          "),o["ɵɵelementStart"](107,"div",42),o["ɵɵtext"](108,"\n            "),o["ɵɵelementStart"](109,"input",45),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().access=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](110,"\n            "),o["ɵɵelementStart"](111,"label",46),o["ɵɵtext"](112),o["ɵɵpipe"](113,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](114,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](115,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](116,"\n        "),o["ɵɵtemplate"](117,Rg,6,2,"ng-container",23),o["ɵɵtext"](118,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.editMode),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](6,33,"userType"),"\n          "),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](8,35,"learnMore")),o["ɵɵadvance"](9),o["ɵɵproperty"]("value",e.organizationUserType.User)("ngModel",e.type),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](20,37,"user"),"\n            "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,39,"userDesc")),o["ɵɵadvance"](7),o["ɵɵproperty"]("value",e.organizationUserType.Manager)("ngModel",e.type),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](33,41,"manager"),"\n            "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](36,43,"managerDesc")),o["ɵɵadvance"](7),o["ɵɵproperty"]("value",e.organizationUserType.Admin)("ngModel",e.type),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](46,45,"admin"),"\n            "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](49,47,"adminDesc")),o["ɵɵadvance"](7),o["ɵɵproperty"]("value",e.organizationUserType.Owner)("ngModel",e.type),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](59,49,"owner"),"\n            "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](62,51,"ownerDesc")),o["ɵɵadvance"](7),o["ɵɵproperty"]("value",e.organizationUserType.Custom)("ngModel",e.type),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](72,53,"custom"),"\n            "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](75,55,"customDesc")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.customUserTypeSelected),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](85,57,"accessControl"),"\n            "),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](87,59,"learnMore")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngIf","selected"===e.access&&e.collections&&e.collections.length),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](65,Ug,"selected"!==e.access)),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngModel",e.access),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](104,61,"userAccessAllItems"),"\n            "),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngModel",e.access),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](113,63,"userAccessSelectedCollections"),"\n            "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf","selected"===e.access)}}function Ng(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",84),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().activate()})),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n            "),o["ɵɵelement"](3,"i",85),o["ɵɵtext"](4,"\n            "),o["ɵɵelement"](5,"i",86),o["ɵɵpipe"](6,"i18n"),o["ɵɵtext"](7,"\n          "),o["ɵɵelementEnd"]()}if(2&e){o["ɵɵnextContext"]();const e=o["ɵɵreference"](5);o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](1,5,"activate")),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](3),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](6,7,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}function Vg(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",84),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().deactivate()})),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n            "),o["ɵɵelement"](3,"i",87),o["ɵɵtext"](4,"\n            "),o["ɵɵelement"](5,"i",86),o["ɵɵpipe"](6,"i18n"),o["ɵɵtext"](7,"\n          "),o["ɵɵelementEnd"]()}if(2&e){o["ɵɵnextContext"]();const e=o["ɵɵreference"](5);o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](1,5,"deactivate")),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](3),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](6,7,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}function Hg(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",88,89),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().delete()})),o["ɵɵpipe"](2,"i18n"),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"i",90),o["ɵɵtext"](5,"\n            "),o["ɵɵelement"](6,"i",86),o["ɵɵpipe"](7,"i18n"),o["ɵɵtext"](8,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](2,6,"delete")),o["ɵɵproperty"]("disabled",e.loading)("appApiAction",t.deletePromise),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](7,8,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}class jg{constructor(e,t,n,i,r){this.apiService=e,this.i18nService=t,this.collectionService=n,this.platformUtilsService=i,this.logService=r,this.usesKeyConnector=!1,this.onSavedUser=new o.EventEmitter,this.onDeletedUser=new o.EventEmitter,this.onDeactivatedUser=new o.EventEmitter,this.onActivatedUser=new o.EventEmitter,this.loading=!0,this.editMode=!1,this.isDeactivated=!1,this.type=Qs.User,this.permissions=new Sg,this.showCustom=!1,this.access="selected",this.collections=[],this.organizationUserType=Qs,this.manageAllCollectionsCheckboxes=[{id:"createNewCollections",get:()=>this.permissions.createNewCollections,set:e=>this.permissions.createNewCollections=e},{id:"editAnyCollection",get:()=>this.permissions.editAnyCollection,set:e=>this.permissions.editAnyCollection=e},{id:"deleteAnyCollection",get:()=>this.permissions.deleteAnyCollection,set:e=>this.permissions.deleteAnyCollection=e}],this.manageAssignedCollectionsCheckboxes=[{id:"editAssignedCollections",get:()=>this.permissions.editAssignedCollections,set:e=>this.permissions.editAssignedCollections=e},{id:"deleteAssignedCollections",get:()=>this.permissions.deleteAssignedCollections,set:e=>this.permissions.deleteAssignedCollections=e}]}get customUserTypeSelected(){return this.type===Qs.Custom}ngOnInit(){return Eg(this,void 0,void 0,(function*(){if(this.editMode=this.loading=null!=this.organizationUserId,yield this.loadCollections(),this.editMode){this.editMode=!0,this.title=this.i18nService.t("editUser");try{const e=yield this.apiService.getOrganizationUser(this.organizationId,this.organizationUserId);this.access=e.accessAll?"all":"selected",this.type=e.type,this.isDeactivated=e.status===Vr.Deactivated,e.type===Qs.Custom&&(this.permissions=e.permissions),null!=e.collections&&null!=this.collections&&e.collections.forEach((e=>{const t=this.collections.filter((t=>t.id===e.id));null!=t&&t.length>0&&(t[0].checked=!0,t[0].readOnly=e.readOnly,t[0].hidePasswords=e.hidePasswords)}))}catch(e){this.logService.error(e)}}else this.title=this.i18nService.t("inviteUser");this.loading=!1}))}loadCollections(){return Eg(this,void 0,void 0,(function*(){const e=(yield this.apiService.getCollections(this.organizationId)).data.map((e=>new pm.F(new cm.Z(e))));this.collections=yield this.collectionService.decryptMany(e)}))}check(e,t){e.checked=null==t?!e.checked:t,e.checked||(e.readOnly=!1)}selectAll(e){this.collections.forEach((t=>this.check(t,e)))}setRequestPermissions(e,t){return Object.assign(e,t?new Sg:this.permissions),e}handleDependentPermissions(){this.permissions.manageResetPassword&&!this.permissions.manageUsers&&(this.permissions.manageUsers=!0,document.getElementById("manageUsers").checked=!0,this.platformUtilsService.showToast("info",null,this.i18nService.t("resetPasswordManageUsers")))}submit(){var e,t;return Eg(this,void 0,void 0,(function*(){let n=null;"all"!==this.access&&(n=this.collections.filter((e=>e.checked)).map((e=>new mm(e.id,!!e.readOnly,!!e.hidePasswords))));try{if(this.editMode){const t=new wg;t.accessAll="all"===this.access,t.type=this.type,t.collections=n,t.permissions=this.setRequestPermissions(null!==(e=t.permissions)&&void 0!==e?e:new Sg,t.type!==Qs.Custom),this.formPromise=this.apiService.putOrganizationUser(this.organizationId,this.organizationUserId,t)}else{const e=new bg;e.emails=[...new Set(this.emails.trim().split(/\s*,\s*/))],e.accessAll="all"===this.access,e.type=this.type,e.permissions=this.setRequestPermissions(null!==(t=e.permissions)&&void 0!==t?t:new Sg,e.type!==Qs.Custom),e.collections=n,this.formPromise=this.apiService.postOrganizationUserInvite(this.organizationId,e)}yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t(this.editMode?"editedUserId":"invitedUsers",this.name)),this.onSavedUser.emit()}catch(i){this.logService.error(i)}}))}delete(){return Eg(this,void 0,void 0,(function*(){if(!this.editMode)return;const e=this.usesKeyConnector?"removeUserConfirmationKeyConnector":"removeUserConfirmation";if(!(yield this.platformUtilsService.showDialog(this.i18nService.t(e),this.name,this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{this.deletePromise=this.apiService.deleteOrganizationUser(this.organizationId,this.organizationUserId),yield this.deletePromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("removedUserId",this.name)),this.onDeletedUser.emit()}catch(t){this.logService.error(t)}}))}deactivate(){return Eg(this,void 0,void 0,(function*(){if(!this.editMode)return;if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("deactivateUserConfirmation"),this.i18nService.t("deactivateUserId",this.name),this.i18nService.t("deactivate"),this.i18nService.t("cancel"),"warning")))return!1;try{this.formPromise=this.apiService.deactivateOrganizationUser(this.organizationId,this.organizationUserId),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("deactivatedUserId",this.name)),this.isDeactivated=!0,this.onDeactivatedUser.emit()}catch(e){this.logService.error(e)}}))}activate(){return Eg(this,void 0,void 0,(function*(){if(!this.editMode)return;if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("activateUserConfirmation"),this.i18nService.t("activateUserId",this.name),this.i18nService.t("activate"),this.i18nService.t("cancel"),"warning")))return!1;try{this.formPromise=this.apiService.activateOrganizationUser(this.organizationId,this.organizationUserId),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("activatedUserId",this.name)),this.isDeactivated=!1,this.onActivatedUser.emit()}catch(e){this.logService.error(e)}}))}}jg.ɵfac=function(e){return new(e||jg)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Jr.a),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$))},jg.ɵcmp=o["ɵɵdefineComponent"]({type:jg,selectors:[["app-user-add-edit"]],inputs:{name:"name",organizationUserId:"organizationUserId",organizationId:"organizationId",usesKeyConnector:"usesKeyConnector"},outputs:{onSavedUser:"onSavedUser",onDeletedUser:"onDeletedUser",onDeactivatedUser:"onDeactivatedUser",onActivatedUser:"onActivatedUser"},decls:57,vars:22,consts:[["role","dialog","aria-modal","true","aria-labelledby","userAddEditTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","userAddEditTitle",1,"modal-title"],["class","text-muted",4,"ngIf"],["bitBadge","","badgeType","secondary",4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"ml-auto"],["type","button","class","btn btn-outline-secondary",3,"appA11yTitle","disabled","click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click",4,"ngIf"],[1,"text-muted"],["bitBadge","","badgeType","secondary"],[1,"modal-body"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[4,"ngIf"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/user-types-access-control/",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],[1,"form-check","mt-2","form-check-block"],["type","radio","name","userType","id","userTypeUser",1,"form-check-input",3,"value","ngModel","ngModelChange"],["for","userTypeUser",1,"form-check-label"],["type","radio","name","userType","id","userTypeManager",1,"form-check-input",3,"value","ngModel","ngModelChange"],["for","userTypeManager",1,"form-check-label"],["type","radio","name","userType","id","userTypeAdmin",1,"form-check-input",3,"value","ngModel","ngModelChange"],["for","userTypeAdmin",1,"form-check-label"],["type","radio","name","userType","id","userTypeOwner",1,"form-check-input",3,"value","ngModel","ngModelChange"],["for","userTypeOwner",1,"form-check-label"],["type","radio","name","userType","id","userTypeCustom",1,"form-check-input",3,"value","ngModel","ngModelChange"],["for","userTypeCustom",1,"form-check-label"],[1,"mt-4","d-flex"],[1,"mb-3"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/user-types-access-control/#access-control",3,"appA11yTitle"],["class","ml-auto",4,"ngIf"],[1,"form-group",3,"ngClass"],[1,"form-check"],["type","radio","name","access","id","accessAll","value","all",1,"form-check-input",3,"ngModel","ngModelChange"],["for","accessAll",1,"form-check-label"],["type","radio","name","access","id","accessSelected","value","selected",1,"form-check-input",3,"ngModel","ngModelChange"],["for","accessSelected",1,"form-check-label"],[1,"form-group","mb-4"],["for","emails"],["id","emails","type","text","name","Emails","required","","appAutoFocus","",1,"form-control",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-6"],[1,"font-weight-bold","mb-0"],[1,"my-0","mr-2"],["parentId","manageAssignedCollections",3,"checkboxes"],[1,"form-group","mb-0"],[1,"form-check","mt-1","form-check-block"],["type","checkbox","name","accessEventLogs","id","accessEventLogs",1,"form-check-input",3,"ngModel","ngModelChange"],["for","accessEventLogs",1,"form-check-label","font-weight-normal"],["type","checkbox","name","accessImportExport","id","accessImportExport",1,"form-check-input",3,"ngModel","ngModelChange"],["for","accessImportExport",1,"form-check-label","font-weight-normal"],["type","checkbox","name","accessReports","id","accessReports",1,"form-check-input",3,"ngModel","ngModelChange"],["for","accessReports",1,"form-check-label","font-weight-normal"],["parentId","manageAllCollections",3,"checkboxes"],["type","checkbox","name","manageGroups","id","manageGroups",1,"form-check-input",3,"ngModel","ngModelChange"],["for","manageGroups",1,"form-check-label","font-weight-normal"],["type","checkbox","name","manageSso","id","managePolicies",1,"form-check-input",3,"ngModel","ngModelChange"],["for","manageSso",1,"form-check-label","font-weight-normal"],["type","checkbox","name","managePolicies","id","managePolicies",1,"form-check-input",3,"ngModel","ngModelChange"],["for","managePolicies",1,"form-check-label","font-weight-normal"],["type","checkbox","name","manageUsers","id","manageUsers",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","manageUsers",1,"form-check-label","font-weight-normal"],["type","checkbox","name","manageResetPassword","id","manageResetPassword",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","manageResetPassword",1,"form-check-label","font-weight-normal"],["type","button",1,"btn","btn-link","btn-sm","py-0",3,"click"],["class","table table-hover table-list mb-0",4,"ngIf"],[1,"table","table-hover","table-list","mb-0"],["width","100",1,"text-center"],[4,"ngFor","ngForOf"],[1,"table-list-checkbox",3,"click"],["type","checkbox","appStopProp","",3,"ngModel","name","ngModelChange"],[3,"click"],[1,"text-center"],["type","checkbox",3,"ngModel","name","disabled","ngModelChange"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","disabled","click"],["aria-hidden","true",1,"bwi","bwi-plus-circle","bwi-lg","bwi-fw",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-lg","bwi-fw",3,"hidden","title"],["aria-hidden","true",1,"bwi","bwi-minus-circle","bwi-lg","bwi-fw",3,"hidden"],["type","button",1,"btn","btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click"],["deleteBtn",""],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw",3,"hidden"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵtemplate"](11,kg,2,1,"small",6),o["ɵɵtext"](12,"\n          "),o["ɵɵtemplate"](13,Pg,3,3,"span",7),o["ɵɵtext"](14,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementStart"](16,"button",8),o["ɵɵpipe"](17,"i18n"),o["ɵɵtext"](18,"\n          "),o["ɵɵelementStart"](19,"span",9),o["ɵɵtext"](20,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵtemplate"](24,Ag,9,6,"div",10),o["ɵɵtext"](25,"\n      "),o["ɵɵtemplate"](26,zg,119,67,"div",10),o["ɵɵtext"](27,"\n      "),o["ɵɵelementStart"](28,"div",11),o["ɵɵtext"](29,"\n        "),o["ɵɵelementStart"](30,"button",12),o["ɵɵtext"](31,"\n          "),o["ɵɵelement"](32,"i",13),o["ɵɵpipe"](33,"i18n"),o["ɵɵtext"](34,"\n          "),o["ɵɵelementStart"](35,"span"),o["ɵɵtext"](36),o["ɵɵpipe"](37,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n        "),o["ɵɵelementStart"](40,"button",14),o["ɵɵtext"](41),o["ɵɵpipe"](42,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n        "),o["ɵɵelementStart"](44,"div",15),o["ɵɵtext"](45,"\n          "),o["ɵɵtemplate"](46,Ng,8,9,"button",16),o["ɵɵtext"](47,"\n          "),o["ɵɵtemplate"](48,Vg,8,9,"button",16),o["ɵɵtext"](49,"\n          "),o["ɵɵtemplate"](50,Hg,9,10,"button",17),o["ɵɵtext"](51,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",t.title,"\n          "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",t.name),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.isDeactivated),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](17,14,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading),o["ɵɵadvance"](4),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](33,16,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](37,18,"save")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](42,20,"cancel"),"\n        "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",t.editMode&&t.isDeactivated),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.editMode&&!t.isDeactivated),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.editMode)}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,pe,Po.l,d.RadioControlValueAccessor,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,B.NgClass,d.RequiredValidator,Cg,d.CheckboxControlValueAccessor,B.NgForOf,Oi],pipes:[M.C],encapsulation:2});class Lg{constructor(){this.groupIds=[]}}var Kg=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Gg(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",14),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function qg(e,t){1&e&&(o["ɵɵelementStart"](0,"div",15),o["ɵɵtext"](1,"\n        "),o["ɵɵelement"](2,"i",16),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n        "),o["ɵɵelementStart"](5,"span",17),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n      "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function _g(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"noGroupsInList"),"\n        "))}function $g(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",22),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).check(t)})),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"input",23),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.checked=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n              "),o["ɵɵelementStart"](7,"td",24),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).check(t)})),o["ɵɵtext"](8),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate1"]("name","Groups[",n,"].Checked"),o["ɵɵproperty"]("ngModel",e.checked),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n                ",e.name,"\n              ")}}function Wg(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",20),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n            "),o["ɵɵtemplate"](4,$g,10,3,"tr",21),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.groups)}}function Qg(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",15),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵtemplate"](6,_g,3,3,"div",18),o["ɵɵtext"](7,"\n        "),o["ɵɵtemplate"](8,Wg,7,1,"table",19),o["ɵɵtext"](9,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"groupAccessUserDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.groups||!e.groups.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.groups&&e.groups.length)}}class Yg{constructor(e,t,n,i){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.logService=i,this.onSavedUser=new o.EventEmitter,this.loading=!0,this.groups=[]}ngOnInit(){return Kg(this,void 0,void 0,(function*(){const e=(yield this.apiService.getGroups(this.organizationId)).data.map((e=>e));e.sort(N.c.getSortFunction(this.i18nService,"name")),this.groups=e;try{const e=yield this.apiService.getOrganizationUserGroups(this.organizationId,this.organizationUserId);null!=e&&null!=this.groups&&e.forEach((e=>{const t=this.groups.filter((t=>t.id===e));null!=t&&t.length>0&&(t[0].checked=!0)}))}catch(t){this.logService.error(t)}this.loading=!1}))}check(e,t){e.checked=null==t?!e.checked:t,e.checked||(e.readOnly=!1)}selectAll(e){this.groups.forEach((t=>this.check(t,e)))}submit(){return Kg(this,void 0,void 0,(function*(){const e=new Lg;e.groupIds=this.groups.filter((e=>e.checked)).map((e=>e.id));try{this.formPromise=this.apiService.putOrganizationUserGroups(this.organizationId,this.organizationUserId,e),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("editedGroupsForUser",this.name)),this.onSavedUser.emit()}catch(t){this.logService.error(t)}}))}}Yg.ɵfac=function(e){return new(e||Yg)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$))},Yg.ɵcmp=o["ɵɵdefineComponent"]({type:Yg,selectors:[["app-user-groups"]],inputs:{name:"name",organizationUserId:"organizationUserId",organizationId:"organizationId"},outputs:{onSavedUser:"onSavedUser"},decls:47,vars:20,consts:[["role","dialog","aria-modal","true","aria-labelledby","groupAccessTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","groupAccessTitle",1,"modal-title"],["class","text-muted",4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"text-muted"],[1,"modal-body"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[4,"ngIf"],["class","table table-hover table-list mb-0",4,"ngIf"],[1,"table","table-hover","table-list","mb-0"],[4,"ngFor","ngForOf"],[1,"table-list-checkbox",3,"click"],["type","checkbox","appStopProp","",3,"ngModel","name","ngModelChange"],[3,"click"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵtemplate"](12,Gg,2,1,"small",6),o["ɵɵtext"](13,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"button",7),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"span",8),o["ɵɵtext"](19,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵtemplate"](23,qg,9,6,"div",9),o["ɵɵtext"](24,"\n      "),o["ɵɵtemplate"](25,Qg,10,5,"div",9),o["ɵɵtext"](26,"\n      "),o["ɵɵelementStart"](27,"div",10),o["ɵɵtext"](28,"\n        "),o["ɵɵelementStart"](29,"button",11),o["ɵɵtext"](30,"\n          "),o["ɵɵelement"](31,"i",12),o["ɵɵpipe"](32,"i18n"),o["ɵɵtext"](33,"\n          "),o["ɵɵelementStart"](34,"span"),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n        "),o["ɵɵelementStart"](39,"button",13),o["ɵɵtext"](40),o["ɵɵpipe"](41,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,10,"groupAccess"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.name),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](16,12,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading),o["ɵɵadvance"](4),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](32,14,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](36,16,"save")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](41,18,"cancel"),"\n        ")}},directives:[d["ɵNgNoValidate"],d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,pe,B.NgForOf,d.CheckboxControlValueAccessor,Oi,d.NgControlStatus,d.NgModel],pipes:[M.C],encapsulation:2});var Zg=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const Jg=["addEdit"],Xg=["groupsTemplate"],ef=["eventsTemplate"],tf=["confirmTemplate"],nf=["resetPasswordTemplate"],rf=["bulkStatusTemplate"],of=["bulkConfirmTemplate"],af=["bulkRemoveTemplate"];function sf(e,t){if(1&e&&(o["ɵɵelementStart"](0,"span",34),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.allCount)}}function lf(e,t){if(1&e&&(o["ɵɵelementStart"](0,"span",34),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.invitedCount)}}function df(e,t){if(1&e&&(o["ɵɵelementStart"](0,"span",35),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.acceptedCount)}}function cf(e,t){if(1&e&&(o["ɵɵelementStart"](0,"span",34),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.deactivatedCount)}}function pf(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",36),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().bulkConfirm()})),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",37),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](4,1,"confirmSelected"),"\n        "))}function uf(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",38),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",39),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function mf(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"noUsersInList")))}function hf(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",43),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"confirmUsers")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](3,4,"usersNeedConfirmed"),"\n    "))}function vf(e,t){1&e&&(o["ɵɵelementStart"](0,"span",59),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"invited")))}function gf(e,t){1&e&&(o["ɵɵelementStart"](0,"span",35),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"accepted")))}function ff(e,t){1&e&&(o["ɵɵelementStart"](0,"span",59),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"deactivated")))}function xf(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",60),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function yf(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",61),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",39),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"userUsingTwoStep")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"userUsingTwoStep")))}function Sf(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",62),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",39),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"enrolledPasswordReset")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"enrolledPasswordReset")))}function bf(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"owner")))}function wf(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"admin")))}function If(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"manager")))}function Cf(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"user")))}function Ef(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"custom")))}function kf(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",63),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).reinvite(t)})),o["ɵɵtext"](1,"\n                  "),o["ɵɵelement"](2,"i",14),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](4,1,"resendInvitation"),"\n                "))}function Pf(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",64),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).confirm(t)})),o["ɵɵtext"](1,"\n                  "),o["ɵɵelement"](2,"i",37),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](4,1,"confirm"),"\n                "))}function Af(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",63),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).groups(t)})),o["ɵɵtext"](1,"\n                  "),o["ɵɵelement"](2,"i",65),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](4,1,"groups"),"\n                "))}function Of(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",63),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).events(t)})),o["ɵɵtext"](1,"\n                  "),o["ɵɵelement"](2,"i",66),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](4,1,"eventLogs"),"\n                "))}function Tf(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",63),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).resetPassword(t)})),o["ɵɵtext"](1,"\n                  "),o["ɵɵelement"](2,"i",67),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](4,1,"resetPassword"),"\n                "))}function Bf(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",63),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).activate(t)})),o["ɵɵtext"](1,"\n                  "),o["ɵɵelement"](2,"i",16),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](4,1,"activate"),"\n                "))}function Mf(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",63),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).deactivate(t)})),o["ɵɵtext"](1,"\n                  "),o["ɵɵelement"](2,"i",17),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](4,1,"deactivate"),"\n                "))}function Df(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"td",44),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).checkUser(t)})),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"input",45),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.checked=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"td",46),o["ɵɵtext"](8,"\n            "),o["ɵɵelementStart"](9,"app-avatar",47),o["ɵɵpipe"](10,"userName"),o["ɵɵtext"](11,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"td"),o["ɵɵtext"](15,"\n            "),o["ɵɵelementStart"](16,"a",48),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).edit(t)})),o["ɵɵtext"](17),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n            "),o["ɵɵtemplate"](19,vf,3,3,"span",49),o["ɵɵtext"](20,"\n            "),o["ɵɵtemplate"](21,gf,3,3,"span",5),o["ɵɵtext"](22,"\n            "),o["ɵɵtemplate"](23,ff,3,3,"span",49),o["ɵɵtext"](24,"\n            "),o["ɵɵtemplate"](25,xf,2,1,"small",50),o["ɵɵtext"](26,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n          "),o["ɵɵelementStart"](28,"td"),o["ɵɵtext"](29,"\n            "),o["ɵɵtemplate"](30,yf,9,6,"ng-container",25),o["ɵɵtext"](31,"\n            "),o["ɵɵtemplate"](32,Sf,9,6,"ng-container",25),o["ɵɵtext"](33,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n          "),o["ɵɵelementStart"](35,"td"),o["ɵɵtext"](36,"\n            "),o["ɵɵtemplate"](37,bf,3,3,"span",25),o["ɵɵtext"](38,"\n            "),o["ɵɵtemplate"](39,wf,3,3,"span",25),o["ɵɵtext"](40,"\n            "),o["ɵɵtemplate"](41,If,3,3,"span",25),o["ɵɵtext"](42,"\n            "),o["ɵɵtemplate"](43,Cf,3,3,"span",25),o["ɵɵtext"](44,"\n            "),o["ɵɵtemplate"](45,Ef,3,3,"span",25),o["ɵɵtext"](46,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n          "),o["ɵɵelementStart"](48,"td",51),o["ɵɵtext"](49,"\n            "),o["ɵɵelementStart"](50,"div",52),o["ɵɵtext"](51,"\n              "),o["ɵɵelementStart"](52,"button",53),o["ɵɵpipe"](53,"i18n"),o["ɵɵtext"](54,"\n                "),o["ɵɵelement"](55,"i",54),o["ɵɵtext"](56,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](57,"\n              "),o["ɵɵelementStart"](58,"div",55),o["ɵɵtext"](59,"\n                "),o["ɵɵtemplate"](60,kf,5,3,"a",56),o["ɵɵtext"](61,"\n                "),o["ɵɵtemplate"](62,Pf,5,3,"a",57),o["ɵɵtext"](63,"\n                "),o["ɵɵtemplate"](64,Af,5,3,"a",56),o["ɵɵtext"](65,"\n                "),o["ɵɵtemplate"](66,Of,5,3,"a",56),o["ɵɵtext"](67,"\n                "),o["ɵɵtemplate"](68,Tf,5,3,"a",56),o["ɵɵtext"](69,"\n                "),o["ɵɵtemplate"](70,Bf,5,3,"a",56),o["ɵɵtext"](71,"\n                "),o["ɵɵtemplate"](72,Mf,5,3,"a",56),o["ɵɵtext"](73,"\n                "),o["ɵɵelementStart"](74,"a",58),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).remove(t)})),o["ɵɵtext"](75,"\n                  "),o["ɵɵelement"](76,"i",19),o["ɵɵtext"](77),o["ɵɵpipe"](78,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](79,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](80,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](81,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](82,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngModel",e.checked),o["ɵɵadvance"](5),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](10,26,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](e.email),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===n.userStatusType.Invited),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===n.userStatusType.Accepted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===n.userStatusType.Deactivated),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.name),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.twoFactorEnabled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",n.showEnrolledStatus(e)),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.type===n.userType.Owner),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===n.userType.Admin),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===n.userType.Manager),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===n.userType.User),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===n.userType.Custom),o["ɵɵadvance"](7),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](53,28,"options")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",e.status===n.userStatusType.Invited),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===n.userStatusType.Accepted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",n.accessGroups),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",n.accessEvents&&e.status===n.userStatusType.Confirmed),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",n.allowResetPassword(e)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===n.userStatusType.Deactivated),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status!==n.userStatusType.Deactivated),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](78,30,"remove"),"\n                ")}}function Ff(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵtemplate"](2,hf,4,6,"app-callout",40),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"table",41),o["ɵɵlistener"]("scrolled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).loadMore()})),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"tbody"),o["ɵɵtext"](7,"\n        "),o["ɵɵtemplate"](8,Df,83,32,"tr",42),o["ɵɵtext"](9,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n  "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().ngIf,t=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.showConfirmUsers),o["ɵɵadvance"](2),o["ɵɵproperty"]("infiniteScrollDistance",1)("infiniteScrollDisabled",!t.isPaging()),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e)}}function Rf(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,mf,3,3,"p",25),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,Ff,12,4,"ng-container",25),o["ɵɵtext"](5,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=t.ngIf;o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.length)}}function Uf(e,t){}function zf(e,t){}function Nf(e,t){}function Vf(e,t){}function Hf(e,t){}function jf(e,t){}function Lf(e,t){}function Kf(e,t){}const Gf=function(e){return{active:e}},qf=function(e,t){return[e,t,"name","email","id"]};class _f extends hv{constructor(e,t,n,i,r,o,a,s,l,d,c,p,u,m,h,v){super(e,s,n,r,o,l,i,c,p,u,h),this.route=t,this.router=a,this.policyService=d,this.syncService=m,this.organizationService=v,this.userType=Qs,this.userStatusType=Vr,this.status=null,this.accessEvents=!1,this.accessGroups=!1,this.canResetPassword=!1,this.orgUseResetPassword=!1,this.orgHasKeys=!1,this.orgResetPasswordPolicyEnabled=!1,this.callingUserType=null}ngOnInit(){return Zg(this,void 0,void 0,(function*(){this.route.parent.parent.params.subscribe((e=>Zg(this,void 0,void 0,(function*(){this.organizationId=e.organizationId;const t=yield this.organizationService.get(this.organizationId);if(t.canManageUsers){if(this.accessEvents=t.useEvents,this.accessGroups=t.useGroups,this.canResetPassword=t.canManageUsersPassword,this.orgUseResetPassword=t.useResetPassword,this.callingUserType=t.type,this.orgHasKeys=t.hasPublicAndPrivateKeys,this.canResetPassword&&!this.orgHasKeys){const e=yield this.cryptoService.getOrgKey(this.organizationId),t=yield this.cryptoService.makeKeyPair(e),n=new av(t[0],t[1].encryptedString),i=yield this.apiService.postOrganizationKeys(this.organizationId,n);if(null==i)throw new Error(this.i18nService.t("resetPasswordOrgKeysError"));this.orgHasKeys=null!=i.publicKey&&null!=i.privateKey,yield this.syncService.fullSync(!0)}yield this.load(),this.route.queryParams.pipe((0,C.P)()).subscribe((e=>Zg(this,void 0,void 0,(function*(){if(this.searchText=e.search,null!=e.viewEvents){const t=this.users.filter((t=>t.id===e.viewEvents));t.length>0&&t[0].status===Vr.Confirmed&&this.events(t[0])}}))))}else this.router.navigate(["../collections"],{relativeTo:this.route})}))))}))}load(){const e=Object.create(null,{load:{get:()=>super.load}});return Zg(this,void 0,void 0,(function*(){const t=yield this.policyService.getPolicyForOrganization(Kr.M.ResetPassword,this.organizationId);this.orgResetPasswordPolicyEnabled=null==t?void 0:t.enabled,e.load.call(this)}))}getUsers(){return this.apiService.getOrganizationUsers(this.organizationId)}deleteUser(e){return this.apiService.deleteOrganizationUser(this.organizationId,e)}deactivateUser(e){return this.apiService.deactivateOrganizationUser(this.organizationId,e)}activateUser(e){return this.apiService.activateOrganizationUser(this.organizationId,e)}reinviteUser(e){return this.apiService.postOrganizationUserReinvite(this.organizationId,e)}confirmUser(e,t){return Zg(this,void 0,void 0,(function*(){const n=yield this.cryptoService.getOrgKey(this.organizationId),i=yield this.cryptoService.rsaEncrypt(n.key,t.buffer),r=new lv;r.key=i.encryptedString,yield this.apiService.postOrganizationUserConfirm(this.organizationId,e.id,r)}))}allowResetPassword(e){let t=!1;switch(this.callingUserType){case Qs.Owner:t=!0;break;case Qs.Admin:t=e.type!==Qs.Owner;break;case Qs.Custom:t=e.type!==Qs.Owner&&e.type!==Qs.Admin}return this.canResetPassword&&t&&this.orgUseResetPassword&&this.orgHasKeys&&e.resetPasswordEnrolled&&this.orgResetPasswordPolicyEnabled&&e.status===Vr.Confirmed}showEnrolledStatus(e){return this.orgUseResetPassword&&e.resetPasswordEnrolled&&this.orgResetPasswordPolicyEnabled}edit(e){return Zg(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(jg,this.addEditModalRef,(n=>{n.name=this.userNamePipe.transform(e),n.organizationId=this.organizationId,n.organizationUserId=null!=e?e.id:null,n.usesKeyConnector=null==e?void 0:e.usesKeyConnector,n.onSavedUser.subscribe((()=>{t.close(),this.load()})),n.onDeletedUser.subscribe((()=>{t.close(),this.removeUser(e)})),n.onDeactivatedUser.subscribe((()=>{t.close(),this.load()})),n.onActivatedUser.subscribe((()=>{t.close(),this.load()}))}))}))}groups(e){return Zg(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(Yg,this.groupsModalRef,(n=>{n.name=this.userNamePipe.transform(e),n.organizationId=this.organizationId,n.organizationUserId=null!=e?e.id:null,n.onSavedUser.subscribe((()=>{t.close()}))}))}))}bulkRemove(){return Zg(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const[e]=yield this.modalService.openViewRef(og,this.bulkRemoveModalRef,(e=>{e.organizationId=this.organizationId,e.users=this.getCheckedUsers()}));yield e.onClosedPromise(),yield this.load()}))}bulkDeactivate(){return Zg(this,void 0,void 0,(function*(){yield this.bulkActivateOrDeactivate(!0)}))}bulkActivate(){return Zg(this,void 0,void 0,(function*(){yield this.bulkActivateOrDeactivate(!1)}))}bulkActivateOrDeactivate(e){return Zg(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const t=this.modalService.open(qv,{allowMultipleModals:!0,data:{organizationId:this.organizationId,users:this.getCheckedUsers(),isDeactivating:e}});yield t.onClosedPromise(),yield this.load()}))}bulkReinvite(){return Zg(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const e=this.getCheckedUsers(),t=e.filter((e=>e.status===Vr.Invited));if(t.length<=0)this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("noSelectedUsersApplicable"));else{try{const n=new sv(t.map((e=>e.id))),i=this.apiService.postManyOrganizationUserReinvite(this.organizationId,n);this.showBulkStatus(e,t,i,this.i18nService.t("bulkReinviteMessage"))}catch(n){this.validationService.showError(n)}this.actionPromise=null}}))}bulkConfirm(){return Zg(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const[e]=yield this.modalService.openViewRef(Bv,this.bulkConfirmModalRef,(e=>{e.organizationId=this.organizationId,e.users=this.getCheckedUsers()}));yield e.onClosedPromise(),yield this.load()}))}events(e){return Zg(this,void 0,void 0,(function*(){yield this.modalService.openViewRef(Lc,this.eventsModalRef,(t=>{t.name=this.userNamePipe.transform(e),t.organizationId=this.organizationId,t.entityId=e.id,t.showUser=!1,t.entity="user"}))}))}resetPassword(e){return Zg(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(xg,this.resetPasswordModalRef,(n=>{n.name=this.userNamePipe.transform(e),n.email=null!=e?e.email:null,n.organizationId=this.organizationId,n.id=null!=e?e.id:null,n.onPasswordReset.subscribe((()=>{t.close(),this.load()}))}))}))}deleteWarningMessage(e){return e.usesKeyConnector?this.i18nService.t("removeUserConfirmationKeyConnector"):super.deleteWarningMessage(e)}showBulkStatus(e,t,n,i){return Zg(this,void 0,void 0,(function*(){const[r,o]=yield this.modalService.openViewRef(ug,this.bulkStatusModalRef,(e=>{e.loading=!0}));let a=!1;r.onShown.subscribe((()=>{a&&r.close()}));try{const a=yield n;if(r){const n=a.data.filter((e=>""!==e.error)).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t.error})),{}),r=t.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t})),{});o.users=e.map((e=>{var t;let o=null!==(t=n[e.id])&&void 0!==t?t:i;return r.hasOwnProperty(e.id)||(o=this.i18nService.t("bulkFilteredMessage")),{user:e,error:n.hasOwnProperty(e.id),message:o}})),o.loading=!1}}catch(s){a=!0,r.close()}}))}}_f.ɵfac=function(e){return new(e||_f)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](za),o["ɵɵdirectiveInject"](ov.R),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](um.C),o["ɵɵdirectiveInject"](Pc.z),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](Ii.M))},_f.ɵcmp=o["ɵɵdefineComponent"]({type:_f,selectors:[["app-org-people"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](Jg,7,o.ViewContainerRef),o["ɵɵviewQuery"](Xg,7,o.ViewContainerRef),o["ɵɵviewQuery"](ef,7,o.ViewContainerRef),o["ɵɵviewQuery"](tf,7,o.ViewContainerRef),o["ɵɵviewQuery"](nf,7,o.ViewContainerRef),o["ɵɵviewQuery"](rf,7,o.ViewContainerRef),o["ɵɵviewQuery"](of,7,o.ViewContainerRef),o["ɵɵviewQuery"](af,7,o.ViewContainerRef)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.addEditModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.groupsModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.eventsModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.confirmModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.resetPasswordModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.bulkStatusModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.bulkConfirmModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.bulkRemoveModalRef=e.first)}},features:[o["ɵɵInheritDefinitionFeature"]],decls:134,vars:74,consts:[[1,"page-header"],[1,"mt-2","d-flex"],["role","group",1,"btn-group","btn-group-sm"],["type","button",1,"btn","btn-outline-secondary",3,"ngClass","click"],["bitBadge","","badgeType","info",4,"ngIf"],["bitBadge","","badgeType","warning",4,"ngIf"],[1,"ml-3"],["for","search",1,"sr-only"],["type","search","id","search",1,"form-control","form-control-sm",3,"placeholder","ngModel","ngModelChange"],["appListDropdown","",1,"dropdown","ml-3"],["type","button","id","bulkActionsButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-sm","btn-outline-secondary","dropdown-toggle",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-cog"],["aria-labelledby","bulkActionsButton",1,"dropdown-menu","dropdown-menu-right"],["appStopClick","",1,"dropdown-item",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-envelope"],["class","dropdown-item text-success","appStopClick","",3,"click",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-plus-circle"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-minus-circle"],["appStopClick","",1,"dropdown-item","text-danger",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-close"],[1,"dropdown-divider"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-check-square"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-minus-square"],["type","button",1,"btn","btn-sm","btn-outline-primary","ml-3",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],[4,"ngIf"],["addEdit",""],["groupsTemplate",""],["eventsTemplate",""],["confirmTemplate",""],["resetPasswordTemplate",""],["bulkStatusTemplate",""],["bulkConfirmTemplate",""],["bulkRemoveTemplate",""],["bitBadge","","badgeType","info"],["bitBadge","","badgeType","warning"],["appStopClick","",1,"dropdown-item","text-success",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-check"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["type","info","icon","bwi bwi-check-circle",3,"title",4,"ngIf"],["infiniteScroll","",1,"table","table-hover","table-list",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled"],[4,"ngFor","ngForOf"],["type","info","icon","bwi bwi-check-circle",3,"title"],[1,"table-list-checkbox",3,"click"],["type","checkbox","appStopProp","",3,"ngModel","ngModelChange"],["width","30"],["size","25",3,"data","email","circle","fontSize"],["href","#","appStopClick","",3,"click"],["bitBadge","","badgeType","secondary",4,"ngIf"],["class","text-muted d-block",4,"ngIf"],[1,"table-list-options"],["appListDropdown","",1,"dropdown"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-cog","bwi-lg"],[1,"dropdown-menu","dropdown-menu-right"],["class","dropdown-item","href","#","appStopClick","",3,"click",4,"ngIf"],["class","dropdown-item text-success","href","#","appStopClick","",3,"click",4,"ngIf"],["href","#","appStopClick","",1,"dropdown-item","text-danger",3,"click"],["bitBadge","","badgeType","secondary"],[1,"text-muted","d-block"],["aria-hidden","true",1,"bwi","bwi-lock",3,"title"],["aria-hidden","true",1,"bwi","bwi-key",3,"title"],["href","#","appStopClick","",1,"dropdown-item",3,"click"],["href","#","appStopClick","",1,"dropdown-item","text-success",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-sitemap"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-file-text"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-key"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"div",1),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"div",2),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"button",3),o["ɵɵlistener"]("click",(function(){return t.filter(null)})),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵtemplate"](13,sf,2,1,"span",4),o["ɵɵtext"](14,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n      "),o["ɵɵelementStart"](16,"button",3),o["ɵɵlistener"]("click",(function(){return t.filter(t.userStatusType.Invited)})),o["ɵɵtext"](17),o["ɵɵpipe"](18,"i18n"),o["ɵɵtemplate"](19,lf,2,1,"span",4),o["ɵɵtext"](20,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementStart"](22,"button",3),o["ɵɵlistener"]("click",(function(){return t.filter(t.userStatusType.Accepted)})),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵtemplate"](25,df,2,1,"span",5),o["ɵɵtext"](26,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n      "),o["ɵɵelementStart"](28,"button",3),o["ɵɵlistener"]("click",(function(){return t.filter(t.userStatusType.Deactivated)})),o["ɵɵtext"](29),o["ɵɵpipe"](30,"i18n"),o["ɵɵtemplate"](31,cf,2,1,"span",4),o["ɵɵtext"](32,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n    "),o["ɵɵelementStart"](35,"div",6),o["ɵɵtext"](36,"\n      "),o["ɵɵelementStart"](37,"label",7),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n      "),o["ɵɵelementStart"](41,"input",8),o["ɵɵlistener"]("ngModelChange",(function(e){return t.searchText=e})),o["ɵɵpipe"](42,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n    "),o["ɵɵelementStart"](45,"div",9),o["ɵɵtext"](46,"\n      "),o["ɵɵelementStart"](47,"button",10),o["ɵɵpipe"](48,"i18n"),o["ɵɵtext"](49,"\n        "),o["ɵɵelement"](50,"i",11),o["ɵɵtext"](51,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n      "),o["ɵɵelementStart"](53,"div",12),o["ɵɵtext"](54,"\n        "),o["ɵɵelementStart"](55,"button",13),o["ɵɵlistener"]("click",(function(){return t.bulkReinvite()})),o["ɵɵtext"](56,"\n          "),o["ɵɵelement"](57,"i",14),o["ɵɵtext"](58),o["ɵɵpipe"](59,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n        "),o["ɵɵtemplate"](61,pf,5,3,"button",15),o["ɵɵtext"](62,"\n        "),o["ɵɵelementStart"](63,"button",13),o["ɵɵlistener"]("click",(function(){return t.bulkActivate()})),o["ɵɵtext"](64,"\n          "),o["ɵɵelement"](65,"i",16),o["ɵɵtext"](66),o["ɵɵpipe"](67,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](68,"\n        "),o["ɵɵelementStart"](69,"button",13),o["ɵɵlistener"]("click",(function(){return t.bulkDeactivate()})),o["ɵɵtext"](70,"\n          "),o["ɵɵelement"](71,"i",17),o["ɵɵtext"](72),o["ɵɵpipe"](73,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](74,"\n        "),o["ɵɵelementStart"](75,"button",18),o["ɵɵlistener"]("click",(function(){return t.bulkRemove()})),o["ɵɵtext"](76,"\n          "),o["ɵɵelement"](77,"i",19),o["ɵɵtext"](78),o["ɵɵpipe"](79,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](80,"\n        "),o["ɵɵelement"](81,"div",20),o["ɵɵtext"](82,"\n        "),o["ɵɵelementStart"](83,"button",13),o["ɵɵlistener"]("click",(function(){return t.selectAll(!0)})),o["ɵɵtext"](84,"\n          "),o["ɵɵelement"](85,"i",21),o["ɵɵtext"](86),o["ɵɵpipe"](87,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](88,"\n        "),o["ɵɵelementStart"](89,"button",13),o["ɵɵlistener"]("click",(function(){return t.selectAll(!1)})),o["ɵɵtext"](90,"\n          "),o["ɵɵelement"](91,"i",22),o["ɵɵtext"](92),o["ɵɵpipe"](93,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](94,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](95,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](96,"\n    "),o["ɵɵelementStart"](97,"button",23),o["ɵɵlistener"]("click",(function(){return t.invite()})),o["ɵɵtext"](98,"\n      "),o["ɵɵelement"](99,"i",24),o["ɵɵtext"](100),o["ɵɵpipe"](101,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](102,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](103,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](104,"\n"),o["ɵɵtemplate"](105,uf,9,6,"ng-container",25),o["ɵɵtext"](106,"\n"),o["ɵɵtemplate"](107,Rf,6,2,"ng-container",25),o["ɵɵpipe"](108,"search"),o["ɵɵtext"](109,"\n"),o["ɵɵtemplate"](110,Uf,0,0,"ng-template",null,26,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](112,"\n"),o["ɵɵtemplate"](113,zf,0,0,"ng-template",null,27,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](115,"\n"),o["ɵɵtemplate"](116,Nf,0,0,"ng-template",null,28,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](118,"\n"),o["ɵɵtemplate"](119,Vf,0,0,"ng-template",null,29,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](121,"\n"),o["ɵɵtemplate"](122,Hf,0,0,"ng-template",null,30,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](124,"\n"),o["ɵɵtemplate"](125,jf,0,0,"ng-template",null,31,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](127,"\n"),o["ɵɵtemplate"](128,Lf,0,0,"ng-template",null,32,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](130,"\n"),o["ɵɵtemplate"](131,Kf,0,0,"ng-template",null,33,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](133,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,27,"people")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](63,Gf,null==t.status)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](12,29,"all"),"\n        "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.allCount),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](65,Gf,t.status==t.userStatusType.Invited)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](18,31,"invited"),"\n        "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.invitedCount),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](67,Gf,t.status==t.userStatusType.Accepted)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](24,33,"accepted"),"\n        "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.acceptedCount),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](69,Gf,t.status==t.userStatusType.Deactivated)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](30,35,"deactivated"),"\n        "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.deactivatedCount),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](39,37,"search")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](42,39,"search")),o["ɵɵproperty"]("ngModel",t.searchText),o["ɵɵadvance"](6),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](48,41,"options")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](59,43,"reinviteSelected"),"\n        "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.showBulkConfirmUsers),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](67,45,"activate"),"\n        "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](73,47,"deactivate"),"\n        "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](79,49,"remove"),"\n        "),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](87,51,"selectAll"),"\n        "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](93,53,"unselectAll"),"\n        "),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](101,55,"inviteUser"),"\n    "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&(t.isPaging()?t.pagedUsers:o["ɵɵpipeBindV"](108,57,o["ɵɵpureFunction2"](71,qf,t.users,t.searchText)))))},directives:[B.NgClass,B.NgIf,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,pe,Tn,Po.l,u.InfiniteScrollDirective,B.NgForOf,Pe.O,d.CheckboxControlValueAccessor,Oi,Di],pipes:[M.C,um.C,Pc.z],encapsulation:2});class $f extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.type=this.getResponseProperty("Type"),this.data=this.getResponseProperty("Data"),this.enabled=this.getResponseProperty("Enabled")}}class Wf{}class Qf{display(e){return!0}}class Yf{constructor(){this.enabled=new d.FormControl(!1),this.data=null}ngOnInit(){this.enabled.setValue(this.policyResponse.enabled),null!=this.policyResponse.data&&this.loadData()}loadData(){var e;this.data.patchValue(null!==(e=this.policyResponse.data)&&void 0!==e?e:{})}buildRequestData(){return null!=this.data?this.data.value:null}buildRequest(e){const t=new Wf;return t.enabled=this.enabled.value,t.type=this.policy.type,t.data=this.buildRequestData(),Promise.resolve(t)}}Yf.ɵfac=function(e){return new(e||Yf)},Yf.ɵdir=o["ɵɵdefineDirective"]({type:Yf,inputs:{policyResponse:"policyResponse",policy:"policy"}});var Zf=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const Jf=["policyForm"];function Xf(e,t){1&e&&(o["ɵɵelementStart"](0,"div",8),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",16),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span",17),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function ex(e,t){}class tx{constructor(e,t,n,i,r,a){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.componentFactoryResolver=i,this.cdr=r,this.logService=a,this.policiesEnabledMap=new Map,this.onSavedPolicy=new o.EventEmitter,this.policyType=Kr.M,this.loading=!0,this.enabled=!1}ngAfterViewInit(){return Zf(this,void 0,void 0,(function*(){yield this.load(),this.loading=!1;const e=this.componentFactoryResolver.resolveComponentFactory(this.policy.component);this.policyComponent=this.policyFormRef.createComponent(e).instance,this.policyComponent.policy=this.policy,this.policyComponent.policyResponse=this.policyResponse,this.cdr.detectChanges()}))}load(){return Zf(this,void 0,void 0,(function*(){try{this.policyResponse=yield this.apiService.getPolicy(this.organizationId,this.policy.type)}catch(e){if(404!==e.statusCode)throw e;this.policyResponse=new $f({Enabled:!1})}}))}submit(){return Zf(this,void 0,void 0,(function*(){let e;try{e=yield this.policyComponent.buildRequest(this.policiesEnabledMap)}catch(t){return void this.platformUtilsService.showToast("error",null,t.message)}try{this.formPromise=this.apiService.putPolicy(this.organizationId,this.policy.type,e),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("editedPolicyId",this.i18nService.t(this.policy.name))),this.onSavedPolicy.emit()}catch(t){this.logService.error(t)}}))}}tx.ɵfac=function(e){return new(e||tx)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](o.ComponentFactoryResolver),o["ɵɵdirectiveInject"](o.ChangeDetectorRef),o["ɵɵdirectiveInject"](L.$))},tx.ɵcmp=o["ɵɵdefineComponent"]({type:tx,selectors:[["app-policy-edit"]],viewQuery:function(e,t){if(1&e&&o["ɵɵviewQuery"](Jf,7,o.ViewContainerRef),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.policyFormRef=e.first)}},inputs:{policy:"policy",organizationId:"organizationId",policiesEnabledMap:"policiesEnabledMap"},outputs:{onSavedPolicy:"onSavedPolicy"},decls:57,vars:25,consts:[["role","dialog","aria-modal","true","aria-labelledby","policiesEditTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","policiesEditTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["class","modal-body",4,"ngIf"],[3,"hidden"],["policyForm",""],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵelementStart"](14,"button",6),o["ɵɵpipe"](15,"i18n"),o["ɵɵtext"](16,"\n          "),o["ɵɵelementStart"](17,"span",7),o["ɵɵtext"](18,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n\n      "),o["ɵɵelementStart"](22,"div",8),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,Xf,9,6,"div",9),o["ɵɵtext"](25,"\n        "),o["ɵɵelementStart"](26,"div",10),o["ɵɵtext"](27,"\n          "),o["ɵɵelementStart"](28,"p"),o["ɵɵtext"](29),o["ɵɵpipe"](30,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n          "),o["ɵɵtemplate"](32,ex,0,0,"ng-template",null,11,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](34,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n      "),o["ɵɵelementStart"](37,"div",12),o["ɵɵtext"](38,"\n        "),o["ɵɵelementStart"](39,"button",13),o["ɵɵtext"](40,"\n          "),o["ɵɵelement"](41,"i",14),o["ɵɵpipe"](42,"i18n"),o["ɵɵtext"](43,"\n          "),o["ɵɵelementStart"](44,"span"),o["ɵɵtext"](45),o["ɵɵpipe"](46,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n        "),o["ɵɵelementStart"](49,"button",15),o["ɵɵtext"](50),o["ɵɵpipe"](51,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate2"]("\n          ",o["ɵɵpipeBind1"](11,11,"editPolicy")," - ",o["ɵɵpipeBind1"](12,13,t.policy.name),"\n        "),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](15,15,"close")),o["ɵɵadvance"](10),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("hidden",t.loading),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](30,17,t.policy.description)),o["ɵɵadvance"](10),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](42,19,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](46,21,"save")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](51,23,"cancel"),"\n        ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,B.NgIf],pipes:[M.C],encapsulation:2});class nx{constructor(){this.policies=[]}addPolicies(e){this.policies.push(...e)}getPolicies(){return this.policies}}var ix=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const rx=["editTemplate"];function ox(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function ax(e,t){1&e&&(o["ɵɵelementStart"](0,"span",11),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"on")))}function sx(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"td"),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"a",8),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).edit(t)})),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵtemplate"](6,ax,3,3,"span",9),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"small",10),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,e.name)),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.policiesEnabledMap.get(e.type)),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,5,e.description))}}function lx(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n      "),o["ɵɵtemplate"](2,sx,12,7,"td",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.display(n.organization))}}function dx(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",6),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n    "),o["ɵɵtemplate"](4,lx,4,1,"tr",7),o["ɵɵtext"](5,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.policies)}}function cx(e,t){}class px{constructor(e,t,n,i,r,o){this.apiService=e,this.route=t,this.modalService=n,this.organizationService=i,this.policyListService=r,this.router=o,this.loading=!0,this.policiesEnabledMap=new Map}ngOnInit(){return ix(this,void 0,void 0,(function*(){this.route.parent.parent.params.subscribe((e=>ix(this,void 0,void 0,(function*(){this.organizationId=e.organizationId,this.organization=yield this.organizationService.get(this.organizationId),null!=this.organization&&this.organization.usePolicies?(this.policies=this.policyListService.getPolicies(),yield this.load(),this.route.queryParams.pipe((0,C.P)()).subscribe((e=>ix(this,void 0,void 0,(function*(){if(null!=e.policyId){const t=e.policyId;for(const e of this.orgPolicies)if(e.id===t){for(let t=0;t<this.policies.length;t++)if(this.policies[t].type===e.type){this.edit(this.policies[t]);break}break}}}))))):this.router.navigate(["/organizations",this.organizationId])}))))}))}load(){return ix(this,void 0,void 0,(function*(){const e=yield this.apiService.getPolicies(this.organizationId);this.orgPolicies=null!=e.data&&e.data.length>0?e.data:[],this.orgPolicies.forEach((e=>{this.policiesEnabledMap.set(e.type,e.enabled)})),this.loading=!1}))}edit(e){return ix(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(tx,this.editModalRef,(n=>{n.policy=e,n.organizationId=this.organizationId,n.policiesEnabledMap=this.policiesEnabledMap,n.onSavedPolicy.subscribe((()=>{t.close(),this.load()}))}))}))}}px.ɵfac=function(e){return new(e||px)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](nx),o["ɵɵdirectiveInject"](p.Router))},px.ɵcmp=o["ɵɵdefineComponent"]({type:px,selectors:[["app-org-policies"]],viewQuery:function(e,t){if(1&e&&o["ɵɵviewQuery"](rx,7,o.ViewContainerRef),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.editModalRef=e.first)}},decls:14,vars:5,consts:[[1,"page-header","d-flex"],[4,"ngIf"],["class","table table-hover table-list",4,"ngIf"],["editTemplate",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"table","table-hover","table-list"],[4,"ngFor","ngForOf"],["href","#","appStopClick","",3,"click"],["bitBadge","","badgeType","success",4,"ngIf"],[1,"text-muted","d-block"],["bitBadge","","badgeType","success"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵtemplate"](7,ox,9,6,"ng-container",1),o["ɵɵtext"](8,"\n"),o["ɵɵtemplate"](9,dx,7,1,"table",2),o["ɵɵtext"](10,"\n"),o["ɵɵtemplate"](11,cx,0,0,"ng-template",null,3,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](13,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"policies")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading))},directives:[B.NgIf,B.NgForOf,Tn,Po.l],pipes:[M.C],encapsulation:2});class ux{}var mx=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function hx(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-user-verification",15),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().masterPassword=t})),o["ɵɵtext"](1,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("ngModel",e.masterPassword)}}function vx(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",16),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,e.apiKeyWarning))}}function gx(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",17),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n          "),o["ɵɵelementStart"](3,"p",18),o["ɵɵtext"](4,"\n            "),o["ɵɵelementStart"](5,"strong"),o["ɵɵtext"](6,"client_id:"),o["ɵɵelementEnd"](),o["ɵɵelement"](7,"br"),o["ɵɵtext"](8,"\n            "),o["ɵɵelementStart"](9,"code"),o["ɵɵtext"](10),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n          "),o["ɵɵelementStart"](13,"p",18),o["ɵɵtext"](14,"\n            "),o["ɵɵelementStart"](15,"strong"),o["ɵɵtext"](16,"client_secret:"),o["ɵɵelementEnd"](),o["ɵɵelement"](17,"br"),o["ɵɵtext"](18,"\n            "),o["ɵɵelementStart"](19,"code"),o["ɵɵtext"](20),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementStart"](23,"p",18),o["ɵɵtext"](24,"\n            "),o["ɵɵelementStart"](25,"strong"),o["ɵɵtext"](26,"scope:"),o["ɵɵelementEnd"](),o["ɵɵelement"](27,"br"),o["ɵɵtext"](28,"\n            "),o["ɵɵelementStart"](29,"code"),o["ɵɵtext"](30),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n          "),o["ɵɵelementStart"](33,"p",19),o["ɵɵtext"](34,"\n            "),o["ɵɵelementStart"](35,"strong"),o["ɵɵtext"](36,"grant_type:"),o["ɵɵelementEnd"](),o["ɵɵelement"](37,"br"),o["ɵɵtext"](38,"\n            "),o["ɵɵelementStart"](39,"code"),o["ɵɵtext"](40),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,5,"oauth2ClientCredentials")),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](e.clientId),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](e.clientSecret),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](e.scope),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](e.grantType)}}function fx(e,t){if(1&e&&(o["ɵɵelementStart"](0,"button",20),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",21),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](),t=o["ɵɵreference"](5);o["ɵɵproperty"]("disabled",t.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,5,e.isRotation?"rotateApiKey":"viewApiKey"))}}class xx{constructor(e,t){this.userVerificationService=e,this.logService=t}submit(){return mx(this,void 0,void 0,(function*(){try{this.formPromise=this.userVerificationService.buildRequest(this.masterPassword).then((e=>this.postKey(this.entityId,e)));const e=yield this.formPromise;this.clientSecret=e.apiKey,this.clientId=`${this.keyType}.${this.entityId}`}catch(e){this.logService.error(e)}}))}}xx.ɵfac=function(e){return new(e||xx)(o["ɵɵdirectiveInject"](Yn.i),o["ɵɵdirectiveInject"](L.$))},xx.ɵcmp=o["ɵɵdefineComponent"]({type:xx,selectors:[["app-api-key"]],decls:46,vars:17,consts:[["role","dialog","aria-modal","true","aria-labelledby","apiKeyTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","apiKeyTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["ngDefaultControl","","name","secret",3,"ngModel","ngModelChange",4,"ngIf"],["type","warning",4,"ngIf"],["type","info","icon","bwi bwi-key",3,"title",4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["ngDefaultControl","","name","secret",3,"ngModel","ngModelChange"],["type","warning"],["type","info","icon","bwi bwi-key",3,"title"],[1,"mb-1"],[1,"mb-0"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"button",6),o["ɵɵpipe"](14,"i18n"),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"span",7),o["ɵɵtext"](17,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementStart"](21,"div",8),o["ɵɵtext"](22,"\n        "),o["ɵɵelementStart"](23,"p"),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵtemplate"](27,hx,2,1,"app-user-verification",9),o["ɵɵtext"](28,"\n\n        "),o["ɵɵtemplate"](29,vx,3,3,"app-callout",10),o["ɵɵtext"](30,"\n        "),o["ɵɵtemplate"](31,gx,43,7,"app-callout",11),o["ɵɵtext"](32,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n      "),o["ɵɵelementStart"](34,"div",12),o["ɵɵtext"](35,"\n        "),o["ɵɵtemplate"](36,fx,9,7,"button",13),o["ɵɵtext"](37,"\n        "),o["ɵɵelementStart"](38,"button",14),o["ɵɵtext"](39),o["ɵɵpipe"](40,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,9,t.apiKeyTitle)),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](14,11,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](25,13,t.apiKeyDescription)),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.clientSecret),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.clientSecret),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.clientSecret),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!t.clientSecret),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](40,15,"close"),"\n        "))},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,B.NgIf,el.W,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,Pe.O],pipes:[M.C],encapsulation:2});var yx=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Sx{constructor(e,t,n,i,r,o){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.userVerificationService=i,this.router=r,this.logService=o,this.organizationId=null}submit(){return yx(this,void 0,void 0,(function*(){try{this.formPromise=this.userVerificationService.buildRequest(this.masterPassword).then((e=>this.apiService.postPurgeCiphers(e,this.organizationId))),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("vaultPurged")),null!=this.organizationId?this.router.navigate(["organizations",this.organizationId,"vault"]):this.router.navigate(["vault"])}catch(e){this.logService.error(e)}}))}}Sx.ɵfac=function(e){return new(e||Sx)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Yn.i),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](L.$))},Sx.ɵcmp=o["ɵɵdefineComponent"]({type:Sx,selectors:[["app-purge-vault"]],inputs:{organizationId:"organizationId"},decls:55,vars:24,consts:[["role","dialog","aria-modal","true","aria-labelledby","purgeVaultTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","purgeVaultTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","warning"],["ngDefaultControl","","name","secret",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-danger","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"button",6),o["ɵɵpipe"](14,"i18n"),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"span",7),o["ɵɵtext"](17,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementStart"](21,"div",8),o["ɵɵtext"](22,"\n        "),o["ɵɵelementStart"](23,"p"),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵelementStart"](27,"app-callout",9),o["ɵɵtext"](28),o["ɵɵpipe"](29,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n        "),o["ɵɵelementStart"](31,"app-user-verification",10),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPassword=e})),o["ɵɵtext"](32,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n      "),o["ɵɵelementStart"](35,"div",11),o["ɵɵtext"](36,"\n        "),o["ɵɵelementStart"](37,"button",12),o["ɵɵtext"](38,"\n          "),o["ɵɵelement"](39,"i",13),o["ɵɵpipe"](40,"i18n"),o["ɵɵtext"](41,"\n          "),o["ɵɵelementStart"](42,"span"),o["ɵɵtext"](43),o["ɵɵpipe"](44,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n        "),o["ɵɵelementStart"](47,"button",14),o["ɵɵtext"](48),o["ɵɵpipe"](49,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,10,"purgeVault")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](14,12,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](25,14,t.organizationId?"purgeOrgVaultDesc":"purgeVaultDesc")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](29,16,"purgeVaultWarning")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.masterPassword),o["ɵɵadvance"](6),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](40,18,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](44,20,"purgeVault")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](49,22,"close"),"\n        ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,Pe.O,el.W,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel],pipes:[M.C],encapsulation:2});class bx{}class wx extends bx{}var Ix=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Cx(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",1),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",261),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"input",262),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().taxInfo.includeTaxId=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"label",263),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngModel",e.taxInfo.includeTaxId),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,2,"includeVAT"))}}function Ex(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"label",264),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"input",265),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().taxInfo.taxId=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,2,"taxIdNumber")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.taxInfo.taxId)}}function kx(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"label",266),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"input",267),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().taxInfo.line1=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementStart"](14,"div",1),o["ɵɵtext"](15,"\n    "),o["ɵɵelementStart"](16,"div",2),o["ɵɵtext"](17,"\n      "),o["ɵɵelementStart"](18,"label",268),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementStart"](22,"input",269),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().taxInfo.line2=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n  "),o["ɵɵelementStart"](26,"div",1),o["ɵɵtext"](27,"\n    "),o["ɵɵelementStart"](28,"div",2),o["ɵɵtext"](29,"\n      "),o["ɵɵelementStart"](30,"label",270),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n      "),o["ɵɵelementStart"](34,"input",271),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().taxInfo.city=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n  "),o["ɵɵelementStart"](38,"div",1),o["ɵɵtext"](39,"\n    "),o["ɵɵelementStart"](40,"div",2),o["ɵɵtext"](41,"\n      "),o["ɵɵelementStart"](42,"label",272),o["ɵɵtext"](43),o["ɵɵpipe"](44,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n      "),o["ɵɵelementStart"](46,"input",273),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().taxInfo.state=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,8,"address1")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.taxInfo.line1),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](20,10,"address2")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.taxInfo.line2),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](32,12,"cityTown")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.taxInfo.city),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](44,14,"stateProvince")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.taxInfo.state)}}class Px{constructor(e,t,n){this.apiService=e,this.route=t,this.logService=n,this.onCountryChanged=new o.EventEmitter,this.loading=!0,this.taxInfo={taxId:null,line1:null,line2:null,city:null,state:null,postalCode:null,country:"US",includeTaxId:!1},this.pristine={taxId:null,line1:null,line2:null,city:null,state:null,postalCode:null,country:"US",includeTaxId:!1}}ngOnInit(){return Ix(this,void 0,void 0,(function*(){this.route.parent.parent.params.subscribe((e=>Ix(this,void 0,void 0,(function*(){if(this.organizationId=e.organizationId,this.organizationId)try{const e=yield this.apiService.getOrganizationTaxInfo(this.organizationId);e&&(this.taxInfo.taxId=e.taxId,this.taxInfo.state=e.state,this.taxInfo.line1=e.line1,this.taxInfo.line2=e.line2,this.taxInfo.city=e.city,this.taxInfo.state=e.state,this.taxInfo.postalCode=e.postalCode,this.taxInfo.country=e.country||"US",this.taxInfo.includeTaxId=!("US"===this.taxInfo.country||!e.taxId&&!e.line1&&!e.line2&&!e.city&&!e.state))}catch(t){this.logService.error(t)}else try{const e=yield this.apiService.getTaxInfo();e&&(this.taxInfo.postalCode=e.postalCode,this.taxInfo.country=e.country||"US")}catch(t){this.logService.error(t)}this.pristine=Object.assign({},this.taxInfo),"US"!==this.taxInfo.country&&this.onCountryChanged.emit()}))));try{const e=yield this.apiService.getTaxRates();e&&(this.taxRates=e.data)}catch(e){this.logService.error(e)}finally{this.loading=!1}}))}get taxRate(){var e;if(null!=this.taxRates){const t=this.taxRates.find((e=>e.country===this.taxInfo.country&&e.postalCode===this.taxInfo.postalCode));return null!==(e=null==t?void 0:t.rate)&&void 0!==e?e:null}}getTaxInfoRequest(){if(this.organizationId){const e=new wx;return e.taxId=this.taxInfo.taxId,e.state=this.taxInfo.state,e.line1=this.taxInfo.line1,e.line2=this.taxInfo.line2,e.city=this.taxInfo.city,e.state=this.taxInfo.state,e.postalCode=this.taxInfo.postalCode,e.country=this.taxInfo.country,e}{const e=new bx;return e.postalCode=this.taxInfo.postalCode,e.country=this.taxInfo.country,e}}submitTaxInfo(){if(!this.hasChanged())return new Promise((e=>{e()}));const e=this.getTaxInfoRequest();return this.organizationId?this.apiService.putOrganizationTaxInfo(this.organizationId,e):this.apiService.putTaxInfo(e)}changeCountry(){"US"===this.taxInfo.country&&(this.taxInfo.includeTaxId=!1,this.taxInfo.taxId=null,this.taxInfo.line1=null,this.taxInfo.line2=null,this.taxInfo.city=null,this.taxInfo.state=null),this.onCountryChanged.emit()}hasChanged(){for(const e in this.taxInfo)if(this.pristine.hasOwnProperty(e)&&this.pristine[e]!==this.taxInfo[e])return!0;return!1}}Px.ɵfac=function(e){return new(e||Px)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](L.$))},Px.ɵcmp=o["ɵɵdefineComponent"]({type:Px,selectors:[["app-tax-info"]],outputs:{onCountryChanged:"onCountryChanged"},decls:786,vars:12,consts:[[1,"row"],[1,"col-6"],[1,"form-group"],["for","addressCountry"],["id","addressCountry","required","","name","addressCountry","autocomplete","country",1,"form-control",3,"ngModel","ngModelChange","change"],["value",""],["value","US"],["value","CN"],["value","FR"],["value","DE"],["value","CA"],["value","GB"],["value","AU"],["value","IN"],["value","-","disabled",""],["value","AF"],["value","AX"],["value","AL"],["value","DZ"],["value","AS"],["value","AD"],["value","AO"],["value","AI"],["value","AQ"],["value","AG"],["value","AR"],["value","AM"],["value","AW"],["value","AT"],["value","AZ"],["value","BS"],["value","BH"],["value","BD"],["value","BB"],["value","BY"],["value","BE"],["value","BZ"],["value","BJ"],["value","BM"],["value","BT"],["value","BO"],["value","BQ"],["value","BA"],["value","BW"],["value","BV"],["value","BR"],["value","IO"],["value","BN"],["value","BG"],["value","BF"],["value","BI"],["value","KH"],["value","CM"],["value","CV"],["value","KY"],["value","CF"],["value","TD"],["value","CL"],["value","CX"],["value","CC"],["value","CO"],["value","KM"],["value","CG"],["value","CD"],["value","CK"],["value","CR"],["value","CI"],["value","HR"],["value","CU"],["value","CW"],["value","CY"],["value","CZ"],["value","DK"],["value","DJ"],["value","DM"],["value","DO"],["value","EC"],["value","EG"],["value","SV"],["value","GQ"],["value","ER"],["value","EE"],["value","ET"],["value","FK"],["value","FO"],["value","FJ"],["value","FI"],["value","GF"],["value","PF"],["value","TF"],["value","GA"],["value","GM"],["value","GE"],["value","GH"],["value","GI"],["value","GR"],["value","GL"],["value","GD"],["value","GP"],["value","GU"],["value","GT"],["value","GG"],["value","GN"],["value","GW"],["value","GY"],["value","HT"],["value","HM"],["value","VA"],["value","HN"],["value","HK"],["value","HU"],["value","IS"],["value","ID"],["value","IR"],["value","IQ"],["value","IE"],["value","IM"],["value","IL"],["value","IT"],["value","JM"],["value","JP"],["value","JE"],["value","JO"],["value","KZ"],["value","KE"],["value","KI"],["value","KP"],["value","KR"],["value","KW"],["value","KG"],["value","LA"],["value","LV"],["value","LB"],["value","LS"],["value","LR"],["value","LY"],["value","LI"],["value","LT"],["value","LU"],["value","MO"],["value","MK"],["value","MG"],["value","MW"],["value","MY"],["value","MV"],["value","ML"],["value","MT"],["value","MH"],["value","MQ"],["value","MR"],["value","MU"],["value","YT"],["value","MX"],["value","FM"],["value","MD"],["value","MC"],["value","MN"],["value","ME"],["value","MS"],["value","MA"],["value","MZ"],["value","MM"],["value","NA"],["value","NR"],["value","NP"],["value","NL"],["value","NC"],["value","NZ"],["value","NI"],["value","NE"],["value","NG"],["value","NU"],["value","NF"],["value","MP"],["value","NO"],["value","OM"],["value","PK"],["value","PW"],["value","PS"],["value","PA"],["value","PG"],["value","PY"],["value","PE"],["value","PH"],["value","PN"],["value","PL"],["value","PT"],["value","PR"],["value","QA"],["value","RE"],["value","RO"],["value","RU"],["value","RW"],["value","BL"],["value","SH"],["value","KN"],["value","LC"],["value","MF"],["value","PM"],["value","VC"],["value","WS"],["value","SM"],["value","ST"],["value","SA"],["value","SN"],["value","RS"],["value","SC"],["value","SL"],["value","SG"],["value","SX"],["value","SK"],["value","SI"],["value","SB"],["value","SO"],["value","ZA"],["value","GS"],["value","SS"],["value","ES"],["value","LK"],["value","SD"],["value","SR"],["value","SJ"],["value","SZ"],["value","SE"],["value","CH"],["value","SY"],["value","TW"],["value","TJ"],["value","TZ"],["value","TH"],["value","TL"],["value","TG"],["value","TK"],["value","TO"],["value","TT"],["value","TN"],["value","TR"],["value","TM"],["value","TC"],["value","TV"],["value","UG"],["value","UA"],["value","AE"],["value","UM"],["value","UY"],["value","UZ"],["value","VU"],["value","VE"],["value","VN"],["value","VG"],["value","VI"],["value","WF"],["value","EH"],["value","YE"],["value","ZM"],["value","ZW"],[1,"col-3"],["for","addressPostalCode"],["id","addressPostalCode","type","text","name","addressPostalCode","autocomplete","postal-code",1,"form-control",3,"ngModel","required","ngModelChange"],["class","col-6",4,"ngIf"],["class","row",4,"ngIf"],[1,"form-group","form-check"],["id","addressIncludeTaxId","name","addressIncludeTaxId","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["for","addressIncludeTaxId",1,"form-check-label"],["for","taxId"],["id","taxId","type","text","name","taxId",1,"form-control",3,"ngModel","ngModelChange"],["for","addressLine1"],["id","addressLine1","type","text","name","addressLine1","autocomplete","address-line1",1,"form-control",3,"ngModel","ngModelChange"],["for","addressLine2"],["id","addressLine2","type","text","name","addressLine2","autocomplete","address-line2",1,"form-control",3,"ngModel","ngModelChange"],["for","addressCity"],["id","addressCity","type","text","name","addressCity","autocomplete","address-level2",1,"form-control",3,"ngModel","ngModelChange"],["for","addressState"],["id","addressState","type","text","name","addressState","autocomplete","address-level1",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e){o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"label",3),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"select",4),o["ɵɵlistener"]("ngModelChange",(function(e){return t.taxInfo.country=e}))("change",(function(){return t.changeCountry()})),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"option",5),o["ɵɵtext"](13,"-- Select --"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"option",6),o["ɵɵtext"](16,"United States"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementStart"](18,"option",7),o["ɵɵtext"](19,"China"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementStart"](21,"option",8),o["ɵɵtext"](22,"France"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n        "),o["ɵɵelementStart"](24,"option",9),o["ɵɵtext"](25,"Germany"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵelementStart"](27,"option",10),o["ɵɵtext"](28,"Canada"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n        "),o["ɵɵelementStart"](30,"option",11),o["ɵɵtext"](31,"United Kingdom"),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n        "),o["ɵɵelementStart"](33,"option",12),o["ɵɵtext"](34,"Australia"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n        "),o["ɵɵelementStart"](36,"option",13),o["ɵɵtext"](37,"India"),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n        "),o["ɵɵelement"](39,"option",14),o["ɵɵtext"](40,"\n        "),o["ɵɵelementStart"](41,"option",15),o["ɵɵtext"](42,"Afghanistan"),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n        "),o["ɵɵelementStart"](44,"option",16),o["ɵɵtext"](45,"Åland Islands"),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n        "),o["ɵɵelementStart"](47,"option",17),o["ɵɵtext"](48,"Albania"),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n        "),o["ɵɵelementStart"](50,"option",18),o["ɵɵtext"](51,"Algeria"),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n        "),o["ɵɵelementStart"](53,"option",19),o["ɵɵtext"](54,"American Samoa"),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n        "),o["ɵɵelementStart"](56,"option",20),o["ɵɵtext"](57,"Andorra"),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n        "),o["ɵɵelementStart"](59,"option",21),o["ɵɵtext"](60,"Angola"),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n        "),o["ɵɵelementStart"](62,"option",22),o["ɵɵtext"](63,"Anguilla"),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n        "),o["ɵɵelementStart"](65,"option",23),o["ɵɵtext"](66,"Antarctica"),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n        "),o["ɵɵelementStart"](68,"option",24),o["ɵɵtext"](69,"Antigua and Barbuda"),o["ɵɵelementEnd"](),o["ɵɵtext"](70,"\n        "),o["ɵɵelementStart"](71,"option",25),o["ɵɵtext"](72,"Argentina"),o["ɵɵelementEnd"](),o["ɵɵtext"](73,"\n        "),o["ɵɵelementStart"](74,"option",26),o["ɵɵtext"](75,"Armenia"),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n        "),o["ɵɵelementStart"](77,"option",27),o["ɵɵtext"](78,"Aruba"),o["ɵɵelementEnd"](),o["ɵɵtext"](79,"\n        "),o["ɵɵelementStart"](80,"option",28),o["ɵɵtext"](81,"Austria"),o["ɵɵelementEnd"](),o["ɵɵtext"](82,"\n        "),o["ɵɵelementStart"](83,"option",29),o["ɵɵtext"](84,"Azerbaijan"),o["ɵɵelementEnd"](),o["ɵɵtext"](85,"\n        "),o["ɵɵelementStart"](86,"option",30),o["ɵɵtext"](87,"Bahamas"),o["ɵɵelementEnd"](),o["ɵɵtext"](88,"\n        "),o["ɵɵelementStart"](89,"option",31),o["ɵɵtext"](90,"Bahrain"),o["ɵɵelementEnd"](),o["ɵɵtext"](91,"\n        "),o["ɵɵelementStart"](92,"option",32),o["ɵɵtext"](93,"Bangladesh"),o["ɵɵelementEnd"](),o["ɵɵtext"](94,"\n        "),o["ɵɵelementStart"](95,"option",33),o["ɵɵtext"](96,"Barbados"),o["ɵɵelementEnd"](),o["ɵɵtext"](97,"\n        "),o["ɵɵelementStart"](98,"option",34),o["ɵɵtext"](99,"Belarus"),o["ɵɵelementEnd"](),o["ɵɵtext"](100,"\n        "),o["ɵɵelementStart"](101,"option",35),o["ɵɵtext"](102,"Belgium"),o["ɵɵelementEnd"](),o["ɵɵtext"](103,"\n        "),o["ɵɵelementStart"](104,"option",36),o["ɵɵtext"](105,"Belize"),o["ɵɵelementEnd"](),o["ɵɵtext"](106,"\n        "),o["ɵɵelementStart"](107,"option",37),o["ɵɵtext"](108,"Benin"),o["ɵɵelementEnd"](),o["ɵɵtext"](109,"\n        "),o["ɵɵelementStart"](110,"option",38),o["ɵɵtext"](111,"Bermuda"),o["ɵɵelementEnd"](),o["ɵɵtext"](112,"\n        "),o["ɵɵelementStart"](113,"option",39),o["ɵɵtext"](114,"Bhutan"),o["ɵɵelementEnd"](),o["ɵɵtext"](115,"\n        "),o["ɵɵelementStart"](116,"option",40),o["ɵɵtext"](117,"Bolivia, Plurinational State of"),o["ɵɵelementEnd"](),o["ɵɵtext"](118,"\n        "),o["ɵɵelementStart"](119,"option",41),o["ɵɵtext"](120,"Bonaire, Sint Eustatius and Saba"),o["ɵɵelementEnd"](),o["ɵɵtext"](121,"\n        "),o["ɵɵelementStart"](122,"option",42),o["ɵɵtext"](123,"Bosnia and Herzegovina"),o["ɵɵelementEnd"](),o["ɵɵtext"](124,"\n        "),o["ɵɵelementStart"](125,"option",43),o["ɵɵtext"](126,"Botswana"),o["ɵɵelementEnd"](),o["ɵɵtext"](127,"\n        "),o["ɵɵelementStart"](128,"option",44),o["ɵɵtext"](129,"Bouvet Island"),o["ɵɵelementEnd"](),o["ɵɵtext"](130,"\n        "),o["ɵɵelementStart"](131,"option",45),o["ɵɵtext"](132,"Brazil"),o["ɵɵelementEnd"](),o["ɵɵtext"](133,"\n        "),o["ɵɵelementStart"](134,"option",46),o["ɵɵtext"](135,"British Indian Ocean Territory"),o["ɵɵelementEnd"](),o["ɵɵtext"](136,"\n        "),o["ɵɵelementStart"](137,"option",47),o["ɵɵtext"](138,"Brunei Darussalam"),o["ɵɵelementEnd"](),o["ɵɵtext"](139,"\n        "),o["ɵɵelementStart"](140,"option",48),o["ɵɵtext"](141,"Bulgaria"),o["ɵɵelementEnd"](),o["ɵɵtext"](142,"\n        "),o["ɵɵelementStart"](143,"option",49),o["ɵɵtext"](144,"Burkina Faso"),o["ɵɵelementEnd"](),o["ɵɵtext"](145,"\n        "),o["ɵɵelementStart"](146,"option",50),o["ɵɵtext"](147,"Burundi"),o["ɵɵelementEnd"](),o["ɵɵtext"](148,"\n        "),o["ɵɵelementStart"](149,"option",51),o["ɵɵtext"](150,"Cambodia"),o["ɵɵelementEnd"](),o["ɵɵtext"](151,"\n        "),o["ɵɵelementStart"](152,"option",52),o["ɵɵtext"](153,"Cameroon"),o["ɵɵelementEnd"](),o["ɵɵtext"](154,"\n        "),o["ɵɵelementStart"](155,"option",53),o["ɵɵtext"](156,"Cape Verde"),o["ɵɵelementEnd"](),o["ɵɵtext"](157,"\n        "),o["ɵɵelementStart"](158,"option",54),o["ɵɵtext"](159,"Cayman Islands"),o["ɵɵelementEnd"](),o["ɵɵtext"](160,"\n        "),o["ɵɵelementStart"](161,"option",55),o["ɵɵtext"](162,"Central African Republic"),o["ɵɵelementEnd"](),o["ɵɵtext"](163,"\n        "),o["ɵɵelementStart"](164,"option",56),o["ɵɵtext"](165,"Chad"),o["ɵɵelementEnd"](),o["ɵɵtext"](166,"\n        "),o["ɵɵelementStart"](167,"option",57),o["ɵɵtext"](168,"Chile"),o["ɵɵelementEnd"](),o["ɵɵtext"](169,"\n        "),o["ɵɵelementStart"](170,"option",58),o["ɵɵtext"](171,"Christmas Island"),o["ɵɵelementEnd"](),o["ɵɵtext"](172,"\n        "),o["ɵɵelementStart"](173,"option",59),o["ɵɵtext"](174,"Cocos (Keeling) Islands"),o["ɵɵelementEnd"](),o["ɵɵtext"](175,"\n        "),o["ɵɵelementStart"](176,"option",60),o["ɵɵtext"](177,"Colombia"),o["ɵɵelementEnd"](),o["ɵɵtext"](178,"\n        "),o["ɵɵelementStart"](179,"option",61),o["ɵɵtext"](180,"Comoros"),o["ɵɵelementEnd"](),o["ɵɵtext"](181,"\n        "),o["ɵɵelementStart"](182,"option",62),o["ɵɵtext"](183,"Congo"),o["ɵɵelementEnd"](),o["ɵɵtext"](184,"\n        "),o["ɵɵelementStart"](185,"option",63),o["ɵɵtext"](186,"Congo, the Democratic Republic of the"),o["ɵɵelementEnd"](),o["ɵɵtext"](187,"\n        "),o["ɵɵelementStart"](188,"option",64),o["ɵɵtext"](189,"Cook Islands"),o["ɵɵelementEnd"](),o["ɵɵtext"](190,"\n        "),o["ɵɵelementStart"](191,"option",65),o["ɵɵtext"](192,"Costa Rica"),o["ɵɵelementEnd"](),o["ɵɵtext"](193,"\n        "),o["ɵɵelementStart"](194,"option",66),o["ɵɵtext"](195,"Côte d'Ivoire"),o["ɵɵelementEnd"](),o["ɵɵtext"](196,"\n        "),o["ɵɵelementStart"](197,"option",67),o["ɵɵtext"](198,"Croatia"),o["ɵɵelementEnd"](),o["ɵɵtext"](199,"\n        "),o["ɵɵelementStart"](200,"option",68),o["ɵɵtext"](201,"Cuba"),o["ɵɵelementEnd"](),o["ɵɵtext"](202,"\n        "),o["ɵɵelementStart"](203,"option",69),o["ɵɵtext"](204,"Curaçao"),o["ɵɵelementEnd"](),o["ɵɵtext"](205,"\n        "),o["ɵɵelementStart"](206,"option",70),o["ɵɵtext"](207,"Cyprus"),o["ɵɵelementEnd"](),o["ɵɵtext"](208,"\n        "),o["ɵɵelementStart"](209,"option",71),o["ɵɵtext"](210,"Czech Republic"),o["ɵɵelementEnd"](),o["ɵɵtext"](211,"\n        "),o["ɵɵelementStart"](212,"option",72),o["ɵɵtext"](213,"Denmark"),o["ɵɵelementEnd"](),o["ɵɵtext"](214,"\n        "),o["ɵɵelementStart"](215,"option",73),o["ɵɵtext"](216,"Djibouti"),o["ɵɵelementEnd"](),o["ɵɵtext"](217,"\n        "),o["ɵɵelementStart"](218,"option",74),o["ɵɵtext"](219,"Dominica"),o["ɵɵelementEnd"](),o["ɵɵtext"](220,"\n        "),o["ɵɵelementStart"](221,"option",75),o["ɵɵtext"](222,"Dominican Republic"),o["ɵɵelementEnd"](),o["ɵɵtext"](223,"\n        "),o["ɵɵelementStart"](224,"option",76),o["ɵɵtext"](225,"Ecuador"),o["ɵɵelementEnd"](),o["ɵɵtext"](226,"\n        "),o["ɵɵelementStart"](227,"option",77),o["ɵɵtext"](228,"Egypt"),o["ɵɵelementEnd"](),o["ɵɵtext"](229,"\n        "),o["ɵɵelementStart"](230,"option",78),o["ɵɵtext"](231,"El Salvador"),o["ɵɵelementEnd"](),o["ɵɵtext"](232,"\n        "),o["ɵɵelementStart"](233,"option",79),o["ɵɵtext"](234,"Equatorial Guinea"),o["ɵɵelementEnd"](),o["ɵɵtext"](235,"\n        "),o["ɵɵelementStart"](236,"option",80),o["ɵɵtext"](237,"Eritrea"),o["ɵɵelementEnd"](),o["ɵɵtext"](238,"\n        "),o["ɵɵelementStart"](239,"option",81),o["ɵɵtext"](240,"Estonia"),o["ɵɵelementEnd"](),o["ɵɵtext"](241,"\n        "),o["ɵɵelementStart"](242,"option",82),o["ɵɵtext"](243,"Ethiopia"),o["ɵɵelementEnd"](),o["ɵɵtext"](244,"\n        "),o["ɵɵelementStart"](245,"option",83),o["ɵɵtext"](246,"Falkland Islands (Malvinas)"),o["ɵɵelementEnd"](),o["ɵɵtext"](247,"\n        "),o["ɵɵelementStart"](248,"option",84),o["ɵɵtext"](249,"Faroe Islands"),o["ɵɵelementEnd"](),o["ɵɵtext"](250,"\n        "),o["ɵɵelementStart"](251,"option",85),o["ɵɵtext"](252,"Fiji"),o["ɵɵelementEnd"](),o["ɵɵtext"](253,"\n        "),o["ɵɵelementStart"](254,"option",86),o["ɵɵtext"](255,"Finland"),o["ɵɵelementEnd"](),o["ɵɵtext"](256,"\n        "),o["ɵɵelementStart"](257,"option",87),o["ɵɵtext"](258,"French Guiana"),o["ɵɵelementEnd"](),o["ɵɵtext"](259,"\n        "),o["ɵɵelementStart"](260,"option",88),o["ɵɵtext"](261,"French Polynesia"),o["ɵɵelementEnd"](),o["ɵɵtext"](262,"\n        "),o["ɵɵelementStart"](263,"option",89),o["ɵɵtext"](264,"French Southern Territories"),o["ɵɵelementEnd"](),o["ɵɵtext"](265,"\n        "),o["ɵɵelementStart"](266,"option",90),o["ɵɵtext"](267,"Gabon"),o["ɵɵelementEnd"](),o["ɵɵtext"](268,"\n        "),o["ɵɵelementStart"](269,"option",91),o["ɵɵtext"](270,"Gambia"),o["ɵɵelementEnd"](),o["ɵɵtext"](271,"\n        "),o["ɵɵelementStart"](272,"option",92),o["ɵɵtext"](273,"Georgia"),o["ɵɵelementEnd"](),o["ɵɵtext"](274,"\n        "),o["ɵɵelementStart"](275,"option",93),o["ɵɵtext"](276,"Ghana"),o["ɵɵelementEnd"](),o["ɵɵtext"](277,"\n        "),o["ɵɵelementStart"](278,"option",94),o["ɵɵtext"](279,"Gibraltar"),o["ɵɵelementEnd"](),o["ɵɵtext"](280,"\n        "),o["ɵɵelementStart"](281,"option",95),o["ɵɵtext"](282,"Greece"),o["ɵɵelementEnd"](),o["ɵɵtext"](283,"\n        "),o["ɵɵelementStart"](284,"option",96),o["ɵɵtext"](285,"Greenland"),o["ɵɵelementEnd"](),o["ɵɵtext"](286,"\n        "),o["ɵɵelementStart"](287,"option",97),o["ɵɵtext"](288,"Grenada"),o["ɵɵelementEnd"](),o["ɵɵtext"](289,"\n        "),o["ɵɵelementStart"](290,"option",98),o["ɵɵtext"](291,"Guadeloupe"),o["ɵɵelementEnd"](),o["ɵɵtext"](292,"\n        "),o["ɵɵelementStart"](293,"option",99),o["ɵɵtext"](294,"Guam"),o["ɵɵelementEnd"](),o["ɵɵtext"](295,"\n        "),o["ɵɵelementStart"](296,"option",100),o["ɵɵtext"](297,"Guatemala"),o["ɵɵelementEnd"](),o["ɵɵtext"](298,"\n        "),o["ɵɵelementStart"](299,"option",101),o["ɵɵtext"](300,"Guernsey"),o["ɵɵelementEnd"](),o["ɵɵtext"](301,"\n        "),o["ɵɵelementStart"](302,"option",102),o["ɵɵtext"](303,"Guinea"),o["ɵɵelementEnd"](),o["ɵɵtext"](304,"\n        "),o["ɵɵelementStart"](305,"option",103),o["ɵɵtext"](306,"Guinea-Bissau"),o["ɵɵelementEnd"](),o["ɵɵtext"](307,"\n        "),o["ɵɵelementStart"](308,"option",104),o["ɵɵtext"](309,"Guyana"),o["ɵɵelementEnd"](),o["ɵɵtext"](310,"\n        "),o["ɵɵelementStart"](311,"option",105),o["ɵɵtext"](312,"Haiti"),o["ɵɵelementEnd"](),o["ɵɵtext"](313,"\n        "),o["ɵɵelementStart"](314,"option",106),o["ɵɵtext"](315,"Heard Island and McDonald Islands"),o["ɵɵelementEnd"](),o["ɵɵtext"](316,"\n        "),o["ɵɵelementStart"](317,"option",107),o["ɵɵtext"](318,"Holy See (Vatican City State)"),o["ɵɵelementEnd"](),o["ɵɵtext"](319,"\n        "),o["ɵɵelementStart"](320,"option",108),o["ɵɵtext"](321,"Honduras"),o["ɵɵelementEnd"](),o["ɵɵtext"](322,"\n        "),o["ɵɵelementStart"](323,"option",109),o["ɵɵtext"](324,"Hong Kong"),o["ɵɵelementEnd"](),o["ɵɵtext"](325,"\n        "),o["ɵɵelementStart"](326,"option",110),o["ɵɵtext"](327,"Hungary"),o["ɵɵelementEnd"](),o["ɵɵtext"](328,"\n        "),o["ɵɵelementStart"](329,"option",111),o["ɵɵtext"](330,"Iceland"),o["ɵɵelementEnd"](),o["ɵɵtext"](331,"\n        "),o["ɵɵelementStart"](332,"option",112),o["ɵɵtext"](333,"Indonesia"),o["ɵɵelementEnd"](),o["ɵɵtext"](334,"\n        "),o["ɵɵelementStart"](335,"option",113),o["ɵɵtext"](336,"Iran, Islamic Republic of"),o["ɵɵelementEnd"](),o["ɵɵtext"](337,"\n        "),o["ɵɵelementStart"](338,"option",114),o["ɵɵtext"](339,"Iraq"),o["ɵɵelementEnd"](),o["ɵɵtext"](340,"\n        "),o["ɵɵelementStart"](341,"option",115),o["ɵɵtext"](342,"Ireland"),o["ɵɵelementEnd"](),o["ɵɵtext"](343,"\n        "),o["ɵɵelementStart"](344,"option",116),o["ɵɵtext"](345,"Isle of Man"),o["ɵɵelementEnd"](),o["ɵɵtext"](346,"\n        "),o["ɵɵelementStart"](347,"option",117),o["ɵɵtext"](348,"Israel"),o["ɵɵelementEnd"](),o["ɵɵtext"](349,"\n        "),o["ɵɵelementStart"](350,"option",118),o["ɵɵtext"](351,"Italy"),o["ɵɵelementEnd"](),o["ɵɵtext"](352,"\n        "),o["ɵɵelementStart"](353,"option",119),o["ɵɵtext"](354,"Jamaica"),o["ɵɵelementEnd"](),o["ɵɵtext"](355,"\n        "),o["ɵɵelementStart"](356,"option",120),o["ɵɵtext"](357,"Japan"),o["ɵɵelementEnd"](),o["ɵɵtext"](358,"\n        "),o["ɵɵelementStart"](359,"option",121),o["ɵɵtext"](360,"Jersey"),o["ɵɵelementEnd"](),o["ɵɵtext"](361,"\n        "),o["ɵɵelementStart"](362,"option",122),o["ɵɵtext"](363,"Jordan"),o["ɵɵelementEnd"](),o["ɵɵtext"](364,"\n        "),o["ɵɵelementStart"](365,"option",123),o["ɵɵtext"](366,"Kazakhstan"),o["ɵɵelementEnd"](),o["ɵɵtext"](367,"\n        "),o["ɵɵelementStart"](368,"option",124),o["ɵɵtext"](369,"Kenya"),o["ɵɵelementEnd"](),o["ɵɵtext"](370,"\n        "),o["ɵɵelementStart"](371,"option",125),o["ɵɵtext"](372,"Kiribati"),o["ɵɵelementEnd"](),o["ɵɵtext"](373,"\n        "),o["ɵɵelementStart"](374,"option",126),o["ɵɵtext"](375,"Korea, Democratic People's Republic of"),o["ɵɵelementEnd"](),o["ɵɵtext"](376,"\n        "),o["ɵɵelementStart"](377,"option",127),o["ɵɵtext"](378,"Korea, Republic of"),o["ɵɵelementEnd"](),o["ɵɵtext"](379,"\n        "),o["ɵɵelementStart"](380,"option",128),o["ɵɵtext"](381,"Kuwait"),o["ɵɵelementEnd"](),o["ɵɵtext"](382,"\n        "),o["ɵɵelementStart"](383,"option",129),o["ɵɵtext"](384,"Kyrgyzstan"),o["ɵɵelementEnd"](),o["ɵɵtext"](385,"\n        "),o["ɵɵelementStart"](386,"option",130),o["ɵɵtext"](387,"Lao People's Democratic Republic"),o["ɵɵelementEnd"](),o["ɵɵtext"](388,"\n        "),o["ɵɵelementStart"](389,"option",131),o["ɵɵtext"](390,"Latvia"),o["ɵɵelementEnd"](),o["ɵɵtext"](391,"\n        "),o["ɵɵelementStart"](392,"option",132),o["ɵɵtext"](393,"Lebanon"),o["ɵɵelementEnd"](),o["ɵɵtext"](394,"\n        "),o["ɵɵelementStart"](395,"option",133),o["ɵɵtext"](396,"Lesotho"),o["ɵɵelementEnd"](),o["ɵɵtext"](397,"\n        "),o["ɵɵelementStart"](398,"option",134),o["ɵɵtext"](399,"Liberia"),o["ɵɵelementEnd"](),o["ɵɵtext"](400,"\n        "),o["ɵɵelementStart"](401,"option",135),o["ɵɵtext"](402,"Libya"),o["ɵɵelementEnd"](),o["ɵɵtext"](403,"\n        "),o["ɵɵelementStart"](404,"option",136),o["ɵɵtext"](405,"Liechtenstein"),o["ɵɵelementEnd"](),o["ɵɵtext"](406,"\n        "),o["ɵɵelementStart"](407,"option",137),o["ɵɵtext"](408,"Lithuania"),o["ɵɵelementEnd"](),o["ɵɵtext"](409,"\n        "),o["ɵɵelementStart"](410,"option",138),o["ɵɵtext"](411,"Luxembourg"),o["ɵɵelementEnd"](),o["ɵɵtext"](412,"\n        "),o["ɵɵelementStart"](413,"option",139),o["ɵɵtext"](414,"Macao"),o["ɵɵelementEnd"](),o["ɵɵtext"](415,"\n        "),o["ɵɵelementStart"](416,"option",140),o["ɵɵtext"](417,"Macedonia, the former Yugoslav Republic of"),o["ɵɵelementEnd"](),o["ɵɵtext"](418,"\n        "),o["ɵɵelementStart"](419,"option",141),o["ɵɵtext"](420,"Madagascar"),o["ɵɵelementEnd"](),o["ɵɵtext"](421,"\n        "),o["ɵɵelementStart"](422,"option",142),o["ɵɵtext"](423,"Malawi"),o["ɵɵelementEnd"](),o["ɵɵtext"](424,"\n        "),o["ɵɵelementStart"](425,"option",143),o["ɵɵtext"](426,"Malaysia"),o["ɵɵelementEnd"](),o["ɵɵtext"](427,"\n        "),o["ɵɵelementStart"](428,"option",144),o["ɵɵtext"](429,"Maldives"),o["ɵɵelementEnd"](),o["ɵɵtext"](430,"\n        "),o["ɵɵelementStart"](431,"option",145),o["ɵɵtext"](432,"Mali"),o["ɵɵelementEnd"](),o["ɵɵtext"](433,"\n        "),o["ɵɵelementStart"](434,"option",146),o["ɵɵtext"](435,"Malta"),o["ɵɵelementEnd"](),o["ɵɵtext"](436,"\n        "),o["ɵɵelementStart"](437,"option",147),o["ɵɵtext"](438,"Marshall Islands"),o["ɵɵelementEnd"](),o["ɵɵtext"](439,"\n        "),o["ɵɵelementStart"](440,"option",148),o["ɵɵtext"](441,"Martinique"),o["ɵɵelementEnd"](),o["ɵɵtext"](442,"\n        "),o["ɵɵelementStart"](443,"option",149),o["ɵɵtext"](444,"Mauritania"),o["ɵɵelementEnd"](),o["ɵɵtext"](445,"\n        "),o["ɵɵelementStart"](446,"option",150),o["ɵɵtext"](447,"Mauritius"),o["ɵɵelementEnd"](),o["ɵɵtext"](448,"\n        "),o["ɵɵelementStart"](449,"option",151),o["ɵɵtext"](450,"Mayotte"),o["ɵɵelementEnd"](),o["ɵɵtext"](451,"\n        "),o["ɵɵelementStart"](452,"option",152),o["ɵɵtext"](453,"Mexico"),o["ɵɵelementEnd"](),o["ɵɵtext"](454,"\n        "),o["ɵɵelementStart"](455,"option",153),o["ɵɵtext"](456,"Micronesia, Federated States of"),o["ɵɵelementEnd"](),o["ɵɵtext"](457,"\n        "),o["ɵɵelementStart"](458,"option",154),o["ɵɵtext"](459,"Moldova, Republic of"),o["ɵɵelementEnd"](),o["ɵɵtext"](460,"\n        "),o["ɵɵelementStart"](461,"option",155),o["ɵɵtext"](462,"Monaco"),o["ɵɵelementEnd"](),o["ɵɵtext"](463,"\n        "),o["ɵɵelementStart"](464,"option",156),o["ɵɵtext"](465,"Mongolia"),o["ɵɵelementEnd"](),o["ɵɵtext"](466,"\n        "),o["ɵɵelementStart"](467,"option",157),o["ɵɵtext"](468,"Montenegro"),o["ɵɵelementEnd"](),o["ɵɵtext"](469,"\n        "),o["ɵɵelementStart"](470,"option",158),o["ɵɵtext"](471,"Montserrat"),o["ɵɵelementEnd"](),o["ɵɵtext"](472,"\n        "),o["ɵɵelementStart"](473,"option",159),o["ɵɵtext"](474,"Morocco"),o["ɵɵelementEnd"](),o["ɵɵtext"](475,"\n        "),o["ɵɵelementStart"](476,"option",160),o["ɵɵtext"](477,"Mozambique"),o["ɵɵelementEnd"](),o["ɵɵtext"](478,"\n        "),o["ɵɵelementStart"](479,"option",161),o["ɵɵtext"](480,"Myanmar"),o["ɵɵelementEnd"](),o["ɵɵtext"](481,"\n        "),o["ɵɵelementStart"](482,"option",162),o["ɵɵtext"](483,"Namibia"),o["ɵɵelementEnd"](),o["ɵɵtext"](484,"\n        "),o["ɵɵelementStart"](485,"option",163),o["ɵɵtext"](486,"Nauru"),o["ɵɵelementEnd"](),o["ɵɵtext"](487,"\n        "),o["ɵɵelementStart"](488,"option",164),o["ɵɵtext"](489,"Nepal"),o["ɵɵelementEnd"](),o["ɵɵtext"](490,"\n        "),o["ɵɵelementStart"](491,"option",165),o["ɵɵtext"](492,"Netherlands"),o["ɵɵelementEnd"](),o["ɵɵtext"](493,"\n        "),o["ɵɵelementStart"](494,"option",166),o["ɵɵtext"](495,"New Caledonia"),o["ɵɵelementEnd"](),o["ɵɵtext"](496,"\n        "),o["ɵɵelementStart"](497,"option",167),o["ɵɵtext"](498,"New Zealand"),o["ɵɵelementEnd"](),o["ɵɵtext"](499,"\n        "),o["ɵɵelementStart"](500,"option",168),o["ɵɵtext"](501,"Nicaragua"),o["ɵɵelementEnd"](),o["ɵɵtext"](502,"\n        "),o["ɵɵelementStart"](503,"option",169),o["ɵɵtext"](504,"Niger"),o["ɵɵelementEnd"](),o["ɵɵtext"](505,"\n        "),o["ɵɵelementStart"](506,"option",170),o["ɵɵtext"](507,"Nigeria"),o["ɵɵelementEnd"](),o["ɵɵtext"](508,"\n        "),o["ɵɵelementStart"](509,"option",171),o["ɵɵtext"](510,"Niue"),o["ɵɵelementEnd"](),o["ɵɵtext"](511,"\n        "),o["ɵɵelementStart"](512,"option",172),o["ɵɵtext"](513,"Norfolk Island"),o["ɵɵelementEnd"](),o["ɵɵtext"](514,"\n        "),o["ɵɵelementStart"](515,"option",173),o["ɵɵtext"](516,"Northern Mariana Islands"),o["ɵɵelementEnd"](),o["ɵɵtext"](517,"\n        "),o["ɵɵelementStart"](518,"option",174),o["ɵɵtext"](519,"Norway"),o["ɵɵelementEnd"](),o["ɵɵtext"](520,"\n        "),o["ɵɵelementStart"](521,"option",175),o["ɵɵtext"](522,"Oman"),o["ɵɵelementEnd"](),o["ɵɵtext"](523,"\n        "),o["ɵɵelementStart"](524,"option",176),o["ɵɵtext"](525,"Pakistan"),o["ɵɵelementEnd"](),o["ɵɵtext"](526,"\n        "),o["ɵɵelementStart"](527,"option",177),o["ɵɵtext"](528,"Palau"),o["ɵɵelementEnd"](),o["ɵɵtext"](529,"\n        "),o["ɵɵelementStart"](530,"option",178),o["ɵɵtext"](531,"Palestinian Territory, Occupied"),o["ɵɵelementEnd"](),o["ɵɵtext"](532,"\n        "),o["ɵɵelementStart"](533,"option",179),o["ɵɵtext"](534,"Panama"),o["ɵɵelementEnd"](),o["ɵɵtext"](535,"\n        "),o["ɵɵelementStart"](536,"option",180),o["ɵɵtext"](537,"Papua New Guinea"),o["ɵɵelementEnd"](),o["ɵɵtext"](538,"\n        "),o["ɵɵelementStart"](539,"option",181),o["ɵɵtext"](540,"Paraguay"),o["ɵɵelementEnd"](),o["ɵɵtext"](541,"\n        "),o["ɵɵelementStart"](542,"option",182),o["ɵɵtext"](543,"Peru"),o["ɵɵelementEnd"](),o["ɵɵtext"](544,"\n        "),o["ɵɵelementStart"](545,"option",183),o["ɵɵtext"](546,"Philippines"),o["ɵɵelementEnd"](),o["ɵɵtext"](547,"\n        "),o["ɵɵelementStart"](548,"option",184),o["ɵɵtext"](549,"Pitcairn"),o["ɵɵelementEnd"](),o["ɵɵtext"](550,"\n        "),o["ɵɵelementStart"](551,"option",185),o["ɵɵtext"](552,"Poland"),o["ɵɵelementEnd"](),o["ɵɵtext"](553,"\n        "),o["ɵɵelementStart"](554,"option",186),o["ɵɵtext"](555,"Portugal"),o["ɵɵelementEnd"](),o["ɵɵtext"](556,"\n        "),o["ɵɵelementStart"](557,"option",187),o["ɵɵtext"](558,"Puerto Rico"),o["ɵɵelementEnd"](),o["ɵɵtext"](559,"\n        "),o["ɵɵelementStart"](560,"option",188),o["ɵɵtext"](561,"Qatar"),o["ɵɵelementEnd"](),o["ɵɵtext"](562,"\n        "),o["ɵɵelementStart"](563,"option",189),o["ɵɵtext"](564,"Réunion"),o["ɵɵelementEnd"](),o["ɵɵtext"](565,"\n        "),o["ɵɵelementStart"](566,"option",190),o["ɵɵtext"](567,"Romania"),o["ɵɵelementEnd"](),o["ɵɵtext"](568,"\n        "),o["ɵɵelementStart"](569,"option",191),o["ɵɵtext"](570,"Russian Federation"),o["ɵɵelementEnd"](),o["ɵɵtext"](571,"\n        "),o["ɵɵelementStart"](572,"option",192),o["ɵɵtext"](573,"Rwanda"),o["ɵɵelementEnd"](),o["ɵɵtext"](574,"\n        "),o["ɵɵelementStart"](575,"option",193),o["ɵɵtext"](576,"Saint Barthélemy"),o["ɵɵelementEnd"](),o["ɵɵtext"](577,"\n        "),o["ɵɵelementStart"](578,"option",194),o["ɵɵtext"](579,"Saint Helena, Ascension and Tristan da Cunha"),o["ɵɵelementEnd"](),o["ɵɵtext"](580,"\n        "),o["ɵɵelementStart"](581,"option",195),o["ɵɵtext"](582,"Saint Kitts and Nevis"),o["ɵɵelementEnd"](),o["ɵɵtext"](583,"\n        "),o["ɵɵelementStart"](584,"option",196),o["ɵɵtext"](585,"Saint Lucia"),o["ɵɵelementEnd"](),o["ɵɵtext"](586,"\n        "),o["ɵɵelementStart"](587,"option",197),o["ɵɵtext"](588,"Saint Martin (French part)"),o["ɵɵelementEnd"](),o["ɵɵtext"](589,"\n        "),o["ɵɵelementStart"](590,"option",198),o["ɵɵtext"](591,"Saint Pierre and Miquelon"),o["ɵɵelementEnd"](),o["ɵɵtext"](592,"\n        "),o["ɵɵelementStart"](593,"option",199),o["ɵɵtext"](594,"Saint Vincent and the Grenadines"),o["ɵɵelementEnd"](),o["ɵɵtext"](595,"\n        "),o["ɵɵelementStart"](596,"option",200),o["ɵɵtext"](597,"Samoa"),o["ɵɵelementEnd"](),o["ɵɵtext"](598,"\n        "),o["ɵɵelementStart"](599,"option",201),o["ɵɵtext"](600,"San Marino"),o["ɵɵelementEnd"](),o["ɵɵtext"](601,"\n        ");o["ɵɵelementStart"](602,"option",202),o["ɵɵtext"](603,"Sao Tome and Principe"),o["ɵɵelementEnd"](),o["ɵɵtext"](604,"\n        "),o["ɵɵelementStart"](605,"option",203),o["ɵɵtext"](606,"Saudi Arabia"),o["ɵɵelementEnd"](),o["ɵɵtext"](607,"\n        "),o["ɵɵelementStart"](608,"option",204),o["ɵɵtext"](609,"Senegal"),o["ɵɵelementEnd"](),o["ɵɵtext"](610,"\n        "),o["ɵɵelementStart"](611,"option",205),o["ɵɵtext"](612,"Serbia"),o["ɵɵelementEnd"](),o["ɵɵtext"](613,"\n        "),o["ɵɵelementStart"](614,"option",206),o["ɵɵtext"](615,"Seychelles"),o["ɵɵelementEnd"](),o["ɵɵtext"](616,"\n        "),o["ɵɵelementStart"](617,"option",207),o["ɵɵtext"](618,"Sierra Leone"),o["ɵɵelementEnd"](),o["ɵɵtext"](619,"\n        "),o["ɵɵelementStart"](620,"option",208),o["ɵɵtext"](621,"Singapore"),o["ɵɵelementEnd"](),o["ɵɵtext"](622,"\n        "),o["ɵɵelementStart"](623,"option",209),o["ɵɵtext"](624,"Sint Maarten (Dutch part)"),o["ɵɵelementEnd"](),o["ɵɵtext"](625,"\n        "),o["ɵɵelementStart"](626,"option",210),o["ɵɵtext"](627,"Slovakia"),o["ɵɵelementEnd"](),o["ɵɵtext"](628,"\n        "),o["ɵɵelementStart"](629,"option",211),o["ɵɵtext"](630,"Slovenia"),o["ɵɵelementEnd"](),o["ɵɵtext"](631,"\n        "),o["ɵɵelementStart"](632,"option",212),o["ɵɵtext"](633,"Solomon Islands"),o["ɵɵelementEnd"](),o["ɵɵtext"](634,"\n        "),o["ɵɵelementStart"](635,"option",213),o["ɵɵtext"](636,"Somalia"),o["ɵɵelementEnd"](),o["ɵɵtext"](637,"\n        "),o["ɵɵelementStart"](638,"option",214),o["ɵɵtext"](639,"South Africa"),o["ɵɵelementEnd"](),o["ɵɵtext"](640,"\n        "),o["ɵɵelementStart"](641,"option",215),o["ɵɵtext"](642,"South Georgia and the South Sandwich Islands"),o["ɵɵelementEnd"](),o["ɵɵtext"](643,"\n        "),o["ɵɵelementStart"](644,"option",216),o["ɵɵtext"](645,"South Sudan"),o["ɵɵelementEnd"](),o["ɵɵtext"](646,"\n        "),o["ɵɵelementStart"](647,"option",217),o["ɵɵtext"](648,"Spain"),o["ɵɵelementEnd"](),o["ɵɵtext"](649,"\n        "),o["ɵɵelementStart"](650,"option",218),o["ɵɵtext"](651,"Sri Lanka"),o["ɵɵelementEnd"](),o["ɵɵtext"](652,"\n        "),o["ɵɵelementStart"](653,"option",219),o["ɵɵtext"](654,"Sudan"),o["ɵɵelementEnd"](),o["ɵɵtext"](655,"\n        "),o["ɵɵelementStart"](656,"option",220),o["ɵɵtext"](657,"Suriname"),o["ɵɵelementEnd"](),o["ɵɵtext"](658,"\n        "),o["ɵɵelementStart"](659,"option",221),o["ɵɵtext"](660,"Svalbard and Jan Mayen"),o["ɵɵelementEnd"](),o["ɵɵtext"](661,"\n        "),o["ɵɵelementStart"](662,"option",222),o["ɵɵtext"](663,"Swaziland"),o["ɵɵelementEnd"](),o["ɵɵtext"](664,"\n        "),o["ɵɵelementStart"](665,"option",223),o["ɵɵtext"](666,"Sweden"),o["ɵɵelementEnd"](),o["ɵɵtext"](667,"\n        "),o["ɵɵelementStart"](668,"option",224),o["ɵɵtext"](669,"Switzerland"),o["ɵɵelementEnd"](),o["ɵɵtext"](670,"\n        "),o["ɵɵelementStart"](671,"option",225),o["ɵɵtext"](672,"Syrian Arab Republic"),o["ɵɵelementEnd"](),o["ɵɵtext"](673,"\n        "),o["ɵɵelementStart"](674,"option",226),o["ɵɵtext"](675,"Taiwan"),o["ɵɵelementEnd"](),o["ɵɵtext"](676,"\n        "),o["ɵɵelementStart"](677,"option",227),o["ɵɵtext"](678,"Tajikistan"),o["ɵɵelementEnd"](),o["ɵɵtext"](679,"\n        "),o["ɵɵelementStart"](680,"option",228),o["ɵɵtext"](681,"Tanzania, United Republic of"),o["ɵɵelementEnd"](),o["ɵɵtext"](682,"\n        "),o["ɵɵelementStart"](683,"option",229),o["ɵɵtext"](684,"Thailand"),o["ɵɵelementEnd"](),o["ɵɵtext"](685,"\n        "),o["ɵɵelementStart"](686,"option",230),o["ɵɵtext"](687,"Timor-Leste"),o["ɵɵelementEnd"](),o["ɵɵtext"](688,"\n        "),o["ɵɵelementStart"](689,"option",231),o["ɵɵtext"](690,"Togo"),o["ɵɵelementEnd"](),o["ɵɵtext"](691,"\n        "),o["ɵɵelementStart"](692,"option",232),o["ɵɵtext"](693,"Tokelau"),o["ɵɵelementEnd"](),o["ɵɵtext"](694,"\n        "),o["ɵɵelementStart"](695,"option",233),o["ɵɵtext"](696,"Tonga"),o["ɵɵelementEnd"](),o["ɵɵtext"](697,"\n        "),o["ɵɵelementStart"](698,"option",234),o["ɵɵtext"](699,"Trinidad and Tobago"),o["ɵɵelementEnd"](),o["ɵɵtext"](700,"\n        "),o["ɵɵelementStart"](701,"option",235),o["ɵɵtext"](702,"Tunisia"),o["ɵɵelementEnd"](),o["ɵɵtext"](703,"\n        "),o["ɵɵelementStart"](704,"option",236),o["ɵɵtext"](705,"Turkey"),o["ɵɵelementEnd"](),o["ɵɵtext"](706,"\n        "),o["ɵɵelementStart"](707,"option",237),o["ɵɵtext"](708,"Turkmenistan"),o["ɵɵelementEnd"](),o["ɵɵtext"](709,"\n        "),o["ɵɵelementStart"](710,"option",238),o["ɵɵtext"](711,"Turks and Caicos Islands"),o["ɵɵelementEnd"](),o["ɵɵtext"](712,"\n        "),o["ɵɵelementStart"](713,"option",239),o["ɵɵtext"](714,"Tuvalu"),o["ɵɵelementEnd"](),o["ɵɵtext"](715,"\n        "),o["ɵɵelementStart"](716,"option",240),o["ɵɵtext"](717,"Uganda"),o["ɵɵelementEnd"](),o["ɵɵtext"](718,"\n        "),o["ɵɵelementStart"](719,"option",241),o["ɵɵtext"](720,"Ukraine"),o["ɵɵelementEnd"](),o["ɵɵtext"](721,"\n        "),o["ɵɵelementStart"](722,"option",242),o["ɵɵtext"](723,"United Arab Emirates"),o["ɵɵelementEnd"](),o["ɵɵtext"](724,"\n        "),o["ɵɵelementStart"](725,"option",243),o["ɵɵtext"](726,"United States Minor Outlying Islands"),o["ɵɵelementEnd"](),o["ɵɵtext"](727,"\n        "),o["ɵɵelementStart"](728,"option",244),o["ɵɵtext"](729,"Uruguay"),o["ɵɵelementEnd"](),o["ɵɵtext"](730,"\n        "),o["ɵɵelementStart"](731,"option",245),o["ɵɵtext"](732,"Uzbekistan"),o["ɵɵelementEnd"](),o["ɵɵtext"](733,"\n        "),o["ɵɵelementStart"](734,"option",246),o["ɵɵtext"](735,"Vanuatu"),o["ɵɵelementEnd"](),o["ɵɵtext"](736,"\n        "),o["ɵɵelementStart"](737,"option",247),o["ɵɵtext"](738,"Venezuela, Bolivarian Republic of"),o["ɵɵelementEnd"](),o["ɵɵtext"](739,"\n        "),o["ɵɵelementStart"](740,"option",248),o["ɵɵtext"](741,"Viet Nam"),o["ɵɵelementEnd"](),o["ɵɵtext"](742,"\n        "),o["ɵɵelementStart"](743,"option",249),o["ɵɵtext"](744,"Virgin Islands, British"),o["ɵɵelementEnd"](),o["ɵɵtext"](745,"\n        "),o["ɵɵelementStart"](746,"option",250),o["ɵɵtext"](747,"Virgin Islands, U.S."),o["ɵɵelementEnd"](),o["ɵɵtext"](748,"\n        "),o["ɵɵelementStart"](749,"option",251),o["ɵɵtext"](750,"Wallis and Futuna"),o["ɵɵelementEnd"](),o["ɵɵtext"](751,"\n        "),o["ɵɵelementStart"](752,"option",252),o["ɵɵtext"](753,"Western Sahara"),o["ɵɵelementEnd"](),o["ɵɵtext"](754,"\n        "),o["ɵɵelementStart"](755,"option",253),o["ɵɵtext"](756,"Yemen"),o["ɵɵelementEnd"](),o["ɵɵtext"](757,"\n        "),o["ɵɵelementStart"](758,"option",254),o["ɵɵtext"](759,"Zambia"),o["ɵɵelementEnd"](),o["ɵɵtext"](760,"\n        "),o["ɵɵelementStart"](761,"option",255),o["ɵɵtext"](762,"Zimbabwe"),o["ɵɵelementEnd"](),o["ɵɵtext"](763,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](764,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](765,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](766,"\n  "),o["ɵɵelementStart"](767,"div",256),o["ɵɵtext"](768,"\n    "),o["ɵɵelementStart"](769,"div",2),o["ɵɵtext"](770,"\n      "),o["ɵɵelementStart"](771,"label",257),o["ɵɵtext"](772),o["ɵɵpipe"](773,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](774,"\n      "),o["ɵɵelementStart"](775,"input",258),o["ɵɵlistener"]("ngModelChange",(function(e){return t.taxInfo.postalCode=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](776,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](777,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](778,"\n  "),o["ɵɵtemplate"](779,Cx,11,4,"div",259),o["ɵɵtext"](780,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](781,"\n"),o["ɵɵtemplate"](782,Ex,14,4,"div",260),o["ɵɵtext"](783,"\n"),o["ɵɵtemplate"](784,kx,50,16,"div",260),o["ɵɵtext"](785,"\n")}2&e&&(o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,8,"country")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.taxInfo.country),o["ɵɵadvance"](762),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](773,10,"zipPostalCode")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.taxInfo.postalCode)("required","US"===t.taxInfo.country),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.organizationId&&"US"!==t.taxInfo.country),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.organizationId&&t.taxInfo.includeTaxId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.organizationId&&t.taxInfo.includeTaxId))},directives:[d.SelectControlValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,d.NgSelectOption,d["ɵNgSelectMultipleOption"],d.DefaultValueAccessor,B.NgIf,d.CheckboxControlValueAccessor],pipes:[M.C],encapsulation:2});var Ax=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Ox(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"orgCreatedSponsorshipInvalid"),"\n          "))}function Tx(e,t){if(1&e&&(o["ɵɵelementStart"](0,"li"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate2"]("\n                  ",e.count," ",o["ɵɵpipeBind1"](2,2,e.localizationKey),"\n                ")}}function Bx(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementStart"](3,"ul"),o["ɵɵtext"](4,"\n                "),o["ɵɵtemplate"](5,Tx,3,4,"li",20),o["ɵɵtext"](6,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind2"](2,3,"deletingOrganizationContentWarning",e.organizationName),"\n              "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.organizationContentSummary.itemCountByType),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](8,6,"deletingOrganizationActiveUserAccountsWarning"),"\n            ")}}function Mx(e,t){if(1&e&&(o["ɵɵtext"](0,"\n            "),o["ɵɵtemplate"](1,Bx,9,8,"ng-container",19),o["ɵɵtext"](2,"\n          ")),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.organizationContentSummary.totalItemCount>0)}}function Dx(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",3,4),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](2,"\n      "),o["ɵɵelementStart"](3,"div",5),o["ɵɵtext"](4,"\n        "),o["ɵɵelementStart"](5,"h2",6),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"button",7),o["ɵɵpipe"](10,"i18n"),o["ɵɵtext"](11,"\n          "),o["ɵɵelementStart"](12,"span",8),o["ɵɵtext"](13,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n      "),o["ɵɵelementStart"](17,"div",9),o["ɵɵtext"](18,"\n        "),o["ɵɵelementStart"](19,"app-callout",10),o["ɵɵtext"](20),o["ɵɵpipe"](21,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n        "),o["ɵɵelementStart"](23,"p",11),o["ɵɵtext"](24,"\n          "),o["ɵɵtemplate"](25,Ox,3,3,"ng-container",12),o["ɵɵtext"](26,"\n          "),o["ɵɵtemplate"](27,Mx,3,1,"ng-template",null,13,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](29,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n        "),o["ɵɵelementStart"](31,"app-user-verification",14),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().masterPassword=t})),o["ɵɵtext"](32,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n      "),o["ɵɵelementStart"](35,"div",15),o["ɵɵtext"](36,"\n        "),o["ɵɵelementStart"](37,"button",16),o["ɵɵtext"](38,"\n          "),o["ɵɵelement"](39,"i",17),o["ɵɵpipe"](40,"i18n"),o["ɵɵtext"](41,"\n          "),o["ɵɵelementStart"](42,"span"),o["ɵɵtext"](43),o["ɵɵpipe"](44,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n        "),o["ɵɵelementStart"](47,"button",18),o["ɵɵtext"](48),o["ɵɵpipe"](49,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵreference"](28),n=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",n.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,11,"deleteOrganization")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](10,13,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](21,15,"deletingOrganizationIsPermanentWarning",n.organizationName)),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf","InvalidFamiliesForEnterprise"===n.deleteOrganizationRequestType)("ngIfElse",t),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngModel",n.masterPassword),o["ɵɵadvance"](6),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](40,18,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](44,20,"deleteOrganization")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](49,22,"close"),"\n        ")}}class Fx{constructor(e,t){this.singular=e,this.plural=t}getKey(e){return 1==e?this.singular:this.plural}}class Rx{constructor(e,t){this.count=e,this.localizationKeyOptions=t}get localizationKey(){return this.localizationKeyOptions.getKey(this.count)}}class Ux{constructor(){this.totalItemCount=0,this.itemCountByType=[]}}class zx{constructor(e,t,n,i,r,a,s){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.userVerificationService=i,this.logService=r,this.cipherService=a,this.organizationService=s,this.deleteOrganizationRequestType="RegularDelete",this.organizationContentSummary=new Ux,this.onSuccess=new o.EventEmitter}ngOnInit(){return Ax(this,void 0,void 0,(function*(){yield this.load()}))}submit(){return Ax(this,void 0,void 0,(function*(){try{this.formPromise=this.userVerificationService.buildRequest(this.masterPassword).then((e=>this.apiService.deleteOrganization(this.organizationId,e))),yield this.formPromise,this.platformUtilsService.showToast("success",this.i18nService.t("organizationDeleted"),this.i18nService.t("organizationDeletedDesc")),this.onSuccess.emit()}catch(e){this.logService.error(e)}}))}load(){return Ax(this,void 0,void 0,(function*(){this.organizationName=(yield this.organizationService.get(this.organizationId)).name,this.organizationContentSummary=yield this.buildOrganizationContentSummary(),this.loaded=!0}))}buildOrganizationContentSummary(){return Ax(this,void 0,void 0,(function*(){const e=new Ux,t=(yield this.cipherService.getAllFromApiForOrganization(this.organizationId)).filter((e=>null==e.deletedDate));if(t.length<1)return e;e.totalItemCount=t.length;for(const n of N.c.iterateEnum(jr.O)){const i=this.getOrganizationItemCountByType(t,n);i>0&&e.itemCountByType.push(new Rx(i,this.getOrganizationItemLocalizationKeysByType(jr.O[n])))}return e}))}getOrganizationItemCountByType(e,t){return e.filter((e=>e.type==t)).length}getOrganizationItemLocalizationKeysByType(e){return new Fx(`type${e}`,`type${e}Plural`)}}zx.ɵfac=function(e){return new(e||zx)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Yn.i),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](Ii.M))},zx.ɵcmp=o["ɵɵdefineComponent"]({type:zx,selectors:[["app-delete-organization"]],outputs:{onSuccess:"onSuccess"},decls:8,vars:1,consts:[["role","dialog","aria-modal","true","aria-labelledby","deleteOrganizationTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["class","modal-content","ngNativeValidate","",3,"appApiAction","ngSubmit",4,"ngIf"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","deleteOrganizationTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","warning"],["id","organizationDeleteDescription"],[4,"ngIf","ngIfElse"],["regularDelete",""],["ngDefaultControl","","name","secret",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-danger","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵtemplate"](4,Dx,52,24,"form",2),o["ɵɵtext"](5,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.loaded))},directives:[B.NgIf,d.NgControlStatusGroup,d.NgForm,Y.b,pe,Pe.O,el.W,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,B.NgForOf],pipes:[M.C],encapsulation:2});var Nx=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const Vx=["deleteOrganizationTemplate"],Hx=["purgeOrganizationTemplate"],jx=["apiKeyTemplate"],Lx=["rotateApiKeyTemplate"];function Kx(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",12),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",13),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function Gx(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",14,15),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",16),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",17),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",18),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"label",19),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"input",20),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().org.name=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n      "),o["ɵɵelementStart"](16,"div",18),o["ɵɵtext"](17,"\n        "),o["ɵɵelementStart"](18,"label",21),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n        "),o["ɵɵelementStart"](22,"input",22),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().org.billingEmail=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n      "),o["ɵɵelementStart"](25,"div",18),o["ɵɵtext"](26,"\n        "),o["ɵɵelementStart"](27,"label",23),o["ɵɵtext"](28),o["ɵɵpipe"](29,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n        "),o["ɵɵelementStart"](31,"input",24),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().org.businessName=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n      "),o["ɵɵelementStart"](34,"div",18),o["ɵɵtext"](35,"\n        "),o["ɵɵelementStart"](36,"label",25),o["ɵɵtext"](37),o["ɵɵpipe"](38,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n        "),o["ɵɵelementStart"](40,"input",26),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().org.identifier=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n    "),o["ɵɵelementStart"](44,"div",17),o["ɵɵtext"](45,"\n      "),o["ɵɵelement"](46,"app-avatar",27),o["ɵɵtext"](47,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n  "),o["ɵɵelementStart"](50,"bit-submit-button",28),o["ɵɵtext"](51),o["ɵɵpipe"](52,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,15,"organizationName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.org.name)("disabled",t.selfHosted),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](20,17,"billingEmail")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.org.billingEmail)("disabled",t.selfHosted||!t.canManageBilling),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](29,19,"businessName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.org.businessName)("disabled",t.selfHosted||!t.canManageBilling),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](38,21,"identifier")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.org.identifier),o["ɵɵadvance"](6),o["ɵɵpropertyInterpolate"]("data",t.org.name),o["ɵɵadvance"](4),o["ɵɵproperty"]("loading",e.loading),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](52,23,"save"),"\n  ")}}function qx(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",3),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"h1"),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵelementStart"](9,"p"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementStart"](12,"a",29),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n  "),o["ɵɵelementStart"](17,"button",30),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().viewApiKey()})),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n  "),o["ɵɵelementStart"](21,"button",30),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().rotateApiKey()})),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n"),o["ɵɵelementContainerEnd"]()}2&e&&(o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,5,"apiKey")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](11,7,"apiKeyDesc"),"\n    "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](14,9,"learnMore"),"\n    "),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](19,11,"viewApiKey"),"\n  "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](23,13,"rotateApiKey"),"\n  "))}function _x(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",12),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",13),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function $x(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",14,31),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submitTaxInfo()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelement"](3,"app-tax-info"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"button",32),o["ɵɵtext"](6,"\n    "),o["ɵɵelement"](7,"i",33),o["ɵɵpipe"](8,"i18n"),o["ɵɵtext"](9,"\n    "),o["ɵɵelementStart"](10,"span"),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",t.taxFormPromise),o["ɵɵadvance"](5),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](8,4,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,6,"save"))}}function Wx(e,t){}function Qx(e,t){}function Yx(e,t){}function Zx(e,t){}class Jx{constructor(e,t,n,i,r,o,a,s,l,d){this.modalService=e,this.apiService=t,this.i18nService=n,this.route=i,this.syncService=r,this.platformUtilsService=o,this.cryptoService=a,this.logService=s,this.router=l,this.organizationService=d,this.selfHosted=!1,this.canManageBilling=!0,this.loading=!0,this.canUseApi=!1}ngOnInit(){return Nx(this,void 0,void 0,(function*(){this.selfHosted=this.platformUtilsService.isSelfHost(),this.route.parent.parent.params.subscribe((e=>Nx(this,void 0,void 0,(function*(){this.organizationId=e.organizationId,this.canManageBilling=(yield this.organizationService.get(this.organizationId)).canManageBilling;try{this.org=yield this.apiService.getOrganization(this.organizationId),this.canUseApi=this.org.useApi}catch(t){this.logService.error(t)}})))),this.loading=!1}))}submit(){return Nx(this,void 0,void 0,(function*(){try{const e=new ux;if(e.name=this.org.name,e.businessName=this.org.businessName,e.billingEmail=this.org.billingEmail,e.identifier=this.org.identifier,!this.org.hasPublicAndPrivateKeys){const t=yield this.cryptoService.getOrgKey(this.organizationId),n=yield this.cryptoService.makeKeyPair(t);e.keys=new av(n[0],n[1].encryptedString)}this.formPromise=this.apiService.putOrganization(this.organizationId,e).then((()=>this.syncService.fullSync(!0))),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("organizationUpdated"))}catch(e){this.logService.error(e)}}))}submitTaxInfo(){return Nx(this,void 0,void 0,(function*(){this.taxFormPromise=this.taxInfo.submitTaxInfo(),yield this.taxFormPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("taxInfoUpdated"))}))}deleteOrganization(){return Nx(this,void 0,void 0,(function*(){yield this.modalService.openViewRef(zx,this.deleteModalRef,(e=>{e.organizationId=this.organizationId,e.onSuccess.subscribe((()=>{this.router.navigate(["/"])}))}))}))}purgeVault(){return Nx(this,void 0,void 0,(function*(){yield this.modalService.openViewRef(Sx,this.purgeModalRef,(e=>{e.organizationId=this.organizationId}))}))}viewApiKey(){return Nx(this,void 0,void 0,(function*(){yield this.modalService.openViewRef(xx,this.apiKeyModalRef,(e=>{e.keyType="organization",e.entityId=this.organizationId,e.postKey=this.apiService.postOrganizationApiKey.bind(this.apiService),e.scope="api.organization",e.grantType="client_credentials",e.apiKeyTitle="apiKey",e.apiKeyWarning="apiKeyWarning",e.apiKeyDescription="apiKeyDesc"}))}))}rotateApiKey(){return Nx(this,void 0,void 0,(function*(){yield this.modalService.openViewRef(xx,this.rotateApiKeyModalRef,(e=>{e.keyType="organization",e.isRotation=!0,e.entityId=this.organizationId,e.postKey=this.apiService.postOrganizationRotateApiKey.bind(this.apiService),e.scope="api.organization",e.grantType="client_credentials",e.apiKeyTitle="apiKey",e.apiKeyWarning="apiKeyWarning",e.apiKeyDescription="apiKeyRotateDesc"}))}))}}var Xx,ey;Jx.ɵfac=function(e){return new(e||Jx)(o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](Ii.M))},Jx.ɵcmp=o["ɵɵdefineComponent"]({type:Jx,selectors:[["app-org-account"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](Vx,7,o.ViewContainerRef),o["ɵɵviewQuery"](Hx,7,o.ViewContainerRef),o["ɵɵviewQuery"](jx,7,o.ViewContainerRef),o["ɵɵviewQuery"](Lx,7,o.ViewContainerRef),o["ɵɵviewQuery"](Px,5)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.deleteModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.purgeModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.apiKeyModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.rotateApiKeyModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.taxInfo=e.first)}},decls:65,vars:26,consts:[[1,"page-header"],[4,"ngIf"],["ngNativeValidate","",3,"appApiAction","ngSubmit",4,"ngIf"],[1,"secondary-header","border-0","mb-0"],[1,"secondary-header","text-danger","border-0","mb-0"],[1,"card","border-danger"],[1,"card-body"],["type","button",1,"btn","btn-outline-danger",3,"click"],["deleteOrganizationTemplate",""],["purgeOrganizationTemplate",""],["apiKeyTemplate",""],["rotateApiKeyTemplate",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"row"],[1,"col-6"],[1,"form-group"],["for","name"],["id","name","type","text","name","Name",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","billingEmail"],["id","billingEmail","type","text","name","BillingEmail",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","businessName"],["id","businessName","type","text","name","BusinessName",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","identifier"],["id","identifier","type","text","name","Identifier",1,"form-control",3,"ngModel","ngModelChange"],["dynamic","true","size","75","fontSize","35",3,"data"],[3,"loading"],["href","https://docs.bitwarden.com","target","_blank","rel","noopener"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["formTax",""],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵtemplate"](7,Kx,9,6,"div",1),o["ɵɵtext"](8,"\n"),o["ɵɵtemplate"](9,Gx,54,25,"form",2),o["ɵɵtext"](10,"\n"),o["ɵɵtemplate"](11,qx,25,15,"ng-container",1),o["ɵɵtext"](12,"\n"),o["ɵɵelementStart"](13,"div",3),o["ɵɵtext"](14,"\n  "),o["ɵɵelementStart"](15,"h1"),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n"),o["ɵɵelementStart"](20,"p"),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n"),o["ɵɵtemplate"](24,_x,9,6,"div",1),o["ɵɵtext"](25,"\n"),o["ɵɵtemplate"](26,$x,15,8,"form",2),o["ɵɵtext"](27,"\n"),o["ɵɵelementStart"](28,"div",4),o["ɵɵtext"](29,"\n  "),o["ɵɵelementStart"](30,"h1"),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n"),o["ɵɵelementStart"](35,"div",5),o["ɵɵtext"](36,"\n  "),o["ɵɵelementStart"](37,"div",6),o["ɵɵtext"](38,"\n    "),o["ɵɵelementStart"](39,"p"),o["ɵɵtext"](40),o["ɵɵpipe"](41,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n    "),o["ɵɵelementStart"](43,"button",7),o["ɵɵlistener"]("click",(function(){return t.deleteOrganization()})),o["ɵɵtext"](44),o["ɵɵpipe"](45,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n    "),o["ɵɵelementStart"](47,"button",7),o["ɵɵlistener"]("click",(function(){return t.purgeVault()})),o["ɵɵtext"](48),o["ɵɵpipe"](49,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n"),o["ɵɵtemplate"](53,Wx,0,0,"ng-template",null,8,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](55,"\n"),o["ɵɵtemplate"](56,Qx,0,0,"ng-template",null,9,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](58,"\n"),o["ɵɵtemplate"](59,Yx,0,0,"ng-template",null,10,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](61,"\n"),o["ɵɵtemplate"](62,Zx,0,0,"ng-template",null,11,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](64,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,12,"myOrganization")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.org&&!t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.canUseApi),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,14,"taxInformation")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](22,16,"taxInformationDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.org||t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.org&&!t.loading),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](32,18,"dangerZone")),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](41,20,"dangerZoneDesc")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](45,22,"deleteOrganization"),"\n    "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](49,24,"purgeVault"),"\n    "))},directives:[B.NgIf,d.NgControlStatusGroup,d.NgForm,Y.b,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,Di,at,Px],pipes:[M.C],encapsulation:2}),function(e){e[e.Card=0]="Card",e[e.BankAccount=1]="BankAccount",e[e.PayPal=2]="PayPal",e[e.BitPay=3]="BitPay",e[e.Credit=4]="Credit",e[e.WireTransfer=5]="WireTransfer",e[e.AppleInApp=6]="AppleInApp",e[e.GoogleInApp=7]="GoogleInApp",e[e.Check=8]="Check"}(Xx||(Xx={})),function(e){e[e.Charge=0]="Charge",e[e.Credit=1]="Credit",e[e.PromotionalCredit=2]="PromotionalCredit",e[e.ReferralCredit=3]="ReferralCredit",e[e.Refund=4]="Refund"}(ey||(ey={}));class ty{}class ny{}var iy=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const ry=["ppButtonForm"];function oy(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",36),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",37),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"input",38),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().method=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"label",39),o["ɵɵtext"](7,"\n          "),o["ɵɵelement"](8,"i",40),o["ɵɵtext"](9," PayPal"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n      "),o["ɵɵelementStart"](12,"div",37),o["ɵɵtext"](13,"\n        "),o["ɵɵelementStart"](14,"input",41),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().method=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementStart"](16,"label",42),o["ɵɵtext"](17,"\n          "),o["ɵɵelement"](18,"i",43),o["ɵɵtext"](19," Bitcoin"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("value",e.paymentMethodType.PayPal)("ngModel",e.method),o["ɵɵadvance"](10),o["ɵɵproperty"]("value",e.paymentMethodType.BitPay)("ngModel",e.method)}}class ay{constructor(e,t,n,i,r){this.stateService=e,this.apiService=t,this.platformUtilsService=n,this.organizationService=i,this.logService=r,this.showOptions=!0,this.method=Xx.PayPal,this.onAdded=new o.EventEmitter,this.onCanceled=new o.EventEmitter,this.paymentMethodType=Xx,this.ppLoading=!1;const a="4ZDA7DLUUJGMN",s="https://www.paypal.com/cgi-bin/webscr";this.ppButtonFormAction=s,this.ppButtonBusinessId=a}ngOnInit(){return iy(this,void 0,void 0,(function*(){if(null!=this.organizationId){null==this.creditAmount&&(this.creditAmount="20.00"),this.ppButtonCustomField="organization_id:"+this.organizationId;const e=yield this.organizationService.get(this.organizationId);null!=e&&(this.subject=e.name,this.name=e.name)}else null==this.creditAmount&&(this.creditAmount="10.00"),this.userId=yield this.stateService.getUserId(),this.subject=yield this.stateService.getEmail(),this.email=this.subject,this.ppButtonCustomField="user_id:"+this.userId;this.ppButtonCustomField+=",account_credit:1",this.returnUrl=window.location.href}))}submit(){return iy(this,void 0,void 0,(function*(){if(null!=this.creditAmount&&""!==this.creditAmount){if(this.method===Xx.PayPal)return this.ppButtonFormRef.nativeElement.submit(),void(this.ppLoading=!0);if(this.method!==Xx.BitPay)try{this.onAdded.emit()}catch(e){this.logService.error(e)}else try{const e=new ny;e.email=this.email,e.name=this.name,e.credit=!0,e.amount=this.creditAmountNumber,e.organizationId=this.organizationId,e.userId=this.userId,e.returnUrl=this.returnUrl,this.formPromise=this.apiService.postBitPayInvoice(e);const t=yield this.formPromise;this.platformUtilsService.launchUri(t)}catch(e){this.logService.error(e)}}}))}cancel(){this.onCanceled.emit()}formatAmount(){try{if(null!=this.creditAmount&&""!==this.creditAmount){const e=Math.abs(parseFloat(this.creditAmount));if(e>0)return void(this.creditAmount=parseFloat((Math.round(100*e)/100).toString()).toFixed(2).toString())}}catch(e){this.logService.error(e)}this.creditAmount=""}get creditAmountNumber(){if(null!=this.creditAmount&&""!==this.creditAmount)try{return parseFloat(this.creditAmount)}catch(e){this.logService.error(e)}return null}}ay.ɵfac=function(e){return new(e||ay)(o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](L.$))},ay.ɵcmp=o["ɵɵdefineComponent"]({type:ay,selectors:[["app-add-credit"]],viewQuery:function(e,t){if(1&e&&o["ɵɵviewQuery"](ry,7,o.ElementRef),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.ppButtonFormRef=e.first)}},inputs:{creditAmount:"creditAmount",showOptions:"showOptions",method:"method",organizationId:"organizationId"},outputs:{onAdded:"onAdded",onCanceled:"onCanceled"},decls:94,vars:32,consts:[["ngNativeValidate","",1,"card",3,"appApiAction","ngSubmit"],["form",""],[1,"card-body"],["type","button",1,"close",3,"appA11yTitle","click"],["aria-hidden","true"],[1,"card-body-header"],["class","mb-4 text-lg",4,"ngIf"],[1,"form-group"],[1,"row"],[1,"col-4"],["for","creditAmount"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["id","creditAmount","type","text","name","CreditAmount","required","",1,"form-control",3,"ngModel","ngModelChange","blur"],[1,"form-text","text-muted"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["method","post","target","_top",3,"action"],["ppButtonForm",""],["type","hidden","name","cmd","value","_xclick"],["type","hidden","name","business",3,"value"],["type","hidden","name","button_subtype","value","services"],["type","hidden","name","no_note","value","1"],["type","hidden","name","no_shipping","value","1"],["type","hidden","name","rm","value","1"],["type","hidden","name","return",3,"value"],["type","hidden","name","cancel_return",3,"value"],["type","hidden","name","currency_code","value","USD"],["type","hidden","name","image_url","value","https://bitwarden.com/images/paypal-banner.png"],["type","hidden","name","bn","value","PP-BuyNowBF:btn_buynow_LG.gif:NonHosted"],["type","hidden","name","amount",3,"value"],["type","hidden","name","custom",3,"value"],["type","hidden","name","item_name","value","Bitwarden Account Credit"],["type","hidden","name","item_number",3,"value"],[1,"mb-4","text-lg"],[1,"form-check","form-check-inline"],["type","radio","name","Method","id","credit-method-paypal",1,"form-check-input",3,"value","ngModel","ngModelChange"],["for","credit-method-paypal",1,"form-check-label"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-paypal"],["type","radio","name","Method","id","credit-method-bitcoin",1,"form-check-input",3,"value","ngModel","ngModelChange"],["for","credit-method-bitcoin",1,"form-check-label"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-bitcoin"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"button",3),o["ɵɵlistener"]("click",(function(){return t.cancel()})),o["ɵɵpipe"](6,"i18n"),o["ɵɵtext"](7,"\n      "),o["ɵɵelementStart"](8,"span",4),o["ɵɵtext"](9,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n    "),o["ɵɵelementStart"](12,"h3",5),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n    "),o["ɵɵtemplate"](16,oy,22,4,"div",6),o["ɵɵtext"](17,"\n    "),o["ɵɵelementStart"](18,"div",7),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"div",8),o["ɵɵtext"](21,"\n        "),o["ɵɵelementStart"](22,"div",9),o["ɵɵtext"](23,"\n          "),o["ɵɵelementStart"](24,"label",10),o["ɵɵtext"](25),o["ɵɵpipe"](26,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n          "),o["ɵɵelementStart"](28,"div",11),o["ɵɵtext"](29,"\n            "),o["ɵɵelementStart"](30,"div",12),o["ɵɵelementStart"](31,"span",13),o["ɵɵtext"](32,"$USD"),o["ɵɵelementEnd"](),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n            "),o["ɵɵelementStart"](34,"input",14),o["ɵɵlistener"]("ngModelChange",(function(e){return t.creditAmount=e}))("blur",(function(){return t.formatAmount()})),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n      "),o["ɵɵelementStart"](39,"small",15),o["ɵɵtext"](40),o["ɵɵpipe"](41,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n    "),o["ɵɵelementStart"](44,"button",16),o["ɵɵtext"](45,"\n      "),o["ɵɵelement"](46,"i",17),o["ɵɵpipe"](47,"i18n"),o["ɵɵtext"](48,"\n      "),o["ɵɵelementStart"](49,"span"),o["ɵɵtext"](50),o["ɵɵpipe"](51,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n    "),o["ɵɵelementStart"](54,"button",18),o["ɵɵlistener"]("click",(function(){return t.cancel()})),o["ɵɵtext"](55),o["ɵɵpipe"](56,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](57,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n"),o["ɵɵelementStart"](60,"form",19,20),o["ɵɵtext"](62,"\n  "),o["ɵɵelement"](63,"input",21),o["ɵɵtext"](64,"\n  "),o["ɵɵelement"](65,"input",22),o["ɵɵtext"](66,"\n  "),o["ɵɵelement"](67,"input",23),o["ɵɵtext"](68,"\n  "),o["ɵɵelement"](69,"input",24),o["ɵɵtext"](70,"\n  "),o["ɵɵelement"](71,"input",25),o["ɵɵtext"](72,"\n  "),o["ɵɵelement"](73,"input",26),o["ɵɵtext"](74,"\n  "),o["ɵɵelement"](75,"input",27),o["ɵɵtext"](76,"\n  "),o["ɵɵelement"](77,"input",28),o["ɵɵtext"](78,"\n  "),o["ɵɵelement"](79,"input",29),o["ɵɵtext"](80,"\n  "),o["ɵɵelement"](81,"input",30),o["ɵɵtext"](82,"\n  "),o["ɵɵelement"](83,"input",31),o["ɵɵtext"](84,"\n  "),o["ɵɵelement"](85,"input",32),o["ɵɵtext"](86,"\n  "),o["ɵɵelement"](87,"input",33),o["ɵɵtext"](88,"\n  "),o["ɵɵelement"](89,"input",34),o["ɵɵtext"](90,"\n  "),o["ɵɵelement"](91,"input",35),o["ɵɵtext"](92,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](93,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](6,18,"cancel")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,20,"addCredit")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.showOptions),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](26,22,"amount")),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngModel",t.creditAmount),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](41,24,"creditDelayed")),o["ɵɵadvance"](4),o["ɵɵproperty"]("disabled",e.loading||t.ppLoading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](47,26,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](51,28,"submit")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](56,30,"cancel"),"\n    "),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("action",t.ppButtonFormAction,o["ɵɵsanitizeUrl"]),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("value",t.ppButtonBusinessId),o["ɵɵadvance"](10),o["ɵɵpropertyInterpolate"]("value",t.returnUrl),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("value",t.returnUrl),o["ɵɵadvance"](8),o["ɵɵpropertyInterpolate"]("value",t.creditAmount),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("value",t.ppButtonCustomField),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("value",t.subject)}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,B.NgIf,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,d["ɵNgNoValidate"],d.RadioControlValueAccessor],pipes:[M.C],encapsulation:2});class sy extends wx{}var ly,dy=n(20114);!function(e){e.System="system",e.Light="light",e.Dark="dark",e.Nord="nord",e.SolarizedDark="solarizedDark"}(ly||(ly={}));const cy="#fff",py="#bac0ce",uy="#465057",my="#b6b8b8";class hy{}var vy=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function gy(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",3),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"input",9),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).method=t}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).changeMethod()})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"label",10),o["ɵɵtext"](5,"\n      "),o["ɵɵelement"](6,"i",11),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("value",e.paymentMethodType.BankAccount)("ngModel",e.method),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](8,3,"bankAccount"),"")}}function fy(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",12),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"input",13),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).method=t}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).changeMethod()})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"label",14),o["ɵɵtext"](5,"\n      "),o["ɵɵelement"](6,"i",15),o["ɵɵtext"](7," PayPal"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("value",e.paymentMethodType.PayPal)("ngModel",e.method)}}function xy(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",12),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"input",16),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).method=t}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).changeMethod()})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"label",17),o["ɵɵtext"](5,"\n      "),o["ɵɵelement"](6,"i",18),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("value",e.paymentMethodType.Credit)("ngModel",e.method),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](8,3,"accountCredit"),"")}}function yy(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",2),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",3),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"input",4),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().method=t}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().changeMethod()})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"label",5),o["ɵɵtext"](7,"\n      "),o["ɵɵelement"](8,"i",6),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n  "),o["ɵɵtemplate"](13,gy,10,5,"div",7),o["ɵɵtext"](14,"\n  "),o["ɵɵtemplate"](15,fy,9,2,"div",8),o["ɵɵtext"](16,"\n  "),o["ɵɵtemplate"](17,xy,10,5,"div",8),o["ɵɵtext"](18,"\n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("value",e.paymentMethodType.Card)("ngModel",e.method),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](10,6,"creditCard"),""),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!e.hideBank),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.hidePaypal),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.hideCredit)}}function Sy(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",19),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",20),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"label",21),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelement"](10,"div",22),o["ɵɵtext"](11,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n    "),o["ɵɵelementStart"](13,"div",23),o["ɵɵtext"](14,"\n      "),o["ɵɵelement"](15,"img",24),o["ɵɵtext"](16,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n    "),o["ɵɵelementStart"](18,"div",20),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"label",25),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵelement"](24,"div",26),o["ɵɵtext"](25,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n    "),o["ɵɵelementStart"](27,"div",20),o["ɵɵtext"](28,"\n      "),o["ɵɵelementStart"](29,"div",27),o["ɵɵtext"](30,"\n        "),o["ɵɵelementStart"](31,"label",28),o["ɵɵtext"](32),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n        "),o["ɵɵelementStart"](35,"a",29),o["ɵɵpipe"](36,"i18n"),o["ɵɵtext"](37,"\n          "),o["ɵɵelement"](38,"i",30),o["ɵɵtext"](39,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n      "),o["ɵɵelement"](42,"div",31),o["ɵɵtext"](43,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,4,"number")),o["ɵɵadvance"](14),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](22,6,"expiration")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](33,8,"securityCode"),"\n        "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](36,10,"learnMore")))}function by(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"app-callout",32),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n  "),o["ɵɵelementStart"](8,"div",19),o["ɵɵtext"](9,"\n    "),o["ɵɵelementStart"](10,"div",33),o["ɵɵtext"](11,"\n      "),o["ɵɵelementStart"](12,"label",34),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n      "),o["ɵɵelementStart"](16,"input",35),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().bank.routing_number=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n    "),o["ɵɵelementStart"](19,"div",33),o["ɵɵtext"](20,"\n      "),o["ɵɵelementStart"](21,"label",36),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n      "),o["ɵɵelementStart"](25,"input",37),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().bank.account_number=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n    "),o["ɵɵelementStart"](28,"div",33),o["ɵɵtext"](29,"\n      "),o["ɵɵelementStart"](30,"label",38),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n      "),o["ɵɵelementStart"](34,"input",39),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().bank.account_holder_name=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n    "),o["ɵɵelementStart"](37,"div",33),o["ɵɵtext"](38,"\n      "),o["ɵɵelementStart"](39,"label",40),o["ɵɵtext"](40),o["ɵɵpipe"](41,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n      "),o["ɵɵelementStart"](43,"select",41),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().bank.account_holder_type=t})),o["ɵɵtext"](44,"\n        "),o["ɵɵelementStart"](45,"option",42),o["ɵɵtext"](46),o["ɵɵpipe"](47,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n        "),o["ɵɵelementStart"](49,"option",43),o["ɵɵtext"](50),o["ɵɵpipe"](51,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n        "),o["ɵɵelementStart"](53,"option",44),o["ɵɵtext"](54),o["ɵɵpipe"](55,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](57,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n"),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,14,"verifyBankAccount")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate2"]("\n    ",o["ɵɵpipeBind1"](5,16,"verifyBankAccountInitialDesc")," ",o["ɵɵpipeBind1"](6,18,"verifyBankAccountFailureWarning"),"\n  "),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,20,"routingNumber")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.bank.routing_number),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,22,"accountNumber")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.bank.account_number),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](32,24,"accountHolderName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.bank.account_holder_name),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](41,26,"bankAccountType")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.bank.account_holder_type),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("-- ",o["ɵɵpipeBind1"](47,28,"select")," --"),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](51,30,"bankAccountTypeCompany")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](55,32,"bankAccountTypeIndividual"))}}function wy(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",45),o["ɵɵtext"](3,"\n    "),o["ɵɵelement"](4,"div",46),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"small",47),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,1,"paypalClickSubmit")))}function Iy(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"app-callout",48),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,1,"makeSureEnoughCredit"),"\n  "))}const Cy=uy,Ey=my,ky=cy,Py=py;class Ay{constructor(e,t,n){this.apiService=e,this.logService=t,this.themingService=n,this.showMethods=!0,this.showOptions=!0,this.method=Xx.Card,this.hideBank=!1,this.hidePaypal=!1,this.hideCredit=!1,this.destroy$=new xn.x,this.bank={routing_number:null,account_number:null,account_holder_name:null,account_holder_type:"",currency:"USD",country:"US"},this.paymentMethodType=Xx,this.btInstance=null,this.stripe=null,this.stripeElements=null,this.stripeCardNumberElement=null,this.stripeCardExpiryElement=null,this.stripeCardCvcElement=null,this.stripeScript=window.document.createElement("script"),this.stripeScript.src="https://js.stripe.com/v3/",this.stripeScript.async=!0,this.stripeScript.onload=()=>{this.stripe=window.Stripe("pk_live_bpN0P37nMxrMQkcaHXtAybJk"),this.stripeElements=this.stripe.elements(),this.setStripeElement()},this.btScript=window.document.createElement("script"),this.btScript.src="scripts/dropin.js?cache=8oouw",this.btScript.async=!0,this.StripeElementStyle={base:{color:null,fontFamily:'"Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"14px",fontSmoothing:"antialiased","::placeholder":{color:null}},invalid:{color:null}},this.StripeElementClasses={focus:"is-focused",empty:"is-empty",invalid:"is-invalid"}}ngOnInit(){return vy(this,void 0,void 0,(function*(){this.showOptions||(this.hidePaypal=this.method!==Xx.PayPal,this.hideBank=this.method!==Xx.BankAccount,this.hideCredit=this.method!==Xx.Credit),yield this.setTheme(),window.document.head.appendChild(this.stripeScript),this.hidePaypal||window.document.head.appendChild(this.btScript)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),window.document.head.removeChild(this.stripeScript),window.setTimeout((()=>{Array.from(window.document.querySelectorAll("iframe")).forEach((e=>{if(null!=e.src&&e.src.indexOf("stripe")>-1)try{window.document.body.removeChild(e)}catch(t){this.logService.error(t)}}))}),500),this.hidePaypal||(window.document.head.removeChild(this.btScript),window.setTimeout((()=>{Array.from(window.document.head.querySelectorAll("script")).forEach((e=>{if(null!=e.src&&e.src.indexOf("paypal")>-1)try{window.document.head.removeChild(e)}catch(t){this.logService.error(t)}}));const e=window.document.head.querySelector("#braintree-dropin-stylesheet");if(null!=e)try{window.document.head.removeChild(e)}catch(t){this.logService.error(t)}}),500))}changeMethod(){this.btInstance=null,this.method===Xx.PayPal?window.setTimeout((()=>{window.braintree.dropin.create({authorization:"production_qfbsv8kc_njj2zjtyngtjmbjd",container:"#bt-dropin-container",paymentOptionPriority:["paypal"],paypal:{flow:"vault",buttonStyle:{label:"pay",size:"medium",shape:"pill",color:"blue",tagline:"false"}}},((e,t)=>{null==e?this.btInstance=t:console.error(e)}))}),250):this.setStripeElement()}createPaymentToken(){return new Promise(((e,t)=>{this.method===Xx.Credit?e([null,this.method]):this.method===Xx.PayPal?this.btInstance.requestPaymentMethod().then((t=>{e([t.nonce,this.method])})).catch((e=>{t(e.message)})):this.method!==Xx.Card&&this.method!==Xx.BankAccount||(this.method===Xx.Card?this.apiService.postSetupPayment().then((e=>this.stripe.handleCardSetup(e,this.stripeCardNumberElement))).then((n=>{n.error?t(n.error.message):n.setupIntent&&"succeeded"===n.setupIntent.status?e([n.setupIntent.payment_method,this.method]):t()})):this.stripe.createToken("bank_account",this.bank).then((n=>{n.error?t(n.error.message):n.token&&null!=n.token.id?e([n.token.id,this.method]):t()})))}))}handleStripeCardPayment(e,t){return new Promise(((n,i)=>{if(this.showMethods&&null==this.stripeCardNumberElement)return void i();return(()=>this.showMethods?this.stripe.handleCardSetup(e,this.stripeCardNumberElement):this.stripe.handleCardSetup(e))().then((e=>vy(this,void 0,void 0,(function*(){e.error?i(e.error.message):e.paymentIntent&&"succeeded"===e.paymentIntent.status?(null!=t&&(yield t()),n()):i()}))))}))}setStripeElement(){window.setTimeout((()=>{this.showMethods&&this.method===Xx.Card&&(null==this.stripeCardNumberElement&&(this.stripeCardNumberElement=this.stripeElements.create("cardNumber",{style:this.StripeElementStyle,classes:this.StripeElementClasses,placeholder:""})),null==this.stripeCardExpiryElement&&(this.stripeCardExpiryElement=this.stripeElements.create("cardExpiry",{style:this.StripeElementStyle,classes:this.StripeElementClasses})),null==this.stripeCardCvcElement&&(this.stripeCardCvcElement=this.stripeElements.create("cardCvc",{style:this.StripeElementStyle,classes:this.StripeElementClasses,placeholder:""})),this.stripeCardNumberElement.mount("#stripe-card-number-element"),this.stripeCardExpiryElement.mount("#stripe-card-expiry-element"),this.stripeCardCvcElement.mount("#stripe-card-cvc-element"))}),50)}setTheme(){return vy(this,void 0,void 0,(function*(){this.themingService.theme$.pipe((0,dy.R)(this.destroy$)).subscribe((e=>{e.effectiveTheme===ly.Dark?(this.StripeElementStyle.base.color=ky,this.StripeElementStyle.base["::placeholder"].color=Py,this.StripeElementStyle.invalid.color=ky):(this.StripeElementStyle.base.color=Cy,this.StripeElementStyle.base["::placeholder"].color=Ey,this.StripeElementStyle.invalid.color=Cy)}))}))}}Ay.ɵfac=function(e){return new(e||Ay)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](hy))},Ay.ɵcmp=o["ɵɵdefineComponent"]({type:Ay,selectors:[["app-payment"]],inputs:{showMethods:"showMethods",showOptions:"showOptions",method:"method",hideBank:"hideBank",hidePaypal:"hidePaypal",hideCredit:"hideCredit"},decls:10,vars:5,consts:[["class","mb-4 text-lg",4,"ngIf"],[4,"ngIf"],[1,"mb-4","text-lg"],[1,"form-check","form-check-inline","mr-4"],["type","radio","name","Method","id","method-card",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],["for","method-card",1,"form-check-label"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-credit-card"],["class","form-check form-check-inline mr-4",4,"ngIf"],["class","form-check form-check-inline",4,"ngIf"],["type","radio","name","Method","id","method-bank",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],["for","method-bank",1,"form-check-label"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-bank"],[1,"form-check","form-check-inline"],["type","radio","name","Method","id","method-paypal",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],["for","method-paypal",1,"form-check-label"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-paypal"],["type","radio","name","Method","id","method-credit",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],["for","method-credit",1,"form-check-label"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-dollar"],[1,"row"],[1,"form-group","col-4"],["for","stripe-card-number-element"],["id","stripe-card-number-element",1,"form-control","stripe-form-control"],[1,"form-group","col-8","d-flex","align-items-end"],["src","../../images/cards.png","alt","Visa, MasterCard, Discover, AmEx, JCB, Diners Club, UnionPay","width","323","height","32"],["for","stripe-card-expiry-element"],["id","stripe-card-expiry-element",1,"form-control","stripe-form-control"],[1,"d-flex"],["for","stripe-card-cvc-element"],["href","https://www.cvvnumber.com/cvv.html","tabindex","-1","target","_blank","rel","noopener noreferrer",1,"ml-auto",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],["id","stripe-card-cvc-element",1,"form-control","stripe-form-control"],["type","warning",3,"title"],[1,"form-group","col-6"],["for","routing_number"],["id","routing_number","type","text","name","routing_number","required","","appInputVerbatim","",1,"form-control",3,"ngModel","ngModelChange"],["for","account_number"],["id","account_number","type","text","name","account_number","required","","appInputVerbatim","",1,"form-control",3,"ngModel","ngModelChange"],["for","account_holder_name"],["id","account_holder_name","type","text","name","account_holder_name","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","account_holder_type"],["id","account_holder_type","name","account_holder_type","required","",1,"form-control",3,"ngModel","ngModelChange"],["value",""],["value","company"],["value","individual"],[1,"mb-3"],["id","bt-dropin-container",1,"mb-1"],[1,"text-muted"],["type","note"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,yy,19,8,"div",0),o["ɵɵtext"](1,"\n"),o["ɵɵtemplate"](2,Sy,46,12,"ng-container",1),o["ɵɵtext"](3,"\n"),o["ɵɵtemplate"](4,by,60,34,"ng-container",1),o["ɵɵtext"](5,"\n"),o["ɵɵtemplate"](6,wy,11,3,"ng-container",1),o["ɵɵtext"](7,"\n"),o["ɵɵtemplate"](8,Iy,6,3,"ng-container",1),o["ɵɵtext"](9,"\n")),2&e&&(o["ɵɵproperty"]("ngIf",t.showOptions&&t.showMethods),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.showMethods&&t.method===t.paymentMethodType.Card),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.showMethods&&t.method===t.paymentMethodType.BankAccount),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.showMethods&&t.method===t.paymentMethodType.PayPal),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.showMethods&&t.method===t.paymentMethodType.Credit))},directives:[B.NgIf,d.RadioControlValueAccessor,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,pe,Pe.O,d.RequiredValidator,J.b,d.SelectControlValueAccessor,d.NgSelectOption,d["ɵNgSelectMultipleOption"]],pipes:[M.C],encapsulation:2});var Oy=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Ty{constructor(e,t,n,i){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.logService=i,this.onAdjusted=new o.EventEmitter,this.onCanceled=new o.EventEmitter,this.paymentMethodType=Xx}submit(){return Oy(this,void 0,void 0,(function*(){try{const e=new sy;this.formPromise=this.paymentComponent.createPaymentToken().then((t=>(e.paymentToken=t[0],e.paymentMethodType=t[1],e.postalCode=this.taxInfoComponent.taxInfo.postalCode,e.country=this.taxInfoComponent.taxInfo.country,null==this.organizationId?this.apiService.postAccountPayment(e):(e.taxId=this.taxInfoComponent.taxInfo.taxId,e.state=this.taxInfoComponent.taxInfo.state,e.line1=this.taxInfoComponent.taxInfo.line1,e.line2=this.taxInfoComponent.taxInfo.line2,e.city=this.taxInfoComponent.taxInfo.city,e.state=this.taxInfoComponent.taxInfo.state,this.apiService.postOrganizationPayment(this.organizationId,e))))),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("updatedPaymentMethod")),this.onAdjusted.emit()}catch(e){this.logService.error(e)}}))}cancel(){this.onCanceled.emit()}changeCountry(){"US"===this.taxInfoComponent.taxInfo.country?this.paymentComponent.hideBank=!this.organizationId:(this.paymentComponent.hideBank=!0,this.paymentComponent.method===Xx.BankAccount&&(this.paymentComponent.method=Xx.Card,this.paymentComponent.changeMethod()))}}Ty.ɵfac=function(e){return new(e||Ty)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$))},Ty.ɵcmp=o["ɵɵdefineComponent"]({type:Ty,selectors:[["app-adjust-payment"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](Ay,7),o["ɵɵviewQuery"](Px,7)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.paymentComponent=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.taxInfoComponent=e.first)}},inputs:{currentType:"currentType",organizationId:"organizationId"},outputs:{onAdjusted:"onAdjusted",onCanceled:"onCanceled"},decls:36,vars:19,consts:[["ngNativeValidate","",1,"card",3,"appApiAction","ngSubmit"],["form",""],[1,"card-body"],["type","button",1,"close",3,"appA11yTitle","click"],["aria-hidden","true"],[1,"card-body-header"],[3,"hideBank","hideCredit"],[3,"onCountryChanged"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"button",3),o["ɵɵlistener"]("click",(function(){return t.cancel()})),o["ɵɵpipe"](6,"i18n"),o["ɵɵtext"](7,"\n      "),o["ɵɵelementStart"](8,"span",4),o["ɵɵtext"](9,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n    "),o["ɵɵelementStart"](12,"h3",5),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n    "),o["ɵɵelement"](16,"app-payment",6),o["ɵɵtext"](17,"\n    "),o["ɵɵelementStart"](18,"app-tax-info",7),o["ɵɵlistener"]("onCountryChanged",(function(){return t.changeCountry()})),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n    "),o["ɵɵelementStart"](20,"button",8),o["ɵɵtext"](21,"\n      "),o["ɵɵelement"](22,"i",9),o["ɵɵpipe"](23,"i18n"),o["ɵɵtext"](24,"\n      "),o["ɵɵelementStart"](25,"span"),o["ɵɵtext"](26),o["ɵɵpipe"](27,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n    "),o["ɵɵelementStart"](30,"button",10),o["ɵɵlistener"]("click",(function(){return t.cancel()})),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](6,9,"cancel")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](14,11,null!=t.currentType?"changePaymentMethod":"addPaymentMethod"),"\n    "),o["ɵɵadvance"](3),o["ɵɵproperty"]("hideBank",!t.organizationId)("hideCredit",!0),o["ɵɵadvance"](4),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](23,13,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](27,15,"submit")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](32,17,"cancel"),"\n    ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,Ay,Px],pipes:[M.C],encapsulation:2});var By=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const My=function(e){return{"bwi-spin":e}};function Dy(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",3),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().load()})),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",4),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](5,My,e.loading)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,3,"refresh"),"\n  ")}}function Fy(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",5),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",6),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function Ry(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",14),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).addCredit()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](2,1,"addCredit"),"\n  "))}function Uy(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-add-credit",15),o["ɵɵlistener"]("onAdded",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).closeAddCredit(!0)}))("onCanceled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).closeAddCredit(!1)})),o["ɵɵtext"](1,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵproperty"]("organizationId",e.organizationId)}}function zy(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"noPaymentMethod")))}function Ny(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-callout",18),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n      "),o["ɵɵelementStart"](3,"p"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n      "),o["ɵɵelementStart"](8,"form",19,20),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).verifyBank()})),o["ɵɵtext"](10,"\n        "),o["ɵɵelementStart"](11,"label",21),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"div",22),o["ɵɵtext"](16,"\n          "),o["ɵɵelementStart"](17,"div",23),o["ɵɵtext"](18,"\n            "),o["ɵɵelementStart"](19,"div",24),o["ɵɵtext"](20,"$0."),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementStart"](23,"input",25),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).verifyAmount1=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n        "),o["ɵɵelementStart"](26,"label",26),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n        "),o["ɵɵelementStart"](30,"div",22),o["ɵɵtext"](31,"\n          "),o["ɵɵelementStart"](32,"div",23),o["ɵɵtext"](33,"\n            "),o["ɵɵelementStart"](34,"div",24),o["ɵɵtext"](35,"$0."),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n          "),o["ɵɵelementStart"](38,"input",27),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).verifyAmount2=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n        "),o["ɵɵelementStart"](41,"button",28),o["ɵɵtext"](42,"\n          "),o["ɵɵelement"](43,"i",29),o["ɵɵpipe"](44,"i18n"),o["ɵɵtext"](45,"\n          "),o["ɵɵelementStart"](46,"span"),o["ɵɵtext"](47),o["ɵɵpipe"](48,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](9),t=o["ɵɵnextContext"](3);o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,11,"verifyBankAccount")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate2"]("",o["ɵɵpipeBind1"](5,13,"verifyBankAccountDesc")," ",o["ɵɵpipeBind1"](6,15,"verifyBankAccountFailureWarning"),""),o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.verifyBankPromise),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](13,17,"amount","1")),o["ɵɵadvance"](11),o["ɵɵproperty"]("ngModel",t.verifyAmount1),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](28,20,"amount","2")),o["ɵɵadvance"](11),o["ɵɵproperty"]("ngModel",t.verifyAmount2),o["ɵɵadvance"](3),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](44,23,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](48,25,"verifyBankAccount"))}}function Vy(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"inAppPurchase")))}const Hy=function(e,t,n,i,r,o){return{"bwi-credit-card":e,"bwi-bank":t,"bwi-money":n,"bwi-paypal text-primary":i,"bwi-apple text-muted":r,"bwi-google text-muted":o}};function jy(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵtemplate"](2,Ny,52,27,"app-callout",16),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"p"),o["ɵɵtext"](5,"\n      "),o["ɵɵelement"](6,"i",17),o["ɵɵtext"](7,"\n      "),o["ɵɵtemplate"](8,Vy,3,3,"span",2),o["ɵɵtext"](9),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.paymentSource.type===e.paymentMethodType.BankAccount&&e.paymentSource.needsVerification),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction6"](4,Hy,e.paymentSource.type===e.paymentMethodType.Card,e.paymentSource.type===e.paymentMethodType.BankAccount,e.paymentSource.type===e.paymentMethodType.Check,e.paymentSource.type===e.paymentMethodType.PayPal,e.paymentSource.type===e.paymentMethodType.AppleInApp,e.paymentSource.type===e.paymentMethodType.GoogleInApp)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.paymentSourceInApp),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n      ",e.paymentSource.description,"\n    ")}}function Ly(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",14),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).changePayment()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](2,1,e.paymentSource?"changePaymentMethod":"addPaymentMethod"),"\n  ")}}function Ky(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-adjust-payment",30),o["ɵɵlistener"]("onAdjusted",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).closePayment(!0)}))("onCanceled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).closePayment(!1)})),o["ɵɵtext"](1,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵproperty"]("currentType",null!=e.paymentSource?e.paymentSource.type:null)("organizationId",e.organizationId)}}function Gy(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"noInvoices")))}function qy(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",36),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,1,"paid"),"\n          "))}function _y(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",37),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,1,"unpaid"),"\n          "))}function $y(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"td"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"date"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"td"),o["ɵɵtext"](7,"\n          "),o["ɵɵelementStart"](8,"a",33),o["ɵɵpipe"](9,"i18n"),o["ɵɵtext"](10,"\n            "),o["ɵɵelement"](11,"i",34),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n          "),o["ɵɵelementStart"](13,"a",35),o["ɵɵpipe"](14,"i18n"),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementStart"](19,"td"),o["ɵɵtext"](20),o["ɵɵpipe"](21,"currency"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n        "),o["ɵɵelementStart"](23,"td"),o["ɵɵtext"](24,"\n          "),o["ɵɵtemplate"](25,qy,5,3,"span",2),o["ɵɵtext"](26,"\n          "),o["ɵɵtemplate"](27,_y,5,3,"span",2),o["ɵɵtext"](28,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](4,9,e.date,"mediumDate")),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("href",e.pdfUrl,o["ɵɵsanitizeUrl"]),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](9,12,"downloadInvoice")),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("href",e.url,o["ɵɵsanitizeUrl"]),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](14,14,"viewInvoice")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind2"](16,16,"invoiceNumber",e.number),""),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](21,19,e.amount,"$")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.paid),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.paid)}}function Wy(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",31),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n      "),o["ɵɵtemplate"](4,$y,30,22,"tr",32),o["ɵɵtext"](5,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.invoices)}}function Qy(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"noTransactions")))}function Yy(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"chargeNoun"),"\n          "))}function Zy(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"refundNoun")))}const Jy=function(e,t,n,i){return{"bwi-credit-card":e,"bwi-bank":t,"bwi-bitcoin text-warning":n,"bwi-paypal text-primary":i}};function Xy(e,t){if(1&e&&o["ɵɵelement"](0,"i",40),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](3);o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction4"](1,Jy,e.paymentMethodType===t.paymentMethodType.Card,e.paymentMethodType===t.paymentMethodType.BankAccount||e.paymentMethodType===t.paymentMethodType.WireTransfer,e.paymentMethodType===t.paymentMethodType.BitPay,e.paymentMethodType===t.paymentMethodType.PayPal))}}const eS=function(e){return{"text-strike":e}};function tS(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"td"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"date"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"td"),o["ɵɵtext"](7,"\n          "),o["ɵɵtemplate"](8,Yy,3,3,"span",2),o["ɵɵtext"](9,"\n          "),o["ɵɵtemplate"](10,Zy,3,3,"span",2),o["ɵɵtext"](11,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"td"),o["ɵɵtext"](14,"\n          "),o["ɵɵtemplate"](15,Xy,1,6,"i",38),o["ɵɵtext"](16),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementStart"](18,"td",39),o["ɵɵpipe"](19,"i18n"),o["ɵɵtext"](20),o["ɵɵpipe"](21,"currency"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](4,8,e.createdDate,"mediumDate")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.type===n.transactionType.Charge||e.type===n.transactionType.Credit),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===n.transactionType.Refund),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.paymentMethodType),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",e.details,"\n        "),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](19,11,e.refunded?"refunded":"")),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](16,eS,e.refunded)),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind2"](21,13,e.amount,"$"),"\n        ")}}function nS(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",31),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n      "),o["ɵɵtemplate"](4,tS,23,18,"tr",32),o["ɵɵtext"](5,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.transactions)}}function iS(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h2"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"p",7),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"strong"),o["ɵɵtext"](9),o["ɵɵpipe"](10,"currency"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n  "),o["ɵɵelementStart"](13,"p"),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n  "),o["ɵɵtemplate"](17,Ry,3,3,"button",8),o["ɵɵtext"](18,"\n  "),o["ɵɵtemplate"](19,Uy,2,1,"app-add-credit",9),o["ɵɵtext"](20,"\n  "),o["ɵɵelementStart"](21,"h2",10),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n  "),o["ɵɵtemplate"](25,zy,3,3,"p",2),o["ɵɵtext"](26,"\n  "),o["ɵɵtemplate"](27,jy,11,11,"ng-container",2),o["ɵɵtext"](28,"\n  "),o["ɵɵtemplate"](29,Ly,3,3,"button",8),o["ɵɵtext"](30,"\n  "),o["ɵɵtemplate"](31,Ky,2,2,"app-adjust-payment",11),o["ɵɵtext"](32,"\n  "),o["ɵɵelementStart"](33,"h2",10),o["ɵɵtext"](34),o["ɵɵpipe"](35,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n  "),o["ɵɵtemplate"](37,Gy,3,3,"p",2),o["ɵɵtext"](38,"\n  "),o["ɵɵtemplate"](39,Wy,7,1,"table",12),o["ɵɵtext"](40,"\n  "),o["ɵɵelementStart"](41,"h2",10),o["ɵɵtext"](42),o["ɵɵpipe"](43,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n  "),o["ɵɵtemplate"](45,Qy,3,3,"p",2),o["ɵɵtext"](46,"\n  "),o["ɵɵtemplate"](47,nS,7,1,"table",12),o["ɵɵtext"](48,"\n  "),o["ɵɵelementStart"](49,"small",13),o["ɵɵtext"](50),o["ɵɵpipe"](51,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,17,e.isCreditBalance?"accountCredit":"accountBalance")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](10,19,e.creditOrBalance,"$")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](15,22,"creditAppliedDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.showAddCredit),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.showAddCredit),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,24,"paymentMethod")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.paymentSource),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.paymentSource),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.showAdjustPayment),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.showAdjustPayment),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](35,26,"invoices")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.invoices||!e.invoices.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.invoices&&e.invoices.length),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](43,28,"transactions")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.transactions||!e.transactions.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.transactions&&e.transactions.length),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("* ",o["ɵɵpipeBind2"](51,30,"chargesStatement","BITWARDEN"),"")}}class rS{constructor(e,t,n,i,r){this.apiService=e,this.i18nService=t,this.route=n,this.platformUtilsService=i,this.logService=r,this.loading=!1,this.firstLoaded=!1,this.showAdjustPayment=!1,this.showAddCredit=!1,this.paymentMethodType=Xx,this.transactionType=ey}ngOnInit(){return By(this,void 0,void 0,(function*(){this.route.parent.parent.params.subscribe((e=>By(this,void 0,void 0,(function*(){this.organizationId=e.organizationId,yield this.load(),this.firstLoaded=!0}))))}))}load(){return By(this,void 0,void 0,(function*(){this.loading||(this.loading=!0,null!=this.organizationId&&(this.billing=yield this.apiService.getOrganizationBilling(this.organizationId)),this.loading=!1)}))}verifyBank(){return By(this,void 0,void 0,(function*(){if(!this.loading)try{const e=new ty;e.amount1=this.verifyAmount1,e.amount2=this.verifyAmount2,this.verifyBankPromise=this.apiService.postOrganizationVerifyBank(this.organizationId,e),yield this.verifyBankPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("verifiedBankAccount")),this.load()}catch(e){this.logService.error(e)}}))}addCredit(){this.paymentSourceInApp?this.platformUtilsService.showDialog(this.i18nService.t("cannotPerformInAppPurchase"),this.i18nService.t("addCredit"),null,null,"warning"):this.showAddCredit=!0}closeAddCredit(e){this.showAddCredit=!1,e&&this.load()}changePayment(){this.paymentSourceInApp?this.platformUtilsService.showDialog(this.i18nService.t("cannotPerformInAppPurchase"),this.i18nService.t("changePaymentMethod"),null,null,"warning"):this.showAdjustPayment=!0}closePayment(e){this.showAdjustPayment=!1,e&&this.load()}get isCreditBalance(){return null==this.billing||this.billing.balance<=0}get creditOrBalance(){return Math.abs(null!=this.billing?this.billing.balance:0)}get paymentSource(){return null!=this.billing?this.billing.paymentSource:null}get paymentSourceInApp(){return null!=this.paymentSource&&(this.paymentSource.type===Xx.AppleInApp||this.paymentSource.type===Xx.GoogleInApp)}get invoices(){return null!=this.billing?this.billing.invoices:null}get transactions(){return null!=this.billing?this.billing.transactions:null}}var oS,aS,sS;rS.ɵfac=function(e){return new(e||rS)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$))},rS.ɵcmp=o["ɵɵdefineComponent"]({type:rS,selectors:[["app-org-billing"]],decls:13,vars:6,consts:[[1,"page-header","d-flex"],["class","btn btn-sm btn-outline-primary ml-auto",3,"disabled","click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary","ml-auto",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-refresh","bwi-fw",3,"ngClass"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"text-lg"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],[3,"organizationId","onAdded","onCanceled",4,"ngIf"],[1,"spaced-header"],[3,"currentType","organizationId","onAdjusted","onCanceled",4,"ngIf"],["class","table mb-2",4,"ngIf"],[1,"text-muted"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[3,"organizationId","onAdded","onCanceled"],["type","warning",3,"title",4,"ngIf"],[1,"bwi","bwi-fw",3,"ngClass"],["type","warning",3,"title"],["ngNativeValidate","",1,"form-inline",3,"appApiAction","ngSubmit"],["verifyForm",""],["for","verifyAmount1",1,"sr-only"],[1,"input-group","mr-2"],[1,"input-group-prepend"],[1,"input-group-text"],["type","number","id","verifyAmount1","placeholder","xx","name","Amount1","min","1","max","99","step","1","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","verifyAmount2",1,"sr-only"],["type","number","id","verifyAmount2","placeholder","xx","name","Amount2","min","1","max","99","step","1","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-outline-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[3,"currentType","organizationId","onAdjusted","onCanceled"],[1,"table","mb-2"],[4,"ngFor","ngForOf"],["target","_blank","rel","noopener",1,"mr-2",3,"href","appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-file-pdf"],["target","_blank","rel","noopener",3,"href","title"],["aria-hidden","true",1,"bwi","bwi-check","text-success"],["aria-hidden","true",1,"bwi","bwi-exclamation-circle","text-muted"],["class","bwi bwi-fw","aria-hidden","true",3,"ngClass",4,"ngIf"],[3,"ngClass","title"],["aria-hidden","true",1,"bwi","bwi-fw",3,"ngClass"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵtemplate"](6,Dy,5,7,"button",1),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵtemplate"](9,Fy,9,6,"ng-container",2),o["ɵɵtext"](10,"\n"),o["ɵɵtemplate"](11,iS,53,33,"ng-container",2),o["ɵɵtext"](12,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,4,"billing"),"\n  "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.firstLoaded),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.firstLoaded&&t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.billing))},directives:[B.NgIf,B.NgClass,ay,Pe.O,d.NgControlStatusGroup,d.NgForm,Y.b,d.MinValidator,d.MaxValidator,d.NumberValueAccessor,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,Ty,B.NgForOf,pe],pipes:[M.C,B.CurrencyPipe,B.DatePipe],encapsulation:2}),function(e){e[e.Default=0]="Default",e[e.BillingSync=1]="BillingSync"}(oS||(oS={})),function(e){e[e.CloudBillingSync=1]="CloudBillingSync"}(aS||(aS={})),function(e){e[e.Free=0]="Free",e[e.FamiliesAnnually2019=1]="FamiliesAnnually2019",e[e.TeamsMonthly2019=2]="TeamsMonthly2019",e[e.TeamsAnnually2019=3]="TeamsAnnually2019",e[e.EnterpriseMonthly2019=4]="EnterpriseMonthly2019",e[e.EnterpriseAnnually2019=5]="EnterpriseAnnually2019",e[e.Custom=6]="Custom",e[e.FamiliesAnnually=7]="FamiliesAnnually",e[e.TeamsMonthly=8]="TeamsMonthly",e[e.TeamsAnnually=9]="TeamsAnnually",e[e.EnterpriseMonthly=10]="EnterpriseMonthly",e[e.EnterpriseAnnually=11]="EnterpriseAnnually"}(sS||(sS={}));class lS extends yg.c{constructor(e){super(e),null!=e&&(this.billingSyncKey=this.getResponseProperty("BillingSyncKey"))}}class dS{constructor(e){this.billingSyncKey=e}}class cS{constructor(e,t,n,i){this.organizationId=e,this.type=t,this.enabled=n,this.config=i}}var pS=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class uS{constructor(e,t){this.apiService=e,this.logService=t}submit(){var e;return pS(this,void 0,void 0,(function*(){try{const t=new cS(this.entityId,aS.CloudBillingSync,!0,new dS(this.billingSyncKey));null==this.existingConnectionId?this.formPromise=this.apiService.createOrganizationConnection(t,lS):this.formPromise=this.apiService.updateOrganizationConnection(t,lS,this.existingConnectionId);const n=yield this.formPromise;this.existingConnectionId=null==n?void 0:n.id,this.billingSyncKey=null===(e=null==n?void 0:n.config)||void 0===e?void 0:e.billingSyncKey,this.setParentConnection(n)}catch(t){this.logService.error(t)}}))}deleteConnection(){return pS(this,void 0,void 0,(function*(){this.formPromise=this.apiService.deleteOrganizationConnection(this.existingConnectionId),yield this.formPromise,this.setParentConnection(null)}))}}uS.ɵfac=function(e){return new(e||uS)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](L.$))},uS.ɵcmp=o["ɵɵdefineComponent"]({type:uS,selectors:[["app-billing-sync-key"]],decls:77,vars:36,consts:[["role","dialog","aria-modal","true","aria-labelledby","billingSyncTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","billingSyncTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],["for","billingSyncKey"],["id","billingSyncKey","type","input","name","billingSyncKey","required","","appAutofocus","","appInputVerbatim","",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"ml-auto"],["type","button",1,"btn","btn-outline-danger",3,"appA11yTitle","disabled","click"],["deleteBtn",""],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-lg","bwi-fw",3,"hidden","title"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"button",6),o["ɵɵpipe"](14,"i18n"),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"span",7),o["ɵɵtext"](17,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementStart"](21,"div",8),o["ɵɵtext"](22,"\n        "),o["ɵɵelementStart"](23,"p"),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵelementStart"](27,"div",9),o["ɵɵtext"](28,"\n          "),o["ɵɵelementStart"](29,"label",10),o["ɵɵtext"](30),o["ɵɵpipe"](31,"i18n"),o["ɵɵelementStart"](32,"small"),o["ɵɵtext"](33,"("),o["ɵɵelementEnd"](),o["ɵɵelementStart"](34,"small"),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵelementStart"](37,"small"),o["ɵɵtext"](38,")"),o["ɵɵelementEnd"](),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n          "),o["ɵɵelementStart"](40,"input",11),o["ɵɵlistener"]("ngModelChange",(function(e){return t.billingSyncKey=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n      "),o["ɵɵelementStart"](44,"div",12),o["ɵɵtext"](45,"\n        "),o["ɵɵelementStart"](46,"button",13),o["ɵɵtext"](47,"\n          "),o["ɵɵelement"](48,"i",14),o["ɵɵpipe"](49,"i18n"),o["ɵɵtext"](50,"\n          "),o["ɵɵelementStart"](51,"span"),o["ɵɵtext"](52),o["ɵɵpipe"](53,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n        "),o["ɵɵelementStart"](56,"button",15),o["ɵɵtext"](57),o["ɵɵpipe"](58,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n        "),o["ɵɵelementStart"](60,"div",16),o["ɵɵtext"](61,"\n          "),o["ɵɵelementStart"](62,"button",17,18),o["ɵɵlistener"]("click",(function(){return t.deleteConnection()})),o["ɵɵpipe"](64,"i18n"),o["ɵɵtext"](65,"\n            "),o["ɵɵelement"](66,"i",19),o["ɵɵtext"](67,"\n            "),o["ɵɵelement"](68,"i",20),o["ɵɵpipe"](69,"i18n"),o["ɵɵtext"](70,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](71,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](73,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](74,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](75,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,16,"manageBillingSync")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](14,18,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](25,20,"billingSyncKeyDesc")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](31,22,"billingSyncKey")," "),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](36,24,"required")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngModel",t.billingSyncKey),o["ɵɵadvance"](6),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](49,26,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](53,28,"save")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](58,30,"cancel"),"\n        "),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](64,32,"delete")),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](69,34,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,d.DefaultValueAccessor,d.RequiredValidator,Z.U,J.b,d.NgControlStatus,d.NgModel],pipes:[M.C],encapsulation:2});class mS extends re{constructor(){super(...arguments),this.type=oS.Default}}var hS,vS=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function gS(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-user-verification",15),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().masterPassword=t})),o["ɵɵtext"](1,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("ngModel",e.masterPassword)}}function fS(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"app-callout",16),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,2,"rotateBillingSyncTokenTitle")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](8,4,"rotateBillingSyncTokenWarning"),"\n          "))}function xS(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",25),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"b",26),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5),o["ɵɵpipe"](6,"date"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](4,2,"lastSync"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind2"](6,4,e.lastSyncDate,"medium"),"\n          ")}}function yS(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",27),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",28),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind2"](4,1,1===e.daysBetween?"awaitingSyncSingular":"awaitingSyncPlural",e.daysBetween),"\n          ")}}function SS(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"label",17),o["ɵɵtext"](7,"Billing Sync Key"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n          "),o["ɵɵelementStart"](9,"div",18),o["ɵɵtext"](10,"\n            "),o["ɵɵelementStart"](11,"input",19),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().clientSecret=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n            "),o["ɵɵelementStart"](13,"div",20),o["ɵɵtext"](14,"\n              "),o["ɵɵelementStart"](15,"button",21),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().copy()})),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n                "),o["ɵɵelement"](18,"i",22),o["ɵɵtext"](19,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵtemplate"](23,xS,7,7,"div",23),o["ɵɵtext"](24,"\n          "),o["ɵɵtemplate"](25,yS,5,4,"div",24),o["ɵɵtext"](26,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,5,"copyPasteBillingSync")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngModel",e.clientSecret),o["ɵɵadvance"](4),o["ɵɵproperty"]("appA11yTitle",o["ɵɵpipeBind1"](16,7,"copy")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",e.showLastSyncText),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.showAwaitingSyncText)}}function bS(e,t){1&e&&(o["ɵɵelement"](0,"i",31),o["ɵɵpipe"](1,"i18n")),2&e&&o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,1,"loading"))}function wS(e,t){if(1&e&&(o["ɵɵelementStart"](0,"button",29),o["ɵɵtext"](1,"\n          "),o["ɵɵtemplate"](2,bS,2,3,"i",30),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"span"),o["ɵɵtext"](5),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](),t=o["ɵɵreference"](5);o["ɵɵproperty"]("disabled",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",e.submitButtonText,"\n          ")}}function IS(e,t){1&e&&(o["ɵɵelementStart"](0,"button",32),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"close"),"\n        "))}function CS(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",33),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().cancelRotate()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"cancel"),"\n        "))}function ES(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",33),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().rotateToken()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"rotateToken"),"\n        "))}class kS{constructor(e,t,n,i){this.userVerificationService=e,this.apiService=t,this.platformUtilsService=n,this.i18nService=i,this.lastSyncDate=null}copy(){this.platformUtilsService.copyToClipboard(this.clientSecret)}submit(){return vS(this,void 0,void 0,(function*(){if(this.showRotateScreen){this.formPromise=this.userVerificationService.buildRequest(this.masterPassword,mS).then((e=>(e.type=oS.BillingSync,this.apiService.postOrganizationRotateApiKey(this.organizationId,e))));const e=yield this.formPromise;yield this.load(e),this.showRotateScreen=!1,this.platformUtilsService.showToast("success",null,this.i18nService.t("billingSyncApiKeyRotated"))}else{this.formPromise=this.userVerificationService.buildRequest(this.masterPassword,mS).then((e=>(e.type=oS.BillingSync,this.apiService.postOrganizationApiKey(this.organizationId,e))));const e=yield this.formPromise;yield this.load(e)}}))}load(e){return vS(this,void 0,void 0,(function*(){this.clientSecret=e.apiKey,this.keyRevisionDate=e.revisionDate,this.hasBillingToken=!0;const t=yield this.apiService.getSponsorshipSyncStatus(this.organizationId);this.lastSyncDate=t.lastSyncDate}))}cancelRotate(){this.showRotateScreen=!1}rotateToken(){this.showRotateScreen=!0}dayDiff(e,t){const n=Math.abs(t.getTime()-e.getTime());return Math.round(n/864e5)}get submitButtonText(){return this.showRotateScreen?this.i18nService.t("rotateToken"):this.i18nService.t(this.hasBillingToken?"continue":"generateToken")}get showLastSyncText(){return this.lastSyncDate&&this.lastSyncDate>this.keyRevisionDate}get showAwaitingSyncText(){return this.lastSyncDate&&this.lastSyncDate<=this.keyRevisionDate}get daysBetween(){return this.dayDiff(this.keyRevisionDate,new Date)}}kS.ɵfac=function(e){return new(e||kS)(o["ɵɵdirectiveInject"](Yn.i),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D))},kS.ɵcmp=o["ɵɵdefineComponent"]({type:kS,selectors:[["app-billing-sync-api-key"]],decls:44,vars:14,consts:[["role","dialog","aria-modal","true","aria-labelledby","billingSyncApiKeyTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","billingSyncApiKeyTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["ngDefaultControl","","name","secret",3,"ngModel","ngModelChange",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled",4,"ngIf"],["type","button","class","btn btn-outline-secondary","data-dismiss","modal",4,"ngIf"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["ngDefaultControl","","name","secret",3,"ngModel","ngModelChange"],["type","warning"],["for","clientSecret"],[1,"input-group"],["id","clientSecret","type","text","name","clientSecret","disabled","",1,"form-control","text-monospace",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-clone"],["class","small text-muted mt-2",4,"ngIf"],["class","small text-danger mt-2",4,"ngIf"],[1,"small","text-muted","mt-2"],[1,"font-weight-semibold"],[1,"small","text-danger","mt-2"],[1,"bwi","bwi-error"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["class","bwi bwi-spinner bwi-spin",3,"title",4,"ngIf"],[1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"button",6),o["ɵɵpipe"](14,"i18n"),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"span",7),o["ɵɵtext"](17,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementStart"](21,"div",8),o["ɵɵtext"](22,"\n        "),o["ɵɵtemplate"](23,gS,2,1,"app-user-verification",9),o["ɵɵtext"](24,"\n        "),o["ɵɵtemplate"](25,fS,10,6,"ng-container",10),o["ɵɵtext"](26,"\n\n        "),o["ɵɵtemplate"](27,SS,27,9,"div",10),o["ɵɵtext"](28,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n      "),o["ɵɵelementStart"](30,"div",11),o["ɵɵtext"](31,"\n        "),o["ɵɵtemplate"](32,wS,7,3,"button",12),o["ɵɵtext"](33,"\n        "),o["ɵɵtemplate"](34,IS,3,3,"button",13),o["ɵɵtext"](35,"\n        "),o["ɵɵtemplate"](36,CS,3,3,"button",14),o["ɵɵtext"](37,"\n        "),o["ɵɵtemplate"](38,ES,3,3,"button",14),o["ɵɵtext"](39,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,10,t.hasBillingToken?"viewBillingSyncToken":"generateBillingSyncToken"),"\n        "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](14,12,"close")),o["ɵɵadvance"](10),o["ɵɵproperty"]("ngIf",!t.clientSecret),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.clientSecret&&t.showRotateScreen),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.clientSecret&&!t.showRotateScreen),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!t.clientSecret||t.showRotateScreen),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.showRotateScreen),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.showRotateScreen),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.clientSecret&&!t.showRotateScreen))},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,B.NgIf,el.W,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,Pe.O],pipes:[M.C,B.DatePipe],encapsulation:2});class PS{}PS.ɵfac=function(e){return new(e||PS)},PS.ɵcmp=o["ɵɵdefineComponent"]({type:PS,selectors:[["app-image-org-subscription-hidden"]],decls:38,vars:0,consts:[["width","216","height","231","viewBox","0 0 216 231","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M133.356 85.6618C133.136 85.43 132.871 85.2457 132.577 85.1198C132.283 84.9939 131.968 84.93 131.648 84.9318H87.8482C87.5289 84.93 87.2113 84.9939 86.9175 85.1198C86.6237 85.2457 86.359 85.43 86.14 85.6618C85.9083 85.8808 85.7239 86.1473 85.598 86.4411C85.4721 86.7349 85.4082 87.0506 85.41 87.37V116.57C85.4192 118.793 85.8499 120.994 86.6802 123.056C87.4705 125.091 88.5326 127.011 89.8375 128.761C91.1789 130.515 92.6808 132.137 94.3233 133.612C95.8472 135.01 97.4532 136.318 99.1304 137.528C100.59 138.565 102.123 139.547 103.729 140.474C105.335 141.401 106.469 142.027 107.131 142.354C107.799 142.682 108.339 142.941 108.741 143.113C109.055 143.264 109.4 143.339 109.748 143.332C110.091 143.337 110.431 143.257 110.737 143.102C111.146 142.923 111.679 142.671 112.354 142.343C113.03 142.014 114.179 141.386 115.756 140.463C117.333 139.539 118.884 138.554 120.355 137.517C122.034 136.306 123.642 134.999 125.169 133.601C126.814 132.128 128.316 130.504 129.655 128.75C130.958 126.998 132.021 125.08 132.813 123.045C133.645 120.983 134.075 118.782 134.083 116.559V87.3591C134.085 87.0415 134.021 86.7276 133.895 86.4356C133.769 86.1436 133.586 85.8808 133.356 85.6618ZM127.71 116.836C127.71 127.421 109.748 136.514 109.748 136.514V91.1879H127.71V116.836Z","fill","var(--color-secondary-700)"],["d","M24.6216 122.3C24.7144 123.4 25.6819 124.217 26.7825 124.125C27.8832 124.032 28.7002 123.064 28.6074 121.964L24.6216 122.3ZM151.501 45.7445C152.57 45.4679 153.213 44.3768 152.936 43.3074L148.429 25.8809C148.152 24.8115 147.061 24.1688 145.992 24.4454C144.922 24.722 144.28 25.8131 144.556 26.8825L148.563 42.3728L133.073 46.3793C132.003 46.6559 131.361 47.747 131.637 48.8164C131.914 49.8858 133.005 50.5285 134.074 50.2519L151.501 45.7445ZM28.6074 121.964C26.6788 99.0874 34.4658 75.5543 51.9661 58.054L49.1377 55.2256C30.7695 73.5938 22.5982 98.2999 24.6216 122.3L28.6074 121.964ZM51.9661 58.054C78.5404 31.4797 119.036 27.3026 149.985 45.5315L152.015 42.0849C119.534 22.9534 77.0327 27.3306 49.1377 55.2256L51.9661 58.054Z","fill","var(--color-secondary-700)"],["d","M67.4747 185.062C66.4089 185.352 65.7801 186.451 66.0701 187.517L70.797 204.885C71.0871 205.951 72.1862 206.58 73.252 206.29C74.3179 205.999 74.9467 204.9 74.6567 203.834L70.455 188.396L85.8934 184.194C86.9592 183.904 87.5881 182.805 87.298 181.739C87.008 180.674 85.9088 180.045 84.843 180.335L67.4747 185.062ZM192.478 100.283C192.286 99.1952 191.248 98.4697 190.16 98.6625C189.072 98.8552 188.347 99.8931 188.54 100.981L192.478 100.283ZM166.138 172.225C139.813 198.55 99.8271 202.897 68.9932 185.255L67.0068 188.727C99.3669 207.242 141.333 202.687 168.966 175.054L166.138 172.225ZM188.54 100.981C192.985 126.07 185.516 152.847 166.138 172.225L168.966 175.054C189.307 154.713 197.142 126.603 192.478 100.283L188.54 100.981Z","fill","var(--color-secondary-700)"],["d","M37.726 108.132C39.283 92.1931 46.1655 76.6765 58.3734 64.4686C75.2893 47.5527 98.5583 40.8618 120.5 44.396","stroke","var(--color-secondary-700)","stroke-width","2","stroke-linecap","round"],["d","M180.595 119.132C179.653 136.119 172.693 152.834 159.717 165.811C144.44 181.088 123.982 188.025 104 186.623","stroke","var(--color-secondary-700)","stroke-width","2","stroke-linecap","round"],["x","153.5","y","56.1317","width","49","height","34","rx","2.5","stroke","var(--color-secondary-700)","stroke-width","3"],["d","M153.5 63.6317V63.6317C153.5 66.9454 156.186 69.6317 159.5 69.6317H172.509M202.5 63.6317V63.6317C202.5 66.9454 199.814 69.6317 196.5 69.6317H183.491","stroke","var(--color-secondary-700)","stroke-width","3"],["id","path-8-inside-1_1000_26057","fill","white"],["x","172","y","65.6317","width","12","height","9","rx","1.25"],["x","172","y","65.6317","width","12","height","9","rx","1.25","stroke","var(--color-secondary-700)","stroke-width","6","mask","url(#path-8-inside-1_1000_26057)"],["d","M187 54.6317C187 54.6317 187 53.6317 187 52.6317C187 51.6317 186.053 50.6317 185.105 50.6317C184.158 50.6317 171.842 50.6317 170.895 50.6317C169.947 50.6317 169 51.6317 169 52.6317C169 53.6317 169 54.6317 169 54.6317","stroke","var(--color-secondary-700)","stroke-width","3"],["cx","48","cy","141","r","10.5","fill","var(--color-background)","stroke","var(--color-secondary-700)","stroke-width","3"],["d","M64.9935 168.5H64.9126H64.8318H64.7512H64.6708H64.5905H64.5104H64.4304H64.3506H64.2709H64.1914H64.1121H64.0329H63.9538H63.8749H63.7962H63.7176H63.6392H63.5609H63.4828H63.4048H63.3269H63.2492H63.1717H63.0943H63.017H62.9399H62.8629H62.7861H62.7094H62.6329H62.5565H62.4802H62.4041H62.3281H62.2523H62.1766H62.101H62.0256H61.9503H61.8751H61.8001H61.7252H61.6504H61.5758H61.5013H61.4269H61.3527H61.2786H61.2046H61.1308H61.0571H60.9835H60.91H60.8367H60.7635H60.6904H60.6175H60.5446H60.4719H60.3993H60.3269H60.2545H60.1823H60.1102H60.0382H59.9664H59.8946H59.823H59.7515H59.6801H59.6088H59.5376H59.4666H59.3956H59.3248H59.2541H59.1835H59.113H59.0426H58.9724H58.9022H58.8322H58.7622H58.6924H58.6226H58.553H58.4835H58.4141H58.3448H58.2756H58.2065H58.1375H58.0686H57.9998H57.9311H57.8625H57.794H57.7256H57.6572H57.589H57.5209H57.4529H57.385H57.3172H57.2494H57.1818H57.1142H57.0468H56.9794H56.9121H56.8449H56.7779H56.7108H56.6439H56.5771H56.5103H56.4437H56.3771H56.3106H56.2442H56.1779H56.1117H56.0455H55.9794H55.9134H55.8475H55.7817H55.7159H55.6502H55.5846H55.5191H55.4537H55.3883H55.323H55.2578H55.1926H55.1275H55.0625H54.9976H54.9328H54.868H54.8032H54.7386H54.674H54.6095H54.5451H54.4807H54.4164H54.3521H54.2879H54.2238H54.1598H54.0958H54.0318H53.968H53.9042H53.8404H53.7767H53.7131H53.6495H53.586H53.5226H53.4592H53.3958H53.3325H53.2693H53.2061H53.143H53.0799H53.0169H52.9539H52.891H52.8281H52.7653H52.7025H52.6398H52.5771H52.5145H52.4519H52.3894H52.3269H52.2645H52.202H52.1397H52.0774H52.0151H51.9528H51.8907H51.8285H51.7664H51.7043H51.6423H51.5803H51.5183H51.4564H51.3945H51.3326H51.2708H51.209H51.1472H51.0855H51.0238H50.9621H50.9005H50.8389H50.7773H50.7157H50.6542H50.5927H50.5312H50.4698H50.4084H50.347H50.2856H50.2243H50.1629H50.1016H50.0404H49.9791H49.9178H49.8566H49.7954H49.7342H49.6731H49.6119H49.5508H49.4896H49.4285H49.3674H49.3064H49.2453H49.1842H49.1232H49.0622H49.0011H48.9401H48.8791H48.8181H48.7571H48.6962H48.6352H48.5742H48.5133H48.4523H48.3913H48.3304H48.2694H48.2085H48.1475H48.0866H48.0257H47.9647H47.9038H47.8428H47.7819H47.7209H47.6599H47.599H47.538H47.477H47.416H47.3551H47.2941H47.2331H47.172H47.111H47.05H46.9889H46.9279H46.8668H46.8057H46.7446H46.6835H46.6224H46.5612H46.5001H46.4389H46.3777H46.3165H46.2553H46.194H46.1328H46.0715H46.0102H45.9489H45.8875H45.8261H45.7647H45.7033H45.6418H45.5804H45.5189H45.4573H45.3958H45.3342H45.2726H45.2109H45.1493H45.0876H45.0258H44.9641H44.9023H44.8404H44.7786H44.7166H44.6547H44.5927H44.5307H44.4687H44.4066H44.3445H44.2823H44.2201H44.1578H44.0956H44.0332H43.9709H43.9084H43.846H43.7835H43.7209H43.6583H43.5957H43.533H43.4703H43.4075H43.3447H43.2818H43.2189H43.1559H43.0929H43.0298H42.9666H42.9034H42.8402H42.7769H42.7135H42.6501H42.5867H42.5231H42.4596H42.3959H42.3322H42.2685H42.2046H42.1408H42.0768H42.0128H41.9487H41.8846H41.8204H41.7562H41.6918H41.6274H41.563H41.4985H41.4339H41.3692H41.3045H41.2397H41.1748H41.1098H41.0448H40.9797H40.9146H40.8493H40.784H40.7186H40.6532H40.5876H40.522H40.4563H40.3905H40.3247H40.2588H40.1928H40.1267H40.0605H39.9942H39.9279H39.8615H39.795H39.7284H39.6617H39.5949H39.5281H39.4611H39.3941H39.327H39.2598H39.1925H39.1251H39.0576H38.9901H38.9224H38.8547H38.7868H38.7189H38.6508H38.5827H38.5145H38.4461H38.3777H38.3092H38.2406H38.1719H38.103H38.0341H37.9651H37.896H37.8267H37.7574H37.688H37.6184H37.5488H37.479H37.4092H37.3392H37.2691H37.199H37.1287H37.0583H36.9878H36.9171H36.8464H36.7755H36.7046H36.6335H36.5623H36.491H36.4196H36.3481H36.2764H36.2046H36.1328H36.0607H35.9886H35.9164H35.844H35.7715H35.6989H35.6262H35.5533H35.4803H35.4072H35.334H35.2606H35.1872H35.1135H35.0398H34.9659H34.8919H34.8178H34.7436H34.6692H34.5947H34.52H34.4452H34.3703H34.2952H34.2201H34.1447H34.0693H33.9937H33.9179H33.8421H33.7661H33.6899H33.6136H33.5372H33.4606H33.3839H33.3071H33.2301H33.1529H33.0756H32.9982H32.9206H32.8429H32.765H32.687H32.6088H32.5305H32.452H32.3734H32.2946H32.2157H32.1367H32.0574H31.978H31.8985H31.8188H31.739H31.659H31.5788H31.4985H31.418H31.3374H31.2566H31.1757H31.0946H31.0133H30.9318H30.8503H30.7685H30.6866H30.6045H30.5222H30.4398H30.3572H30.2745H30.1915C30.0489 168.5 29.9693 168.466 29.9164 168.433C29.8553 168.394 29.7779 168.322 29.702 168.192C29.5361 167.906 29.4608 167.48 29.5197 167.111C30.9235 158.322 38.6474 151.574 47.9925 151.574C57.3375 151.574 65.0615 158.322 66.4652 167.111C66.5751 167.799 66.4037 168.054 66.3124 168.149C66.1888 168.278 65.8364 168.5 64.9935 168.5Z","fill","var(--color-background)","stroke","var(--color-secondary-700)","stroke-width","3"],["cx","20","cy","141","r","10.5","fill","var(--color-background)","stroke","var(--color-secondary-700)","stroke-width","3"],["d","M36.9935 168.5H36.9126H36.8318H36.7512H36.6708H36.5905H36.5104H36.4304H36.3506H36.2709H36.1914H36.1121H36.0329H35.9538H35.8749H35.7962H35.7176H35.6392H35.5609H35.4828H35.4048H35.3269H35.2492H35.1717H35.0943H35.017H34.9399H34.8629H34.7861H34.7094H34.6329H34.5565H34.4802H34.4041H34.3281H34.2523H34.1766H34.101H34.0256H33.9503H33.8751H33.8001H33.7252H33.6504H33.5758H33.5013H33.4269H33.3527H33.2786H33.2046H33.1308H33.0571H32.9835H32.91H32.8367H32.7635H32.6904H32.6175H32.5446H32.4719H32.3993H32.3269H32.2545H32.1823H32.1102H32.0382H31.9664H31.8946H31.823H31.7515H31.6801H31.6088H31.5376H31.4666H31.3956H31.3248H31.2541H31.1835H31.113H31.0426H30.9724H30.9022H30.8322H30.7622H30.6924H30.6226H30.553H30.4835H30.4141H30.3448H30.2756H30.2065H30.1375H30.0686H29.9998H29.9311H29.8625H29.794H29.7256H29.6572H29.589H29.5209H29.4529H29.385H29.3172H29.2494H29.1818H29.1142H29.0468H28.9794H28.9121H28.8449H28.7779H28.7108H28.6439H28.5771H28.5103H28.4437H28.3771H28.3106H28.2442H28.1779H28.1117H28.0455H27.9794H27.9134H27.8475H27.7817H27.7159H27.6502H27.5846H27.5191H27.4537H27.3883H27.323H27.2578H27.1926H27.1275H27.0625H26.9976H26.9328H26.868H26.8032H26.7386H26.674H26.6095H26.5451H26.4807H26.4164H26.3521H26.2879H26.2238H26.1598H26.0958H26.0318H25.968H25.9042H25.8404H25.7767H25.7131H25.6495H25.586H25.5226H25.4592H25.3958H25.3325H25.2693H25.2061H25.143H25.0799H25.0169H24.9539H24.891H24.8281H24.7653H24.7025H24.6398H24.5771H24.5145H24.4519H24.3894H24.3269H24.2645H24.202H24.1397H24.0774H24.0151H23.9528H23.8907H23.8285H23.7664H23.7043H23.6423H23.5803H23.5183H23.4564H23.3945H23.3326H23.2708H23.209H23.1472H23.0855H23.0238H22.9621H22.9005H22.8389H22.7773H22.7157H22.6542H22.5927H22.5312H22.4698H22.4084H22.347H22.2856H22.2243H22.1629H22.1016H22.0404H21.9791H21.9178H21.8566H21.7954H21.7342H21.6731H21.6119H21.5508H21.4896H21.4285H21.3674H21.3064H21.2453H21.1842H21.1232H21.0622H21.0011H20.9401H20.8791H20.8181H20.7571H20.6962H20.6352H20.5742H20.5133H20.4523H20.3913H20.3304H20.2694H20.2085H20.1475H20.0866H20.0257H19.9647H19.9038H19.8428H19.7819H19.7209H19.6599H19.599H19.538H19.477H19.416H19.3551H19.2941H19.2331H19.172H19.111H19.05H18.9889H18.9279H18.8668H18.8057H18.7446H18.6835H18.6224H18.5612H18.5001H18.4389H18.3777H18.3165H18.2553H18.194H18.1328H18.0715H18.0102H17.9489H17.8875H17.8261H17.7647H17.7033H17.6418H17.5804H17.5189H17.4573H17.3958H17.3342H17.2726H17.2109H17.1493H17.0876H17.0258H16.9641H16.9023H16.8404H16.7786H16.7166H16.6547H16.5927H16.5307H16.4687H16.4066H16.3445H16.2823H16.2201H16.1578H16.0956H16.0332H15.9709H15.9084H15.846H15.7835H15.7209H15.6583H15.5957H15.533H15.4703H15.4075H15.3447H15.2818H15.2189H15.1559H15.0929H15.0298H14.9666H14.9034H14.8402H14.7769H14.7135H14.6501H14.5867H14.5231H14.4596H14.3959H14.3322H14.2685H14.2046H14.1408H14.0768H14.0128H13.9487H13.8846H13.8204H13.7562H13.6918H13.6274H13.563H13.4985H13.4339H13.3692H13.3045H13.2397H13.1748H13.1098H13.0448H12.9797H12.9146H12.8493H12.784H12.7186H12.6532H12.5876H12.522H12.4563H12.3905H12.3247H12.2588H12.1928H12.1267H12.0605H11.9942H11.9279H11.8615H11.795H11.7284H11.6617H11.5949H11.5281H11.4611H11.3941H11.327H11.2598H11.1925H11.1251H11.0576H10.9901H10.9224H10.8547H10.7868H10.7189H10.6508H10.5827H10.5145H10.4461H10.3777H10.3092H10.2406H10.1719H10.103H10.0341H9.9651H9.89597H9.82674H9.75741H9.68798H9.61843H9.54879H9.47904H9.40918H9.33921H9.26914H9.19896H9.12867H9.05826H8.98775H8.91713H8.8464H8.77555H8.70459H8.63351H8.56232H8.49102H8.4196H8.34807H8.27641H8.20464H8.13276H8.06075H7.98862H7.91638H7.84401H7.77152H7.69891H7.62617H7.55332H7.48034H7.40723H7.334H7.26064H7.18716H7.11355H7.03981H6.96594H6.89195H6.81782H6.74356H6.66918H6.59466H6.52H6.44522H6.3703H6.29525H6.22006H6.14474H6.06928H5.99368H5.91795H5.84208H5.76607H5.68992H5.61363H5.5372H5.46062H5.38391H5.30705H5.23005H5.15291H5.07562H4.99819H4.92061H4.84288H4.76501H4.68699H4.60882H4.5305H4.45203H4.37342H4.29465H4.21573H4.13665H4.05743H3.97805H3.89851H3.81882H3.73898H3.65898H3.57882H3.49851H3.41804H3.33741H3.25662H3.17566H3.09455H3.01328H2.93185H2.85025H2.76849H2.68657H2.60448H2.52223H2.43981H2.35722H2.27447H2.19155C2.04893 168.5 1.96927 168.466 1.91645 168.433C1.85532 168.394 1.77792 168.322 1.702 168.192C1.53613 167.906 1.46078 167.48 1.51975 167.111C2.92347 158.322 10.6474 151.574 19.9925 151.574C29.3375 151.574 37.0615 158.322 38.4652 167.111C38.5751 167.799 38.4037 168.054 38.3124 168.149C38.1888 168.278 37.8364 168.5 36.9935 168.5Z","fill","var(--color-background)","stroke","var(--color-secondary-700)","stroke-width","3"],["cx","34","cy","154","r","10.5","fill","var(--color-background)","stroke","var(--color-secondary-700)","stroke-width","3"],["d","M50.9935 181.5H50.9126H50.8318H50.7512H50.6708H50.5905H50.5104H50.4304H50.3506H50.2709H50.1914H50.1121H50.0329H49.9538H49.8749H49.7962H49.7176H49.6392H49.5609H49.4828H49.4048H49.3269H49.2492H49.1717H49.0943H49.017H48.9399H48.8629H48.7861H48.7094H48.6329H48.5565H48.4802H48.4041H48.3281H48.2523H48.1766H48.101H48.0256H47.9503H47.8751H47.8001H47.7252H47.6504H47.5758H47.5013H47.4269H47.3527H47.2786H47.2046H47.1308H47.0571H46.9835H46.91H46.8367H46.7635H46.6904H46.6175H46.5446H46.4719H46.3993H46.3269H46.2545H46.1823H46.1102H46.0382H45.9664H45.8946H45.823H45.7515H45.6801H45.6088H45.5376H45.4666H45.3956H45.3248H45.2541H45.1835H45.113H45.0426H44.9724H44.9022H44.8322H44.7622H44.6924H44.6226H44.553H44.4835H44.4141H44.3448H44.2756H44.2065H44.1375H44.0686H43.9998H43.9311H43.8625H43.794H43.7256H43.6572H43.589H43.5209H43.4529H43.385H43.3172H43.2494H43.1818H43.1142H43.0468H42.9794H42.9121H42.8449H42.7779H42.7108H42.6439H42.5771H42.5103H42.4437H42.3771H42.3106H42.2442H42.1779H42.1117H42.0455H41.9794H41.9134H41.8475H41.7817H41.7159H41.6502H41.5846H41.5191H41.4537H41.3883H41.323H41.2578H41.1926H41.1275H41.0625H40.9976H40.9328H40.868H40.8032H40.7386H40.674H40.6095H40.5451H40.4807H40.4164H40.3521H40.2879H40.2238H40.1598H40.0958H40.0318H39.968H39.9042H39.8404H39.7767H39.7131H39.6495H39.586H39.5226H39.4592H39.3958H39.3325H39.2693H39.2061H39.143H39.0799H39.0169H38.9539H38.891H38.8281H38.7653H38.7025H38.6398H38.5771H38.5145H38.4519H38.3894H38.3269H38.2645H38.202H38.1397H38.0774H38.0151H37.9528H37.8907H37.8285H37.7664H37.7043H37.6423H37.5803H37.5183H37.4564H37.3945H37.3326H37.2708H37.209H37.1472H37.0855H37.0238H36.9621H36.9005H36.8389H36.7773H36.7157H36.6542H36.5927H36.5312H36.4698H36.4084H36.347H36.2856H36.2243H36.1629H36.1016H36.0404H35.9791H35.9178H35.8566H35.7954H35.7342H35.6731H35.6119H35.5508H35.4896H35.4285H35.3674H35.3064H35.2453H35.1842H35.1232H35.0622H35.0011H34.9401H34.8791H34.8181H34.7571H34.6962H34.6352H34.5742H34.5133H34.4523H34.3913H34.3304H34.2694H34.2085H34.1475H34.0866H34.0257H33.9647H33.9038H33.8428H33.7819H33.7209H33.6599H33.599H33.538H33.477H33.416H33.3551H33.2941H33.2331H33.172H33.111H33.05H32.9889H32.9279H32.8668H32.8057H32.7446H32.6835H32.6224H32.5612H32.5001H32.4389H32.3777H32.3165H32.2553H32.194H32.1328H32.0715H32.0102H31.9489H31.8875H31.8261H31.7647H31.7033H31.6418H31.5804H31.5189H31.4573H31.3958H31.3342H31.2726H31.2109H31.1493H31.0876H31.0258H30.9641H30.9023H30.8404H30.7786H30.7166H30.6547H30.5927H30.5307H30.4687H30.4066H30.3445H30.2823H30.2201H30.1578H30.0956H30.0332H29.9709H29.9084H29.846H29.7835H29.7209H29.6583H29.5957H29.533H29.4703H29.4075H29.3447H29.2818H29.2189H29.1559H29.0929H29.0298H28.9666H28.9034H28.8402H28.7769H28.7135H28.6501H28.5867H28.5231H28.4596H28.3959H28.3322H28.2685H28.2046H28.1408H28.0768H28.0128H27.9487H27.8846H27.8204H27.7562H27.6918H27.6274H27.563H27.4985H27.4339H27.3692H27.3045H27.2397H27.1748H27.1098H27.0448H26.9797H26.9146H26.8493H26.784H26.7186H26.6532H26.5876H26.522H26.4563H26.3905H26.3247H26.2588H26.1928H26.1267H26.0605H25.9942H25.9279H25.8615H25.795H25.7284H25.6617H25.5949H25.5281H25.4611H25.3941H25.327H25.2598H25.1925H25.1251H25.0576H24.9901H24.9224H24.8547H24.7868H24.7189H24.6508H24.5827H24.5145H24.4461H24.3777H24.3092H24.2406H24.1719H24.103H24.0341H23.9651H23.896H23.8267H23.7574H23.688H23.6184H23.5488H23.479H23.4092H23.3392H23.2691H23.199H23.1287H23.0583H22.9878H22.9171H22.8464H22.7755H22.7046H22.6335H22.5623H22.491H22.4196H22.3481H22.2764H22.2046H22.1328H22.0607H21.9886H21.9164H21.844H21.7715H21.6989H21.6262H21.5533H21.4803H21.4072H21.334H21.2606H21.1872H21.1135H21.0398H20.9659H20.8919H20.8178H20.7436H20.6692H20.5947H20.52H20.4452H20.3703H20.2952H20.2201H20.1447H20.0693H19.9937H19.9179H19.8421H19.7661H19.6899H19.6136H19.5372H19.4606H19.3839H19.3071H19.2301H19.1529H19.0756H18.9982H18.9206H18.8429H18.765H18.687H18.6088H18.5305H18.452H18.3734H18.2946H18.2157H18.1367H18.0574H17.978H17.8985H17.8188H17.739H17.659H17.5788H17.4985H17.418H17.3374H17.2566H17.1757H17.0946H17.0133H16.9318H16.8503H16.7685H16.6866H16.6045H16.5222H16.4398H16.3572H16.2745H16.1915C16.045 181.5 15.9628 181.465 15.9092 181.432C15.8479 181.394 15.772 181.324 15.6978 181.198C15.5354 180.922 15.4617 180.509 15.5193 180.153C16.9196 171.496 24.6325 164.823 33.9925 164.823C43.3524 164.823 51.0654 171.496 52.4657 180.153C52.574 180.823 52.4052 181.064 52.319 181.152C52.1962 181.279 51.8413 181.5 50.9935 181.5Z","fill","var(--color-background)","stroke","var(--color-secondary-700)","stroke-width","3"]],template:function(e,t){1&e&&(o["ɵɵnamespaceSVG"](),o["ɵɵelementStart"](0,"svg",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"path",1),o["ɵɵtext"](3,"\n  "),o["ɵɵelement"](4,"path",2),o["ɵɵtext"](5,"\n  "),o["ɵɵelement"](6,"path",3),o["ɵɵtext"](7,"\n  "),o["ɵɵelement"](8,"path",4),o["ɵɵtext"](9,"\n  "),o["ɵɵelement"](10,"path",5),o["ɵɵtext"](11,"\n  "),o["ɵɵelement"](12,"rect",6),o["ɵɵtext"](13,"\n  "),o["ɵɵelement"](14,"path",7),o["ɵɵtext"](15,"\n  "),o["ɵɵelementStart"](16,"mask",8),o["ɵɵtext"](17,"\n    "),o["ɵɵelement"](18,"rect",9),o["ɵɵtext"](19,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n  "),o["ɵɵelement"](21,"rect",10),o["ɵɵtext"](22,"\n  "),o["ɵɵelement"](23,"path",11),o["ɵɵtext"](24,"\n  "),o["ɵɵelement"](25,"circle",12),o["ɵɵtext"](26,"\n  "),o["ɵɵelement"](27,"path",13),o["ɵɵtext"](28,"\n  "),o["ɵɵelement"](29,"circle",14),o["ɵɵtext"](30,"\n  "),o["ɵɵelement"](31,"path",15),o["ɵɵtext"](32,"\n  "),o["ɵɵelement"](33,"circle",16),o["ɵɵtext"](34,"\n  "),o["ɵɵelement"](35,"path",17),o["ɵɵtext"](36,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n"))},encapsulation:2}),function(e){e[e.Free=0]="Free",e[e.Families=1]="Families",e[e.Teams=2]="Teams",e[e.Enterprise=3]="Enterprise"}(hS||(hS={}));class AS{}class OS{}class TS{constructor(e,t){this.clientOwnerEmail=e,this.organizationCreateRequest=t}}var BS=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function MS(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",2),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",3),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function DS(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"form",4,5),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](8,"\n    "),o["ɵɵelementStart"](9,"div",6),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"label",7),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n      "),o["ɵɵelement"](15,"input",8),o["ɵɵtext"](16,"\n      "),o["ɵɵelementStart"](17,"small",9),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n    "),o["ɵɵelementStart"](22,"button",10),o["ɵɵtext"](23,"\n      "),o["ɵɵelement"](24,"i",11),o["ɵɵpipe"](25,"i18n"),o["ɵɵtext"](26,"\n      "),o["ɵɵelementStart"](27,"span"),o["ɵɵtext"](28),o["ɵɵpipe"](29,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n"),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵreference"](7),t=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,7,"uploadLicenseFileOrg")),o["ɵɵadvance"](3),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,9,"licenseFile")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](19,11,"licenseFileDesc","bitwarden_organization_license.json")),o["ɵɵadvance"](4),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](25,14,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](29,16,"submit"))}}function FS(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind1"](2,1,"onPremHostingOptional"),""))}function RS(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind1"](2,1,"includeSsoAuthentication"),""))}function US(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind1"](2,1,"includeEnterprisePolicies"),""))}function zS(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2).$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("•\n          ",o["ɵɵpipeBind2"](2,1,"xDayFreeTrial",e.trialPeriodDays),"\n        ")}}function NS(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"small"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵtemplate"](6,FS,3,3,"small",0),o["ɵɵtext"](7,"\n        "),o["ɵɵtemplate"](8,RS,3,3,"small",0),o["ɵɵtext"](9,"\n        "),o["ɵɵtemplate"](10,US,3,3,"small",0),o["ɵɵtext"](11,"\n        "),o["ɵɵtemplate"](12,zS,3,4,"small",0),o["ɵɵtext"](13,"\n      "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind1"](4,5,"includeAllTeamsFeatures"),""),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.hasSelfHost),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasSso),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasPolicies),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.trialPeriodDays&&t.createOrganization)}}function VS(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2).$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind2"](2,1,"limitedUsers",e.maxUsers),"")}}function HS(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2).$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind2"](2,1,"addShareLimitedUsers",e.maxUsers),"")}}function jS(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind1"](2,1,"addShareUnlimitedUsers"),""))}function LS(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2).$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind2"](2,1,"limitedCollections",e.maxCollections),"")}}function KS(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2).$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind2"](2,1,"addShareLimitedUsers",e.maxAdditionalSeats),"")}}function GS(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind1"](2,1,"createUnlimitedCollections"),""))}function qS(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2).$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind2"](2,1,"gbEncryptedFileStorage",e.baseStorageGb+"GB"),"")}}function _S(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind1"](2,1,"controlAccessWithGroups"),""))}function $S(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind1"](2,1,"trackAuditLogs"),""))}function WS(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind1"](2,1,"syncUsersFromDirectory"),""))}function QS(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind1"](2,1,"onPremHostingOptional"),""))}function YS(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind1"](2,1,"usersGetPremium"),""))}function ZS(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("• ",o["ɵɵpipeBind1"](2,1,"priorityCustomerSupport"),""))}function JS(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2).$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("•\n          ",o["ɵɵpipeBind2"](2,1,"xDayFreeTrial",e.trialPeriodDays),"\n        ")}}function XS(e,t){if(1&e&&(o["ɵɵtext"](0,"\n        "),o["ɵɵtemplate"](1,VS,3,4,"small",0),o["ɵɵtext"](2,"\n        "),o["ɵɵtemplate"](3,HS,3,4,"small",0),o["ɵɵtext"](4,"\n        "),o["ɵɵtemplate"](5,jS,3,3,"small",0),o["ɵɵtext"](6,"\n        "),o["ɵɵtemplate"](7,LS,3,4,"small",0),o["ɵɵtext"](8,"\n        "),o["ɵɵtemplate"](9,KS,3,4,"small",0),o["ɵɵtext"](10,"\n        "),o["ɵɵtemplate"](11,GS,3,3,"small",0),o["ɵɵtext"](12,"\n        "),o["ɵɵtemplate"](13,qS,3,4,"small",0),o["ɵɵtext"](14,"\n        "),o["ɵɵtemplate"](15,_S,3,3,"small",0),o["ɵɵtext"](16,"\n        "),o["ɵɵtemplate"](17,$S,3,3,"small",0),o["ɵɵtext"](18,"\n        "),o["ɵɵtemplate"](19,WS,3,3,"small",0),o["ɵɵtext"](20,"\n        "),o["ɵɵtemplate"](21,QS,3,3,"small",0),o["ɵɵtext"](22,"\n        "),o["ɵɵtemplate"](23,YS,3,3,"small",0),o["ɵɵtext"](24,"\n        "),o["ɵɵtemplate"](25,ZS,3,3,"small",0),o["ɵɵtext"](26,"\n        "),o["ɵɵtemplate"](27,JS,3,4,"small",0),o["ɵɵtext"](28,"\n      ")),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](2);o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.product==t.productTypes.Free),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.product!=t.productTypes.Free&&e.maxUsers),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.maxUsers),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.maxCollections),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.maxAdditionalSeats),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.maxCollections),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.baseStorageGb),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasGroups),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasApi),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasDirectory),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasSelfHost),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.usersGetPremium),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.product!=t.productTypes.Free),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.trialPeriodDays&&t.createOrganization)}}function eb(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵpipe"](3,"currency"),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](3).$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate3"]("\n            ",o["ɵɵpipeBind1"](2,3,"additionalUsers").toLowerCase(),"\n            ",o["ɵɵpipeBind2"](3,5,e.seatPrice/12,"$")," /",o["ɵɵpipeBind1"](4,8,"month"),"\n          ")}}function tb(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1),o["ɵɵpipe"](2,"currency"),o["ɵɵpipe"](3,"i18n"),o["ɵɵpipe"](4,"i18n"),o["ɵɵtemplate"](5,eb,5,10,"ng-container",0),o["ɵɵtext"](6,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2).$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate3"]("\n          ",o["ɵɵpipeBind2"](2,4,e.basePrice/12,"$")," /",o["ɵɵpipeBind1"](3,7,"month"),",\n          ",o["ɵɵpipeBind2"](4,9,"includesXUsers",e.baseSeats),"\n          "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.hasAdditionalSeatsOption)}}function nb(e,t){if(1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1,"\n        "),o["ɵɵtemplate"](2,tb,7,12,"ng-container",0),o["ɵɵtext"](3,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.basePrice&&!t.acceptingSponsorship)}}function ib(e,t){if(1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵpipe"](3,"currency"),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate2"]("\n        ",o["ɵɵpipeBind2"](2,2,"costPerUser",o["ɵɵpipeBind2"](3,5,e.seatPrice/12,"$"))," /",o["ɵɵpipeBind1"](4,8,"month"),"\n      ")}}function rb(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"freeForever")))}function ob(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",19),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"input",20),o["ɵɵlistener"]("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).changedProduct()})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"label",21),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementStart"](7,"small",22),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵtemplate"](11,NS,14,7,"ng-container",23),o["ɵɵtext"](12,"\n      "),o["ɵɵtemplate"](13,XS,29,14,"ng-template",null,24,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](15,"\n      "),o["ɵɵtemplate"](16,nb,4,1,"span",0),o["ɵɵtext"](17,"\n      "),o["ɵɵtemplate"](18,ib,5,10,"span",0),o["ɵɵtext"](19,"\n      "),o["ɵɵtemplate"](20,rb,3,3,"span",0),o["ɵɵtext"](21,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵreference"](14),i=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("id","product",e.product,""),o["ɵɵproperty"]("value",e.product),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("for","product",e.product,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](6,10,e.nameLocalizationKey),"\n      "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](9,12,e.descriptionLocalizationKey,"1")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.product===i.productTypes.Enterprise)("ngIfElse",n),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.product!=i.productTypes.Free),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.basePrice&&e.hasAdditionalSeatsOption),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.product==i.productTypes.Free)}}function ab(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"h2",14),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",26),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"div",42),o["ɵɵtext"](9,"\n          "),o["ɵɵelementStart"](10,"label",43),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n          "),o["ɵɵelement"](14,"input",44),o["ɵɵpipe"](15,"i18n"),o["ɵɵtext"](16,"\n          "),o["ɵɵelementStart"](17,"small",30),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n    "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,4,"users")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,6,"userSeats")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](15,8,"userSeatsDesc")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](19,10,"userSeatsHowManyDesc")))}function sb(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",26),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",27),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"label",43),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelement"](8,"input",45),o["ɵɵpipe"](9,"i18n"),o["ɵɵtext"](10,"\n        "),o["ɵɵelementStart"](11,"small",30),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵpipe"](14,"currency"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n    "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,3,"additionalUserSeats")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](9,5,"userSeatsDesc")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind3"](13,7,"userSeatsAdditionalDesc",e.selectedPlan.baseSeats,o["ɵɵpipeBind2"](14,11,e.seatPriceMonthly(e.selectedPlan),"$")))}}function lb(e,t){1&e&&(o["ɵɵelementStart"](0,"div",27),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"div",46),o["ɵɵtext"](3,"\n          "),o["ɵɵelement"](4,"input",47),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"label",48),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n        "),o["ɵɵelementStart"](11,"small",30),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵpipe"](14,"currency"),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n      "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,2,"premiumAccess")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind3"](13,4,"premiumAccessDesc",o["ɵɵpipeBind2"](14,8,3.33,"$"),o["ɵɵpipeBind1"](15,11,"month"))))}function db(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"span",51),o["ɵɵtext"](3),o["ɵɵpipe"](4,"currency"),o["ɵɵelementEnd"](),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](3).$implicit;o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](4,2,e.basePrice,"$")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](6,5,"freeWithSponsorship"),"\n            ")}}function cb(e,t){if(1&e&&(o["ɵɵtext"](0),o["ɵɵpipe"](1,"currency"),o["ɵɵpipe"](2,"i18n")),2&e){const e=o["ɵɵnextContext"](3).$implicit;o["ɵɵtextInterpolate2"]("\n              ",o["ɵɵpipeBind2"](1,2,e.basePrice,"$"),"\n              /",o["ɵɵpipeBind1"](2,5,"year"),"\n            ")}}function pb(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵpipe"](3,"currency"),o["ɵɵpipe"](4,"i18n"),o["ɵɵtemplate"](5,db,7,7,"ng-container",23),o["ɵɵtext"](6,"\n            "),o["ɵɵtemplate"](7,cb,3,7,"ng-template",null,50,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](9,"\n          "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵreference"](8),t=o["ɵɵnextContext"](2).$implicit,n=o["ɵɵnextContext"](3);o["ɵɵadvance"](1),o["ɵɵtextInterpolate3"]("\n            ",o["ɵɵpipeBind1"](2,5,"basePrice"),": ",o["ɵɵpipeBind2"](3,7,t.basePrice/12,"$")," × 12\n            ",o["ɵɵpipeBind1"](4,10,"monthAbbr"),"\n            =\n            "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",n.acceptingSponsorship)("ngIfElse",e)}}function ub(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](2,1,"additionalUsers"),":"))}function mb(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](2,1,"users"),":"))}function hb(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1,"\n            "),o["ɵɵtemplate"](2,ub,3,3,"span",0),o["ɵɵtext"](3,"\n            "),o["ɵɵtemplate"](4,mb,3,3,"span",0),o["ɵɵtext"](5),o["ɵɵpipe"](6,"currency"),o["ɵɵpipe"](7,"i18n"),o["ɵɵpipe"](8,"currency"),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2).$implicit,t=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.baseSeats),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.baseSeats),o["ɵɵadvance"](1),o["ɵɵtextInterpolate5"]("\n            ",t.formGroup.controls.additionalSeats.value||0," ×\n            ",o["ɵɵpipeBind2"](6,7,e.seatPrice/12,"$")," × 12\n            ",o["ɵɵpipeBind1"](7,10,"monthAbbr")," = ",o["ɵɵpipeBind2"](8,12,t.seatTotal(e),"$")," /",o["ɵɵpipeBind1"](9,15,"year"),"\n          ")}}function vb(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵpipe"](3,"currency"),o["ɵɵpipe"](4,"i18n"),o["ɵɵpipe"](5,"currency"),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2).$implicit,t=o["ɵɵnextContext"](3);o["ɵɵadvance"](1),o["ɵɵtextInterpolate6"]("\n            ",o["ɵɵpipeBind1"](2,6,"additionalStorageGb"),": ",t.additionalStorage||0," ×\n            ",o["ɵɵpipeBind2"](3,8,e.additionalStoragePricePerGb/12,"$")," × 12\n            ",o["ɵɵpipeBind1"](4,11,"monthAbbr")," =\n            ",o["ɵɵpipeBind2"](5,13,t.additionalStorageTotal(e),"$")," /",o["ɵɵpipeBind1"](6,16,"year"),"\n          ")}}function gb(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵpipe"](3,"currency"),o["ɵɵpipe"](4,"i18n"),o["ɵɵpipe"](5,"currency"),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2).$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate5"]("\n            ",o["ɵɵpipeBind1"](2,5,"premiumAccess"),":\n            ",o["ɵɵpipeBind2"](3,7,e.premiumAccessOptionCost/12,"$")," × 12\n            ",o["ɵɵpipeBind1"](4,10,"monthAbbr"),"\n            =\n            ",o["ɵɵpipeBind2"](5,12,40,"$"),"\n            /",o["ɵɵpipeBind1"](6,15,"year"),"\n          ")}}function fb(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵtemplate"](3,pb,10,12,"small",0),o["ɵɵtext"](4,"\n          "),o["ɵɵtemplate"](5,hb,10,17,"small",0),o["ɵɵtext"](6,"\n          "),o["ɵɵtemplate"](7,vb,7,18,"small",0),o["ɵɵtext"](8,"\n          "),o["ɵɵtemplate"](9,gb,7,17,"small",0),o["ɵɵtext"](10,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](3);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,5,"annually"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.basePrice),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAdditionalSeatsOption),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAdditionalStorageOption),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasPremiumAccessOption&&t.premiumAccessAddon)}}function xb(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵpipe"](3,"currency"),o["ɵɵpipe"](4,"i18n"),o["ɵɵpipe"](5,"currency"),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2).$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate5"]("\n            ",o["ɵɵpipeBind1"](2,5,"basePrice"),": ",o["ɵɵpipeBind2"](3,7,e.basePrice,"$"),"\n            ",o["ɵɵpipeBind1"](4,10,"monthAbbr"),"\n            =\n            ",o["ɵɵpipeBind2"](5,12,e.basePrice,"$"),"\n            /",o["ɵɵpipeBind1"](6,15,"month"),"\n          ")}}function yb(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](2,1,"additionalUsers"),":"))}function Sb(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](2,1,"users"),":"))}function bb(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1,"\n            "),o["ɵɵtemplate"](2,yb,3,3,"span",0),o["ɵɵtext"](3,"\n            "),o["ɵɵtemplate"](4,Sb,3,3,"span",0),o["ɵɵtext"](5),o["ɵɵpipe"](6,"currency"),o["ɵɵpipe"](7,"i18n"),o["ɵɵpipe"](8,"currency"),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2).$implicit,t=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.baseSeats),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.baseSeats),o["ɵɵadvance"](1),o["ɵɵtextInterpolate5"]("\n            ",t.formGroup.controls.additionalSeats.value||0," ×\n            ",o["ɵɵpipeBind2"](6,7,e.seatPrice,"$")," ",o["ɵɵpipeBind1"](7,10,"monthAbbr")," =\n            ",o["ɵɵpipeBind2"](8,12,t.seatTotal(e),"$")," /",o["ɵɵpipeBind1"](9,15,"month"),"\n          ")}}function wb(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵpipe"](3,"currency"),o["ɵɵpipe"](4,"i18n"),o["ɵɵpipe"](5,"currency"),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2).$implicit,t=o["ɵɵnextContext"](3);o["ɵɵadvance"](1),o["ɵɵtextInterpolate6"]("\n            ",o["ɵɵpipeBind1"](2,6,"additionalStorageGb"),":\n            ",t.formGroup.controls.additionalStorage.value||0," ×\n            ",o["ɵɵpipeBind2"](3,8,e.additionalStoragePricePerGb,"$"),"\n            ",o["ɵɵpipeBind1"](4,11,"monthAbbr")," =\n            ",o["ɵɵpipeBind2"](5,13,t.additionalStorageTotal(e),"$")," /",o["ɵɵpipeBind1"](6,16,"month"),"\n          ")}}function Ib(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵpipe"](3,"currency"),o["ɵɵpipe"](4,"i18n"),o["ɵɵpipe"](5,"currency"),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2).$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate5"]("\n            ",o["ɵɵpipeBind1"](2,5,"premiumAccess"),":\n            ",o["ɵɵpipeBind2"](3,7,e.premiumAccessOptionCost,"$")," ",o["ɵɵpipeBind1"](4,10,"monthAbbr")," =\n            ",o["ɵɵpipeBind2"](5,12,40,"$"),"\n            /",o["ɵɵpipeBind1"](6,15,"month"),"\n          ")}}function Cb(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵtemplate"](3,xb,7,17,"small",0),o["ɵɵtext"](4,"\n          "),o["ɵɵtemplate"](5,bb,10,17,"small",0),o["ɵɵtext"](6,"\n          "),o["ɵɵtemplate"](7,wb,7,18,"small",0),o["ɵɵtext"](8,"\n          "),o["ɵɵtemplate"](9,Ib,7,17,"small",0),o["ɵɵtext"](10,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](3);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,5,"monthly"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.basePrice),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAdditionalSeatsOption),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAdditionalStorageOption),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasPremiumAccessOption&&t.formGroup.controls.premiumAccessAddon.value)}}function Eb(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",19),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"input",49),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"label",21),o["ɵɵtext"](5,"\n        "),o["ɵɵtemplate"](6,fb,11,7,"ng-container",0),o["ɵɵtext"](7,"\n        "),o["ɵɵtemplate"](8,Cb,11,7,"ng-container",0),o["ɵɵtext"](9,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("id","interval",e.type,""),o["ɵɵproperty"]("value",e.type),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("for","interval",e.type,""),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.isAnnual),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.isAnnual)}}function kb(e,t){1&e&&o["ɵɵelement"](0,"app-payment",52),2&e&&o["ɵɵproperty"]("hideCredit",!0)}function Pb(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"app-payment",53),o["ɵɵtext"](3,"\n    "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵproperty"]("showMethods",!1))}function Ab(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n    "),o["ɵɵtemplate"](2,ab,23,12,"ng-container",0),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"h2",14),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵtemplate"](8,sb,17,14,"div",25),o["ɵɵtext"](9,"\n    "),o["ɵɵelementStart"](10,"div",26),o["ɵɵtext"](11,"\n      "),o["ɵɵelementStart"](12,"div",27),o["ɵɵtext"](13,"\n        "),o["ɵɵelementStart"](14,"label",28),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelement"](18,"input",29),o["ɵɵpipe"](19,"i18n"),o["ɵɵtext"](20,"\n        "),o["ɵɵelementStart"](21,"small",30),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵpipe"](24,"currency"),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n    "),o["ɵɵelementStart"](29,"div",26),o["ɵɵtext"](30,"\n      "),o["ɵɵtemplate"](31,lb,17,13,"div",31),o["ɵɵtext"](32,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n    "),o["ɵɵelementStart"](34,"h2",32),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n    "),o["ɵɵtemplate"](38,Eb,11,5,"div",15),o["ɵɵtext"](39,"\n    "),o["ɵɵelement"](40,"hr",33),o["ɵɵtext"](41,"\n    "),o["ɵɵelementStart"](42,"h2",34),o["ɵɵtext"](43),o["ɵɵpipe"](44,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n    "),o["ɵɵelementStart"](46,"small",35),o["ɵɵtext"](47),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n    "),o["ɵɵtemplate"](49,kb,1,1,"app-payment",36),o["ɵɵtext"](50,"\n    "),o["ɵɵelementStart"](51,"app-tax-info",37),o["ɵɵlistener"]("onCountryChanged",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).changedCountry()})),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n    "),o["ɵɵelementStart"](53,"div",38),o["ɵɵtext"](54,"\n      "),o["ɵɵelementStart"](55,"div",39),o["ɵɵtext"](56),o["ɵɵpipe"](57,"i18n"),o["ɵɵpipe"](58,"currency"),o["ɵɵelement"](59,"br"),o["ɵɵtext"](60,"\n        "),o["ɵɵelementContainerStart"](61),o["ɵɵtext"](62),o["ɵɵpipe"](63,"i18n"),o["ɵɵpipe"](64,"currency"),o["ɵɵelementContainerEnd"](),o["ɵɵtext"](65,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n      "),o["ɵɵelement"](67,"hr",40),o["ɵɵtext"](68,"\n      "),o["ɵɵelementStart"](69,"p",41),o["ɵɵtext"](70,"\n        "),o["ɵɵelementStart"](71,"strong"),o["ɵɵtext"](72),o["ɵɵpipe"](73,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](74),o["ɵɵpipe"](75,"currency"),o["ɵɵpipe"](76,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](77,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](78,"\n    "),o["ɵɵtemplate"](79,Pb,4,1,"ng-container",0),o["ɵɵtext"](80,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.selectedPlan.hasAdditionalSeatsOption&&!e.selectedPlan.baseSeats),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,20,"addons")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.selectedPlan.hasAdditionalSeatsOption&&e.selectedPlan.baseSeats),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](16,22,"additionalStorageGb")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](19,24,"additionalStorageGbDesc")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind4"](23,26,"additionalStorageIntervalDesc","1 GB",o["ɵɵpipeBind2"](24,31,e.additionalStoragePriceMonthly(e.selectedPlan),"$"),o["ɵɵpipeBind1"](25,34,"month"))),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngIf",e.selectedPlan.hasPremiumAccessOption),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](36,36,"summary")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngForOf",e.selectablePlans),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](44,38,e.createOrganization?"paymentInformation":"billingInformation"),"\n    "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n      ",e.paymentDesc,"\n    "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.createOrganization),o["ɵɵadvance"](7),o["ɵɵtextInterpolate2"]("\n        ",o["ɵɵpipeBind1"](57,40,"planPrice"),": ",o["ɵɵpipeBind2"](58,42,e.subtotal,"USD $"),"\n        "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate2"]("\n          ",o["ɵɵpipeBind1"](63,45,"estimatedTax"),": ",o["ɵɵpipeBind2"](64,47,e.taxCharges,"USD $"),"\n        "),o["ɵɵadvance"](10),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](73,50,"total"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate2"](" ",o["ɵɵpipeBind2"](75,52,e.total,"USD $"),"/",o["ɵɵpipeBind1"](76,55,e.selectedPlanInterval),"\n      "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!e.createOrganization)}}function Ob(e,t){1&e&&(o["ɵɵelementStart"](0,"div",17),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"app-callout",54),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵproperty"]("type","error"),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,2,"singleOrgBlockCreateMessage")))}function Tb(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",55),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cancel()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](2,1,"cancel"),"\n    "))}function Bb(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",12,5),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"app-org-info",13),o["ɵɵlistener"]("changedBusinessOwned",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().changedOwnedBusiness()})),o["ɵɵelementEnd"](),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"h2",14),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵtemplate"](9,ob,23,15,"div",15),o["ɵɵtext"](10,"\n  "),o["ɵɵtemplate"](11,Ab,81,57,"div",0),o["ɵɵtext"](12,"\n  "),o["ɵɵtemplate"](13,Ob,6,4,"div",16),o["ɵɵtext"](14,"\n  "),o["ɵɵelementStart"](15,"div",17),o["ɵɵtext"](16,"\n    "),o["ɵɵelementStart"](17,"button",10),o["ɵɵtext"](18,"\n      "),o["ɵɵelement"](19,"i",11),o["ɵɵpipe"](20,"i18n"),o["ɵɵtext"](21,"\n      "),o["ɵɵelementStart"](22,"span"),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n    "),o["ɵɵtemplate"](27,Tb,3,3,"button",18),o["ɵɵtext"](28,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵproperty"]("formGroup",t.formGroup)("appApiAction",t.formPromise),o["ɵɵadvance"](3),o["ɵɵproperty"]("formGroup",t.formGroup)("createOrganization",t.createOrganization)("isProvider",!!t.providerId)("acceptingSponsorship",t.acceptingSponsorship),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,14,"chooseYourPlan")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngForOf",t.selectableProducts),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.formGroup.controls.product.value!==t.productTypes.Free),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.singleOrgPolicyBlock),o["ɵɵadvance"](4),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](20,16,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](24,18,"submit")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.showCancel)}}class Mb{constructor(e,t,n,i,r,a,s,l,c,p,u){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.cryptoService=i,this.router=r,this.syncService=a,this.policyService=s,this.organizationService=l,this.logService=c,this.messagingService=p,this.formBuilder=u,this.showFree=!0,this.showCancel=!1,this.acceptingSponsorship=!1,this.product=hS.Free,this.plan=sS.Free,this.onSuccess=new o.EventEmitter,this.onCanceled=new o.EventEmitter,this.loading=!0,this.selfHosted=!1,this.productTypes=hS,this.singleOrgPolicyBlock=!1,this.discount=0,this.formGroup=this.formBuilder.group({name:["",[d.Validators.required]],billingEmail:["",[d.Validators.required,d.Validators.email]],businessOwned:[!1],premiumAccessAddon:[!1],additionalStorage:[0,[d.Validators.min(0),d.Validators.max(99)]],additionalSeats:[0,[d.Validators.min(0),d.Validators.max(1e5)]],clientOwnerEmail:["",[d.Validators.email]],businessName:[""],plan:[this.plan],product:[this.product]}),this.selfHosted=n.isSelfHost()}ngOnInit(){return BS(this,void 0,void 0,(function*(){if(!this.selfHosted){const e=yield this.apiService.getPlans();this.plans=e.data,this.product!==hS.Enterprise&&this.product!==hS.Teams||this.formGroup.controls.businessOwned.setValue(!0)}this.providerId&&(this.formGroup.controls.businessOwned.setValue(!0),this.changedOwnedBusiness()),this.createOrganization||(this.formGroup.controls.product.setValue(hS.Families),this.changedProduct()),this.loading=!1}))}get createOrganization(){return null==this.organizationId}get selectedPlan(){return this.plans.find((e=>e.type===this.formGroup.controls.plan.value))}get selectedPlanInterval(){return this.selectedPlan.isAnnual?"year":"month"}get selectableProducts(){let e=this.plans.filter((e=>e.type!==sS.Custom));if(this.formGroup.controls.businessOwned.value&&(e=e.filter((e=>e.canBeUsedByBusiness))),this.showFree||(e=e.filter((e=>e.product!==hS.Free))),e=e.filter((e=>!e.legacyYear&&!e.disabled&&(e.isAnnual||e.product===this.productTypes.Free))),this.acceptingSponsorship){const t=this.plans.find((e=>e.type===sS.FamiliesAnnually));this.discount=t.basePrice,e=[t]}return e}get selectablePlans(){return this.plans.filter((e=>!e.legacyYear&&!e.disabled&&e.product===this.formGroup.controls.product.value))}additionalStoragePriceMonthly(e){return e.isAnnual?e.additionalStoragePricePerGb/12:e.additionalStoragePricePerGb}seatPriceMonthly(e){return e.isAnnual?e.seatPrice/12:e.seatPrice}additionalStorageTotal(e){return e.hasAdditionalStorageOption?e.additionalStoragePricePerGb*Math.abs(this.formGroup.controls.additionalStorage.value||0):0}seatTotal(e){return e.hasAdditionalSeatsOption?e.seatPrice*Math.abs(this.formGroup.controls.additionalSeats.value||0):0}get subtotal(){let e=this.selectedPlan.basePrice;return this.selectedPlan.hasAdditionalSeatsOption&&this.formGroup.controls.additionalSeats.value&&(e+=this.seatTotal(this.selectedPlan)),this.selectedPlan.hasAdditionalStorageOption&&this.formGroup.controls.additionalStorage.value&&(e+=this.additionalStorageTotal(this.selectedPlan)),this.selectedPlan.hasPremiumAccessOption&&this.formGroup.controls.premiumAccessAddon.value&&(e+=this.selectedPlan.premiumAccessOptionPrice),e-this.discount}get freeTrial(){return null!=this.selectedPlan.trialPeriodDays}get taxCharges(){return null!=this.taxComponent&&null!=this.taxComponent.taxRate?this.taxComponent.taxRate/100*this.subtotal:0}get total(){return this.subtotal+this.taxCharges||0}get paymentDesc(){return this.acceptingSponsorship?this.i18nService.t("paymentSponsored"):this.freeTrial&&this.createOrganization?this.i18nService.t("paymentChargedWithTrial"):this.i18nService.t("paymentCharged",this.i18nService.t(this.selectedPlanInterval))}changedProduct(){this.formGroup.controls.plan.setValue(this.selectablePlans[0].type),this.selectedPlan.hasPremiumAccessOption||this.formGroup.controls.premiumAccessAddon.setValue(!1),this.selectedPlan.hasAdditionalStorageOption||this.formGroup.controls.additionalStorage.setValue(0),this.selectedPlan.hasAdditionalSeatsOption?this.formGroup.controls.additionalSeats.value||this.selectedPlan.baseSeats||!this.selectedPlan.hasAdditionalSeatsOption||this.formGroup.controls.additionalSeats.setValue(1):this.formGroup.controls.additionalSeats.setValue(0)}changedOwnedBusiness(){this.formGroup.controls.businessOwned.value&&!this.selectedPlan.canBeUsedByBusiness&&(this.formGroup.controls.product.setValue(hS.Teams),this.formGroup.controls.plan.setValue(sS.TeamsAnnually))}changedCountry(){this.paymentComponent.hideBank="US"!==this.taxComponent.taxInfo.country,this.paymentComponent.hideBank&&this.paymentComponent.method===Xx.BankAccount&&(this.paymentComponent.method=Xx.Card,this.paymentComponent.changeMethod())}cancel(){this.onCanceled.emit()}submit(){return BS(this,void 0,void 0,(function*(){if(this.singleOrgPolicyBlock=yield this.userHasBlockingSingleOrgPolicy(),!this.singleOrgPolicyBlock)try{const e=()=>BS(this,void 0,void 0,(function*(){let e=null;if(this.createOrganization){const t=yield this.cryptoService.makeShareKey(),n=t[0].encryptedString,i=(yield this.cryptoService.encrypt(this.i18nService.t("defaultCollection"),t[1])).encryptedString,r=yield this.cryptoService.makeKeyPair(t[1]);e=this.selfHosted?yield this.createSelfHosted(n,i,r):yield this.createCloudHosted(n,i,r,t[1]),this.platformUtilsService.showToast("success",this.i18nService.t("organizationCreated"),this.i18nService.t("organizationReadyToGo"))}else e=yield this.updateOrganization(e),this.platformUtilsService.showToast("success",null,this.i18nService.t("organizationUpgraded"));return yield this.apiService.refreshIdentityToken(),yield this.syncService.fullSync(!0),this.acceptingSponsorship||this.router.navigate(["/organizations/"+e]),e}));this.formPromise=e();const t=yield this.formPromise;this.onSuccess.emit({organizationId:t}),this.messagingService.send("organizationCreated",t)}catch(e){this.logService.error(e)}}))}userHasBlockingSingleOrgPolicy(){return BS(this,void 0,void 0,(function*(){return this.policyService.policyAppliesToUser(Kr.M.SingleOrg)}))}updateOrganization(e){return BS(this,void 0,void 0,(function*(){const e=new OS;e.businessName=this.formGroup.controls.businessOwned.value?this.formGroup.controls.businessName.value:null,e.additionalSeats=this.formGroup.controls.additionalSeats.value,e.additionalStorageGb=this.formGroup.controls.additionalStorage.value,e.premiumAccessAddon=this.selectedPlan.hasPremiumAccessOption&&this.formGroup.controls.premiumAccessAddon.value,e.planType=this.selectedPlan.type,e.billingAddressCountry=this.taxComponent.taxInfo.country,e.billingAddressPostalCode=this.taxComponent.taxInfo.postalCode;if(!(yield this.organizationService.get(this.organizationId)).hasPublicAndPrivateKeys){const t=yield this.cryptoService.getOrgKey(this.organizationId),n=yield this.cryptoService.makeKeyPair(t);e.keys=new av(n[0],n[1].encryptedString)}const t=yield this.apiService.postOrganizationUpgrade(this.organizationId,e);return t.success||null==t.paymentIntentClientSecret||(yield this.paymentComponent.handleStripeCardPayment(t.paymentIntentClientSecret,null)),this.organizationId}))}createCloudHosted(e,t,n,i){return BS(this,void 0,void 0,(function*(){const r=new AS;if(r.key=e,r.collectionName=t,r.name=this.formGroup.controls.name.value,r.billingEmail=this.formGroup.controls.billingEmail.value,r.keys=new av(n[0],n[1].encryptedString),this.selectedPlan.type===sS.Free)r.planType=sS.Free;else{const e=yield this.paymentComponent.createPaymentToken();r.paymentToken=e[0],r.paymentMethodType=e[1],r.businessName=this.formGroup.controls.businessOwned.value?this.formGroup.controls.businessName.value:null,r.additionalSeats=this.formGroup.controls.additionalSeats.value,r.additionalStorageGb=this.formGroup.controls.additionalStorage.value,r.premiumAccessAddon=this.selectedPlan.hasPremiumAccessOption&&this.formGroup.controls.premiumAccessAddon.value,r.planType=this.selectedPlan.type,r.billingAddressPostalCode=this.taxComponent.taxInfo.postalCode,r.billingAddressCountry=this.taxComponent.taxInfo.country,this.taxComponent.taxInfo.includeTaxId&&(r.taxIdNumber=this.taxComponent.taxInfo.taxId,r.billingAddressLine1=this.taxComponent.taxInfo.line1,r.billingAddressLine2=this.taxComponent.taxInfo.line2,r.billingAddressCity=this.taxComponent.taxInfo.city,r.billingAddressState=this.taxComponent.taxInfo.state)}if(this.providerId){const e=new TS(this.formGroup.controls.clientOwnerEmail.value,r),t=yield this.cryptoService.getProviderKey(this.providerId);e.organizationCreateRequest.key=(yield this.cryptoService.encrypt(i.key,t)).encryptedString;return(yield this.apiService.postProviderCreateOrganization(this.providerId,e)).organizationId}return(yield this.apiService.postOrganization(r)).id}))}createSelfHosted(e,t,n){return BS(this,void 0,void 0,(function*(){const i=document.getElementById("file").files;if(null==i||0===i.length)throw new Error(this.i18nService.t("selectFile"));const r=new FormData;r.append("license",i[0]),r.append("key",e),r.append("collectionName",t);const o=(yield this.apiService.postOrganizationLicense(r)).id,a=new av(n[0],n[1].encryptedString);return yield this.apiService.postOrganizationKeys(o,a),o}))}}Mb.ɵfac=function(e){return new(e||Mb)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](d.FormBuilder))},Mb.ɵcmp=o["ɵɵdefineComponent"]({type:Mb,selectors:[["app-organization-plans"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](Ay,5),o["ɵɵviewQuery"](Px,5)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.paymentComponent=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.taxComponent=e.first)}},inputs:{organizationId:"organizationId",showFree:"showFree",showCancel:"showCancel",acceptingSponsorship:"acceptingSponsorship",product:"product",plan:"plan",providerId:"providerId"},outputs:{onSuccess:"onSuccess",onCanceled:"onCanceled"},decls:6,vars:3,consts:[[4,"ngIf"],["ngNativeValidate","","class","tw-pt-6",3,"formGroup","appApiAction","ngSubmit",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"form-group"],["for","file"],["type","file","id","file","name","file","required","",1,"form-control-file"],[1,"form-text","text-muted"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["ngNativeValidate","",1,"tw-pt-6",3,"formGroup","appApiAction","ngSubmit"],[3,"formGroup","createOrganization","isProvider","acceptingSponsorship","changedBusinessOwned"],[1,"mt-5"],["class","form-check form-check-block",4,"ngFor","ngForOf"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],[1,"form-check","form-check-block"],["type","radio","name","product","formControlName","product",1,"form-check-input",3,"id","value","change"],[1,"form-check-label",3,"for"],[1,"mb-1"],[4,"ngIf","ngIfElse"],["fullFeatureList",""],["class","row",4,"ngIf"],[1,"row"],[1,"form-group","col-6"],["for","additionalStorage"],["id","additionalStorage","type","number","name","additionalStorageGb","formControlName","additionalStorage","min","0","max","99","step","1",1,"form-control",3,"placeholder"],[1,"text-muted","form-text"],["class","form-group col-6",4,"ngIf"],[1,"spaced-header"],[1,"my-3"],[1,"spaced-header","mb-4"],[1,"text-muted","font-italic","mb-3","d-block"],[3,"hideCredit",4,"ngIf"],[3,"onCountryChanged"],["id","price",1,"my-4"],[1,"text-muted","text-sm"],[1,"my-1","col-3","ml-0"],[1,"text-lg"],[1,"col-6"],["for","additionalSeats"],["id","additionalSeats","type","number","name","additionalSeats","formControlName","additionalSeats","min","1","max","100000","required","",1,"form-control",3,"placeholder"],["id","additionalSeats","type","number","name","additionalSeats","formControlName","additionalSeats","min","0","max","100000",1,"form-control",3,"placeholder"],[1,"form-check"],["id","premiumAccess","type","checkbox","name","premiumAccessAddon","formControlName","premiumAccessAddon",1,"form-check-input"],["for","premiumAccess",1,"form-check-label","bold"],["type","radio","name","plan","formControlName","plan",1,"form-check-input",3,"id","value"],["notAcceptingSponsorship",""],[2,"text-decoration","line-through"],[3,"hideCredit"],[3,"showMethods"],[3,"type"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,MS,9,6,"ng-container",0),o["ɵɵtext"](1,"\n"),o["ɵɵtemplate"](2,DS,33,18,"ng-container",0),o["ɵɵtext"](3,"\n"),o["ɵɵtemplate"](4,Bb,30,20,"form",1),o["ɵɵtext"](5,"\n")),2&e&&(o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.createOrganization&&t.selfHosted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&!t.selfHosted&&t.plans))},directives:[B.NgIf,d.NgControlStatusGroup,d.NgForm,Y.b,d.FormGroupDirective,mr,B.NgForOf,d.RadioControlValueAccessor,d.DefaultValueAccessor,d.NgControlStatus,d.FormControlName,d.NumberValueAccessor,d.MinValidator,d.MaxValidator,Px,d.RequiredValidator,d.CheckboxControlValueAccessor,Ay,Pe.O],pipes:[M.C,B.CurrencyPipe],encapsulation:2});var Db=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Fb{constructor(e){this.logService=e,this.onChanged=new o.EventEmitter,this.onCanceled=new o.EventEmitter,this.defaultUpgradePlan=sS.FamiliesAnnually,this.defaultUpgradeProduct=hS.Families}submit(){return Db(this,void 0,void 0,(function*(){try{this.onChanged.emit()}catch(e){this.logService.error(e)}}))}cancel(){this.onCanceled.emit()}}Fb.ɵfac=function(e){return new(e||Fb)(o["ɵɵdirectiveInject"](L.$))},Fb.ɵcmp=o["ɵɵdefineComponent"]({type:Fb,selectors:[["app-change-plan"]],inputs:{organizationId:"organizationId"},outputs:{onChanged:"onChanged",onCanceled:"onCanceled"},decls:24,vars:14,consts:[[1,"card","card-org-plans"],[1,"card-body"],["type","button",1,"close",3,"appA11yTitle","click"],["aria-hidden","true"],[1,"card-body-header"],[1,"mb-0"],[3,"showFree","showCancel","plan","product","organizationId","onCanceled"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"button",2),o["ɵɵlistener"]("click",(function(){return t.cancel()})),o["ɵɵpipe"](5,"i18n"),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"span",3),o["ɵɵtext"](8,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementStart"](11,"h2",4),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementStart"](15,"p",5),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n    "),o["ɵɵelementStart"](19,"app-organization-plans",6),o["ɵɵlistener"]("onCanceled",(function(){return t.cancel()})),o["ɵɵtext"](20,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](5,8,"cancel")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,10,"changeBillingPlan")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,12,"changeBillingPlanUpgrade")),o["ɵɵadvance"](3),o["ɵɵproperty"]("showFree",!1)("showCancel",!0)("plan",t.defaultUpgradePlan)("product",t.defaultUpgradeProduct)("organizationId",t.organizationId))},directives:[pe,Mb],pipes:[M.C],encapsulation:2});class Rb{constructor(e,t){this.seatAdjustment=e,this.maxAutoscaleSeats=t}}var Ub=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class zb{constructor(e,t,n,i){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.logService=i,this.seatPrice=0,this.interval="year",this.onAdjusted=new o.EventEmitter}ngOnInit(){this.limitSubscription=null!=this.maxAutoscaleSeats,this.newSeatCount=this.currentSeatCount,this.newMaxSeats=this.maxAutoscaleSeats}submit(){return Ub(this,void 0,void 0,(function*(){try{const e=this.newSeatCount-this.currentSeatCount,t=new Rb(e,this.newMaxSeats);this.formPromise=this.apiService.postOrganizationUpdateSubscription(this.organizationId,t),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("subscriptionUpdated"))}catch(e){this.logService.error(e)}this.onAdjusted.emit()}))}limitSubscriptionChanged(){this.limitSubscription||(this.newMaxSeats=null)}get adjustedSeatTotal(){return this.newSeatCount*this.seatPrice}get maxSeatTotal(){return this.newMaxSeats*this.seatPrice}}zb.ɵfac=function(e){return new(e||zb)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$))},zb.ɵcmp=o["ɵɵdefineComponent"]({type:zb,selectors:[["app-adjust-subscription"]],inputs:{organizationId:"organizationId",maxAutoscaleSeats:"maxAutoscaleSeats",currentSeatCount:"currentSeatCount",seatPrice:"seatPrice",interval:"interval"},outputs:{onAdjusted:"onAdjusted"},decls:82,vars:57,consts:[["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"row"],[1,"form-group","col-6"],["for","newSeatCount"],["id","newSeatCount","type","number","name","NewSeatCount","min","0","step","1","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-block","text-muted","mb-4"],[1,"row","mb-4"],[1,"form-group","col-sm"],[1,"form-check"],["id","limitSubscription","type","checkbox","name","LimitSubscription",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","limitSubscription"],[1,"d-block","text-muted"],[1,"row","mb-4",3,"hidden"],["for","maxAutoscaleSeats"],["id","maxAutoscaleSeats","type","number","name","MaxAutoscaleSeats","step","1",1,"form-control","col-6",3,"ngModel","min","required","ngModelChange"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[3,"showMethods"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div"),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",2),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",3),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"label",4),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"input",5),o["ɵɵlistener"]("ngModelChange",(function(e){return t.newSeatCount=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"small",6),o["ɵɵtext"](16,"\n          "),o["ɵɵelementStart"](17,"strong"),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20),o["ɵɵpipe"](21,"currency"),o["ɵɵpipe"](22,"currency"),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n    "),o["ɵɵelementStart"](27,"div",7),o["ɵɵtext"](28,"\n      "),o["ɵɵelementStart"](29,"div",8),o["ɵɵtext"](30,"\n        "),o["ɵɵelementStart"](31,"div",9),o["ɵɵtext"](32,"\n          "),o["ɵɵelementStart"](33,"input",10),o["ɵɵlistener"]("ngModelChange",(function(e){return t.limitSubscription=e}))("change",(function(){return t.limitSubscriptionChanged()})),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n          "),o["ɵɵelementStart"](35,"label",11),o["ɵɵtext"](36),o["ɵɵpipe"](37,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n        "),o["ɵɵelementStart"](40,"small",12),o["ɵɵtext"](41),o["ɵɵpipe"](42,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n    "),o["ɵɵelementStart"](46,"div",13),o["ɵɵtext"](47,"\n      "),o["ɵɵelementStart"](48,"div",8),o["ɵɵtext"](49,"\n        "),o["ɵɵelementStart"](50,"label",14),o["ɵɵtext"](51),o["ɵɵpipe"](52,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n        "),o["ɵɵelementStart"](54,"input",15),o["ɵɵlistener"]("ngModelChange",(function(e){return t.newMaxSeats=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n        "),o["ɵɵelementStart"](56,"small",12),o["ɵɵtext"](57,"\n          "),o["ɵɵelementStart"](58,"strong"),o["ɵɵtext"](59),o["ɵɵpipe"](60,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](61),o["ɵɵpipe"](62,"currency"),o["ɵɵpipe"](63,"currency"),o["ɵɵpipe"](64,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n    "),o["ɵɵelementStart"](68,"button",16),o["ɵɵtext"](69,"\n      "),o["ɵɵelement"](70,"i",17),o["ɵɵpipe"](71,"i18n"),o["ɵɵtext"](72,"\n      "),o["ɵɵelementStart"](73,"span"),o["ɵɵtext"](74),o["ɵɵpipe"](75,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](77,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](78,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](79,"\n"),o["ɵɵelement"](80,"app-payment",18),o["ɵɵtext"](81,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,25,"subscriptionSeats")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.newSeatCount),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](19,27,"total"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate4"](" ",t.newSeatCount||0," ×\n          ",o["ɵɵpipeBind2"](21,29,t.seatPrice,"$")," = ",o["ɵɵpipeBind2"](22,32,t.adjustedSeatTotal,"$")," /\n          ",o["ɵɵpipeBind1"](23,35,t.interval),"\n        "),o["ɵɵadvance"](13),o["ɵɵproperty"]("ngModel",t.limitSubscription),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](37,37,"limitSubscription")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](42,39,"limitSubscriptionDesc")),o["ɵɵadvance"](5),o["ɵɵproperty"]("hidden",!t.limitSubscription),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](52,41,"maxSeatLimit")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.newMaxSeats)("min",null==t.newSeatCount?1:t.newSeatCount)("required",t.limitSubscription),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](60,43,"maxSeatCost"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate4"](" ",t.newMaxSeats||0," ×\n          ",o["ɵɵpipeBind2"](62,45,t.seatPrice,"$")," = ",o["ɵɵpipeBind2"](63,48,t.maxSeatTotal,"$")," /\n          ",o["ɵɵpipeBind1"](64,51,t.interval),"\n        "),o["ɵɵadvance"](7),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](71,53,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](75,55,"save")),o["ɵɵadvance"](6),o["ɵɵproperty"]("showMethods",!1)}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,d.MinValidator,d.NumberValueAccessor,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,d.CheckboxControlValueAccessor,Ay],pipes:[M.C,B.CurrencyPipe],encapsulation:2});class Nb{}var Vb=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Hb(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",16),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"strong"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5),o["ɵɵpipe"](6,"currency"),o["ɵɵpipe"](7,"currency"),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](4,5,"total"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate4"](" ",e.storageAdjustment||0," GB ×\n      ",o["ɵɵpipeBind2"](6,7,e.storageGbPrice,"$")," = ",o["ɵɵpipeBind2"](7,10,e.adjustedStorageTotal,"$")," /",o["ɵɵpipeBind1"](8,13,e.interval),"\n    ")}}class jb{constructor(e,t,n,i,r,a){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.router=i,this.activatedRoute=r,this.logService=a,this.storageGbPrice=0,this.add=!0,this.interval="year",this.onAdjusted=new o.EventEmitter,this.onCanceled=new o.EventEmitter,this.storageAdjustment=0}submit(){return Vb(this,void 0,void 0,(function*(){try{const e=new Nb;e.storageGbAdjustment=this.storageAdjustment,this.add||(e.storageGbAdjustment*=-1);let t=!1;const n=()=>Vb(this,void 0,void 0,(function*(){let n;n=null==this.organizationId?this.formPromise=this.apiService.postAccountStorage(e):this.formPromise=this.apiService.postOrganizationStorage(this.organizationId,e);const i=yield n;if(null!=i&&null!=i.paymentIntentClientSecret)try{yield this.paymentComponent.handleStripeCardPayment(i.paymentIntentClientSecret,null)}catch(r){t=!0}}));this.formPromise=n(),yield this.formPromise,this.onAdjusted.emit(this.storageAdjustment),t?(this.platformUtilsService.showToast("warning",null,this.i18nService.t("couldNotChargeCardPayInvoice"),{timeout:1e4}),this.router.navigate(["../billing"],{relativeTo:this.activatedRoute})):this.platformUtilsService.showToast("success",null,this.i18nService.t("adjustedStorage",e.storageGbAdjustment.toString()))}catch(e){this.logService.error(e)}}))}cancel(){this.onCanceled.emit()}get adjustedStorageTotal(){return this.storageGbPrice*this.storageAdjustment}}jb.ɵfac=function(e){return new(e||jb)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](L.$))},jb.ɵcmp=o["ɵɵdefineComponent"]({type:jb,selectors:[["app-adjust-storage"]],viewQuery:function(e,t){if(1&e&&o["ɵɵviewQuery"](Ay,7),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.paymentComponent=e.first)}},inputs:{storageGbPrice:"storageGbPrice",add:"add",organizationId:"organizationId",interval:"interval"},outputs:{onAdjusted:"onAdjusted",onCanceled:"onCanceled"},decls:52,vars:26,consts:[["ngNativeValidate","",1,"card",3,"appApiAction","ngSubmit"],["form",""],[1,"card-body"],["type","button",1,"close",3,"appA11yTitle","click"],["aria-hidden","true"],[1,"card-body-header"],[1,"row"],[1,"form-group","col-6"],["for","storageAdjustment"],["id","storageAdjustment","type","number","name","StroageGbAdjustment","min","0","max","99","step","1","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","mb-3",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"d-block","text-muted","mt-3"],[3,"showMethods"],[1,"mb-3"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"button",3),o["ɵɵlistener"]("click",(function(){return t.cancel()})),o["ɵɵpipe"](6,"i18n"),o["ɵɵtext"](7,"\n      "),o["ɵɵelementStart"](8,"span",4),o["ɵɵtext"](9,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n    "),o["ɵɵelementStart"](12,"h3",5),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n    "),o["ɵɵelementStart"](16,"div",6),o["ɵɵtext"](17,"\n      "),o["ɵɵelementStart"](18,"div",7),o["ɵɵtext"](19,"\n        "),o["ɵɵelementStart"](20,"label",8),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n        "),o["ɵɵelementStart"](24,"input",9),o["ɵɵlistener"]("ngModelChange",(function(e){return t.storageAdjustment=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n    "),o["ɵɵtemplate"](28,Hb,9,15,"div",10),o["ɵɵtext"](29,"\n    "),o["ɵɵelementStart"](30,"button",11),o["ɵɵtext"](31,"\n      "),o["ɵɵelement"](32,"i",12),o["ɵɵpipe"](33,"i18n"),o["ɵɵtext"](34,"\n      "),o["ɵɵelementStart"](35,"span"),o["ɵɵtext"](36),o["ɵɵpipe"](37,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n    "),o["ɵɵelementStart"](40,"button",13),o["ɵɵlistener"]("click",(function(){return t.cancel()})),o["ɵɵtext"](41),o["ɵɵpipe"](42,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n    "),o["ɵɵelementStart"](44,"small",14),o["ɵɵtext"](45),o["ɵɵpipe"](46,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n"),o["ɵɵelement"](50,"app-payment",15),o["ɵɵtext"](51,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](6,12,"cancel")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,14,t.add?"addStorage":"removeStorage")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](22,16,t.add?"gbStorageAdd":"gbStorageRemove")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.storageAdjustment),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.add),o["ɵɵadvance"](2),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](33,18,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](37,20,"submit")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](42,22,"cancel"),"\n    "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](46,24,t.add?"storageAddNote":"storageRemoveNote"),"\n    "),o["ɵɵadvance"](5),o["ɵɵproperty"]("showMethods",!1)}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,d.MinValidator,d.MaxValidator,d.NumberValueAccessor,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,B.NgIf,Ay],pipes:[M.C,B.CurrencyPipe],encapsulation:2});var Lb=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Kb{constructor(e,t,n){this.apiService=e,this.fileDownloadService=t,this.logService=n,this.onDownloaded=new o.EventEmitter,this.onCanceled=new o.EventEmitter}submit(){return Lb(this,void 0,void 0,(function*(){if(null!=this.installationId&&""!==this.installationId)try{this.formPromise=this.apiService.getOrganizationLicense(this.organizationId,this.installationId);const e=yield this.formPromise,t=JSON.stringify(e,null,2);this.fileDownloadService.download({fileName:"bitwarden_organization_license.json",blobData:t}),this.onDownloaded.emit()}catch(e){this.logService.error(e)}}))}cancel(){this.onCanceled.emit()}}Kb.ɵfac=function(e){return new(e||Kb)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](Ia._),o["ɵɵdirectiveInject"](L.$))},Kb.ɵcmp=o["ɵɵdefineComponent"]({type:Kb,selectors:[["app-download-license"]],inputs:{organizationId:"organizationId"},outputs:{onDownloaded:"onDownloaded",onCanceled:"onCanceled"},decls:53,vars:24,consts:[["ngNativeValidate","",1,"card",3,"appApiAction","ngSubmit"],["form",""],[1,"card-body"],["type","button",1,"close",3,"appA11yTitle","click"],["aria-hidden","true"],[1,"card-body-header"],[1,"row"],[1,"form-group","col-6"],[1,"d-flex"],["for","installationId"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/licensing-on-premise/#organization-account-sharing",1,"ml-auto",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],["id","installationId","type","text","name","InstallationId","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"button",3),o["ɵɵlistener"]("click",(function(){return t.cancel()})),o["ɵɵpipe"](6,"i18n"),o["ɵɵtext"](7,"\n      "),o["ɵɵelementStart"](8,"span",4),o["ɵɵtext"](9,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n    "),o["ɵɵelementStart"](12,"h3",5),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n    "),o["ɵɵelementStart"](16,"div",6),o["ɵɵtext"](17,"\n      "),o["ɵɵelementStart"](18,"div",7),o["ɵɵtext"](19,"\n        "),o["ɵɵelementStart"](20,"div",8),o["ɵɵtext"](21,"\n          "),o["ɵɵelementStart"](22,"label",9),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n          "),o["ɵɵelementStart"](26,"a",10),o["ɵɵpipe"](27,"i18n"),o["ɵɵtext"](28,"\n            "),o["ɵɵelement"](29,"i",11),o["ɵɵtext"](30,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n        "),o["ɵɵelementStart"](33,"input",12),o["ɵɵlistener"]("ngModelChange",(function(e){return t.installationId=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n    "),o["ɵɵelementStart"](37,"button",13),o["ɵɵtext"](38,"\n      "),o["ɵɵelement"](39,"i",14),o["ɵɵpipe"](40,"i18n"),o["ɵɵtext"](41,"\n      "),o["ɵɵelementStart"](42,"span"),o["ɵɵtext"](43),o["ɵɵpipe"](44,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n    "),o["ɵɵelementStart"](47,"button",15),o["ɵɵlistener"]("click",(function(){return t.cancel()})),o["ɵɵtext"](48),o["ɵɵpipe"](49,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](6,10,"cancel")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,12,"downloadLicense")),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](24,14,"enterInstallationId")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](27,16,"learnMore")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngModel",t.installationId),o["ɵɵadvance"](4),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](40,18,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](44,20,"submit")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](49,22,"cancel"),"\n    ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel],pipes:[M.C],encapsulation:2});var Gb=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class qb{constructor(e,t,n,i){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.logService=i,this.onUpdated=new o.EventEmitter,this.onCanceled=new o.EventEmitter}submit(){return Gb(this,void 0,void 0,(function*(){const e=document.getElementById("file").files;if(null!=e&&0!==e.length)try{const t=new FormData;t.append("license",e[0]);let n=null;n=null==this.organizationId?this.apiService.postAccountLicense(t):this.apiService.postOrganizationLicenseUpdate(this.organizationId,t),this.formPromise=n.then((()=>this.apiService.refreshIdentityToken())),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("updatedLicense")),this.onUpdated.emit()}catch(t){this.logService.error(t)}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("selectFile"))}))}cancel(){this.onCanceled.emit()}}qb.ɵfac=function(e){return new(e||qb)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$))},qb.ɵcmp=o["ɵɵdefineComponent"]({type:qb,selectors:[["app-update-license"]],inputs:{organizationId:"organizationId"},outputs:{onUpdated:"onUpdated",onCanceled:"onCanceled"},decls:31,vars:18,consts:[["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"form-group"],["for","file",1,"sr-only"],["type","file","id","file","name","file","required","",1,"form-control-file"],[1,"form-text","text-muted"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"label",3),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelement"](9,"input",4),o["ɵɵtext"](10,"\n    "),o["ɵɵelementStart"](11,"small",5),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementStart"](16,"button",6),o["ɵɵtext"](17,"\n    "),o["ɵɵelement"](18,"i",7),o["ɵɵpipe"](19,"i18n"),o["ɵɵtext"](20,"\n    "),o["ɵɵelementStart"](21,"span"),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n  "),o["ɵɵelementStart"](26,"button",8),o["ɵɵlistener"]("click",(function(){return t.cancel()})),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,7,"licenseFile")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](13,9,"licenseFileDesc",t.organizationId?"bitwarden_organization_license.json":"bitwarden_premium_license.json")),o["ɵɵadvance"](4),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](19,12,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,14,"submit")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](28,16,"cancel"),"\n  ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b],pipes:[M.C],encapsulation:2});var _b=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const $b=["setupBillingSyncTemplate"],Wb=["rotateBillingSyncKeyTemplate"];function Qb(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n      "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function Yb(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",6),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function Zb(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",7),o["ɵɵtext"](3,"\n    "),o["ɵɵelement"](4,"app-image-org-subscription-hidden"),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"p",8),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n    "),o["ɵɵelementStart"](10,"p"),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](8,2,"billingManagedByProvider",e.userOrg.providerName)),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,5,"billingContactProviderForAssistance"))}}function Jb(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",10),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"canceled")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](3,4,"subscriptionCanceled"),""))}function Xb(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-callout",10),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n    "),o["ɵɵelementStart"](3,"p"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n    "),o["ɵɵelementStart"](7,"button",11,12),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).reinstate()})),o["ɵɵtext"](9,"\n      "),o["ɵɵelement"](10,"i",13),o["ɵɵpipe"](11,"i18n"),o["ɵɵtext"](12,"\n      "),o["ɵɵelementStart"](13,"span"),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](8),t=o["ɵɵnextContext"](2);o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,6,"pendingCancellation")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](5,8,"subscriptionPendingCanceled")),o["ɵɵadvance"](3),o["ɵɵproperty"]("appApiAction",t.reinstatePromise)("disabled",e.loading),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](11,10,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](15,12,"reinstateSubscription"))}}function ew(e,t){1&e&&(o["ɵɵelementStart"](0,"span",31),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"pendingCancellation")))}function tw(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"dt"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"dd"),o["ɵɵtext"](7,"\n              "),o["ɵɵelementStart"](8,"span",29),o["ɵɵtext"](9),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n              "),o["ɵɵtemplate"](11,ew,3,3,"span",30),o["ɵɵtext"](12,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementStart"](14,"dt"),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n            "),o["ɵɵelementStart"](18,"dd"),o["ɵɵtext"](19),o["ɵɵpipe"](20,"date"),o["ɵɵpipe"](21,"currency"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,5,"status")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](e.isSponsoredSubscription?"sponsored":e.subscription.status||"-"),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.subscriptionMarkedForCancel),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](16,7,"nextCharge")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n              ",e.nextInvoice?o["ɵɵpipeBind2"](20,9,e.nextInvoice.date,"mediumDate")+", "+o["ɵɵpipeBind2"](21,12,e.nextInvoice.amount,"$"):"-","\n            ")}}function nw(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"currency"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"td"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"currency"),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](3),o["ɵɵtextInterpolate3"]("\n                ",e.name," ",e.quantity>1?"×"+e.quantity:""," @\n                ",o["ɵɵpipeBind2"](4,5,e.amount,"$"),"\n              "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate2"]("",o["ɵɵpipeBind2"](8,8,e.quantity*e.amount,"$")," /",o["ɵɵpipeBind1"](9,11,e.interval),"")}}function iw(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",32),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"strong",33),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"table",34),o["ɵɵtext"](7,"\n          "),o["ɵɵelementStart"](8,"tbody"),o["ɵɵtext"](9,"\n            "),o["ɵɵtemplate"](10,nw,11,13,"tr",35),o["ɵɵtext"](11,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,2,"details")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngForOf",e.subscription.items)}}function rw(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"div",36),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"dl"),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"dt"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n            "),o["ɵɵelementStart"](10,"dd"),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n      "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,2,"provider")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](12,4,"yourProviderIs",e.userOrg.providerName))}}function ow(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",37),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).changePlan()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](2,1,"changeBillingPlan"),"\n      "))}function aw(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-change-plan",38),o["ɵɵlistener"]("onChanged",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).closeChangePlan(!0)}))("onCanceled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).closeChangePlan(!1)})),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵproperty"]("organizationId",e.organizationId)}}function sw(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",39),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"app-adjust-subscription",40),o["ɵɵlistener"]("onAdjusted",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).subscriptionAdjusted()})),o["ɵɵtext"](5,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("seatPrice",e.seatPrice)("organizationId",e.organizationId)("interval",e.billingInterval)("currentSeatCount",e.seats)("maxAutoscaleSeats",e.maxAutoscaleSeats)}}function lw(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",41,42),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).removeSponsorship()})),o["ɵɵtext"](2,"\n      "),o["ɵɵelement"](3,"i",13),o["ɵɵpipe"](4,"i18n"),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"span"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"](3);o["ɵɵproperty"]("appApiAction",t.removeSponsorshipPromise)("disabled",e.loading),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](4,4,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,6,"removeSponsorship"))}}function dw(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",24),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"button",37),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](4).adjustStorage(!0)})),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"button",45),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](4).adjustStorage(!1)})),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,2,"addStorage"),"\n          "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](8,4,"removeStorage"),"\n          "))}function cw(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-adjust-storage",46),o["ɵɵlistener"]("onAdjusted",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](4).closeStorage(!0)}))("onCanceled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](4).closeStorage(!1)})),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](4);o["ɵɵproperty"]("storageGbPrice",e.storageGbPrice)("add",e.adjustStorageAdd)("organizationId",e.organizationId)("interval",e.billingInterval)}}function pw(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",39),o["ɵɵtext"](3,"\n        "),o["ɵɵtemplate"](4,dw,10,6,"div",43),o["ɵɵtext"](5,"\n        "),o["ɵɵtemplate"](6,cw,1,4,"app-adjust-storage",44),o["ɵɵtext"](7,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!e.showAdjustStorage),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.showAdjustStorage)}}function uw(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",47),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).downloadLicense()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵproperty"]("disabled",e.showDownloadLicense),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](2,2,"downloadLicense"),"\n      ")}}function mw(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",45),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).manageBillingSync()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](2,1,e.hasBillingSyncToken?"manageBillingSync":"setUpBillingSync"),"\n      ")}}function hw(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",39),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"app-download-license",48),o["ɵɵlistener"]("onDownloaded",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).closeDownloadLicense()}))("onCanceled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).closeDownloadLicense()})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("organizationId",e.organizationId)}}function vw(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",49,50),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).cancel()})),o["ɵɵtext"](2,"\n        "),o["ɵɵelement"](3,"i",13),o["ɵɵpipe"](4,"i18n"),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"span"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"](3);o["ɵɵproperty"]("appApiAction",t.cancelPromise)("disabled",e.loading),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](4,4,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,6,"cancelSubscription"))}}const gw=function(e){return{width:e}};function fw(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",14),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"div",15),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"dl"),o["ɵɵtext"](7,"\n          "),o["ɵɵelementStart"](8,"dt"),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n          "),o["ɵɵelementStart"](12,"dd"),o["ɵɵtext"](13),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n          "),o["ɵɵtemplate"](15,tw,23,15,"ng-container",1),o["ɵɵtext"](16,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵtemplate"](19,iw,14,4,"div",16),o["ɵɵtext"](20,"\n      "),o["ɵɵtemplate"](21,rw,16,7,"ng-container",1),o["ɵɵtext"](22,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n    "),o["ɵɵelementContainerStart"](24),o["ɵɵtext"](25,"\n      "),o["ɵɵtemplate"](26,ow,3,3,"button",17),o["ɵɵtext"](27,"\n      "),o["ɵɵtemplate"](28,aw,1,1,"app-change-plan",18),o["ɵɵtext"](29,"\n    "),o["ɵɵelementContainerEnd"](),o["ɵɵtext"](30,"\n    "),o["ɵɵelementStart"](31,"h2",19),o["ɵɵtext"](32),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n    "),o["ɵɵelementStart"](35,"p",20),o["ɵɵtext"](36),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n    "),o["ɵɵtemplate"](38,sw,8,5,"ng-container",1),o["ɵɵtext"](39,"\n    "),o["ɵɵtemplate"](40,lw,10,8,"button",21),o["ɵɵtext"](41,"\n    "),o["ɵɵelementStart"](42,"h2",19),o["ɵɵtext"](43),o["ɵɵpipe"](44,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n    "),o["ɵɵelementStart"](46,"p"),o["ɵɵtext"](47),o["ɵɵpipe"](48,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n    "),o["ɵɵelementStart"](50,"div",22),o["ɵɵtext"](51,"\n      "),o["ɵɵelementStart"](52,"div",23),o["ɵɵtext"](53),o["ɵɵpipe"](54,"percent"),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n    "),o["ɵɵtemplate"](57,pw,9,2,"ng-container",1),o["ɵɵtext"](58,"\n    "),o["ɵɵtext"](59,"\n    "),o["ɵɵelementStart"](60,"h2",19),o["ɵɵtext"](61),o["ɵɵpipe"](62,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](63,"\n    "),o["ɵɵelementStart"](64,"p",20),o["ɵɵtext"](65),o["ɵɵpipe"](66,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n    "),o["ɵɵelementStart"](68,"div",24),o["ɵɵtext"](69,"\n      "),o["ɵɵtemplate"](70,uw,3,4,"button",25),o["ɵɵtext"](71,"\n      "),o["ɵɵtemplate"](72,mw,3,3,"button",26),o["ɵɵtext"](73,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](74,"\n    "),o["ɵɵtemplate"](75,hw,4,1,"div",27),o["ɵɵtext"](76,"\n    "),o["ɵɵelementStart"](77,"h2",19),o["ɵɵtext"](78),o["ɵɵpipe"](79,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](80,"\n    "),o["ɵɵelementStart"](81,"p",20),o["ɵɵtext"](82),o["ɵɵpipe"](83,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](84,"\n    "),o["ɵɵelementStart"](85,"div",24),o["ɵɵtext"](86,"\n      "),o["ɵɵtemplate"](87,vw,10,8,"button",28),o["ɵɵtext"](88,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](89,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,25,"billingPlan")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](e.sub.plan.name),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.subscription),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.subscription),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",null!=(null==e.userOrg?null:e.userOrg.providerId)),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.showChangePlanButton),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.showChangePlan),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](33,27,"manageSubscription")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](e.subscriptionDesc),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.subscription&&e.canAdjustSeats&&!e.subscription.cancelled&&!e.subscriptionMarkedForCancel),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.isSponsoredSubscription),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](44,29,"storage")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind3"](48,31,"subscriptionStorage",e.sub.maxStorageGb||0,e.sub.storageName||"0 MB")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngStyle",o["ɵɵpureFunction1"](45,gw,e.storageProgressWidth+"%")),o["ɵɵattribute"]("aria-valuenow",e.storagePercentage),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](54,35,e.storagePercentage/100),"\n      "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.subscription&&!e.subscription.cancelled&&!e.subscriptionMarkedForCancel),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](62,37,"selfHostingTitle")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](66,39,"selfHostingEnterpriseOrganizationSectionCopy"),"\n    "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.canDownloadLicense),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.canManageBillingSync),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.showDownloadLicense),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](79,41,"additionalOptions")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](83,43,"additionalOptionsDesc"),"\n    "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.subscription&&!e.subscription.cancelled&&!e.subscriptionMarkedForCancel)}}function xw(e,t){1&e&&(o["ɵɵelementStart"](0,"span",54),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",55),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](4,1,"licenseIsExpired"),"\n        "))}function yw(e,t){if(1&e&&(o["ɵɵelementStart"](0,"dd"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"date"),o["ɵɵtemplate"](3,xw,5,3,"span",53),o["ɵɵtext"](4,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind2"](2,2,e.sub.expiration,"mediumDate"),"\n        "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.isExpired)}}function Sw(e,t){1&e&&(o["ɵɵelementStart"](0,"dd"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"neverExpires")))}function bw(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",56),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",57),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"button",58),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).closeUpdateLicense(!1)})),o["ɵɵpipe"](5,"i18n"),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"span",59),o["ɵɵtext"](8,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n        "),o["ɵɵelementStart"](11,"h3",60),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"app-update-license",61),o["ɵɵlistener"]("onUpdated",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).closeUpdateLicense(!0)}))("onCanceled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).closeUpdateLicense(!1)})),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](5,3,"cancel")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,5,"updateLicense")),o["ɵɵadvance"](3),o["ɵɵproperty"]("organizationId",e.organizationId)}}function ww(e,t){if(1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"date"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](5);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind2"](2,1,e.userOrg.familySponsorshipLastSyncDate,"medium"),"\n        ")}}function Iw(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"lowercase"),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,o["ɵɵpipeBind1"](3,3,"never")),"\n        "))}function Cw(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",64),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵtemplate"](3,ww,3,4,"span",1),o["ɵɵtext"](4,"\n        "),o["ɵɵtemplate"](5,Iw,4,5,"span",1),o["ɵɵtext"](6,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](4);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](2,3,"lastSync"),":\n        "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",null!=e.userOrg.familySponsorshipLastSyncDate),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",null==e.userOrg.familySponsorshipLastSyncDate)}}function Ew(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"h2",62),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"p"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"button",37),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).manageBillingSyncSelfHosted()})),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n      "),o["ɵɵtemplate"](14,Cw,7,5,"small",63),o["ɵɵtext"](15,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](4,4,"billingSync"),"\n      "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](8,6,"billingSyncDesc"),"\n      "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](12,8,"manageBillingSync"),"\n      "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.billingSyncSetUp)}}function kw(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"dl"),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"dt"),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n      "),o["ɵɵelementStart"](8,"dd"),o["ɵɵtext"](9),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"dt"),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n      "),o["ɵɵtemplate"](15,yw,5,5,"dd",1),o["ɵɵtext"](16,"\n      "),o["ɵɵtemplate"](17,Sw,3,3,"dd",1),o["ɵɵtext"](18,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n    "),o["ɵɵelementStart"](20,"div"),o["ɵɵtext"](21,"\n      "),o["ɵɵelementStart"](22,"button",37),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).updateLicense()})),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n      "),o["ɵɵelementStart"](26,"a",51),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n    "),o["ɵɵtemplate"](31,bw,18,7,"div",52),o["ɵɵtext"](32,"\n    "),o["ɵɵtemplate"](33,Ew,16,10,"div",1),o["ɵɵtext"](34,"\n  "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,9,"billingPlan")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](e.sub.plan.name),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,11,"expiration")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.sub.expiration),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.sub.expiration),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](24,13,"updateLicense"),"\n      "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](28,15,"manageSubscription"),"\n      "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.showUpdateLicense),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.showBillingSyncKey)}}function Pw(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,Jb,4,6,"app-callout",9),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,Xb,18,14,"app-callout",9),o["ɵɵtext"](5,"\n  "),o["ɵɵtemplate"](6,fw,90,47,"ng-container",1),o["ɵɵtext"](7,"\n  "),o["ɵɵtemplate"](8,kw,35,17,"ng-container",1),o["ɵɵtext"](9,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.subscription&&e.subscription.cancelled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.subscriptionMarkedForCancel),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.selfHosted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.selfHosted)}}function Aw(e,t){}function Ow(e,t){}class Tw{constructor(e,t,n,i,r,o,a,s){this.apiService=e,this.platformUtilsService=t,this.i18nService=n,this.messagingService=i,this.route=r,this.organizationService=o,this.logService=a,this.modalService=s,this.loading=!1,this.firstLoaded=!1,this.adjustSeatsAdd=!0,this.showAdjustSeats=!1,this.showAdjustSeatAutoscale=!1,this.adjustStorageAdd=!0,this.showAdjustStorage=!1,this.showUpdateLicense=!1,this.showBillingSyncKey=!1,this.showDownloadLicense=!1,this.showChangePlan=!1,this.selfHosted=!1,this.selfHosted=t.isSelfHost()}ngOnInit(){return _b(this,void 0,void 0,(function*(){this.route.parent.parent.params.subscribe((e=>_b(this,void 0,void 0,(function*(){this.organizationId=e.organizationId,yield this.load(),this.firstLoaded=!0}))))}))}load(){return _b(this,void 0,void 0,(function*(){if(this.loading)return;this.loading=!0,this.userOrg=yield this.organizationService.get(this.organizationId),this.userOrg.canManageBilling&&(this.sub=yield this.apiService.getOrganizationSubscription(this.organizationId));const e=yield this.apiService.getOrganizationApiKeyInformation(this.organizationId);this.hasBillingSyncToken=e.data.some((e=>e.keyType===oS.BillingSync)),this.selfHosted&&(this.showBillingSyncKey=yield this.apiService.getCloudCommunicationsEnabled()),this.showBillingSyncKey&&(this.existingBillingSyncConnection=yield this.apiService.getOrganizationConnection(this.organizationId,aS.CloudBillingSync,lS)),this.loading=!1}))}reinstate(){return _b(this,void 0,void 0,(function*(){if(this.loading)return;if(yield this.platformUtilsService.showDialog(this.i18nService.t("reinstateConfirmation"),this.i18nService.t("reinstateSubscription"),this.i18nService.t("yes"),this.i18nService.t("cancel")))try{this.reinstatePromise=this.apiService.postOrganizationReinstate(this.organizationId),yield this.reinstatePromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("reinstated")),this.load()}catch(e){this.logService.error(e)}}))}cancel(){return _b(this,void 0,void 0,(function*(){if(this.loading)return;if(yield this.platformUtilsService.showDialog(this.i18nService.t("cancelConfirmation"),this.i18nService.t("cancelSubscription"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning"))try{this.cancelPromise=this.apiService.postOrganizationCancel(this.organizationId),yield this.cancelPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("canceledSubscription")),this.load()}catch(e){this.logService.error(e)}}))}changePlan(){return _b(this,void 0,void 0,(function*(){this.showChangePlan=!this.showChangePlan}))}closeChangePlan(e){this.showChangePlan=!1}downloadLicense(){this.showDownloadLicense=!this.showDownloadLicense}manageBillingSync(){return _b(this,void 0,void 0,(function*(){const[e]=yield this.modalService.openViewRef(kS,this.setupBillingSyncModalRef,(e=>{e.organizationId=this.organizationId,e.hasBillingToken=this.hasBillingSyncToken}));e.onClosed.subscribe((()=>_b(this,void 0,void 0,(function*(){yield this.load()}))))}))}closeDownloadLicense(){this.showDownloadLicense=!1}updateLicense(){this.loading||(this.showUpdateLicense=!0)}closeUpdateLicense(e){this.showUpdateLicense=!1,e&&(this.load(),this.messagingService.send("updatedOrgLicense"))}subscriptionAdjusted(){this.load()}adjustStorage(e){this.adjustStorageAdd=e,this.showAdjustStorage=!0}closeStorage(e){this.showAdjustStorage=!1,e&&this.load()}removeSponsorship(){return _b(this,void 0,void 0,(function*(){if(yield this.platformUtilsService.showDialog(this.i18nService.t("removeSponsorshipConfirmation"),this.i18nService.t("removeSponsorship"),this.i18nService.t("remove"),this.i18nService.t("cancel"),"warning"))try{this.removeSponsorshipPromise=this.apiService.deleteRemoveSponsorship(this.organizationId),yield this.removeSponsorshipPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("removeSponsorshipSuccess")),yield this.load()}catch(e){this.logService.error(e)}}))}manageBillingSyncSelfHosted(){return _b(this,void 0,void 0,(function*(){this.billingSyncKeyRef=yield this.modalService.openViewRef(uS,this.billingSyncKeyViewContainerRef,(e=>{var t,n,i;e.entityId=this.organizationId,e.existingConnectionId=null===(t=this.existingBillingSyncConnection)||void 0===t?void 0:t.id,e.billingSyncKey=null===(i=null===(n=this.existingBillingSyncConnection)||void 0===n?void 0:n.config)||void 0===i?void 0:i.billingSyncKey,e.setParentConnection=e=>{this.existingBillingSyncConnection=e,this.billingSyncKeyRef[0].close()}}))}))}get isExpired(){return null!=this.sub&&null!=this.sub.expiration&&new Date(this.sub.expiration)<new Date}get subscriptionMarkedForCancel(){return null!=this.subscription&&!this.subscription.cancelled&&this.subscription.cancelAtEndDate}get subscription(){return null!=this.sub?this.sub.subscription:null}get nextInvoice(){return null!=this.sub?this.sub.upcomingInvoice:null}get storagePercentage(){return null!=this.sub&&this.sub.maxStorageGb?+(this.sub.storageGb/this.sub.maxStorageGb*100).toFixed(2):0}get storageProgressWidth(){return this.storagePercentage<5?5:0}get billingInterval(){return!this.sub.plan.isAnnual?"month":"year"}get storageGbPrice(){return this.sub.plan.additionalStoragePricePerGb}get seatPrice(){return this.sub.plan.seatPrice}get seats(){return this.sub.seats}get maxAutoscaleSeats(){return this.sub.maxAutoscaleSeats}get canAdjustSeats(){return this.sub.plan.hasAdditionalSeatsOption}get isSponsoredSubscription(){var e;return null===(e=this.sub.subscription)||void 0===e?void 0:e.items.some((e=>e.sponsoredSubscriptionItem))}get canDownloadLicense(){return this.sub.planType!==sS.Free&&null==this.subscription||null!=this.subscription&&!this.subscription.cancelled}get canManageBillingSync(){return!this.selfHosted&&(this.sub.planType===sS.EnterpriseAnnually||this.sub.planType===sS.EnterpriseMonthly||this.sub.planType===sS.EnterpriseAnnually2019||this.sub.planType===sS.EnterpriseMonthly2019)}get subscriptionDesc(){return this.sub.planType===sS.Free?this.i18nService.t("subscriptionFreePlan",this.sub.seats.toString()):this.sub.planType===sS.FamiliesAnnually||this.sub.planType===sS.FamiliesAnnually2019?this.isSponsoredSubscription?this.i18nService.t("subscriptionSponsoredFamiliesPlan",this.sub.seats.toString()):this.i18nService.t("subscriptionFamiliesPlan",this.sub.seats.toString()):this.sub.maxAutoscaleSeats===this.sub.seats&&null!=this.sub.seats?this.i18nService.t("subscriptionMaxReached",this.sub.seats.toString()):null==this.sub.maxAutoscaleSeats?this.i18nService.t("subscriptionUserSeatsUnlimitedAutoscale"):this.i18nService.t("subscriptionUserSeatsLimitedAutoscale",this.sub.maxAutoscaleSeats.toString())}get showChangePlanButton(){return null==this.subscription&&this.sub.planType===sS.Free&&!this.showChangePlan}get billingSyncSetUp(){var e;return null!=(null===(e=this.existingBillingSyncConnection)||void 0===e?void 0:e.id)}}Tw.ɵfac=function(e){return new(e||Tw)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](kn))},Tw.ɵcmp=o["ɵɵdefineComponent"]({type:Tw,selectors:[["app-org-subscription"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"]($b,7,o.ViewContainerRef),o["ɵɵviewQuery"](Wb,7,o.ViewContainerRef)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.setupBillingSyncModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.billingSyncKeyViewContainerRef=e.first)}},decls:21,vars:7,consts:[[1,"page-header"],[4,"ngIf"],["setupBillingSyncTemplate",""],["rotateBillingSyncKeyTemplate",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"tw-flex","tw-flex-col","tw-items-center","tw-text-info"],[1,"tw-font-bold"],["type","warning",3,"title",4,"ngIf"],["type","warning",3,"title"],["type","button",1,"btn","btn-outline-secondary","btn-submit",3,"appApiAction","disabled","click"],["reinstateBtn",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[1,"row"],[1,"col-4"],["class","col-8",4,"ngIf"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],[3,"organizationId","onChanged","onCanceled",4,"ngIf"],[1,"spaced-header"],[1,"mb-4"],["type","button","class","btn btn-outline-danger btn-submit",3,"appApiAction","disabled","click",4,"ngIf"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success",3,"ngStyle"],[1,"d-flex"],["type","button","class","btn btn-outline-secondary",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-outline-secondary ml-1",3,"click",4,"ngIf"],["class","mt-3",4,"ngIf"],["type","button","class","btn btn-outline-danger btn-submit ml-1",3,"appApiAction","disabled","click",4,"ngIf"],[1,"text-capitalize"],["bitBadge","","badgeType","warning",4,"ngIf"],["bitBadge","","badgeType","warning"],[1,"col-8"],[1,"d-block","mb-1"],[1,"table"],[4,"ngFor","ngForOf"],[1,"col-sm"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[3,"organizationId","onChanged","onCanceled"],[1,"mt-3"],[3,"seatPrice","organizationId","interval","currentSeatCount","maxAutoscaleSeats","onAdjusted"],["type","button",1,"btn","btn-outline-danger","btn-submit",3,"appApiAction","disabled","click"],["removeSponsorshipBtn",""],["class","d-flex",4,"ngIf"],[3,"storageGbPrice","add","organizationId","interval","onAdjusted","onCanceled",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","ml-1",3,"click"],[3,"storageGbPrice","add","organizationId","interval","onAdjusted","onCanceled"],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],[3,"organizationId","onDownloaded","onCanceled"],["type","button",1,"btn","btn-outline-danger","btn-submit","ml-1",3,"appApiAction","disabled","click"],["cancelBtn",""],["href","https://vault.bitwarden.com","target","_blank","rel","noopener",1,"btn","btn-outline-secondary"],["class","card mt-3",4,"ngIf"],["class","text-danger ml-2",4,"ngIf"],[1,"text-danger","ml-2"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle"],[1,"card","mt-3"],[1,"card-body"],["type","button",1,"close",3,"appA11yTitle","click"],["aria-hidden","true"],[1,"card-body-header"],[3,"organizationId","onUpdated","onCanceled"],[1,"mt-5"],["class","form-text text-muted",4,"ngIf"],[1,"form-text","text-muted"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵtemplate"](5,Qb,9,6,"small",1),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵtemplate"](9,Yb,9,6,"ng-container",1),o["ɵɵtext"](10,"\n\n"),o["ɵɵtemplate"](11,Zb,15,7,"ng-container",1),o["ɵɵtext"](12,"\n\n"),o["ɵɵtemplate"](13,Pw,10,4,"ng-container",1),o["ɵɵtext"](14,"\n"),o["ɵɵtemplate"](15,Aw,0,0,"ng-template",null,2,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](17,"\n"),o["ɵɵtemplate"](18,Ow,0,0,"ng-template",null,3,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](20,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,5,"subscription"),"\n    "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.firstLoaded&&t.loading),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!t.firstLoaded&&t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.firstLoaded&&!t.userOrg.canManageBilling),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.sub))},directives:[B.NgIf,PS,Pe.O,Y.b,B.NgStyle,Po.l,B.NgForOf,Fb,zb,jb,Kb,pe,qb],pipes:[M.C,B.PercentPipe,B.DatePipe,B.CurrencyPipe,B.LowerCasePipe],encapsulation:2});var Bw=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Mw(e,t){1&e&&(o["ɵɵelementStart"](0,"a",11),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"billing"),"\n          "))}function Dw(e,t){1&e&&(o["ɵɵelementStart"](0,"a",12),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"twoStepLogin"),"\n          "))}class Fw{constructor(e,t,n){this.route=e,this.organizationService=t,this.platformUtilsService=n,this.access2fa=!1}ngOnInit(){this.route.parent.params.subscribe((e=>Bw(this,void 0,void 0,(function*(){const t=yield this.organizationService.get(e.organizationId);this.showBilling=!this.platformUtilsService.isSelfHost()&&t.canManageBilling,this.access2fa=t.use2fa}))))}}Fw.ɵfac=function(e){return new(e||Fw)(o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](E.P))},Fw.ɵcmp=o["ɵɵdefineComponent"]({type:Fw,selectors:[["app-org-settings"]],decls:36,vars:11,consts:[[1,"container","page-content"],[1,"row"],[1,"col-3"],[1,"card"],[1,"card-header"],[1,"list-group","list-group-flush"],["routerLink","account","routerLinkActive","active",1,"list-group-item"],["routerLink","subscription","routerLinkActive","active",1,"list-group-item"],["routerLink","billing","class","list-group-item","routerLinkActive","active",4,"ngIf"],["routerLink","two-factor","class","list-group-item","routerLinkActive","active",4,"ngIf"],[1,"col-9"],["routerLink","billing","routerLinkActive","active",1,"list-group-item"],["routerLink","two-factor","routerLinkActive","active",1,"list-group-item"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"div",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"div",5),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"a",6),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"a",7),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n          "),o["ɵɵtemplate"](22,Mw,3,3,"a",8),o["ɵɵtext"](23,"\n          "),o["ɵɵtemplate"](24,Dw,3,3,"a",9),o["ɵɵtext"](25,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n    "),o["ɵɵelementStart"](29,"div",10),o["ɵɵtext"](30,"\n      "),o["ɵɵelement"](31,"router-outlet"),o["ɵɵtext"](32,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,5,"settings")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](16,7,"myOrganization"),"\n          "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](20,9,"subscription"),"\n          "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.showBilling),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.access2fa))},directives:[p.RouterLinkWithHref,p.RouterLinkActive,B.NgIf,p.RouterOutlet],pipes:[M.C],encapsulation:2});class Rw extends re{}class Uw extends re{}var zw=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Nw{constructor(e,t,n,i,r){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.logService=i,this.userVerificationService=r,this.onUpdated=new o.EventEmitter,this.twoFactorProviderType=sn,this.enabled=!1,this.authed=!1}auth(e){this.hashedSecret=e.secret,this.verificationType=e.verificationType,this.authed=!0}enable(e){return zw(this,void 0,void 0,(function*(){try{yield e(),this.onUpdated.emit(!0)}catch(t){this.logService.error(t)}}))}disable(e){return zw(this,void 0,void 0,(function*(){if(yield this.platformUtilsService.showDialog(this.i18nService.t("twoStepDisableDesc"),this.i18nService.t("disable"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning"))try{const t=yield this.buildRequestModel(Uw);t.type=this.type,e=null!=this.organizationId?this.apiService.putTwoFactorOrganizationDisable(this.organizationId,t):this.apiService.putTwoFactorDisable(t),yield e,this.enabled=!1,this.platformUtilsService.showToast("success",null,this.i18nService.t("twoStepDisabled")),this.onUpdated.emit(!1)}catch(t){this.logService.error(t)}}))}buildRequestModel(e){return zw(this,void 0,void 0,(function*(){return this.userVerificationService.buildRequest({secret:this.hashedSecret,type:this.verificationType},e,!0)}))}}Nw.ɵfac=function(e){return new(e||Nw)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Yn.i))},Nw.ɵdir=o["ɵɵdefineDirective"]({type:Nw,outputs:{onUpdated:"onUpdated"}});var Vw=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Hw{constructor(e,t,n){this.apiService=e,this.logService=t,this.userVerificationService=n,this.onAuthed=new o.EventEmitter}submit(){return Vw(this,void 0,void 0,(function*(){let e;try{this.formPromise=this.userVerificationService.buildRequest(this.secret).then((t=>(e=this.secret.type===Wn.R.MasterPassword?t.masterPasswordHash:t.otp,this.apiCall(t))));const t=yield this.formPromise;this.onAuthed.emit({response:t,secret:e,verificationType:this.secret.type})}catch(t){this.logService.error(t)}}))}apiCall(e){switch(this.type){case-1:return this.apiService.getTwoFactorRecover(e);case sn.Duo:case sn.OrganizationDuo:return null!=this.organizationId?this.apiService.getTwoFactorOrganizationDuo(this.organizationId,e):this.apiService.getTwoFactorDuo(e);case sn.Email:return this.apiService.getTwoFactorEmail(e);case sn.WebAuthn:return this.apiService.getTwoFactorWebAuthn(e);case sn.Authenticator:return this.apiService.getTwoFactorAuthenticator(e);case sn.Yubikey:return this.apiService.getTwoFactorYubiKey(e)}}}Hw.ɵfac=function(e){return new(e||Hw)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Yn.i))},Hw.ɵcmp=o["ɵɵdefineComponent"]({type:Hw,selectors:[["app-two-factor-verify"]],inputs:{type:"type",organizationId:"organizationId"},outputs:{onAuthed:"onAuthed"},decls:31,vars:15,consts:[["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-body"],["ngDefaultControl","","name","secret",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"p"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementStart"](9,"app-user-verification",3),o["ɵɵlistener"]("ngModelChange",(function(e){return t.secret=e})),o["ɵɵtext"](10,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n  "),o["ɵɵelementStart"](13,"div",4),o["ɵɵtext"](14,"\n    "),o["ɵɵelementStart"](15,"button",5),o["ɵɵtext"](16,"\n      "),o["ɵɵelement"](17,"i",6),o["ɵɵpipe"](18,"i18n"),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"span"),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n    "),o["ɵɵelementStart"](25,"button",7),o["ɵɵtext"](26),o["ɵɵpipe"](27,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,7,"twoStepLoginAuthDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.secret),o["ɵɵadvance"](6),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](18,9,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](22,11,"continue")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](27,13,"close"),"\n    ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,el.W,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel],pipes:[M.C],encapsulation:2});var jw=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Lw(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-two-factor-verify",9),o["ɵɵlistener"]("onAuthed",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().auth(t)})),o["ɵɵtext"](1,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("organizationId",e.organizationId)("type",e.type)}}function Kw(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"app-callout",18),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n            "),o["ɵɵelement"](7,"img",19),o["ɵɵtext"](8,"\n            "),o["ɵɵelementStart"](9,"strong"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12),o["ɵɵelement"](13,"br"),o["ɵɵtext"](14,"\n            "),o["ɵɵelementStart"](15,"strong"),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18),o["ɵɵelement"](19,"br"),o["ɵɵtext"](20,"\n            "),o["ɵɵelementStart"](21,"strong"),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,8,"enabled")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](5,10,"twoStepLoginProviderEnabled"),"\n            "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](11,12,"twoFactorDuoIntegrationKey"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"](" ",e.ikey,"\n            "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](17,14,"twoFactorDuoSecretKey"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"](" ",e.skey,"\n            "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](23,16,"twoFactorDuoApiHostname"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"](" ",e.host,"\n          ")}}function Gw(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"img",19),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"p"),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"div",20),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"label",21),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵelementStart"](14,"input",22),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).ikey=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementStart"](17,"div",20),o["ɵɵtext"](18,"\n              "),o["ɵɵelementStart"](19,"label",23),o["ɵɵtext"](20),o["ɵɵpipe"](21,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n              "),o["ɵɵelementStart"](23,"input",24),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).skey=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n            "),o["ɵɵelementStart"](26,"div",20),o["ɵɵtext"](27,"\n              "),o["ɵɵelementStart"](28,"label",25),o["ɵɵtext"](29),o["ɵɵpipe"](30,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n              "),o["ɵɵelementStart"](32,"input",26),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).host=t})),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n          "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,8,"twoFactorDuoDesc")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,10,"twoFactorDuoIntegrationKey")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.ikey),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](21,12,"twoFactorDuoSecretKey")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.skey),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](30,14,"twoFactorDuoApiHostname")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate1"]("placeholder","",o["ɵɵpipeBind1"](33,16,"ex")," api-xxxxxxxx.duosecurity.com"),o["ɵɵproperty"]("ngModel",e.host)}}function qw(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"enable")))}function _w(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"disable")))}function $w(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",10,11),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](2,"\n        "),o["ɵɵelementStart"](3,"div",12),o["ɵɵtext"](4,"\n          "),o["ɵɵtemplate"](5,Kw,25,18,"ng-container",13),o["ɵɵtext"](6,"\n          "),o["ɵɵtemplate"](7,Gw,36,18,"ng-container",13),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementStart"](10,"div",14),o["ɵɵtext"](11,"\n          "),o["ɵɵelementStart"](12,"button",15),o["ɵɵtext"](13,"\n            "),o["ɵɵelement"](14,"i",16),o["ɵɵpipe"](15,"i18n"),o["ɵɵtext"](16,"\n            "),o["ɵɵtemplate"](17,qw,3,3,"span",13),o["ɵɵtext"](18,"\n            "),o["ɵɵtemplate"](19,_w,3,3,"span",13),o["ɵɵtext"](20,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n          "),o["ɵɵelementStart"](22,"button",17),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",t.enabled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.enabled),o["ɵɵadvance"](5),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](15,8,"loading")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.enabled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.enabled),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](24,10,"close"),"\n          ")}}class Ww extends Nw{constructor(e,t,n,i,r){super(e,t,n,i,r),this.type=sn.Duo}auth(e){super.auth(e),this.processResponse(e.response)}submit(){return this.enabled?super.disable(this.formPromise):this.enable()}enable(){const e=Object.create(null,{enable:{get:()=>super.enable}});return jw(this,void 0,void 0,(function*(){const t=yield this.buildRequestModel(Rw);return t.integrationKey=this.ikey,t.secretKey=this.skey,t.host=this.host,e.enable.call(this,(()=>jw(this,void 0,void 0,(function*(){null!=this.organizationId?this.formPromise=this.apiService.putTwoFactorOrganizationDuo(this.organizationId,t):this.formPromise=this.apiService.putTwoFactorDuo(t);const e=yield this.formPromise;yield this.processResponse(e)}))))}))}processResponse(e){this.ikey=e.integrationKey,this.skey=e.secretKey,this.host=e.host,this.enabled=e.enabled}}Ww.ɵfac=function(e){return new(e||Ww)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Yn.i))},Ww.ɵcmp=o["ɵɵdefineComponent"]({type:Ww,selectors:[["app-two-factor-duo"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:30,vars:8,consts:[["role","dialog","aria-modal","true","aria-labelledby","2faDuoTitle",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["title","2faDuoTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[3,"organizationId","type","onAuthed",4,"ngIf"],["ngNativeValidate","","autocomplete","off",3,"appApiAction","ngSubmit",4,"ngIf"],[3,"organizationId","type","onAuthed"],["ngNativeValidate","","autocomplete","off",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["type","success","icon","bwi bwi-check-circle",3,"title"],["alt","Duo logo",1,"float-right","ml-3","mfaType2"],[1,"form-group"],["for","ikey"],["id","ikey","type","text","name","IntegrationKey","required","","appInputVerbatim","",1,"form-control",3,"ngModel","ngModelChange"],["for","skey"],["id","skey","type","password","name","SecretKey","required","","appInputVerbatim","","autocomplete","new-password",1,"form-control",3,"ngModel","ngModelChange"],["for","host"],["id","host","type","text","name","Host","required","","appInputVerbatim","",1,"form-control",3,"ngModel","placeholder","ngModelChange"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h2",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementStart"](11,"small"),o["ɵɵtext"](12,"Duo"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"button",5),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"span",6),o["ɵɵtext"](19,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵtemplate"](23,Lw,2,2,"app-two-factor-verify",7),o["ɵɵtext"](24,"\n      "),o["ɵɵtemplate"](25,$w,27,12,"form",8),o["ɵɵtext"](26,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](10,4,"twoStepLogin"),"\n          "),o["ɵɵadvance"](6),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](16,6,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",!t.authed),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.authed))},directives:[pe,B.NgIf,Hw,d.NgControlStatusGroup,d.NgForm,Y.b,Pe.O,d.DefaultValueAccessor,d.RequiredValidator,J.b,d.NgControlStatus,d.NgModel],pipes:[M.C],encapsulation:2});class Qw{constructor(e){this.unknownDeviceVerificationEnabled=e}}class Yw extends re{}var Zw=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Jw(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-two-factor-verify",9),o["ɵɵlistener"]("onAuthed",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().auth(t)})),o["ɵɵtext"](1,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("organizationId",e.organizationId)("type",e.type)}}function Xw(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"img",28),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"p"),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"p"),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"strong"),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n          "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,2,"twoStepAuthenticatorDesc")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("1. ",o["ɵɵpipeBind1"](12,4,"twoStepAuthenticatorDownloadApp"),""))}function eI(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"app-callout",29),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"p"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n            "),o["ɵɵelement"](11,"img",28),o["ɵɵtext"](12,"\n            "),o["ɵɵelementStart"](13,"p"),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n          "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,4,"enabled")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,6,"twoStepLoginProviderEnabled")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](9,8,"twoStepAuthenticatorReaddDesc"),"\n            "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](15,10,"twoStepAuthenticatorNeedApp")))}function tI(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"strong"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("2. ",o["ɵɵpipeBind1"](4,1,"twoStepAuthenticatorScanCode"),""))}function nI(e,t){1&e&&o["ɵɵelement"](0,"hr")}function iI(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"label",30),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"input",31),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).token=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n          "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("3. ",o["ɵɵpipeBind1"](4,2,"twoStepAuthenticatorEnterCode"),""),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.token)}}function rI(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"enable")))}function oI(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"disable")))}const aI=function(e){return{"mb-0":e}};function sI(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",10,11),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](2,"\n        "),o["ɵɵelementStart"](3,"div",12),o["ɵɵtext"](4,"\n          "),o["ɵɵtemplate"](5,Xw,15,6,"ng-container",13),o["ɵɵtext"](6,"\n          "),o["ɵɵtemplate"](7,eI,17,12,"ng-container",13),o["ɵɵtext"](8,"\n          "),o["ɵɵelementStart"](9,"ul",14),o["ɵɵtext"](10,"\n            "),o["ɵɵelementStart"](11,"li"),o["ɵɵtext"](12,"\n              "),o["ɵɵelement"](13,"i",15),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementStart"](16,"a",16),o["ɵɵtext"](17,"Authy"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n            "),o["ɵɵelementStart"](20,"li"),o["ɵɵtext"](21,"\n              "),o["ɵɵelement"](22,"i",17),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementStart"](25,"a",18),o["ɵɵtext"](26,"Authy"),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n            "),o["ɵɵelementStart"](29,"li"),o["ɵɵtext"](30,"\n              "),o["ɵɵelement"](31,"i",19),o["ɵɵtext"](32),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementStart"](34,"a",20),o["ɵɵtext"](35,"Microsoft Authenticator"),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n          "),o["ɵɵelementStart"](39,"p"),o["ɵɵtext"](40),o["ɵɵpipe"](41,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n          "),o["ɵɵtemplate"](43,tI,6,3,"p",13),o["ɵɵtext"](44,"\n          "),o["ɵɵtemplate"](45,nI,1,0,"hr",13),o["ɵɵtext"](46,"\n          "),o["ɵɵelementStart"](47,"p",21),o["ɵɵtext"](48,"\n            "),o["ɵɵelement"](49,"canvas",22),o["ɵɵelement"](50,"br"),o["ɵɵtext"](51,"\n            "),o["ɵɵelementStart"](52,"code",23),o["ɵɵpipe"](53,"i18n"),o["ɵɵtext"](54),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n          "),o["ɵɵtemplate"](57,iI,8,4,"ng-container",13),o["ɵɵtext"](58,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n        "),o["ɵɵelementStart"](60,"div",24),o["ɵɵtext"](61,"\n          "),o["ɵɵelementStart"](62,"button",25),o["ɵɵtext"](63,"\n            "),o["ɵɵelement"](64,"i",26),o["ɵɵpipe"](65,"i18n"),o["ɵɵtext"](66,"\n            "),o["ɵɵtemplate"](67,rI,3,3,"span",13),o["ɵɵtext"](68,"\n            "),o["ɵɵtemplate"](69,oI,3,3,"span",13),o["ɵɵtext"](70,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](71,"\n          "),o["ɵɵelementStart"](72,"button",27),o["ɵɵtext"](73),o["ɵɵpipe"](74,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](75,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!t.enabled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.enabled),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](15,18,"iosDevices"),":\n              "),o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](24,20,"androidDevices"),":\n              "),o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](33,22,"windowsDevices"),":\n              "),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](41,24,"twoStepAuthenticatorAppsRecommended")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.enabled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.enabled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](32,aI,t.enabled)),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](53,26,"key")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](t.key),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.enabled),o["ɵɵadvance"](5),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](65,28,"loading")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.enabled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.enabled),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](74,30,"close"),"\n          ")}}class lI extends Nw{constructor(e,t,n,i,r,o){super(e,t,i,r,n),this.stateService=o,this.type=sn.Authenticator,this.qrScript=window.document.createElement("script"),this.qrScript.src="scripts/qrious.min.js",this.qrScript.async=!0}ngOnInit(){window.document.body.appendChild(this.qrScript)}ngOnDestroy(){window.document.body.removeChild(this.qrScript)}auth(e){return super.auth(e),this.processResponse(e.response)}submit(){return this.enabled?super.disable(this.formPromise):this.enable()}enable(){const e=Object.create(null,{enable:{get:()=>super.enable}});return Zw(this,void 0,void 0,(function*(){const t=yield this.buildRequestModel(Yw);return t.token=this.token,t.key=this.key,e.enable.call(this,(()=>Zw(this,void 0,void 0,(function*(){this.formPromise=this.apiService.putTwoFactorAuthenticator(t);const e=yield this.formPromise;yield this.processResponse(e)}))))}))}processResponse(e){return Zw(this,void 0,void 0,(function*(){this.token=null,this.enabled=e.enabled,this.key=e.key;const t=yield this.stateService.getEmail();window.setTimeout((()=>{new window.QRious({element:document.getElementById("qr"),value:"otpauth://totp/Bitwarden:"+encodeURIComponent(t)+"?secret="+encodeURIComponent(this.key)+"&issuer=Bitwarden",size:160})}),100)}))}}lI.ɵfac=function(e){return new(e||lI)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Yn.i),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](P.b))},lI.ɵcmp=o["ɵɵdefineComponent"]({type:lI,selectors:[["app-two-factor-authenticator"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:31,vars:11,consts:[["role","dialog","aria-modal","true","aria-labelledby","2faAuthenticatorTitle",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","2faAuthenticatorTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[3,"organizationId","type","onAuthed",4,"ngIf"],["ngNativeValidate","",3,"appApiAction","ngSubmit",4,"ngIf"],[3,"organizationId","type","onAuthed"],["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-body"],[4,"ngIf"],[1,"bwi-ul"],[1,"bwi","bwi-li","bwi-apple"],["href","https://itunes.apple.com/us/app/authy/id494168017?mt=8","target","_blank","rel","noopener"],[1,"bwi","bwi-li","bwi-android"],["href","https://play.google.com/store/apps/details?id=com.authy.authy","target","_blank","rel","noopener"],[1,"bwi","bwi-li","bwi-windows"],["href","https://www.microsoft.com/p/authenticator/9wzdncrfj3rj","target","_blank","rel","noopener"],[1,"text-center",3,"ngClass"],["id","qr"],[3,"appA11yTitle"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["alt","Authenticator app logo",1,"float-right","mfaType0"],["type","success","icon","bwi bwi-check-circle",3,"title"],["for","token"],["id","token","type","text","name","Token","required","","appInputVerbatim","",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h2",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementStart"](11,"small"),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementStart"](16,"button",5),o["ɵɵpipe"](17,"i18n"),o["ɵɵtext"](18,"\n          "),o["ɵɵelementStart"](19,"span",6),o["ɵɵtext"](20,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵtemplate"](24,Jw,2,2,"app-two-factor-verify",7),o["ɵɵtext"](25,"\n      "),o["ɵɵtemplate"](26,sI,77,34,"form",8),o["ɵɵtext"](27,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](10,5,"twoStepLogin"),"\n          "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,7,"authenticatorAppTitle")),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](17,9,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",!t.authed),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.authed))},directives:[pe,B.NgIf,Hw,d.NgControlStatusGroup,d.NgForm,Y.b,B.NgClass,Pe.O,d.DefaultValueAccessor,d.RequiredValidator,J.b,d.NgControlStatus,d.NgModel],pipes:[M.C],encapsulation:2});class dI extends re{}var cI=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function pI(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-two-factor-verify",9),o["ɵɵlistener"]("onAuthed",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().auth(t)})),o["ɵɵtext"](1,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("organizationId",e.organizationId)("type",e.type)}}function uI(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"app-callout",18),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n            "),o["ɵɵelementStart"](7,"strong"),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,4,"enabled")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](5,6,"twoStepLoginProviderEnabled"),"\n            "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](9,8,"email"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"](" ",e.email,"\n          ")}}function mI(e,t){if(1&e&&(o["ɵɵelementStart"](0,"span",31),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind2"](2,1,"verificationCodeEmailSent",e.sentEmail),"\n              ")}}function hI(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"p",19),o["ɵɵtext"](3,"\n              "),o["ɵɵelementStart"](4,"span",20),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵelement"](8,"img",21),o["ɵɵtext"](9,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n            "),o["ɵɵelementStart"](11,"div",22),o["ɵɵtext"](12,"\n              "),o["ɵɵelementStart"](13,"label",23),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n              "),o["ɵɵelementStart"](17,"input",24),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).email=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n            "),o["ɵɵelementStart"](20,"div",25),o["ɵɵtext"](21,"\n              "),o["ɵɵelementStart"](22,"button",26,27),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).sendEmail()})),o["ɵɵtext"](24,"\n                "),o["ɵɵelement"](25,"i",16),o["ɵɵpipe"](26,"i18n"),o["ɵɵtext"](27,"\n                "),o["ɵɵelementStart"](28,"span"),o["ɵɵtext"](29),o["ɵɵpipe"](30,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n              "),o["ɵɵtemplate"](33,mI,3,4,"span",28),o["ɵɵtext"](34,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n            "),o["ɵɵelementStart"](36,"div",22),o["ɵɵtext"](37,"\n              "),o["ɵɵelementStart"](38,"label",29),o["ɵɵtext"](39),o["ɵɵpipe"](40,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n              "),o["ɵɵelementStart"](42,"input",30),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).token=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n          "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵreference"](23),t=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,10,"twoFactorEmailDesc")),o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("1. ",o["ɵɵpipeBind1"](15,12,"twoFactorEmailEnterEmail"),""),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.email),o["ɵɵadvance"](5),o["ɵɵproperty"]("appApiAction",t.emailPromise)("disabled",e.loading),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](26,14,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](30,16,"sendEmail")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.sentEmail),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("2. ",o["ɵɵpipeBind1"](40,18,"twoFactorEmailEnterCode"),""),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.token)}}function vI(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"enable")))}function gI(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"disable")))}function fI(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",10,11),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](2,"\n        "),o["ɵɵelementStart"](3,"div",12),o["ɵɵtext"](4,"\n          "),o["ɵɵtemplate"](5,uI,11,10,"ng-container",13),o["ɵɵtext"](6,"\n          "),o["ɵɵtemplate"](7,hI,45,20,"ng-container",13),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementStart"](10,"div",14),o["ɵɵtext"](11,"\n          "),o["ɵɵelementStart"](12,"button",15),o["ɵɵtext"](13,"\n            "),o["ɵɵelement"](14,"i",16),o["ɵɵpipe"](15,"i18n"),o["ɵɵtext"](16,"\n            "),o["ɵɵtemplate"](17,vI,3,3,"span",13),o["ɵɵtext"](18,"\n            "),o["ɵɵtemplate"](19,gI,3,3,"span",13),o["ɵɵtext"](20,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n          "),o["ɵɵelementStart"](22,"button",17),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",t.enabled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.enabled),o["ɵɵadvance"](5),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](15,8,"loading")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.enabled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.enabled),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](24,10,"close"),"\n          ")}}class xI extends Nw{constructor(e,t,n,i,r,o){super(e,t,n,i,r),this.stateService=o,this.type=sn.Email}auth(e){return super.auth(e),this.processResponse(e.response)}submit(){return this.enabled?super.disable(this.formPromise):this.enable()}sendEmail(){return cI(this,void 0,void 0,(function*(){try{const e=yield this.buildRequestModel(pn);e.email=this.email,this.emailPromise=this.apiService.postTwoFactorEmailSetup(e),yield this.emailPromise,this.sentEmail=this.email}catch(e){this.logService.error(e)}}))}enable(){const e=Object.create(null,{enable:{get:()=>super.enable}});return cI(this,void 0,void 0,(function*(){const t=yield this.buildRequestModel(dI);return t.email=this.email,t.token=this.token,e.enable.call(this,(()=>cI(this,void 0,void 0,(function*(){this.formPromise=this.apiService.putTwoFactorEmail(t);const e=yield this.formPromise;yield this.processResponse(e)}))))}))}processResponse(e){return cI(this,void 0,void 0,(function*(){this.token=null,this.email=e.email,this.enabled=e.enabled,this.enabled||null!=this.email&&""!==this.email||(this.email=yield this.stateService.getEmail())}))}}function yI(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-two-factor-verify",9),o["ɵɵlistener"]("onAuthed",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().auth(t)})),o["ɵɵtext"](1,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("organizationId",e.organizationId)("type",e.type)}}function SI(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"code",14),o["ɵɵtext"](7),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n          "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](4,2,"twoFactorRecoveryYourCode"),":"),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](e.code)}}function bI(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"twoFactorRecoveryNoCode"),"\n          "))}function wI(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",15),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).print()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"printCode"),"\n          "))}function II(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"div",10),o["ɵɵtext"](3,"\n          "),o["ɵɵtemplate"](4,SI,9,4,"ng-container",8),o["ɵɵtext"](5,"\n          "),o["ɵɵtemplate"](6,bI,3,3,"ng-container",8),o["ɵɵtext"](7,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"div",11),o["ɵɵtext"](10,"\n          "),o["ɵɵtemplate"](11,wI,3,3,"button",12),o["ɵɵtext"](12,"\n          "),o["ɵɵelementStart"](13,"button",13),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n      "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.code),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.code),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.code),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](15,4,"close"),"\n          ")}}xI.ɵfac=function(e){return new(e||xI)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Yn.i),o["ɵɵdirectiveInject"](P.b))},xI.ɵcmp=o["ɵɵdefineComponent"]({type:xI,selectors:[["app-two-factor-email"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:31,vars:11,consts:[["role","dialog","aria-modal","true","aria-labelledby","2faEmailTitle",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","2faEmailTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[3,"organizationId","type","onAuthed",4,"ngIf"],["ngNativeValidate","",3,"appApiAction","ngSubmit",4,"ngIf"],[3,"organizationId","type","onAuthed"],["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["type","success","icon","bwi bwi-check-circle",3,"title"],[1,"d-flex"],[1,"mr-3"],["alt","Email logo",1,"float-right","ml-auto","mfaType1"],[1,"form-group"],["for","email"],["id","email","type","text","name","Email","required","","inputmode","email","appInputVerbatim","false",1,"form-control",3,"ngModel","ngModelChange"],[1,"mb-3","d-flex"],["type","button",1,"btn","btn-outline-primary","btn-sm","btn-submit","align-self-start",3,"appApiAction","disabled","click"],["sendBtn",""],["class","text-success ml-3",4,"ngIf"],["for","token"],["id","token","type","text","name","Token","required","","appInputVerbatim","",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-success","ml-3"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h2",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementStart"](11,"small"),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementStart"](16,"button",5),o["ɵɵpipe"](17,"i18n"),o["ɵɵtext"](18,"\n          "),o["ɵɵelementStart"](19,"span",6),o["ɵɵtext"](20,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵtemplate"](24,pI,2,2,"app-two-factor-verify",7),o["ɵɵtext"](25,"\n      "),o["ɵɵtemplate"](26,fI,27,12,"form",8),o["ɵɵtext"](27,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](10,5,"twoStepLogin"),"\n          "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,7,"emailTitle")),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](17,9,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",!t.authed),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.authed))},directives:[pe,B.NgIf,Hw,d.NgControlStatusGroup,d.NgForm,Y.b,Pe.O,d.DefaultValueAccessor,d.RequiredValidator,J.b,d.NgControlStatus,d.NgModel],pipes:[M.C],encapsulation:2});class CI{constructor(e){this.i18nService=e,this.type=-1,this.twoFactorProviderType=sn}auth(e){this.authed=!0,this.processResponse(e.response)}print(){const e=window.open();e.document.write('<div style="font-size: 18px; text-align: center;"><p>'+this.i18nService.t("twoFactorRecoveryYourCode")+":</p><code style=\"font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;\">"+this.code+'</code></div><p style="text-align: center;">'+new Date+"</p>"),e.onafterprint=()=>e.close(),e.print()}formatString(e){return null==e?null:e.replace(/(.{4})/g,"$1 ").trim().toUpperCase()}processResponse(e){this.code=this.formatString(e.code)}}CI.ɵfac=function(e){return new(e||CI)(o["ɵɵdirectiveInject"](k.D))},CI.ɵcmp=o["ɵɵdefineComponent"]({type:CI,selectors:[["app-two-factor-recovery"]],decls:31,vars:11,consts:[["role","dialog","aria-modal","true","aria-labelledby","2faRecoveryTitle",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","2faRecoveryTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[3,"organizationId","type","onAuthed",4,"ngIf"],[4,"ngIf"],[3,"organizationId","type","onAuthed"],[1,"modal-body","text-center"],[1,"modal-footer"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"text-lg"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h2",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementStart"](11,"small"),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementStart"](16,"button",5),o["ɵɵpipe"](17,"i18n"),o["ɵɵtext"](18,"\n          "),o["ɵɵelementStart"](19,"span",6),o["ɵɵtext"](20,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵtemplate"](24,yI,2,2,"app-two-factor-verify",7),o["ɵɵtext"](25,"\n      "),o["ɵɵtemplate"](26,II,18,6,"ng-container",8),o["ɵɵtext"](27,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](10,5,"twoStepLogin"),"\n          "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,7,"recoveryCodeTitle")),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](17,9,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",!t.authed),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.authed))},directives:[pe,B.NgIf,Hw],pipes:[M.C],encapsulation:2});class EI extends re{}class kI extends re{}var PI=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function AI(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-two-factor-verify",9),o["ɵɵlistener"]("onAuthed",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().auth(t)})),o["ɵɵtext"](1,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("organizationId",e.organizationId)("type",e.type)}}function OI(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",31),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"enabled")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](3,4,"twoStepLoginProviderEnabled"),"\n          "))}function TI(e,t){if(1&e&&(o["ɵɵelementStart"](0,"strong"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().index;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](2,1,"webAuthnkeyX",e+1))}}function BI(e,t){if(1&e&&(o["ɵɵelementStart"](0,"strong"),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function MI(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n                  "),o["ɵɵelementStart"](2,"span"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n                "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,1,"webAuthnMigrated")))}function DI(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n                "),o["ɵɵtemplate"](2,MI,6,3,"ng-container",25),o["ɵɵtext"](3,"\n              "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.migrated)}}function FI(e,t){1&e&&(o["ɵɵelement"](0,"i",37),o["ɵɵpipe"](1,"i18n")),2&e&&o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,1,"loading"))}function RI(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n                "),o["ɵɵtemplate"](2,FI,2,3,"i",35),o["ɵɵtext"](3,"\n                -\n                "),o["ɵɵelementStart"](4,"a",36),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).remove(t)})),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵelementContainerEnd"]()}if(2&e){o["ɵɵnextContext"]();const e=o["ɵɵreference"](1);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.loading),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,2,"remove"))}}function UI(e,t){if(1&e&&(o["ɵɵelementStart"](0,"li",32,33),o["ɵɵtext"](2,"\n              "),o["ɵɵelement"](3,"i",34),o["ɵɵtext"](4,"\n              "),o["ɵɵtemplate"](5,TI,3,4,"strong",25),o["ɵɵtext"](6,"\n              "),o["ɵɵtemplate"](7,BI,2,1,"strong",25),o["ɵɵtext"](8,"\n              "),o["ɵɵtemplate"](9,DI,4,1,"ng-container",25),o["ɵɵtext"](10,"\n              "),o["ɵɵtemplate"](11,RI,8,4,"ng-container",25),o["ɵɵtext"](12,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵreference"](1),i=o["ɵɵnextContext"](2);o["ɵɵproperty"]("appApiAction",e.removePromise),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!e.configured||!e.name),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.configured&&e.name),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.configured&&!n.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",i.keysConfiguredCount>1&&e.configured)}}function zI(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",38),o["ɵɵtext"](3,"\n          "),o["ɵɵelementContainerEnd"]())}function NI(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",38),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,1,"twoFactorU2fWaiting"),"...\n            "))}function VI(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",39),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,1,"twoFactorU2fClickSave"),"\n            "))}function HI(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",40),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,1,"twoFactorU2fProblemReadingTryAgain"),"\n            "))}function jI(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵtemplate"](2,NI,5,3,"ng-container",25),o["ɵɵtext"](3,"\n            "),o["ɵɵtemplate"](4,VI,5,3,"ng-container",25),o["ɵɵtext"](5,"\n            "),o["ɵɵtemplate"](6,HI,5,3,"ng-container",25),o["ɵɵtext"](7,"\n          "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.webAuthnListening),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.webAuthnResponse),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.webAuthnError)}}function LI(e,t){1&e&&(o["ɵɵelement"](0,"i",41),o["ɵɵpipe"](1,"i18n")),2&e&&o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,1,"loading"))}function KI(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"save")))}function GI(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",42,43),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).disable()})),o["ɵɵtext"](2,"\n            "),o["ɵɵelement"](3,"i",41),o["ɵɵpipe"](4,"i18n"),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"span"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"](2);o["ɵɵproperty"]("appApiAction",t.disablePromise)("disabled",e.loading),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](4,4,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,6,"disableAllKeys"))}}function qI(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",10,11),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](2,"\n        "),o["ɵɵelementStart"](3,"div",12),o["ɵɵtext"](4,"\n          "),o["ɵɵtemplate"](5,OI,4,6,"app-callout",13),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"app-callout",14),o["ɵɵtext"](8,"\n            "),o["ɵɵelementStart"](9,"p"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n            "),o["ɵɵelementStart"](13,"ul",15),o["ɵɵtext"](14,"\n              "),o["ɵɵelementStart"](15,"li"),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n          "),o["ɵɵelement"](21,"img",16),o["ɵɵtext"](22,"\n          "),o["ɵɵelementStart"](23,"ul",17),o["ɵɵtext"](24,"\n            "),o["ɵɵtemplate"](25,UI,13,5,"li",18),o["ɵɵtext"](26,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n          "),o["ɵɵelement"](28,"hr"),o["ɵɵtext"](29,"\n          "),o["ɵɵelementStart"](30,"p"),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n          "),o["ɵɵelementStart"](34,"ol"),o["ɵɵtext"](35,"\n            "),o["ɵɵelementStart"](36,"li"),o["ɵɵtext"](37),o["ɵɵpipe"](38,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n            "),o["ɵɵelementStart"](40,"li"),o["ɵɵtext"](41),o["ɵɵpipe"](42,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n            "),o["ɵɵelementStart"](44,"li"),o["ɵɵtext"](45),o["ɵɵpipe"](46,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n            "),o["ɵɵelementStart"](48,"li"),o["ɵɵtext"](49),o["ɵɵpipe"](50,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n          "),o["ɵɵelementStart"](53,"div",19),o["ɵɵtext"](54,"\n            "),o["ɵɵelementStart"](55,"div",20),o["ɵɵtext"](56,"\n              "),o["ɵɵelementStart"](57,"label",21),o["ɵɵtext"](58),o["ɵɵpipe"](59,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n              "),o["ɵɵelementStart"](61,"input",22),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().name=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](62,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](63,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n          "),o["ɵɵelementStart"](65,"button",23,24),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().readKey()})),o["ɵɵtext"](67),o["ɵɵpipe"](68,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](69,"\n          "),o["ɵɵtemplate"](70,zI,4,0,"ng-container",25),o["ɵɵtext"](71,"\n          "),o["ɵɵtemplate"](72,jI,8,3,"ng-container",25),o["ɵɵtext"](73,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](74,"\n        "),o["ɵɵelementStart"](75,"div",26),o["ɵɵtext"](76,"\n          "),o["ɵɵelementStart"](77,"button",27),o["ɵɵtext"](78,"\n            "),o["ɵɵtemplate"](79,LI,2,3,"i",28),o["ɵɵtext"](80,"\n            "),o["ɵɵtemplate"](81,KI,3,3,"span",25),o["ɵɵtext"](82,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](83,"\n          "),o["ɵɵtemplate"](84,GI,10,8,"button",29),o["ɵɵtext"](85,"\n          "),o["ɵɵelementStart"](86,"button",30),o["ɵɵtext"](87),o["ɵɵpipe"](88,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](89,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](90,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵreference"](66),n=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",n.formPromise),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",n.enabled),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,23,"twoFactorWebAuthnWarning")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,25,"twoFactorWebAuthnSupportWeb")),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngForOf",n.keys),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](32,27,"twoFactorWebAuthnAdd"),":"),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](38,29,"twoFactorU2fGiveName")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](42,31,"twoFactorU2fPlugInReadKey")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](46,33,"twoFactorU2fTouchButton")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](50,35,"twoFactorU2fSaveForm")),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](59,37,"name")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",n.name)("disabled",!n.keyIdAvailable),o["ɵɵadvance"](4),o["ɵɵproperty"]("disabled",t.loading||n.webAuthnListening||!n.keyIdAvailable)("appApiAction",n.challengePromise),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](68,39,"readKey"),"\n          "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading),o["ɵɵadvance"](5),o["ɵɵproperty"]("disabled",e.loading||!n.webAuthnResponse),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.loading),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",n.enabled),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](88,41,"close"),"\n          ")}}class _I extends Nw{constructor(e,t,n,i,r,o){super(e,t,n,r,o),this.ngZone=i,this.type=sn.WebAuthn,this.keyIdAvailable=null,this.keysConfiguredCount=0}auth(e){super.auth(e),this.processResponse(e.response)}submit(){const e=Object.create(null,{enable:{get:()=>super.enable}});return PI(this,void 0,void 0,(function*(){if(null==this.webAuthnResponse||null==this.keyIdAvailable)return Promise.reject();const t=yield this.buildRequestModel(kI);return t.deviceResponse=this.webAuthnResponse,t.id=this.keyIdAvailable,t.name=this.name,e.enable.call(this,(()=>PI(this,void 0,void 0,(function*(){this.formPromise=this.apiService.putTwoFactorWebAuthn(t);const e=yield this.formPromise;yield this.processResponse(e)}))))}))}disable(){return super.disable(this.formPromise)}remove(e){return PI(this,void 0,void 0,(function*(){if(this.keysConfiguredCount<=1||null!=e.removePromise)return;const t=null!=e.name?e.name:this.i18nService.t("webAuthnkeyX",e.id);if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("removeU2fConfirmation"),t,this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return;const n=yield this.buildRequestModel(EI);n.id=e.id;try{e.removePromise=this.apiService.deleteTwoFactorWebAuthn(n);const t=yield e.removePromise;e.removePromise=null,yield this.processResponse(t)}catch(i){this.logService.error(i)}}))}readKey(){return PI(this,void 0,void 0,(function*(){if(null==this.keyIdAvailable)return;const e=yield this.buildRequestModel(re);try{this.challengePromise=this.apiService.getTwoFactorWebAuthnChallenge(e);const t=yield this.challengePromise;this.readDevice(t)}catch(t){this.logService.error(t)}}))}readDevice(e){console.log("listening for key..."),this.resetWebAuthn(!0),navigator.credentials.create({publicKey:e}).then((e=>{this.ngZone.run((()=>{this.webAuthnListening=!1,this.webAuthnResponse=e}))})).catch((e=>{console.error(e),this.resetWebAuthn(!1),this.webAuthnError=!0}))}resetWebAuthn(e=!1){this.webAuthnResponse=null,this.webAuthnError=!1,this.webAuthnListening=e}processResponse(e){this.resetWebAuthn(),this.keys=[],this.keyIdAvailable=null,this.name=null,this.keysConfiguredCount=0;for(let t=1;t<=5;t++){if(null!=e.keys){const n=e.keys.filter((e=>e.id===t));if(n.length>0){this.keysConfiguredCount++,this.keys.push({id:t,name:n[0].name,configured:!0,migrated:n[0].migrated,removePromise:null});continue}}this.keys.push({id:t,name:null,configured:!1,removePromise:null}),null==this.keyIdAvailable&&(this.keyIdAvailable=t)}this.enabled=e.enabled}}_I.ɵfac=function(e){return new(e||_I)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](o.NgZone),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Yn.i))},_I.ɵcmp=o["ɵɵdefineComponent"]({type:_I,selectors:[["app-two-factor-webauthn"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:31,vars:11,consts:[["role","dialog","aria-modal","true","aria-labelledby","2faU2fTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","2faU2fTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[3,"organizationId","type","onAuthed",4,"ngIf"],["ngNativeValidate","",3,"appApiAction","ngSubmit",4,"ngIf"],[3,"organizationId","type","onAuthed"],["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-body"],["type","success","icon","bwi bwi-check-circle",3,"title",4,"ngIf"],["type","warning"],[1,"mb-0"],["alt","FIDO2 WebAuthn logo'",1,"float-right","ml-5","mfaType7"],[1,"bwi-ul"],[3,"appApiAction",4,"ngFor","ngForOf"],[1,"row"],[1,"form-group","col-6"],["for","name"],["id","name","type","text","name","Name",1,"form-control",3,"ngModel","disabled","ngModelChange"],["type","button",1,"btn","btn-outline-secondary","mr-2",3,"disabled","appApiAction","click"],["readKeyBtn",""],[4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","bwi bwi-spinner bwi-spin","aria-hidden","true",3,"title",4,"ngIf"],["type","button","class","btn btn-outline-secondary btn-submit",3,"appApiAction","disabled","click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["type","success","icon","bwi bwi-check-circle",3,"title"],[3,"appApiAction"],["removeKeyBtn",""],[1,"bwi","bwi-li","bwi-key"],["class","bwi bwi-spin bwi-spinner text-muted bwi-fw","aria-hidden","true",3,"title",4,"ngIf"],["href","#","appStopClick","",3,"click"],["aria-hidden","true",1,"bwi","bwi-spin","bwi-spinner","text-muted","bwi-fw",3,"title"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted"],["aria-hidden","true",1,"bwi","bwi-check-circle","text-success"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle","text-danger"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button",1,"btn","btn-outline-secondary","btn-submit",3,"appApiAction","disabled","click"],["disableBtn",""]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h2",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementStart"](11,"small"),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementStart"](16,"button",5),o["ɵɵpipe"](17,"i18n"),o["ɵɵtext"](18,"\n          "),o["ɵɵelementStart"](19,"span",6),o["ɵɵtext"](20,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵtemplate"](24,AI,2,2,"app-two-factor-verify",7),o["ɵɵtext"](25,"\n      "),o["ɵɵtemplate"](26,qI,91,43,"form",8),o["ɵɵtext"](27,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](10,5,"twoStepLogin"),"\n          "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,7,"webAuthnTitle")),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](17,9,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",!t.authed),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.authed))},directives:[pe,B.NgIf,Hw,d.NgControlStatusGroup,d.NgForm,Y.b,Pe.O,B.NgForOf,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,Tn],pipes:[M.C],encapsulation:2});class $I extends re{}var WI=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function QI(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-two-factor-verify",9),o["ɵɵlistener"]("onAuthed",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().auth(t)})),o["ɵɵtext"](1,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("organizationId",e.organizationId)("type",e.type)}}function YI(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",29),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"enabled")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](3,4,"twoStepLoginProviderEnabled"),"\n          "))}function ZI(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"input",34),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().$implicit.key=t})),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](),t=e.index,n=e.$implicit;o["ɵɵpropertyInterpolate1"]("id","key",t+1,""),o["ɵɵpropertyInterpolate1"]("name","Key",t+1,""),o["ɵɵproperty"]("ngModel",n.key)}}function JI(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",35),o["ɵɵtext"](1,"\n                "),o["ɵɵelementStart"](2,"span",36),o["ɵɵtext"](3),o["ɵɵelementEnd"](),o["ɵɵtext"](4,"\n                "),o["ɵɵelementStart"](5,"button",37),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).remove(t)})),o["ɵɵpipe"](6,"i18n"),o["ɵɵtext"](7,"\n                  "),o["ɵɵelement"](8,"i",38),o["ɵɵtext"](9,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n              "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](e.existingKey),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](6,2,"remove"))}}function XI(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",30),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"label",31),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵtemplate"](6,ZI,1,3,"input",32),o["ɵɵtext"](7,"\n              "),o["ɵɵtemplate"](8,JI,11,4,"div",33),o["ɵɵtext"](9,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=t.index;o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("for","key",n+1,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](4,4,"yubikeyX",n+1)),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.existingKey),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.existingKey)}}function eC(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",39,40),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).disable()})),o["ɵɵtext"](2,"\n            "),o["ɵɵelement"](3,"i",26),o["ɵɵpipe"](4,"i18n"),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"span"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"](2);o["ɵɵproperty"]("appApiAction",t.disablePromise)("disabled",e.loading),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](4,4,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,6,"disableAllKeys"))}}function tC(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",10,11),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](2,"\n        "),o["ɵɵelementStart"](3,"div",12),o["ɵɵtext"](4,"\n          "),o["ɵɵtemplate"](5,YI,4,6,"app-callout",13),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"app-callout",14),o["ɵɵtext"](8,"\n            "),o["ɵɵelementStart"](9,"p"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n            "),o["ɵɵelementStart"](13,"ul",15),o["ɵɵtext"](14,"\n              "),o["ɵɵelementStart"](15,"li"),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n              "),o["ɵɵelementStart"](19,"li"),o["ɵɵtext"](20),o["ɵɵpipe"](21,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n          "),o["ɵɵelement"](25,"img",16),o["ɵɵtext"](26,"\n          "),o["ɵɵelementStart"](27,"p"),o["ɵɵtext"](28),o["ɵɵpipe"](29,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n          "),o["ɵɵelementStart"](31,"ol"),o["ɵɵtext"](32,"\n            "),o["ɵɵelementStart"](33,"li"),o["ɵɵtext"](34),o["ɵɵpipe"](35,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n            "),o["ɵɵelementStart"](37,"li"),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n            "),o["ɵɵelementStart"](41,"li"),o["ɵɵtext"](42),o["ɵɵpipe"](43,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n            "),o["ɵɵelementStart"](45,"li"),o["ɵɵtext"](46),o["ɵɵpipe"](47,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n          "),o["ɵɵelement"](50,"hr"),o["ɵɵtext"](51,"\n          "),o["ɵɵelementStart"](52,"div",17),o["ɵɵtext"](53,"\n            "),o["ɵɵtemplate"](54,XI,10,7,"div",18),o["ɵɵtext"](55,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n          "),o["ɵɵelementStart"](57,"strong",19),o["ɵɵtext"](58),o["ɵɵpipe"](59,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n          "),o["ɵɵelementStart"](61,"div",20),o["ɵɵtext"](62,"\n            "),o["ɵɵelementStart"](63,"input",21),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().nfc=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n            "),o["ɵɵelementStart"](65,"label",22),o["ɵɵtext"](66),o["ɵɵpipe"](67,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](68,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](69,"\n          "),o["ɵɵelementStart"](70,"small",23),o["ɵɵtext"](71),o["ɵɵpipe"](72,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](73,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](74,"\n        "),o["ɵɵelementStart"](75,"div",24),o["ɵɵtext"](76,"\n          "),o["ɵɵelementStart"](77,"button",25),o["ɵɵtext"](78,"\n            "),o["ɵɵelement"](79,"i",26),o["ɵɵpipe"](80,"i18n"),o["ɵɵtext"](81,"\n            "),o["ɵɵelementStart"](82,"span"),o["ɵɵtext"](83),o["ɵɵpipe"](84,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](85,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](86,"\n          "),o["ɵɵtemplate"](87,eC,10,8,"button",27),o["ɵɵtext"](88,"\n          "),o["ɵɵelementStart"](89,"button",28),o["ɵɵtext"](90),o["ɵɵpipe"](91,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](92,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](93,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",t.enabled),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,20,"twoFactorYubikeyWarning")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,22,"twoFactorYubikeySupportUsb")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](21,24,"twoFactorYubikeySupportMobile")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](29,26,"twoFactorYubikeyAdd"),":"),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](35,28,"twoFactorYubikeyPlugIn")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](39,30,"twoFactorYubikeySelectKey")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](43,32,"twoFactorYubikeyTouchButton")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](47,34,"twoFactorYubikeySaveForm")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngForOf",t.keys),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](59,36,"nfcSupport")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngModel",t.nfc),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](67,38,"twoFactorYubikeySupportsNfc")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](72,40,"twoFactorYubikeySupportsNfcDesc")),o["ɵɵadvance"](6),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](80,42,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](84,44,"save")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.enabled),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](91,46,"close"),"\n          ")}}class nC extends Nw{constructor(e,t,n,i,r){super(e,t,n,i,r),this.type=sn.Yubikey,this.nfc=!1}auth(e){super.auth(e),this.processResponse(e.response)}submit(){const e=Object.create(null,{enable:{get:()=>super.enable}});return WI(this,void 0,void 0,(function*(){const t=yield this.buildRequestModel($I);return t.key1=null!=this.keys&&this.keys.length>0?this.keys[0].key:null,t.key2=null!=this.keys&&this.keys.length>1?this.keys[1].key:null,t.key3=null!=this.keys&&this.keys.length>2?this.keys[2].key:null,t.key4=null!=this.keys&&this.keys.length>3?this.keys[3].key:null,t.key5=null!=this.keys&&this.keys.length>4?this.keys[4].key:null,t.nfc=this.nfc,e.enable.call(this,(()=>WI(this,void 0,void 0,(function*(){this.formPromise=this.apiService.putTwoFactorYubiKey(t);const e=yield this.formPromise;yield this.processResponse(e),this.platformUtilsService.showToast("success",null,this.i18nService.t("yubikeysUpdated"))}))))}))}disable(){return super.disable(this.disablePromise)}remove(e){e.existingKey=null,e.key=null}processResponse(e){this.enabled=e.enabled,this.keys=[{key:e.key1,existingKey:this.padRight(e.key1)},{key:e.key2,existingKey:this.padRight(e.key2)},{key:e.key3,existingKey:this.padRight(e.key3)},{key:e.key4,existingKey:this.padRight(e.key4)},{key:e.key5,existingKey:this.padRight(e.key5)}],this.nfc=e.nfc||!e.enabled}padRight(e,t="•",n=44){if(null==e||null==t||e.length>=n)return e;const i=(n-e.length)/t.length;for(let r=0;r<i;r++)e+=t;return e}}nC.ɵfac=function(e){return new(e||nC)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Yn.i))},nC.ɵcmp=o["ɵɵdefineComponent"]({type:nC,selectors:[["app-two-factor-yubikey"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:30,vars:8,consts:[["role","dialog","aria-modal","true","aria-labelledby","2faYubiKeyTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","2faYubiKeyTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[3,"organizationId","type","onAuthed",4,"ngIf"],["ngNativeValidate","","autocomplete","off",3,"appApiAction","ngSubmit",4,"ngIf"],[3,"organizationId","type","onAuthed"],["ngNativeValidate","","autocomplete","off",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-body"],["type","success","icon","bwi bwi-check-circle",3,"title",4,"ngIf"],["type","warning"],[1,"mb-0"],["alt","YubiKey OTP security key logo",1,"float-right","mfaType3"],[1,"row"],["class","form-group col-6",4,"ngFor","ngForOf"],[1,"d-block","mb-2"],[1,"form-check"],["type","checkbox","id","nfc","name","Nfc",1,"form-check-input",3,"ngModel","ngModelChange"],["for","nfc",1,"form-check-label"],[1,"form-text","text-muted"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","class","btn btn-outline-secondary btn-submit",3,"appApiAction","disabled","click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["type","success","icon","bwi bwi-check-circle",3,"title"],[1,"form-group","col-6"],[3,"for"],["type","password","class","form-control","appInputVerbatim","","autocomplete","new-password",3,"id","name","ngModel","ngModelChange",4,"ngIf"],["class","d-flex",4,"ngIf"],["type","password","appInputVerbatim","","autocomplete","new-password",1,"form-control",3,"id","name","ngModel","ngModelChange"],[1,"d-flex"],[1,"mr-2"],["type","button",1,"btn","btn-link","text-danger","ml-auto",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-minus-circle","bwi-lg"],["type","button",1,"btn","btn-outline-secondary","btn-submit",3,"appApiAction","disabled","click"],["disableBtn",""]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h2",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementStart"](11,"small"),o["ɵɵtext"](12,"YubiKey"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"button",5),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"span",6),o["ɵɵtext"](19,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵtemplate"](23,QI,2,2,"app-two-factor-verify",7),o["ɵɵtext"](24,"\n      "),o["ɵɵtemplate"](25,tC,94,48,"form",8),o["ɵɵtext"](26,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](10,4,"twoStepLogin"),"\n          "),o["ɵɵadvance"](6),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](16,6,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",!t.authed),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.authed))},directives:[pe,B.NgIf,Hw,d.NgControlStatusGroup,d.NgForm,Y.b,Pe.O,B.NgForOf,d.CheckboxControlValueAccessor,d.NgControlStatus,d.NgModel,d.DefaultValueAccessor,J.b],pipes:[M.C],encapsulation:2});var iC=n(24083),rC=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const oC=["recoveryTemplate"],aC=["authenticatorTemplate"],sC=["yubikeyTemplate"],lC=["duoTemplate"],dC=["emailTemplate"],cC=["webAuthnTemplate"];function pC(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"twoStepLoginDesc")))}function uC(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"twoStepLoginOrganizationDesc")))}function mC(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"bit-callout",13),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"button",14),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().recoveryCode()})),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,2,"twoStepLoginRecoveryWarning")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](8,4,"viewRecoveryCode"),"\n  "))}function hC(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",15),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"span",16),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function vC(e,t){1&e&&(o["ɵɵelementStart"](0,"bit-callout",13),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](2,1,"twoStepLoginPolicyUserWarning"),"\n"))}function gC(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",24),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span",16),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"enabled")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"enabled")))}function fC(e,t){1&e&&o["ɵɵelement"](0,"app-premium-badge")}function xC(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"li",17),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",18),o["ɵɵtext"](3,"\n      "),o["ɵɵelement"](4,"img",19),o["ɵɵtext"](5,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n    "),o["ɵɵelementStart"](7,"div",20),o["ɵɵtext"](8,"\n      "),o["ɵɵelementStart"](9,"h3",21),o["ɵɵtext"](10),o["ɵɵtemplate"](11,gC,9,6,"ng-container",1),o["ɵɵtext"](12,"\n        "),o["ɵɵtemplate"](13,fC,1,0,"app-premium-badge",1),o["ɵɵtext"](14,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](15),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n    "),o["ɵɵelementStart"](17,"div",22),o["ɵɵtext"](18,"\n      "),o["ɵɵelementStart"](19,"button",23),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"]().manage(t.type)})),o["ɵɵtext"](20),o["ɵɵpipe"](21,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵclassMap"]("mfaType"+e.type),o["ɵɵproperty"]("alt",e.name+" logo"),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n        ",e.name,"\n        "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.enabled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.premium),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",e.description,"\n    "),o["ɵɵadvance"](4),o["ɵɵproperty"]("disabled",!n.canAccessPremium&&e.premium),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](21,9,"manage"),"\n      ")}}function yC(e,t){if(1&e&&(o["ɵɵelementStart"](0,"bit-submit-button",36),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){o["ɵɵnextContext"]();const e=o["ɵɵreference"](1);o["ɵɵproperty"]("loading",e.loading),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](2,2,"save"),"\n      ")}}function SC(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",25,26),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",27),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",28),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"h2",29),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"div",30),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"div",31),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"input",32),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().enableDeviceVerification=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n          "),o["ɵɵelementStart"](17,"label",33),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n        "),o["ɵɵelementStart"](22,"small",34),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n      "),o["ɵɵtemplate"](27,yC,3,4,"bit-submit-button",35),o["ɵɵtext"](28,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",e.formPromise),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](9,7,"deviceVerification"),"\n      "),o["ɵɵadvance"](7),o["ɵɵpropertyInterpolate"]("disabled",!e.isDeviceVerificationSectionEnabled),o["ɵɵproperty"]("ngModel",e.enableDeviceVerification),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](19,9,"enableDeviceVerification"),"\n          "),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](24,11,"deviceVerificationDesc")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.isDeviceVerificationSectionEnabled)}}function bC(e,t){}function wC(e,t){}function IC(e,t){}function CC(e,t){}function EC(e,t){}function kC(e,t){}const PC=function(e){return{"mt-5":e}};class AC{constructor(e,t,n,i,r,o,a,s){this.apiService=e,this.modalService=t,this.messagingService=n,this.policyService=i,this.stateService=r,this.platformUtilsService=o,this.i18nService=a,this.logService=s,this.providers=[],this.showPolicyWarning=!1,this.loading=!0}ngOnInit(){return rC(this,void 0,void 0,(function*(){this.canAccessPremium=yield this.stateService.getCanAccessPremium();try{const e=yield this.apiService.getDeviceVerificationSettings();this.isDeviceVerificationSectionEnabled=e.isDeviceVerificationSectionEnabled,this.enableDeviceVerification=e.unknownDeviceVerificationEnabled}catch(e){this.logService.error(e)}for(const t in un){if(!un.hasOwnProperty(t))continue;const e=un[t];this.filterProvider(e.type)||this.providers.push({type:e.type,name:e.name,description:e.description,enabled:!1,premium:e.premium,sort:e.sort})}this.providers.sort(((e,t)=>e.sort-t.sort)),yield this.load()}))}load(){return rC(this,void 0,void 0,(function*(){this.loading=!0;(yield this.getTwoFactorProviders()).data.forEach((e=>{this.providers.forEach((t=>{e.type===t.type&&(t.enabled=e.enabled)}))})),this.evaluatePolicies(),this.loading=!1}))}manage(e){return rC(this,void 0,void 0,(function*(){switch(e){case sn.Authenticator:(yield this.openModal(this.authenticatorModalRef,lI)).onUpdated.subscribe((e=>{this.updateStatus(e,sn.Authenticator)}));break;case sn.Yubikey:(yield this.openModal(this.yubikeyModalRef,nC)).onUpdated.subscribe((e=>{this.updateStatus(e,sn.Yubikey)}));break;case sn.Duo:(yield this.openModal(this.duoModalRef,Ww)).onUpdated.subscribe((e=>{this.updateStatus(e,sn.Duo)}));break;case sn.Email:(yield this.openModal(this.emailModalRef,xI)).onUpdated.subscribe((e=>{this.updateStatus(e,sn.Email)}));break;case sn.WebAuthn:(yield this.openModal(this.webAuthnModalRef,_I)).onUpdated.subscribe((e=>{this.updateStatus(e,sn.WebAuthn)}));break}}))}recoveryCode(){this.openModal(this.recoveryModalRef,CI)}premiumRequired(){return rC(this,void 0,void 0,(function*(){this.canAccessPremium||this.messagingService.send("premiumRequired")}))}getTwoFactorProviders(){return this.apiService.getTwoFactorProviders()}filterProvider(e){return e===sn.OrganizationDuo}openModal(e,t){return rC(this,void 0,void 0,(function*(){const[n,i]=yield this.modalService.openViewRef(t,e);return this.modal=n,i}))}updateStatus(e,t){e||null==this.modal||this.modal.close(),this.providers.forEach((n=>{n.type===t&&(n.enabled=e)})),this.evaluatePolicies()}evaluatePolicies(){return rC(this,void 0,void 0,(function*(){null==this.organizationId&&1===this.providers.filter((e=>e.enabled)).length?this.showPolicyWarning=yield this.policyService.policyAppliesToUser(Kr.M.TwoFactorAuthentication):this.showPolicyWarning=!1}))}submit(){return rC(this,void 0,void 0,(function*(){try{if(this.enableDeviceVerification){const e=yield this.stateService.getEmail();if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("areYouSureYouWantToEnableDeviceVerificationTheVerificationCodeEmailsWillArriveAtX",e),this.i18nService.t("deviceVerification"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return}this.formPromise=this.apiService.putDeviceVerificationSettings(new Qw(this.enableDeviceVerification)),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("updatedDeviceVerification"))}catch(e){this.logService.error(e)}}))}}AC.ɵfac=function(e){return new(e||AC)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](L.$))},AC.ɵcmp=o["ɵɵdefineComponent"]({type:AC,selectors:[["app-two-factor-setup"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](oC,7,o.ViewContainerRef),o["ɵɵviewQuery"](aC,7,o.ViewContainerRef),o["ɵɵviewQuery"](sC,7,o.ViewContainerRef),o["ɵɵviewQuery"](lC,7,o.ViewContainerRef),o["ɵɵviewQuery"](dC,7,o.ViewContainerRef),o["ɵɵviewQuery"](cC,7,o.ViewContainerRef)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.recoveryModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.authenticatorModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.yubikeyModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.duoModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.emailModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.webAuthnModalRef=e.first)}},decls:46,vars:16,consts:[[1,"tabbed-header"],[4,"ngIf"],["type","warning",4,"ngIf"],[3,"ngClass"],[1,"list-group","list-group-2fa"],["class","list-group-item d-flex align-items-center",4,"ngFor","ngForOf"],["ngNativeValidate","",3,"appApiAction","ngSubmit",4,"ngIf"],["authenticatorTemplate",""],["recoveryTemplate",""],["duoTemplate",""],["emailTemplate",""],["yubikeyTemplate",""],["webAuthnTemplate",""],["type","warning"],["bitButton","","buttonType","secondary",3,"click"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-fw","text-muted",3,"title"],[1,"sr-only"],[1,"list-group-item","d-flex","align-items-center"],[1,"logo-2fa","d-flex","justify-content-center"],[3,"alt"],[1,"mx-4"],[1,"mb-0"],[1,"ml-auto"],["bitButton","","buttonType","secondary",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-check","text-success","bwi-fw",3,"title"],["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"row"],[1,"col-12"],[1,"mt-5","spaced-header"],[1,"form-group"],[1,"form-check"],["type","checkbox","id","enableDeviceVerification","name","enableDeviceVerification",1,"form-check-input",3,"disabled","ngModel","ngModelChange"],["for","enableDeviceVerification",1,"form-check-label"],[1,"form-text","text-muted"],[3,"loading",4,"ngIf"],[3,"loading"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵtemplate"](7,pC,3,3,"p",1),o["ɵɵtext"](8,"\n"),o["ɵɵtemplate"](9,uC,3,3,"p",1),o["ɵɵtext"](10,"\n"),o["ɵɵtemplate"](11,mC,10,6,"bit-callout",2),o["ɵɵtext"](12,"\n"),o["ɵɵelementStart"](13,"h2",3),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵtemplate"](16,hC,9,6,"small",1),o["ɵɵtext"](17,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n"),o["ɵɵtemplate"](19,vC,3,3,"bit-callout",2),o["ɵɵtext"](20,"\n"),o["ɵɵelementStart"](21,"ul",4),o["ɵɵtext"](22,"\n  "),o["ɵɵtemplate"](23,xC,24,11,"li",5),o["ɵɵtext"](24,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n"),o["ɵɵtemplate"](26,SC,31,13,"form",6),o["ɵɵtext"](27,"\n\n"),o["ɵɵtemplate"](28,bC,0,0,"ng-template",null,7,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](30,"\n"),o["ɵɵtemplate"](31,wC,0,0,"ng-template",null,8,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](33,"\n"),o["ɵɵtemplate"](34,IC,0,0,"ng-template",null,9,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](36,"\n"),o["ɵɵtemplate"](37,CC,0,0,"ng-template",null,10,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](39,"\n"),o["ɵɵtemplate"](40,EC,0,0,"ng-template",null,11,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](42,"\n"),o["ɵɵtemplate"](43,kC,0,0,"ng-template",null,12,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](45,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,10,"twoStepLogin")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!t.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](14,PC,!t.organizationId)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](15,12,"providers"),"\n  "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.showPolicyWarning),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",t.providers),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.loading))},directives:[B.NgIf,B.NgClass,B.NgForOf,iC.O,et.H,Oo,d.NgControlStatusGroup,d.NgForm,Y.b,d.CheckboxControlValueAccessor,d.NgControlStatus,d.NgModel,at],pipes:[M.C],encapsulation:2});var OC=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function TC(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"twoStepLoginDesc")))}function BC(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"twoStepLoginOrganizationDesc")))}function MC(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"bit-callout",13),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"button",14),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().recoveryCode()})),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,2,"twoStepLoginRecoveryWarning")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](8,4,"viewRecoveryCode"),"\n  "))}function DC(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",15),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"span",16),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function FC(e,t){1&e&&(o["ɵɵelementStart"](0,"bit-callout",13),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](2,1,"twoStepLoginPolicyUserWarning"),"\n"))}function RC(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",24),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span",16),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"enabled")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"enabled")))}function UC(e,t){1&e&&o["ɵɵelement"](0,"app-premium-badge")}function zC(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"li",17),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",18),o["ɵɵtext"](3,"\n      "),o["ɵɵelement"](4,"img",19),o["ɵɵtext"](5,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n    "),o["ɵɵelementStart"](7,"div",20),o["ɵɵtext"](8,"\n      "),o["ɵɵelementStart"](9,"h3",21),o["ɵɵtext"](10),o["ɵɵtemplate"](11,RC,9,6,"ng-container",1),o["ɵɵtext"](12,"\n        "),o["ɵɵtemplate"](13,UC,1,0,"app-premium-badge",1),o["ɵɵtext"](14,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](15),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n    "),o["ɵɵelementStart"](17,"div",22),o["ɵɵtext"](18,"\n      "),o["ɵɵelementStart"](19,"button",23),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"]().manage(t.type)})),o["ɵɵtext"](20),o["ɵɵpipe"](21,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵclassMap"]("mfaType"+e.type),o["ɵɵproperty"]("alt",e.name+" logo"),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n        ",e.name,"\n        "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.enabled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.premium),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",e.description,"\n    "),o["ɵɵadvance"](4),o["ɵɵproperty"]("disabled",!n.canAccessPremium&&e.premium),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](21,9,"manage"),"\n      ")}}function NC(e,t){if(1&e&&(o["ɵɵelementStart"](0,"bit-submit-button",36),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){o["ɵɵnextContext"]();const e=o["ɵɵreference"](1);o["ɵɵproperty"]("loading",e.loading),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](2,2,"save"),"\n      ")}}function VC(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",25,26),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",27),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",28),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"h2",29),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"div",30),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"div",31),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"input",32),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().enableDeviceVerification=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n          "),o["ɵɵelementStart"](17,"label",33),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n        "),o["ɵɵelementStart"](22,"small",34),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n      "),o["ɵɵtemplate"](27,NC,3,4,"bit-submit-button",35),o["ɵɵtext"](28,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",e.formPromise),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](9,7,"deviceVerification"),"\n      "),o["ɵɵadvance"](7),o["ɵɵpropertyInterpolate"]("disabled",!e.isDeviceVerificationSectionEnabled),o["ɵɵproperty"]("ngModel",e.enableDeviceVerification),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](19,9,"enableDeviceVerification"),"\n          "),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](24,11,"deviceVerificationDesc")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.isDeviceVerificationSectionEnabled)}}function HC(e,t){}function jC(e,t){}function LC(e,t){}function KC(e,t){}function GC(e,t){}function qC(e,t){}const _C=function(e){return{"mt-5":e}};class $C extends AC{constructor(e,t,n,i,r,o,a,s,l){super(e,t,n,i,o,a,s,l),this.route=r}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return OC(this,void 0,void 0,(function*(){this.route.parent.parent.params.subscribe((t=>OC(this,void 0,void 0,(function*(){this.organizationId=t.organizationId,yield e.ngOnInit.call(this)}))))}))}manage(e){return OC(this,void 0,void 0,(function*(){switch(e){case sn.OrganizationDuo:{const e=yield this.openModal(this.duoModalRef,Ww);e.type=sn.OrganizationDuo,e.organizationId=this.organizationId,e.onUpdated.subscribe((e=>{this.updateStatus(e,sn.OrganizationDuo)}));break}}}))}getTwoFactorProviders(){return this.apiService.getTwoFactorOrganizationProviders(this.organizationId)}filterProvider(e){return e!==sn.OrganizationDuo}}$C.ɵfac=function(e){return new(e||$C)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](L.$))},$C.ɵcmp=o["ɵɵdefineComponent"]({type:$C,selectors:[["app-two-factor-setup"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:46,vars:16,consts:[[1,"tabbed-header"],[4,"ngIf"],["type","warning",4,"ngIf"],[3,"ngClass"],[1,"list-group","list-group-2fa"],["class","list-group-item d-flex align-items-center",4,"ngFor","ngForOf"],["ngNativeValidate","",3,"appApiAction","ngSubmit",4,"ngIf"],["authenticatorTemplate",""],["recoveryTemplate",""],["duoTemplate",""],["emailTemplate",""],["yubikeyTemplate",""],["webAuthnTemplate",""],["type","warning"],["bitButton","","buttonType","secondary",3,"click"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-fw","text-muted",3,"title"],[1,"sr-only"],[1,"list-group-item","d-flex","align-items-center"],[1,"logo-2fa","d-flex","justify-content-center"],[3,"alt"],[1,"mx-4"],[1,"mb-0"],[1,"ml-auto"],["bitButton","","buttonType","secondary",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-check","text-success","bwi-fw",3,"title"],["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"row"],[1,"col-12"],[1,"mt-5","spaced-header"],[1,"form-group"],[1,"form-check"],["type","checkbox","id","enableDeviceVerification","name","enableDeviceVerification",1,"form-check-input",3,"disabled","ngModel","ngModelChange"],["for","enableDeviceVerification",1,"form-check-label"],[1,"form-text","text-muted"],[3,"loading",4,"ngIf"],[3,"loading"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵtemplate"](7,TC,3,3,"p",1),o["ɵɵtext"](8,"\n"),o["ɵɵtemplate"](9,BC,3,3,"p",1),o["ɵɵtext"](10,"\n"),o["ɵɵtemplate"](11,MC,10,6,"bit-callout",2),o["ɵɵtext"](12,"\n"),o["ɵɵelementStart"](13,"h2",3),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵtemplate"](16,DC,9,6,"small",1),o["ɵɵtext"](17,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n"),o["ɵɵtemplate"](19,FC,3,3,"bit-callout",2),o["ɵɵtext"](20,"\n"),o["ɵɵelementStart"](21,"ul",4),o["ɵɵtext"](22,"\n  "),o["ɵɵtemplate"](23,zC,24,11,"li",5),o["ɵɵtext"](24,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n"),o["ɵɵtemplate"](26,VC,31,13,"form",6),o["ɵɵtext"](27,"\n\n"),o["ɵɵtemplate"](28,HC,0,0,"ng-template",null,7,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](30,"\n"),o["ɵɵtemplate"](31,jC,0,0,"ng-template",null,8,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](33,"\n"),o["ɵɵtemplate"](34,LC,0,0,"ng-template",null,9,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](36,"\n"),o["ɵɵtemplate"](37,KC,0,0,"ng-template",null,10,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](39,"\n"),o["ɵɵtemplate"](40,GC,0,0,"ng-template",null,11,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](42,"\n"),o["ɵɵtemplate"](43,qC,0,0,"ng-template",null,12,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](45,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,10,"twoStepLogin")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!t.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](14,_C,!t.organizationId)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](15,12,"providers"),"\n  "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.showPolicyWarning),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",t.providers),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.loading))},directives:[B.NgIf,B.NgClass,B.NgForOf,iC.O,et.H,Oo,d.NgControlStatusGroup,d.NgForm,Y.b,d.CheckboxControlValueAccessor,d.NgControlStatus,d.NgModel,at],pipes:[M.C],encapsulation:2});var WC=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const QC=["cipherAddEdit"];class YC{constructor(e,t,n,i,r){this.modalService=e,this.messagingService=t,this.requiresPaid=n,this.stateService=i,this.passwordRepromptService=r,this.loading=!1,this.hasLoaded=!1,this.ciphers=[]}load(){return WC(this,void 0,void 0,(function*(){this.loading=!0,yield this.setCiphers(),this.loading=!1,this.hasLoaded=!0}))}selectCipher(e){return WC(this,void 0,void 0,(function*(){if(!(yield this.repromptCipher(e)))return;const t=null!=this.organization?zp:ba,[n,i]=yield this.modalService.openViewRef(t,this.cipherAddEditModalRef,(t=>{null!=this.organization&&(t.organization=this.organization,t.organizationId=this.organization.id),t.cipherId=null==e?null:e.id,t.onSavedCipher.subscribe((()=>WC(this,void 0,void 0,(function*(){n.close(),yield this.load()})))),t.onDeletedCipher.subscribe((()=>WC(this,void 0,void 0,(function*(){n.close(),yield this.load()})))),t.onRestoredCipher.subscribe((()=>WC(this,void 0,void 0,(function*(){n.close(),yield this.load()}))))}));return i}))}checkAccess(){return WC(this,void 0,void 0,(function*(){if(null!=this.organization){if(this.requiresPaid&&!this.organization.useTotp)return this.messagingService.send("upgradeOrganization",{organizationId:this.organization.id}),!1}else{const e=yield this.stateService.getCanAccessPremium();if(this.requiresPaid&&!e)return this.messagingService.send("premiumRequired"),this.loading=!1,!1}return!0}))}setCiphers(){return WC(this,void 0,void 0,(function*(){this.ciphers=[]}))}repromptCipher(e){return WC(this,void 0,void 0,(function*(){return e.reprompt===Hr.N.None||(yield this.passwordRepromptService.showPasswordPrompt())}))}}YC.ɵfac=function(e){o["ɵɵinvalidFactory"]()},YC.ɵdir=o["ɵɵdefineDirective"]({type:YC,viewQuery:function(e,t){if(1&e&&o["ɵɵviewQuery"](QC,7,o.ViewContainerRef),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.cipherAddEditModalRef=e.first)}}});var ZC=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function JC(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",7),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"goodNews")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](3,4,"noExposedPasswords"),"\n  "))}function XC(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"a",18),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).selectCipher(t)})),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"editItem")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name)}}function eE(e,t){if(1&e&&(o["ɵɵtext"](0,"\n              "),o["ɵɵelementStart"](1,"span"),o["ɵɵtext"](2),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n            ")),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name)}}function tE(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",19),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",20),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"shared")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"shared")))}function nE(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",21),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",20),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"attachments")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"attachments")))}function iE(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"td",11),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"app-vault-icon",12),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"td",13),o["ɵɵtext"](8,"\n            "),o["ɵɵtemplate"](9,XC,6,4,"ng-container",14),o["ɵɵtext"](10,"\n            "),o["ɵɵtemplate"](11,eE,4,1,"ng-template",null,15,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](13,"\n            "),o["ɵɵtemplate"](14,tE,9,6,"ng-container",6),o["ɵɵtext"](15,"\n            "),o["ɵɵtemplate"](16,nE,9,6,"ng-container",6),o["ɵɵtext"](17,"\n            "),o["ɵɵelement"](18,"br"),o["ɵɵtext"](19,"\n            "),o["ɵɵelementStart"](20,"small"),o["ɵɵtext"](21),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n          "),o["ɵɵelementStart"](24,"td",16),o["ɵɵtext"](25,"\n            "),o["ɵɵelementStart"](26,"span",17),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵpipe"](29,"number"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵreference"](12),i=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("cipher",e),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!i.organization||i.canManageCipher(e))("ngIfElse",n),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!i.organization&&e.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAttachments),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.subTitle),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind2"](28,7,"exposedXTimes",o["ɵɵpipeBind1"](29,10,i.exposedPasswordMap.get(e.id))),"\n            ")}}function rE(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"app-callout",8),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵpipe"](6,"number"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"table",9),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"tbody"),o["ɵɵtext"](11,"\n        "),o["ɵɵtemplate"](12,iE,32,12,"tr",10),o["ɵɵtext"](13,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,4,"exposedPasswordsFound")),o["ɵɵproperty"]("useAlertRole",!0),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind2"](5,6,"exposedPasswordsFoundDesc",o["ɵɵpipeBind1"](6,9,e.ciphers.length)),"\n    "),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngForOf",e.ciphers)}}function oE(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",4),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,JC,4,6,"app-callout",5),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,rE,16,11,"ng-container",6),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.ciphers.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.ciphers.length)}}function aE(e,t){}class sE extends YC{constructor(e,t,n,i,r,o){super(n,i,!0,r,o),this.cipherService=e,this.auditService=t,this.exposedPasswordMap=new Map}ngOnInit(){this.checkAccess()}load(){const e=Object.create(null,{load:{get:()=>super.load}});return ZC(this,void 0,void 0,(function*(){(yield this.checkAccess())&&e.load.call(this)}))}setCiphers(){return ZC(this,void 0,void 0,(function*(){const e=yield this.getAllCiphers(),t=[],n=[];e.forEach((e=>{if(e.type!==jr.O.Login||null==e.login.password||""===e.login.password||e.isDeleted)return;const i=this.auditService.passwordLeaked(e.login.password).then((n=>{n>0&&(t.push(e),this.exposedPasswordMap.set(e.id,n))}));n.push(i)})),yield Promise.all(n),this.ciphers=t}))}getAllCiphers(){return this.cipherService.getAllDecrypted()}canManageCipher(e){return!0}}sE.ɵfac=function(e){return new(e||sE)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](Zr),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](eo))},sE.ɵcmp=o["ɵɵdefineComponent"]({type:sE,selectors:[["app-exposed-passwords-report"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:20,vars:11,consts:[[1,"page-header"],[3,"loading","click"],["class","mt-4",4,"ngIf"],["cipherAddEdit",""],[1,"mt-4"],["type","success",3,"title",4,"ngIf"],[4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title","useAlertRole"],[1,"table","table-hover","table-list","table-ciphers"],[4,"ngFor","ngForOf"],[1,"table-list-icon"],[3,"cipher"],[1,"reduced-lh","wrap"],[4,"ngIf","ngIfElse"],["cantManage",""],[1,"text-right"],["bitBadge","","badgeType","warning"],["href","#","appStopClick","",3,"title","click"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection",3,"title"],[1,"sr-only"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelementStart"](7,"p"),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n"),o["ɵɵelementStart"](11,"bit-submit-button",1),o["ɵɵlistener"]("click",(function(){return t.load()})),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n"),o["ɵɵtemplate"](15,oE,6,2,"div",2),o["ɵɵtext"](16,"\n"),o["ɵɵtemplate"](17,aE,0,0,"ng-template",null,3,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](19,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,5,"exposedPasswordsReport")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,7,"exposedPasswordsReportDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("loading",t.loading),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](13,9,"checkExposedPasswords"),"\n"),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.hasLoaded))},directives:[at,B.NgIf,Pe.O,B.NgForOf,qa,Po.l,Tn,Oi],pipes:[M.C,B.DecimalPipe],encapsulation:2});var lE=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function dE(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",7),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"goodNews")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](3,4,"noExposedPasswords"),"\n  "))}function cE(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"a",18),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).selectCipher(t)})),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"editItem")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name)}}function pE(e,t){if(1&e&&(o["ɵɵtext"](0,"\n              "),o["ɵɵelementStart"](1,"span"),o["ɵɵtext"](2),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n            ")),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name)}}function uE(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",19),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",20),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"shared")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"shared")))}function mE(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",21),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",20),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"attachments")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"attachments")))}function hE(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"td",11),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"app-vault-icon",12),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"td",13),o["ɵɵtext"](8,"\n            "),o["ɵɵtemplate"](9,cE,6,4,"ng-container",14),o["ɵɵtext"](10,"\n            "),o["ɵɵtemplate"](11,pE,4,1,"ng-template",null,15,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](13,"\n            "),o["ɵɵtemplate"](14,uE,9,6,"ng-container",6),o["ɵɵtext"](15,"\n            "),o["ɵɵtemplate"](16,mE,9,6,"ng-container",6),o["ɵɵtext"](17,"\n            "),o["ɵɵelement"](18,"br"),o["ɵɵtext"](19,"\n            "),o["ɵɵelementStart"](20,"small"),o["ɵɵtext"](21),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n          "),o["ɵɵelementStart"](24,"td",16),o["ɵɵtext"](25,"\n            "),o["ɵɵelementStart"](26,"span",17),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵpipe"](29,"number"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵreference"](12),i=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("cipher",e),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!i.organization||i.canManageCipher(e))("ngIfElse",n),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!i.organization&&e.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAttachments),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.subTitle),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind2"](28,7,"exposedXTimes",o["ɵɵpipeBind1"](29,10,i.exposedPasswordMap.get(e.id))),"\n            ")}}function vE(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"app-callout",8),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵpipe"](6,"number"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"table",9),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"tbody"),o["ɵɵtext"](11,"\n        "),o["ɵɵtemplate"](12,hE,32,12,"tr",10),o["ɵɵtext"](13,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,4,"exposedPasswordsFound")),o["ɵɵproperty"]("useAlertRole",!0),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind2"](5,6,"exposedPasswordsFoundDesc",o["ɵɵpipeBind1"](6,9,e.ciphers.length)),"\n    "),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngForOf",e.ciphers)}}function gE(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",4),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,dE,4,6,"app-callout",5),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,vE,16,11,"ng-container",6),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.ciphers.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.ciphers.length)}}function fE(e,t){}class xE extends sE{constructor(e,t,n,i,r,o,a,s){super(e,t,n,i,r,s),this.organizationService=o,this.route=a}ngOnInit(){this.route.parent.parent.params.subscribe((e=>lE(this,void 0,void 0,(function*(){this.organization=yield this.organizationService.get(e.organizationId),this.manageableCiphers=yield this.cipherService.getAll(),yield this.checkAccess()}))))}getAllCiphers(){return this.cipherService.getAllFromApiForOrganization(this.organization.id)}canManageCipher(e){return this.manageableCiphers.some((t=>t.id===e.id))}}xE.ɵfac=function(e){return new(e||xE)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](Zr),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](eo))},xE.ɵcmp=o["ɵɵdefineComponent"]({type:xE,selectors:[["app-org-exposed-passwords-report"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:20,vars:11,consts:[[1,"page-header"],[3,"loading","click"],["class","mt-4",4,"ngIf"],["cipherAddEdit",""],[1,"mt-4"],["type","success",3,"title",4,"ngIf"],[4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title","useAlertRole"],[1,"table","table-hover","table-list","table-ciphers"],[4,"ngFor","ngForOf"],[1,"table-list-icon"],[3,"cipher"],[1,"reduced-lh","wrap"],[4,"ngIf","ngIfElse"],["cantManage",""],[1,"text-right"],["bitBadge","","badgeType","warning"],["href","#","appStopClick","",3,"title","click"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection",3,"title"],[1,"sr-only"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelementStart"](7,"p"),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n"),o["ɵɵelementStart"](11,"bit-submit-button",1),o["ɵɵlistener"]("click",(function(){return t.load()})),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n"),o["ɵɵtemplate"](15,gE,6,2,"div",2),o["ɵɵtext"](16,"\n"),o["ɵɵtemplate"](17,fE,0,0,"ng-template",null,3,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](19,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,5,"exposedPasswordsReport")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,7,"exposedPasswordsReportDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("loading",t.loading),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](13,9,"checkExposedPasswords"),"\n"),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.hasLoaded))},directives:[at,B.NgIf,Pe.O,B.NgForOf,qa,Po.l,Tn,Oi],pipes:[M.C,B.DecimalPipe],encapsulation:2});var yE=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function SE(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n      "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function bE(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function wE(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",8),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"goodNews")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](3,4,"noInactive2fa"),"\n  "))}function IE(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",18),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"shared")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"shared")))}function CE(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",19),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"attachments")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"attachments")))}function EE(e,t){if(1&e&&(o["ɵɵelementStart"](0,"a",20),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](3);o["ɵɵpropertyInterpolate"]("href",t.cipherDocs.get(e.id),o["ɵɵsanitizeUrl"]),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](2,2,"instructions"),"")}}function kE(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"td",12),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"app-vault-icon",13),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"td",14),o["ɵɵtext"](8,"\n            "),o["ɵɵelementStart"](9,"a",15),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).selectCipher(t)})),o["ɵɵpipe"](10,"i18n"),o["ɵɵtext"](11),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n            "),o["ɵɵtemplate"](13,IE,9,6,"ng-container",1),o["ɵɵtext"](14,"\n            "),o["ɵɵtemplate"](15,CE,9,6,"ng-container",1),o["ɵɵtext"](16,"\n            "),o["ɵɵelement"](17,"br"),o["ɵɵtext"](18,"\n            "),o["ɵɵelementStart"](19,"small"),o["ɵɵtext"](20),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementStart"](23,"td",16),o["ɵɵtext"](24,"\n            "),o["ɵɵtemplate"](25,EE,3,4,"a",17),o["ɵɵtext"](26,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("cipher",e),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](10,7,"editItem")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!n.organization&&e.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAttachments),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.subTitle),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",n.cipherDocs.has(e.id))}}function PE(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"app-callout",9),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵpipe"](6,"number"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"table",10),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"tbody"),o["ɵɵtext"](11,"\n        "),o["ɵɵtemplate"](12,kE,28,9,"tr",11),o["ɵɵtext"](13,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"inactive2faFound")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind2"](5,5,"inactive2faFoundDesc",o["ɵɵpipeBind1"](6,8,e.ciphers.length)),"\n    "),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngForOf",e.ciphers)}}function AE(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",6),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,wE,4,6,"app-callout",7),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,PE,16,10,"ng-container",1),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.ciphers.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.ciphers.length)}}function OE(e,t){}class TE extends YC{constructor(e,t,n,i,r,o){super(t,n,!0,i,o),this.cipherService=e,this.logService=r,this.services=new Map,this.cipherDocs=new Map}ngOnInit(){const e=Object.create(null,{load:{get:()=>super.load}});return yE(this,void 0,void 0,(function*(){(yield this.checkAccess())&&(yield e.load.call(this))}))}setCiphers(){return yE(this,void 0,void 0,(function*(){try{yield this.load2fa()}catch(e){this.logService.error(e)}if(this.services.size>0){const e=yield this.getAllCiphers(),t=[],n=[],i=new Map;e.forEach((e=>{if(e.type===jr.O.Login&&(null==e.login.totp||""===e.login.totp)&&e.login.hasUris&&!e.isDeleted)for(let n=0;n<e.login.uris.length;n++){const r=e.login.uris[n];if(null!=r.uri&&""!==r.uri){const n=r.uri.replace("www.",""),o=N.c.getDomain(n);null!=o&&this.services.has(o)&&(null!=this.services.get(o)&&i.set(e.id,this.services.get(o)),t.push(e))}}})),yield Promise.all(n),this.ciphers=t,this.cipherDocs=i}}))}getAllCiphers(){return this.cipherService.getAllDecrypted()}load2fa(){return yE(this,void 0,void 0,(function*(){if(this.services.size>0)return;const e=yield fetch(new Request("https://2fa.directory/api/v3/totp.json"));if(200!==e.status)throw new Error;const t=yield e.json();for(const n of t){const e=n[1];if(null!=e.domain&&null!=e.documentation){if(null!=e["additional-domains"])for(const t of e["additional-domains"])this.services.set(t,e.documentation);this.services.set(e.domain,e.documentation)}}}))}}TE.ɵfac=function(e){return new(e||TE)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](eo))},TE.ɵcmp=o["ɵɵdefineComponent"]({type:TE,selectors:[["app-inactive-two-factor-report"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:20,vars:9,consts:[[1,"page-header"],[4,"ngIf"],["class","mt-4",4,"ngIf"],["cipherAddEdit",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"mt-4"],["type","success",3,"title",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[1,"table","table-hover","table-list","table-ciphers"],[4,"ngFor","ngForOf"],[1,"table-list-icon"],[3,"cipher"],[1,"reduced-lh","wrap"],["href","#","appStopClick","",3,"title","click"],[1,"text-right"],["bitBadge","","target","_blank","rel","noopener",3,"href",4,"ngIf"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"],["bitBadge","","target","_blank","rel","noopener",3,"href"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵtemplate"](5,SE,9,6,"small",1),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementStart"](9,"p"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n"),o["ɵɵtemplate"](13,bE,9,6,"div",1),o["ɵɵtext"](14,"\n"),o["ɵɵtemplate"](15,AE,6,2,"div",2),o["ɵɵtext"](16,"\n"),o["ɵɵtemplate"](17,OE,0,0,"ng-template",null,3,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](19,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,5,"inactive2faReport"),"\n    "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hasLoaded&&t.loading),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,7,"inactive2faReportDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.hasLoaded&&t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hasLoaded))},directives:[B.NgIf,Pe.O,B.NgForOf,qa,Tn,Oi,Po.l],pipes:[M.C,B.DecimalPipe],encapsulation:2});var BE=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function ME(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n      "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function DE(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function FE(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",8),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"goodNews")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](3,4,"noInactive2fa"),"\n  "))}function RE(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",18),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"shared")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"shared")))}function UE(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",19),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"attachments")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"attachments")))}function zE(e,t){if(1&e&&(o["ɵɵelementStart"](0,"a",20),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](3);o["ɵɵpropertyInterpolate"]("href",t.cipherDocs.get(e.id),o["ɵɵsanitizeUrl"]),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](2,2,"instructions"),"")}}function NE(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"td",12),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"app-vault-icon",13),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"td",14),o["ɵɵtext"](8,"\n            "),o["ɵɵelementStart"](9,"a",15),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).selectCipher(t)})),o["ɵɵpipe"](10,"i18n"),o["ɵɵtext"](11),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n            "),o["ɵɵtemplate"](13,RE,9,6,"ng-container",1),o["ɵɵtext"](14,"\n            "),o["ɵɵtemplate"](15,UE,9,6,"ng-container",1),o["ɵɵtext"](16,"\n            "),o["ɵɵelement"](17,"br"),o["ɵɵtext"](18,"\n            "),o["ɵɵelementStart"](19,"small"),o["ɵɵtext"](20),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementStart"](23,"td",16),o["ɵɵtext"](24,"\n            "),o["ɵɵtemplate"](25,zE,3,4,"a",17),o["ɵɵtext"](26,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("cipher",e),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](10,7,"editItem")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!n.organization&&e.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAttachments),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.subTitle),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",n.cipherDocs.has(e.id))}}function VE(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"app-callout",9),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵpipe"](6,"number"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"table",10),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"tbody"),o["ɵɵtext"](11,"\n        "),o["ɵɵtemplate"](12,NE,28,9,"tr",11),o["ɵɵtext"](13,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"inactive2faFound")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind2"](5,5,"inactive2faFoundDesc",o["ɵɵpipeBind1"](6,8,e.ciphers.length)),"\n    "),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngForOf",e.ciphers)}}function HE(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",6),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,FE,4,6,"app-callout",7),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,VE,16,10,"ng-container",1),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.ciphers.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.ciphers.length)}}function jE(e,t){}class LE extends TE{constructor(e,t,n,i,r,o,a,s){super(e,t,n,i,o,a),this.route=r,this.organizationService=s}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return BE(this,void 0,void 0,(function*(){this.route.parent.parent.params.subscribe((t=>BE(this,void 0,void 0,(function*(){this.organization=yield this.organizationService.get(t.organizationId),yield e.ngOnInit.call(this)}))))}))}getAllCiphers(){return this.cipherService.getAllFromApiForOrganization(this.organization.id)}}LE.ɵfac=function(e){return new(e||LE)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](eo),o["ɵɵdirectiveInject"](Ii.M))},LE.ɵcmp=o["ɵɵdefineComponent"]({type:LE,selectors:[["app-inactive-two-factor-report"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:20,vars:9,consts:[[1,"page-header"],[4,"ngIf"],["class","mt-4",4,"ngIf"],["cipherAddEdit",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"mt-4"],["type","success",3,"title",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[1,"table","table-hover","table-list","table-ciphers"],[4,"ngFor","ngForOf"],[1,"table-list-icon"],[3,"cipher"],[1,"reduced-lh","wrap"],["href","#","appStopClick","",3,"title","click"],[1,"text-right"],["bitBadge","","target","_blank","rel","noopener",3,"href",4,"ngIf"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"],["bitBadge","","target","_blank","rel","noopener",3,"href"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵtemplate"](5,ME,9,6,"small",1),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementStart"](9,"p"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n"),o["ɵɵtemplate"](13,DE,9,6,"div",1),o["ɵɵtext"](14,"\n"),o["ɵɵtemplate"](15,HE,6,2,"div",2),o["ɵɵtext"](16,"\n"),o["ɵɵtemplate"](17,jE,0,0,"ng-template",null,3,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](19,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,5,"inactive2faReport"),"\n    "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hasLoaded&&t.loading),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,7,"inactive2faReportDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.hasLoaded&&t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hasLoaded))},directives:[B.NgIf,Pe.O,B.NgForOf,qa,Tn,Oi,Po.l],pipes:[M.C,B.DecimalPipe],encapsulation:2});var KE=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function GE(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n      "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function qE(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function _E(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",8),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"goodNews")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](3,4,"noReusedPasswords"),"\n  "))}function $E(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"a",19),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).selectCipher(t)})),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"editItem")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name)}}function WE(e,t){if(1&e&&(o["ɵɵtext"](0,"\n              "),o["ɵɵelementStart"](1,"span"),o["ɵɵtext"](2),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n            ")),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name)}}function QE(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",20),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"shared")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"shared")))}function YE(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",21),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"attachments")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"attachments")))}function ZE(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"td",12),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"app-vault-icon",13),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"td",14),o["ɵɵtext"](8,"\n            "),o["ɵɵtemplate"](9,$E,6,4,"ng-container",15),o["ɵɵtext"](10,"\n            "),o["ɵɵtemplate"](11,WE,4,1,"ng-template",null,16,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](13,"\n            "),o["ɵɵtemplate"](14,QE,9,6,"ng-container",1),o["ɵɵtext"](15,"\n            "),o["ɵɵtemplate"](16,YE,9,6,"ng-container",1),o["ɵɵtext"](17,"\n            "),o["ɵɵelement"](18,"br"),o["ɵɵtext"](19,"\n            "),o["ɵɵelementStart"](20,"small"),o["ɵɵtext"](21),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n          "),o["ɵɵelementStart"](24,"td",17),o["ɵɵtext"](25,"\n            "),o["ɵɵelementStart"](26,"span",18),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵreference"](12),i=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("cipher",e),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!i.organization||i.canManageCipher(e))("ngIfElse",n),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!i.organization&&e.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAttachments),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.subTitle),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind2"](28,7,"reusedXTimes",i.passwordUseMap.get(e.login.password)),"\n            ")}}function JE(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"app-callout",9),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵpipe"](6,"number"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"table",10),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"tbody"),o["ɵɵtext"](11,"\n        "),o["ɵɵtemplate"](12,ZE,31,10,"tr",11),o["ɵɵtext"](13,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"reusedPasswordsFound")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind2"](5,5,"reusedPasswordsFoundDesc",o["ɵɵpipeBind1"](6,8,e.ciphers.length)),"\n    "),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngForOf",e.ciphers)}}function XE(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",6),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,_E,4,6,"app-callout",7),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,JE,16,10,"ng-container",1),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.ciphers.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.ciphers.length)}}function ek(e,t){}class tk extends YC{constructor(e,t,n,i,r){super(t,n,!0,i,r),this.cipherService=e}ngOnInit(){const e=Object.create(null,{load:{get:()=>super.load}});return KE(this,void 0,void 0,(function*(){(yield this.checkAccess())&&(yield e.load.call(this))}))}setCiphers(){return KE(this,void 0,void 0,(function*(){const e=yield this.getAllCiphers(),t=[];this.passwordUseMap=new Map,e.forEach((e=>{e.type!==jr.O.Login||null==e.login.password||""===e.login.password||e.isDeleted||(t.push(e),this.passwordUseMap.has(e.login.password)?this.passwordUseMap.set(e.login.password,this.passwordUseMap.get(e.login.password)+1):this.passwordUseMap.set(e.login.password,1))}));const n=t.filter((e=>this.passwordUseMap.has(e.login.password)&&this.passwordUseMap.get(e.login.password)>1));this.ciphers=n}))}getAllCiphers(){return this.cipherService.getAllDecrypted()}canManageCipher(e){return!0}}tk.ɵfac=function(e){return new(e||tk)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](eo))},tk.ɵcmp=o["ɵɵdefineComponent"]({type:tk,selectors:[["app-reused-passwords-report"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:20,vars:9,consts:[[1,"page-header"],[4,"ngIf"],["class","mt-4",4,"ngIf"],["cipherAddEdit",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"mt-4"],["type","success",3,"title",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[1,"table","table-hover","table-list","table-ciphers"],[4,"ngFor","ngForOf"],[1,"table-list-icon"],[3,"cipher"],[1,"reduced-lh","wrap"],[4,"ngIf","ngIfElse"],["cantManage",""],[1,"text-right"],["bitBadge","","badgeType","warning"],["href","#","appStopClick","",3,"title","click"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵtemplate"](5,GE,9,6,"small",1),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementStart"](9,"p"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n"),o["ɵɵtemplate"](13,qE,9,6,"div",1),o["ɵɵtext"](14,"\n"),o["ɵɵtemplate"](15,XE,6,2,"div",2),o["ɵɵtext"](16,"\n"),o["ɵɵtemplate"](17,ek,0,0,"ng-template",null,3,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](19,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,5,"reusedPasswordsReport"),"\n    "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hasLoaded&&t.loading),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,7,"reusedPasswordsReportDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.hasLoaded&&t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hasLoaded))},directives:[B.NgIf,Pe.O,B.NgForOf,qa,Po.l,Tn,Oi],pipes:[M.C,B.DecimalPipe],encapsulation:2});var nk=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function ik(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n      "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function rk(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function ok(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",8),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"goodNews")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](3,4,"noReusedPasswords"),"\n  "))}function ak(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"a",19),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).selectCipher(t)})),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"editItem")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name)}}function sk(e,t){if(1&e&&(o["ɵɵtext"](0,"\n              "),o["ɵɵelementStart"](1,"span"),o["ɵɵtext"](2),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n            ")),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name)}}function lk(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",20),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"shared")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"shared")))}function dk(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",21),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"attachments")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"attachments")))}function ck(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"td",12),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"app-vault-icon",13),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"td",14),o["ɵɵtext"](8,"\n            "),o["ɵɵtemplate"](9,ak,6,4,"ng-container",15),o["ɵɵtext"](10,"\n            "),o["ɵɵtemplate"](11,sk,4,1,"ng-template",null,16,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](13,"\n            "),o["ɵɵtemplate"](14,lk,9,6,"ng-container",1),o["ɵɵtext"](15,"\n            "),o["ɵɵtemplate"](16,dk,9,6,"ng-container",1),o["ɵɵtext"](17,"\n            "),o["ɵɵelement"](18,"br"),o["ɵɵtext"](19,"\n            "),o["ɵɵelementStart"](20,"small"),o["ɵɵtext"](21),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n          "),o["ɵɵelementStart"](24,"td",17),o["ɵɵtext"](25,"\n            "),o["ɵɵelementStart"](26,"span",18),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵreference"](12),i=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("cipher",e),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!i.organization||i.canManageCipher(e))("ngIfElse",n),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!i.organization&&e.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAttachments),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.subTitle),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind2"](28,7,"reusedXTimes",i.passwordUseMap.get(e.login.password)),"\n            ")}}function pk(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"app-callout",9),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵpipe"](6,"number"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"table",10),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"tbody"),o["ɵɵtext"](11,"\n        "),o["ɵɵtemplate"](12,ck,31,10,"tr",11),o["ɵɵtext"](13,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"reusedPasswordsFound")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind2"](5,5,"reusedPasswordsFoundDesc",o["ɵɵpipeBind1"](6,8,e.ciphers.length)),"\n    "),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngForOf",e.ciphers)}}function uk(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",6),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,ok,4,6,"app-callout",7),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,pk,16,10,"ng-container",1),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.ciphers.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.ciphers.length)}}function mk(e,t){}class hk extends tk{constructor(e,t,n,i,r,o,a){super(e,t,n,i,a),this.route=r,this.organizationService=o}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return nk(this,void 0,void 0,(function*(){this.route.parent.parent.params.subscribe((t=>nk(this,void 0,void 0,(function*(){this.organization=yield this.organizationService.get(t.organizationId),this.manageableCiphers=yield this.cipherService.getAll(),yield e.ngOnInit.call(this)}))))}))}getAllCiphers(){return this.cipherService.getAllFromApiForOrganization(this.organization.id)}canManageCipher(e){return this.manageableCiphers.some((t=>t.id===e.id))}}hk.ɵfac=function(e){return new(e||hk)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](eo))},hk.ɵcmp=o["ɵɵdefineComponent"]({type:hk,selectors:[["app-reused-passwords-report"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:20,vars:9,consts:[[1,"page-header"],[4,"ngIf"],["class","mt-4",4,"ngIf"],["cipherAddEdit",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"mt-4"],["type","success",3,"title",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[1,"table","table-hover","table-list","table-ciphers"],[4,"ngFor","ngForOf"],[1,"table-list-icon"],[3,"cipher"],[1,"reduced-lh","wrap"],[4,"ngIf","ngIfElse"],["cantManage",""],[1,"text-right"],["bitBadge","","badgeType","warning"],["href","#","appStopClick","",3,"title","click"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵtemplate"](5,ik,9,6,"small",1),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementStart"](9,"p"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n"),o["ɵɵtemplate"](13,rk,9,6,"div",1),o["ɵɵtext"](14,"\n"),o["ɵɵtemplate"](15,uk,6,2,"div",2),o["ɵɵtext"](16,"\n"),o["ɵɵtemplate"](17,mk,0,0,"ng-template",null,3,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](19,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,5,"reusedPasswordsReport"),"\n    "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hasLoaded&&t.loading),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,7,"reusedPasswordsReportDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.hasLoaded&&t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hasLoaded))},directives:[B.NgIf,Pe.O,B.NgForOf,qa,Po.l,Tn,Oi],pipes:[M.C,B.DecimalPipe],encapsulation:2});var vk=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function gk(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",2),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"span",3),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function fk(e,t){1&e&&(o["ɵɵelementStart"](0,"div",9),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",10),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"div",11),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"a",12),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵelementStart"](12,"a",13),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n        "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"tools")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](10,5,"importData"),"\n            "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](14,7,"exportVault"),"\n            "))}function xk(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",23),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).upgradeOrganization()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](2,1,"upgrade"),"\n              "))}function yk(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",14),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",15),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementStart"](5,"div",16),o["ɵɵtext"](6,"\n              "),o["ɵɵtemplate"](7,xk,3,3,"a",17),o["ɵɵtext"](8,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n          "),o["ɵɵelementStart"](11,"div",11),o["ɵɵtext"](12,"\n            "),o["ɵɵelementStart"](13,"a",18),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementStart"](17,"a",19),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n            "),o["ɵɵelementStart"](21,"a",20),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n            "),o["ɵɵelementStart"](25,"a",21),o["ɵɵtext"](26),o["ɵɵpipe"](27,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n            "),o["ɵɵelementStart"](29,"a",22),o["ɵɵtext"](30),o["ɵɵpipe"](31,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,7,"reports"),"\n            "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!e.accessReports),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](15,9,"exposedPasswordsReport"),"\n            "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](19,11,"reusedPasswordsReport"),"\n            "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](23,13,"weakPasswordsReport"),"\n            "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](27,15,"unsecuredWebsitesReport"),"\n            "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](31,17,"inactive2faReport"),"\n            ")}}function Sk(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",4),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"div",5),o["ɵɵtext"](5,"\n        "),o["ɵɵtemplate"](6,fk,17,9,"div",6),o["ɵɵtext"](7,"\n        "),o["ɵɵtemplate"](8,yk,34,19,"div",7),o["ɵɵtext"](9,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"div",8),o["ɵɵtext"](12,"\n        "),o["ɵɵelement"](13,"router-outlet"),o["ɵɵtext"](14,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",e.organization.canAccessImportExport),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.organization.canAccessReports)}}class bk{constructor(e,t,n){this.route=e,this.organizationService=t,this.messagingService=n,this.accessReports=!1,this.loading=!0}ngOnInit(){this.route.parent.params.subscribe((e=>vk(this,void 0,void 0,(function*(){this.organization=yield this.organizationService.get(e.organizationId),this.accessReports=this.organization.useTotp,this.loading=!1}))))}upgradeOrganization(){this.messagingService.send("upgradeOrganization",{organizationId:this.organization.id})}}bk.ɵfac=function(e){return new(e||bk)(o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](v))},bk.ɵcmp=o["ɵɵdefineComponent"]({type:bk,selectors:[["app-org-tools"]],decls:7,vars:2,consts:[[1,"container","page-content"],[4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"row"],[1,"col-3"],["class","card mb-4",4,"ngIf"],["class","card",4,"ngIf"],[1,"col-9"],[1,"card","mb-4"],[1,"card-header"],[1,"list-group","list-group-flush"],["routerLink","import","routerLinkActive","active",1,"list-group-item"],["routerLink","export","routerLinkActive","active",1,"list-group-item"],[1,"card"],[1,"card-header","d-flex"],[1,"ml-auto"],["href","#","appStopClick","","bitBadge","",3,"click",4,"ngIf"],["routerLink","exposed-passwords-report","routerLinkActive","active",1,"list-group-item"],["routerLink","reused-passwords-report","routerLinkActive","active",1,"list-group-item"],["routerLink","weak-passwords-report","routerLinkActive","active",1,"list-group-item"],["routerLink","unsecured-websites-report","routerLinkActive","active",1,"list-group-item"],["routerLink","inactive-two-factor-report","routerLinkActive","active",1,"list-group-item"],["href","#","appStopClick","","bitBadge","",3,"click"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,gk,9,6,"ng-container",1),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,Sk,17,2,"ng-container",1),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n")),2&e&&(o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading))},directives:[B.NgIf,p.RouterOutlet,p.RouterLinkWithHref,p.RouterLinkActive,Po.l,Tn],pipes:[M.C],encapsulation:2});var wk=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Ik(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n      "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function Ck(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function Ek(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",8),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"goodNews")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](3,4,"noUnsecuredWebsites"),"\n  "))}function kk(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",16),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"shared")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"shared")))}function Pk(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",17),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"attachments")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"attachments")))}function Ak(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"td",12),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"app-vault-icon",13),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"td",14),o["ɵɵtext"](8,"\n            "),o["ɵɵelementStart"](9,"a",15),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).selectCipher(t)})),o["ɵɵpipe"](10,"i18n"),o["ɵɵtext"](11),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n            "),o["ɵɵtemplate"](13,kk,9,6,"ng-container",1),o["ɵɵtext"](14,"\n            "),o["ɵɵtemplate"](15,Pk,9,6,"ng-container",1),o["ɵɵtext"](16,"\n            "),o["ɵɵelement"](17,"br"),o["ɵɵtext"](18,"\n            "),o["ɵɵelementStart"](19,"small"),o["ɵɵtext"](20),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("cipher",e),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](10,6,"editItem")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!n.organization&&e.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAttachments),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.subTitle)}}function Ok(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"app-callout",9),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵpipe"](6,"number"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"table",10),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"tbody"),o["ɵɵtext"](11,"\n        "),o["ɵɵtemplate"](12,Ak,23,8,"tr",11),o["ɵɵtext"](13,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"unsecuredWebsitesFound")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind2"](5,5,"unsecuredWebsitesFoundDesc",o["ɵɵpipeBind1"](6,8,e.ciphers.length)),"\n    "),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngForOf",e.ciphers)}}function Tk(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",6),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,Ek,4,6,"app-callout",7),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,Ok,16,10,"ng-container",1),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.ciphers.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.ciphers.length)}}function Bk(e,t){}class Mk extends YC{constructor(e,t,n,i,r){super(t,n,!0,i,r),this.cipherService=e}ngOnInit(){const e=Object.create(null,{load:{get:()=>super.load}});return wk(this,void 0,void 0,(function*(){(yield this.checkAccess())&&(yield e.load.call(this))}))}setCiphers(){return wk(this,void 0,void 0,(function*(){const e=(yield this.getAllCiphers()).filter((e=>!(e.type!==jr.O.Login||!e.login.hasUris||e.isDeleted)&&e.login.uris.some((e=>null!=e.uri&&0===e.uri.indexOf("http://")))));this.ciphers=e}))}getAllCiphers(){return this.cipherService.getAllDecrypted()}}Mk.ɵfac=function(e){return new(e||Mk)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](eo))},Mk.ɵcmp=o["ɵɵdefineComponent"]({type:Mk,selectors:[["app-unsecured-websites-report"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:20,vars:9,consts:[[1,"page-header"],[4,"ngIf"],["class","mt-4",4,"ngIf"],["cipherAddEdit",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"mt-4"],["type","success",3,"title",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[1,"table","table-hover","table-list","table-ciphers"],[4,"ngFor","ngForOf"],[1,"table-list-icon"],[3,"cipher"],[1,"reduced-lh","wrap"],["href","#","appStopClick","",3,"title","click"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵtemplate"](5,Ik,9,6,"small",1),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementStart"](9,"p"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n"),o["ɵɵtemplate"](13,Ck,9,6,"div",1),o["ɵɵtext"](14,"\n"),o["ɵɵtemplate"](15,Tk,6,2,"div",2),o["ɵɵtext"](16,"\n"),o["ɵɵtemplate"](17,Bk,0,0,"ng-template",null,3,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](19,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,5,"unsecuredWebsitesReport"),"\n    "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hasLoaded&&t.loading),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,7,"unsecuredWebsitesReportDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.hasLoaded&&t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hasLoaded))},directives:[B.NgIf,Pe.O,B.NgForOf,qa,Tn,Oi],pipes:[M.C,B.DecimalPipe],encapsulation:2});var Dk=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Fk(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n      "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function Rk(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function Uk(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",8),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"goodNews")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](3,4,"noUnsecuredWebsites"),"\n  "))}function zk(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",16),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"shared")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"shared")))}function Nk(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",17),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"attachments")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"attachments")))}function Vk(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"td",12),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"app-vault-icon",13),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"td",14),o["ɵɵtext"](8,"\n            "),o["ɵɵelementStart"](9,"a",15),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).selectCipher(t)})),o["ɵɵpipe"](10,"i18n"),o["ɵɵtext"](11),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n            "),o["ɵɵtemplate"](13,zk,9,6,"ng-container",1),o["ɵɵtext"](14,"\n            "),o["ɵɵtemplate"](15,Nk,9,6,"ng-container",1),o["ɵɵtext"](16,"\n            "),o["ɵɵelement"](17,"br"),o["ɵɵtext"](18,"\n            "),o["ɵɵelementStart"](19,"small"),o["ɵɵtext"](20),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("cipher",e),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](10,6,"editItem")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!n.organization&&e.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAttachments),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.subTitle)}}function Hk(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"app-callout",9),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵpipe"](6,"number"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"table",10),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"tbody"),o["ɵɵtext"](11,"\n        "),o["ɵɵtemplate"](12,Vk,23,8,"tr",11),o["ɵɵtext"](13,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"unsecuredWebsitesFound")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind2"](5,5,"unsecuredWebsitesFoundDesc",o["ɵɵpipeBind1"](6,8,e.ciphers.length)),"\n    "),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngForOf",e.ciphers)}}function jk(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",6),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,Uk,4,6,"app-callout",7),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,Hk,16,10,"ng-container",1),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.ciphers.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.ciphers.length)}}function Lk(e,t){}class Kk extends Mk{constructor(e,t,n,i,r,o,a){super(e,t,n,i,a),this.route=r,this.organizationService=o}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return Dk(this,void 0,void 0,(function*(){this.route.parent.parent.params.subscribe((t=>Dk(this,void 0,void 0,(function*(){this.organization=yield this.organizationService.get(t.organizationId),yield e.ngOnInit.call(this)}))))}))}getAllCiphers(){return this.cipherService.getAllFromApiForOrganization(this.organization.id)}}Kk.ɵfac=function(e){return new(e||Kk)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](eo))},Kk.ɵcmp=o["ɵɵdefineComponent"]({type:Kk,selectors:[["app-unsecured-websites-report"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:20,vars:9,consts:[[1,"page-header"],[4,"ngIf"],["class","mt-4",4,"ngIf"],["cipherAddEdit",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"mt-4"],["type","success",3,"title",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[1,"table","table-hover","table-list","table-ciphers"],[4,"ngFor","ngForOf"],[1,"table-list-icon"],[3,"cipher"],[1,"reduced-lh","wrap"],["href","#","appStopClick","",3,"title","click"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵtemplate"](5,Fk,9,6,"small",1),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementStart"](9,"p"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n"),o["ɵɵtemplate"](13,Rk,9,6,"div",1),o["ɵɵtext"](14,"\n"),o["ɵɵtemplate"](15,jk,6,2,"div",2),o["ɵɵtext"](16,"\n"),o["ɵɵtemplate"](17,Lk,0,0,"ng-template",null,3,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](19,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,5,"unsecuredWebsitesReport"),"\n    "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hasLoaded&&t.loading),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,7,"unsecuredWebsitesReportDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.hasLoaded&&t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hasLoaded))},directives:[B.NgIf,Pe.O,B.NgForOf,qa,Tn,Oi],pipes:[M.C,B.DecimalPipe],encapsulation:2});var Gk=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function qk(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n      "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function _k(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function $k(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",8),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"goodNews")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](3,4,"noWeakPasswords"),"\n  "))}function Wk(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"a",19),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).selectCipher(t)})),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"editItem")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name)}}function Qk(e,t){if(1&e&&(o["ɵɵtext"](0,"\n              "),o["ɵɵelementStart"](1,"span"),o["ɵɵtext"](2),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n            ")),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name)}}function Yk(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",20),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"shared")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"shared")))}function Zk(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",21),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"attachments")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"attachments")))}function Jk(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"td",12),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"app-vault-icon",13),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"td",14),o["ɵɵtext"](8,"\n            "),o["ɵɵtemplate"](9,Wk,6,4,"ng-container",15),o["ɵɵtext"](10,"\n            "),o["ɵɵtemplate"](11,Qk,4,1,"ng-template",null,16,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](13,"\n            "),o["ɵɵtemplate"](14,Yk,9,6,"ng-container",1),o["ɵɵtext"](15,"\n            "),o["ɵɵtemplate"](16,Zk,9,6,"ng-container",1),o["ɵɵtext"](17,"\n            "),o["ɵɵelement"](18,"br"),o["ɵɵtext"](19,"\n            "),o["ɵɵelementStart"](20,"small"),o["ɵɵtext"](21),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n          "),o["ɵɵelementStart"](24,"td",17),o["ɵɵtext"](25,"\n            "),o["ɵɵelementStart"](26,"span",18),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵreference"](12),i=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("cipher",e),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!i.organization||i.canManageCipher(e))("ngIfElse",n),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!i.organization&&e.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAttachments),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.subTitle),o["ɵɵadvance"](5),o["ɵɵproperty"]("badgeType",i.passwordStrengthMap.get(e.id)[1]),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](28,8,i.passwordStrengthMap.get(e.id)[0]),"\n            ")}}function Xk(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"app-callout",9),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵpipe"](6,"number"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"table",10),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"tbody"),o["ɵɵtext"](11,"\n        "),o["ɵɵtemplate"](12,Jk,31,10,"tr",11),o["ɵɵtext"](13,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"weakPasswordsFound")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind2"](5,5,"weakPasswordsFoundDesc",o["ɵɵpipeBind1"](6,8,e.ciphers.length)),"\n    "),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngForOf",e.ciphers)}}function eP(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",6),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,$k,4,6,"app-callout",7),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,Xk,16,10,"ng-container",1),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.ciphers.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.ciphers.length)}}function tP(e,t){}class nP extends YC{constructor(e,t,n,i,r,o){super(n,i,!0,r,o),this.cipherService=e,this.passwordGenerationService=t,this.passwordStrengthMap=new Map,this.passwordStrengthCache=new Map}ngOnInit(){const e=Object.create(null,{load:{get:()=>super.load}});return Gk(this,void 0,void 0,(function*(){(yield this.checkAccess())&&(yield e.load.call(this))}))}setCiphers(){return Gk(this,void 0,void 0,(function*(){const e=yield this.getAllCiphers(),t=[],n=e=>null!=e.login.username&&""!==e.login.username.trim(),i=e=>e.login.password+"_____"+(n(e)?e.login.username:"");e.forEach((e=>{if(e.type!==jr.O.Login||null==e.login.password||""===e.login.password||e.isDeleted)return;const r=n(e),o=i(e);if(!this.passwordStrengthCache.has(o)){let t=[];if(r){const n=e.login.username.indexOf("@");t=n>-1?t.concat(e.login.username.substr(0,n).trim().toLowerCase().split(/[^A-Za-z0-9]/)).filter((e=>e.length>=3)):e.login.username.trim().toLowerCase().split(/[^A-Za-z0-9]/).filter((e=>e.length>=3))}const n=this.passwordGenerationService.passwordStrength(e.login.password,t.length>0?t:null);this.passwordStrengthCache.set(o,n.score)}const a=this.passwordStrengthCache.get(o);null!=a&&a<=2&&(this.passwordStrengthMap.set(e.id,this.scoreKey(a)),t.push(e))})),t.sort(((e,t)=>this.passwordStrengthCache.get(i(e))-this.passwordStrengthCache.get(i(t)))),this.ciphers=t}))}getAllCiphers(){return this.cipherService.getAllDecrypted()}canManageCipher(e){return!0}scoreKey(e){switch(e){case 4:return["strong","success"];case 3:return["good","primary"];case 2:return["weak","warning"];default:return["veryWeak","danger"]}}}nP.ɵfac=function(e){return new(e||nP)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](eo))},nP.ɵcmp=o["ɵɵdefineComponent"]({type:nP,selectors:[["app-weak-passwords-report"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:20,vars:9,consts:[[1,"page-header"],[4,"ngIf"],["class","mt-4",4,"ngIf"],["cipherAddEdit",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"mt-4"],["type","success",3,"title",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[1,"table","table-hover","table-list","table-ciphers"],[4,"ngFor","ngForOf"],[1,"table-list-icon"],[3,"cipher"],[1,"reduced-lh","wrap"],[4,"ngIf","ngIfElse"],["cantManage",""],[1,"text-right"],["bitBadge","",3,"badgeType"],["href","#","appStopClick","",3,"title","click"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵtemplate"](5,qk,9,6,"small",1),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementStart"](9,"p"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n"),o["ɵɵtemplate"](13,_k,9,6,"div",1),o["ɵɵtext"](14,"\n"),o["ɵɵtemplate"](15,eP,6,2,"div",2),o["ɵɵtext"](16,"\n"),o["ɵɵtemplate"](17,tP,0,0,"ng-template",null,3,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](19,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,5,"weakPasswordsReport"),"\n    "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hasLoaded&&t.loading),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,7,"weakPasswordsReportDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.hasLoaded&&t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hasLoaded))},directives:[B.NgIf,Pe.O,B.NgForOf,qa,Po.l,Tn,Oi],pipes:[M.C,B.DecimalPipe],encapsulation:2});var iP=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function rP(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n      "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function oP(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",4),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function aP(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",8),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"goodNews")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](3,4,"noWeakPasswords"),"\n  "))}function sP(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"a",19),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).selectCipher(t)})),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"editItem")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name)}}function lP(e,t){if(1&e&&(o["ɵɵtext"](0,"\n              "),o["ɵɵelementStart"](1,"span"),o["ɵɵtext"](2),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n            ")),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name)}}function dP(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",20),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"shared")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"shared")))}function cP(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",21),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",5),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"attachments")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"attachments")))}function pP(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"td",12),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"app-vault-icon",13),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"td",14),o["ɵɵtext"](8,"\n            "),o["ɵɵtemplate"](9,sP,6,4,"ng-container",15),o["ɵɵtext"](10,"\n            "),o["ɵɵtemplate"](11,lP,4,1,"ng-template",null,16,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](13,"\n            "),o["ɵɵtemplate"](14,dP,9,6,"ng-container",1),o["ɵɵtext"](15,"\n            "),o["ɵɵtemplate"](16,cP,9,6,"ng-container",1),o["ɵɵtext"](17,"\n            "),o["ɵɵelement"](18,"br"),o["ɵɵtext"](19,"\n            "),o["ɵɵelementStart"](20,"small"),o["ɵɵtext"](21),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n          "),o["ɵɵelementStart"](24,"td",17),o["ɵɵtext"](25,"\n            "),o["ɵɵelementStart"](26,"span",18),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵreference"](12),i=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("cipher",e),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!i.organization||i.canManageCipher(e))("ngIfElse",n),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!i.organization&&e.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAttachments),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.subTitle),o["ɵɵadvance"](5),o["ɵɵproperty"]("badgeType",i.passwordStrengthMap.get(e.id)[1]),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](28,8,i.passwordStrengthMap.get(e.id)[0]),"\n            ")}}function uP(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"app-callout",9),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵpipe"](6,"number"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"table",10),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"tbody"),o["ɵɵtext"](11,"\n        "),o["ɵɵtemplate"](12,pP,31,10,"tr",11),o["ɵɵtext"](13,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"weakPasswordsFound")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind2"](5,5,"weakPasswordsFoundDesc",o["ɵɵpipeBind1"](6,8,e.ciphers.length)),"\n    "),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngForOf",e.ciphers)}}function mP(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",6),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,aP,4,6,"app-callout",7),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,uP,16,10,"ng-container",1),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.ciphers.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.ciphers.length)}}function hP(e,t){}class vP extends nP{constructor(e,t,n,i,r,o,a,s){super(e,t,n,i,r,s),this.route=o,this.organizationService=a}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return iP(this,void 0,void 0,(function*(){this.route.parent.parent.params.subscribe((t=>iP(this,void 0,void 0,(function*(){this.organization=yield this.organizationService.get(t.organizationId),this.manageableCiphers=yield this.cipherService.getAll(),yield e.ngOnInit.call(this)}))))}))}getAllCiphers(){return this.cipherService.getAllFromApiForOrganization(this.organization.id)}canManageCipher(e){return this.manageableCiphers.some((t=>t.id===e.id))}}vP.ɵfac=function(e){return new(e||vP)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](eo))},vP.ɵcmp=o["ɵɵdefineComponent"]({type:vP,selectors:[["app-weak-passwords-report"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:20,vars:9,consts:[[1,"page-header"],[4,"ngIf"],["class","mt-4",4,"ngIf"],["cipherAddEdit",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"mt-4"],["type","success",3,"title",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[1,"table","table-hover","table-list","table-ciphers"],[4,"ngFor","ngForOf"],[1,"table-list-icon"],[3,"cipher"],[1,"reduced-lh","wrap"],[4,"ngIf","ngIfElse"],["cantManage",""],[1,"text-right"],["bitBadge","",3,"badgeType"],["href","#","appStopClick","",3,"title","click"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵtemplate"](5,rP,9,6,"small",1),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementStart"](9,"p"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n"),o["ɵɵtemplate"](13,oP,9,6,"div",1),o["ɵɵtext"](14,"\n"),o["ɵɵtemplate"](15,mP,6,2,"div",2),o["ɵɵtext"](16,"\n"),o["ɵɵtemplate"](17,hP,0,0,"ng-template",null,3,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](19,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,5,"weakPasswordsReport"),"\n    "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hasLoaded&&t.loading),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,7,"weakPasswordsReportDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.hasLoaded&&t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hasLoaded))},directives:[B.NgIf,Pe.O,B.NgForOf,qa,Po.l,Tn,Oi],pipes:[M.C,B.DecimalPipe],encapsulation:2});const gP=[{path:":organizationId",component:dm,canActivate:[x,Qu.v],data:{permissions:Si.getPermissions("admin")},children:[{path:"",pathMatch:"full",redirectTo:"vault"},{path:"vault",loadChildren:()=>Wu},{path:"tools",component:bk,canActivate:[Qu.v],data:{permissions:Si.getPermissions("tools")},children:[{path:"",pathMatch:"full",redirectTo:"import"},{path:"",loadChildren:()=>Promise.all([n.e(297),n.e(929),n.e(754)]).then(n.bind(n,94754)).then((e=>e.OrganizationImportExportModule))},{path:"exposed-passwords-report",component:xE,canActivate:[Qu.v],data:{titleId:"exposedPasswordsReport",permissions:[xi.P.AccessReports]}},{path:"inactive-two-factor-report",component:LE,canActivate:[Qu.v],data:{titleId:"inactive2faReport",permissions:[xi.P.AccessReports]}},{path:"reused-passwords-report",component:hk,canActivate:[Qu.v],data:{titleId:"reusedPasswordsReport",permissions:[xi.P.AccessReports]}},{path:"unsecured-websites-report",component:Kk,canActivate:[Qu.v],data:{titleId:"unsecuredWebsitesReport",permissions:[xi.P.AccessReports]}},{path:"weak-passwords-report",component:vP,canActivate:[Qu.v],data:{titleId:"weakPasswordsReport",permissions:[xi.P.AccessReports]}}]},{path:"manage",component:rv,canActivate:[Qu.v],data:{permissions:Si.getPermissions("manage")},children:[{path:"",pathMatch:"full",redirectTo:"people"},{path:"collections",component:uh,canActivate:[Qu.v],data:{titleId:"collections",permissions:[xi.P.CreateNewCollections,xi.P.EditAnyCollection,xi.P.DeleteAnyCollection,xi.P.EditAssignedCollections,xi.P.DeleteAssignedCollections]}},{path:"events",component:kh,canActivate:[Qu.v],data:{titleId:"eventLogs",permissions:[xi.P.AccessEventLogs]}},{path:"groups",component:Qh,canActivate:[Qu.v],data:{titleId:"groups",permissions:[xi.P.ManageGroups]}},{path:"people",component:_f,canActivate:[Qu.v],data:{titleId:"people",permissions:[xi.P.ManageUsers,xi.P.ManageUsersPassword]}},{path:"policies",component:px,canActivate:[Qu.v],data:{titleId:"policies",permissions:[xi.P.ManagePolicies]}}]},{path:"settings",component:Fw,canActivate:[Qu.v],data:{permissions:Si.getPermissions("settings")},children:[{path:"",pathMatch:"full",redirectTo:"account"},{path:"account",component:Jx,data:{titleId:"myOrganization"}},{path:"two-factor",component:$C,data:{titleId:"twoStepLogin"}},{path:"billing",component:rS,canActivate:[Qu.v],data:{titleId:"billing",permissions:[xi.P.ManageBilling]}},{path:"subscription",component:Tw,data:{titleId:"subscription"}}]}]}];class fP{}fP.ɵfac=function(e){return new(e||fP)},fP.ɵmod=o["ɵɵdefineNgModule"]({type:fP}),fP.ɵinj=o["ɵɵdefineInjector"]({imports:[[p.RouterModule.forChild(gP)],p.RouterModule]});var xP,yP=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function SP(e,t){1&e&&(o["ɵɵelementStart"](0,"div",1),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div"),o["ɵɵtext"](3,"\n    "),o["ɵɵelement"](4,"img",2),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"p",3),o["ɵɵtext"](7,"\n      "),o["ɵɵelement"](8,"i",4),o["ɵɵpipe"](9,"i18n"),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"span",5),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](8),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](9,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,4,"loading")))}class bP extends O{constructor(){super(...arguments),this.failedShortMessage="inviteAcceptFailedShort",this.failedMessage="inviteAcceptFailed",this.requiredParameters=["email","token"]}authedHandler(e){return yP(this,void 0,void 0,(function*(){this.router.navigate(["/setup/families-for-enterprise"],{queryParams:e})}))}unauthedHandler(e){return yP(this,void 0,void 0,(function*(){e.register?this.router.navigate(["/register"],{queryParams:{email:e.email}}):this.router.navigate(["/login"],{queryParams:{email:e.email}})}))}}bP.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](bP)))(t||bP)}}(),bP.ɵcmp=o["ɵɵdefineComponent"]({type:bP,selectors:[["app-accept-family-sponsorship"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:2,vars:1,consts:[["class","mt-5 d-flex justify-content-center",4,"ngIf"],[1,"mt-5","d-flex","justify-content-center"],["alt","Bitwarden",1,"mb-4","logo","logo-themed"],[1,"text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-2x","text-muted",3,"title"],[1,"sr-only"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,SP,17,6,"div",0),o["ɵɵtext"](1,"\n")),2&e&&o["ɵɵproperty"]("ngIf",t.loading)},directives:[B.NgIf],pipes:[M.C],encapsulation:2}),function(e){e[e.FamiliesForEnterprise=0]="FamiliesForEnterprise"}(xP||(xP={}));class wP{}var IP=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const CP=["deleteOrganizationTemplate"];function EP(e,t){1&e&&(o["ɵɵelementStart"](0,"div",5),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",6),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"span",7),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function kP(e,t){1&e&&(o["ɵɵelementStart"](0,"div",5),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"span"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,1,"badToken")))}function PP(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",18),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.id),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function AP(e,t){1&e&&(o["ɵɵelementStart"](0,"div",19),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"app-organization-plans"),o["ɵɵtext"](3,"\n    "),o["ɵɵelementEnd"]())}function OP(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",10),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"button",20),o["ɵɵtext"](3,"\n        "),o["ɵɵelement"](4,"i",21),o["ɵɵpipe"](5,"i18n"),o["ɵɵtext"](6,"\n        "),o["ɵɵelementStart"](7,"span"),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n    "),o["ɵɵelementEnd"]()),2&e){o["ɵɵnextContext"]();const e=o["ɵɵreference"](1);o["ɵɵadvance"](2),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](5,3,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,5,"acceptOffer"))}}function TP(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",8,9),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](2,"\n    "),o["ɵɵelementStart"](3,"p"),o["ɵɵtext"](4,"\n      "),o["ɵɵelementStart"](5,"span"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n    "),o["ɵɵelementStart"](10,"div",10),o["ɵɵtext"](11,"\n      "),o["ɵɵelementStart"](12,"label",11),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n      "),o["ɵɵelementStart"](16,"select",12),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().selectedFamilyOrganizationId=t})),o["ɵɵtext"](17,"\n        "),o["ɵɵelementStart"](18,"option",13),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n        "),o["ɵɵelementStart"](22,"option",14),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n        "),o["ɵɵtemplate"](26,PP,2,2,"option",15),o["ɵɵtext"](27,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n    "),o["ɵɵtemplate"](30,AP,4,0,"div",16),o["ɵɵtext"](31,"\n    "),o["ɵɵtemplate"](32,OP,12,7,"div",17),o["ɵɵtext"](33,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",e.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,9,"acceptBitwardenFamiliesHelp")),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,11,"sponsoredFamiliesSelectOffer")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.selectedFamilyOrganizationId),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("-- ",o["ɵɵpipeBind1"](20,13,"select")," --"),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](24,15,"newFamiliesOrganization")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngForOf",e.existingFamilyOrganizations),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.showNewOrganization),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.showNewOrganization)}}function BP(e,t){}class MP{constructor(e,t,n,i,r,o,a,s,l){this.router=e,this.platformUtilsService=t,this.i18nService=n,this.route=i,this.apiService=r,this.syncService=o,this.validationService=a,this.organizationService=s,this.modalService=l,this.loading=!0,this.badToken=!1,this.showNewOrganization=!1,this._selectedFamilyOrganizationId=""}set organizationPlansComponent(e){e&&(e.plan=sS.FamiliesAnnually,e.product=hS.Families,e.acceptingSponsorship=!0,e.onSuccess.subscribe(this.onOrganizationCreateSuccess.bind(this)))}ngOnInit(){return IP(this,void 0,void 0,(function*(){document.body.classList.remove("layout_frontend"),this.route.queryParams.pipe((0,C.P)()).subscribe((e=>IP(this,void 0,void 0,(function*(){if(null==e.token)return this.platformUtilsService.showToast("error",null,this.i18nService.t("sponsoredFamiliesAcceptFailed"),{timeout:1e4}),void this.router.navigate(["/"]);this.token=e.token,yield this.syncService.fullSync(!0),this.badToken=!(yield this.apiService.postPreValidateSponsorshipToken(this.token)),this.loading=!1,this.existingFamilyOrganizations=(yield this.organizationService.getAll()).filter((e=>e.planProductType===hS.Families)),0===this.existingFamilyOrganizations.length&&(this.selectedFamilyOrganizationId="createNew")}))))}))}submit(){return IP(this,void 0,void 0,(function*(){this.formPromise=this.doSubmit(this._selectedFamilyOrganizationId),yield this.formPromise,this.formPromise=null}))}get selectedFamilyOrganizationId(){return this._selectedFamilyOrganizationId}set selectedFamilyOrganizationId(e){this._selectedFamilyOrganizationId=e,this.showNewOrganization="createNew"===e}doSubmit(e){return IP(this,void 0,void 0,(function*(){try{const t=new wP;t.planSponsorshipType=xP.FamiliesForEnterprise,t.sponsoredOrganizationId=e,yield this.apiService.postRedeemSponsorship(this.token,t),this.platformUtilsService.showToast("success",null,this.i18nService.t("sponsoredFamiliesOfferRedeemed")),yield this.syncService.fullSync(!0),this.router.navigate(["/"])}catch(t){this.showNewOrganization&&(yield this.modalService.openViewRef(zx,this.deleteModalRef,(t=>{t.organizationId=e,t.deleteOrganizationRequestType="InvalidFamiliesForEnterprise",t.onSuccess.subscribe((()=>{this.router.navigate(["/"])}))}))),this.validationService.showError(this.i18nService.t("sponsorshipTokenHasExpired"))}}))}onOrganizationCreateSuccess(e){return IP(this,void 0,void 0,(function*(){yield this.doSubmit(e.organizationId)}))}}MP.ɵfac=function(e){return new(e||MP)(o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](ov.R),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](kn))},MP.ɵcmp=o["ɵɵdefineComponent"]({type:MP,selectors:[["families-for-enterprise-setup"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](Mb,5),o["ɵɵviewQuery"](CP,7,o.ViewContainerRef)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.organizationPlansComponent=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.deleteModalRef=e.first)}},decls:19,vars:6,consts:[[1,"container","page-content"],[1,"page-header"],["class","mt-5 d-flex justify-content-center",4,"ngIf"],["ngNativeValidate","",3,"appApiAction","ngSubmit",4,"ngIf"],["deleteOrganizationTemplate",""],[1,"mt-5","d-flex","justify-content-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-2x","text-muted",3,"title"],[1,"sr-only"],["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"form-group","col-6"],["for","availableSponsorshipOrg"],["id","availableSponsorshipOrg","name","Available Sponsorship Organization","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled",""],["value","createNew"],[3,"ngValue",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],["class","form-group col-6",4,"ngIf"],[3,"ngValue"],[1,"col-12"],["type","submit",1,"btn","btn-primary","mt-2","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"h1"),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵtemplate"](9,EP,9,6,"div",2),o["ɵɵtext"](10,"\n  "),o["ɵɵtemplate"](11,kP,6,3,"div",2),o["ɵɵtext"](12,"\n  "),o["ɵɵtemplate"](13,TP,34,17,"form",3),o["ɵɵtext"](14,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n"),o["ɵɵtemplate"](16,BP,0,0,"ng-template",null,4,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](18,"\n")),2&e&&(o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,4,"sponsoredFamiliesOffer")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&t.badToken),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&!t.badToken))},directives:[B.NgIf,d.NgControlStatusGroup,d.NgForm,Y.b,d.SelectControlValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,d.NgSelectOption,d["ɵNgSelectMultipleOption"],B.NgForOf,Mb],pipes:[M.C],encapsulation:2});var DP=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function FP(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](2,1,"reportError"),"..."))}function RP(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",15),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"goodNews")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind2"](3,4,"breachUsernameNotFound",e.checkedUsername),"\n    ")}}function UP(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",16),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"breachFound")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind3"](3,4,"breachUsernameFound",e.checkedUsername,e.breachedAccounts.length),"\n    ")}}function zP(e,t){if(1&e&&(o["ɵɵelementStart"](0,"li"),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e)}}function NP(e,t){if(1&e&&(o["ɵɵelementStart"](0,"li",19),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"div",3),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"div",20),o["ɵɵtext"](5,"\n            "),o["ɵɵelement"](6,"img",21),o["ɵɵtext"](7,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n          "),o["ɵɵelementStart"](9,"div",22),o["ɵɵtext"](10,"\n            "),o["ɵɵelementStart"](11,"h3",23),o["ɵɵtext"](12),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelement"](14,"p",24),o["ɵɵtext"](15,"\n            "),o["ɵɵelementStart"](16,"p",25),o["ɵɵtext"](17),o["ɵɵpipe"](18,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n            "),o["ɵɵelementStart"](20,"ul"),o["ɵɵtext"](21,"\n              "),o["ɵɵtemplate"](22,zP,2,1,"li",26),o["ɵɵtext"](23,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n          "),o["ɵɵelementStart"](26,"div",27),o["ɵɵtext"](27,"\n            "),o["ɵɵelementStart"](28,"dl"),o["ɵɵtext"](29,"\n              "),o["ɵɵelementStart"](30,"dt"),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n              "),o["ɵɵelementStart"](34,"dd"),o["ɵɵtext"](35),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n              "),o["ɵɵelementStart"](37,"dt"),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n              "),o["ɵɵelementStart"](41,"dd"),o["ɵɵtext"](42),o["ɵɵpipe"](43,"number"),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n              "),o["ɵɵelementStart"](45,"dt"),o["ɵɵtext"](46),o["ɵɵpipe"](47,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n              "),o["ɵɵelementStart"](49,"dd"),o["ɵɵtext"](50),o["ɵɵpipe"](51,"date"),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n              "),o["ɵɵelementStart"](53,"dt"),o["ɵɵtext"](54),o["ɵɵpipe"](55,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n              "),o["ɵɵelementStart"](57,"dd"),o["ɵɵtext"](58),o["ɵɵpipe"](59,"date"),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](62,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](63,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](6),o["ɵɵproperty"]("src",e.logoPath,o["ɵɵsanitizeUrl"]),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](e.title),o["ɵɵadvance"](2),o["ɵɵproperty"]("innerHTML",e.description,o["ɵɵsanitizeHtml"]),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](18,13,"compromisedData"),":"),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",e.dataClasses),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](32,15,"website")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](e.domain),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](39,17,"affectedUsers")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](43,19,e.pwnCount)),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](47,21,"breachOccurred")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](51,23,e.breachDate,"mediumDate")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](55,26,"breachReported")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](59,28,e.addedDate,"mediumDate"))}}function VP(e,t){if(1&e&&(o["ɵɵelementStart"](0,"ul",17),o["ɵɵtext"](1,"\n      "),o["ɵɵtemplate"](2,NP,64,31,"li",18),o["ɵɵtext"](3,"\n    "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.breachedAccounts)}}function HP(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵtemplate"](2,RP,4,7,"app-callout",12),o["ɵɵtext"](3,"\n    "),o["ɵɵtemplate"](4,UP,4,8,"app-callout",13),o["ɵɵtext"](5,"\n    "),o["ɵɵtemplate"](6,VP,4,1,"ul",14),o["ɵɵtext"](7,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.breachedAccounts.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.breachedAccounts.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.breachedAccounts.length)}}function jP(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",10),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,FP,3,3,"p",11),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,HP,8,3,"ng-container",11),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.error),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.error)}}class LP{constructor(e,t){this.auditService=e,this.stateService=t,this.error=!1,this.breachedAccounts=[]}ngOnInit(){return DP(this,void 0,void 0,(function*(){this.username=yield this.stateService.getEmail()}))}submit(){return DP(this,void 0,void 0,(function*(){this.error=!1,this.username=this.username.toLowerCase();try{this.formPromise=this.auditService.breachedAccounts(this.username),this.breachedAccounts=yield this.formPromise}catch(e){this.error=!0}this.checkedUsername=this.username}))}}LP.ɵfac=function(e){return new(e||LP)(o["ɵɵdirectiveInject"](Zr),o["ɵɵdirectiveInject"](P.b))},LP.ɵcmp=o["ɵɵdefineComponent"]({type:LP,selectors:[["app-breach-report"]],decls:37,vars:19,consts:[[1,"page-header"],["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"row"],[1,"form-group","col-6"],["for","username"],["id","username","type","text","name","Username","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-text","text-muted"],[3,"loading"],["class","mt-4",4,"ngIf"],[1,"mt-4"],[4,"ngIf"],["type","success",3,"title",4,"ngIf"],["type","danger",3,"title",4,"ngIf"],["class","list-group list-group-breach",4,"ngIf"],["type","success",3,"title"],["type","danger",3,"title"],[1,"list-group","list-group-breach"],["class","list-group-item min-height-fix",4,"ngFor","ngForOf"],[1,"list-group-item","min-height-fix"],[1,"col-2","text-center"],["alt","",1,"img-fluid",3,"src"],[1,"col-7"],[1,"text-lg"],[3,"innerHTML"],[1,"mb-1"],[4,"ngFor","ngForOf"],[1,"col-3"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelementStart"](7,"p"),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n"),o["ɵɵelementStart"](11,"form",1,2),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](13,"\n  "),o["ɵɵelementStart"](14,"div",3),o["ɵɵtext"](15,"\n    "),o["ɵɵelementStart"](16,"div",4),o["ɵɵtext"](17,"\n      "),o["ɵɵelementStart"](18,"label",5),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementStart"](22,"input",6),o["ɵɵlistener"]("ngModelChange",(function(e){return t.username=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵelementStart"](24,"small",7),o["ɵɵtext"](25),o["ɵɵpipe"](26,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n  "),o["ɵɵelementStart"](30,"bit-submit-button",8),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n"),o["ɵɵtemplate"](35,jP,6,2,"div",9),o["ɵɵtext"](36,"\n")),2&e){const e=o["ɵɵreference"](12);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,9,"dataBreachReport")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,11,"breachDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](20,13,"username")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.username),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](26,15,"breachCheckUsernameEmail")),o["ɵɵadvance"](5),o["ɵɵproperty"]("loading",e.loading),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](32,17,"checkBreaches"),"\n  "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!e.loading&&t.checkedUsername)}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,at,B.NgIf,Pe.O,B.NgForOf],pipes:[M.C,B.DecimalPipe,B.DatePipe],encapsulation:2});var KP=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function GP(e,t){1&e&&(o["ɵɵelementStart"](0,"span",8),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"premium")))}const qP=function(e){return{"tw-grayscale":e}};var _P;!function(e){e.exposedPasswords="exposedPasswords",e.reusedPasswords="reusedPasswords",e.weakPasswords="weakPasswords",e.unsecuredWebsites="unsecuredWebsites",e.inactive2fa="inactive2fa",e.dataBreach="dataBreach"}(_P||(_P={}));const $P={exposedPasswords:{title:"exposedPasswordsReport",description:"exposedPasswordsReportDesc",route:"exposed-passwords-report",icon:'\n      <svg width="101" height="77" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M32.374 50.192a26.42 26.42 0 0 0 9.111 1.608c14.34 0 25.965-11.372 25.965-25.4 0-.337-.007-.673-.02-1.008h25.299v34.85H32.374v-10.05Z" fill="currentColor" />\n        <path d="M15.805 26.4c0 14.028 11.625 25.4 25.965 25.4s25.964-11.372 25.964-25.4C67.734 12.372 56.11 1 41.77 1 27.43 1 15.805 12.372 15.805 26.4Z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />\n        <path d="M27.914 47.849a1 1 0 0 0-2 0h2Zm68.288-26.792a2.12 2.12 0 0 1 2.14 2.11h2c0-2.253-1.83-4.11-4.14-4.11v2Zm2.14 2.11v40.552h2V23.167h-2Zm0 40.552c0 1.172-.958 2.11-2.14 2.11v2c2.25 0 4.14-1.798 4.14-4.11h-2Zm-2.14 2.11H30.054v2h66.148v-2Zm-66.148 0a2.12 2.12 0 0 1-2.14-2.11h-2a4.12 4.12 0 0 0 4.14 4.11v-2Zm-2.14-2.11V47.85h-2v15.87h2Zm39.254-42.662h29.034v-2H67.168v2Z" fill="#fff" />\n        <path d="M67.203 25.56h25.64v34.85H32.487V50.011" stroke="#fff" stroke-width="2" stroke-linejoin="round" />\n        <path d="M47.343 76h31.571" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />\n        <path d="M57.557 66.83V76M67.771 66.83V76" stroke="#fff" stroke-width="2" stroke-linejoin="round" />\n        <path d="m20.995 42.873-3.972 3.972-14.61 14.61a3.413 3.413 0 0 0 0 4.826v0a3.413 3.413 0 0 0 4.827 0l14.61-14.61 3.972-3.972" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />\n        <path d="M86.037 32.488H71.845M86.037 37.81H76.28M71.845 37.81h-6.652M86.037 43.132h-6.209M74.95 43.132H61.2M86.037 48.454H71.845M66.967 48.454h-7.54M86.037 53.776H66.08M61.201 53.776h-11.53M44.793 53.776h-7.096" stroke="#fff" stroke-width="2" stroke-linecap="round" />\n        <rect width="40.801" height="9.757" rx="4" transform="matrix(-1 0 0 1 61.201 14.748)" stroke="#fff" stroke-width="2" />\n        <path d="M16.852 33.375h28.375a4 4 0 0 1 4 4v1.757a4 4 0 0 1-4 4H22.174M66.523 33.375h-3.539a4 4 0 0 0-4 4v3.761c0 1.102.894 1.996 1.996 1.996v0" stroke="#fff" stroke-width="2" stroke-linecap="round" />\n      </svg>\n    ',requiresPremium:!0},reusedPasswords:{title:"reusedPasswordsReport",description:"reusedPasswordsReportDesc",route:"reused-passwords-report",icon:'\n    <svg width="102" height="102" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M57.983 15.06a35.664 35.664 0 0 1 14.531 6.27c16.164 11.78 19.585 34.613 7.643 51a37.227 37.227 0 0 1-6.81 7.138m-32.842 6.697a35.708 35.708 0 0 1-11.239-5.495c-16.163-11.78-19.585-34.613-7.642-51a37.55 37.55 0 0 1 3.295-3.929" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />\n      <path d="M93.909 64.598H7.72c-.708 0-1.275-.662-1.275-1.49V40.273c0-.828.567-1.49 1.275-1.49H93.91c.708 0 1.275.663 1.275 1.49v22.837c.047.827-.567 1.49-1.275 1.49Z" fill="currentColor" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />\n      <path d="M21.532 52.186v-5.965M21.532 52.187l5.748-1.844M21.532 52.186l3.524 4.881M21.531 52.186l-3.47 4.881M21.532 52.187l-5.694-1.844M40.944 52.186v-5.965M40.944 52.187l5.694-1.844M40.944 52.187l3.525 4.88M40.944 52.187l-3.525 4.88M40.944 52.187l-5.694-1.844M54.849 57.337h11.294M74.21 57.337h11.295M41.75 83l.71 4.75-4.75.71M58.664 18.66 56 14.665 59.996 12" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />\n    </svg>\n    ',requiresPremium:!0},weakPasswords:{title:"weakPasswordsReport",description:"weakPasswordsReportDesc",route:"weak-passwords-report",icon:'\n      <svg width="78" height="78" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M66.493 64.415V77H9.979V64.324M9.979 44.065V32.106h56.514v12.148" stroke="#fff" stroke-width="2" stroke-linejoin="round" />\n        <path d="M75.44 64.852H2.085c-.603 0-1.085-.555-1.085-1.25V44.448c0-.694.482-1.25 1.085-1.25H75.44c.603 0 1.085.556 1.085 1.25v19.156c.04.694-.482 1.25-1.085 1.25Z" fill="currentColor" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />\n        <path d="M13.84 54.56v-5.077M13.84 54.56l4.893-1.57M13.84 54.56l3 4.153M13.84 54.56l-2.954 4.153M13.84 54.56l-4.846-1.57M30.363 54.56v-5.077M30.363 54.56l4.846-1.57M30.363 54.56l3 4.153M30.363 54.56l-3 4.153M30.363 54.56l-4.846-1.57M42.197 59.042h9.506M58.57 59.042h9.507" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />\n        <path d="M20.863 31.364c-.274-5.285 0-15.817 1.093-18.863 1.276-3.554 6.233-10.826 15.856-11.482 4.83-.273 15.2 2.296 18.043 14.763" stroke="#fff" stroke-width="2" />\n      </svg>\n    ',requiresPremium:!0},unsecuredWebsites:{title:"unsecuredWebsitesReport",description:"unsecuredWebsitesReportDesc",route:"unsecured-websites-report",icon:'\n      <svg width="113" height="76" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M1.71 12.983h110.362v55.11a6 6 0 0 1-6 6H7.711a6 6 0 0 1-6-6v-55.11Z" fill="currentColor" />\n        <rect x="1" y="1.073" width="110.5" height="73.454" rx="9" stroke="#fff" stroke-width="2" />\n        <path d="M89.48 8.048V7.47M96.363 8.048V7.47M103.246 8.048V7.47" stroke="#fff" stroke-width="4" stroke-linecap="round" />\n        <path d="M0 12.983h111.217" stroke="#fff" stroke-width="2" />\n        <path d="m93.236 44.384-18.42-11.026 2.93 21.266 5.582-5.237 4.27 6.46 2.98-1.971-4.26-6.446 6.918-3.046Z" fill="#175DDC" stroke="#fff" stroke-width="2" stroke-linejoin="round" />\n        <rect width="96.673" height="6.886" rx="3.443" transform="matrix(-1 0 0 1 104.373 18.721)" stroke="#fff" />\n      </svg>\n    ',requiresPremium:!0},inactive2fa:{title:"inactive2faReport",description:"inactive2faReportDesc",route:"inactive-two-factor-report",icon:'\n      <svg width="42" height="75" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path fill="currentColor" stroke="#fff" stroke-width="2" d="M1 13.121h39.595v48.758H1z" />\n        <rect x="1" y="1" width="39.595" height="73" rx="8" stroke="#fff" stroke-width="2" />\n        <path stroke="#fff" stroke-width="2" stroke-linecap="round" d="M12.344 8.091h16.907M18.907 67.424h3.025M31.503 32.515c-2.047-4.337-6.717-7.061-11.73-6.414a11.356 11.356 0 0 0-9.125 7.126M10.816 42.016c2.047 4.337 6.718 7.062 11.73 6.414 4.346-.562 7.8-3.51 9.213-7.358" />\n        <path d="m33.584 29.293-1.295 4.625-4.625-1.295M8.523 44.725l1.441-4.581 4.582 1.441" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />\n      </svg>\n    ',requiresPremium:!0},dataBreach:{title:"dataBreachReport",description:"breachDesc",route:"breach-report",icon:'\n      <svg width="58" height="75" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M39.569 74H13.007a7 7 0 0 1-7-7V31.077a7 7 0 0 1 7-7h19.101a7 7 0 0 1 4.988 2.088l7.46 7.576a7 7 0 0 1 2.013 4.912V67a7 7 0 0 1-7 7Z" fill="#175DDC" stroke="#fff" stroke-width="2" />\n        <path d="M44.576 69.055H18.015a7 7 0 0 1-7-7V26.132a7 7 0 0 1 7-7h19.1a7 7 0 0 1 4.988 2.088l7.46 7.576a7 7 0 0 1 2.013 4.911v28.348a7 7 0 0 1-7 7Z" fill="#175DDC" stroke="#fff" stroke-width="2" />\n        <path d="M50 63.698H23.439a7 7 0 0 1-7-7V20.775a7 7 0 0 1 7-7h19.1a7 7 0 0 1 4.988 2.088l7.46 7.575A7 7 0 0 1 57 28.35v28.348a7 7 0 0 1-7 7Z" fill="#175DDC" stroke="#fff" stroke-width="2" />\n        <path d="M44.648 13.599v3.95a8 8 0 0 0 8 8h4.518" stroke="#fff" stroke-width="2" />\n        <path stroke="#fff" stroke-width="2" stroke-linecap="round" d="M23.533 37.736H49.49M23.533 46.802H49.49M23.533 42.269H49.49M23.533 55.456H49.49M23.533 50.923H49.49" />\n        <path d="M1 16.483C1 7.944 8.013 1 16.69 1c8.678 0 15.691 6.944 15.691 15.483 0 8.54-7.013 15.484-15.69 15.484C8.012 31.967 1 25.023 1 16.484Z" fill="#518FFF" stroke="#fff" stroke-width="2" />\n        <path d="m16.562 7.979.1 11.538" stroke="#fff" stroke-width="2" stroke-linecap="round" />\n        <ellipse rx="1.252" ry="1.236" transform="rotate(-.479 2802.219 -1964.476) skewX(.012)" fill="#fff" />\n      </svg>\n    ',requiresPremium:!1}};class WP{constructor(e,t,n){this.stateService=e,this.messagingService=t,this.sanitizer=n}ngOnInit(){return KP(this,void 0,void 0,(function*(){this.report=$P[this.type],this.hasPremium=yield this.stateService.getCanAccessPremium()}))}get premium(){return this.report.requiresPremium&&!this.hasPremium}get route(){return this.premium?null:this.report.route}get icon(){return this.sanitizer.bypassSecurityTrustHtml(this.report.icon)}click(){this.premium&&this.messagingService.send("premiumRequired")}}function QP(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"app-report-card",3),o["ɵɵtext"](3,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](2),o["ɵɵproperty"]("type",e)}}WP.ɵfac=function(e){return new(e||WP)(o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](r.DomSanitizer))},WP.ɵcmp=o["ɵɵdefineComponent"]({type:WP,selectors:[["app-report-card"]],inputs:{type:"type"},decls:24,vars:15,consts:[[1,"tw-border","tw-border-solid","tw-border-secondary-300","tw-rounded","tw-overflow-hidden","tw-h-full","tw-w-72","tw-block","!tw-text-main","hover:tw-no-underline","hover:tw-scale-105","tw-transition-all","focus:tw-outline-none","focus:tw-ring","focus:tw-ring-offset-2","focus:tw-ring-primary-700",3,"routerLink","click"],[1,"tw-relative"],[1,"tw-text-center","tw-h-28","tw-flex","tw-bg-background-alt2","tw-text-primary-300",3,"ngClass"],[1,"tw-m-auto",3,"innerHtml"],[1,"tw-p-5",3,"ngClass"],[1,"tw-text-xl","tw-font-bold","tw-mb-4"],[1,"tw-mb-0"],["bitBadge","","badgeType","success","class","tw-absolute tw-left-2 tw-top-2 tw-leading-none",4,"ngIf"],["bitBadge","","badgeType","success",1,"tw-absolute","tw-left-2","tw-top-2","tw-leading-none"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"a",0),o["ɵɵlistener"]("click",(function(){return t.click()})),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelement"](6,"div",3),o["ɵɵtext"](7,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementStart"](9,"div",4),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"h3",5),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n      "),o["ɵɵelementStart"](15,"p",6),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n    "),o["ɵɵtemplate"](20,GP,3,3,"span",7),o["ɵɵtext"](21,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n")),2&e&&(o["ɵɵproperty"]("routerLink",t.route),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](11,qP,t.premium)),o["ɵɵadvance"](2),o["ɵɵproperty"]("innerHtml",t.icon,o["ɵɵsanitizeHtml"]),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](13,qP,t.report.requiresPremium)),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,7,t.report.title)),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,9,t.report.description)),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.premium))},directives:[p.RouterLinkWithHref,B.NgClass,B.NgIf,Po.l],pipes:[M.C],encapsulation:2});class YP{constructor(){this.reports=[_P.exposedPasswords,_P.reusedPasswords,_P.weakPasswords,_P.unsecuredWebsites,_P.inactive2fa,_P.dataBreach]}}function ZP(e,t){1&e&&(o["ɵɵelementStart"](0,"a",4),o["ɵɵtext"](1,"\n        "),o["ɵɵelement"](2,"i",5),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](4,1,"backToReports"),"\n      "))}YP.ɵfac=function(e){return new(e||YP)},YP.ɵcmp=o["ɵɵdefineComponent"]({type:YP,selectors:[["app-report-list"]],decls:16,vars:7,consts:[[1,"page-header"],[1,"tw-inline-grid","tw-grid-cols-3","tw-gap-4"],[4,"ngFor","ngForOf"],[3,"type"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n\n"),o["ɵɵelementStart"](7,"p"),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n\n"),o["ɵɵelementStart"](11,"div",1),o["ɵɵtext"](12,"\n  "),o["ɵɵtemplate"](13,QP,4,1,"div",2),o["ɵɵtext"](14,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"reports")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,5,"reportsDesc")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",t.reports))},directives:[B.NgForOf,WP],pipes:[M.C],encapsulation:2});class JP{constructor(e){this.homepage=!0,this.subscription=e.events.pipe((0,de.h)((e=>e instanceof p.NavigationEnd))).subscribe((e=>{this.homepage="/reports"==e.url}))}ngOnDestroy(){var e;null===(e=this.subscription)||void 0===e||e.unsubscribe()}}JP.ɵfac=function(e){return new(e||JP)(o["ɵɵdirectiveInject"](p.Router))},JP.ɵcmp=o["ɵɵdefineComponent"]({type:JP,selectors:[["app-reports"]],decls:13,vars:1,consts:[[1,"container","page-content"],[1,"row","mt-4"],[1,"col"],["bitButton","","routerLink","./",4,"ngIf"],["bitButton","","routerLink","./"],["aria-hidden","true",1,"bwi","bwi-angle-left"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"router-outlet"),o["ɵɵtext"](3,"\n\n  "),o["ɵɵelementStart"](4,"div",1),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"div",2),o["ɵɵtext"](7,"\n      "),o["ɵɵtemplate"](8,ZP,5,3,"a",3),o["ɵɵtext"](9,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n")),2&e&&(o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",!t.homepage))},directives:[p.RouterOutlet,B.NgIf,et.H,p.RouterLinkWithHref],pipes:[M.C],encapsulation:2});const XP=[{path:"",component:JP,canActivate:[x],children:[{path:"",pathMatch:"full",component:YP,data:{homepage:!0}},{path:"breach-report",component:LP,data:{titleId:"dataBreachReport"}},{path:"reused-passwords-report",component:tk,data:{titleId:"reusedPasswordsReport"}},{path:"unsecured-websites-report",component:Mk,data:{titleId:"unsecuredWebsitesReport"}},{path:"weak-passwords-report",component:nP,data:{titleId:"weakPasswordsReport"}},{path:"exposed-passwords-report",component:sE,data:{titleId:"exposedPasswordsReport"}},{path:"inactive-two-factor-report",component:TE,data:{titleId:"inactive2faReport"}}]}];class eA{}var tA;eA.ɵfac=function(e){return new(e||eA)},eA.ɵmod=o["ɵɵdefineNgModule"]({type:eA}),eA.ɵinj=o["ɵɵdefineInjector"]({imports:[[p.RouterModule.forChild(XP)],p.RouterModule]}),function(e){e[e.Text=0]="Text",e[e.File=1]="File"}(tA||(tA={}));class nA{constructor(e){this.id=null,this.size=null,this.sizeName=null,this.fileName=null,e&&(this.id=e.id,this.size=e.size,this.sizeName=e.sizeName)}get fileSize(){try{if(null!=this.size)return parseInt(this.size,null)}catch(e){}return 0}}class iA{constructor(e){this.text=null,e&&(this.hidden=e.hidden)}get maskedText(){return null!=this.text?"••••••••":null}}class rA{constructor(e){this.id=null,this.name=null,this.type=null,this.text=new iA,this.file=new nA,this.expirationDate=null,this.creatorIdentifier=null,e&&(this.id=e.id,this.type=e.type,this.expirationDate=e.expirationDate,this.creatorIdentifier=e.creatorIdentifier)}}var oA=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class aA extends _e.Z{constructor(e){super(),null!=e&&(this.size=e.size,this.buildDomainModel(this,e,{id:null,sizeName:null,fileName:null},["id","sizeName"]))}decrypt(e){return oA(this,void 0,void 0,(function*(){return yield this.decryptObj(new nA(this),{fileName:null},null,e)}))}}class sA extends _e.Z{constructor(e){super(),null!=e&&(this.hidden=e.hidden,this.buildDomainModel(this,e,{text:null},[]))}decrypt(e){return this.decryptObj(new iA(this),{text:null},null,e)}}var lA=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class dA extends _e.Z{constructor(e){if(super(),null!=e)switch(this.buildDomainModel(this,e,{id:null,name:null,expirationDate:null,creatorIdentifier:null},["id","expirationDate","creatorIdentifier"]),this.type=e.type,this.type){case tA.Text:this.text=new sA(e.text);break;case tA.File:this.file=new aA(e.file)}}decrypt(e){return lA(this,void 0,void 0,(function*(){const t=new rA(this);switch(yield this.decryptObj(t,{name:null},null,e),this.type){case tA.File:t.file=yield this.file.decrypt(e);break;case tA.Text:t.text=yield this.text.decrypt(e)}return t}))}}class cA{}var pA=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function uA(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",16),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n    "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](4,1,"sendCreatorIdentifier",e.creatorIdentifier))}}function mA(e,t){1&e&&(o["ɵɵelementStart"](0,"div",17),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"app-callout",18),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementStart"](6,"a",19),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,".\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"warning")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](5,5,"viewSendHiddenEmailWarning"),"\n        "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,7,"learnMore")))}function hA(e,t){1&e&&(o["ɵɵelementStart"](0,"div",20),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",21),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span",22),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function vA(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",23),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"p"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelementStart"](10,"div",24),o["ɵɵtext"](11,"\n            "),o["ɵɵelementStart"](12,"label",25),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n            "),o["ɵɵelementStart"](16,"input",26),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().password=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n          "),o["ɵɵelementStart"](19,"div",27),o["ɵɵtext"](20,"\n            "),o["ɵɵelementStart"](21,"button",28),o["ɵɵtext"](22,"\n              "),o["ɵɵelementStart"](23,"span"),o["ɵɵtext"](24,"\n                "),o["ɵɵelement"](25,"i",29),o["ɵɵtext"](26),o["ɵɵpipe"](27,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n              "),o["ɵɵelement"](29,"i",30),o["ɵɵpipe"](30,"i18n"),o["ɵɵtext"](31,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](),t=o["ɵɵreference"](1);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,7,"sendProtectedPassword")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,9,"sendProtectedPasswordDontKnow")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,11,"password")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.password),o["ɵɵadvance"](5),o["ɵɵproperty"]("disabled",t.loading),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](27,13,"continue"),"\n              "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](30,15,"loading"))}}function gA(e,t){1&e&&(o["ɵɵelementStart"](0,"div",23),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"sendAccessUnavailable"),"\n        "))}function fA(e,t){1&e&&(o["ɵɵelementStart"](0,"div",23),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"unexpectedError"),"\n        "))}function xA(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",38),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"sendHiddenByDefault")))}const yA=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}};function SA(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",36),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).toggleText()})),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",39),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](4,yA,!e.showText,e.showText)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](4,2,"toggleVisibility"),"\n            ")}}function bA(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵtemplate"](2,xA,3,3,"app-callout",33),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"div",24),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"textarea",34),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).sendText=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵtemplate"](9,SA,5,7,"button",35),o["ɵɵtext"](10,"\n            "),o["ɵɵelementStart"](11,"button",36),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).copyText()})),o["ɵɵtext"](12,"\n              "),o["ɵɵelement"](13,"i",37),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n          "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.send.text.hidden),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngModel",e.sendText),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.send.text.hidden),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](15,4,"copyValue"),"\n            ")}}function wA(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",42),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).download()})),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",43),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate2"]("\n              ",o["ɵɵpipeBind1"](4,2,"downloadFile")," (",e.send.file.sizeName,")\n            ")}}function IA(e,t){1&e&&(o["ɵɵelementStart"](0,"button",44),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",30),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n            "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,1,"loading")))}function CA(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵelementEnd"](),o["ɵɵtext"](4,"\n            "),o["ɵɵtemplate"](5,wA,5,4,"button",40),o["ɵɵtext"](6,"\n            "),o["ɵɵtemplate"](7,IA,5,3,"button",41),o["ɵɵtext"](8,"\n          "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](e.send.file.fileName),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.downloading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.downloading)}}function EA(e,t){if(1&e&&(o["ɵɵelementStart"](0,"p",45),o["ɵɵtext"](1),o["ɵɵpipe"](2,"date"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            Expires: ",o["ɵɵpipeBind2"](2,1,e.expirationDate,"medium"),"\n          ")}}function kA(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",23),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"p",20),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"b"),o["ɵɵtext"](5),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n          "),o["ɵɵelement"](8,"hr"),o["ɵɵtext"](9,"\n          "),o["ɵɵtext"](10,"\n          "),o["ɵɵtemplate"](11,bA,17,6,"ng-container",31),o["ɵɵtext"](12,"\n          "),o["ɵɵtext"](13,"\n          "),o["ɵɵtemplate"](14,CA,9,3,"ng-container",31),o["ɵɵtext"](15,"\n          "),o["ɵɵtemplate"](16,EA,3,4,"p",32),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.send.name),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",e.send.type===e.sendType.Text),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.send.type===e.sendType.File),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.expirationDate)}}class PA{constructor(e,t,n,i,r,o,a){this.i18nService=e,this.cryptoFunctionService=t,this.apiService=n,this.platformUtilsService=i,this.route=r,this.cryptoService=o,this.fileDownloadService=a,this.sendType=tA,this.downloading=!1,this.loading=!0,this.passwordRequired=!1,this.showText=!1,this.unavailable=!1,this.error=!1,this.hideEmail=!1}get sendText(){return null==this.send||null==this.send.text?null:this.showText?this.send.text.text:this.send.text.maskedText}get expirationDate(){return null==this.send||null==this.send.expirationDate?null:this.send.expirationDate}get creatorIdentifier(){return null==this.send||null==this.send.creatorIdentifier?null:this.send.creatorIdentifier}ngOnInit(){this.route.params.subscribe((e=>pA(this,void 0,void 0,(function*(){this.id=e.sendId,this.key=e.key,null!=this.key&&null!=this.id&&(yield this.load())}))))}download(){return pA(this,void 0,void 0,(function*(){if(null==this.send||null==this.decKey)return;if(this.downloading)return;const e=yield this.apiService.getSendFileDownloadData(this.send,this.accessRequest);if(N.c.isNullOrWhitespace(e.url))return void this.platformUtilsService.showToast("error",null,this.i18nService.t("missingSendFile"));this.downloading=!0;const t=yield fetch(new Request(e.url,{cache:"no-store"}));if(200!==t.status)return this.platformUtilsService.showToast("error",null,this.i18nService.t("errorOccurred")),void(this.downloading=!1);try{const e=yield t.arrayBuffer(),n=yield this.cryptoService.decryptFromBytes(e,this.decKey);this.fileDownloadService.download({fileName:this.send.file.fileName,blobData:n,downloadMethod:"save"})}catch(n){this.platformUtilsService.showToast("error",null,this.i18nService.t("errorOccurred"))}this.downloading=!1}))}copyText(){this.platformUtilsService.copyToClipboard(this.send.text.text),this.platformUtilsService.showToast("success",null,this.i18nService.t("valueCopied",this.i18nService.t("sendTypeText")))}toggleText(){this.showText=!this.showText}load(){return pA(this,void 0,void 0,(function*(){this.unavailable=!1,this.error=!1,this.hideEmail=!1;const e=N.c.fromUrlB64ToArray(this.key);if(this.accessRequest=new cA,null!=this.password){const t=yield this.cryptoFunctionService.pbkdf2(this.password,e,"sha256",He.gY);this.accessRequest.password=N.c.fromBufferToB64(t)}try{let t=null;this.loading?t=yield this.apiService.postSendAccess(this.id,this.accessRequest):(this.formPromise=this.apiService.postSendAccess(this.id,this.accessRequest),t=yield this.formPromise),this.passwordRequired=!1;const n=new dA(t);this.decKey=yield this.cryptoService.makeSendKey(e),this.send=yield n.decrypt(this.decKey),this.showText=null==this.send.text||!this.send.text.hidden}catch(t){t instanceof wa.i&&(401===t.statusCode?this.passwordRequired=!0:404===t.statusCode?this.unavailable=!0:this.error=!0)}this.loading=!1,this.hideEmail=null==this.creatorIdentifier&&!this.passwordRequired&&!this.loading&&!this.unavailable}))}}PA.ɵfac=function(e){return new(e||PA)(o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](we),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](Ia._))},PA.ɵcmp=o["ɵɵdefineComponent"]({type:PA,selectors:[["app-send-access"]],decls:55,vars:23,consts:[["ngNativeValidate","",1,"container",3,"appApiAction","ngSubmit"],["form",""],[1,"row","justify-content-center","mt-5"],[1,"col-12"],[1,"lead","text-center","mb-4"],["class","col-12 text-center",4,"ngIf"],["class","col-8",4,"ngIf"],[1,"row","justify-content-center"],[1,"col-5"],[1,"card","d-block"],["class","card-body","class","text-center",4,"ngIf"],["class","card-body",4,"ngIf"],[1,"col-12","text-center","mt-5","text-muted"],[1,"mb-0"],["href","https://www.bitwarden.com/products/send?source=web-vault","target","_blank"],["href","https://vault.bitwarden.com/#/register","target","_blank"],[1,"col-12","text-center"],[1,"col-8"],["type","warning",3,"title"],["href","https://bitwarden.com/help/receive-send/","target","_blank"],[1,"text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-2x","text-muted",3,"title"],[1,"sr-only"],[1,"card-body"],[1,"form-group"],["for","password"],["id","password","type","password","name","Password","required","","appInputVerbatim","","appAutofocus","",1,"text-monospace","form-control",3,"ngModel","ngModelChange"],[1,"d-flex"],["type","submit",1,"btn","btn-primary","btn-block","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-sign-in"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[4,"ngIf"],["class","text-center text-muted",4,"ngIf"],["type","tip",4,"ngIf"],["id","text","rows","8","name","Text","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["class","btn btn-block btn-link","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-block","btn-link",3,"click"],["aria-hidden","true",1,"bwi","bwi-copy"],["type","tip"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],["class","btn btn-primary btn-block","type","button",3,"click",4,"ngIf"],["class","btn btn-primary btn-block","type","button","disabled","true",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],["aria-hidden","true",1,"bwi","bwi-download"],["type","button","disabled","true",1,"btn","btn-primary","btn-block"],[1,"text-center","text-muted"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.load()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",2),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",3),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"h1",4),o["ɵɵtext"](8,"Bitwarden Send"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵtemplate"](11,uA,6,4,"div",5),o["ɵɵtext"](12,"\n    "),o["ɵɵtemplate"](13,mA,11,9,"div",6),o["ɵɵtext"](14,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementStart"](16,"div",7),o["ɵɵtext"](17,"\n    "),o["ɵɵelementStart"](18,"div",8),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"div",9),o["ɵɵtext"](21,"\n        "),o["ɵɵtemplate"](22,hA,9,6,"div",10),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,vA,34,17,"div",11),o["ɵɵtext"](25,"\n        "),o["ɵɵtemplate"](26,gA,3,3,"div",11),o["ɵɵtext"](27,"\n        "),o["ɵɵtemplate"](28,fA,3,3,"div",11),o["ɵɵtext"](29,"\n        "),o["ɵɵtemplate"](30,kA,18,4,"div",11),o["ɵɵtext"](31,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n    "),o["ɵɵelementStart"](34,"div",12),o["ɵɵtext"](35,"\n      "),o["ɵɵelementStart"](36,"p",13),o["ɵɵtext"](37),o["ɵɵpipe"](38,"i18n"),o["ɵɵelement"](39,"br"),o["ɵɵtext"](40),o["ɵɵpipe"](41,"i18n"),o["ɵɵelementStart"](42,"a",14),o["ɵɵtext"](43,"Bitwarden Send"),o["ɵɵelementEnd"](),o["ɵɵtext"](44),o["ɵɵpipe"](45,"i18n"),o["ɵɵelementStart"](46,"a",15),o["ɵɵtext"](47),o["ɵɵpipe"](48,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](49),o["ɵɵpipe"](50,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n")),2&e&&(o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](11),o["ɵɵproperty"]("ngIf",null!=t.creatorIdentifier),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.hideEmail),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&t.passwordRequired),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&t.unavailable),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&t.error),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&!t.passwordRequired&&t.send),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](38,13,"sendAccessTaglineProductDesc"),""),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](41,15,"sendAccessTaglineLearnMore"),"\n        "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](45,17,"sendAccessTaglineOr"),"\n        "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](48,19,"sendAccessTaglineSignUp")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](50,21,"sendAccessTaglineTryToday"),"\n      "))},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,Pe.O,d.DefaultValueAccessor,d.RequiredValidator,J.b,Z.U,d.NgControlStatus,d.NgModel,B.NgClass],pipes:[M.C,B.DatePipe],encapsulation:2});class AA{}var OA=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class TA{constructor(e,t,n,i,r,o,a,s){this.sendService=e,this.i18nService=t,this.platformUtilsService=n,this.environmentService=i,this.ngZone=r,this.searchService=o,this.policyService=a,this.logService=s,this.disableSend=!1,this.sendType=tA,this.loaded=!1,this.loading=!0,this.refreshing=!1,this.expired=!1,this.type=null,this.sends=[],this.filteredSends=[],this.searchPending=!1,this.hasSearched=!1}ngOnInit(){return OA(this,void 0,void 0,(function*(){this.disableSend=yield this.policyService.policyAppliesToUser(Kr.M.DisableSend)}))}load(e=null){return OA(this,void 0,void 0,(function*(){this.loading=!0;const e=yield this.sendService.getAllDecrypted();this.sends=e,null!=this.onSuccessfulLoad?yield this.onSuccessfulLoad():this.selectAll(),this.loading=!1,this.loaded=!0}))}reload(e=null){return OA(this,void 0,void 0,(function*(){this.loaded=!1,this.sends=[],yield this.load(e)}))}refresh(){return OA(this,void 0,void 0,(function*(){try{this.refreshing=!0,yield this.reload(this.filter)}finally{this.refreshing=!1}}))}applyFilter(e=null){return OA(this,void 0,void 0,(function*(){this.filter=e,yield this.search(null)}))}search(e=null){return OA(this,void 0,void 0,(function*(){if(this.searchPending=!1,null!=this.searchTimeout&&clearTimeout(this.searchTimeout),null==e)return this.hasSearched=this.searchService.isSearchable(this.searchText),this.filteredSends=this.sends.filter((e=>null==this.filter||this.filter(e))),void this.applyTextSearch();this.searchPending=!0,this.searchTimeout=setTimeout((()=>OA(this,void 0,void 0,(function*(){this.hasSearched=this.searchService.isSearchable(this.searchText),this.filteredSends=this.sends.filter((e=>null==this.filter||this.filter(e))),this.applyTextSearch(),this.searchPending=!1}))),e)}))}removePassword(e){return OA(this,void 0,void 0,(function*(){if(null!=this.actionPromise||null==e.password)return;if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("removePasswordConfirmation"),this.i18nService.t("removePassword"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{this.actionPromise=this.sendService.removePasswordWithServer(e.id),yield this.actionPromise,null!=this.onSuccessfulRemovePassword?this.onSuccessfulRemovePassword():(this.platformUtilsService.showToast("success",null,this.i18nService.t("removedPassword")),yield this.load())}catch(t){this.logService.error(t)}this.actionPromise=null}))}delete(e){return OA(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return!1;if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("deleteSendConfirmation"),this.i18nService.t("deleteSend"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{this.actionPromise=this.sendService.deleteWithServer(e.id),yield this.actionPromise,null!=this.onSuccessfulDelete?this.onSuccessfulDelete():(this.platformUtilsService.showToast("success",null,this.i18nService.t("deletedSend")),yield this.refresh())}catch(t){this.logService.error(t)}return this.actionPromise=null,!0}))}copy(e){const t=this.environmentService.getSendUrl()+e.accessId+"/"+e.urlB64Key;this.platformUtilsService.copyToClipboard(t),this.platformUtilsService.showToast("success",null,this.i18nService.t("valueCopied",this.i18nService.t("sendLink")))}searchTextChanged(){this.search(200)}selectAll(){this.clearSelections(),this.selectedAll=!0,this.applyFilter(null)}selectType(e){this.clearSelections(),this.selectedType=e,this.applyFilter((t=>t.type===e))}clearSelections(){this.selectedAll=!1,this.selectedType=null}applyTextSearch(){null!=this.searchText&&(this.filteredSends=this.searchService.searchSends(this.filteredSends,this.searchText))}}TA.ɵfac=function(e){return new(e||TA)(o["ɵɵdirectiveInject"](AA),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](o.NgZone),o["ɵɵdirectiveInject"](za),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](L.$))},TA.ɵdir=o["ɵɵdefineDirective"]({type:TA});class BA{constructor(e){this.id=null,this.accessId=null,this.name=null,this.notes=null,this.type=null,this.text=new iA,this.file=new nA,this.maxAccessCount=null,this.accessCount=0,this.revisionDate=null,this.deletionDate=null,this.expirationDate=null,this.password=null,this.disabled=!1,this.hideEmail=!1,e&&(this.id=e.id,this.accessId=e.accessId,this.type=e.type,this.maxAccessCount=e.maxAccessCount,this.accessCount=e.accessCount,this.revisionDate=e.revisionDate,this.deletionDate=e.deletionDate,this.expirationDate=e.expirationDate,this.disabled=e.disabled,this.password=e.password,this.hideEmail=e.hideEmail)}get urlB64Key(){return N.c.fromBufferToUrlB64(this.key)}get maxAccessCountReached(){return null!=this.maxAccessCount&&this.accessCount>=this.maxAccessCount}get expired(){return null!=this.expirationDate&&this.expirationDate<=new Date}get pendingDelete(){return this.deletionDate<=new Date}}var MA,DA,FA,RA=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class UA{constructor(e,t,n,i,r,a,s,l,d){this.i18nService=e,this.platformUtilsService=t,this.environmentService=n,this.datePipe=i,this.sendService=r,this.messagingService=a,this.policyService=s,this.logService=l,this.stateService=d,this.onSavedSend=new o.EventEmitter,this.onDeletedSend=new o.EventEmitter,this.onCancelled=new o.EventEmitter,this.copyLink=!1,this.disableSend=!1,this.disableHideEmail=!1,this.showPassword=!1,this.sendType=tA,this.canAccessPremium=!0,this.emailVerified=!0,this.alertShown=!1,this.showOptions=!1,this.typeOptions=[{name:e.t("sendTypeFile"),value:tA.File},{name:e.t("sendTypeText"),value:tA.Text}],this.sendLinkBaseUrl=this.environmentService.getSendUrl()}get link(){return null!=this.send.id&&null!=this.send.accessId?this.sendLinkBaseUrl+this.send.accessId+"/"+this.send.urlB64Key:null}get isSafari(){return this.platformUtilsService.isSafari()}get isDateTimeLocalSupported(){return!(this.platformUtilsService.isFirefox()||this.platformUtilsService.isSafari())}ngOnInit(){return RA(this,void 0,void 0,(function*(){yield this.load()}))}get editMode(){return null!=this.sendId}get title(){return this.i18nService.t(this.editMode?"editSend":"createSend")}setDates(e){this.deletionDate=e.deletionDate,this.expirationDate=e.expirationDate}load(){return RA(this,void 0,void 0,(function*(){if(this.disableSend=yield this.policyService.policyAppliesToUser(Kr.M.DisableSend),this.disableHideEmail=yield this.policyService.policyAppliesToUser(Kr.M.SendOptions,(e=>e.data.disableHideEmail)),this.canAccessPremium=yield this.stateService.getCanAccessPremium(),this.emailVerified=yield this.stateService.getEmailVerified(),this.canAccessPremium&&this.emailVerified||(this.type=tA.Text),null==this.send)if(this.editMode){const e=yield this.loadSend();this.send=yield e.decrypt()}else this.send=new BA,this.send.type=null==this.type?tA.File:this.type,this.send.file=new nA,this.send.text=new iA,this.send.deletionDate=new Date,this.send.deletionDate.setDate(this.send.deletionDate.getDate()+7);this.hasPassword=null!=this.send.password&&""!==this.send.password.trim()}))}submit(){return RA(this,void 0,void 0,(function*(){if(this.disableSend)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("sendDisabledWarning")),!1;if(null==this.send.name||""===this.send.name)return this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("nameRequired")),!1;let e=null;if(this.send.type===tA.File&&!this.editMode){const t=document.getElementById("file").files;if(null==t||0===t.length)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("selectFile"));if(e=t[0],t[0].size>524288e3)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("maxFileSize"))}null!=this.password&&""===this.password.trim()&&(this.password=null),this.formPromise=this.encryptSend(e).then((e=>RA(this,void 0,void 0,(function*(){const t=this.sendService.saveWithServer(e);if(yield t,null==this.send.id&&(this.send.id=e[0].id),null==this.send.accessId&&(this.send.accessId=e[0].accessId),this.onSavedSend.emit(this.send),this.copyLink&&null!=this.link){const e=yield this.copyLinkToClipboard(this.link);null==e||e?this.platformUtilsService.showToast("success",null,this.i18nService.t(this.editMode?"editedSend":"createdSend")):(yield this.platformUtilsService.showDialog(this.i18nService.t(this.editMode?"editedSend":"createdSend"),null,this.i18nService.t("ok"),null,"success",null),yield this.copyLinkToClipboard(this.link))}}))));try{return yield this.formPromise,!0}catch(t){this.logService.error(t)}return!1}))}copyLinkToClipboard(e){return RA(this,void 0,void 0,(function*(){return Promise.resolve(this.platformUtilsService.copyToClipboard(e))}))}delete(){return RA(this,void 0,void 0,(function*(){if(null!=this.deletePromise)return!1;if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("deleteSendConfirmation"),this.i18nService.t("deleteSend"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{return this.deletePromise=this.sendService.deleteWithServer(this.send.id),yield this.deletePromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("deletedSend")),yield this.load(),this.onDeletedSend.emit(this.send),!0}catch(e){this.logService.error(e)}return!1}))}typeChanged(){this.send.type!==tA.File||this.alertShown||(this.canAccessPremium?this.emailVerified||(this.alertShown=!0,this.messagingService.send("emailVerificationRequired")):(this.alertShown=!0,this.messagingService.send("premiumRequired")))}toggleOptions(){this.showOptions=!this.showOptions}loadSend(){return RA(this,void 0,void 0,(function*(){return this.sendService.get(this.sendId)}))}encryptSend(e){return RA(this,void 0,void 0,(function*(){const t=yield this.sendService.encrypt(this.send,e,this.password,null);try{t[0].deletionDate=null==this.deletionDate?null:new Date(this.deletionDate)}catch(n){t[0].deletionDate=null}try{t[0].expirationDate=null==this.expirationDate?null:new Date(this.expirationDate)}catch(i){t[0].expirationDate=null}return t}))}togglePasswordVisible(){this.showPassword=!this.showPassword,document.getElementById("password").focus()}}UA.ɵfac=function(e){return new(e||UA)(o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](B.DatePipe),o["ɵɵdirectiveInject"](AA),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](P.b))},UA.ɵdir=o["ɵɵdefineDirective"]({type:UA,inputs:{sendId:"sendId",type:"type"},outputs:{onSavedSend:"onSavedSend",onDeletedSend:"onDeletedSend",onCancelled:"onCancelled"}}),function(e){e.Default="default",e.Firefox="firefox",e.Safari="safari"}(MA||(MA={})),function(e){e.DeletionDate="deletion",e.ExpriationDate="expiration"}(DA||(DA={})),function(e){e[e.OneHour=1]="OneHour",e[e.OneDay=24]="OneDay",e[e.TwoDays=48]="TwoDays",e[e.ThreeDays=72]="ThreeDays",e[e.SevenDays=168]="SevenDays",e[e.ThirtyDays=720]="ThirtyDays",e[e.Custom=0]="Custom",e[e.Never=null]="Never"}(FA||(FA={}));class zA{constructor(e,t,n){this.i18nService=e,this.platformUtilsService=t,this.datePipe=n,this.datesChanged=new o.EventEmitter,this.datesForm=new d.FormGroup({selectedDeletionDatePreset:new d.FormControl,selectedExpirationDatePreset:new d.FormControl,defaultDeletionDateTime:new d.FormControl,defaultExpirationDateTime:new d.FormControl,fallbackDeletionDate:new d.FormControl,fallbackDeletionTime:new d.FormControl,fallbackExpirationDate:new d.FormControl,fallbackExpirationTime:new d.FormControl}),this.deletionDatePresets=[{name:this.i18nService.t("oneHour"),value:FA.OneHour},{name:this.i18nService.t("oneDay"),value:FA.OneDay},{name:this.i18nService.t("days","2"),value:FA.TwoDays},{name:this.i18nService.t("days","3"),value:FA.ThreeDays},{name:this.i18nService.t("days","7"),value:FA.SevenDays},{name:this.i18nService.t("days","30"),value:FA.ThirtyDays},{name:this.i18nService.t("custom"),value:FA.Custom}],this.expirationDatePresets=[{name:this.i18nService.t("never"),value:FA.Never}].concat([...this.deletionDatePresets])}get browserPath(){return this.platformUtilsService.isFirefox()?MA.Firefox:this.platformUtilsService.isSafari()?MA.Safari:MA.Default}get selectedDeletionDatePreset(){return this.datesForm.get("selectedDeletionDatePreset")}get selectedExpirationDatePreset(){return this.datesForm.get("selectedExpirationDatePreset")}get defaultDeletionDateTime(){return this.datesForm.get("defaultDeletionDateTime")}get defaultExpirationDateTime(){return this.datesForm.get("defaultExpirationDateTime")}get fallbackDeletionDate(){return this.datesForm.get("fallbackDeletionDate")}get fallbackDeletionTime(){return this.datesForm.get("fallbackDeletionTime")}get fallbackExpirationDate(){return this.datesForm.get("fallbackExpirationDate")}get fallbackExpirationTime(){return this.datesForm.get("fallbackExpirationTime")}get formattedDeletionDate(){switch(this.selectedDeletionDatePreset.value){case FA.Never:return this.selectedDeletionDatePreset.setValue(FA.SevenDays),this.formattedDeletionDate;case FA.Custom:switch(this.browserPath){case MA.Safari:case MA.Firefox:return this.fallbackDeletionDate.value+"T"+this.fallbackDeletionTime.value;default:return this.defaultDeletionDateTime.value}default:{const e=new Date,t=e.setTime(e.getTime()+60*this.selectedDeletionDatePreset.value*60*1e3);return new Date(t).toString()}}}get formattedExpirationDate(){switch(this.selectedExpirationDatePreset.value){case FA.Never:return null;case FA.Custom:switch(this.browserPath){case MA.Safari:case MA.Firefox:return this.fallbackExpirationDate.value&&this.fallbackExpirationTime.value||!this.editMode?this.fallbackExpirationDate.value+"T"+this.fallbackExpirationTime.value:null;default:return this.defaultExpirationDateTime.value?this.defaultExpirationDateTime.value:null}default:{const e=new Date,t=e.setTime(e.getTime()+60*this.selectedExpirationDatePreset.value*60*1e3);return new Date(t).toString()}}}get safariDeletionTimePresetOptions(){return this.safariTimePresetOptions(DA.DeletionDate)}get safariExpirationTimePresetOptions(){return this.safariTimePresetOptions(DA.ExpriationDate)}get nextWeek(){const e=new Date;return e.setDate(e.getDate()+7),e}ngOnInit(){this.setInitialFormValues(),this.emitDates(),this.datesForm.valueChanges.subscribe((()=>{this.emitDates()}))}onDeletionDatePresetSelect(e){this.selectedDeletionDatePreset.setValue(e)}clearExpiration(){switch(this.browserPath){case MA.Safari:case MA.Firefox:this.fallbackExpirationDate.setValue(null),this.fallbackExpirationTime.setValue(null);break;case MA.Default:this.defaultExpirationDateTime.setValue(null)}}emitDates(){this.datesChanged.emit({deletionDate:this.formattedDeletionDate,expirationDate:this.formattedExpirationDate})}setInitialFormValues(){if(this.editMode)switch(this.selectedDeletionDatePreset.setValue(FA.Custom),this.selectedExpirationDatePreset.setValue(FA.Custom),this.browserPath){case MA.Safari:case MA.Firefox:this.fallbackDeletionDate.setValue(this.initialDeletionDate.toISOString().slice(0,10)),this.fallbackDeletionTime.setValue(this.initialDeletionDate.toTimeString().slice(0,5)),null!=this.initialExpirationDate&&(this.fallbackExpirationDate.setValue(this.initialExpirationDate.toISOString().slice(0,10)),this.fallbackExpirationTime.setValue(this.initialExpirationDate.toTimeString().slice(0,5)));break;case MA.Default:this.initialExpirationDate&&this.defaultExpirationDateTime.setValue(this.datePipe.transform(new Date(this.initialExpirationDate),"yyyy-MM-ddTHH:mm")),this.defaultDeletionDateTime.setValue(this.datePipe.transform(new Date(this.initialDeletionDate),"yyyy-MM-ddTHH:mm"))}else switch(this.selectedDeletionDatePreset.setValue(FA.SevenDays),this.selectedExpirationDatePreset.setValue(FA.Never),this.browserPath){case MA.Safari:this.fallbackDeletionDate.setValue(this.nextWeek.toISOString().slice(0,10)),this.fallbackDeletionTime.setValue(this.safariTimePresetOptions(DA.DeletionDate)[1].twentyFourHour)}}safariTimePresetOptions(e){const t=[],n=[],i=[],r=[];for(let a=1;a<=12;a++)for(let e=0;e<60;e+=15){let o=a.toString(),s=e.toString();if(a<10&&(o="0"+o),e<10&&(s="0"+s),12===a){const e={twelveHour:`${o}:${s} AM`,twentyFourHour:`00:${s}`};n.push(e);const i={twelveHour:`${o}:${s} PM`,twentyFourHour:`${o}:${s}`};t.push(i)}else{const e={twelveHour:`${o}:${s} AM`,twentyFourHour:`${o}:${s}`};i.push(e);const t={twelveHour:`${o}:${s} PM`,twentyFourHour:`${a+12}:${s}`};r.push(t)}}const o=[...n,...i,...t,...r];if(e===DA.ExpriationDate&&null!=this.initialExpirationDate&&this.editMode){return[{twelveHour:this.datePipe.transform(this.initialExpirationDate,"hh:mm a"),twentyFourHour:this.datePipe.transform(this.initialExpirationDate,"HH:mm")},{twelveHour:null,twentyFourHour:null},...o]}if(e===DA.DeletionDate&&null!=this.initialDeletionDate&&this.editMode){return[{twelveHour:this.datePipe.transform(this.initialDeletionDate,"hh:mm a"),twentyFourHour:this.datePipe.transform(this.initialDeletionDate,"HH:mm")},...o]}return[{twelveHour:null,twentyFourHour:null},...o]}}function NA(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",13),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"input",14),o["ɵɵtext"](5,"\n            "),o["ɵɵelement"](6,"input",15),o["ɵɵtext"](7,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("readOnly",e.disableSend),o["ɵɵadvance"](2),o["ɵɵproperty"]("readOnly",e.disableSend)}}function VA(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",18),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.twentyFourHour),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",e.twelveHour,"\n              ")}}function HA(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",13),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"input",14),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"select",16),o["ɵɵtext"](7,"\n              "),o["ɵɵtemplate"](8,VA,2,2,"option",17),o["ɵɵtext"](9,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("readOnly",e.disableSend),o["ɵɵadvance"](2),o["ɵɵproperty"]("required",!e.editMode),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.safariDeletionTimePresetOptions)}}function jA(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"input",19),o["ɵɵtext"](3,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("readOnly",e.disabled)}}function LA(e,t){if(1&e&&(o["ɵɵtext"](0,"\n      "),o["ɵɵelementContainerStart"](1,10),o["ɵɵtext"](2,"\n        "),o["ɵɵtemplate"](3,NA,9,2,"ng-container",11),o["ɵɵtext"](4,"\n        "),o["ɵɵtemplate"](5,HA,12,3,"ng-container",11),o["ɵɵtext"](6,"\n        "),o["ɵɵtemplate"](7,jA,4,1,"ng-container",12),o["ɵɵtext"](8,"\n      "),o["ɵɵelementContainerEnd"](),o["ɵɵtext"](9,"\n    ")),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵproperty"]("ngSwitch",e.browserPath),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngSwitchCase","firefox"),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngSwitchCase","safari")}}function KA(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",18),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function GA(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1," "),o["ɵɵelementContainerEnd"]())}function qA(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n        "),o["ɵɵtemplate"](2,GA,2,0,"ng-container",21),o["ɵɵtext"](3,"\n      "),o["ɵɵelementContainerEnd"]()),2&e){o["ɵɵnextContext"](2);const e=o["ɵɵreference"](9);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngTemplateOutlet",e)}}function _A(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"select",20),o["ɵɵtext"](3,"\n        "),o["ɵɵtemplate"](4,KA,2,2,"option",17),o["ɵɵtext"](5,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n      "),o["ɵɵtemplate"](7,qA,4,1,"ng-container",4),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.deletionDatePresets),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",0===e.selectedDeletionDatePreset.value)}}function $A(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1," "),o["ɵɵelementContainerEnd"]())}function WA(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n      "),o["ɵɵtemplate"](2,$A,2,0,"ng-container",21),o["ɵɵtext"](3,"\n    "),o["ɵɵelementEnd"]()),2&e){o["ɵɵnextContext"]();const e=o["ɵɵreference"](9);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngTemplateOutlet",e)}}function QA(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",22),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().clearExpiration()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](2,1,"clear"),"\n      "))}function YA(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",13),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"input",24),o["ɵɵtext"](3,"\n          "),o["ɵɵelement"](4,"input",25),o["ɵɵtext"](5,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("required",!e.editMode)("readOnly",e.disabled),o["ɵɵadvance"](2),o["ɵɵproperty"]("required",!e.editMode)("readOnly",e.disabled)}}function ZA(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",18),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.twentyFourHour),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",e.twelveHour,"\n            ")}}function JA(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",13),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"input",24),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"select",26),o["ɵɵtext"](5,"\n            "),o["ɵɵtemplate"](6,ZA,2,2,"option",17),o["ɵɵtext"](7,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("required",!e.editMode)("readOnly",e.disabled),o["ɵɵadvance"](2),o["ɵɵproperty"]("required",!e.editMode),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.safariExpirationTimePresetOptions)}}function XA(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"input",27),o["ɵɵtext"](3,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("readOnly",e.disabled)}}function eO(e,t){if(1&e&&(o["ɵɵtext"](0,"\n      "),o["ɵɵelementContainerStart"](1,10),o["ɵɵtext"](2,"\n        "),o["ɵɵtemplate"](3,YA,6,4,"div",23),o["ɵɵtext"](4,"\n        "),o["ɵɵtext"](5,"\n        "),o["ɵɵtemplate"](6,JA,9,4,"div",23),o["ɵɵtext"](7,"\n        "),o["ɵɵtemplate"](8,XA,4,1,"ng-container",12),o["ɵɵtext"](9,"\n      "),o["ɵɵelementContainerEnd"](),o["ɵɵtext"](10,"\n    ")),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵproperty"]("ngSwitch",e.browserPath),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngSwitchCase","firefox"),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngSwitchCase","safari")}}function tO(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",18),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function nO(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1," "),o["ɵɵelementContainerEnd"]())}function iO(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n        "),o["ɵɵtemplate"](2,nO,2,0,"ng-container",21),o["ɵɵtext"](3,"\n      "),o["ɵɵelementContainerEnd"]()),2&e){o["ɵɵnextContext"](2);const e=o["ɵɵreference"](32);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngTemplateOutlet",e)}}function rO(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"select",28),o["ɵɵtext"](3,"\n        "),o["ɵɵtemplate"](4,tO,2,2,"option",17),o["ɵɵtext"](5,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n      "),o["ɵɵtemplate"](7,iO,4,1,"ng-container",4),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.expirationDatePresets),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",0===e.selectedExpirationDatePreset.value)}}function oO(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1," "),o["ɵɵelementContainerEnd"]())}function aO(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n      "),o["ɵɵtemplate"](2,oO,2,0,"ng-container",21),o["ɵɵtext"](3,"\n    "),o["ɵɵelementEnd"]()),2&e){o["ɵɵnextContext"]();const e=o["ɵɵreference"](32);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngTemplateOutlet",e)}}zA.ɵfac=function(e){return new(e||zA)(o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](B.DatePipe))},zA.ɵdir=o["ɵɵdefineDirective"]({type:zA,inputs:{initialDeletionDate:"initialDeletionDate",initialExpirationDate:"initialExpirationDate",editMode:"editMode",disabled:"disabled"},outputs:{datesChanged:"datesChanged"}});class sO extends zA{constructor(e,t,n){super(e,t,n),this.i18nService=e,this.platformUtilsService=t,this.datePipe=n}}sO.ɵfac=function(e){return new(e||sO)(o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](B.DatePipe))},sO.ɵcmp=o["ɵɵdefineComponent"]({type:sO,selectors:[["app-send-efflux-dates"]],features:[o["ɵɵProvidersFeature"]([],[{provide:d.ControlContainer,useExisting:d.NgForm}]),o["ɵɵInheritDefinitionFeature"]],decls:44,vars:18,consts:[[1,"row",3,"formGroup"],[1,"col-6","form-group"],["for","deletionDate"],["deletionDateCustom",""],[4,"ngIf"],[1,"form-text","text-muted","small"],[1,"d-flex"],["for","expirationDate"],["href","#","appStopClick","","class","ml-auto",3,"click",4,"ngIf"],["expirationDateCustom",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"d-flex","justify-content-around"],["id","deletionDateCustomFallback","type","date","name","DeletionDateFallback","formControlName","fallbackDeletionDate","required","","placeholder","MM/DD/YYYY","data-date-format","mm/dd/yyyy",1,"form-control","mt-1",3,"readOnly"],["id","deletionTimeCustomFallback","type","time","name","DeletionTimeDate","formControlName","fallbackDeletionTime","required","","placeholder","HH:MM AM/PM",1,"form-control","mt-1","ml-1",3,"readOnly"],["id","deletionTimeCustomFallback","formControlName","fallbackDeletionTime","name","SafariDeletionTime",1,"form-control","mt-1","ml-1",3,"required"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["id","deletionDateCustom","type","datetime-local","name","DeletionDate","formControlName","defaultDeletionDateTime","required","","placeholder","MM/DD/YYYY HH:MM AM/PM",1,"form-control","mt-1",3,"readOnly"],["id","deletionDate","name","SelectedDeletionDatePreset","formControlName","selectedDeletionDatePreset","required","",1,"form-control"],[4,"ngTemplateOutlet"],["href","#","appStopClick","",1,"ml-auto",3,"click"],["class","d-flex justify-content-around",4,"ngSwitchCase"],["id","expirationDateCustomFallback","type","date","name","ExpirationDateFallback","formControlName","fallbackExpirationDate","placeholder","MM/DD/YYYY","data-date-format","mm/dd/yyyy",1,"form-control","mt-1",3,"required","readOnly"],["id","expirationTimeCustomFallback","type","time","name","ExpirationTimeFallback","formControlName","fallbackExpirationTime","placeholder","HH:MM AM/PM",1,"form-control","mt-1","ml-1",3,"required","readOnly"],["id","expirationTimeCustomFallback","formControlName","fallbackExpirationTime","name","SafariExpirationTime",1,"form-control","mt-1","ml-1",3,"required"],["id","expirationDateCustom","type","datetime-local","name","ExpirationDate","formControlName","defaultExpirationDateTime","placeholder","MM/DD/YYYY HH:MM AM/PM",1,"form-control","mt-1",3,"readOnly"],["id","expirationDate","name","SelectedExpirationDatePreset","formControlName","selectedExpirationDatePreset","required","",1,"form-control"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"label",2),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵtemplate"](8,LA,10,3,"ng-template",null,3,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](10,"\n    "),o["ɵɵtemplate"](11,_A,9,2,"div",4),o["ɵɵtext"](12,"\n    "),o["ɵɵtemplate"](13,WA,4,1,"div",4),o["ɵɵtext"](14,"\n    "),o["ɵɵelementStart"](15,"div",5),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n  "),o["ɵɵelementStart"](20,"div",1),o["ɵɵtext"](21,"\n    "),o["ɵɵelementStart"](22,"div",6),o["ɵɵtext"](23,"\n      "),o["ɵɵelementStart"](24,"label",7),o["ɵɵtext"](25),o["ɵɵpipe"](26,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n      "),o["ɵɵtemplate"](28,QA,3,3,"a",8),o["ɵɵtext"](29,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n    "),o["ɵɵtemplate"](31,eO,11,3,"ng-template",null,9,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](33,"\n    "),o["ɵɵtemplate"](34,rO,9,2,"div",4),o["ɵɵtext"](35,"\n    "),o["ɵɵtemplate"](36,aO,4,1,"div",4),o["ɵɵtext"](37,"\n    "),o["ɵɵelementStart"](38,"div",5),o["ɵɵtext"](39),o["ɵɵpipe"](40,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n")),2&e&&(o["ɵɵproperty"]("formGroup",t.datesForm),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,10,"deletionDate")),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",!t.editMode),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.editMode),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,12,"deletionDateDesc")),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](26,14,"expirationDate")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.editMode&&!t.disabled),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",!t.editMode),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.editMode),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](40,16,"expirationDateDesc")))},directives:[d.NgControlStatusGroup,d.FormGroupDirective,B.NgIf,B.NgSwitch,B.NgSwitchCase,B.NgSwitchDefault,d.DefaultValueAccessor,d.NgControlStatus,d.FormControlName,d.RequiredValidator,d.SelectControlValueAccessor,B.NgForOf,d.NgSelectOption,d["ɵNgSelectMultipleOption"],B.NgTemplateOutlet,Tn],pipes:[M.C],encapsulation:2});var lO=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function dO(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"span"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,1,"sendDisabledWarning")))}function cO(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"span"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"ul",50),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"li"),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,2,"sendOptionsPolicyInEffect")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,4,"sendDisableHideEmailInEffect")))}function pO(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",25),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"input",52),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).send.type=t}))("change",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).typeChanged(t)})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n              "),o["ɵɵelementStart"](4,"label",53),o["ɵɵtext"](5),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("name","Type_",e.value,""),o["ɵɵpropertyInterpolate1"]("id","type_",e.value,""),o["ɵɵproperty"]("ngModel",n.send.type)("value",e.value)("checked",n.send.type===e.value),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("for","type_",e.value,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",e.name,"\n              ")}}function uO(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",16),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",17),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"label"),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n            "),o["ɵɵtemplate"](8,pO,7,7,"div",51),o["ɵɵtext"](9,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,2,"whatTypeOfSend")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngForOf",e.typeOptions)}}function mO(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",24),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"label",54),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"textarea",55),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).send.text.text=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n            "),o["ɵɵelementStart"](10,"small",20),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"div",24),o["ɵɵtext"](16,"\n            "),o["ɵɵelementStart"](17,"div",25),o["ɵɵtext"](18,"\n              "),o["ɵɵelementStart"](19,"input",56),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).send.text.hidden=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n              "),o["ɵɵelementStart"](21,"label",57),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,7,"sendTypeText")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.send.text.text)("readOnly",e.disableSend),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,9,"sendTextDesc")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngModel",e.send.text.hidden)("disabled",e.disableSend),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,11,"textHiddenByDefault"))}}function hO(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"strong",58),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"file")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate2"]("\n              ",e.send.file.fileName," (",e.send.file.sizeName,")\n            ")}}function vO(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"label",59),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵelement"](6,"input",60),o["ɵɵtext"](7,"\n              "),o["ɵɵelementStart"](8,"small",20),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,4,"file")),o["ɵɵadvance"](3),o["ɵɵproperty"]("disabled",e.disableSend),o["ɵɵadvance"](3),o["ɵɵtextInterpolate2"]("",o["ɵɵpipeBind1"](10,6,"sendFileDesc")," ",o["ɵɵpipeBind1"](11,8,"maxFileSize"),"")}}function gO(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",24),o["ɵɵtext"](3,"\n            "),o["ɵɵtemplate"](4,hO,6,5,"div",15),o["ɵɵtext"](5,"\n            "),o["ɵɵtemplate"](6,vO,13,10,"div",15),o["ɵɵtext"](7,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.editMode),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.editMode)}}function fO(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",24),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"label",61),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"input",62),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).link=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,2,"sendLinkLabel")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.link)}}function xO(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",17),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"label",63),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"input",64),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).send.accessCount=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,2,"currentAccessCount")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.send.accessCount)}}function yO(e,t){1&e&&(o["ɵɵelementStart"](0,"label",65),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"password")))}function SO(e,t){1&e&&(o["ɵɵelementStart"](0,"label",65),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"newPassword")))}const bO=function(e,t){return{"bwi-angle-down":e,"bwi-chevron-up":t}},wO=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}};function IO(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",14),o["ɵɵtext"](1,"\n        "),o["ɵɵtemplate"](2,dO,6,3,"app-callout",15),o["ɵɵtext"](3,"\n        "),o["ɵɵtemplate"](4,cO,13,6,"app-callout",15),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"div",16),o["ɵɵtext"](7,"\n          "),o["ɵɵelementStart"](8,"div",17),o["ɵɵtext"](9,"\n            "),o["ɵɵelementStart"](10,"label",18),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementStart"](14,"input",19),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().send.name=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n            "),o["ɵɵelementStart"](16,"small",20),o["ɵɵtext"](17),o["ɵɵpipe"](18,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n        "),o["ɵɵtemplate"](22,uO,11,4,"div",21),o["ɵɵtext"](23,"\n        "),o["ɵɵtext"](24,"\n        "),o["ɵɵtemplate"](25,mO,27,13,"ng-container",15),o["ɵɵtext"](26,"\n        "),o["ɵɵtext"](27,"\n        "),o["ɵɵtemplate"](28,gO,9,2,"ng-container",15),o["ɵɵtext"](29,"\n        "),o["ɵɵelementStart"](30,"h3",22),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n        "),o["ɵɵtemplate"](34,fO,8,4,"div",23),o["ɵɵtext"](35,"\n        "),o["ɵɵelementStart"](36,"div",24),o["ɵɵtext"](37,"\n          "),o["ɵɵelementStart"](38,"div",25),o["ɵɵtext"](39,"\n            "),o["ɵɵelementStart"](40,"input",26),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().copyLink=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n            "),o["ɵɵelementStart"](42,"label",27),o["ɵɵtext"](43),o["ɵɵpipe"](44,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n        "),o["ɵɵelementStart"](48,"div",28),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().toggleOptions()})),o["ɵɵtext"](49,"\n          "),o["ɵɵelementStart"](50,"h3",29),o["ɵɵtext"](51),o["ɵɵpipe"](52,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n          "),o["ɵɵelementStart"](54,"a",30),o["ɵɵtext"](55,"\n            "),o["ɵɵelement"](56,"i",31),o["ɵɵtext"](57,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n        "),o["ɵɵelementStart"](60,"div",32),o["ɵɵtext"](61,"\n          "),o["ɵɵelementStart"](62,"app-send-efflux-dates",33),o["ɵɵlistener"]("datesChanged",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().setDates(t)})),o["ɵɵtext"](63,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n          "),o["ɵɵelementStart"](65,"div",16),o["ɵɵtext"](66,"\n            "),o["ɵɵelementStart"](67,"div",17),o["ɵɵtext"](68,"\n              "),o["ɵɵelementStart"](69,"label",34),o["ɵɵtext"](70),o["ɵɵpipe"](71,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n              "),o["ɵɵelementStart"](73,"input",35),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().send.maxAccessCount=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](74,"\n              "),o["ɵɵelementStart"](75,"div",36),o["ɵɵtext"](76),o["ɵɵpipe"](77,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](78,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](79,"\n            "),o["ɵɵtemplate"](80,xO,8,4,"div",37),o["ɵɵtext"](81,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](82,"\n          "),o["ɵɵelementStart"](83,"div",16),o["ɵɵtext"](84,"\n            "),o["ɵɵelementStart"](85,"div",17),o["ɵɵtext"](86,"\n              "),o["ɵɵtemplate"](87,yO,3,3,"label",38),o["ɵɵtext"](88,"\n              "),o["ɵɵtemplate"](89,SO,3,3,"label",38),o["ɵɵtext"](90,"\n              "),o["ɵɵelementStart"](91,"div",39),o["ɵɵtext"](92,"\n                "),o["ɵɵelementStart"](93,"input",40),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().password=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](94,"\n                "),o["ɵɵelementStart"](95,"div",41),o["ɵɵtext"](96,"\n                  "),o["ɵɵelementStart"](97,"button",42),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().togglePasswordVisible()})),o["ɵɵpipe"](98,"i18n"),o["ɵɵtext"](99,"\n                    "),o["ɵɵelement"](100,"i",43),o["ɵɵtext"](101,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](102,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](103,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](104,"\n              "),o["ɵɵelementStart"](105,"div",36),o["ɵɵtext"](106),o["ɵɵpipe"](107,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](108,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](109,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](110,"\n          "),o["ɵɵelementStart"](111,"div",24),o["ɵɵtext"](112,"\n            "),o["ɵɵelementStart"](113,"label",44),o["ɵɵtext"](114),o["ɵɵpipe"](115,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](116,"\n            "),o["ɵɵelementStart"](117,"textarea",45),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().send.notes=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](118,"\n            "),o["ɵɵelementStart"](119,"div",36),o["ɵɵtext"](120),o["ɵɵpipe"](121,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](122,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](123,"\n          "),o["ɵɵelementStart"](124,"div",24),o["ɵɵtext"](125,"\n            "),o["ɵɵelementStart"](126,"div",25),o["ɵɵtext"](127,"\n              "),o["ɵɵelementStart"](128,"input",46),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().send.hideEmail=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](129,"\n              "),o["ɵɵelementStart"](130,"label",47),o["ɵɵtext"](131),o["ɵɵpipe"](132,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](133,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](134,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](135,"\n          "),o["ɵɵelementStart"](136,"div",24),o["ɵɵtext"](137,"\n            "),o["ɵɵelementStart"](138,"div",25),o["ɵɵtext"](139,"\n              "),o["ɵɵelementStart"](140,"input",48),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().send.disabled=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](141,"\n              "),o["ɵɵelementStart"](142,"label",49),o["ɵɵtext"](143),o["ɵɵpipe"](144,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](145,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](146,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](147,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](148,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.disableSend),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.disableSend&&e.disableHideEmail),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,43,"name")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.send.name)("readOnly",e.disableSend),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](18,45,"sendNameDesc")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!e.editMode),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.send.type===e.sendType.Text),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.send.type===e.sendType.File),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](32,47,"share")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.link),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngModel",e.copyLink),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](44,49,"copySendLinkOnSave")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](52,51,"options")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](69,bO,!e.showOptions,e.showOptions)),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",!e.showOptions),o["ɵɵadvance"](2),o["ɵɵproperty"]("initialDeletionDate",e.send.deletionDate)("initialExpirationDate",e.send.expirationDate)("editMode",e.editMode)("disabled",e.disableSend),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](71,53,"maxAccessCount")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.send.maxAccessCount)("readOnly",e.disableSend),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](77,55,"maxAccessCountDesc")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.editMode),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngIf",!e.hasPassword),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasPassword),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("type",e.showPassword?"text":"password"),o["ɵɵproperty"]("ngModel",e.password)("readOnly",e.disableSend),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](98,57,"toggleVisibility")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](72,wO,!e.showPassword,e.showPassword)),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](107,59,"sendPasswordDesc")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](115,61,"notes")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.send.notes)("readOnly",e.disableSend),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](121,63,"sendNotesDesc")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngModel",e.send.hideEmail)("disabled",e.disableHideEmail&&!e.send.hideEmail||e.disableSend),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](132,65,"hideEmail"),"\n              "),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngModel",e.send.disabled)("disabled",e.disableSend),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](144,67,"disableThisSend"))}}function CO(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",68,69),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).delete()})),o["ɵɵpipe"](2,"i18n"),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"i",70),o["ɵɵtext"](5,"\n            "),o["ɵɵelement"](6,"i",71),o["ɵɵpipe"](7,"i18n"),o["ɵɵtext"](8,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"](2);o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](2,6,"delete")),o["ɵɵproperty"]("disabled",e.loading)("appApiAction",t.deletePromise),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](7,8,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}function EO(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",66),o["ɵɵtext"](1,"\n          "),o["ɵɵtemplate"](2,CO,9,10,"button",67),o["ɵɵtext"](3,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.editMode)}}const kO=function(e){return{loading:e}};class PO extends UA{constructor(e,t,n,i,r,o,a,s,l){super(e,t,n,i,r,a,s,l,o)}copyLinkToClipboard(e){const t=Object.create(null,{copyLinkToClipboard:{get:()=>super.copyLinkToClipboard}});return lO(this,void 0,void 0,(function*(){return new Promise((n=>{window.setTimeout((()=>n(t.copyLinkToClipboard.call(this,e))),500)}))}))}}PO.ɵfac=function(e){return new(e||PO)(o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](B.DatePipe),o["ɵɵdirectiveInject"](AA),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](L.$))},PO.ɵcmp=o["ɵɵdefineComponent"]({type:PO,selectors:[["app-send-add-edit"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:44,vars:20,consts:[["role","dialog","aria-modal","true","aria-labelledby","sendAddEditTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],["ngNativeValidate","","autocomplete","off",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","sendAddEditTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit","manual",3,"ngClass","disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["class","ml-auto",4,"ngIf"],[1,"modal-body"],[4,"ngIf"],[1,"row"],[1,"col-6","form-group"],["for","name"],["id","name","type","text","name","Name","required","",1,"form-control",3,"ngModel","readOnly","ngModelChange"],[1,"form-text","text-muted"],["class","row",4,"ngIf"],[1,"mt-5"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"form-check"],["type","checkbox","id","copy-link","name","CopyLink",1,"form-check-input",3,"ngModel","ngModelChange"],["for","copy-link",1,"form-check-label"],["id","options-header",1,"section-header","d-flex","flex-row","align-items-center","mt-5",3,"click"],[1,"mb-0","mr-2"],["href","#","appStopClick","","role","button",1,"mb-1"],["aria-hidden","true",1,"bwi",3,"ngClass"],["id","options",3,"hidden"],[3,"initialDeletionDate","initialExpirationDate","editMode","disabled","datesChanged"],["for","maxAccessCount"],["id","maxAccessCount","type","number","name","MaxAccessCount","min","1",1,"form-control",3,"ngModel","readOnly","ngModelChange"],[1,"form-text","text-muted","small"],["class","col-6 form-group",4,"ngIf"],["for","password",4,"ngIf"],[1,"input-group"],["id","password","name","Password",1,"form-control","text-monospace",3,"type","ngModel","readOnly","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],["for","notes"],["id","notes","name","Notes","rows","6",1,"form-control",3,"ngModel","readOnly","ngModelChange"],["type","checkbox","id","hideEmail","name","HideEmail",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","hideEmail",1,"form-check-label"],["type","checkbox","id","disabled","name","Disabled",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","disabled",1,"form-check-label"],[1,"mb-0"],["class","form-check",4,"ngFor","ngForOf"],["type","radio",1,"form-check-input",3,"ngModel","name","id","value","checked","ngModelChange","change"],[1,"form-check-label",3,"for"],["for","text"],["id","text","name","Text.Text","rows","6",1,"form-control",3,"ngModel","readOnly","ngModelChange"],["type","checkbox","id","text-hidden","name","Text.Hidden",1,"form-check-input",3,"ngModel","disabled","ngModelChange"],["for","text-hidden",1,"form-check-label"],[1,"d-block"],["for","file"],["type","file","id","file","name","file","required","",1,"form-control-file",3,"disabled"],["for","link"],["type","text","readonly","","id","link","name","Link",1,"form-control",3,"ngModel","ngModelChange"],["for","accessCount"],["id","accessCount","type","text","name","AccessCount","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["for","password"],[1,"ml-auto"],["type","button","class","btn btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click"],["deleteBtn",""],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-lg","bwi-fw",3,"hidden","title"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"button",6),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"span",7),o["ɵɵtext"](16,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵtemplate"](20,IO,149,75,"div",8),o["ɵɵtext"](21,"\n      "),o["ɵɵelementStart"](22,"div",9),o["ɵɵtext"](23,"\n        "),o["ɵɵelementStart"](24,"button",10),o["ɵɵtext"](25,"\n          "),o["ɵɵelement"](26,"i",11),o["ɵɵpipe"](27,"i18n"),o["ɵɵtext"](28,"\n          "),o["ɵɵelementStart"](29,"span"),o["ɵɵtext"](30),o["ɵɵpipe"](31,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n        "),o["ɵɵelementStart"](34,"button",12),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n        "),o["ɵɵtemplate"](38,EO,4,1,"div",13),o["ɵɵtext"](39,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](t.title),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,10,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",t.send),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](18,kO,e.loading))("disabled",e.loading||t.disableSend),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](27,12,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](31,14,"save")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](36,16,"cancel"),"\n        "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.send)}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,B.NgIf,B.NgClass,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,d.CheckboxControlValueAccessor,Tn,sO,d.MinValidator,d.NumberValueAccessor,Pe.O,B.NgForOf,d.RadioControlValueAccessor],pipes:[M.C],encapsulation:2});var AO=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const OO=["sendAddEdit"];function TO(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",28),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n    "),o["ɵɵelementStart"](3,"span"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"sendDisabled")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](5,4,"sendDisabledWarning")))}function BO(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",29),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",30),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function MO(e,t){1&e&&o["ɵɵelement"](0,"i",49)}function DO(e,t){1&e&&o["ɵɵelement"](0,"i",50)}function FO(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"i",51),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n                "),o["ɵɵelementStart"](5,"span",30),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"disabled")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"disabled")))}function RO(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"i",52),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n                "),o["ɵɵelementStart"](5,"span",30),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"password")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"password")))}function UO(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"i",53),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n                "),o["ɵɵelementStart"](5,"span",30),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"maxAccessCountReached")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"maxAccessCountReached")))}function zO(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"i",54),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n                "),o["ɵɵelementStart"](5,"span",30),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"expired")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"expired")))}function NO(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"i",55),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n                "),o["ɵɵelementStart"](5,"span",30),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"pendingDeletion")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"pendingDeletion")))}function VO(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",44),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).removePassword(t)})),o["ɵɵtext"](1,"\n                  "),o["ɵɵelement"](2,"i",56),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](4,1,"removePassword"),"\n                "))}function HO(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"td",33),o["ɵɵtext"](3,"\n              "),o["ɵɵelementStart"](4,"div",34),o["ɵɵtext"](5,"\n                "),o["ɵɵtemplate"](6,MO,1,0,"i",35),o["ɵɵtext"](7,"\n                "),o["ɵɵtemplate"](8,DO,1,0,"i",36),o["ɵɵtext"](9,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵelementStart"](12,"td",37),o["ɵɵtext"](13,"\n              "),o["ɵɵelementStart"](14,"a",38),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).editSend(t)})),o["ɵɵtext"](15),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n              "),o["ɵɵtemplate"](17,FO,9,6,"ng-container",21),o["ɵɵtext"](18,"\n              "),o["ɵɵtemplate"](19,RO,9,6,"ng-container",21),o["ɵɵtext"](20,"\n              "),o["ɵɵtemplate"](21,UO,9,6,"ng-container",21),o["ɵɵtext"](22,"\n              "),o["ɵɵtemplate"](23,zO,9,6,"ng-container",21),o["ɵɵtext"](24,"\n              "),o["ɵɵtemplate"](25,NO,9,6,"ng-container",21),o["ɵɵtext"](26,"\n              "),o["ɵɵelement"](27,"br"),o["ɵɵtext"](28,"\n              "),o["ɵɵelementStart"](29,"small",39),o["ɵɵtext"](30),o["ɵɵpipe"](31,"date"),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n            "),o["ɵɵelementStart"](34,"td",40),o["ɵɵtext"](35,"\n              "),o["ɵɵelementStart"](36,"button",41),o["ɵɵpipe"](37,"i18n"),o["ɵɵtext"](38,"\n                "),o["ɵɵelement"](39,"i",42),o["ɵɵtext"](40,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n              "),o["ɵɵelementStart"](42,"bit-menu",null,43),o["ɵɵtext"](44,"\n                "),o["ɵɵelementStart"](45,"button",44),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).copy(t)})),o["ɵɵtext"](46,"\n                  "),o["ɵɵelement"](47,"i",45),o["ɵɵtext"](48),o["ɵɵpipe"](49,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n                "),o["ɵɵtemplate"](51,VO,5,3,"button",46),o["ɵɵtext"](52,"\n                "),o["ɵɵelementStart"](53,"button",44),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).delete(t)})),o["ɵɵtext"](54,"\n                  "),o["ɵɵelementStart"](55,"span",47),o["ɵɵtext"](56,"\n                    "),o["ɵɵelement"](57,"i",48),o["ɵɵtext"](58),o["ɵɵpipe"](59,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](62,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](63,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵreference"](43),i=o["ɵɵnextContext"](2);o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",e.type==i.sendType.File),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type==i.sendType.Text),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](e.name),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.disabled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.password),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.maxAccessCountReached),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.expired),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.pendingDelete),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](31,14,e.deletionDate,"medium")),o["ɵɵadvance"](6),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](37,17,"options")),o["ɵɵproperty"]("bitMenuTriggerFor",n),o["ɵɵadvance"](12),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](49,19,"copySendLink"),"\n                "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.password&&!i.disableSend),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n                    ",o["ɵɵpipeBind1"](59,21,"delete"),"\n                  ")}}function jO(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",31),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n          "),o["ɵɵtemplate"](4,HO,64,23,"tr",32),o["ɵɵtext"](5,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.filteredSends)}}function LO(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",29),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span",30),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function KO(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"button",58),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).addSend()})),o["ɵɵtext"](7,"\n            "),o["ɵɵelement"](8,"i",59),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"noSendsInList")),o["ɵɵadvance"](3),o["ɵɵproperty"]("disabled",e.disableSend),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](10,5,"createSend"),"\n          ")}}function GO(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",57),o["ɵɵtext"](1,"\n        "),o["ɵɵtemplate"](2,LO,9,6,"ng-container",21),o["ɵɵtext"](3,"\n        "),o["ɵɵtemplate"](4,KO,12,7,"ng-container",21),o["ɵɵtext"](5,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.loaded),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.loaded)}}function qO(e,t){}const _O=function(e){return{active:e}},$O="SendComponent";class WO extends TA{constructor(e,t,n,i,r,o,a,s,l,d){super(e,t,n,i,r,o,a,d),this.modalService=s,this.broadcasterService=l}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return AO(this,void 0,void 0,(function*(){yield e.ngOnInit.call(this),yield this.load(),this.broadcasterService.subscribe($O,(e=>{this.ngZone.run((()=>AO(this,void 0,void 0,(function*(){switch(e.command){case"syncCompleted":e.successfully&&(yield this.load())}}))))}))}))}ngOnDestroy(){this.broadcasterService.unsubscribe($O)}addSend(){return AO(this,void 0,void 0,(function*(){if(this.disableSend)return;(yield this.editSend(null)).type=this.type}))}editSend(e){return AO(this,void 0,void 0,(function*(){const[t,n]=yield this.modalService.openViewRef(PO,this.sendAddEditModalRef,(n=>{n.sendId=null==e?null:e.id,n.onSavedSend.subscribe((()=>AO(this,void 0,void 0,(function*(){t.close(),yield this.load()})))),n.onDeletedSend.subscribe((()=>AO(this,void 0,void 0,(function*(){t.close(),yield this.load()}))))}));return n}))}}WO.ɵfac=function(e){return new(e||WO)(o["ɵɵdirectiveInject"](AA),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](ae),o["ɵɵdirectiveInject"](o.NgZone),o["ɵɵdirectiveInject"](za),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](Ci),o["ɵɵdirectiveInject"](L.$))},WO.ɵcmp=o["ɵɵdefineComponent"]({type:WO,selectors:[["app-send"]],viewQuery:function(e,t){if(1&e&&o["ɵɵviewQuery"](OO,7,o.ViewContainerRef),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.sendAddEditModalRef=e.first)}},features:[o["ɵɵInheritDefinitionFeature"]],decls:112,vars:40,consts:[[1,"container","page-content"],["type","warning",3,"title",4,"ngIf"],[1,"row"],[1,"col-3","groupings"],[1,"card","vault-filters"],[1,"card-header","d-flex"],[1,"card-body"],["type","search","id","search","autocomplete","off","appAutofocus","",1,"form-control",3,"placeholder","ngModel","ngModelChange","input"],[1,"filter"],[1,"filter-options"],[1,"filter-option",3,"ngClass"],[1,"filter-buttons"],["bitButton","","appStopClick","",1,"filter-button",3,"click"],[1,"bwi","bwi-fw","bwi-filter"],[1,"filter-heading"],[1,"bwi","bwi-fw","bwi-file-text"],[1,"bwi","bwi-fw","bwi-file"],[1,"col-9"],[1,"page-header","d-flex"],[3,"appApiAction"],["actionSpinner",""],[4,"ngIf"],[1,"ml-auto","d-flex"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],["class","table table-hover table-list",4,"ngIf"],["class","no-items",4,"ngIf"],["sendAddEdit",""],["type","warning",3,"title"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"table","table-hover","table-list"],[4,"ngFor","ngForOf"],[1,"table-list-icon"],["aria-hidden","true",1,"icon"],["class","bwi bwi-fw bwi-lg bwi-file",4,"ngIf"],["class","bwi bwi-fw bwi-lg bwi-file-text",4,"ngIf"],[1,"reduced-lh","wrap"],["href","#","appStopClick","","appStopProp","",3,"click"],["appStopProp",""],[1,"table-list-options"],["type","button",1,"tw-border-none","tw-bg-transparent","tw-text-main",3,"bitMenuTriggerFor","appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-ellipsis-v","bwi-lg"],["sendOptions",""],["bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-clone"],["bitMenuItem","",3,"click",4,"ngIf"],[1,"tw-text-danger"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-trash"],[1,"bwi","bwi-fw","bwi-lg","bwi-file"],[1,"bwi","bwi-fw","bwi-lg","bwi-file-text"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-exclamation-triangle",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-key",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-ban",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-clock",3,"title"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-trash",3,"title"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-close"],[1,"no-items"],[1,"btn","btn-outline-primary",3,"disabled","click"],[1,"bwi","bwi-plus","bwi-fw"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,TO,7,6,"app-callout",1),o["ɵɵtext"](3,"\n  "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n      "),o["ɵɵelementStart"](8,"div",4),o["ɵɵtext"](9,"\n        "),o["ɵɵelementStart"](10,"div",5),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵelementStart"](14,"div",6),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"input",7),o["ɵɵlistener"]("ngModelChange",(function(e){return t.searchText=e}))("input",(function(){return t.searchTextChanged()})),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n          "),o["ɵɵelementStart"](19,"div",8),o["ɵɵtext"](20,"\n            "),o["ɵɵelementStart"](21,"ul",9),o["ɵɵtext"](22,"\n              "),o["ɵɵelementStart"](23,"li",10),o["ɵɵtext"](24,"\n                "),o["ɵɵelementStart"](25,"span",11),o["ɵɵtext"](26,"\n                  "),o["ɵɵelementStart"](27,"button",12),o["ɵɵlistener"]("click",(function(){return t.selectAll()})),o["ɵɵtext"](28,"\n                    "),o["ɵɵelement"](29,"i",13),o["ɵɵtext"](30),o["ɵɵpipe"](31,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n          "),o["ɵɵelementStart"](37,"div",8),o["ɵɵtext"](38,"\n            "),o["ɵɵelementStart"](39,"div",14),o["ɵɵtext"](40,"\n              "),o["ɵɵelementStart"](41,"h3"),o["ɵɵtext"](42),o["ɵɵpipe"](43,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n            "),o["ɵɵelementStart"](46,"ul",9),o["ɵɵtext"](47,"\n              "),o["ɵɵelementStart"](48,"li",10),o["ɵɵtext"](49,"\n                "),o["ɵɵelementStart"](50,"span",11),o["ɵɵtext"](51,"\n                  "),o["ɵɵelementStart"](52,"button",12),o["ɵɵlistener"]("click",(function(){return t.selectType(t.sendType.Text)})),o["ɵɵtext"](53,"\n                    "),o["ɵɵelement"](54,"i",15),o["ɵɵtext"](55),o["ɵɵpipe"](56,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](57,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n              "),o["ɵɵelementStart"](60,"li",10),o["ɵɵtext"](61,"\n                "),o["ɵɵelementStart"](62,"span",11),o["ɵɵtext"](63,"\n                  "),o["ɵɵelementStart"](64,"button",12),o["ɵɵlistener"]("click",(function(){return t.selectType(t.sendType.File)})),o["ɵɵtext"](65,"\n                    "),o["ɵɵelement"](66,"i",16),o["ɵɵtext"](67),o["ɵɵpipe"](68,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](69,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](70,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](71,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](73,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](74,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](75,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n    "),o["ɵɵelementStart"](77,"div",17),o["ɵɵtext"](78,"\n      "),o["ɵɵelementStart"](79,"div",18),o["ɵɵtext"](80,"\n        "),o["ɵɵelementStart"](81,"h1"),o["ɵɵtext"](82),o["ɵɵpipe"](83,"i18n"),o["ɵɵelementStart"](84,"small",19,20),o["ɵɵtext"](86,"\n            "),o["ɵɵtemplate"](87,BO,9,6,"ng-container",21),o["ɵɵtext"](88,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](89,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](90,"\n        "),o["ɵɵelementStart"](91,"div",22),o["ɵɵtext"](92,"\n          "),o["ɵɵelementStart"](93,"button",23),o["ɵɵlistener"]("click",(function(){return t.addSend()})),o["ɵɵtext"](94,"\n            "),o["ɵɵelement"](95,"i",24),o["ɵɵtext"](96),o["ɵɵpipe"](97,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](98,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](99,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](100,"\n      "),o["ɵɵtext"](101,"\n      "),o["ɵɵtemplate"](102,jO,7,1,"table",25),o["ɵɵtext"](103,"\n      "),o["ɵɵtemplate"](104,GO,6,2,"div",26),o["ɵɵtext"](105,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](106,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](107,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](108,"\n"),o["ɵɵtemplate"](109,qO,0,0,"ng-template",null,27,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](111,"\n")),2&e){const e=o["ɵɵreference"](85);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.disableSend),o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](12,18,"filters"),"\n        "),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("placeholder",t.searchPlaceholder||o["ɵɵpipeBind1"](17,20,"searchSends")),o["ɵɵproperty"]("ngModel",t.searchText),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](34,_O,t.selectedAll)),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](31,22,"allSends"),"\n                  "),o["ɵɵadvance"](12),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](43,24,"types")),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](36,_O,t.selectedType===t.sendType.Text)),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](56,26,"sendTypeText"),"\n                  "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](38,_O,t.selectedType===t.sendType.File)),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](68,28,"sendTypeFile"),"\n                  "),o["ɵɵadvance"](15),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](83,30,"send"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("appApiAction",t.actionPromise),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.loading),o["ɵɵadvance"](6),o["ɵɵproperty"]("disabled",t.disableSend),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](97,32,"createSend"),"\n          "),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",t.filteredSends&&t.filteredSends.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.filteredSends&&!t.filteredSends.length)}},directives:[B.NgIf,d.DefaultValueAccessor,Z.U,d.NgControlStatus,d.NgModel,B.NgClass,et.H,Tn,Y.b,Pe.O,B.NgForOf,Oi,Ei.t,pe,ki.M,Ai.e],pipes:[M.C,B.DatePipe],encapsulation:2});var QO=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class YO{constructor(e,t,n,i,r,o){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.userVerificationService=i,this.messagingService=r,this.logService=o}submit(){return QO(this,void 0,void 0,(function*(){try{this.formPromise=this.userVerificationService.buildRequest(this.masterPassword).then((e=>this.apiService.postSecurityStamp(e))),yield this.formPromise,this.platformUtilsService.showToast("success",this.i18nService.t("sessionsDeauthorized"),this.i18nService.t("logBackIn")),this.messagingService.send("logout")}catch(e){this.logService.error(e)}}))}}YO.ɵfac=function(e){return new(e||YO)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Yn.i),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](L.$))},YO.ɵcmp=o["ɵɵdefineComponent"]({type:YO,selectors:[["app-deauthorize-sessions"]],decls:55,vars:24,consts:[["role","dialog","aria-modal","true","aria-labelledby","deAuthTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","deAuthTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","warning"],["ngDefaultControl","","name","secret",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-danger","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"button",6),o["ɵɵpipe"](14,"i18n"),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"span",7),o["ɵɵtext"](17,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementStart"](21,"div",8),o["ɵɵtext"](22,"\n        "),o["ɵɵelementStart"](23,"p"),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵelementStart"](27,"app-callout",9),o["ɵɵtext"](28),o["ɵɵpipe"](29,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n        "),o["ɵɵelementStart"](31,"app-user-verification",10),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPassword=e})),o["ɵɵtext"](32,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n      "),o["ɵɵelementStart"](35,"div",11),o["ɵɵtext"](36,"\n        "),o["ɵɵelementStart"](37,"button",12),o["ɵɵtext"](38,"\n          "),o["ɵɵelement"](39,"i",13),o["ɵɵpipe"](40,"i18n"),o["ɵɵtext"](41,"\n          "),o["ɵɵelementStart"](42,"span"),o["ɵɵtext"](43),o["ɵɵpipe"](44,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n        "),o["ɵɵelementStart"](47,"button",14),o["ɵɵtext"](48),o["ɵɵpipe"](49,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,10,"deauthorizeSessions")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](14,12,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](25,14,"deauthorizeSessionsDesc")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](29,16,"deauthorizeSessionsWarning")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.masterPassword),o["ɵɵadvance"](6),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](40,18,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](44,20,"deauthorizeSessions")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](49,22,"close"),"\n        ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,Pe.O,el.W,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel],pipes:[M.C],encapsulation:2});var ZO=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class JO{constructor(e,t,n,i,r,o){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.userVerificationService=i,this.messagingService=r,this.logService=o}submit(){return ZO(this,void 0,void 0,(function*(){try{this.formPromise=this.userVerificationService.buildRequest(this.masterPassword).then((e=>this.apiService.deleteAccount(e))),yield this.formPromise,this.platformUtilsService.showToast("success",this.i18nService.t("accountDeleted"),this.i18nService.t("accountDeletedDesc")),this.messagingService.send("logout")}catch(e){this.logService.error(e)}}))}}JO.ɵfac=function(e){return new(e||JO)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Yn.i),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](L.$))},JO.ɵcmp=o["ɵɵdefineComponent"]({type:JO,selectors:[["app-delete-account"]],decls:55,vars:24,consts:[["role","dialog","aria-modal","true","aria-labelledby","deleteAccountTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","deleteAccountTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","warning"],["ngDefaultControl","","name","secret",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-danger","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"button",6),o["ɵɵpipe"](14,"i18n"),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"span",7),o["ɵɵtext"](17,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementStart"](21,"div",8),o["ɵɵtext"](22,"\n        "),o["ɵɵelementStart"](23,"p"),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵelementStart"](27,"app-callout",9),o["ɵɵtext"](28),o["ɵɵpipe"](29,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n        "),o["ɵɵelementStart"](31,"app-user-verification",10),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPassword=e})),o["ɵɵtext"](32,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n      "),o["ɵɵelementStart"](35,"div",11),o["ɵɵtext"](36,"\n        "),o["ɵɵelementStart"](37,"button",12),o["ɵɵtext"](38,"\n          "),o["ɵɵelement"](39,"i",13),o["ɵɵpipe"](40,"i18n"),o["ɵɵtext"](41,"\n          "),o["ɵɵelementStart"](42,"span"),o["ɵɵtext"](43),o["ɵɵpipe"](44,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n        "),o["ɵɵelementStart"](47,"button",14),o["ɵɵtext"](48),o["ɵɵpipe"](49,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,10,"deleteAccount")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](14,12,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](25,14,"deleteAccountDesc")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](29,16,"deleteAccountWarning")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.masterPassword),o["ɵɵadvance"](6),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](40,18,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](44,20,"deleteAccount")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](49,22,"close"),"\n        ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,Pe.O,el.W,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel],pipes:[M.C],encapsulation:2});class XO{constructor(e,t){this.culture="en-US",this.name=e,this.masterPasswordHint=t||null}}var eT=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function tT(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",2),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",3),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function nT(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",8),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"label",18),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"input",19),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).profile.masterPasswordHint=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,2,"masterPassHintLabel")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.profile.masterPasswordHint)}}function iT(e,t){if(1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementStart"](3,"a",20),o["ɵɵpipe"](4,"i18n"),o["ɵɵtext"](5,"\n          "),o["ɵɵelement"](6,"i",21),o["ɵɵelementEnd"](),o["ɵɵelement"](7,"br"),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"code"),o["ɵɵtext"](10),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](2,3,"yourAccountsFingerprint"),":\n        "),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](4,5,"learnMore")),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](e.fingerprint)}}function rT(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",4,5),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",6),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",7),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",8),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"label",9),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"input",10),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().profile.name=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n      "),o["ɵɵelementStart"](16,"div",8),o["ɵɵtext"](17,"\n        "),o["ɵɵelementStart"](18,"label",11),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n        "),o["ɵɵelementStart"](22,"input",12),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().profile.email=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n      "),o["ɵɵtemplate"](25,nT,8,4,"div",13),o["ɵɵtext"](26,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n    "),o["ɵɵelementStart"](28,"div",7),o["ɵɵtext"](29,"\n      "),o["ɵɵelementStart"](30,"div",14),o["ɵɵtext"](31,"\n        "),o["ɵɵelementStart"](32,"app-avatar",15),o["ɵɵpipe"](33,"userName"),o["ɵɵtext"](34,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n      "),o["ɵɵelement"](37,"hr"),o["ɵɵtext"](38,"\n      "),o["ɵɵtemplate"](39,iT,12,7,"p",0),o["ɵɵtext"](40,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n  "),o["ɵɵelementStart"](43,"button",16),o["ɵɵtext"](44,"\n    "),o["ɵɵelement"](45,"i",17),o["ɵɵpipe"](46,"i18n"),o["ɵɵtext"](47,"\n    "),o["ɵɵelementStart"](48,"span"),o["ɵɵtext"](49),o["ɵɵpipe"](50,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,12,"name")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.profile.name),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](20,14,"email")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.profile.email),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.hidePasswordHint),o["ɵɵadvance"](7),o["ɵɵpropertyInterpolate"]("data",o["ɵɵpipeBind1"](33,16,t.profile)),o["ɵɵproperty"]("email",t.profile.email),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngIf",t.fingerprint),o["ɵɵadvance"](4),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](46,18,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](50,20,"save"))}}class oT{constructor(e,t,n,i,r,o,a){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.cryptoService=i,this.logService=r,this.keyConnectorService=o,this.stateService=a,this.loading=!0,this.hidePasswordHint=!1}ngOnInit(){return eT(this,void 0,void 0,(function*(){this.profile=yield this.apiService.getProfile(),this.loading=!1;const e=yield this.cryptoService.getFingerprint(yield this.stateService.getUserId());null!=e&&(this.fingerprint=e.join("-")),this.hidePasswordHint=yield this.keyConnectorService.getUsesKeyConnector()}))}submit(){return eT(this,void 0,void 0,(function*(){try{const e=new XO(this.profile.name,this.profile.masterPasswordHint);this.formPromise=this.apiService.putProfile(e),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("accountUpdated"))}catch(e){this.logService.error(e)}}))}}oT.ɵfac=function(e){return new(e||oT)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](g.J),o["ɵɵdirectiveInject"](P.b))},oT.ɵcmp=o["ɵɵdefineComponent"]({type:oT,selectors:[["app-profile"]],decls:4,vars:2,consts:[[4,"ngIf"],["ngNativeValidate","",3,"appApiAction","ngSubmit",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"row"],[1,"col-6"],[1,"form-group"],["for","name"],["id","name","type","text","name","Name",1,"form-control",3,"ngModel","ngModelChange"],["for","email"],["id","email","type","text","name","Email","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],[1,"mb-3"],["dynamic","true","size","75","fontSize","35",3,"data","email"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["for","masterPasswordHint"],["id","masterPasswordHint","type","text","name","MasterPasswordHint",1,"form-control",3,"ngModel","ngModelChange"],["href","https://bitwarden.com/help/fingerprint-phrase/","target","_blank","rel","noopener",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,tT,9,6,"div",0),o["ɵɵtext"](1,"\n"),o["ɵɵtemplate"](2,rT,53,22,"form",1),o["ɵɵtext"](3,"\n")),2&e&&(o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.profile&&!t.loading))},directives:[B.NgIf,d.NgControlStatusGroup,d.NgForm,Y.b,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,Di,pe],pipes:[M.C,Pc.z],encapsulation:2});class aT extends re{}class sT extends aT{}var lT=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function dT(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",14),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](2,1,"changeEmailTwoFactorWarning"),"\n  "))}function cT(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"hr"),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"p"),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"app-callout",14),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n    "),o["ɵɵelementStart"](12,"div",3),o["ɵɵtext"](13,"\n      "),o["ɵɵelementStart"](14,"div",4),o["ɵɵtext"](15,"\n        "),o["ɵɵelementStart"](16,"div",5),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"label",15),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n          "),o["ɵɵelementStart"](22,"input",16),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().token=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n  "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](6,4,"changeEmailDesc",e.newEmail)),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,7,"loggedOutWarning")),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](20,9,"code")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.token)}}function pT(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"continue")))}function uT(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"changeEmail")))}function mT(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",17),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().reset()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](2,1,"cancel"),"\n  "))}class hT{constructor(e,t,n,i,r,o,a){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.cryptoService=i,this.messagingService=r,this.logService=o,this.stateService=a,this.tokenSent=!1,this.showTwoFactorEmailWarning=!1}ngOnInit(){return lT(this,void 0,void 0,(function*(){const e=yield this.apiService.getTwoFactorProviders();this.showTwoFactorEmailWarning=e.data.some((e=>e.type===sn.Email&&e.enabled))}))}submit(){return lT(this,void 0,void 0,(function*(){if(yield this.cryptoService.hasEncKey())if(this.newEmail=this.newEmail.trim().toLowerCase(),this.tokenSent){const t=new sT;t.token=this.token,t.newEmail=this.newEmail,t.masterPasswordHash=yield this.cryptoService.hashPassword(this.masterPassword,null);const n=yield this.stateService.getKdfType(),i=yield this.stateService.getKdfIterations(),r=yield this.cryptoService.makeKey(this.masterPassword,this.newEmail,n,i);t.newMasterPasswordHash=yield this.cryptoService.hashPassword(this.masterPassword,r);const o=yield this.cryptoService.remakeEncKey(r);t.key=o[1].encryptedString;try{this.formPromise=this.apiService.postEmail(t),yield this.formPromise,this.reset(),this.platformUtilsService.showToast("success",this.i18nService.t("emailChanged"),this.i18nService.t("logBackIn")),this.messagingService.send("logout")}catch(e){this.logService.error(e)}}else{const t=new aT;t.newEmail=this.newEmail,t.masterPasswordHash=yield this.cryptoService.hashPassword(this.masterPassword,null);try{this.formPromise=this.apiService.postEmailToken(t),yield this.formPromise,this.tokenSent=!0}catch(e){this.logService.error(e)}}else this.platformUtilsService.showToast("error",null,this.i18nService.t("updateKey"))}))}reset(){this.token=this.newEmail=this.masterPassword=null,this.tokenSent=!1}}hT.ɵfac=function(e){return new(e||hT)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](P.b))},hT.ɵcmp=o["ɵɵdefineComponent"]({type:hT,selectors:[["app-change-email"]],decls:44,vars:20,consts:[["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],["type","warning",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"form-group"],["for","masterPassword"],["id","masterPassword","type","password","name","MasterPasswordHash","required","","appInputVerbatim","",1,"form-control",3,"ngModel","readonly","ngModelChange"],["for","newEmail"],["id","newEmail","type","text","name","NewEmail","required","","inputmode","email","appInputVerbatim","false",1,"form-control",3,"ngModel","readonly","ngModelChange"],[4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","warning"],["for","token"],["id","token","type","text","name","Token","required","","appInputVerbatim","",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"form",0,1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵtemplate"](3,dT,3,3,"app-callout",2),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"div",3),o["ɵɵtext"](6,"\n    "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n      "),o["ɵɵelementStart"](9,"div",5),o["ɵɵtext"](10,"\n        "),o["ɵɵelementStart"](11,"label",6),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"input",7),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPassword=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n      "),o["ɵɵelementStart"](18,"div",5),o["ɵɵtext"](19,"\n        "),o["ɵɵelementStart"](20,"label",8),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n        "),o["ɵɵelementStart"](24,"input",9),o["ɵɵlistener"]("ngModelChange",(function(e){return t.newEmail=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n  "),o["ɵɵtemplate"](29,cT,27,11,"ng-container",10),o["ɵɵtext"](30,"\n  "),o["ɵɵelementStart"](31,"button",11),o["ɵɵtext"](32,"\n    "),o["ɵɵelement"](33,"i",12),o["ɵɵpipe"](34,"i18n"),o["ɵɵtext"](35,"\n    "),o["ɵɵtemplate"](36,pT,3,3,"span",10),o["ɵɵtext"](37,"\n    "),o["ɵɵtemplate"](38,uT,3,3,"span",10),o["ɵɵtext"](39,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n  "),o["ɵɵtemplate"](41,mT,3,3,"button",13),o["ɵɵtext"](42,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n")),2&e){const e=o["ɵɵreference"](1);o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.showTwoFactorEmailWarning),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,14,"masterPass")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.masterPassword)("readonly",t.tokenSent),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](22,16,"newEmail")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.newEmail)("readonly",t.tokenSent),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",t.tokenSent),o["ɵɵadvance"](2),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](34,18,"loading")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.tokenSent),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.tokenSent),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.tokenSent)}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,d.DefaultValueAccessor,d.RequiredValidator,J.b,d.NgControlStatus,d.NgModel,Pe.O],pipes:[M.C],encapsulation:2});var vT=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const gT=["deauthorizeSessionsTemplate"],fT=["purgeVaultTemplate"],xT=["deleteAccountTemplate"];function yT(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",11),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"h1"),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵelement"](9,"app-change-email"),o["ɵɵtext"](10,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,1,"changeEmail")))}function ST(e,t){}function bT(e,t){}function wT(e,t){}function IT(e,t){}function CT(e,t){}class ET{constructor(e,t,n,i){this.modalService=e,this.apiService=t,this.keyConnectorService=n,this.stateService=i,this.showChangeEmail=!0}ngOnInit(){return vT(this,void 0,void 0,(function*(){this.showChangeEmail=!(yield this.keyConnectorService.getUsesKeyConnector())}))}deauthorizeSessions(){return vT(this,void 0,void 0,(function*(){yield this.modalService.openViewRef(YO,this.deauthModalRef)}))}purgeVault(){return vT(this,void 0,void 0,(function*(){yield this.modalService.openViewRef(Sx,this.purgeModalRef)}))}deleteAccount(){return vT(this,void 0,void 0,(function*(){yield this.modalService.openViewRef(JO,this.deleteModalRef)}))}}ET.ɵfac=function(e){return new(e||ET)(o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](g.J),o["ɵɵdirectiveInject"](P.b))},ET.ɵcmp=o["ɵɵdefineComponent"]({type:ET,selectors:[["app-account"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](gT,7,o.ViewContainerRef),o["ɵɵviewQuery"](fT,7,o.ViewContainerRef),o["ɵɵviewQuery"](xT,7,o.ViewContainerRef)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.deauthModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.purgeModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.deleteModalRef=e.first)}},decls:55,vars:19,consts:[[1,"page-header"],[4,"ngIf"],[1,"secondary-header","text-danger","border-0","mb-0"],[1,"card","border-danger"],[1,"card-body"],["bitButton","","buttonType","danger",3,"click"],["deauthorizeSessionsTemplate",""],["purgeVaultTemplate",""],["deleteAccountTemplate",""],["viewUserApiKeyTemplate",""],["rotateUserApiKeyTemplate",""],[1,"secondary-header"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelement"](7,"app-profile"),o["ɵɵtext"](8,"\n"),o["ɵɵtemplate"](9,yT,11,3,"ng-container",1),o["ɵɵtext"](10,"\n"),o["ɵɵelementStart"](11,"div",2),o["ɵɵtext"](12,"\n  "),o["ɵɵelementStart"](13,"h1"),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n"),o["ɵɵelementStart"](18,"div",3),o["ɵɵtext"](19,"\n  "),o["ɵɵelementStart"](20,"div",4),o["ɵɵtext"](21,"\n    "),o["ɵɵelementStart"](22,"p"),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n    "),o["ɵɵelementStart"](26,"button",5),o["ɵɵlistener"]("click",(function(){return t.deauthorizeSessions()})),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n    "),o["ɵɵelementStart"](30,"button",5),o["ɵɵlistener"]("click",(function(){return t.purgeVault()})),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n    "),o["ɵɵelementStart"](34,"button",5),o["ɵɵlistener"]("click",(function(){return t.deleteAccount()})),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n"),o["ɵɵtemplate"](40,ST,0,0,"ng-template",null,6,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](42,"\n"),o["ɵɵtemplate"](43,bT,0,0,"ng-template",null,7,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](45,"\n"),o["ɵɵtemplate"](46,wT,0,0,"ng-template",null,8,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](48,"\n"),o["ɵɵtemplate"](49,IT,0,0,"ng-template",null,9,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](51,"\n"),o["ɵɵtemplate"](52,CT,0,0,"ng-template",null,10,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](54,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,7,"myAccount")),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",t.showChangeEmail),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](15,9,"dangerZone")),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](24,11,"dangerZoneDesc")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](28,13,"deauthorizeSessions"),"\n    "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](32,15,"purgeVault"),"\n    "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](36,17,"deleteAccount"),"\n    "))},directives:[oT,B.NgIf,et.H,hT],pipes:[M.C],encapsulation:2});var kT=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class PT{constructor(e){this.route=e}ngOnInit(){this.route.queryParams.pipe((0,C.P)()).subscribe((e=>kT(this,void 0,void 0,(function*(){"families"===e.plan?(this.orgPlansComponent.plan=sS.FamiliesAnnually,this.orgPlansComponent.product=hS.Families):"teams"===e.plan?(this.orgPlansComponent.plan=sS.TeamsAnnually,this.orgPlansComponent.product=hS.Teams):"enterprise"===e.plan&&(this.orgPlansComponent.plan=sS.EnterpriseAnnually,this.orgPlansComponent.product=hS.Enterprise)}))))}}PT.ɵfac=function(e){return new(e||PT)(o["ɵɵdirectiveInject"](p.ActivatedRoute))},PT.ɵcmp=o["ɵɵdefineComponent"]({type:PT,selectors:[["app-create-organization"]],viewQuery:function(e,t){if(1&e&&o["ɵɵviewQuery"](Mb,7),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.orgPlansComponent=e.first)}},decls:22,vars:6,consts:[[1,"container","page-content"],[1,"row"],[1,"col-12"],[1,"page-header"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h1"),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n      "),o["ɵɵelementStart"](13,"p"),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n      "),o["ɵɵelement"](17,"app-organization-plans"),o["ɵɵtext"](18,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,2,"newOrganization")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](15,4,"newOrganizationDesc")))},directives:[Mb],pipes:[M.C],encapsulation:2});class AT{}var OT=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function TT(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",8),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"span",9),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function BT(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",14),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",15),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"label",16),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"textarea",17),o["ɵɵlistener"]("ngModelChange",(function(t){const n=o["ɵɵrestoreView"](e).index;return o["ɵɵnextContext"](2).custom[n]=t})),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n      "),o["ɵɵelementStart"](12,"button",18),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).index;return o["ɵɵnextContext"](2).remove(t)})),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n        "),o["ɵɵelement"](15,"i",19),o["ɵɵtext"](16,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=t.index,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate1"]("for","customDomain_",e,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](6,7,"customDomainX",e+1)),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate1"]("name","CustomDomain[",e,"]"),o["ɵɵpropertyInterpolate1"]("id","customDomain_",e,""),o["ɵɵpropertyInterpolate1"]("placeholder","",o["ɵɵpipeBind1"](9,10,"ex")," google.com, gmail.com"),o["ɵɵproperty"]("ngModel",n.custom[e]),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,12,"remove"))}}function MT(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵtemplate"](2,BT,18,14,"div",10),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"button",11),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().add()})),o["ɵɵtext"](5,"\n      "),o["ɵɵelement"](6,"i",12),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n    "),o["ɵɵelementStart"](10,"small",13),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.custom)("ngForTrackBy",e.indexTrackBy),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](8,4,"newCustomDomain"),"\n    "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,6,"newCustomDomainDesc"))}}function DT(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",8),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"span",9),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function FT(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",29),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).toggleExcluded(t)})),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"i",31),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](4,1,"exclude"),"\n              "))}function RT(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",29),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).toggleExcluded(t)})),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"i",32),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](4,1,"include"),"\n              "))}const UT=function(e){return{"table-list-strike":e}};function zT(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"td",22),o["ɵɵtext"](3),o["ɵɵelementEnd"](),o["ɵɵtext"](4,"\n        "),o["ɵɵelementStart"](5,"td",23),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"div",24),o["ɵɵtext"](8,"\n            "),o["ɵɵelementStart"](9,"button",25),o["ɵɵpipe"](10,"i18n"),o["ɵɵtext"](11,"\n              "),o["ɵɵelement"](12,"i",26),o["ɵɵtext"](13,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n            "),o["ɵɵelementStart"](15,"div",27),o["ɵɵtext"](16,"\n              "),o["ɵɵtemplate"](17,FT,5,3,"a",28),o["ɵɵtext"](18,"\n              "),o["ɵɵtemplate"](19,RT,5,3,"a",28),o["ɵɵtext"](20,"\n              "),o["ɵɵelementStart"](21,"a",29),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).customize(t)})),o["ɵɵtext"](22,"\n                "),o["ɵɵelement"](23,"i",30),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit;o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](10,UT,e.excluded)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.domains),o["ɵɵadvance"](6),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](10,6,"options")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",!e.excluded),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.excluded),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](25,8,"customize"),"\n              ")}}function NT(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",20),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n      "),o["ɵɵtemplate"](4,zT,30,12,"tr",21),o["ɵɵtext"](5,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.global)}}class VT{constructor(e,t,n,i){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.logService=i,this.loading=!0,this.custom=[],this.global=[]}ngOnInit(){return OT(this,void 0,void 0,(function*(){const e=yield this.apiService.getSettingsDomains();this.loading=!1,null!=e.equivalentDomains&&(this.custom=e.equivalentDomains.map((e=>e.join(", ")))),null!=e.globalEquivalentDomains&&(this.global=e.globalEquivalentDomains.map((e=>({domains:e.domains.join(", "),excluded:e.excluded,key:e.type}))))}))}toggleExcluded(e){e.excluded=!e.excluded}customize(e){e.excluded=!0,this.custom.push(e.domains)}remove(e){this.custom.splice(e,1)}add(){this.custom.push("")}submit(){return OT(this,void 0,void 0,(function*(){const e=new AT;e.excludedGlobalEquivalentDomains=this.global.filter((e=>e.excluded)).map((e=>e.key)),0===e.excludedGlobalEquivalentDomains.length&&(e.excludedGlobalEquivalentDomains=null),e.equivalentDomains=this.custom.filter((e=>null!=e&&""!==e.trim())).map((e=>e.split(",").map((e=>e.trim())))),0===e.equivalentDomains.length&&(e.equivalentDomains=null);try{this.formPromise=this.apiService.putSettingsDomains(e),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("domainsUpdated"))}catch(t){this.logService.error(t)}}))}indexTrackBy(e,t){return e}}VT.ɵfac=function(e){return new(e||VT)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$))},VT.ɵcmp=o["ɵɵdefineComponent"]({type:VT,selectors:[["app-domain-rules"]],decls:51,vars:31,consts:[[1,"page-header"],["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[1,"spaced-header"],["class","table table-hover table-list",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["class","form-group d-flex",4,"ngFor","ngForOf","ngForTrackBy"],["type","button",1,"btn","btn-outline-secondary","btn-sm","mb-2",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],[1,"text-muted","d-block","mb-3"],[1,"form-group","d-flex"],[1,"flex-fill"],[1,"sr-only",3,"for"],["required","",1,"form-control",3,"name","id","ngModel","placeholder","ngModelChange"],["type","button",1,"btn","btn-link","text-danger","ml-2",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-minus-circle","bwi-lg"],[1,"table","table-hover","table-list"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"table-list-options"],["appListDropdown","",1,"dropdown"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-cog","bwi-lg"],[1,"dropdown-menu","dropdown-menu-right"],["class","dropdown-item","href","#","appStopClick","",3,"click",4,"ngIf"],["href","#","appStopClick","",1,"dropdown-item",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-cut"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-close"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-plus"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelementStart"](7,"p"),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n"),o["ɵɵelementStart"](11,"form",1,2),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](13,"\n  "),o["ɵɵelementStart"](14,"h2"),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n  "),o["ɵɵtemplate"](18,TT,9,6,"p",3),o["ɵɵtext"](19,"\n  "),o["ɵɵtemplate"](20,MT,14,8,"ng-container",3),o["ɵɵtext"](21,"\n  "),o["ɵɵelementStart"](22,"button",4),o["ɵɵtext"](23,"\n    "),o["ɵɵelement"](24,"i",5),o["ɵɵpipe"](25,"i18n"),o["ɵɵtext"](26,"\n    "),o["ɵɵelementStart"](27,"span"),o["ɵɵtext"](28),o["ɵɵpipe"](29,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n  "),o["ɵɵelementStart"](32,"h2",6),o["ɵɵtext"](33),o["ɵɵpipe"](34,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n  "),o["ɵɵtemplate"](36,DT,9,6,"p",3),o["ɵɵtext"](37,"\n  "),o["ɵɵtemplate"](38,NT,7,1,"table",7),o["ɵɵtext"](39,"\n  "),o["ɵɵelementStart"](40,"button",4),o["ɵɵtext"](41,"\n    "),o["ɵɵelement"](42,"i",5),o["ɵɵpipe"](43,"i18n"),o["ɵɵtext"](44,"\n    "),o["ɵɵelementStart"](45,"span"),o["ɵɵtext"](46),o["ɵɵpipe"](47,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n")),2&e){const e=o["ɵɵreference"](12);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,15,"domainRules")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,17,"domainRulesDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](16,19,"customEqDomains")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](25,21,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](29,23,"save")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](34,25,"globalEqDomains")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&t.global.length>0),o["ɵɵadvance"](2),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](43,27,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](47,29,"save"))}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,B.NgForOf,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,pe,B.NgClass,Tn],pipes:[M.C],encapsulation:2});var HT=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function jT(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.cipher.name)}}function LT(e,t){1&e&&o["ɵɵelement"](0,"i",24)}function KT(e,t){1&e&&o["ɵɵelement"](0,"i",25)}function GT(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",26),o["ɵɵtext"](1,"\n                    "),o["ɵɵelementStart"](2,"a",27),o["ɵɵtext"](3,"\n                      "),o["ɵɵelement"](4,"i",28),o["ɵɵpipe"](5,"i18n"),o["ɵɵtext"](6,"\n                      "),o["ɵɵelementStart"](7,"span",29),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n                    "),o["ɵɵelementStart"](11,"button",30,31),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).reupload(t)})),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n                  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](12),t=o["ɵɵnextContext"]().$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](5,5,"attachmentFixDesc")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,7,"attachmentFixDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("appApiAction",n.reuploadPromises[t.id])("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n                      ",o["ɵɵpipeBind1"](14,9,"fix"),"\n                    ")}}function qT(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"td",32),o["ɵɵtext"](1,"\n                "),o["ɵɵelementStart"](2,"button",33,34),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).delete(t)})),o["ɵɵpipe"](4,"i18n"),o["ɵɵtext"](5,"\n                  "),o["ɵɵelement"](6,"i",35),o["ɵɵtext"](7,"\n                  "),o["ɵɵelement"](8,"i",36),o["ɵɵpipe"](9,"i18n"),o["ɵɵtext"](10,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n              "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](3),t=o["ɵɵnextContext"]().$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](4,6,"delete")),o["ɵɵproperty"]("appApiAction",n.deletePromises[t.id])("disabled",e.loading),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](9,8,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}function _T(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",16),o["ɵɵtext"](3,"\n                "),o["ɵɵtemplate"](4,LT,1,0,"i",17),o["ɵɵtext"](5,"\n                "),o["ɵɵtemplate"](6,KT,1,0,"i",18),o["ɵɵtext"](7,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementStart"](9,"td",19),o["ɵɵtext"](10,"\n                "),o["ɵɵelementStart"](11,"div",20),o["ɵɵtext"](12,"\n                  "),o["ɵɵelementStart"](13,"a",21),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).download(t)})),o["ɵɵtext"](14),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n                  "),o["ɵɵtemplate"](16,GT,16,11,"div",22),o["ɵɵtext"](17,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n                "),o["ɵɵelementStart"](19,"small"),o["ɵɵtext"](20),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n              "),o["ɵɵtemplate"](23,qT,12,10,"td",23),o["ɵɵtext"](24,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!e.downloading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.downloading),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](e.fileName),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",n.showFixOldAttachments(e)),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](e.sizeName),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!n.viewOnly)}}function $T(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",14),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n            "),o["ɵɵtemplate"](4,_T,25,6,"tr",15),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.cipher.attachments)}}function WT(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"h3"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"label",37),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelement"](10,"input",38),o["ɵɵtext"](11,"\n          "),o["ɵɵelementStart"](12,"small",39),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"newAttachment")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,5,"file")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,7,"maxFileSize")))}function QT(e,t){if(1&e&&(o["ɵɵelementStart"](0,"button",40),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",41),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"]()),2&e){o["ɵɵnextContext"]();const e=o["ɵɵreference"](5);o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,5,"save"))}}class YT extends Ea{constructor(e,t,n,i,r,o,a,s){super(e,t,n,r,o,window,a,i,s),this.viewOnly=!0,this.canAccessAttachments=!0}init(){return HT(this,void 0,void 0,(function*(){}))}showFixOldAttachments(e){return!1}}YT.ɵfac=function(e){return new(e||YT)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Ia._))},YT.ɵcmp=o["ɵɵdefineComponent"]({type:YT,selectors:[["emergency-access-attachments"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:42,vars:14,consts:[["role","dialog","aria-modal","true","aria-labelledby","attachmentsTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","attachmentsTitle",1,"modal-title"],[4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["class","table table-hover table-list",4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"table","table-hover","table-list"],[4,"ngFor","ngForOf"],[1,"table-list-icon"],["class","bwi bwi-fw bwi-lg bwi-file","aria-hidden","true",4,"ngIf"],["class","bwi bwi-spinner bwi-lg bwi-fw bwi-spin","aria-hidden","true",4,"ngIf"],[1,"wrap"],[1,"d-flex"],["href","#","appStopClick","",3,"click"],["class","ml-2",4,"ngIf"],["class","table-list-options",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-lg","bwi-file"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-lg","bwi-fw","bwi-spin"],[1,"ml-2"],["href","https://bitwarden.com/help/attachments/#fixing-old-attachments","target","_blank","rel","noopener"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle","text-warning",3,"title"],[1,"sr-only"],["type","button",1,"btn","btn-outline-primary","btn-sm","m-0","py-0","px-2",3,"appApiAction","disabled","click"],["reuploadBtn",""],[1,"table-list-options"],["type","button","appStopClick","",1,"btn","btn-outline-danger",3,"appA11yTitle","appApiAction","disabled","click"],["deleteBtn",""],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-lg","bwi-fw",3,"hidden","title"],["for","file",1,"sr-only"],["type","file","id","file","name","file","required","",1,"form-control-file"],[1,"form-text","text-muted"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵtemplate"](12,jT,2,1,"small",6),o["ɵɵtext"](13,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"button",7),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"span",8),o["ɵɵtext"](19,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementStart"](23,"div",9),o["ɵɵtext"](24,"\n        "),o["ɵɵtemplate"](25,$T,7,1,"table",10),o["ɵɵtext"](26,"\n        "),o["ɵɵtemplate"](27,WT,16,9,"div",6),o["ɵɵtext"](28,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n      "),o["ɵɵelementStart"](30,"div",11),o["ɵɵtext"](31,"\n        "),o["ɵɵtemplate"](32,QT,9,7,"button",12),o["ɵɵtext"](33,"\n        "),o["ɵɵelementStart"](34,"button",13),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,8,"attachments"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.cipher),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](16,10,"close")),o["ɵɵadvance"](10),o["ɵɵproperty"]("ngIf",t.cipher&&t.cipher.hasAttachments),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.viewOnly),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!t.viewOnly),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](36,12,"close"),"\n        "))},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,pe,B.NgForOf,Tn],pipes:[M.C],encapsulation:2});var ZT=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function JT(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",26),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"personalOwnershipPolicyInEffect"),"\n        "))}function XT(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function eB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",16),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",17),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"label",27),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"select",28),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.type=t})),o["ɵɵtext"](9,"\n              "),o["ɵɵtemplate"](10,XT,2,2,"option",29),o["ɵɵtext"](11,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,4,"whatTypeOfItem")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.type)("disabled",e.cipher.isDeleted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.typeOptions)}}function tB(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.id),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function nB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",17),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"label",31),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"select",32),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.folderId=t})),o["ɵɵtext"](7,"\n              "),o["ɵɵtemplate"](8,tB,2,2,"option",29),o["ɵɵpipe"](9,"async"),o["ɵɵtext"](10,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,4,"folder")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.folderId)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",o["ɵɵpipeBind1"](9,6,e.folders$))}}function iB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",41),o["ɵɵtext"](1,"\n                  "),o["ɵɵelementStart"](2,"button",50),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](3);return t.copy(t.cipher.login.username,"username","Username")})),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n                    "),o["ɵɵelement"](5,"i",44),o["ɵɵtext"](6,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n                "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](3,1,"copyUsername")))}function rB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",57),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](4).generatePassword()})),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n                    "),o["ɵɵelement"](3,"i",58),o["ɵɵtext"](4,"\n                  "),o["ɵɵelementEnd"]()}2&e&&o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](1,1,"generatePassword"))}function oB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",51),o["ɵɵtext"](1,"\n                  "),o["ɵɵtemplate"](2,rB,5,3,"a",52),o["ɵɵtext"](3,"\n                  "),o["ɵɵelementStart"](4,"a",53,54),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).checkPassword()})),o["ɵɵpipe"](6,"i18n"),o["ɵɵtext"](7,"\n                    "),o["ɵɵelement"](8,"i",55),o["ɵɵtext"](9,"\n                    "),o["ɵɵelement"](10,"i",56),o["ɵɵpipe"](11,"i18n"),o["ɵɵtext"](12,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n                "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](5),t=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.cipher.viewPassword),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](6,6,"checkPassword")),o["ɵɵproperty"]("appApiAction",t.checkPasswordPromise),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](11,8,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}function aB(e,t){1&e&&o["ɵɵelement"](0,"app-premium-badge",62)}function sB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",63),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](4).upgradeOrganization()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](2,1,"upgrade"),"\n                "))}function lB(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n                "),o["ɵɵelement"](2,"img",59),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n                "),o["ɵɵtemplate"](5,aB,1,0,"app-premium-badge",60),o["ɵɵtext"](6,"\n                "),o["ɵɵtemplate"](7,sB,3,3,"a",61),o["ɵɵtext"](8,"\n              "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"verificationCodeTotp")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.organization&&!e.cipher.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.organization&&!e.organization.useTotp||!e.organization&&!e.canAccessPremium&&e.cipher.organizationId&&!e.cipher.organizationUseTotp)}}const dB=function(e){return{"stroke-dashoffset.px":e}};function cB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",64),o["ɵɵtext"](1,"\n                "),o["ɵɵelementStart"](2,"span",65),o["ɵɵtext"](3,"\n                  "),o["ɵɵelementStart"](4,"span",66),o["ɵɵtext"](5),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n                  "),o["ɵɵnamespaceSVG"](),o["ɵɵelementStart"](7,"svg"),o["ɵɵtext"](8,"\n                    "),o["ɵɵelementStart"](9,"g"),o["ɵɵtext"](10,"\n                      "),o["ɵɵelement"](11,"circle",67),o["ɵɵtext"](12,"\n                      "),o["ɵɵelement"](13,"circle",68),o["ɵɵtext"](14,"\n                    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n                "),o["ɵɵnamespaceHTML"](),o["ɵɵelementStart"](18,"span",69),o["ɵɵpipe"](19,"i18n"),o["ɵɵtext"](20),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n                "),o["ɵɵelementStart"](22,"button",70),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](3);return t.copy(t.totpCode,"verificationCodeTotp","TOTP")})),o["ɵɵpipe"](23,"i18n"),o["ɵɵtext"](24,"\n                  "),o["ɵɵelement"](25,"i",71),o["ɵɵtext"](26,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n              "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.totpSec),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngStyle",o["ɵɵpureFunction1"](9,dB,e.totpDash)),o["ɵɵadvance"](7),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](19,5,"verificationCodeTotp")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.totpCodeFormatted),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](23,7,"copyVerificationCode"))}}function pB(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                      ",e.name,"\n                    ")}}function uB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",82),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](4).removeUri(t)})),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n                    "),o["ɵɵelement"](3,"i",83),o["ɵɵtext"](4,"\n                  "),o["ɵɵelementEnd"]()}2&e&&o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](1,1,"remove"))}function mB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",16),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"div",73),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"label",74),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n                "),o["ɵɵelementStart"](8,"div",34),o["ɵɵtext"](9,"\n                  "),o["ɵɵelementStart"](10,"input",75),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.uri=t})),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n                  "),o["ɵɵelementStart"](13,"div",41),o["ɵɵtext"](14,"\n                    "),o["ɵɵelementStart"](15,"button",42),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).launch(t)})),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n                      "),o["ɵɵelement"](18,"i",76),o["ɵɵtext"](19,"\n                    "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n                    "),o["ɵɵelementStart"](21,"button",50),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).copy(t.uri,"uri","URI")})),o["ɵɵpipe"](22,"i18n"),o["ɵɵtext"](23,"\n                      "),o["ɵɵelement"](24,"i",44),o["ɵɵtext"](25,"\n                    "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n              "),o["ɵɵelementStart"](30,"div",77),o["ɵɵtext"](31,"\n                "),o["ɵɵelementStart"](32,"div",37),o["ɵɵtext"](33,"\n                  "),o["ɵɵelementStart"](34,"label",74),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n                  "),o["ɵɵelementStart"](38,"a",78),o["ɵɵpipe"](39,"i18n"),o["ɵɵtext"](40,"\n                    "),o["ɵɵelement"](41,"i",79),o["ɵɵtext"](42,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n                "),o["ɵɵelementStart"](45,"div",37),o["ɵɵtext"](46,"\n                  "),o["ɵɵelementStart"](47,"select",80),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.match=t}))("change",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](4).loginUriMatchChanged(t)})),o["ɵɵtext"](48,"\n                    "),o["ɵɵtemplate"](49,pB,2,2,"option",29),o["ɵɵtext"](50,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n                  "),o["ɵɵtemplate"](52,uB,5,3,"button",81),o["ɵɵtext"](53,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=o["ɵɵnextContext"](4);o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate1"]("for","loginUri",n,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](6,19,"uriPosition",n+1)),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate1"]("id","loginUri",n,""),o["ɵɵpropertyInterpolate1"]("name","Login.Uris[",n,"].Uri"),o["ɵɵpropertyInterpolate1"]("placeholder","",o["ɵɵpipeBind1"](11,22,"ex")," https://google.com"),o["ɵɵproperty"]("ngModel",e.uri)("disabled",i.cipher.isDeleted||i.viewOnly),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](16,24,"launch")),o["ɵɵproperty"]("disabled",!e.canLaunch),o["ɵɵadvance"](6),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](22,26,"copyUri")),o["ɵɵadvance"](13),o["ɵɵpropertyInterpolate1"]("for","loginUriMatch",n,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                    ",o["ɵɵpipeBind1"](36,28,"matchDetection"),"\n                  "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](39,30,"learnMore")),o["ɵɵadvance"](9),o["ɵɵpropertyInterpolate1"]("id","loginUriMatch",n,""),o["ɵɵpropertyInterpolate1"]("name","Login.Uris[",n,"].Match"),o["ɵɵproperty"]("ngModel",e.match)("disabled",i.cipher.isDeleted||i.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",i.uriMatchOptions),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!i.cipher.isDeleted&&!i.viewOnly)}}function hB(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵtemplate"](2,mB,56,32,"div",72),o["ɵɵtext"](3,"\n          "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.cipher.login.uris)("ngForTrackBy",e.trackByFunction)}}function vB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",84),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).addUri()})),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",85),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](4,1,"newUri"),"\n          "))}const gB=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}},fB=function(e){return{low:e}};function xB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",16),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"div",17),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"label",33),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"div",34),o["ɵɵtext"](11,"\n                "),o["ɵɵelementStart"](12,"input",35),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.login.username=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n                "),o["ɵɵtemplate"](14,iB,8,3,"div",36),o["ɵɵtext"](15,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n            "),o["ɵɵelementStart"](18,"div",17),o["ɵɵtext"](19,"\n              "),o["ɵɵelementStart"](20,"div",37),o["ɵɵtext"](21,"\n                "),o["ɵɵelementStart"](22,"label",38),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n                "),o["ɵɵtemplate"](26,oB,14,10,"div",39),o["ɵɵtext"](27,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n              "),o["ɵɵelementStart"](29,"div",34),o["ɵɵtext"](30,"\n                "),o["ɵɵelementStart"](31,"input",40),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.login.password=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n                "),o["ɵɵelementStart"](33,"div",41),o["ɵɵtext"](34,"\n                  "),o["ɵɵelementStart"](35,"button",42),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).togglePassword()})),o["ɵɵpipe"](36,"i18n"),o["ɵɵtext"](37,"\n                    "),o["ɵɵelement"](38,"i",43),o["ɵɵtext"](39,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n                  "),o["ɵɵelementStart"](41,"button",42),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2);return t.copy(t.cipher.login.password,"password","Password")})),o["ɵɵpipe"](42,"i18n"),o["ɵɵtext"](43,"\n                    "),o["ɵɵelement"](44,"i",44),o["ɵɵtext"](45,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n          "),o["ɵɵelementStart"](51,"div",16),o["ɵɵtext"](52,"\n            "),o["ɵɵelementStart"](53,"div",17),o["ɵɵtext"](54,"\n              "),o["ɵɵelementStart"](55,"label",45),o["ɵɵtext"](56),o["ɵɵpipe"](57,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n              "),o["ɵɵelementStart"](59,"input",46),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.login.totp=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n            "),o["ɵɵelementStart"](62,"div",47),o["ɵɵtext"](63,"\n              "),o["ɵɵtemplate"](64,lB,9,5,"div",21),o["ɵɵtext"](65,"\n              "),o["ɵɵtemplate"](66,cB,28,11,"div",48),o["ɵɵtext"](67,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](68,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](69,"\n          "),o["ɵɵtemplate"](70,hB,4,2,"ng-container",21),o["ɵɵtext"](71,"\n          "),o["ɵɵtemplate"](72,vB,5,3,"a",49),o["ɵɵtext"](73,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,23,"username")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngModel",e.cipher.login.username)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.cipher.isDeleted),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](24,25,"password")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.cipher.isDeleted&&!e.viewOnly),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("type",e.showPassword?"text":"password"),o["ɵɵproperty"]("ngModel",e.cipher.login.password)("disabled",e.cipher.isDeleted||!e.cipher.viewPassword||e.viewOnly),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](36,27,"toggleVisibility")),o["ɵɵproperty"]("disabled",!e.cipher.viewPassword),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](33,gB,!e.showPassword,e.showPassword)),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](42,29,"copyPassword")),o["ɵɵproperty"]("disabled",!e.cipher.viewPassword),o["ɵɵadvance"](15),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](57,31,"authenticatorKeyTotp")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("type",e.cipher.viewPassword?"text":"password"),o["ɵɵproperty"]("ngModel",e.cipher.login.totp)("disabled",e.cipher.isDeleted||!e.cipher.viewPassword||e.viewOnly),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](36,fB,e.totpLow)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.cipher.login.totp||!e.totpCode),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.cipher.login.totp&&e.totpCode),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.cipher.login.hasUris),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.cipher.isDeleted&&!e.viewOnly)}}function yB(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function SB(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                  ",e.name,"\n                ")}}function bB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",16),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"div",17),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"label",86),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"input",87),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.cardholderName=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n            "),o["ɵɵelementStart"](13,"div",17),o["ɵɵtext"](14,"\n              "),o["ɵɵelementStart"](15,"label",88),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n              "),o["ɵɵelementStart"](19,"select",89),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.brand=t})),o["ɵɵtext"](20,"\n                "),o["ɵɵtemplate"](21,yB,2,2,"option",29),o["ɵɵtext"](22,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n          "),o["ɵɵelementStart"](26,"div",16),o["ɵɵtext"](27,"\n            "),o["ɵɵelementStart"](28,"div",17),o["ɵɵtext"](29,"\n              "),o["ɵɵelementStart"](30,"label",90),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n              "),o["ɵɵelementStart"](34,"div",34),o["ɵɵtext"](35,"\n                "),o["ɵɵelementStart"](36,"input",91),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.number=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n                "),o["ɵɵelementStart"](38,"div",41),o["ɵɵtext"](39,"\n                  "),o["ɵɵelementStart"](40,"button",50),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).toggleCardNumber()})),o["ɵɵpipe"](41,"i18n"),o["ɵɵtext"](42,"\n                    "),o["ɵɵelement"](43,"i",43),o["ɵɵtext"](44,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n                  "),o["ɵɵelementStart"](46,"button",50),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2);return t.copy(t.cipher.card.number,"number","Number")})),o["ɵɵpipe"](47,"i18n"),o["ɵɵtext"](48,"\n                    "),o["ɵɵelement"](49,"i",44),o["ɵɵtext"](50,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n            "),o["ɵɵelementStart"](55,"div",92),o["ɵɵtext"](56,"\n              "),o["ɵɵelementStart"](57,"label",93),o["ɵɵtext"](58),o["ɵɵpipe"](59,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n              "),o["ɵɵelementStart"](61,"select",94),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.expMonth=t})),o["ɵɵtext"](62,"\n                "),o["ɵɵtemplate"](63,SB,2,2,"option",29),o["ɵɵtext"](64,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n            "),o["ɵɵelementStart"](67,"div",92),o["ɵɵtext"](68,"\n              "),o["ɵɵelementStart"](69,"label",95),o["ɵɵtext"](70),o["ɵɵpipe"](71,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n              "),o["ɵɵelementStart"](73,"input",96),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.expYear=t})),o["ɵɵpipe"](74,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](75,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](77,"\n          "),o["ɵɵelementStart"](78,"div",16),o["ɵɵtext"](79,"\n            "),o["ɵɵelementStart"](80,"div",17),o["ɵɵtext"](81,"\n              "),o["ɵɵelementStart"](82,"label",97),o["ɵɵtext"](83),o["ɵɵpipe"](84,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](85,"\n              "),o["ɵɵelementStart"](86,"div",34),o["ɵɵtext"](87,"\n                "),o["ɵɵelementStart"](88,"input",98),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.card.code=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](89,"\n                "),o["ɵɵelementStart"](90,"div",41),o["ɵɵtext"](91,"\n                  "),o["ɵɵelementStart"](92,"button",50),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).toggleCardCode()})),o["ɵɵpipe"](93,"i18n"),o["ɵɵtext"](94,"\n                    "),o["ɵɵelement"](95,"i",43),o["ɵɵtext"](96,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](97,"\n                  "),o["ɵɵelementStart"](98,"button",50),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"](2);return t.copy(t.cipher.card.code,"securityCode","Security Code")})),o["ɵɵpipe"](99,"i18n"),o["ɵɵtext"](100,"\n                    "),o["ɵɵelement"](101,"i",44),o["ɵɵtext"](102,"\n                  "),o["ɵɵelementEnd"](),o["ɵɵtext"](103,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](104,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](105,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](106,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](107,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,29,"cardholderName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.card.cardholderName)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,31,"brand")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.card.brand)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.cardBrandOptions),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](32,33,"number")),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("type",e.showCardNumber?"text":"password"),o["ɵɵproperty"]("ngModel",e.cipher.card.number)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](41,35,"toggleVisibility")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](51,gB,!e.showCardNumber,e.showCardNumber)),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](47,37,"copyNumber")),o["ɵɵadvance"](12),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](59,39,"expirationMonth")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.card.expMonth)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.cardExpMonthOptions),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](71,41,"expirationYear")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate1"]("placeholder","",o["ɵɵpipeBind1"](74,43,"ex")," 2019"),o["ɵɵproperty"]("ngModel",e.cipher.card.expYear)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](84,45,"securityCode")),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("type",e.showCardCode?"text":"password"),o["ɵɵproperty"]("ngModel",e.cipher.card.code)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](93,47,"toggleVisibility")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](54,gB,!e.showCardCode,e.showCardCode)),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](99,49,"securityCode"))}}function wB(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                  ",e.name,"\n                ")}}function IB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",16),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"div",99),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"label",100),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"select",101),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.title=t})),o["ɵɵtext"](11,"\n                "),o["ɵɵtemplate"](12,wB,2,2,"option",29),o["ɵɵtext"](13,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n          "),o["ɵɵelementStart"](17,"div",16),o["ɵɵtext"](18,"\n            "),o["ɵɵelementStart"](19,"div",99),o["ɵɵtext"](20,"\n              "),o["ɵɵelementStart"](21,"label",102),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n              "),o["ɵɵelementStart"](25,"input",103),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.firstName=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n            "),o["ɵɵelementStart"](28,"div",99),o["ɵɵtext"](29,"\n              "),o["ɵɵelementStart"](30,"label",104),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n              "),o["ɵɵelementStart"](34,"input",105),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.middleName=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n            "),o["ɵɵelementStart"](37,"div",99),o["ɵɵtext"](38,"\n              "),o["ɵɵelementStart"](39,"label",106),o["ɵɵtext"](40),o["ɵɵpipe"](41,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n              "),o["ɵɵelementStart"](43,"input",107),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.lastName=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n          "),o["ɵɵelementStart"](47,"div",16),o["ɵɵtext"](48,"\n            "),o["ɵɵelementStart"](49,"div",99),o["ɵɵtext"](50,"\n              "),o["ɵɵelementStart"](51,"label",108),o["ɵɵtext"](52),o["ɵɵpipe"](53,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n              "),o["ɵɵelementStart"](55,"input",109),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.username=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](57,"\n            "),o["ɵɵelementStart"](58,"div",99),o["ɵɵtext"](59,"\n              "),o["ɵɵelementStart"](60,"label",110),o["ɵɵtext"](61),o["ɵɵpipe"](62,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](63,"\n              "),o["ɵɵelementStart"](64,"input",111),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.company=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n          "),o["ɵɵelementStart"](68,"div",16),o["ɵɵtext"](69,"\n            "),o["ɵɵelementStart"](70,"div",99),o["ɵɵtext"](71,"\n              "),o["ɵɵelementStart"](72,"label",112),o["ɵɵtext"](73),o["ɵɵpipe"](74,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](75,"\n              "),o["ɵɵelementStart"](76,"input",113),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.ssn=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](77,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](78,"\n            "),o["ɵɵelementStart"](79,"div",99),o["ɵɵtext"](80,"\n              "),o["ɵɵelementStart"](81,"label",114),o["ɵɵtext"](82),o["ɵɵpipe"](83,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](84,"\n              "),o["ɵɵelementStart"](85,"input",115),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.passportNumber=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](86,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](87,"\n            "),o["ɵɵelementStart"](88,"div",99),o["ɵɵtext"](89,"\n              "),o["ɵɵelementStart"](90,"label",116),o["ɵɵtext"](91),o["ɵɵpipe"](92,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](93,"\n              "),o["ɵɵelementStart"](94,"input",117),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.licenseNumber=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](95,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](96,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](97,"\n          "),o["ɵɵelementStart"](98,"div",16),o["ɵɵtext"](99,"\n            "),o["ɵɵelementStart"](100,"div",17),o["ɵɵtext"](101,"\n              "),o["ɵɵelementStart"](102,"label",118),o["ɵɵtext"](103),o["ɵɵpipe"](104,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](105,"\n              "),o["ɵɵelementStart"](106,"input",119),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.email=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](107,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](108,"\n            "),o["ɵɵelementStart"](109,"div",17),o["ɵɵtext"](110,"\n              "),o["ɵɵelementStart"](111,"label",120),o["ɵɵtext"](112),o["ɵɵpipe"](113,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](114,"\n              "),o["ɵɵelementStart"](115,"input",121),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.phone=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](116,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](117,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](118,"\n          "),o["ɵɵelementStart"](119,"div",16),o["ɵɵtext"](120,"\n            "),o["ɵɵelementStart"](121,"div",17),o["ɵɵtext"](122,"\n              "),o["ɵɵelementStart"](123,"label",122),o["ɵɵtext"](124),o["ɵɵpipe"](125,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](126,"\n              "),o["ɵɵelementStart"](127,"input",123),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.address1=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](128,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](129,"\n            "),o["ɵɵelementStart"](130,"div",17),o["ɵɵtext"](131,"\n              "),o["ɵɵelementStart"](132,"label",124),o["ɵɵtext"](133),o["ɵɵpipe"](134,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](135,"\n              "),o["ɵɵelementStart"](136,"input",125),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.address2=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](137,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](138,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](139,"\n          "),o["ɵɵelementStart"](140,"div",16),o["ɵɵtext"](141,"\n            "),o["ɵɵelementStart"](142,"div",17),o["ɵɵtext"](143,"\n              "),o["ɵɵelementStart"](144,"label",126),o["ɵɵtext"](145),o["ɵɵpipe"](146,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](147,"\n              "),o["ɵɵelementStart"](148,"input",127),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.address3=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](149,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](150,"\n            "),o["ɵɵelementStart"](151,"div",17),o["ɵɵtext"](152,"\n              "),o["ɵɵelementStart"](153,"label",128),o["ɵɵtext"](154),o["ɵɵpipe"](155,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](156,"\n              "),o["ɵɵelementStart"](157,"input",129),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.city=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](158,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](159,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](160,"\n          "),o["ɵɵelementStart"](161,"div",16),o["ɵɵtext"](162,"\n            "),o["ɵɵelementStart"](163,"div",17),o["ɵɵtext"](164,"\n              "),o["ɵɵelementStart"](165,"label",130),o["ɵɵtext"](166),o["ɵɵpipe"](167,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](168,"\n              "),o["ɵɵelementStart"](169,"input",131),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.state=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](170,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](171,"\n            "),o["ɵɵelementStart"](172,"div",17),o["ɵɵtext"](173,"\n              "),o["ɵɵelementStart"](174,"label",132),o["ɵɵtext"](175),o["ɵɵpipe"](176,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](177,"\n              "),o["ɵɵelementStart"](178,"input",133),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.postalCode=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](179,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](180,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](181,"\n          "),o["ɵɵelementStart"](182,"div",16),o["ɵɵtext"](183,"\n            "),o["ɵɵelementStart"](184,"div",17),o["ɵɵtext"](185,"\n              "),o["ɵɵelementStart"](186,"label",134),o["ɵɵtext"](187),o["ɵɵpipe"](188,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](189,"\n              "),o["ɵɵelementStart"](190,"input",135),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.identity.country=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](191,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](192,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](193,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,55,"title")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.title)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.identityTitleOptions),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,57,"firstName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.firstName)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](32,59,"middleName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.middleName)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](41,61,"lastName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.lastName)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](53,63,"username")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.username)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](62,65,"company")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.company)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](74,67,"ssn")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.ssn)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](83,69,"passportNumber")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.passportNumber)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](92,71,"licenseNumber")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.licenseNumber)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](104,73,"email")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.email)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](113,75,"phone")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.phone)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](125,77,"address1")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.address1)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](134,79,"address2")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.address2)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](146,81,"address3")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.address3)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](155,83,"cityTown")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.city)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](167,85,"stateProvince")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.state)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](176,87,"zipPostalCode")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.postalCode)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](188,89,"country")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.identity.country)("disabled",e.cipher.isDeleted||e.viewOnly)}}function CB(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function EB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"h3",136),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"div",16),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"div",137),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"label",138),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵelementStart"](14,"select",139),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cipher.organizationId=t}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).organizationChanged()})),o["ɵɵtext"](15,"\n                "),o["ɵɵtemplate"](16,CB,2,2,"option",29),o["ɵɵtext"](17,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,5,"ownership")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,7,"whoOwnsThisItem")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.organizationId)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.ownershipOptions)}}function kB(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"noCollectionsInList"),"\n          "))}function PB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",141),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"input",142),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.checked=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n              "),o["ɵɵelementStart"](4,"label",143),o["ɵɵtext"](5),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=t.index,i=o["ɵɵnextContext"](4);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("id","collection-",n,""),o["ɵɵpropertyInterpolate1"]("name","Collection[",n,"].Checked"),o["ɵɵproperty"]("ngModel",e.checked)("disabled",i.cipher.isDeleted||i.viewOnly),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("for","collection-",n,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function AB(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵtemplate"](2,PB,7,6,"div",140),o["ɵɵtext"](3,"\n          "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.collections)}}function OB(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"h3",136),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵtemplate"](6,kB,3,3,"div",21),o["ɵɵtext"](7,"\n          "),o["ɵɵtemplate"](8,AB,4,1,"ng-container",21),o["ɵɵtext"](9,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"collections")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.collections||!e.collections.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.collections&&e.collections.length)}}function TB(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"b",145),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5),o["ɵɵpipe"](6,"date"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](4,2,"datePasswordUpdated"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind2"](6,4,e.cipher.passwordRevisionDisplayDate,"medium"),"\n            ")}}function BB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"b",145),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"a",146),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).viewHistory()})),o["ɵɵpipe"](7,"i18n"),o["ɵɵtext"](8),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](4,3,"passwordHistory"),":"),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](7,5,"view")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n                ",e.cipher.passwordHistory.length,"\n              ")}}function MB(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"date"),o["ɵɵelementStart"](3,"span",148),o["ɵɵtext"](4),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n              "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind2"](2,2,e.lastUsedDate,"short")," -\n                "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](e.password)}}function DB(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",62),o["ɵɵtext"](1,"\n              "),o["ɵɵtemplate"](2,MB,6,5,"div",147),o["ɵɵtext"](3,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.cipher.passwordHistory)}}function FB(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",144),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"div"),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"b",145),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9),o["ɵɵpipe"](10,"date"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵtemplate"](12,TB,7,7,"div",21),o["ɵɵtext"](13,"\n            "),o["ɵɵtemplate"](14,BB,10,7,"div",21),o["ɵɵtext"](15,"\n            "),o["ɵɵtemplate"](16,DB,4,1,"div",60),o["ɵɵtext"](17,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](8,5,"dateUpdated"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind2"](10,7,e.cipher.revisionDate,"medium"),"\n            "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.showRevisionDate),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasPasswordHistory),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.viewingPasswordHistory)}}function RB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"h3",136),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"div",141),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"input",149),o["ɵɵlistener"]("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).repromptChanged()})),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n            "),o["ɵɵelementStart"](10,"label",150),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementStart"](14,"a",151),o["ɵɵpipe"](15,"i18n"),o["ɵɵtext"](16,"\n              "),o["ɵɵelement"](17,"i",79),o["ɵɵtext"](18,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,5,"options")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngModel",e.reprompt)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,7,"passwordPrompt")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](15,9,"learnMore"))}}function UB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",13),o["ɵɵtext"](1,"\n        "),o["ɵɵtemplate"](2,JT,3,3,"app-callout",14),o["ɵɵtext"](3,"\n        "),o["ɵɵtemplate"](4,eB,14,6,"div",15),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"div",16),o["ɵɵtext"](7,"\n          "),o["ɵɵelementStart"](8,"div",17),o["ɵɵtext"](9,"\n            "),o["ɵɵelementStart"](10,"label",18),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementStart"](14,"input",19),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().cipher.name=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n          "),o["ɵɵtemplate"](17,nB,12,8,"div",20),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n        "),o["ɵɵtext"](20,"\n        "),o["ɵɵtemplate"](21,xB,74,38,"ng-container",21),o["ɵɵtext"](22,"\n        "),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,bB,108,57,"ng-container",21),o["ɵɵtext"](25,"\n        "),o["ɵɵtext"](26,"\n        "),o["ɵɵtemplate"](27,IB,194,91,"ng-container",21),o["ɵɵtext"](28,"\n        "),o["ɵɵelementStart"](29,"div",22),o["ɵɵtext"](30,"\n          "),o["ɵɵelementStart"](31,"label",23),o["ɵɵtext"](32),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n          "),o["ɵɵelementStart"](35,"textarea",24),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().cipher.notes=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n        "),o["ɵɵelement"](38,"app-vault-add-edit-custom-fields",25),o["ɵɵtext"](39,"\n        "),o["ɵɵtemplate"](40,EB,21,9,"ng-container",21),o["ɵɵtext"](41,"\n        "),o["ɵɵtemplate"](42,OB,10,5,"ng-container",21),o["ɵɵtext"](43,"\n        "),o["ɵɵtemplate"](44,FB,19,10,"ng-container",21),o["ɵɵtext"](45,"\n        "),o["ɵɵtemplate"](46,RB,21,11,"ng-container",21),o["ɵɵtext"](47,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.allowOwnershipAssignment()&&!e.allowPersonal),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.editMode&&!e.viewOnly),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,20,"name")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.name)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.organization),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.cipher.type===e.cipherType.Login),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.cipher.type===e.cipherType.Card),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.cipher.type===e.cipherType.Identity),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](33,22,"notes")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.cipher.notes)("disabled",e.cipher.isDeleted||e.viewOnly),o["ɵɵadvance"](3),o["ɵɵproperty"]("cipher",e.cipher)("thisCipherType",e.cipher.type)("viewOnly",e.viewOnly)("copy",e.copy.bind(e)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.allowOwnershipAssignment()),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",(!e.editMode||e.cloneMode)&&e.cipher.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.editMode),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.canUseReprompt)}}function zB(e,t){if(1&e&&(o["ɵɵelementStart"](0,"button",152),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",153),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](),t=o["ɵɵreference"](5);o["ɵɵproperty"]("disabled",t.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,5,null!=e.cipher&&e.cipher.isDeleted?"restore":"save"))}}const NB=function(e,t){return{"bwi-star-f":e,"bwi-star":t}};function VB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",70),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).toggleFavorite()})),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n            "),o["ɵɵelement"](3,"i",43),o["ɵɵtext"](4,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](1,2,e.cipher.favorite?"unfavorite":"favorite")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](4,NB,e.cipher.favorite,!e.cipher.favorite))}}function HB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",157,158),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).delete()})),o["ɵɵpipe"](2,"i18n"),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"i",159),o["ɵɵtext"](5,"\n            "),o["ɵɵelement"](6,"i",160),o["ɵɵpipe"](7,"i18n"),o["ɵɵtext"](8,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"](2);o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](2,6,t.cipher.isDeleted?"permanentlyDelete":"delete")),o["ɵɵproperty"]("disabled",e.loading)("appApiAction",t.deletePromise),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](7,8,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}function jB(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",154),o["ɵɵtext"](1,"\n          "),o["ɵɵtemplate"](2,VB,5,7,"button",155),o["ɵɵtext"](3,"\n          "),o["ɵɵtemplate"](4,HB,9,10,"button",156),o["ɵɵtext"](5,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.organization&&!e.cipher.isDeleted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.editMode&&!e.cloneMode)}}class LB extends ba{constructor(e,t,n,i,r,o,a,s,l,d,c,p,u,m,h){super(e,t,n,i,r,o,a,s,l,d,c,p,m,h,u),this.originalCipher=null,this.viewOnly=!0}load(){return ZT(this,void 0,void 0,(function*(){this.title=this.i18nService.t("viewItem")}))}loadCipher(){return ZT(this,void 0,void 0,(function*(){return Promise.resolve(this.originalCipher)}))}}LB.ɵfac=function(e){return new(e||LB)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](Rr.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Zr),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](Jr.a),o["ɵɵdirectiveInject"](io),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](Xr.P),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](eo),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](L.$))},LB.ɵcmp=o["ɵɵdefineComponent"]({type:LB,selectors:[["app-org-vault-add-edit"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:36,vars:11,consts:[["role","dialog","aria-modal","true","aria-labelledby","cipherAddEditTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],["ngNativeValidate","","autocomplete","off",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","cipherAddEditTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["class","ml-auto",4,"ngIf"],[1,"modal-body"],["type","info",4,"ngIf"],["class","row",4,"ngIf"],[1,"row"],[1,"col-6","form-group"],["for","name"],["id","name","type","text","name","Name","required","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","col-6 form-group",4,"ngIf"],[4,"ngIf"],[1,"form-group"],["for","notes"],["id","notes","name","Notes","rows","6",1,"form-control",3,"ngModel","disabled","ngModelChange"],[3,"cipher","thisCipherType","viewOnly","copy"],["type","info"],["for","type"],["id","type","name","Type","appAutofocus","",1,"form-control",3,"ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["for","folder"],["id","folder","name","FolderId",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","loginUsername"],[1,"input-group"],["id","loginUsername","type","text","name","Login.Username","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["class","input-group-append",4,"ngIf"],[1,"d-flex"],["for","loginPassword"],["class","ml-auto d-flex",4,"ngIf"],["id","loginPassword","name","Login.Password","appInputVerbatim","","autocomplete","new-password",1,"form-control","text-monospace",3,"type","ngModel","disabled","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","disabled","click"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-clone"],["for","loginTotp"],["id","loginTotp","name","Login.Totp","appInputVerbatim","",1,"form-control","text-monospace",3,"type","ngModel","disabled","ngModelChange"],[1,"col-6","form-group","totp","d-flex","align-items-end",3,"ngClass"],["class","d-flex align-items-center",4,"ngIf"],["href","#","appStopClick","","class","d-inline-block mb-3",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","click"],[1,"ml-auto","d-flex"],["href","#","class","d-block mr-2 bwi-icon-above-input","appStopClick","",3,"appA11yTitle","click",4,"ngIf"],["href","#","appStopClick","",1,"d-block","bwi-icon-above-input",3,"appA11yTitle","appApiAction","click"],["checkPasswordBtn",""],["aria-hidden","true",1,"bwi","bwi-lg","bwi-fw","bwi-check-circle",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-fw","bwi-spinner","bwi-spin",3,"hidden","title"],["href","#","appStopClick","",1,"d-block","mr-2","bwi-icon-above-input",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-fw","bwi-generate"],["src","../../images/totp-countdown.png","id","totpImage",1,"ml-2",3,"title"],["class","ml-3",4,"ngIf"],["href","#","appStopClick","","bitBadge","","badgeType","primary","class","tw-ml-4",3,"click",4,"ngIf"],[1,"ml-3"],["href","#","appStopClick","","bitBadge","","badgeType","primary",1,"tw-ml-4",3,"click"],[1,"d-flex","align-items-center"],[1,"totp-countdown","mr-3","ml-2"],[1,"totp-sec"],["r","12.6","cy","16","cx","16",1,"totp-circle","inner",3,"ngStyle"],["r","14","cy","16","cx","16",1,"totp-circle","outer"],[1,"totp-code","mr-2",3,"title"],["type","button",1,"btn","btn-link",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-clone"],["class","row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-7","form-group"],[3,"for"],["type","text","appInputVerbatim","",1,"form-control",3,"id","name","ngModel","disabled","placeholder","ngModelChange"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-share-square"],[1,"col-5","form-group"],["href","https://bitwarden.com/help/uri-match-detection/","target","_blank","rel","noopener",1,"ml-auto",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],[1,"form-control","overflow-hidden",3,"id","name","ngModel","disabled","ngModelChange","change"],["type","button","class","btn btn-link text-danger ml-2",3,"appA11yTitle","click",4,"ngIf"],["type","button",1,"btn","btn-link","text-danger","ml-2",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-minus-circle","bwi-lg"],["href","#","appStopClick","",1,"d-inline-block","mb-3",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus-circle","bwi-fw"],["for","cardCardholderName"],["id","cardCardholderName","type","text","name","Card.CardCardholderName",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","cardBrand"],["id","cardBrand","name","Card.Brand",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","cardNumber"],["id","cardNumber","name","Card.Number","appInputVerbatim","","autocomplete","new-password",1,"form-control","text-monospace",3,"type","ngModel","disabled","ngModelChange"],[1,"col","form-group"],["for","cardExpMonth"],["id","cardExpMonth","name","Card.ExpMonth",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","cardExpYear"],["id","cardExpYear","type","text","name","Card.ExpYear",1,"form-control",3,"ngModel","placeholder","disabled","ngModelChange"],["for","cardCode"],["id","cardCode","name","Card.Code","appInputVerbatim","","autocomplete","new-password",1,"form-control","text-monospace",3,"type","ngModel","disabled","ngModelChange"],[1,"col-4","form-group"],["for","idTitle"],["id","idTitle","name","Identity.Title",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idFirstName"],["id","idFirstName","type","text","name","Identity.FirstName",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idMiddleName"],["id","idMiddleName","type","text","name","Identity.MiddleName",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idLastName"],["id","idLastName","type","text","name","Identity.LastName",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idUsername"],["id","idUsername","type","text","name","Identity.Username","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idCompany"],["id","idCompany","type","text","name","Identity.Company",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idSsn"],["id","idSsn","type","text","name","Identity.SSN","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idPassportNumber"],["id","idPassportNumber","type","text","name","Identity.PassportNumber","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idLicenseNumber"],["id","idLicenseNumber","type","text","name","Identity.LicenseNumber","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idEmail"],["id","idEmail","type","text","inputmode","email","name","Identity.Email","appInputVerbatim","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idPhone"],["id","idPhone","type","text","inputmode","tel","name","Identity.Phone",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idAddress1"],["id","idAddress1","type","text","name","Identity.Address1",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idAddress2"],["id","idAddress2","type","text","name","Identity.Address2",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idAddress3"],["id","idAddress3","type","text","name","Identity.Address3",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idCity"],["id","idCity","type","text","name","Identity.City",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idState"],["id","idState","type","text","name","Identity.State",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idPostalCode"],["id","idPostalCode","type","text","name","Identity.PostalCode",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","idCountry"],["id","idCountry","type","text","name","Identity.Country",1,"form-control",3,"ngModel","disabled","ngModelChange"],[1,"mt-4"],[1,"col-5"],["for","organizationId"],["id","organizationId","name","OrganizationId",1,"form-control",3,"ngModel","disabled","ngModelChange","change"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","id","name","disabled","ngModelChange"],[1,"form-check-label",3,"for"],[1,"small","text-muted","mt-4"],[1,"font-weight-semibold"],["href","#","appStopClick","",3,"title","click"],[4,"ngFor","ngForOf"],[1,"generated-wrapper","text-monospace","ml-2"],["type","checkbox","id","passwordPrompt","name","passwordPrompt",1,"form-check-input",3,"ngModel","disabled","change"],["for","passwordPrompt",1,"form-check-label"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/managing-items/#protect-individual-items",3,"appA11yTitle"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[1,"ml-auto"],["type","button","class","btn btn-link",3,"appA11yTitle","click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click"],["deleteBtn",""],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-lg","bwi-fw",3,"hidden","title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"button",6),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"span",7),o["ɵɵtext"](16,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵtemplate"](20,UB,48,24,"div",8),o["ɵɵtext"](21,"\n      "),o["ɵɵelementStart"](22,"div",9),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,zB,9,7,"button",10),o["ɵɵtext"](25,"\n        "),o["ɵɵelementStart"](26,"button",11),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n        "),o["ɵɵtemplate"](30,jB,6,2,"div",12),o["ɵɵtext"](31,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](t.title),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,7,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",t.cipher),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!t.viewOnly),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](28,9,t.viewOnly?"close":"cancel"),"\n        "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.cipher&&!t.viewOnly))},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,pe,B.NgIf,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel,Co,Pe.O,d.SelectControlValueAccessor,Z.U,B.NgForOf,d.NgSelectOption,d["ɵNgSelectMultipleOption"],J.b,B.NgClass,Tn,Oo,Po.l,B.NgStyle,d.CheckboxControlValueAccessor],pipes:[M.C,B.AsyncPipe,B.DatePipe],encapsulation:2});var KB=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const GB=["cipherAddEdit"],qB=["attachments"];function _B(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",13),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",14),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"shared")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"shared")))}function $B(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",15),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",14),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"attachments")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"attachments")))}function WB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",16),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"button",17),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n                "),o["ɵɵelement"](5,"i",18),o["ɵɵtext"](6,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵelementStart"](8,"div",19),o["ɵɵtext"](9,"\n                "),o["ɵɵelementStart"](10,"a",20),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).viewAttachments(t)})),o["ɵɵtext"](11,"\n                  "),o["ɵɵelement"](12,"i",21),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](3,2,"options")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](14,4,"attachments"),"\n                "))}function QB(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"td",7),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"app-vault-icon",8),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"td",9),o["ɵɵtext"](8,"\n            "),o["ɵɵelementStart"](9,"a",10),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).selectCipher(t)})),o["ɵɵpipe"](10,"i18n"),o["ɵɵtext"](11),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n            "),o["ɵɵtemplate"](13,_B,9,6,"ng-container",2),o["ɵɵtext"](14,"\n            "),o["ɵɵtemplate"](15,$B,9,6,"ng-container",2),o["ɵɵtext"](16,"\n            "),o["ɵɵelement"](17,"br"),o["ɵɵtext"](18,"\n            "),o["ɵɵelementStart"](19,"small"),o["ɵɵtext"](20),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementStart"](23,"td",11),o["ɵɵtext"](24,"\n            "),o["ɵɵtemplate"](25,WB,17,6,"div",12),o["ɵɵtext"](26,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit;o["ɵɵadvance"](4),o["ɵɵproperty"]("cipher",e),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](10,7,"editItem")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.name),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.organizationId),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.hasAttachments),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.subTitle),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.hasAttachments)}}function YB(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"table",5),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"tbody"),o["ɵɵtext"](5,"\n        "),o["ɵɵtemplate"](6,QB,28,9,"tr",6),o["ɵɵtext"](7,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](6),o["ɵɵproperty"]("ngForOf",e.ciphers)}}function ZB(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",22),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"span",14),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function JB(e,t){}function XB(e,t){}class eM{constructor(e,t,n,i,r,o){this.cipherService=e,this.cryptoService=t,this.modalService=n,this.router=i,this.route=r,this.apiService=o,this.ciphers=[],this.loaded=!1}ngOnInit(){this.route.params.subscribe((e=>{if(null==e.id)return this.router.navigate(["settings/emergency-access"]);this.id=e.id,this.load()}))}selectCipher(e){return KB(this,void 0,void 0,(function*(){const[t,n]=yield this.modalService.openViewRef(LB,this.cipherAddEditModalRef,(t=>{t.cipherId=null==e?null:e.id,t.cipher=e}));return n}))}load(){return KB(this,void 0,void 0,(function*(){const e=yield this.apiService.postEmergencyAccessView(this.id);this.ciphers=yield this.getAllCiphers(e),this.loaded=!0}))}viewAttachments(e){return KB(this,void 0,void 0,(function*(){yield this.modalService.openViewRef(YT,this.attachmentsModalRef,(t=>{t.cipher=e,t.emergencyAccessId=this.id}))}))}getAllCiphers(e){return KB(this,void 0,void 0,(function*(){const t=e.ciphers,n=[],i=yield this.cryptoService.rsaDecrypt(e.keyEncrypted),r=new mg.N(i),o=[];return t.forEach((e=>{const t=new Kc.O(e),i=new Gc.t(t);o.push(i.decrypt(r).then((e=>n.push(e))))})),yield Promise.all(o),n.sort(this.cipherService.getLocaleSortingFunction()),n}))}}var tM,nM;eM.ɵfac=function(e){return new(e||eM)(o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](T.s))},eM.ɵcmp=o["ɵɵdefineComponent"]({type:eM,selectors:[["emergency-access-view"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](GB,7,o.ViewContainerRef),o["ɵɵviewQuery"](qB,7,o.ViewContainerRef)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.cipherAddEditModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.attachmentsModalRef=e.first)}},decls:20,vars:5,consts:[[1,"page-header"],[1,"mt-4"],[4,"ngIf"],["cipherAddEdit",""],["attachments",""],[1,"table","table-hover","table-list","table-ciphers"],[4,"ngFor","ngForOf"],[1,"table-list-icon"],[3,"cipher"],[1,"reduced-lh","wrap"],["href","#","appStopClick","",3,"title","click"],[1,"table-list-options"],["class","dropdown","appListDropdown","",4,"ngIf"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-collection",3,"title"],[1,"sr-only"],["appStopProp","","aria-hidden","true",1,"bwi","bwi-paperclip",3,"title"],["appListDropdown","",1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-cog","bwi-lg"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu","dropdown-menu-right"],["href","#","appStopClick","",1,"dropdown-item",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-paperclip"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelementStart"](7,"div",1),o["ɵɵtext"](8,"\n  "),o["ɵɵtemplate"](9,YB,10,1,"ng-container",2),o["ɵɵtext"](10,"\n  "),o["ɵɵtemplate"](11,ZB,9,6,"ng-container",2),o["ɵɵtext"](12,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n"),o["ɵɵtemplate"](14,JB,0,0,"ng-template",null,3,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](16,"\n"),o["ɵɵtemplate"](17,XB,0,0,"ng-template",null,4,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](19,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"vault")),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",t.ciphers.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loaded))},directives:[B.NgIf,B.NgForOf,qa,Tn,Oi,pe],pipes:[M.C],encapsulation:2}),function(e){e[e.Invited=0]="Invited",e[e.Accepted=1]="Accepted",e[e.Confirmed=2]="Confirmed",e[e.RecoveryInitiated=3]="RecoveryInitiated",e[e.RecoveryApproved=4]="RecoveryApproved"}(tM||(tM={})),function(e){e[e.View=0]="View",e[e.Takeover=1]="Takeover"}(nM||(nM={}));class iM{}var rM=n(97715),oM=n(8116),aM=n(96039),sM=n(4181),lM=n(83250);class dM extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.url=this.getResponseProperty("Url"),this.fileName=this.getResponseProperty("FileName"),this.key=this.getResponseProperty("Key"),this.size=this.getResponseProperty("Size"),this.sizeName=this.getResponseProperty("SizeName")}}class cM extends yg.c{constructor(e){super(e),this.password=this.getResponseProperty("Password"),this.lastUsedDate=this.getResponseProperty("LastUsedDate")}}class pM extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.folderId=this.getResponseProperty("FolderId")||null,this.type=this.getResponseProperty("Type"),this.name=this.getResponseProperty("Name"),this.notes=this.getResponseProperty("Notes"),this.favorite=this.getResponseProperty("Favorite")||!1,this.edit=!!this.getResponseProperty("Edit"),null==this.getResponseProperty("ViewPassword")?this.viewPassword=!0:this.viewPassword=this.getResponseProperty("ViewPassword"),this.organizationUseTotp=this.getResponseProperty("OrganizationUseTotp"),this.revisionDate=this.getResponseProperty("RevisionDate"),this.collectionIds=this.getResponseProperty("CollectionIds"),this.deletedDate=this.getResponseProperty("DeletedDate");const t=this.getResponseProperty("Login");null!=t&&(this.login=new sM.I(t));const n=this.getResponseProperty("Card");null!=n&&(this.card=new rM.E(n));const i=this.getResponseProperty("Identity");null!=i&&(this.identity=new aM.x(i));const r=this.getResponseProperty("SecureNote");null!=r&&(this.secureNote=new lM.t(r));const o=this.getResponseProperty("Fields");null!=o&&(this.fields=o.map((e=>new oM.P(e))));const a=this.getResponseProperty("Attachments");null!=a&&(this.attachments=a.map((e=>new dM(e))));const s=this.getResponseProperty("PasswordHistory");null!=s&&(this.passwordHistory=s.map((e=>new cM(e)))),this.reprompt=this.getResponseProperty("Reprompt")||Hr.N.None}}class uM extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.granteeId=this.getResponseProperty("GranteeId"),this.name=this.getResponseProperty("Name"),this.email=this.getResponseProperty("Email"),this.type=this.getResponseProperty("Type"),this.status=this.getResponseProperty("Status"),this.waitTimeDays=this.getResponseProperty("WaitTimeDays"),this.creationDate=this.getResponseProperty("CreationDate")}}class mM extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.grantorId=this.getResponseProperty("GrantorId"),this.name=this.getResponseProperty("Name"),this.email=this.getResponseProperty("Email"),this.type=this.getResponseProperty("Type"),this.status=this.getResponseProperty("Status"),this.waitTimeDays=this.getResponseProperty("WaitTimeDays"),this.creationDate=this.getResponseProperty("CreationDate")}}class hM extends yg.c{constructor(e){super(e),this.keyEncrypted=this.getResponseProperty("KeyEncrypted"),this.kdf=this.getResponseProperty("Kdf"),this.kdfIterations=this.getResponseProperty("KdfIterations")}}class vM extends yg.c{constructor(e){super(e),this.ciphers=[],this.keyEncrypted=this.getResponseProperty("KeyEncrypted");const t=this.getResponseProperty("Ciphers");null!=t&&(this.ciphers=t.map((e=>new pM(e))))}}class gM{}class fM{}var xM=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function yM(e,t){1&e&&o["ɵɵelement"](0,"app-premium-badge")}function SM(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",16),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function bM(e,t){1&e&&(o["ɵɵelementStart"](0,"div",17),o["ɵɵtext"](1,"\n        "),o["ɵɵelement"](2,"i",18),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n        "),o["ɵɵelementStart"](5,"span",19),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n      "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function wM(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"div",31),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"label",32),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵelementStart"](12,"input",33),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).email=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"inviteEmergencyContactDesc")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,5,"email")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.email)}}function IM(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",34),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function CM(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",17),o["ɵɵtext"](1,"\n        "),o["ɵɵtemplate"](2,wM,15,7,"ng-container",6),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"h3"),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementStart"](7,"a",20),o["ɵɵpipe"](8,"i18n"),o["ɵɵtext"](9,"\n            "),o["ɵɵelement"](10,"i",21),o["ɵɵtext"](11,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵelementStart"](14,"div",22),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"input",23),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().type=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"label",24),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementStart"](21,"small"),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵelementStart"](27,"div",22),o["ɵɵtext"](28,"\n          "),o["ɵɵelementStart"](29,"input",25),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().type=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n          "),o["ɵɵelementStart"](31,"label",26),o["ɵɵtext"](32),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementStart"](34,"small"),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n        "),o["ɵɵelementStart"](40,"div",27),o["ɵɵtext"](41,"\n          "),o["ɵɵelementStart"](42,"label",28),o["ɵɵtext"](43),o["ɵɵpipe"](44,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n          "),o["ɵɵelementStart"](46,"select",29),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().waitTime=t})),o["ɵɵtext"](47,"\n            "),o["ɵɵtemplate"](48,IM,2,2,"option",30),o["ɵɵtext"](49,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n          "),o["ɵɵelementStart"](51,"small",16),o["ɵɵtext"](52),o["ɵɵpipe"](53,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.editMode),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](6,17,"userAccess"),"\n          "),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](8,19,"learnMore")),o["ɵɵadvance"](9),o["ɵɵproperty"]("value",e.emergencyAccessType.View)("ngModel",e.type),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](20,21,"view"),"\n            "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,23,"viewDesc")),o["ɵɵadvance"](7),o["ɵɵproperty"]("value",e.emergencyAccessType.Takeover)("ngModel",e.type)("disabled",e.readOnly),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](33,25,"takeover"),"\n            "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](36,27,"takeoverDesc")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](44,29,"waitTime")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.waitTime)("disabled",e.readOnly),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.waitTimes),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](53,31,"waitTimeDesc"))}}function EM(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",35,36),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().delete()})),o["ɵɵpipe"](2,"i18n"),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"i",37),o["ɵɵtext"](5,"\n            "),o["ɵɵelement"](6,"i",38),o["ɵɵpipe"](7,"i18n"),o["ɵɵtext"](8,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1);o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](2,5,"delete")),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](7,7,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}class kM{constructor(e,t,n,i){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.logService=i,this.onSaved=new o.EventEmitter,this.onDeleted=new o.EventEmitter,this.loading=!0,this.readOnly=!1,this.editMode=!1,this.type=nM.View,this.emergencyAccessType=nM}ngOnInit(){return xM(this,void 0,void 0,(function*(){if(this.editMode=this.loading=null!=this.emergencyAccessId,this.waitTimes=[{name:this.i18nService.t("oneDay"),value:1},{name:this.i18nService.t("days","2"),value:2},{name:this.i18nService.t("days","7"),value:7},{name:this.i18nService.t("days","14"),value:14},{name:this.i18nService.t("days","30"),value:30},{name:this.i18nService.t("days","90"),value:90}],this.editMode){this.editMode=!0,this.title=this.i18nService.t("editEmergencyContact");try{const e=yield this.apiService.getEmergencyAccess(this.emergencyAccessId);this.type=e.type,this.waitTime=e.waitTimeDays}catch(e){this.logService.error(e)}}else this.title=this.i18nService.t("inviteEmergencyContact"),this.waitTime=this.waitTimes[2].value;this.loading=!1}))}submit(){return xM(this,void 0,void 0,(function*(){try{if(this.editMode){const e=new fM;e.type=this.type,e.waitTimeDays=this.waitTime,this.formPromise=this.apiService.putEmergencyAccess(this.emergencyAccessId,e)}else{const e=new gM;e.email=this.email.trim(),e.type=this.type,e.waitTimeDays=this.waitTime,this.formPromise=this.apiService.postEmergencyAccessInvite(e)}yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t(this.editMode?"editedUserId":"invitedUsers",this.name)),this.onSaved.emit()}catch(e){this.logService.error(e)}}))}delete(){return xM(this,void 0,void 0,(function*(){this.onDeleted.emit()}))}}kM.ɵfac=function(e){return new(e||kM)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$))},kM.ɵcmp=o["ɵɵdefineComponent"]({type:kM,selectors:[["emergency-access-add-edit"]],inputs:{name:"name",emergencyAccessId:"emergencyAccessId"},outputs:{onSaved:"onSaved",onDeleted:"onDeleted"},decls:47,vars:18,consts:[["role","dialog","aria-modal","true","aria-labelledby","userAddEditTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","userAddEditTitle",1,"modal-title"],[4,"ngIf"],["class","text-muted",4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[3,"loading","disabled"],["bitButton","","buttonType","secondary","type","button","data-dismiss","modal"],[1,"ml-auto"],["bitButton","","buttonType","danger","type","button",3,"appA11yTitle","disabled","click",4,"ngIf"],[1,"text-muted"],[1,"modal-body"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/emergency-access/#user-access",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],[1,"form-check","mt-2","form-check-block"],["type","radio","name","userType","id","emergencyTypeView",1,"form-check-input",3,"value","ngModel","ngModelChange"],["for","emergencyTypeView",1,"form-check-label"],["type","radio","name","userType","id","emergencyTypeTakeover",1,"form-check-input",3,"value","ngModel","disabled","ngModelChange"],["for","emergencyTypeTakeover",1,"form-check-label"],[1,"form-group","col-6","mt-4"],["for","waitTime"],["id","waitTime","name","waitTime",1,"form-control",3,"ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-group","mb-4"],["for","email"],["id","email","type","text","name","Email","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue"],["bitButton","","buttonType","danger","type","button",3,"appA11yTitle","disabled","click"],["deleteBtn",""],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-lg","bwi-fw",3,"hidden","title"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10,"\n          "),o["ɵɵtemplate"](11,yM,1,0,"app-premium-badge",6),o["ɵɵtext"](12),o["ɵɵtemplate"](13,SM,2,1,"small",7),o["ɵɵtext"](14,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementStart"](16,"button",8),o["ɵɵpipe"](17,"i18n"),o["ɵɵtext"](18,"\n          "),o["ɵɵelementStart"](19,"span",9),o["ɵɵtext"](20,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵtemplate"](24,bM,9,6,"div",10),o["ɵɵtext"](25,"\n      "),o["ɵɵtemplate"](26,CM,56,33,"div",10),o["ɵɵtext"](27,"\n      "),o["ɵɵelementStart"](28,"div",11),o["ɵɵtext"](29,"\n        "),o["ɵɵelementStart"](30,"bit-submit-button",12),o["ɵɵtext"](31),o["ɵɵpipe"](32,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n        "),o["ɵɵelementStart"](34,"button",13),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n        "),o["ɵɵelementStart"](38,"div",14),o["ɵɵtext"](39,"\n          "),o["ɵɵtemplate"](40,EM,9,9,"button",15),o["ɵɵtext"](41,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngIf",t.readOnly),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",t.title,"\n          "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",t.name),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](17,12,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading),o["ɵɵadvance"](4),o["ɵɵproperty"]("loading",t.loading||e.loading)("disabled",t.readOnly),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](32,14,"save"),"\n        "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](36,16,"cancel"),"\n        "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",t.editMode)}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,pe,at,et.H,Oo,d.RadioControlValueAccessor,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,d.SelectControlValueAccessor,B.NgForOf,d.RequiredValidator,d.NgSelectOption,d["ɵNgSelectMultipleOption"]],pipes:[M.C],encapsulation:2});var PM=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function AM(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",18),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}class OM{constructor(e,t,n,i){this.apiService=e,this.cryptoService=t,this.stateService=n,this.logService=i,this.onConfirmed=new o.EventEmitter,this.dontAskAgain=!1,this.loading=!0}ngOnInit(){return PM(this,void 0,void 0,(function*(){try{const e=yield this.apiService.getUserPublicKey(this.userId);if(null!=e){const t=N.c.fromB64ToArray(e.publicKey),n=yield this.cryptoService.getFingerprint(this.userId,t.buffer);null!=n&&(this.fingerprint=n.join("-"))}}catch(e){this.logService.error(e)}this.loading=!1}))}submit(){return PM(this,void 0,void 0,(function*(){if(!this.loading){this.dontAskAgain&&(yield this.stateService.setAutoConfirmFingerprints(!0));try{this.onConfirmed.emit()}catch(e){this.logService.error(e)}}}))}}OM.ɵfac=function(e){return new(e||OM)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](L.$))},OM.ɵcmp=o["ɵɵdefineComponent"]({type:OM,selectors:[["emergency-access-confirm"]],inputs:{name:"name",userId:"userId",emergencyAccessId:"emergencyAccessId",formPromise:"formPromise"},outputs:{onConfirmed:"onConfirmed"},decls:69,vars:29,consts:[["role","dialog","aria-modal","true","aria-labelledby","confirmUserTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","confirmUserTitle",1,"modal-title"],["class","text-muted",4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["href","https://bitwarden.com/help/fingerprint-phrase/","target","_blank","rel","noopener"],[1,"form-check"],["type","checkbox","id","dontAskAgain","name","DontAskAgain",1,"form-check-input",3,"ngModel","ngModelChange"],["for","dontAskAgain",1,"form-check-label"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"text-muted"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵtemplate"](12,AM,2,1,"small",6),o["ɵɵtext"](13,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"button",7),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"span",8),o["ɵɵtext"](19,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementStart"](23,"div",9),o["ɵɵtext"](24,"\n        "),o["ɵɵelementStart"](25,"p"),o["ɵɵtext"](26),o["ɵɵpipe"](27,"i18n"),o["ɵɵelementStart"](28,"a",10),o["ɵɵtext"](29),o["ɵɵpipe"](30,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n        "),o["ɵɵelementStart"](33,"p"),o["ɵɵtext"](34,"\n          "),o["ɵɵelementStart"](35,"code"),o["ɵɵtext"](36),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n        "),o["ɵɵelementStart"](39,"div",11),o["ɵɵtext"](40,"\n          "),o["ɵɵelementStart"](41,"input",12),o["ɵɵlistener"]("ngModelChange",(function(e){return t.dontAskAgain=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n          "),o["ɵɵelementStart"](43,"label",13),o["ɵɵtext"](44),o["ɵɵpipe"](45,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n      "),o["ɵɵelementStart"](49,"div",14),o["ɵɵtext"](50,"\n        "),o["ɵɵelementStart"](51,"button",15),o["ɵɵtext"](52,"\n          "),o["ɵɵelement"](53,"i",16),o["ɵɵpipe"](54,"i18n"),o["ɵɵtext"](55,"\n          "),o["ɵɵelementStart"](56,"span"),o["ɵɵtext"](57),o["ɵɵpipe"](58,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n        "),o["ɵɵelementStart"](61,"button",17),o["ɵɵtext"](62),o["ɵɵpipe"](63,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](68,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,13,"confirmUser"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.name),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](16,15,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](27,17,"fingerprintEnsureIntegrityVerify"),"\n          "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](30,19,"learnMore"),""),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](t.fingerprint),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngModel",t.dontAskAgain),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](45,21,"dontAskFingerprintAgain"),"\n          "),o["ɵɵadvance"](7),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](54,23,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](58,25,"confirm")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](63,27,"cancel"),"\n        ")}},directives:[d["ɵNgNoValidate"],d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,pe,d.CheckboxControlValueAccessor,d.NgControlStatus,d.NgModel],pipes:[M.C],encapsulation:2});class TM{}var BM=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function MM(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",24),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function DM(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",25),o["ɵɵtext"](1,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("enforcedPolicyOptions",e.enforcedPolicyOptions)}}class FM extends qt{constructor(e,t,n,i,r,a,s,l,d){super(e,t,n,r,a,s,i),this.apiService=l,this.logService=d,this.onDone=new o.EventEmitter}ngOnInit(){return BM(this,void 0,void 0,(function*(){const e=yield this.apiService.getEmergencyGrantorPolicies(this.emergencyAccessId);if(null!=e.data&&e.data.length>0){const t=e.data.map((e=>new $e(new Ee(e))));this.enforcedPolicyOptions=yield this.policyService.getMasterPasswordPolicyOptions(t)}}))}submit(){return BM(this,void 0,void 0,(function*(){if(!(yield this.strongPassword()))return;const e=yield this.apiService.postEmergencyAccessTakeover(this.emergencyAccessId),t=yield this.cryptoService.rsaDecrypt(e.keyEncrypted),n=new mg.N(t);if(null==n)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("unexpectedError"));const i=yield this.cryptoService.makeKey(this.masterPassword,this.email,e.kdf,e.kdfIterations),r=yield this.cryptoService.hashPassword(this.masterPassword,i),o=yield this.cryptoService.remakeEncKey(i,n),a=new TM;a.newMasterPasswordHash=r,a.key=o[1].encryptedString,this.apiService.postEmergencyAccessPassword(this.emergencyAccessId,a);try{this.onDone.emit()}catch(s){this.logService.error(s)}}))}}FM.ɵfac=function(e){return new(e||FM)(o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](L.$))},FM.ɵcmp=o["ɵɵdefineComponent"]({type:FM,selectors:[["emergency-access-takeover"]],inputs:{emergencyAccessId:"emergencyAccessId",name:"name",email:"email",kdf:"kdf",kdfIterations:"kdfIterations"},outputs:{onDone:"onDone"},features:[o["ɵɵInheritDefinitionFeature"]],decls:82,vars:32,consts:[["role","dialog","aria-modal","true","aria-labelledby","userAddEditTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","userAddEditTitle",1,"modal-title"],["class","text-muted",4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","warning"],["type","info",3,"enforcedPolicyOptions",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"form-group"],["for","masterPassword"],["id","masterPassword","type","password","name","NewMasterPasswordHash","required","","appInputVerbatim","","autocomplete","new-password",1,"form-control","mb-1",3,"ngModel","ngModelChange","input"],[3,"score","showText"],["for","masterPasswordRetype"],["id","masterPasswordRetype","type","password","name","MasterPasswordRetype","required","","appInputVerbatim","","autocomplete","new-password",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"text-muted"],["type","info",3,"enforcedPolicyOptions"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵtemplate"](12,MM,2,1,"small",6),o["ɵɵtext"](13,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"button",7),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"span",8),o["ɵɵtext"](19,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementStart"](23,"div",9),o["ɵɵtext"](24,"\n        "),o["ɵɵelementStart"](25,"app-callout",10),o["ɵɵtext"](26),o["ɵɵpipe"](27,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n        "),o["ɵɵtemplate"](29,DM,2,1,"app-callout",11),o["ɵɵtext"](30,"\n        "),o["ɵɵelementStart"](31,"div",12),o["ɵɵtext"](32,"\n          "),o["ɵɵelementStart"](33,"div",13),o["ɵɵtext"](34,"\n            "),o["ɵɵelementStart"](35,"div",14),o["ɵɵtext"](36,"\n              "),o["ɵɵelementStart"](37,"label",15),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n              "),o["ɵɵelementStart"](41,"input",16),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPassword=e}))("input",(function(){return t.updatePasswordStrength()})),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n              "),o["ɵɵelementStart"](43,"app-password-strength",17),o["ɵɵtext"](44,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n          "),o["ɵɵelementStart"](48,"div",13),o["ɵɵtext"](49,"\n            "),o["ɵɵelementStart"](50,"div",14),o["ɵɵtext"](51,"\n              "),o["ɵɵelementStart"](52,"label",18),o["ɵɵtext"](53),o["ɵɵpipe"](54,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n              "),o["ɵɵelementStart"](56,"input",19),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPasswordRetype=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](57,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n      "),o["ɵɵelementStart"](62,"div",20),o["ɵɵtext"](63,"\n        "),o["ɵɵelementStart"](64,"button",21),o["ɵɵtext"](65,"\n          "),o["ɵɵelement"](66,"i",22),o["ɵɵpipe"](67,"i18n"),o["ɵɵtext"](68,"\n          "),o["ɵɵelementStart"](69,"span"),o["ɵɵtext"](70),o["ɵɵpipe"](71,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](73,"\n        "),o["ɵɵelementStart"](74,"button",23),o["ɵɵtext"](75),o["ɵɵpipe"](76,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](77,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](78,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](79,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](80,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](81,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,16,"takeover"),"\n          "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.name),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](16,18,"close")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](27,20,"loggedOutWarning")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.enforcedPolicyOptions),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](39,22,"newMasterPass")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.masterPassword),o["ɵɵadvance"](2),o["ɵɵproperty"]("score",t.masterPasswordScore)("showText",!0),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](54,24,"confirmNewMasterPass")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.masterPasswordRetype),o["ɵɵadvance"](8),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](67,26,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](71,28,"save")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](76,30,"cancel"),"\n        ")}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,pe,Pe.O,d.DefaultValueAccessor,d.RequiredValidator,J.b,d.NgControlStatus,d.NgModel,rt],pipes:[M.C],encapsulation:2});var RM=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const UM=["addEdit"],zM=["takeoverTemplate"],NM=["confirmTemplate"];function VM(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"b"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](4,2,"warning"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](6,4,"emergencyAccessOwnerWarning"),"\n"))}function HM(e,t){1&e&&(o["ɵɵelementStart"](0,"span",28),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"invited")))}function jM(e,t){1&e&&(o["ɵɵelementStart"](0,"span",29),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"accepted")))}function LM(e,t){1&e&&(o["ɵɵelementStart"](0,"span",29),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"emergencyAccessRecoveryInitiated")))}function KM(e,t){1&e&&(o["ɵɵelementStart"](0,"span",30),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"emergencyAccessRecoveryApproved")))}function GM(e,t){1&e&&(o["ɵɵelementStart"](0,"span",30),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"view")))}function qM(e,t){1&e&&(o["ɵɵelementStart"](0,"span",30),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"takeover")))}function _M(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",31),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function $M(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",26),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).reinvite(t)})),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",32),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,1,"resendInvitation"),"\n          "))}function WM(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",26),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).confirm(t)})),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",33),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,1,"confirm"),"\n          "))}function QM(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",26),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).approve(t)})),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",33),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,1,"approve"),"\n          "))}function YM(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",26),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).reject(t)})),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",27),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,1,"reject"),"\n          "))}function ZM(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"td",14),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"app-avatar",15),o["ɵɵpipe"](5,"userName"),o["ɵɵtext"](6,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n      "),o["ɵɵelementStart"](9,"td"),o["ɵɵtext"](10,"\n        "),o["ɵɵelementStart"](11,"a",16),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).edit(t)})),o["ɵɵtext"](12),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵtemplate"](14,HM,3,3,"span",17),o["ɵɵtext"](15,"\n        "),o["ɵɵtemplate"](16,jM,3,3,"span",18),o["ɵɵtext"](17,"\n        "),o["ɵɵtemplate"](18,LM,3,3,"span",18),o["ɵɵtext"](19,"\n        "),o["ɵɵtemplate"](20,KM,3,3,"span",19),o["ɵɵtext"](21,"\n\n        "),o["ɵɵtemplate"](22,GM,3,3,"span",19),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,qM,3,3,"span",19),o["ɵɵtext"](25,"\n\n        "),o["ɵɵtemplate"](26,_M,2,1,"small",20),o["ɵɵtext"](27,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n      "),o["ɵɵelementStart"](29,"td",21),o["ɵɵtext"](30,"\n        "),o["ɵɵelementStart"](31,"button",22),o["ɵɵpipe"](32,"i18n"),o["ɵɵtext"](33,"\n          "),o["ɵɵelement"](34,"i",23),o["ɵɵtext"](35,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n        "),o["ɵɵelementStart"](37,"bit-menu",null,24),o["ɵɵtext"](39,"\n          "),o["ɵɵtemplate"](40,$M,5,3,"button",25),o["ɵɵtext"](41,"\n          "),o["ɵɵtemplate"](42,WM,5,3,"button",25),o["ɵɵtext"](43,"\n          "),o["ɵɵtemplate"](44,QM,5,3,"button",25),o["ɵɵtext"](45,"\n          "),o["ɵɵtemplate"](46,YM,5,3,"button",25),o["ɵɵtext"](47,"\n          "),o["ɵɵelementStart"](48,"button",26),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).remove(t)})),o["ɵɵtext"](49,"\n            "),o["ɵɵelement"](50,"i",27),o["ɵɵtext"](51),o["ɵɵpipe"](52,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵreference"](38),i=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](5,19,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](e.email),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===i.emergencyAccessStatusType.Invited),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===i.emergencyAccessStatusType.Accepted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===i.emergencyAccessStatusType.RecoveryInitiated),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===i.emergencyAccessStatusType.RecoveryApproved),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===i.emergencyAccessType.View),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===i.emergencyAccessType.Takeover),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.name),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](32,21,"options")),o["ɵɵproperty"]("bitMenuTriggerFor",n),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngIf",e.status===i.emergencyAccessStatusType.Invited),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===i.emergencyAccessStatusType.Accepted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===i.emergencyAccessStatusType.RecoveryInitiated),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===i.emergencyAccessStatusType.RecoveryInitiated||e.status===i.emergencyAccessStatusType.RecoveryApproved),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](52,23,"remove"),"\n          ")}}function JM(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",12),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n    "),o["ɵɵtemplate"](4,ZM,56,25,"tr",13),o["ɵɵtext"](5,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.trustedContacts)}}function XM(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"noTrustedContacts")))}function eD(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",34),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"span",35),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function tD(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,XM,3,3,"p",2),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,eD,9,6,"ng-container",2),o["ɵɵtext"](5,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.loaded),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.loaded)}}function nD(e,t){1&e&&(o["ɵɵelementStart"](0,"span",30),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"invited")))}function iD(e,t){1&e&&(o["ɵɵelementStart"](0,"span",29),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"accepted")))}function rD(e,t){1&e&&(o["ɵɵelementStart"](0,"span",29),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"emergencyAccessRecoveryInitiated")))}function oD(e,t){1&e&&(o["ɵɵelementStart"](0,"span",39),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"emergencyAccessRecoveryApproved")))}function aD(e,t){1&e&&(o["ɵɵelementStart"](0,"span",30),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"view")))}function sD(e,t){1&e&&(o["ɵɵelementStart"](0,"span",30),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"takeover")))}function lD(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",31),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function dD(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",26),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).requestAccess(t)})),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",32),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,1,"requestAccess"),"\n          "))}function cD(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",26),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](2).takeover(t)})),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",40),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,1,"takeover"),"\n          "))}function pD(e,t){if(1&e&&(o["ɵɵelementStart"](0,"button",41),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",42),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵproperty"]("routerLink",e.id),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,2,"view"),"\n          ")}}function uD(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"td",14),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"app-avatar",15),o["ɵɵpipe"](5,"userName"),o["ɵɵtext"](6,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n      "),o["ɵɵelementStart"](9,"td"),o["ɵɵtext"](10,"\n        "),o["ɵɵelementStart"](11,"span"),o["ɵɵtext"](12),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵtemplate"](14,nD,3,3,"span",19),o["ɵɵtext"](15,"\n        "),o["ɵɵtemplate"](16,iD,3,3,"span",18),o["ɵɵtext"](17,"\n        "),o["ɵɵtemplate"](18,rD,3,3,"span",18),o["ɵɵtext"](19,"\n        "),o["ɵɵtemplate"](20,oD,3,3,"span",36),o["ɵɵtext"](21,"\n\n        "),o["ɵɵtemplate"](22,aD,3,3,"span",19),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,sD,3,3,"span",19),o["ɵɵtext"](25,"\n\n        "),o["ɵɵtemplate"](26,lD,2,1,"small",20),o["ɵɵtext"](27,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n      "),o["ɵɵelementStart"](29,"td",21),o["ɵɵtext"](30,"\n        "),o["ɵɵelementStart"](31,"button",22),o["ɵɵpipe"](32,"i18n"),o["ɵɵtext"](33,"\n          "),o["ɵɵelement"](34,"i",23),o["ɵɵtext"](35,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n        "),o["ɵɵelementStart"](37,"bit-menu",null,37),o["ɵɵtext"](39,"\n          "),o["ɵɵtemplate"](40,dD,5,3,"button",25),o["ɵɵtext"](41,"\n          "),o["ɵɵtemplate"](42,cD,5,3,"button",25),o["ɵɵtext"](43,"\n          "),o["ɵɵtemplate"](44,pD,5,4,"button",38),o["ɵɵtext"](45,"\n          "),o["ɵɵelementStart"](46,"button",26),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).remove(t)})),o["ɵɵtext"](47,"\n            "),o["ɵɵelement"](48,"i",27),o["ɵɵtext"](49),o["ɵɵpipe"](50,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵreference"](38),i=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](5,18,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](e.email),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===i.emergencyAccessStatusType.Invited),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===i.emergencyAccessStatusType.Accepted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===i.emergencyAccessStatusType.RecoveryInitiated),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===i.emergencyAccessStatusType.RecoveryApproved),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===i.emergencyAccessType.View),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===i.emergencyAccessType.Takeover),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.name),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](32,20,"options")),o["ɵɵproperty"]("bitMenuTriggerFor",n),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngIf",e.status===i.emergencyAccessStatusType.Confirmed),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===i.emergencyAccessStatusType.RecoveryApproved&&e.type===i.emergencyAccessType.Takeover),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===i.emergencyAccessStatusType.RecoveryApproved&&e.type===i.emergencyAccessType.View),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](50,22,"remove"),"\n          ")}}function mD(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",12),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n    "),o["ɵɵtemplate"](4,uD,54,24,"tr",13),o["ɵɵtext"](5,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.grantedContacts)}}function hD(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"noGrantedAccess")))}function vD(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",34),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"span",35),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function gD(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,hD,3,3,"p",2),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,vD,9,6,"ng-container",2),o["ɵɵtext"](5,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.loaded),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.loaded)}}function fD(e,t){}function xD(e,t){}function yD(e,t){}class SD{constructor(e,t,n,i,r,o,a,s,l,d){this.apiService=e,this.i18nService=t,this.modalService=n,this.platformUtilsService=i,this.cryptoService=r,this.messagingService=o,this.userNamePipe=a,this.logService=s,this.stateService=l,this.organizationService=d,this.loaded=!1,this.emergencyAccessType=nM,this.emergencyAccessStatusType=tM}ngOnInit(){return RM(this,void 0,void 0,(function*(){this.canAccessPremium=yield this.stateService.getCanAccessPremium();const e=yield this.organizationService.getAll();this.isOrganizationOwner=e.some((e=>e.isOwner)),this.load()}))}load(){return RM(this,void 0,void 0,(function*(){this.trustedContacts=(yield this.apiService.getEmergencyAccessTrusted()).data,this.grantedContacts=(yield this.apiService.getEmergencyAccessGranted()).data,this.loaded=!0}))}premiumRequired(){return RM(this,void 0,void 0,(function*(){this.canAccessPremium||this.messagingService.send("premiumRequired")}))}edit(e){return RM(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(kM,this.addEditModalRef,(n=>{n.name=this.userNamePipe.transform(e),n.emergencyAccessId=null==e?void 0:e.id,n.readOnly=!this.canAccessPremium,n.onSaved.subscribe((()=>{t.close(),this.load()})),n.onDeleted.subscribe((()=>{t.close(),this.remove(e)}))}))}))}invite(){this.edit(null)}reinvite(e){return RM(this,void 0,void 0,(function*(){null==this.actionPromise&&(this.actionPromise=this.apiService.postEmergencyAccessReinvite(e.id),yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("hasBeenReinvited",e.email)),this.actionPromise=null)}))}confirm(e){return RM(this,void 0,void 0,(function*(){function t(){e.status=tM.Confirmed}if(null!=this.actionPromise)return;const n=yield this.stateService.getAutoConfirmFingerPrints();if(null!=n&&n)this.actionPromise=this.doConfirmation(e),yield this.actionPromise,t(),this.platformUtilsService.showToast("success",null,this.i18nService.t("hasBeenConfirmed",this.userNamePipe.transform(e))),this.actionPromise=null;else{const[n]=yield this.modalService.openViewRef(OM,this.confirmModalRef,(i=>{i.name=this.userNamePipe.transform(e),i.emergencyAccessId=e.id,i.userId=null==e?void 0:e.granteeId,i.onConfirmed.subscribe((()=>RM(this,void 0,void 0,(function*(){n.close(),i.formPromise=this.doConfirmation(e),yield i.formPromise,t(),this.platformUtilsService.showToast("success",null,this.i18nService.t("hasBeenConfirmed",this.userNamePipe.transform(e)))}))))}))}}))}remove(e){return RM(this,void 0,void 0,(function*(){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("removeUserConfirmation"),this.userNamePipe.transform(e),this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{yield this.apiService.deleteEmergencyAccess(e.id),this.platformUtilsService.showToast("success",null,this.i18nService.t("removedUserId",this.userNamePipe.transform(e))),e instanceof uM?this.removeGrantee(e):this.removeGrantor(e)}catch(t){this.logService.error(t)}}))}requestAccess(e){return RM(this,void 0,void 0,(function*(){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("requestAccessConfirmation",e.waitTimeDays.toString()),this.userNamePipe.transform(e),this.i18nService.t("requestAccess"),this.i18nService.t("no"),"warning")))return!1;yield this.apiService.postEmergencyAccessInitiate(e.id),e.status=tM.RecoveryInitiated,this.platformUtilsService.showToast("success",null,this.i18nService.t("requestSent",this.userNamePipe.transform(e)))}))}approve(e){return RM(this,void 0,void 0,(function*(){const t=this.i18nService.t(e.type===nM.View?"view":"takeover");if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("approveAccessConfirmation",this.userNamePipe.transform(e),t),this.userNamePipe.transform(e),this.i18nService.t("approve"),this.i18nService.t("no"),"warning")))return!1;yield this.apiService.postEmergencyAccessApprove(e.id),e.status=tM.RecoveryApproved,this.platformUtilsService.showToast("success",null,this.i18nService.t("emergencyApproved",this.userNamePipe.transform(e)))}))}reject(e){return RM(this,void 0,void 0,(function*(){yield this.apiService.postEmergencyAccessReject(e.id),e.status=tM.Confirmed,this.platformUtilsService.showToast("success",null,this.i18nService.t("emergencyRejected",this.userNamePipe.transform(e)))}))}takeover(e){return RM(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(FM,this.takeoverModalRef,(n=>{n.name=this.userNamePipe.transform(e),n.email=e.email,n.emergencyAccessId=null!=e?e.id:null,n.onDone.subscribe((()=>{t.close(),this.platformUtilsService.showToast("success",null,this.i18nService.t("passwordResetFor",this.userNamePipe.transform(e)))}))}))}))}removeGrantee(e){const t=this.trustedContacts.indexOf(e);t>-1&&this.trustedContacts.splice(t,1)}removeGrantor(e){const t=this.grantedContacts.indexOf(e);t>-1&&this.grantedContacts.splice(t,1)}doConfirmation(e){return RM(this,void 0,void 0,(function*(){const t=yield this.cryptoService.getEncKey(),n=yield this.apiService.getUserPublicKey(e.granteeId),i=N.c.fromB64ToArray(n.publicKey);try{this.logService.debug("User's fingerprint: "+(yield this.cryptoService.getFingerprint(e.granteeId,i.buffer)).join("-"))}catch(a){}const r=yield this.cryptoService.rsaEncrypt(t.key,i.buffer),o=new iM;o.key=r.encryptedString,yield this.apiService.postEmergencyAccessConfirm(e.id,o)}))}}SD.ɵfac=function(e){return new(e||SD)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](Pc.z),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](Ii.M))},SD.ɵcmp=o["ɵɵdefineComponent"]({type:SD,selectors:[["emergency-access"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](UM,7,o.ViewContainerRef),o["ɵɵviewQuery"](zM,7,o.ViewContainerRef),o["ɵɵviewQuery"](NM,7,o.ViewContainerRef)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.addEditModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.takeoverModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.confirmModalRef=e.first)}},decls:59,vars:24,consts:[[1,"page-header"],["href","https://bitwarden.com/help/emergency-access/","target","_blank","rel","noopener"],[4,"ngIf"],[1,"page-header","d-flex"],[1,"ml-auto","d-flex"],["type","button",1,"btn","btn-sm","btn-outline-primary","ml-3",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],["class","table table-hover table-list mb-0",4,"ngIf"],[1,"page-header","spaced-header"],["addEdit",""],["takeoverTemplate",""],["confirmTemplate",""],[1,"table","table-hover","table-list","mb-0"],[4,"ngFor","ngForOf"],["width","30"],["size","25",3,"data","email","circle","fontSize"],["href","#","appStopClick","",3,"click"],["bitBadge","","badgeType","secondary",4,"ngIf"],["bitBadge","","badgeType","warning",4,"ngIf"],["bitBadge","",4,"ngIf"],["class","text-muted d-block",4,"ngIf"],[1,"table-list-options"],["type","button",1,"tw-border-none","tw-bg-transparent","tw-text-main",3,"bitMenuTriggerFor","appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-ellipsis-v","bwi-lg"],["trustedContactOptions",""],["bitMenuItem","",3,"click",4,"ngIf"],["bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-close"],["bitBadge","","badgeType","secondary"],["bitBadge","","badgeType","warning"],["bitBadge",""],[1,"text-muted","d-block"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-envelope"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-check"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["bitBadge","","badgeType","success",4,"ngIf"],["grantedContactOptions",""],["bitMenuItem","",3,"routerLink",4,"ngIf"],["bitBadge","","badgeType","success"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-key"],["bitMenuItem","",3,"routerLink"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-eye"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelementStart"](7,"p"),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementStart"](10,"a",1),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n\n"),o["ɵɵtemplate"](15,VM,7,6,"p",2),o["ɵɵtext"](16,"\n\n"),o["ɵɵelementStart"](17,"div",3),o["ɵɵtext"](18,"\n  "),o["ɵɵelementStart"](19,"h2"),o["ɵɵtext"](20),o["ɵɵpipe"](21,"i18n"),o["ɵɵelement"](22,"app-premium-badge"),o["ɵɵtext"](23,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n  "),o["ɵɵelementStart"](25,"div",4),o["ɵɵtext"](26,"\n    "),o["ɵɵelementStart"](27,"button",5),o["ɵɵlistener"]("click",(function(){return t.invite()})),o["ɵɵtext"](28,"\n      "),o["ɵɵelement"](29,"i",6),o["ɵɵtext"](30),o["ɵɵpipe"](31,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n\n"),o["ɵɵtemplate"](35,JM,7,1,"table",7),o["ɵɵtext"](36,"\n\n"),o["ɵɵtemplate"](37,tD,6,2,"ng-container",2),o["ɵɵtext"](38,"\n\n"),o["ɵɵelementStart"](39,"div",8),o["ɵɵtext"](40,"\n  "),o["ɵɵelementStart"](41,"h2"),o["ɵɵtext"](42),o["ɵɵpipe"](43,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n\n"),o["ɵɵtemplate"](46,mD,7,1,"table",7),o["ɵɵtext"](47,"\n\n"),o["ɵɵtemplate"](48,gD,6,2,"ng-container",2),o["ɵɵtext"](49,"\n\n"),o["ɵɵtemplate"](50,fD,0,0,"ng-template",null,9,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](52,"\n"),o["ɵɵtemplate"](53,xD,0,0,"ng-template",null,10,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](55,"\n"),o["ɵɵtemplate"](56,yD,0,0,"ng-template",null,11,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](58,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,12,"emergencyAccess")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](9,14,"emergencyAccessDesc"),"\n  "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](12,16,"learnMore"),".\n  "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.isOrganizationOwner),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](21,18,"trustedEmergencyContacts"),"\n    "),o["ɵɵadvance"](7),o["ɵɵproperty"]("disabled",!t.canAccessPremium),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](31,20,"addEmergencyContact"),"\n    "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",t.trustedContacts&&t.trustedContacts.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.trustedContacts||!t.trustedContacts.length),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](43,22,"designatedEmergencyContacts")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.grantedContacts&&t.grantedContacts.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.grantedContacts||!t.grantedContacts.length))},directives:[B.NgIf,Oo,B.NgForOf,Di,Tn,Ei.t,pe,ki.M,Ai.e,Po.l,p.RouterLink],pipes:[M.C,Pc.z],encapsulation:2});var bD=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class wD{constructor(e,t,n){this.formBuilder=e,this.policyService=t,this.i18nService=n,this.form=this.formBuilder.group({vaultTimeout:[null],custom:this.formBuilder.group({hours:[null],minutes:[null]})})}get showCustom(){return this.form.get("vaultTimeout").value===wD.CUSTOM_VALUE}get exceedsMinimumTimout(){return!this.showCustom||this.customTimeInMinutes()>wD.MIN_CUSTOM_MINUTES}ngOnInit(){return bD(this,void 0,void 0,(function*(){if(yield this.policyService.policyAppliesToUser(Kr.M.MaximumVaultTimeout)){const e=yield this.policyService.getAll(Kr.M.MaximumVaultTimeout);this.vaultTimeoutPolicy=e[0],this.vaultTimeoutPolicyHours=Math.floor(this.vaultTimeoutPolicy.data.minutes/60),this.vaultTimeoutPolicyMinutes=this.vaultTimeoutPolicy.data.minutes%60,this.vaultTimeouts=this.vaultTimeouts.filter((e=>e.value<=this.vaultTimeoutPolicy.data.minutes&&(e.value>0||e.value===wD.CUSTOM_VALUE)&&null!=e.value)),this.validatorChange()}this.form.valueChanges.subscribe((e=>bD(this,void 0,void 0,(function*(){this.onChange(this.getVaultTimeout(e))})))),this.form.get("vaultTimeout").valueChanges.subscribe((e=>{if(e!==wD.CUSTOM_VALUE)return;const t=Math.max(this.form.value.vaultTimeout,0);this.form.patchValue({custom:{hours:Math.floor(t/60),minutes:t%60}})}))}))}ngOnChanges(){this.vaultTimeouts.push({name:this.i18nService.t("custom"),value:wD.CUSTOM_VALUE})}getVaultTimeout(e){return e.vaultTimeout!==wD.CUSTOM_VALUE?e.vaultTimeout:60*e.custom.hours+e.custom.minutes}writeValue(e){null!=e&&(this.vaultTimeouts.every((t=>t.value!==e))?this.form.setValue({vaultTimeout:wD.CUSTOM_VALUE,custom:{hours:Math.floor(e/60),minutes:e%60}}):this.form.patchValue({vaultTimeout:e}))}registerOnChange(e){this.onChange=e}registerOnTouched(e){}setDisabledState(e){}validate(e){var t,n;return this.vaultTimeoutPolicy&&(null===(n=null===(t=this.vaultTimeoutPolicy)||void 0===t?void 0:t.data)||void 0===n?void 0:n.minutes)<e.value?{policyError:!0}:this.exceedsMinimumTimout?null:{minTimeoutError:!0}}registerOnValidatorChange(e){this.validatorChange=e}customTimeInMinutes(){var e,t;return 60*(null===(e=this.form.get("custom.hours"))||void 0===e?void 0:e.value)+(null===(t=this.form.get("custom.minutes"))||void 0===t?void 0:t.value)}}function ID(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",8),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind3"](2,1,"vaultTimeoutPolicyInEffect",e.vaultTimeoutPolicyHours,e.vaultTimeoutPolicyMinutes),"\n")}}function CD(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",9),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function ED(e,t){1&e&&(o["ɵɵelementStart"](0,"small",17),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",18),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"](" ",o["ɵɵpipeBind1"](4,1,"vaultCustomTimeoutMinimum"),"\n    "))}function kD(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",10),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"label",11),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"div",12),o["ɵɵtext"](7,"\n      "),o["ɵɵelementStart"](8,"div",13),o["ɵɵtext"](9,"\n        "),o["ɵɵelement"](10,"input",14),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"small"),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n      "),o["ɵɵelementStart"](17,"div",13),o["ɵɵtext"](18,"\n        "),o["ɵɵelement"](19,"input",15),o["ɵɵtext"](20,"\n        "),o["ɵɵelementStart"](21,"small"),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n\n    "),o["ɵɵtemplate"](27,ED,5,3,"small",16),o["ɵɵtext"](28,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,4,"customVaultTimeout")),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,6,"hours")),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,8,"minutes")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!e.exceedsMinimumTimout)}}wD.CUSTOM_VALUE=-100,wD.MIN_CUSTOM_MINUTES=0,wD.ɵfac=function(e){return new(e||wD)(o["ɵɵdirectiveInject"](d.FormBuilder),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](k.D))},wD.ɵdir=o["ɵɵdefineDirective"]({type:wD,inputs:{vaultTimeouts:"vaultTimeouts"},features:[o["ɵɵNgOnChangesFeature"]]});class PD extends wD{}PD.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](PD)))(t||PD)}}(),PD.ɵcmp=o["ɵɵdefineComponent"]({type:PD,selectors:[["app-vault-timeout-input"]],features:[o["ɵɵProvidersFeature"]([{provide:d.NG_VALUE_ACCESSOR,multi:!0,useExisting:PD},{provide:d.NG_VALIDATORS,multi:!0,useExisting:PD}]),o["ɵɵInheritDefinitionFeature"]],decls:23,vars:10,consts:[["type","info",4,"ngIf"],[3,"formGroup"],[1,"form-group"],["for","vaultTimeout"],["id","vaultTimeout","name","VaultTimeout","formControlName","vaultTimeout",1,"form-control"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-text","text-muted"],["class","form-group","formGroupName","custom",4,"ngIf"],["type","info"],[3,"ngValue"],["formGroupName","custom",1,"form-group"],["for","customVaultTimeout"],[1,"row"],[1,"col-6"],["id","hours","type","number","min","0","name","hours","formControlName","hours",1,"form-control"],["id","minutes","type","number","min","0","name","minutes","formControlName","minutes",1,"form-control"],["class","tw-text-danger",4,"ngIf"],[1,"tw-text-danger"],["aria-hidden","true",1,"bwi","bwi-error"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,ID,3,5,"app-callout",0),o["ɵɵtext"](1,"\n\n"),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n  "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"label",3),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n    "),o["ɵɵelementStart"](10,"select",4),o["ɵɵtext"](11,"\n      "),o["ɵɵtemplate"](12,CD,2,2,"option",5),o["ɵɵtext"](13,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementStart"](15,"small",6),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n  "),o["ɵɵtemplate"](20,kD,29,10,"div",7),o["ɵɵtext"](21,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n")),2&e&&(o["ɵɵproperty"]("ngIf",t.vaultTimeoutPolicy),o["ɵɵadvance"](2),o["ɵɵproperty"]("formGroup",t.form),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,6,"vaultTimeout")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",t.vaultTimeouts),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,8,"vaultTimeoutDesc")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.showCustom))},directives:[B.NgIf,d.NgControlStatusGroup,d.FormGroupDirective,d.SelectControlValueAccessor,d.NgControlStatus,d.FormControlName,B.NgForOf,Pe.O,d.NgSelectOption,d["ɵNgSelectMultipleOption"],d.FormGroupName,d.MinValidator,d.NumberValueAccessor,d.DefaultValueAccessor],pipes:[M.C],encapsulation:2});var AD=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function OD(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",31),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function TD(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",31),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}class BD{constructor(e,t,n,i,r,o){this.stateService=e,this.i18nService=t,this.vaultTimeoutService=n,this.platformUtilsService=i,this.messagingService=r,this.themingService=o,this.vaultTimeoutAction="lock",this.vaultTimeout=new d.FormControl(null),this.vaultTimeouts=[{name:t.t("oneMinute"),value:1},{name:t.t("fiveMinutes"),value:5},{name:t.t("fifteenMinutes"),value:15},{name:t.t("thirtyMinutes"),value:30},{name:t.t("oneHour"),value:60},{name:t.t("fourHours"),value:240},{name:t.t("onRefresh"),value:-1}],this.platformUtilsService.isDev()&&this.vaultTimeouts.push({name:t.t("never"),value:null});const a=[];t.supportedTranslationLocales.forEach((e=>{let n=e;t.localeNames.has(e)&&(n+=" - "+t.localeNames.get(e)),a.push({name:n,value:e})})),a.sort(N.c.getSortFunction(t,"name")),a.splice(0,0,{name:t.t("default"),value:null}),this.localeOptions=a,this.themeOptions=[{name:t.t("themeLight"),value:ly.Light},{name:t.t("themeDark"),value:ly.Dark},{name:t.t("themeSystem"),value:ly.System}]}ngOnInit(){var e;return AD(this,void 0,void 0,(function*(){this.vaultTimeout.setValue(yield this.vaultTimeoutService.getVaultTimeout()),this.vaultTimeoutAction=yield this.stateService.getVaultTimeoutAction(),this.enableFavicons=!(yield this.stateService.getDisableFavicon()),this.enableGravatars=yield this.stateService.getEnableGravitars(),this.enableFullWidth=yield this.stateService.getEnableFullWidth(),this.locale=null!==(e=yield this.stateService.getLocale())&&void 0!==e?e:null,this.startingLocale=this.locale,this.theme=yield this.stateService.getTheme(),this.startingTheme=this.theme}))}submit(){return AD(this,void 0,void 0,(function*(){this.vaultTimeout.valid?(yield this.vaultTimeoutService.setVaultTimeoutOptions(this.vaultTimeout.value,this.vaultTimeoutAction),yield this.stateService.setDisableFavicon(!this.enableFavicons),yield this.stateService.setEnableGravitars(this.enableGravatars),yield this.stateService.setEnableFullWidth(this.enableFullWidth),this.messagingService.send("setFullWidth"),this.theme!==this.startingTheme&&(yield this.themingService.updateConfiguredTheme(this.theme),this.startingTheme=this.theme),yield this.stateService.setLocale(this.locale),this.locale!==this.startingLocale?window.location.reload():this.platformUtilsService.showToast("success",null,this.i18nService.t("preferencesUpdated"))):this.platformUtilsService.showToast("error",null,this.i18nService.t("vaultTimeoutRangeError"))}))}vaultTimeoutActionChanged(e){return AD(this,void 0,void 0,(function*(){if("logOut"===e){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("vaultTimeoutLogOutConfirmation"),this.i18nService.t("vaultTimeoutLogOutConfirmationTitle"),this.i18nService.t("yes"),this.i18nService.t("cancel"),"warning")))return void(this.vaultTimeoutAction="lock")}this.vaultTimeoutAction=e}))}}BD.ɵfac=function(e){return new(e||BD)(o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](oe),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](hy))},BD.ɵcmp=o["ɵɵdefineComponent"]({type:BD,selectors:[["app-preferences"]],decls:173,vars:74,consts:[[1,"page-header"],["ngNativeValidate","",3,"ngSubmit"],[1,"row"],[1,"col-6"],["ngDefaultControl","",3,"vaultTimeouts","formControl"],[1,"form-group"],[1,"form-check","form-check-block"],["type","radio","name","vaultTimeoutAction","id","vaultTimeoutActionLock","value","lock",1,"form-check-input",3,"ngModel","ngModelChange"],["for","vaultTimeoutActionLock",1,"form-check-label"],[1,"form-check","mt-2","form-check-block"],["type","radio","name","vaultTimeoutAction","id","vaultTimeoutActionLogOut","value","logOut",1,"form-check-input",3,"ngModel","ngModelChange"],["for","vaultTimeoutActionLogOut",1,"form-check-label"],[1,"d-flex"],["for","locale"],["href","https://bitwarden.com/help/localization/","target","_blank","rel","noopener",1,"ml-auto",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],["id","locale","name","Locale",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-text","text-muted"],[1,"form-check"],["type","checkbox","id","enableFavicons","name","enableFavicons",1,"form-check-input",3,"ngModel","ngModelChange"],["for","enableFavicons",1,"form-check-label"],["href","https://bitwarden.com/help/website-icons/","target","_blank","rel","noopener",3,"appA11yTitle"],["type","checkbox","id","enableGravatars","name","enableGravatars",1,"form-check-input",3,"ngModel","ngModelChange"],["for","enableGravatars",1,"form-check-label"],["href","https://gravatar.com/","target","_blank","rel","noopener",3,"appA11yTitle"],["type","checkbox","id","enableFullWidth","name","enableFullWidth",1,"form-check-input",3,"ngModel","ngModelChange"],["for","enableFullWidth",1,"form-check-label"],["for","theme"],["id","theme","name","theme",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary"],[3,"ngValue"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelementStart"](7,"p"),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n"),o["ɵɵelementStart"](11,"form",1),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](12,"\n  "),o["ɵɵelementStart"](13,"div",2),o["ɵɵtext"](14,"\n    "),o["ɵɵelementStart"](15,"div",3),o["ɵɵtext"](16,"\n      "),o["ɵɵelementStart"](17,"app-vault-timeout-input",4),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n  "),o["ɵɵelementStart"](22,"div",5),o["ɵɵtext"](23,"\n    "),o["ɵɵelementStart"](24,"label"),o["ɵɵtext"](25),o["ɵɵpipe"](26,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n    "),o["ɵɵelementStart"](28,"div",6),o["ɵɵtext"](29,"\n      "),o["ɵɵelementStart"](30,"input",7),o["ɵɵlistener"]("ngModelChange",(function(e){return t.vaultTimeoutAction=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n      "),o["ɵɵelementStart"](32,"label",8),o["ɵɵtext"](33),o["ɵɵpipe"](34,"i18n"),o["ɵɵelementStart"](35,"small"),o["ɵɵtext"](36),o["ɵɵpipe"](37,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n    "),o["ɵɵelementStart"](41,"div",9),o["ɵɵtext"](42,"\n      "),o["ɵɵelementStart"](43,"input",10),o["ɵɵlistener"]("ngModelChange",(function(e){return t.vaultTimeoutAction=e}))("ngModelChange",(function(e){return t.vaultTimeoutActionChanged(e)})),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n      "),o["ɵɵelementStart"](45,"label",11),o["ɵɵtext"](46),o["ɵɵpipe"](47,"i18n"),o["ɵɵelementStart"](48,"small"),o["ɵɵtext"](49),o["ɵɵpipe"](50,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n  "),o["ɵɵelementStart"](55,"div",2),o["ɵɵtext"](56,"\n    "),o["ɵɵelementStart"](57,"div",3),o["ɵɵtext"](58,"\n      "),o["ɵɵelementStart"](59,"div",5),o["ɵɵtext"](60,"\n        "),o["ɵɵelementStart"](61,"div",12),o["ɵɵtext"](62,"\n          "),o["ɵɵelementStart"](63,"label",13),o["ɵɵtext"](64),o["ɵɵpipe"](65,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n          "),o["ɵɵelementStart"](67,"a",14),o["ɵɵpipe"](68,"i18n"),o["ɵɵtext"](69,"\n            "),o["ɵɵelement"](70,"i",15),o["ɵɵtext"](71,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](73,"\n        "),o["ɵɵelementStart"](74,"select",16),o["ɵɵlistener"]("ngModelChange",(function(e){return t.locale=e})),o["ɵɵtext"](75,"\n          "),o["ɵɵtemplate"](76,OD,2,2,"option",17),o["ɵɵtext"](77,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](78,"\n        "),o["ɵɵelementStart"](79,"small",18),o["ɵɵtext"](80),o["ɵɵpipe"](81,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](82,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](83,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](84,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](85,"\n  "),o["ɵɵelementStart"](86,"div",5),o["ɵɵtext"](87,"\n    "),o["ɵɵelementStart"](88,"div",19),o["ɵɵtext"](89,"\n      "),o["ɵɵelementStart"](90,"input",20),o["ɵɵlistener"]("ngModelChange",(function(e){return t.enableFavicons=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](91,"\n      "),o["ɵɵelementStart"](92,"label",21),o["ɵɵtext"](93),o["ɵɵpipe"](94,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](95,"\n      "),o["ɵɵelementStart"](96,"a",22),o["ɵɵpipe"](97,"i18n"),o["ɵɵtext"](98,"\n        "),o["ɵɵelement"](99,"i",15),o["ɵɵtext"](100,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](101,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](102,"\n    "),o["ɵɵelementStart"](103,"small",18),o["ɵɵtext"](104),o["ɵɵpipe"](105,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](106,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](107,"\n  "),o["ɵɵelementStart"](108,"div",5),o["ɵɵtext"](109,"\n    "),o["ɵɵelementStart"](110,"div",19),o["ɵɵtext"](111,"\n      "),o["ɵɵelementStart"](112,"input",23),o["ɵɵlistener"]("ngModelChange",(function(e){return t.enableGravatars=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](113,"\n      "),o["ɵɵelementStart"](114,"label",24),o["ɵɵtext"](115),o["ɵɵpipe"](116,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](117,"\n      "),o["ɵɵelementStart"](118,"a",25),o["ɵɵpipe"](119,"i18n"),o["ɵɵtext"](120,"\n        "),o["ɵɵelement"](121,"i",15),o["ɵɵtext"](122,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](123,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](124,"\n    "),o["ɵɵelementStart"](125,"small",18),o["ɵɵtext"](126),o["ɵɵpipe"](127,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](128,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](129,"\n  "),o["ɵɵelementStart"](130,"div",5),o["ɵɵtext"](131,"\n    "),o["ɵɵelementStart"](132,"div",19),o["ɵɵtext"](133,"\n      "),o["ɵɵelementStart"](134,"input",26),o["ɵɵlistener"]("ngModelChange",(function(e){return t.enableFullWidth=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](135,"\n      "),o["ɵɵelementStart"](136,"label",27),o["ɵɵtext"](137),o["ɵɵpipe"](138,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](139,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](140,"\n    "),o["ɵɵelementStart"](141,"small",18),o["ɵɵtext"](142),o["ɵɵpipe"](143,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](144,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](145,"\n  "),o["ɵɵelementStart"](146,"div",2),o["ɵɵtext"](147,"\n    "),o["ɵɵelementStart"](148,"div",3),o["ɵɵtext"](149,"\n      "),o["ɵɵelementStart"](150,"div",5),o["ɵɵtext"](151,"\n        "),o["ɵɵelementStart"](152,"label",28),o["ɵɵtext"](153),o["ɵɵpipe"](154,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](155,"\n        "),o["ɵɵelementStart"](156,"select",29),o["ɵɵlistener"]("ngModelChange",(function(e){return t.theme=e})),o["ɵɵtext"](157,"\n          "),o["ɵɵtemplate"](158,TD,2,2,"option",17),o["ɵɵtext"](159,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](160,"\n        "),o["ɵɵelementStart"](161,"small",18),o["ɵɵtext"](162),o["ɵɵpipe"](163,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](164,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](165,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](166,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](167,"\n  "),o["ɵɵelementStart"](168,"button",30),o["ɵɵtext"](169),o["ɵɵpipe"](170,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](171,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](172,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,32,"preferences")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,34,"preferencesDesc")),o["ɵɵadvance"](9),o["ɵɵproperty"]("vaultTimeouts",t.vaultTimeouts)("formControl",t.vaultTimeout),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](26,36,"vaultTimeoutAction")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngModel",t.vaultTimeoutAction),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](34,38,"lock"),"\n        "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](37,40,"vaultTimeoutActionLockDesc")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngModel",t.vaultTimeoutAction),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](47,42,"logOut"),"\n        "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](50,44,"vaultTimeoutActionLogOutDesc")),o["ɵɵadvance"](15),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](65,46,"language")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](68,48,"learnMore")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngModel",t.locale),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",t.localeOptions),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](81,50,"languageDesc")),o["ɵɵadvance"](10),o["ɵɵproperty"]("ngModel",t.enableFavicons),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](94,52,"enableFavicon"),"\n      "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](97,54,"learnMore")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](105,56,"faviconDesc")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngModel",t.enableGravatars),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](116,58,"enableGravatars"),"\n      "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](119,60,"learnMore")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](127,62,"enableGravatarsDesc")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngModel",t.enableFullWidth),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](138,64,"enableFullWidth"),"\n      "),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](143,66,"enableFullWidthDesc")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](154,68,"theme")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.theme),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",t.themeOptions),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](163,70,"themeDesc")),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](170,72,"save"),"\n  "))},directives:[d.NgControlStatusGroup,d.NgForm,PD,d.DefaultValueAccessor,d.NgControlStatus,d.FormControlDirective,d.RadioControlValueAccessor,d.NgModel,pe,d.SelectControlValueAccessor,B.NgForOf,d.CheckboxControlValueAccessor,d.NgSelectOption,d["ɵNgSelectMultipleOption"]],pipes:[M.C],encapsulation:2});class MD extends yg.c{constructor(e=null){super(e),null!=e&&(this.id=this.getResponseProperty("Id"),this.fileName=this.getResponseProperty("FileName"),this.size=this.getResponseProperty("Size"),this.sizeName=this.getResponseProperty("SizeName"))}}class DD extends yg.c{constructor(e=null){super(e),null!=e&&(this.text=this.getResponseProperty("Text"),this.hidden=this.getResponseProperty("Hidden")||!1)}}class FD{constructor(e,t){switch(this.type=e.type,this.fileLength=t,this.name=e.name?e.name.encryptedString:null,this.notes=e.notes?e.notes.encryptedString:null,this.maxAccessCount=e.maxAccessCount,this.expirationDate=null!=e.expirationDate?e.expirationDate.toISOString():null,this.deletionDate=null!=e.deletionDate?e.deletionDate.toISOString():null,this.key=null!=e.key?e.key.encryptedString:null,this.password=e.password,this.disabled=e.disabled,this.hideEmail=e.hideEmail,this.type){case tA.Text:this.text=new DD,this.text.text=null!=e.text.text?e.text.text.encryptedString:null,this.text.hidden=e.text.hidden;break;case tA.File:this.file=new MD,this.file.fileName=null!=e.file.fileName?e.file.fileName.encryptedString:null}}}class RD extends FD{constructor(e){super(e),this.id=e.id}}var UD=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function zD(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",21),o["ɵɵtext"](1,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("enforcedPolicyOptions",e.enforcedPolicyOptions)}}class ND extends qt{constructor(e,t,n,i,r,o,a,s,l,d,c,p,u,m,h){super(e,t,n,r,o,a,i),this.folderService=s,this.cipherService=l,this.syncService=d,this.apiService=c,this.sendService=p,this.organizationService=u,this.keyConnectorService=m,this.router=h,this.rotateEncKey=!1}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return UD(this,void 0,void 0,(function*(){(yield this.keyConnectorService.getUsesKeyConnector())&&this.router.navigate(["/settings/security/two-factor"]),yield e.ngOnInit.call(this)}))}rotateEncKeyClicked(){return UD(this,void 0,void 0,(function*(){if(this.rotateEncKey){const e=yield this.cipherService.getAllDecrypted();let t=!1;if(null!=e)for(let n=0;n<e.length;n++)if(null==e[n].organizationId&&e[n].hasOldAttachments){t=!0;break}if(t){return(yield this.platformUtilsService.showDialog(this.i18nService.t("oldAttachmentsNeedFixDesc"),null,this.i18nService.t("learnMore"),this.i18nService.t("close"),"warning"))&&this.platformUtilsService.launchUri("https://bitwarden.com/help/attachments/#add-storage-space"),void(this.rotateEncKey=!1)}(yield this.platformUtilsService.showDialog(this.i18nService.t("updateEncryptionKeyWarning")+" "+this.i18nService.t("updateEncryptionKeyExportWarning")+" "+this.i18nService.t("rotateEncKeyConfirmation"),this.i18nService.t("rotateEncKeyTitle"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning"))||(this.rotateEncKey=!1)}}))}submit(){const e=Object.create(null,{submit:{get:()=>super.submit}});return UD(this,void 0,void 0,(function*(){(yield this.cryptoService.hasEncKey())?yield e.submit.call(this):this.platformUtilsService.showToast("error",null,this.i18nService.t("updateKey"))}))}setupSubmitActions(){const e=Object.create(null,{setupSubmitActions:{get:()=>super.setupSubmitActions}});return UD(this,void 0,void 0,(function*(){return null==this.currentMasterPassword||""===this.currentMasterPassword?(this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("masterPassRequired")),!1):(this.rotateEncKey&&(yield this.syncService.fullSync(!0)),e.setupSubmitActions.call(this))}))}performSubmitActions(e,t,n){return UD(this,void 0,void 0,(function*(){const i=new Qn;i.masterPasswordHash=yield this.cryptoService.hashPassword(this.currentMasterPassword,null),i.newMasterPasswordHash=e,i.key=n[1].encryptedString;try{this.rotateEncKey?this.formPromise=this.apiService.postPassword(i).then((()=>this.updateKey(t,i.newMasterPasswordHash))):this.formPromise=this.apiService.postPassword(i),yield this.formPromise,this.platformUtilsService.showToast("success",this.i18nService.t("masterPasswordChanged"),this.i18nService.t("logBackIn")),this.messagingService.send("logout")}catch(r){this.platformUtilsService.showToast("error",null,this.i18nService.t("errorOccurred"))}}))}updateKey(e,t){return UD(this,void 0,void 0,(function*(){const n=yield this.cryptoService.makeEncKey(e),i=yield this.cryptoService.getPrivateKey();let r=null;null!=i&&(r=yield this.cryptoService.encrypt(i,n[0]));const o=new Fr;o.privateKey=null!=r?r.encryptedString:null,o.key=n[1].encryptedString,o.masterPasswordHash=t;const a=yield(0,Or.z)(this.folderService.folderViews$);for(let e=0;e<a.length;e++){if(null==a[e].id)continue;const t=yield this.folderService.encrypt(a[e],n[0]);o.folders.push(new Dr(t))}const s=yield this.cipherService.getAllDecrypted();for(let e=0;e<s.length;e++){if(null!=s[e].organizationId)continue;const t=yield this.cipherService.encrypt(s[e],n[0]);o.ciphers.push(new Br(t))}const l=yield this.sendService.getAll();yield Promise.all(l.map((e=>UD(this,void 0,void 0,(function*(){var t;const i=yield this.cryptoService.decryptToBytes(e.key,null);e.key=null!==(t=yield this.cryptoService.encrypt(i,n[0]))&&void 0!==t?t:e.key,o.sends.push(new RD(e))}))))),yield this.apiService.postAccountKey(o),yield this.updateEmergencyAccesses(n[0]),yield this.updateAllResetPasswordKeys(n[0],t)}))}updateEmergencyAccesses(e){return UD(this,void 0,void 0,(function*(){const t=yield this.apiService.getEmergencyAccessTrusted(),n=[tM.Confirmed,tM.RecoveryInitiated,tM.RecoveryApproved],i=t.data.filter((e=>n.includes(e.status)));for(const r of i){const t=yield this.apiService.getUserPublicKey(r.granteeId),n=N.c.fromB64ToArray(t.publicKey),i=yield this.cryptoService.rsaEncrypt(e.key,n.buffer),o=new fM;o.type=r.type,o.waitTimeDays=r.waitTimeDays,o.keyEncrypted=i.encryptedString,yield this.apiService.putEmergencyAccess(r.id,o)}}))}updateAllResetPasswordKeys(e,t){return UD(this,void 0,void 0,(function*(){const n=yield this.organizationService.getAll();for(const i of n){if(!i.resetPasswordEnrolled)continue;const n=yield this.apiService.getOrganizationKeys(i.id),r=N.c.fromB64ToArray(null==n?void 0:n.publicKey),o=yield this.cryptoService.rsaEncrypt(e.key,r.buffer),a=new Lt;a.masterPasswordHash=t,a.resetPasswordKey=o.encryptedString,yield this.apiService.putOrganizationUserResetPasswordEnrollment(i.id,i.userId,a)}}))}}ND.ɵfac=function(e){return new(e||ND)(o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](Rr.s),o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](AA),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](g.J),o["ɵɵdirectiveInject"](p.Router))},ND.ɵcmp=o["ɵɵdefineComponent"]({type:ND,selectors:[["app-change-password"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:83,vars:33,consts:[[1,"tabbed-header"],["type","warning"],["type","info",3,"enforcedPolicyOptions",4,"ngIf"],["ngNativeValidate","","autocomplete","off",3,"appApiAction","ngSubmit"],["form",""],[1,"row"],[1,"col-6"],[1,"form-group"],["for","currentMasterPassword"],["id","currentMasterPassword","type","password","name","MasterPasswordHash","required","","appInputVerbatim","",1,"form-control",3,"ngModel","ngModelChange"],["for","newMasterPassword"],["id","newMasterPassword","type","password","name","NewMasterPasswordHash","required","","appInputVerbatim","","autocomplete","new-password",1,"form-control","mb-1",3,"ngModel","ngModelChange","input"],[3,"score","showText"],["for","masterPasswordRetype"],["id","masterPasswordRetype","type","password","name","MasterPasswordRetype","required","","appInputVerbatim","","autocomplete","new-password",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-check"],["type","checkbox","id","rotateEncKey","name","RotateEncKey",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","rotateEncKey",1,"form-check-label"],["href","https://bitwarden.com/help/account-encryption-key/#rotate-your-encryption-key","target","_blank","rel","noopener",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],[3,"loading"],["type","info",3,"enforcedPolicyOptions"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n\n"),o["ɵɵelementStart"](7,"bit-callout",1),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n"),o["ɵɵtemplate"](11,zD,2,1,"app-callout",2),o["ɵɵtext"](12,"\n\n"),o["ɵɵelementStart"](13,"form",3,4),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](15,"\n  "),o["ɵɵelementStart"](16,"div",5),o["ɵɵtext"](17,"\n    "),o["ɵɵelementStart"](18,"div",6),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"div",7),o["ɵɵtext"](21,"\n        "),o["ɵɵelementStart"](22,"label",8),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n        "),o["ɵɵelementStart"](26,"input",9),o["ɵɵlistener"]("ngModelChange",(function(e){return t.currentMasterPassword=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n  "),o["ɵɵelementStart"](31,"div",5),o["ɵɵtext"](32,"\n    "),o["ɵɵelementStart"](33,"div",6),o["ɵɵtext"](34,"\n      "),o["ɵɵelementStart"](35,"div",7),o["ɵɵtext"](36,"\n        "),o["ɵɵelementStart"](37,"label",10),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n        "),o["ɵɵelementStart"](41,"input",11),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPassword=e}))("input",(function(){return t.updatePasswordStrength()})),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n        "),o["ɵɵelement"](43,"app-password-strength",12),o["ɵɵtext"](44,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n    "),o["ɵɵelementStart"](47,"div",6),o["ɵɵtext"](48,"\n      "),o["ɵɵelementStart"](49,"div",7),o["ɵɵtext"](50,"\n        "),o["ɵɵelementStart"](51,"label",13),o["ɵɵtext"](52),o["ɵɵpipe"](53,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n        "),o["ɵɵelementStart"](55,"input",14),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPasswordRetype=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](57,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n  "),o["ɵɵelementStart"](60,"div",7),o["ɵɵtext"](61,"\n    "),o["ɵɵelementStart"](62,"div",15),o["ɵɵtext"](63,"\n      "),o["ɵɵelementStart"](64,"input",16),o["ɵɵlistener"]("ngModelChange",(function(e){return t.rotateEncKey=e}))("change",(function(){return t.rotateEncKeyClicked()})),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n      "),o["ɵɵelementStart"](66,"label",17),o["ɵɵtext"](67),o["ɵɵpipe"](68,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](69,"\n      "),o["ɵɵelementStart"](70,"a",18),o["ɵɵpipe"](71,"i18n"),o["ɵɵtext"](72,"\n        "),o["ɵɵelement"](73,"i",19),o["ɵɵtext"](74,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](75,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](77,"\n  "),o["ɵɵelementStart"](78,"bit-submit-button",20),o["ɵɵtext"](79),o["ɵɵpipe"](80,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](81,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](82,"\n")),2&e){const e=o["ɵɵreference"](14);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,17,"changeMasterPassword")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,19,"loggedOutWarning")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.enforcedPolicyOptions),o["ɵɵadvance"](2),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](24,21,"currentMasterPass")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.currentMasterPassword),o["ɵɵadvance"](12),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](39,23,"newMasterPass")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.masterPassword),o["ɵɵadvance"](2),o["ɵɵproperty"]("score",t.masterPasswordScore)("showText",!0),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](53,25,"confirmNewMasterPass")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.masterPasswordRetype),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngModel",t.rotateEncKey),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](68,27,"rotateAccountEncKey"),"\n      "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](71,29,"learnMore")),o["ɵɵadvance"](8),o["ɵɵproperty"]("loading",e.loading),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](80,31,"changeMasterPassword"),"\n  ")}},directives:[iC.O,B.NgIf,d.NgControlStatusGroup,d.NgForm,Y.b,d.DefaultValueAccessor,d.RequiredValidator,J.b,d.NgControlStatus,d.NgModel,rt,d.CheckboxControlValueAccessor,pe,at,Pe.O],pipes:[M.C],encapsulation:2});class VD extends Qn{}var HD=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function jD(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",21),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}class LD{constructor(e,t,n,i,r,o,a){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.cryptoService=i,this.messagingService=r,this.logService=o,this.stateService=a,this.kdf=He.G3.PBKDF2_SHA256,this.kdfOptions=[],this.recommendedKdfIterations=He.wH,this.kdfOptions=[{name:"PBKDF2 SHA-256",value:He.G3.PBKDF2_SHA256}]}ngOnInit(){return HD(this,void 0,void 0,(function*(){this.kdf=yield this.stateService.getKdfType(),this.kdfIterations=yield this.stateService.getKdfIterations()}))}submit(){return HD(this,void 0,void 0,(function*(){if(!(yield this.cryptoService.hasEncKey()))return void this.platformUtilsService.showToast("error",null,this.i18nService.t("updateKey"));const e=new VD;e.kdf=this.kdf,e.kdfIterations=this.kdfIterations,e.masterPasswordHash=yield this.cryptoService.hashPassword(this.masterPassword,null);const t=yield this.stateService.getEmail(),n=yield this.cryptoService.makeKey(this.masterPassword,t,this.kdf,this.kdfIterations);e.newMasterPasswordHash=yield this.cryptoService.hashPassword(this.masterPassword,n);const i=yield this.cryptoService.remakeEncKey(n);e.key=i[1].encryptedString;try{this.formPromise=this.apiService.postAccountKdf(e),yield this.formPromise,this.platformUtilsService.showToast("success",this.i18nService.t("encKeySettingsChanged"),this.i18nService.t("logBackIn")),this.messagingService.send("logout")}catch(r){this.logService.error(r)}}))}}LD.ɵfac=function(e){return new(e||LD)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](P.b))},LD.ɵcmp=o["ɵɵdefineComponent"]({type:LD,selectors:[["app-change-kdf"]],decls:96,vars:45,consts:[[1,"tabbed-header"],["type","warning"],["ngNativeValidate","","autocomplete","off",3,"appApiAction","ngSubmit"],["form",""],[1,"row"],[1,"col-6"],[1,"form-group"],["for","kdfMasterPassword"],["id","kdfMasterPassword","type","password","name","MasterPasswordHash","required","","appInputVerbatim","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","mb-0"],["for","kdf"],["href","https://en.wikipedia.org/wiki/Key_derivation_function","target","_blank","rel","noopener",1,"ml-auto",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],["id","kdf","name","Kdf","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["for","kdfIterations"],["href","https://bitwarden.com/help/what-encryption-is-used/#pbkdf2","target","_blank","rel","noopener",1,"ml-auto",3,"appA11yTitle"],["id","kdfIterations","type","number","min","5000","max","2000000","name","KdfIterations","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12"],[1,"small","form-text","text-muted"],[3,"loading"],[3,"ngValue"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelementStart"](7,"bit-callout",1),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n"),o["ɵɵelementStart"](11,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](13,"\n  "),o["ɵɵelementStart"](14,"div",4),o["ɵɵtext"](15,"\n    "),o["ɵɵelementStart"](16,"div",5),o["ɵɵtext"](17,"\n      "),o["ɵɵelementStart"](18,"div",6),o["ɵɵtext"](19,"\n        "),o["ɵɵelementStart"](20,"label",7),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n        "),o["ɵɵelementStart"](24,"input",8),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPassword=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n  "),o["ɵɵelementStart"](29,"div",4),o["ɵɵtext"](30,"\n    "),o["ɵɵelementStart"](31,"div",5),o["ɵɵtext"](32,"\n      "),o["ɵɵelementStart"](33,"div",9),o["ɵɵtext"](34,"\n        "),o["ɵɵelementStart"](35,"label",10),o["ɵɵtext"](36),o["ɵɵpipe"](37,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n        "),o["ɵɵelementStart"](39,"a",11),o["ɵɵpipe"](40,"i18n"),o["ɵɵtext"](41,"\n          "),o["ɵɵelement"](42,"i",12),o["ɵɵtext"](43,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n        "),o["ɵɵelementStart"](45,"select",13),o["ɵɵlistener"]("ngModelChange",(function(e){return t.kdf=e})),o["ɵɵtext"](46,"\n          "),o["ɵɵtemplate"](47,jD,2,2,"option",14),o["ɵɵtext"](48,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n    "),o["ɵɵelementStart"](52,"div",5),o["ɵɵtext"](53,"\n      "),o["ɵɵelementStart"](54,"div",9),o["ɵɵtext"](55,"\n        "),o["ɵɵelementStart"](56,"label",15),o["ɵɵtext"](57),o["ɵɵpipe"](58,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n        "),o["ɵɵelementStart"](60,"a",16),o["ɵɵpipe"](61,"i18n"),o["ɵɵtext"](62,"\n          "),o["ɵɵelement"](63,"i",12),o["ɵɵtext"](64,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n        "),o["ɵɵelementStart"](66,"input",17),o["ɵɵlistener"]("ngModelChange",(function(e){return t.kdfIterations=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](68,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](69,"\n    "),o["ɵɵelementStart"](70,"div",18),o["ɵɵtext"](71,"\n      "),o["ɵɵelementStart"](72,"div",6),o["ɵɵtext"](73,"\n        "),o["ɵɵelementStart"](74,"div",19),o["ɵɵtext"](75,"\n          "),o["ɵɵelementStart"](76,"p"),o["ɵɵtext"](77),o["ɵɵpipe"](78,"i18n"),o["ɵɵpipe"](79,"number"),o["ɵɵelementEnd"](),o["ɵɵtext"](80,"\n          "),o["ɵɵelementStart"](81,"strong"),o["ɵɵtext"](82),o["ɵɵpipe"](83,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](84),o["ɵɵpipe"](85,"i18n"),o["ɵɵpipe"](86,"number"),o["ɵɵelementEnd"](),o["ɵɵtext"](87,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](88,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](89,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](90,"\n  "),o["ɵɵelementStart"](91,"bit-submit-button",20),o["ɵɵtext"](92),o["ɵɵpipe"](93,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](94,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](95,"\n")),2&e){const e=o["ɵɵreference"](12);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,17,"encKeySettings")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,19,"loggedOutWarning")),o["ɵɵadvance"](3),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](22,21,"masterPass")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.masterPassword),o["ɵɵadvance"](12),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](37,23,"kdfAlgorithm")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](40,25,"learnMore")),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngModel",t.kdf),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",t.kdfOptions),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](58,27,"kdfIterations")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](61,29,"learnMore")),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngModel",t.kdfIterations),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](78,31,"kdfIterationsDesc",o["ɵɵpipeBind1"](79,34,t.recommendedKdfIterations))),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](83,36,"warning")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"](": ",o["ɵɵpipeBind2"](85,38,"kdfIterationsWarning",o["ɵɵpipeBind1"](86,41,5e4)),"\n        "),o["ɵɵadvance"](7),o["ɵɵproperty"]("loading",e.loading),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](93,43,"changeKdf"),"\n  ")}},directives:[iC.O,d.NgControlStatusGroup,d.NgForm,Y.b,d.DefaultValueAccessor,d.RequiredValidator,J.b,d.NgControlStatus,d.NgModel,pe,d.SelectControlValueAccessor,B.NgForOf,d.MinValidator,d.MaxValidator,d.NumberValueAccessor,at,d.NgSelectOption,d["ɵNgSelectMultipleOption"]],pipes:[M.C,B.DecimalPipe],encapsulation:2});var KD=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const GD=["viewUserApiKeyTemplate"],qD=["rotateUserApiKeyTemplate"];function _D(e,t){1&e&&o["ɵɵelement"](0,"app-change-kdf")}function $D(e,t){}function WD(e,t){}const QD=function(e,t){return{"tabbed-header":e,"secondary-header":t}};class YD{constructor(e,t,n,i){this.keyConnectorService=e,this.stateService=t,this.modalService=n,this.apiService=i,this.showChangeKdf=!0}ngOnInit(){return KD(this,void 0,void 0,(function*(){this.showChangeKdf=!(yield this.keyConnectorService.getUsesKeyConnector())}))}viewUserApiKey(){return KD(this,void 0,void 0,(function*(){const e=yield this.stateService.getUserId();yield this.modalService.openViewRef(xx,this.viewUserApiKeyModalRef,(t=>{t.keyType="user",t.entityId=e,t.postKey=this.apiService.postUserApiKey.bind(this.apiService),t.scope="api",t.grantType="client_credentials",t.apiKeyTitle="apiKey",t.apiKeyWarning="userApiKeyWarning",t.apiKeyDescription="userApiKeyDesc"}))}))}rotateUserApiKey(){return KD(this,void 0,void 0,(function*(){const e=yield this.stateService.getUserId();yield this.modalService.openViewRef(xx,this.rotateUserApiKeyModalRef,(t=>{t.keyType="user",t.isRotation=!0,t.entityId=e,t.postKey=this.apiService.postUserRotateApiKey.bind(this.apiService),t.scope="api",t.grantType="client_credentials",t.apiKeyTitle="apiKey",t.apiKeyWarning="userApiKeyWarning",t.apiKeyDescription="apiKeyRotateDesc"}))}))}}YD.ɵfac=function(e){return new(e||YD)(o["ɵɵdirectiveInject"](g.J),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](T.s))},YD.ɵcmp=o["ɵɵdefineComponent"]({type:YD,selectors:[["app-security-keys"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](GD,7,o.ViewContainerRef),o["ɵɵviewQuery"](qD,7,o.ViewContainerRef)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.viewUserApiKeyModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.rotateUserApiKeyModalRef=e.first)}},decls:27,vars:17,consts:[[4,"ngIf"],[1,"border-0","mb-0",3,"ngClass"],["bitButton","","buttonType","secondary",3,"click"],["viewUserApiKeyTemplate",""],["rotateUserApiKeyTemplate",""]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,_D,1,0,"app-change-kdf",0),o["ɵɵtext"](1,"\n"),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n  "),o["ɵɵelementStart"](4,"h1"),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementStart"](9,"p"),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n"),o["ɵɵelementStart"](13,"button",2),o["ɵɵlistener"]("click",(function(){return t.viewUserApiKey()})),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n"),o["ɵɵelementStart"](17,"button",2),o["ɵɵlistener"]("click",(function(){return t.rotateUserApiKey()})),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n"),o["ɵɵtemplate"](21,$D,0,0,"ng-template",null,3,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](23,"\n"),o["ɵɵtemplate"](24,WD,0,0,"ng-template",null,4,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](26,"\n")),2&e&&(o["ɵɵproperty"]("ngIf",t.showChangeKdf),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](14,QD,!t.showChangeKdf,t.showChangeKdf)),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,6,"apiKey")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](11,8,"userApiKeyDesc"),"\n"),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](15,10,"viewApiKey"),"\n"),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](19,12,"rotateApiKey"),"\n"))},directives:[B.NgIf,B.NgClass,et.H,LD],pipes:[M.C],encapsulation:2});var ZD=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function JD(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"li",3),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"a",6),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](6,1,"masterPassword"),"\n        "))}class XD{constructor(e){this.keyConnectorService=e,this.showChangePassword=!0}ngOnInit(){return ZD(this,void 0,void 0,(function*(){this.showChangePassword=!(yield this.keyConnectorService.getUsesKeyConnector())}))}}XD.ɵfac=function(e){return new(e||XD)(o["ɵɵdirectiveInject"](g.J))},XD.ɵcmp=o["ɵɵdefineComponent"]({type:XD,selectors:[["app-security"]],decls:24,vars:7,consts:[[1,"tabbed-nav","d-flex","flex-column"],[1,"nav","nav-tabs"],[4,"ngIf"],[1,"nav-item"],["routerLink","two-factor","routerLinkActive","active",1,"nav-link"],["routerLink","security-keys","routerLinkActive","active",1,"nav-link"],["routerLink","change-password","routerLinkActive","active",1,"nav-link"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"ul",1),o["ɵɵtext"](3,"\n    "),o["ɵɵtemplate"](4,JD,9,3,"ng-container",2),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"li",3),o["ɵɵtext"](7,"\n      "),o["ɵɵelementStart"](8,"a",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n    "),o["ɵɵelementStart"](13,"li",3),o["ɵɵtext"](14,"\n      "),o["ɵɵelementStart"](15,"a",5),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n"),o["ɵɵelement"](22,"router-outlet"),o["ɵɵtext"](23,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.showChangePassword),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](10,3,"twoStepLogin"),"\n      "),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](17,5,"keys"),"\n      "))},directives:[B.NgIf,p.RouterLinkWithHref,p.RouterLinkActive,p.RouterOutlet],pipes:[M.C],encapsulation:2});const eF=[{path:"",component:XD,data:{titleId:"security"},children:[{path:"",pathMatch:"full",redirectTo:"change-password"},{path:"change-password",component:ND,data:{titleId:"masterPassword"}},{path:"two-factor",component:AC,data:{titleId:"twoStepLogin"}},{path:"security-keys",component:YD,data:{titleId:"keys"}}]}];class tF{}tF.ɵfac=function(e){return new(e||tF)},tF.ɵmod=o["ɵɵdefineNgModule"]({type:tF}),tF.ɵinj=o["ɵɵdefineInjector"]({imports:[[p.RouterModule.forChild(eF)],p.RouterModule]});var nF=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function iF(e,t){1&e&&(o["ɵɵelementStart"](0,"a",14),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"subscription"),"\n          "))}function rF(e,t){1&e&&(o["ɵɵelementStart"](0,"a",15),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"sponsoredFamilies"),"\n          "))}const oF="SettingsComponent";class aF{constructor(e,t,n,i,r,o,a){this.tokenService=e,this.broadcasterService=t,this.ngZone=n,this.platformUtilsService=i,this.organizationService=r,this.stateService=o,this.apiService=a}ngOnInit(){return nF(this,void 0,void 0,(function*(){this.broadcasterService.subscribe(oF,(e=>nF(this,void 0,void 0,(function*(){this.ngZone.run((()=>nF(this,void 0,void 0,(function*(){switch(e.command){case"purchasedPremium":yield this.load()}}))))})))),this.selfHosted=yield this.platformUtilsService.isSelfHost(),yield this.load()}))}ngOnDestroy(){this.broadcasterService.unsubscribe(oF)}load(){return nF(this,void 0,void 0,(function*(){this.premium=yield this.stateService.getHasPremiumPersonally(),this.hasFamilySponsorshipAvailable=yield this.organizationService.canManageSponsorships();const e=yield this.stateService.getHasPremiumFromOrganization();let t=null;this.selfHosted||(t=yield this.apiService.getUserBillingHistory()),this.hideSubscription=!this.premium&&e&&(this.selfHosted||(null==t?void 0:t.hasNoHistory))}))}}aF.ɵfac=function(e){return new(e||aF)(o["ɵɵdirectiveInject"](bi),o["ɵɵdirectiveInject"](Ci),o["ɵɵdirectiveInject"](o.NgZone),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](ke),o["ɵɵdirectiveInject"](T.s))},aF.ɵcmp=o["ɵɵdefineComponent"]({type:aF,selectors:[["app-settings"]],decls:48,vars:20,consts:[[1,"container","page-content"],[1,"row"],[1,"col-3"],[1,"card"],[1,"card-header"],[1,"list-group","list-group-flush"],["routerLink","account","routerLinkActive","active",1,"list-group-item"],["routerLink","security","routerLinkActive","active",1,"list-group-item"],["routerLink","preferences","routerLinkActive","active",1,"list-group-item"],["routerLink","subscription","class","list-group-item","routerLinkActive","active",4,"ngIf"],["routerLink","domain-rules","routerLinkActive","active",1,"list-group-item"],["routerLink","emergency-access","routerLinkActive","active",1,"list-group-item"],["routerLink","sponsored-families","class","list-group-item","routerLinkActive","active",4,"ngIf"],[1,"col-9"],["routerLink","subscription","routerLinkActive","active",1,"list-group-item"],["routerLink","sponsored-families","routerLinkActive","active",1,"list-group-item"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"div",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"div",5),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"a",6),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"a",7),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n          "),o["ɵɵelementStart"](22,"a",8),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n          "),o["ɵɵtemplate"](26,iF,3,3,"a",9),o["ɵɵtext"](27,"\n          "),o["ɵɵelementStart"](28,"a",10),o["ɵɵtext"](29),o["ɵɵpipe"](30,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n          "),o["ɵɵelementStart"](32,"a",11),o["ɵɵtext"](33),o["ɵɵpipe"](34,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n          "),o["ɵɵtemplate"](36,rF,3,3,"a",12),o["ɵɵtext"](37,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n    "),o["ɵɵelementStart"](41,"div",13),o["ɵɵtext"](42,"\n      "),o["ɵɵelement"](43,"router-outlet"),o["ɵɵtext"](44,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,8,"accountSettings")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](16,10,"myAccount"),"\n          "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](20,12,"security"),"\n          "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](24,14,"preferences"),"\n          "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.hideSubscription),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](30,16,"domainRules"),"\n          "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](34,18,"emergencyAccess"),"\n          "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.hasFamilySponsorshipAvailable))},directives:[p.RouterLinkWithHref,p.RouterLinkActive,B.NgIf,p.RouterOutlet],pipes:[M.C],encapsulation:2});var sF=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function lF(e,t=!1){return n=>sF(this,void 0,void 0,(function*(){let i=yield e(),r=n.value;if(t&&(i=i.toLowerCase(),r=r.toLowerCase()),r===i)return{notAllowedValue:!0}}))}var dF=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function cF(e,t){1&e&&(o["ɵɵelementStart"](0,"button",9),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n      "),o["ɵɵelement"](3,"i",10),o["ɵɵtext"](4,"\n    "),o["ɵɵelementEnd"]()),2&e&&o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](1,1,"options"))}function pF(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",11,12),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().resendEmail()})),o["ɵɵpipe"](2,"i18n"),o["ɵɵtext"](3,"\n        "),o["ɵɵelement"](4,"i",8),o["ɵɵpipe"](5,"i18n"),o["ɵɵtext"](6,"\n        "),o["ɵɵelementStart"](7,"span"),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",t.resendEmailPromise)("disabled",e.loading),o["ɵɵattribute"]("aria-label",o["ɵɵpipeBind2"](2,5,"resendEmailLabel",t.sponsoringOrg.familySponsorshipFriendlyName)),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](5,8,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,10,"resendEmail"))}}class uF{constructor(e,t,n,i){this.apiService=e,this.i18nService=t,this.logService=n,this.platformUtilsService=i,this.sponsoringOrg=null,this.isSelfHosted=!1,this.sponsorshipRemoved=new o.EventEmitter,this.statusMessage="loading",this.statusClass="text-success",this.locale=""}ngOnInit(){return dF(this,void 0,void 0,(function*(){this.locale=yield(0,Or.z)(this.i18nService.locale$),this.setStatus(this.isSelfHosted,this.sponsoringOrg.familySponsorshipToDelete,this.sponsoringOrg.familySponsorshipValidUntil,this.sponsoringOrg.familySponsorshipLastSyncDate)}))}revokeSponsorship(){return dF(this,void 0,void 0,(function*(){try{this.revokeSponsorshipPromise=this.doRevokeSponsorship(),yield this.revokeSponsorshipPromise}catch(e){this.logService.error(e)}this.revokeSponsorshipPromise=null}))}resendEmail(){return dF(this,void 0,void 0,(function*(){this.resendEmailPromise=this.apiService.postResendSponsorshipOffer(this.sponsoringOrg.id),yield this.resendEmailPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("emailSent")),this.resendEmailPromise=null}))}get isSentAwaitingSync(){return this.isSelfHosted&&!this.sponsoringOrg.familySponsorshipLastSyncDate}doRevokeSponsorship(){return dF(this,void 0,void 0,(function*(){(yield this.platformUtilsService.showDialog(this.i18nService.t("revokeSponsorshipConfirmation"),`${this.i18nService.t("remove")} ${this.sponsoringOrg.familySponsorshipFriendlyName}?`,this.i18nService.t("remove"),this.i18nService.t("cancel"),"warning"))&&(yield this.apiService.deleteRevokeSponsorship(this.sponsoringOrg.id),this.platformUtilsService.showToast("success",null,this.i18nService.t("reclaimedFreePlan")),this.sponsorshipRemoved.emit())}))}setStatus(e,t,n,i){t&&n?(this.statusMessage=this.i18nService.t("revokeWhenExpired",(0,B.formatDate)(n,"MM/dd/yyyy",this.locale)),this.statusClass="text-danger"):t?(this.statusMessage=this.i18nService.t("requestRemoved"),this.statusClass="text-danger"):n?(this.statusMessage=this.i18nService.t("active"),this.statusClass="text-success"):e&&i?(this.statusMessage=this.i18nService.t("sent"),this.statusClass="text-success"):e?(this.statusMessage=this.i18nService.t("requested"),this.statusClass="text-success"):(this.statusMessage=this.i18nService.t("sent"),this.statusClass="text-success")}}uF.ɵfac=function(e){return new(e||uF)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](E.P))},uF.ɵcmp=o["ɵɵdefineComponent"]({type:uF,selectors:[["","sponsoring-org-row",""]],inputs:{sponsoringOrg:"sponsoringOrg",isSelfHosted:"isSelfHosted"},outputs:{sponsorshipRemoved:"sponsorshipRemoved"},attrs:["sponsoring-org-row",""],decls:37,vars:18,consts:[[3,"ngClass"],[1,"table-action-right"],["appListDropdown","",1,"dropdown"],["class","btn btn-outline-secondary dropdown-toggle","type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",3,"appA11yTitle",4,"ngIf"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu","dropdown-menu-right"],["class","dropdown-item btn-submit",3,"appApiAction","disabled","click",4,"ngIf"],[1,"dropdown-item","text-danger","btn-submit",3,"appApiAction","disabled","click"],["revokeSponsorshipBtn",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-cog","bwi-lg"],[1,"dropdown-item","btn-submit",3,"appApiAction","disabled","click"],["resendEmailBtn",""]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"td"),o["ɵɵtext"](1),o["ɵɵelementEnd"](),o["ɵɵtext"](2,"\n"),o["ɵɵelementStart"](3,"td"),o["ɵɵtext"](4),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementStart"](6,"td"),o["ɵɵtext"](7,"\n  "),o["ɵɵelementStart"](8,"span",0),o["ɵɵtext"](9),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n"),o["ɵɵelementStart"](12,"td",1),o["ɵɵtext"](13,"\n  "),o["ɵɵelementStart"](14,"div",2),o["ɵɵtext"](15,"\n    "),o["ɵɵtemplate"](16,cF,5,3,"button",3),o["ɵɵtext"](17,"\n    "),o["ɵɵelementStart"](18,"div",4),o["ɵɵtext"](19,"\n      "),o["ɵɵtemplate"](20,pF,11,12,"button",5),o["ɵɵtext"](21,"\n      "),o["ɵɵelementStart"](22,"button",6,7),o["ɵɵlistener"]("click",(function(){return t.revokeSponsorship()})),o["ɵɵpipe"](24,"i18n"),o["ɵɵtext"](25,"\n        "),o["ɵɵelement"](26,"i",8),o["ɵɵpipe"](27,"i18n"),o["ɵɵtext"](28,"\n        "),o["ɵɵelementStart"](29,"span"),o["ɵɵtext"](30),o["ɵɵpipe"](31,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n")),2&e){const e=o["ɵɵreference"](23);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",t.sponsoringOrg.familySponsorshipFriendlyName,"\n"),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](t.sponsoringOrg.name),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngClass",t.statusClass),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](t.statusMessage),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngIf",!t.sponsoringOrg.familySponsorshipToDelete),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!t.isSelfHosted&&!t.sponsoringOrg.familySponsorshipValidUntil),o["ɵɵadvance"](2),o["ɵɵproperty"]("appApiAction",t.revokeSponsorshipPromise)("disabled",e.loading),o["ɵɵattribute"]("aria-label",o["ɵɵpipeBind2"](24,11,"revokeAccount",t.sponsoringOrg.familySponsorshipFriendlyName)),o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](27,14,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](31,16,"remove"))}},directives:[B.NgClass,B.NgIf,Y.b,pe],pipes:[M.C],encapsulation:2});var mF=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function hF(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",2),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",3),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function vF(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",18),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.id),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function gF(e,t){1&e&&(o["ɵɵelementStart"](0,"small",19),o["ɵɵtext"](1,"\n        "),o["ɵɵelement"](2,"i",20),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](4,1,"cannotSponsorSelf"),"\n      "))}function fF(e,t){1&e&&(o["ɵɵelementStart"](0,"small",19),o["ɵɵtext"](1,"\n        "),o["ɵɵelement"](2,"i",20),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](4,1,"invalidEmail"),"\n      "))}function xF(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",6,7),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).submit()})),o["ɵɵtext"](2,"\n    "),o["ɵɵelementStart"](3,"div",8),o["ɵɵtext"](4,"\n      "),o["ɵɵelementStart"](5,"label",9),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n      "),o["ɵɵelementStart"](9,"select",10),o["ɵɵtext"](10,"\n        "),o["ɵɵelementStart"](11,"option",11),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵtemplate"](15,vF,2,2,"option",12),o["ɵɵtext"](16,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n    "),o["ɵɵelementStart"](19,"div",8),o["ɵɵtext"](20,"\n      "),o["ɵɵelementStart"](21,"label",13),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n      "),o["ɵɵelement"](25,"input",14),o["ɵɵtext"](26,"\n      "),o["ɵɵtemplate"](27,gF,5,3,"small",15),o["ɵɵtext"](28,"\n      "),o["ɵɵtemplate"](29,fF,5,3,"small",15),o["ɵɵtext"](30,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n    "),o["ɵɵelementStart"](32,"div",8),o["ɵɵtext"](33,"\n      "),o["ɵɵelementStart"](34,"button",16),o["ɵɵtext"](35,"\n        "),o["ɵɵelement"](36,"i",17),o["ɵɵpipe"](37,"i18n"),o["ɵɵtext"](38,"\n        "),o["ɵɵelementStart"](39,"span"),o["ɵɵtext"](40),o["ɵɵpipe"](41,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"](2);o["ɵɵproperty"]("appApiAction",t.formPromise)("formGroup",t.sponsorshipForm),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,12,"familiesSponsoringOrgSelect")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("-- ",o["ɵɵpipeBind1"](13,14,"select")," --"),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngForOf",t.availableSponsorshipOrgs),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](23,16,"sponsoredFamiliesEmail"),":"),o["ɵɵadvance"](3),o["ɵɵattribute"]("aria-invalid",t.sponsorshipEmailControl.invalid),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",null==t.sponsorshipEmailControl.errors?null:t.sponsorshipEmailControl.errors.notAllowedValue),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",null==t.sponsorshipEmailControl.errors?null:t.sponsorshipEmailControl.errors.email),o["ɵɵadvance"](5),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](37,18,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](41,20,"redeem"))}}function yF(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"tr",24),o["ɵɵlistener"]("sponsorshipRemoved",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).load(!0)})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n          "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("sponsoringOrg",e)("isSelfHosted",n.isSelfHosted)}}function SF(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",21),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"table",22),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"thead"),o["ɵɵtext"](7,"\n          "),o["ɵɵelementStart"](8,"tr"),o["ɵɵtext"](9,"\n            "),o["ɵɵelementStart"](10,"th"),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementStart"](14,"th"),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n            "),o["ɵɵelementStart"](18,"th"),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n            "),o["ɵɵelement"](22,"th"),o["ɵɵtext"](23,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n        "),o["ɵɵelementStart"](26,"tbody"),o["ɵɵtext"](27,"\n          "),o["ɵɵtemplate"](28,yF,4,2,"ng-container",23),o["ɵɵtext"](29,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n    "),o["ɵɵelementStart"](33,"small"),o["ɵɵtext"](34),o["ɵɵpipe"](35,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,5,"recipient")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](16,7,"sponsoringOrg")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](20,9,"status")),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngForOf",e.activeSponsorshipOrgs),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](35,11,"sponsoredFamiliesLeaveCopy"))}}function bF(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"div"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementStart"](9,"ul",4),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"li"),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n      "),o["ɵɵelementStart"](15,"li"),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n  "),o["ɵɵtemplate"](21,xF,45,22,"form",5),o["ɵɵtext"](22,"\n  "),o["ɵɵtemplate"](23,SF,37,13,"ng-container",1),o["ɵɵtext"](24,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,6,"sponsoredFamiliesEligible"),"\n  "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](8,8,"sponsoredFamiliesInclude"),":\n    "),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,10,"sponsoredFamiliesPremiumAccess")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,12,"sponsoredFamiliesSharedCollections")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.anyOrgsAvailable),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.anyActiveSponsorships)}}class wF{constructor(e,t,n,i,r,o,a){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.syncService=i,this.organizationService=r,this.formBuilder=o,this.stateService=a,this.loading=!1,this.availableSponsorshipOrgs=[],this.activeSponsorshipOrgs=[],this.sponsorshipForm=this.formBuilder.group({selectedSponsorshipOrgId:["",{validators:[d.Validators.required]}],sponsorshipEmail:["",{validators:[d.Validators.email],asyncValidators:[lF((()=>mF(this,void 0,void 0,(function*(){return yield this.stateService.getEmail()}))),!0)],updateOn:"blur"}]})}ngOnInit(){return mF(this,void 0,void 0,(function*(){yield this.load()}))}submit(){return mF(this,void 0,void 0,(function*(){this.formPromise=this.apiService.postCreateSponsorship(this.sponsorshipForm.value.selectedSponsorshipOrgId,{sponsoredEmail:this.sponsorshipForm.value.sponsorshipEmail,planSponsorshipType:xP.FamiliesForEnterprise,friendlyName:this.sponsorshipForm.value.sponsorshipEmail}),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("sponsorshipCreated")),this.formPromise=null,this.resetForm(),yield this.load(!0)}))}load(e=!1){return mF(this,void 0,void 0,(function*(){if(this.loading)return;this.loading=!0,e&&(yield this.syncService.fullSync(!0));const t=yield this.organizationService.getAll();this.availableSponsorshipOrgs=t.filter((e=>e.familySponsorshipAvailable)),this.activeSponsorshipOrgs=t.filter((e=>null!==e.familySponsorshipFriendlyName)),1===this.availableSponsorshipOrgs.length&&this.sponsorshipForm.patchValue({selectedSponsorshipOrgId:this.availableSponsorshipOrgs[0].id}),this.loading=!1}))}get sponsorshipEmailControl(){return this.sponsorshipForm.controls.sponsorshipEmail}resetForm(){return mF(this,void 0,void 0,(function*(){this.sponsorshipForm.reset()}))}get anyActiveSponsorships(){return this.activeSponsorshipOrgs.length>0}get anyOrgsAvailable(){return this.availableSponsorshipOrgs.length>0}get isSelfHosted(){return this.platformUtilsService.isSelfHost()}}wF.ɵfac=function(e){return new(e||wF)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](Ii.M),o["ɵɵdirectiveInject"](d.FormBuilder),o["ɵɵdirectiveInject"](P.b))},wF.ɵcmp=o["ɵɵdefineComponent"]({type:wF,selectors:[["app-sponsored-families"]],decls:11,vars:5,consts:[[1,"page-header"],[4,"ngIf"],[1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"inset-list"],["ngNativeValidate","",3,"appApiAction","formGroup","ngSubmit",4,"ngIf"],["ngNativeValidate","",3,"appApiAction","formGroup","ngSubmit"],["form",""],[1,"form-group","col-7"],["for","availableSponsorshipOrg"],["id","availableSponsorshipOrg","name","Available Sponsorship Organization","formControlName","selectedSponsorshipOrgId","required","",1,"form-control"],["disabled","true","value",""],[3,"ngValue",4,"ngFor","ngForOf"],["for","sponsorshipEmail"],["id","sponsorshipEmail","inputmode","email","formControlName","sponsorshipEmail","name","sponsorshipEmail","required","",1,"form-control"],["aria-errormessage","sponsorshipEmail","class","error-inline","role","alert",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-submit","mt-2",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[3,"ngValue"],["aria-errormessage","sponsorshipEmail","role","alert",1,"error-inline"],["aria-hidden","true",1,"bwi","bwi-error"],[1,"border-bottom"],[1,"table","table-hover","table-list"],[4,"ngFor","ngForOf"],["sponsoring-org-row","",3,"sponsoringOrg","isSelfHosted","sponsorshipRemoved"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵtemplate"](7,hF,9,6,"ng-container",1),o["ɵɵtext"](8,"\n"),o["ɵɵtemplate"](9,bF,25,14,"ng-container",1),o["ɵɵtext"](10,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"sponsoredFamilies")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading))},directives:[B.NgIf,d.NgControlStatusGroup,Y.b,d.FormGroupDirective,d.SelectControlValueAccessor,d.NgControlStatus,d.FormControlName,d.RequiredValidator,d.NgSelectOption,d["ɵNgSelectMultipleOption"],B.NgForOf,d.DefaultValueAccessor,uF],pipes:[M.C],encapsulation:2});var IF=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const CF=function(e){return{"bwi-spin":e}};function EF(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",3),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().load()})),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",4),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](5,CF,e.loading)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,3,"refresh"),"\n  ")}}function kF(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",5),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",6),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function PF(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",12),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).addCredit()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](2,1,"addCredit"),"\n  "))}function AF(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-add-credit",13),o["ɵɵlistener"]("onAdded",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).closeAddCredit(!0)}))("onCanceled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).closeAddCredit(!1)})),o["ɵɵtext"](1,"\n  "),o["ɵɵelementEnd"]()}}function OF(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"noPaymentMethod")))}function TF(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"inAppPurchase")))}const BF=function(e,t,n,i,r,o){return{"bwi-credit-card":e,"bwi-bank":t,"bwi-money":n,"bwi-paypal text-primary":i,"bwi-apple text-muted":r,"bwi-google text-muted":o}};function MF(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3,"\n      "),o["ɵɵelement"](4,"i",14),o["ɵɵtext"](5,"\n      "),o["ɵɵtemplate"](6,TF,3,3,"span",2),o["ɵɵtext"](7),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction6"](3,BF,e.paymentSource.type===e.paymentMethodType.Card,e.paymentSource.type===e.paymentMethodType.BankAccount,e.paymentSource.type===e.paymentMethodType.Check,e.paymentSource.type===e.paymentMethodType.PayPal,e.paymentSource.type===e.paymentMethodType.AppleInApp,e.paymentSource.type===e.paymentMethodType.GoogleInApp)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.paymentSourceInApp),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n      ",e.paymentSource.description,"\n    ")}}function DF(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",12),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).changePayment()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](2,1,e.paymentSource?"changePaymentMethod":"addPaymentMethod"),"\n  ")}}function FF(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-adjust-payment",15),o["ɵɵlistener"]("onAdjusted",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).closePayment(!0)}))("onCanceled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).closePayment(!1)})),o["ɵɵtext"](1,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵproperty"]("currentType",null!=e.paymentSource?e.paymentSource.type:null)}}function RF(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h2"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"p",7),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"strong"),o["ɵɵtext"](9),o["ɵɵpipe"](10,"currency"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n  "),o["ɵɵelementStart"](13,"p"),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n  "),o["ɵɵtemplate"](17,PF,3,3,"button",8),o["ɵɵtext"](18,"\n  "),o["ɵɵtemplate"](19,AF,2,0,"app-add-credit",9),o["ɵɵtext"](20,"\n  "),o["ɵɵelementStart"](21,"h2",10),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n  "),o["ɵɵtemplate"](25,OF,3,3,"p",2),o["ɵɵtext"](26,"\n  "),o["ɵɵtemplate"](27,MF,9,10,"ng-container",2),o["ɵɵtext"](28,"\n  "),o["ɵɵtemplate"](29,DF,3,3,"button",8),o["ɵɵtext"](30,"\n  "),o["ɵɵtemplate"](31,FF,2,1,"app-adjust-payment",11),o["ɵɵtext"](32,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,10,e.isCreditBalance?"accountCredit":"accountBalance")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](10,12,e.creditOrBalance,"$")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](15,15,"creditAppliedDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.showAddCredit),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.showAddCredit),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,17,"paymentMethod")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.paymentSource),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.paymentSource),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.showAdjustPayment),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.showAdjustPayment)}}class UF{constructor(e,t,n,i){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.router=i,this.loading=!1,this.firstLoaded=!1,this.showAdjustPayment=!1,this.showAddCredit=!1,this.paymentMethodType=Xx}ngOnInit(){return IF(this,void 0,void 0,(function*(){this.platformUtilsService.isSelfHost()&&this.router.navigate(["/settings/subscription"]),yield this.load(),this.firstLoaded=!0}))}load(){return IF(this,void 0,void 0,(function*(){this.loading||(this.loading=!0,this.billing=yield this.apiService.getUserBillingPayment(),this.loading=!1)}))}addCredit(){this.paymentSourceInApp?this.platformUtilsService.showDialog(this.i18nService.t("cannotPerformInAppPurchase"),this.i18nService.t("addCredit"),null,null,"warning"):this.showAddCredit=!0}closeAddCredit(e){this.showAddCredit=!1,e&&this.load()}changePayment(){this.paymentSourceInApp?this.platformUtilsService.showDialog(this.i18nService.t("cannotPerformInAppPurchase"),this.i18nService.t("changePaymentMethod"),null,null,"warning"):this.showAdjustPayment=!0}closePayment(e){this.showAdjustPayment=!1,e&&this.load()}get isCreditBalance(){return null==this.billing||this.billing.balance<=0}get creditOrBalance(){return Math.abs(null!=this.billing?this.billing.balance:0)}get paymentSource(){return null!=this.billing?this.billing.paymentSource:null}get paymentSourceInApp(){return null!=this.paymentSource&&(this.paymentSource.type===Xx.AppleInApp||this.paymentSource.type===Xx.GoogleInApp)}}UF.ɵfac=function(e){return new(e||UF)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](p.Router))},UF.ɵcmp=o["ɵɵdefineComponent"]({type:UF,selectors:[["app-payment-method"]],decls:13,vars:6,consts:[[1,"tabbed-header","d-flex"],["bitButton","","buttonType","secondary","class","tw-ml-auto",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["bitButton","","buttonType","secondary",1,"tw-ml-auto",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-refresh","bwi-fw",3,"ngClass"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[1,"text-lg"],["bitButton","","buttonType","secondary",3,"click",4,"ngIf"],[3,"onAdded","onCanceled",4,"ngIf"],[1,"spaced-header"],[3,"currentType","onAdjusted","onCanceled",4,"ngIf"],["bitButton","","buttonType","secondary",3,"click"],[3,"onAdded","onCanceled"],[1,"bwi","bwi-fw",3,"ngClass"],[3,"currentType","onAdjusted","onCanceled"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵtemplate"](6,EF,5,7,"button",1),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵtemplate"](9,kF,9,6,"ng-container",2),o["ɵɵtext"](10,"\n"),o["ɵɵtemplate"](11,RF,33,19,"ng-container",2),o["ɵɵtext"](12,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,4,"paymentMethod"),"\n  "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.firstLoaded),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.firstLoaded&&t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.billing))},directives:[B.NgIf,et.H,B.NgClass,ay,Ty],pipes:[M.C,B.CurrencyPipe],encapsulation:2});var zF=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function NF(e,t){1&e&&(o["ɵɵelementStart"](0,"div",10),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,1,"subscription")))}function VF(e,t){1&e&&(o["ɵɵelementStart"](0,"div",11),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,1,"goPremium")))}function HF(e,t){1&e&&(o["ɵɵelementStart"](0,"bit-callout",12),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"youHavePremiumAccess")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](3,4,"alreadyPremiumFromOrg"),"\n"))}function jF(e,t){1&e&&(o["ɵɵelementStart"](0,"a",13),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](2,1,"purchasePremium"),"\n  "))}function LF(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"form",14,15),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](8,"\n    "),o["ɵɵelementStart"](9,"div",16),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"label",17),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n      "),o["ɵɵelement"](15,"input",18),o["ɵɵtext"](16,"\n      "),o["ɵɵelementStart"](17,"small",19),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n    "),o["ɵɵelementStart"](22,"bit-submit-button",20),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n"),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵreference"](7),t=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,6,"uploadLicenseFilePremium")),o["ɵɵadvance"](3),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,8,"licenseFile")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](19,10,"licenseFileDesc","bitwarden_premium_license.json")),o["ɵɵadvance"](4),o["ɵɵproperty"]("loading",e.loading),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](24,13,"submit"),"\n    ")}}function KF(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",14,15),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"h2",21),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n  "),o["ɵɵelementStart"](7,"div",22),o["ɵɵtext"](8,"\n    "),o["ɵɵelementStart"](9,"div",23),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"label",24),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n      "),o["ɵɵelementStart"](15,"input",25),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().additionalStorage=t})),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n      "),o["ɵɵelementStart"](18,"small",26),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵpipe"](21,"currency"),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n  "),o["ɵɵelementStart"](26,"h2",27),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29),o["ɵɵpipe"](30,"i18n"),o["ɵɵpipe"](31,"currency"),o["ɵɵelement"](32,"br"),o["ɵɵtext"](33),o["ɵɵpipe"](34,"i18n"),o["ɵɵpipe"](35,"currency"),o["ɵɵpipe"](36,"currency"),o["ɵɵelement"](37,"hr",28),o["ɵɵtext"](38,"\n  "),o["ɵɵelementStart"](39,"h2",29),o["ɵɵtext"](40),o["ɵɵpipe"](41,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n  "),o["ɵɵelement"](43,"app-payment",30),o["ɵɵtext"](44,"\n  "),o["ɵɵelement"](45,"app-tax-info"),o["ɵɵtext"](46,"\n  "),o["ɵɵelementStart"](47,"div",31),o["ɵɵtext"](48,"\n    "),o["ɵɵelementStart"](49,"div",32),o["ɵɵtext"](50),o["ɵɵpipe"](51,"i18n"),o["ɵɵpipe"](52,"currency"),o["ɵɵelement"](53,"br"),o["ɵɵtext"](54,"\n      "),o["ɵɵelementContainerStart"](55),o["ɵɵtext"](56),o["ɵɵpipe"](57,"i18n"),o["ɵɵpipe"](58,"currency"),o["ɵɵelementContainerEnd"](),o["ɵɵtext"](59,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n    "),o["ɵɵelement"](61,"hr",33),o["ɵɵtext"](62,"\n    "),o["ɵɵelementStart"](63,"p",34),o["ɵɵtext"](64,"\n      "),o["ɵɵelementStart"](65,"strong"),o["ɵɵtext"](66),o["ɵɵpipe"](67,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](68),o["ɵɵpipe"](69,"currency"),o["ɵɵpipe"](70,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](71,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n  "),o["ɵɵelementStart"](73,"small",35),o["ɵɵtext"](74),o["ɵɵpipe"](75,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n  "),o["ɵɵelementStart"](77,"bit-submit-button",20),o["ɵɵtext"](78),o["ɵɵpipe"](79,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](80,"\n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](5,25,"addons")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,27,"additionalStorageGb")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](16,29,"additionalStorageGbDesc")),o["ɵɵproperty"]("ngModel",t.additionalStorage),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind4"](20,31,"additionalStorageIntervalDesc","1 GB",o["ɵɵpipeBind2"](21,36,t.storageGbPrice,"$"),o["ɵɵpipeBind1"](22,39,"year"))),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](28,41,"summary")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate2"]("\n  ",o["ɵɵpipeBind1"](30,43,"premiumMembership"),": ",o["ɵɵpipeBind2"](31,45,t.premiumPrice,"$")," "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate4"]("\n  ",o["ɵɵpipeBind1"](34,48,"additionalStorageGb"),": ",t.additionalStorage||0," GB ×\n  ",o["ɵɵpipeBind2"](35,50,t.storageGbPrice,"$")," =\n  ",o["ɵɵpipeBind2"](36,53,t.additionalStorageTotal,"$"),"\n  "),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](41,56,"paymentInformation")),o["ɵɵadvance"](3),o["ɵɵproperty"]("hideBank",!0),o["ɵɵadvance"](7),o["ɵɵtextInterpolate2"]("\n      ",o["ɵɵpipeBind1"](51,58,"planPrice"),": ",o["ɵɵpipeBind2"](52,60,t.subtotal,"USD $"),"\n      "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate2"]("\n        ",o["ɵɵpipeBind1"](57,63,"estimatedTax"),": ",o["ɵɵpipeBind2"](58,65,t.taxCharges,"USD $"),"\n      "),o["ɵɵadvance"](10),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](67,68,"total"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate2"](" ",o["ɵɵpipeBind2"](69,70,t.total,"USD $"),"/",o["ɵɵpipeBind1"](70,73,"year"),"\n    "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](75,75,"paymentChargedAnnually")),o["ɵɵadvance"](3),o["ɵɵproperty"]("loading",e.loading),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](79,77,"submit"),"\n  ")}}const GF=function(e){return{"mb-0":e}};class qF{constructor(e,t,n,i,r,o,a,s,l){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.tokenService=i,this.router=r,this.messagingService=o,this.syncService=a,this.logService=s,this.stateService=l,this.canAccessPremium=!1,this.selfHosted=!1,this.premiumPrice=10,this.storageGbPrice=4,this.additionalStorage=0,this.selfHosted=n.isSelfHost()}ngOnInit(){return zF(this,void 0,void 0,(function*(){this.canAccessPremium=yield this.stateService.getCanAccessPremium();(yield this.stateService.getHasPremiumPersonally())&&this.router.navigate(["/settings/subscription/user-subscription"])}))}submit(){return zF(this,void 0,void 0,(function*(){let e=null;if(this.selfHosted){if(e=document.getElementById("file").files,null==e||0===e.length)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("selectFile"))}try{if(this.selfHosted){if(!this.tokenService.getEmailVerified())return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("verifyEmailFirst"));const t=new FormData;t.append("license",e[0]),this.formPromise=this.apiService.postAccountLicense(t).then((()=>this.finalizePremium()))}else this.formPromise=this.paymentComponent.createPaymentToken().then((e=>{const t=new FormData;return t.append("paymentMethodType",e[1].toString()),null!=e[0]&&t.append("paymentToken",e[0]),t.append("additionalStorageGb",(this.additionalStorage||0).toString()),t.append("country",this.taxInfoComponent.taxInfo.country),t.append("postalCode",this.taxInfoComponent.taxInfo.postalCode),this.apiService.postPremium(t)})).then((e=>e.success||null==e.paymentIntentClientSecret?this.finalizePremium():this.paymentComponent.handleStripeCardPayment(e.paymentIntentClientSecret,(()=>this.finalizePremium()))));yield this.formPromise}catch(t){this.logService.error(t)}}))}finalizePremium(){return zF(this,void 0,void 0,(function*(){yield this.apiService.refreshIdentityToken(),yield this.syncService.fullSync(!0),this.platformUtilsService.showToast("success",null,this.i18nService.t("premiumUpdated")),this.messagingService.send("purchasedPremium"),this.router.navigate(["/settings/subscription/user-subscription"])}))}get additionalStorageTotal(){return this.storageGbPrice*Math.abs(this.additionalStorage||0)}get subtotal(){return this.premiumPrice+this.additionalStorageTotal}get taxCharges(){return null!=this.taxInfoComponent&&null!=this.taxInfoComponent.taxRate?this.taxInfoComponent.taxRate/100*this.subtotal:0}get total(){return this.subtotal+this.taxCharges||0}}qF.ɵfac=function(e){return new(e||qF)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](bi),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](v),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](P.b))},qF.ɵcmp=o["ɵɵdefineComponent"]({type:qF,selectors:[["app-premium"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](Ay,5),o["ɵɵviewQuery"](Px,5)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.paymentComponent=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.taxInfoComponent=e.first)}},decls:69,vars:40,consts:[["class","page-header",4,"ngIf"],["class","tabbed-header",4,"ngIf"],["type","info","icon","bwi bwi-star-f",3,"title",4,"ngIf"],["type","success"],[1,"bwi-ul"],["aria-hidden","true",1,"bwi","bwi-check","text-success","bwi-li"],[1,"text-lg",3,"ngClass"],["bitButton","","href","https://vault.bitwarden.com/#/settings/premium","target","_blank","rel","noopener","buttonType","secondary",4,"ngIf"],[4,"ngIf"],["ngNativeValidate","",3,"appApiAction","ngSubmit",4,"ngIf"],[1,"page-header"],[1,"tabbed-header"],["type","info","icon","bwi bwi-star-f",3,"title"],["bitButton","","href","https://vault.bitwarden.com/#/settings/premium","target","_blank","rel","noopener","buttonType","secondary"],["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"form-group"],["for","file"],["type","file","id","file","name","file","required","",1,"form-control-file"],[1,"form-text","text-muted"],[3,"loading"],[1,"mt-5"],[1,"row"],[1,"form-group","col-6"],["for","additionalStorage"],["id","additionalStorage","type","number","name","AdditionalStorageGb","min","0","max","99","step","1",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"text-muted","form-text"],[1,"spaced-header"],[1,"my-3"],[1,"spaced-header","mb-4"],[3,"hideBank"],["id","price",1,"my-4"],[1,"text-muted","text-sm"],[1,"my-1","col-3","ml-0"],[1,"text-lg"],[1,"text-muted","font-italic"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,NF,6,3,"div",0),o["ɵɵtext"](1,"\n"),o["ɵɵtemplate"](2,VF,6,3,"div",1),o["ɵɵtext"](3,"\n"),o["ɵɵtemplate"](4,HF,4,6,"bit-callout",2),o["ɵɵtext"](5,"\n"),o["ɵɵelementStart"](6,"bit-callout",3),o["ɵɵtext"](7,"\n  "),o["ɵɵelementStart"](8,"p"),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n  "),o["ɵɵelementStart"](12,"ul",4),o["ɵɵtext"](13,"\n    "),o["ɵɵelementStart"](14,"li"),o["ɵɵtext"](15,"\n      "),o["ɵɵelement"](16,"i",5),o["ɵɵtext"](17),o["ɵɵpipe"](18,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n    "),o["ɵɵelementStart"](20,"li"),o["ɵɵtext"](21,"\n      "),o["ɵɵelement"](22,"i",5),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n    "),o["ɵɵelementStart"](26,"li"),o["ɵɵtext"](27,"\n      "),o["ɵɵelement"](28,"i",5),o["ɵɵtext"](29),o["ɵɵpipe"](30,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n    "),o["ɵɵelementStart"](32,"li"),o["ɵɵtext"](33,"\n      "),o["ɵɵelement"](34,"i",5),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n    "),o["ɵɵelementStart"](38,"li"),o["ɵɵtext"](39,"\n      "),o["ɵɵelement"](40,"i",5),o["ɵɵtext"](41),o["ɵɵpipe"](42,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n    "),o["ɵɵelementStart"](44,"li"),o["ɵɵtext"](45,"\n      "),o["ɵɵelement"](46,"i",5),o["ɵɵtext"](47),o["ɵɵpipe"](48,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n    "),o["ɵɵelementStart"](50,"li"),o["ɵɵtext"](51,"\n      "),o["ɵɵelement"](52,"i",5),o["ɵɵtext"](53),o["ɵɵpipe"](54,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n  "),o["ɵɵelementStart"](57,"p",6),o["ɵɵtext"](58),o["ɵɵpipe"](59,"i18n"),o["ɵɵpipe"](60,"currency"),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n  "),o["ɵɵtemplate"](62,jF,3,3,"a",7),o["ɵɵtext"](63,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n"),o["ɵɵtemplate"](65,LF,27,15,"ng-container",8),o["ɵɵtext"](66,"\n"),o["ɵɵtemplate"](67,KF,81,79,"form",9),o["ɵɵtext"](68,"\n")),2&e&&(o["ɵɵproperty"]("ngIf",t.selfHosted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.selfHosted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.canAccessPremium),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,16,"premiumUpgradeUnlockFeatures")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](18,18,"premiumSignUpStorage"),"\n    "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](24,20,"premiumSignUpTwoStep"),"\n    "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](30,22,"premiumSignUpEmergency"),"\n    "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](36,24,"premiumSignUpReports"),"\n    "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](42,26,"premiumSignUpTotp"),"\n    "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](48,28,"premiumSignUpSupport"),"\n    "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](54,30,"premiumSignUpFuture"),"\n    "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](38,GF,!t.selfHosted)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind2"](59,32,"premiumPrice",o["ɵɵpipeBind2"](60,35,t.premiumPrice,"$")),"\n  "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.selfHosted),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.selfHosted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.selfHosted))},directives:[B.NgIf,iC.O,B.NgClass,et.H,d.NgControlStatusGroup,d.NgForm,Y.b,at,d.MinValidator,d.MaxValidator,d.NumberValueAccessor,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,Ay,Px],pipes:[M.C,B.CurrencyPipe],encapsulation:2});var _F=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function $F(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",1),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"ul",2),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"li",3),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"a",4),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementStart"](11,"li",3),o["ɵɵtext"](12,"\n      "),o["ɵɵelementStart"](13,"a",5),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n    "),o["ɵɵelementStart"](18,"li",3),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"a",6),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](6),o["ɵɵproperty"]("routerLink",e.subscriptionRoute),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](8,4,"subscription"),"\n      "),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](15,6,"paymentMethod"),"\n      "),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](22,8,"billingHistory"),"\n      ")}}class WF{constructor(e,t){this.stateService=e,this.platformUtilsService=t}ngOnInit(){return _F(this,void 0,void 0,(function*(){this.hasPremium=yield this.stateService.getHasPremiumPersonally(),this.selfHosted=this.platformUtilsService.isSelfHost()}))}get subscriptionRoute(){return this.hasPremium?"user-subscription":"premium"}}WF.ɵfac=function(e){return new(e||WF)(o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](E.P))},WF.ɵcmp=o["ɵɵdefineComponent"]({type:WF,selectors:[["app-subscription"]],decls:4,vars:1,consts:[["class","tabbed-nav d-flex flex-column",4,"ngIf"],[1,"tabbed-nav","d-flex","flex-column"],[1,"nav","nav-tabs"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],["routerLink","payment-method","routerLinkActive","active",1,"nav-link"],["routerLink","billing-history","routerLinkActive","active",1,"nav-link"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,$F,26,10,"div",0),o["ɵɵtext"](1,"\n"),o["ɵɵelement"](2,"router-outlet"),o["ɵɵtext"](3,"\n")),2&e&&o["ɵɵproperty"]("ngIf",!t.selfHosted)},directives:[B.NgIf,p.RouterOutlet,p.RouterLinkWithHref,p.RouterLinkActive],pipes:[M.C],encapsulation:2});var QF=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const YF=function(e){return{"bwi-spin":e}};function ZF(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",3),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().load()})),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",4),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](5,YF,e.loading)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,3,"refresh"),"\n  ")}}function JF(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",5),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",6),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function XF(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"noInvoices")))}function eR(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",15),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,1,"paid"),"\n          "))}function tR(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",16),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,1,"unpaid"),"\n          "))}function nR(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"td"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"date"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"td"),o["ɵɵtext"](7,"\n          "),o["ɵɵelementStart"](8,"a",12),o["ɵɵpipe"](9,"i18n"),o["ɵɵtext"](10,"\n            "),o["ɵɵelement"](11,"i",13),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n          "),o["ɵɵelementStart"](13,"a",14),o["ɵɵpipe"](14,"i18n"),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementStart"](19,"td"),o["ɵɵtext"](20),o["ɵɵpipe"](21,"currency"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n        "),o["ɵɵelementStart"](23,"td"),o["ɵɵtext"](24,"\n          "),o["ɵɵtemplate"](25,eR,5,3,"span",2),o["ɵɵtext"](26,"\n          "),o["ɵɵtemplate"](27,tR,5,3,"span",2),o["ɵɵtext"](28,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](4,9,e.date,"mediumDate")),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("href",e.pdfUrl,o["ɵɵsanitizeUrl"]),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](9,12,"downloadInvoice")),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("href",e.url,o["ɵɵsanitizeUrl"]),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](14,14,"viewInvoice")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind2"](16,16,"invoiceNumber",e.number),""),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](21,19,e.amount,"$")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.paid),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.paid)}}function iR(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",10),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n      "),o["ɵɵtemplate"](4,nR,30,22,"tr",11),o["ɵɵtext"](5,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.invoices)}}function rR(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"noTransactions")))}function oR(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"chargeNoun"),"\n          "))}function aR(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"refundNoun")))}const sR=function(e,t,n,i){return{"bwi-credit-card":e,"bwi-bank":t,"bwi-bitcoin text-warning":n,"bwi-paypal text-primary":i}};function lR(e,t){if(1&e&&o["ɵɵelement"](0,"i",19),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](3);o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction4"](1,sR,e.paymentMethodType===t.paymentMethodType.Card,e.paymentMethodType===t.paymentMethodType.BankAccount||e.paymentMethodType===t.paymentMethodType.WireTransfer,e.paymentMethodType===t.paymentMethodType.BitPay,e.paymentMethodType===t.paymentMethodType.PayPal))}}const dR=function(e){return{"text-strike":e}};function cR(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"td"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"date"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"td"),o["ɵɵtext"](7,"\n          "),o["ɵɵtemplate"](8,oR,3,3,"span",2),o["ɵɵtext"](9,"\n          "),o["ɵɵtemplate"](10,aR,3,3,"span",2),o["ɵɵtext"](11,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"td"),o["ɵɵtext"](14,"\n          "),o["ɵɵtemplate"](15,lR,1,6,"i",17),o["ɵɵtext"](16),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementStart"](18,"td",18),o["ɵɵpipe"](19,"i18n"),o["ɵɵtext"](20),o["ɵɵpipe"](21,"currency"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](4,8,e.createdDate,"mediumDate")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.type===n.transactionType.Charge||e.type===n.transactionType.Credit),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===n.transactionType.Refund),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.paymentMethodType),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",e.details,"\n        "),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](19,11,e.refunded?"refunded":"")),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](16,dR,e.refunded)),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind2"](21,13,e.amount,"$"),"\n        ")}}function pR(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",10),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n      "),o["ɵɵtemplate"](4,cR,23,18,"tr",11),o["ɵɵtext"](5,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.transactions)}}function uR(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h2"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵtemplate"](6,XF,3,3,"p",2),o["ɵɵtext"](7,"\n  "),o["ɵɵtemplate"](8,iR,7,1,"table",7),o["ɵɵtext"](9,"\n  "),o["ɵɵelementStart"](10,"h2",8),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵtemplate"](14,rR,3,3,"p",2),o["ɵɵtext"](15,"\n  "),o["ɵɵtemplate"](16,pR,7,1,"table",7),o["ɵɵtext"](17,"\n  "),o["ɵɵelementStart"](18,"small",9),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,7,"invoices")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.invoices||!e.invoices.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.invoices&&e.invoices.length),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,9,"transactions")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!e.transactions||!e.transactions.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.transactions&&e.transactions.length),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("* ",o["ɵɵpipeBind2"](20,11,"chargesStatement","BITWARDEN"),"")}}class mR{constructor(e,t,n,i){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.router=i,this.loading=!1,this.firstLoaded=!1,this.paymentMethodType=Xx,this.transactionType=ey}ngOnInit(){return QF(this,void 0,void 0,(function*(){this.platformUtilsService.isSelfHost()&&this.router.navigate(["/settings/subscription"]),yield this.load(),this.firstLoaded=!0}))}load(){return QF(this,void 0,void 0,(function*(){this.loading||(this.loading=!0,this.billing=yield this.apiService.getUserBillingHistory(),this.loading=!1)}))}get invoices(){return null!=this.billing?this.billing.invoices:null}get transactions(){return null!=this.billing?this.billing.transactions:null}}mR.ɵfac=function(e){return new(e||mR)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](p.Router))},mR.ɵcmp=o["ɵɵdefineComponent"]({type:mR,selectors:[["app-user-billing"]],decls:13,vars:6,consts:[[1,"tabbed-header","d-flex"],["bitButton","","buttonType","secondary","class","tw-ml-auto",3,"disabled","click",4,"ngIf"],[4,"ngIf"],["bitButton","","buttonType","secondary",1,"tw-ml-auto",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-refresh","bwi-fw",3,"ngClass"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["class","table mb-2",4,"ngIf"],[1,"spaced-header"],[1,"text-muted"],[1,"table","mb-2"],[4,"ngFor","ngForOf"],["target","_blank","rel","noopener",1,"mr-2",3,"href","appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-file-pdf"],["target","_blank","rel","noopener",3,"href","title"],["aria-hidden","true",1,"bwi","bwi-check","text-success"],["aria-hidden","true",1,"bwi","bwi-exclamation-circle","text-muted"],["class","bwi bwi-fw","aria-hidden","true",3,"ngClass",4,"ngIf"],[3,"ngClass","title"],["aria-hidden","true",1,"bwi","bwi-fw",3,"ngClass"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵtemplate"](6,ZF,5,7,"button",1),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵtemplate"](9,JF,9,6,"ng-container",2),o["ɵɵtext"](10,"\n"),o["ɵɵtemplate"](11,uR,22,14,"ng-container",2),o["ɵɵtext"](12,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](4,4,"billingHistory"),"\n  "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.firstLoaded),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",!t.firstLoaded&&t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.billing))},directives:[B.NgIf,et.H,B.NgClass,B.NgForOf,pe],pipes:[M.C,B.DatePipe,B.CurrencyPipe],encapsulation:2});var hR=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function vR(e,t){1&e&&(o["ɵɵelementStart"](0,"small"),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",2),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n      "),o["ɵɵelementStart"](5,"span",3),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function gR(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",2),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",3),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function fR(e,t){1&e&&(o["ɵɵelementStart"](0,"bit-callout",6),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"canceled")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](3,4,"subscriptionCanceled"),""))}function xR(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"bit-callout",6),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2,"\n    "),o["ɵɵelementStart"](3,"p"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n    "),o["ɵɵelementStart"](7,"button",7,8),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).reinstate()})),o["ɵɵtext"](9,"\n      "),o["ɵɵelement"](10,"i",9),o["ɵɵpipe"](11,"i18n"),o["ɵɵtext"](12,"\n      "),o["ɵɵelementStart"](13,"span"),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](8),t=o["ɵɵnextContext"](2);o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,6,"pendingCancellation")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](5,8,"subscriptionPendingCanceled")),o["ɵɵadvance"](3),o["ɵɵproperty"]("appApiAction",t.reinstatePromise)("disabled",e.loading),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](11,10,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](15,12,"reinstateSubscription"))}}function yR(e,t){if(1&e&&(o["ɵɵelementStart"](0,"dd"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"date"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](2,1,e.sub.expiration,"mediumDate"))}}function SR(e,t){1&e&&(o["ɵɵelementStart"](0,"dd"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"neverExpires")))}function bR(e,t){if(1&e&&(o["ɵɵelementStart"](0,"dl"),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"dt"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n    "),o["ɵɵtemplate"](6,yR,3,4,"dd",1),o["ɵɵtext"](7,"\n    "),o["ɵɵtemplate"](8,SR,3,3,"dd",1),o["ɵɵtext"](9,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"expiration")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.sub.expiration),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.sub.expiration)}}function wR(e,t){1&e&&(o["ɵɵelementStart"](0,"span",15),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"pendingCancellation")))}function IR(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"td"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"currency"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"td"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"currency"),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n          "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](3),o["ɵɵtextInterpolate3"]("\n              ",e.name," ",e.quantity>1?"×"+e.quantity:""," @\n              ",o["ɵɵpipeBind2"](4,5,e.amount,"$"),"\n            "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate2"]("",o["ɵɵpipeBind2"](8,8,e.quantity*e.amount,"$")," /",o["ɵɵpipeBind1"](9,11,e.interval),"")}}function CR(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",16),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"strong",17),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"table",18),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"tbody"),o["ɵɵtext"](9,"\n          "),o["ɵɵtemplate"](10,IR,11,13,"tr",19),o["ɵɵtext"](11,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n    "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,2,"details")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngForOf",e.subscription.items)}}function ER(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",10),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",11),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"dl"),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"dt"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementStart"](10,"dd"),o["ɵɵtext"](11,"\n          "),o["ɵɵelementStart"](12,"span",12),o["ɵɵtext"](13),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n          "),o["ɵɵtemplate"](15,wR,3,3,"span",13),o["ɵɵtext"](16,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementStart"](18,"dt"),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n        "),o["ɵɵelementStart"](22,"dd"),o["ɵɵtext"](23),o["ɵɵpipe"](24,"date"),o["ɵɵpipe"](25,"currency"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n    "),o["ɵɵtemplate"](29,CR,14,4,"div",14),o["ɵɵtext"](30,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,6,"status")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](e.subscription&&e.subscription.status||"-"),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.subscriptionMarkedForCancel),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](20,8,"nextCharge")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n          ",e.nextInvoice?o["ɵɵpipeBind2"](24,10,e.nextInvoice.date,"mediumDate")+", "+o["ɵɵpipeBind2"](25,13,e.nextInvoice.amount,"$"):"-","\n        "),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",e.subscription)}}function kR(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",23),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",24),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"button",25),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).closeUpdateLicense(!1)})),o["ɵɵpipe"](5,"i18n"),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"span",26),o["ɵɵtext"](8,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n        "),o["ɵɵelementStart"](11,"h3",27),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"app-update-license",28),o["ɵɵlistener"]("onUpdated",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).closeUpdateLicense(!0)}))("onCanceled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).closeUpdateLicense(!1)})),o["ɵɵtext"](16,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n    "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](5,2,"cancel")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,4,"updateLicense")))}function PR(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div"),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"button",20),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).updateLicense()})),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n      "),o["ɵɵelementStart"](8,"a",21),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n    "),o["ɵɵtemplate"](13,kR,19,6,"div",22),o["ɵɵtext"](14,"\n  "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](6,3,"updateLicense"),"\n      "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](10,5,"manageSubscription"),"\n      "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.showUpdateLicense)}}function AR(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",35),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).downloadLicense()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](2,1,"downloadLicense"),"\n      "))}function OR(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",36,37),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).cancel()})),o["ɵɵtext"](2,"\n        "),o["ɵɵelement"](3,"i",9),o["ɵɵpipe"](4,"i18n"),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"span"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"](3);o["ɵɵproperty"]("appApiAction",t.cancelPromise)("disabled",e.loading),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](4,4,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,6,"cancelSubscription"))}}function TR(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",29),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"button",35),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](4).adjustStorage(!0)})),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"button",41),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](4).adjustStorage(!1)})),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,2,"addStorage"),"\n          "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](8,4,"removeStorage"),"\n          "))}function BR(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"app-adjust-storage",42),o["ɵɵlistener"]("onAdjusted",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](4).closeStorage(!0)}))("onCanceled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](4).closeStorage(!1)})),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](4);o["ɵɵproperty"]("storageGbPrice",4)("add",e.adjustStorageAdd)}}function MR(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",38),o["ɵɵtext"](3,"\n        "),o["ɵɵtemplate"](4,TR,10,6,"div",39),o["ɵɵtext"](5,"\n        "),o["ɵɵtemplate"](6,BR,1,2,"app-adjust-storage",40),o["ɵɵtext"](7,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!e.showAdjustStorage),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.showAdjustStorage)}}const DR=function(e){return{width:e}};function FR(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",29),o["ɵɵtext"](3,"\n      "),o["ɵɵtemplate"](4,AR,3,3,"button",30),o["ɵɵtext"](5,"\n      "),o["ɵɵtemplate"](6,OR,10,8,"button",31),o["ɵɵtext"](7,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementStart"](9,"h2",32),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n    "),o["ɵɵelementStart"](13,"p"),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n    "),o["ɵɵelementStart"](17,"div",33),o["ɵɵtext"](18,"\n      "),o["ɵɵelementStart"](19,"div",34),o["ɵɵtext"](20),o["ɵɵpipe"](21,"percent"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n    "),o["ɵɵtemplate"](24,MR,9,2,"ng-container",1),o["ɵɵtext"](25,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!e.subscription||!e.subscription.cancelled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.subscription&&!e.subscription.cancelled&&!e.subscriptionMarkedForCancel),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,8,"storage")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind3"](15,10,"subscriptionStorage",e.sub.maxStorageGb||0,e.sub.storageName||"0 MB")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngStyle",o["ɵɵpureFunction1"](16,DR,e.storageProgressWidth+"%")),o["ɵɵattribute"]("aria-valuenow",e.storagePercentage),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](21,14,e.storagePercentage/100),"\n      "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.subscription&&!e.subscription.cancelled&&!e.subscriptionMarkedForCancel)}}function RR(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,fR,4,6,"bit-callout",4),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,xR,18,14,"bit-callout",4),o["ɵɵtext"](5,"\n  "),o["ɵɵtemplate"](6,bR,10,5,"dl",1),o["ɵɵtext"](7,"\n  "),o["ɵɵtemplate"](8,ER,31,16,"div",5),o["ɵɵtext"](9,"\n  "),o["ɵɵtemplate"](10,PR,15,7,"ng-container",1),o["ɵɵtext"](11,"\n  "),o["ɵɵtemplate"](12,FR,26,18,"ng-container",1),o["ɵɵtext"](13,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.subscription&&e.subscription.cancelled),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.subscriptionMarkedForCancel),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.selfHosted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.selfHosted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.selfHosted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.selfHosted)}}const UR=function(e,t){return{"page-header":e,"tabbed-header":t}};class zR{constructor(e,t,n,i,r,o,a){this.stateService=e,this.apiService=t,this.platformUtilsService=n,this.i18nService=i,this.router=r,this.logService=o,this.fileDownloadService=a,this.loading=!1,this.firstLoaded=!1,this.adjustStorageAdd=!0,this.showAdjustStorage=!1,this.showUpdateLicense=!1,this.selfHosted=!1,this.selfHosted=n.isSelfHost()}ngOnInit(){return hR(this,void 0,void 0,(function*(){yield this.load(),this.firstLoaded=!0}))}load(){return hR(this,void 0,void 0,(function*(){this.loading||(this.stateService.getHasPremiumPersonally()?(this.loading=!0,this.sub=yield this.apiService.getUserSubscription(),this.loading=!1):this.router.navigate(["/settings/subscription/premium"]))}))}reinstate(){return hR(this,void 0,void 0,(function*(){if(this.loading)return;if(this.usingInAppPurchase)return void this.platformUtilsService.showDialog(this.i18nService.t("manageSubscriptionFromStore"),this.i18nService.t("cancelSubscription"),null,null,"warning");if(yield this.platformUtilsService.showDialog(this.i18nService.t("reinstateConfirmation"),this.i18nService.t("reinstateSubscription"),this.i18nService.t("yes"),this.i18nService.t("cancel")))try{this.reinstatePromise=this.apiService.postReinstatePremium(),yield this.reinstatePromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("reinstated")),this.load()}catch(e){this.logService.error(e)}}))}cancel(){return hR(this,void 0,void 0,(function*(){if(this.loading)return;if(this.usingInAppPurchase)return void this.platformUtilsService.showDialog(this.i18nService.t("manageSubscriptionFromStore"),this.i18nService.t("cancelSubscription"),null,null,"warning");if(yield this.platformUtilsService.showDialog(this.i18nService.t("cancelConfirmation"),this.i18nService.t("cancelSubscription"),this.i18nService.t("yes"),this.i18nService.t("no"),"warning"))try{this.cancelPromise=this.apiService.postCancelPremium(),yield this.cancelPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("canceledSubscription")),this.load()}catch(e){this.logService.error(e)}}))}downloadLicense(){if(this.loading)return;const e=JSON.stringify(this.sub.license,null,2);this.fileDownloadService.download({fileName:"bitwarden_premium_license.json",blobData:e})}updateLicense(){this.loading||(this.showUpdateLicense=!0)}closeUpdateLicense(e){this.showUpdateLicense=!1,e&&this.load()}adjustStorage(e){this.usingInAppPurchase?this.platformUtilsService.showDialog(this.i18nService.t("cannotPerformInAppPurchase"),this.i18nService.t(e?"addStorage":"removeStorage"),null,null,"warning"):(this.adjustStorageAdd=e,this.showAdjustStorage=!0)}closeStorage(e){this.showAdjustStorage=!1,e&&this.load()}get subscriptionMarkedForCancel(){return null!=this.subscription&&!this.subscription.cancelled&&this.subscription.cancelAtEndDate}get subscription(){return null!=this.sub?this.sub.subscription:null}get nextInvoice(){return null!=this.sub?this.sub.upcomingInvoice:null}get storagePercentage(){return null!=this.sub&&this.sub.maxStorageGb?+(this.sub.storageGb/this.sub.maxStorageGb*100).toFixed(2):0}get storageProgressWidth(){return this.storagePercentage<5?5:0}get usingInAppPurchase(){return null!=this.sub&&this.sub.usingInAppPurchase}get title(){return this.i18nService.t(this.selfHosted?"subscription":"premiumMembership")}}zR.ɵfac=function(e){return new(e||zR)(o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Ia._))},zR.ɵcmp=o["ɵɵdefineComponent"]({type:zR,selectors:[["app-user-subscription"]],decls:12,vars:8,consts:[[3,"ngClass"],[4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["type","warning",3,"title",4,"ngIf"],["class","row",4,"ngIf"],["type","warning",3,"title"],["bitButton","","type","button","buttonType","secondary",1,"btn-submit",3,"appApiAction","disabled","click"],["reinstateBtn",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[1,"row"],[1,"col-4"],[1,"text-capitalize"],["bitBadge","","badgeType","warning",4,"ngIf"],["class","col-8",4,"ngIf"],["bitBadge","","badgeType","warning"],[1,"col-8"],[1,"d-block","mb-1"],[1,"table"],[4,"ngFor","ngForOf"],["type","button","bitButton","","buttonType","secondary",3,"click"],["bitButton","","buttonType","secondary","href","https://vault.bitwarden.com/#/settings/subscription","target","_blank","rel","noopener"],["class","card mt-3",4,"ngIf"],[1,"card","mt-3"],[1,"card-body"],["type","button",1,"close",3,"appA11yTitle","click"],["aria-hidden","true"],[1,"card-body-header"],[3,"onUpdated","onCanceled"],[1,"d-flex"],["bitButton","","type","button","buttonType","secondary",3,"click",4,"ngIf"],["bitButton","","type","button","buttonType","danger","class","btn-submit tw-ml-auto",3,"appApiAction","disabled","click",4,"ngIf"],[1,"spaced-header"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success",3,"ngStyle"],["bitButton","","type","button","buttonType","secondary",3,"click"],["bitButton","","type","button","buttonType","danger",1,"btn-submit","tw-ml-auto",3,"appApiAction","disabled","click"],["cancelBtn",""],[1,"mt-3"],["class","d-flex",4,"ngIf"],[3,"storageGbPrice","add","onAdjusted","onCanceled",4,"ngIf"],["bitButton","","type","button","buttonType","secondary",1,"tw-ml-1",3,"click"],[3,"storageGbPrice","add","onAdjusted","onCanceled"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵtemplate"](4,vR,9,6,"small",1),o["ɵɵtext"](5,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n"),o["ɵɵtemplate"](8,gR,9,6,"ng-container",1),o["ɵɵtext"](9,"\n"),o["ɵɵtemplate"](10,RR,14,6,"ng-container",1),o["ɵɵtext"](11,"\n")),2&e&&(o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](5,UR,t.selfHosted,!t.selfHosted)),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",t.title,"\n    "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",t.firstLoaded&&t.loading),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!t.firstLoaded&&t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.sub))},directives:[B.NgClass,B.NgIf,iC.O,et.H,Y.b,Po.l,B.NgForOf,pe,qb,B.NgStyle,jb],pipes:[M.C,B.DatePipe,B.CurrencyPipe,B.PercentPipe],encapsulation:2});const NR=[{path:"",component:WF,data:{titleId:"subscription"},children:[{path:"",pathMatch:"full",redirectTo:"premium"},{path:"user-subscription",component:zR,data:{titleId:"premiumMembership"}},{path:"premium",component:qF,data:{titleId:"goPremium"}},{path:"payment-method",component:UF,data:{titleId:"paymentMethod"}},{path:"billing-history",component:mR,data:{titleId:"billingHistory"}}]}];class VR{}VR.ɵfac=function(e){return new(e||VR)},VR.ɵmod=o["ɵɵdefineNgModule"]({type:VR}),VR.ɵinj=o["ɵɵdefineInjector"]({imports:[[p.RouterModule.forChild(NR)],p.RouterModule]});class HR{}var jR=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class LR{constructor(e,t,n,i,r,a,s,l){this.passwordGenerationService=e,this.usernameGenerationService=t,this.platformUtilsService=n,this.stateService=i,this.i18nService=r,this.logService=a,this.route=s,this.win=l,this.comingFromAddEdit=!1,this.onSelected=new o.EventEmitter,this.usernameOptions={},this.passwordOptions={},this.username="-",this.password="-",this.showOptions=!1,this.avoidAmbiguous=!1,this.usernameWebsite=null,this.typeOptions=[{name:r.t("password"),value:"password"},{name:r.t("username"),value:"username"}],this.passTypeOptions=[{name:r.t("password"),value:"password"},{name:r.t("passphrase"),value:"passphrase"}],this.usernameTypeOptions=[{name:r.t("plusAddressedEmail"),value:"subaddress",desc:r.t("plusAddressedEmailDesc")},{name:r.t("catchallEmail"),value:"catchall",desc:r.t("catchallEmailDesc")},{name:r.t("forwardedEmail"),value:"forwarded",desc:r.t("forwardedEmailDesc")},{name:r.t("randomWord"),value:"word"}],this.subaddressOptions=[{name:r.t("random"),value:"random"}],this.catchallOptions=[{name:r.t("random"),value:"random"}],this.forwardOptions=[{name:"SimpleLogin",value:"simplelogin"},{name:"AnonAddy",value:"anonaddy"},{name:"Firefox Relay",value:"firefoxrelay"}]}ngOnInit(){return jR(this,void 0,void 0,(function*(){this.route.queryParams.pipe((0,C.P)()).subscribe((e=>jR(this,void 0,void 0,(function*(){var t;const n=yield this.passwordGenerationService.getOptions();if(this.passwordOptions=n[0],this.enforcedPasswordPolicyOptions=n[1],this.avoidAmbiguous=!this.passwordOptions.ambiguous,this.passwordOptions.type="passphrase"===this.passwordOptions.type?"passphrase":"password",this.usernameOptions=yield this.usernameGenerationService.getOptions(),null==this.usernameOptions.type&&(this.usernameOptions.type="word"),null!=this.usernameOptions.subaddressEmail&&""!==this.usernameOptions.subaddressEmail||(this.usernameOptions.subaddressEmail=yield this.stateService.getEmail()),null==this.usernameWebsite)this.usernameOptions.subaddressType=this.usernameOptions.catchallType="random";else{this.usernameOptions.website=this.usernameWebsite;const e={name:this.i18nService.t("websiteName"),value:"website-name"};this.subaddressOptions.push(e),this.catchallOptions.push(e)}if("username"!==this.type&&"password"!==this.type)if("username"===e.type||"password"===e.type)this.type=e.type;else{const e=yield this.stateService.getGeneratorOptions();this.type=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:"password"}this.regenerateWithoutButtonPress()&&(yield this.regenerate())}))))}))}typeChanged(){return jR(this,void 0,void 0,(function*(){yield this.stateService.setGeneratorOptions({type:this.type}),this.regenerateWithoutButtonPress()&&(yield this.regenerate())}))}regenerate(){return jR(this,void 0,void 0,(function*(){"password"===this.type?yield this.regeneratePassword():"username"===this.type&&(yield this.regenerateUsername())}))}sliderChanged(){return jR(this,void 0,void 0,(function*(){this.savePasswordOptions(!1),yield this.passwordGenerationService.addHistory(this.password)}))}sliderInput(){return jR(this,void 0,void 0,(function*(){this.normalizePasswordOptions(),this.password=yield this.passwordGenerationService.generatePassword(this.passwordOptions)}))}savePasswordOptions(e=!0){return jR(this,void 0,void 0,(function*(){this.normalizePasswordOptions(),yield this.passwordGenerationService.saveOptions(this.passwordOptions),e&&this.regenerateWithoutButtonPress()&&(yield this.regeneratePassword())}))}saveUsernameOptions(e=!0){return jR(this,void 0,void 0,(function*(){yield this.usernameGenerationService.saveOptions(this.usernameOptions),"forwarded"===this.usernameOptions.type&&(this.username="-"),e&&this.regenerateWithoutButtonPress()&&(yield this.regenerateUsername())}))}regeneratePassword(){return jR(this,void 0,void 0,(function*(){this.password=yield this.passwordGenerationService.generatePassword(this.passwordOptions),yield this.passwordGenerationService.addHistory(this.password)}))}regenerateUsername(){return this.generateUsername()}generateUsername(){return jR(this,void 0,void 0,(function*(){try{this.usernameGeneratingPromise=this.usernameGenerationService.generateUsername(this.usernameOptions),this.username=yield this.usernameGeneratingPromise,""!==this.username&&null!==this.username||(this.username="-")}catch(e){this.logService.error(e)}}))}copy(){const e="password"===this.type,t=null!=this.win?{window:this.win}:null;this.platformUtilsService.copyToClipboard(e?this.password:this.username,t),this.platformUtilsService.showToast("info",null,this.i18nService.t("valueCopied",this.i18nService.t(e?"password":"username")))}select(){this.onSelected.emit("password"===this.type?this.password:this.username)}toggleOptions(){this.showOptions=!this.showOptions}regenerateWithoutButtonPress(){return"username"!==this.type||"forwarded"!==this.usernameOptions.type}normalizePasswordOptions(){if(this.passwordOptions.ambiguous=!this.avoidAmbiguous,!(this.passwordOptions.uppercase||this.passwordOptions.lowercase||this.passwordOptions.number||this.passwordOptions.special)&&(this.passwordOptions.lowercase=!0,null!=this.win)){const e=this.win.document.querySelector("#lowercase");e&&(e.checked=!0)}this.passwordGenerationService.normalizeOptions(this.passwordOptions,this.enforcedPasswordPolicyOptions)}}LR.ɵfac=function(e){return new(e||LR)(o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](HR),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](Window))},LR.ɵdir=o["ɵɵdefineDirective"]({type:LR,inputs:{comingFromAddEdit:"comingFromAddEdit",type:"type"},outputs:{onSelected:"onSelected"}});var KR=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class GR{constructor(e,t,n,i){this.passwordGenerationService=e,this.platformUtilsService=t,this.i18nService=n,this.win=i,this.history=[]}ngOnInit(){return KR(this,void 0,void 0,(function*(){this.history=yield this.passwordGenerationService.getHistory()}))}clear(){this.history=[],this.passwordGenerationService.clear()}copy(e){const t=null!=this.win?{window:this.win}:null;this.platformUtilsService.copyToClipboard(e,t),this.platformUtilsService.showToast("info",null,this.i18nService.t("valueCopied",this.i18nService.t("password")))}}GR.ɵfac=function(e){return new(e||GR)(o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Window))},GR.ɵdir=o["ɵɵdefineDirective"]({type:GR});class qR{constructor(e,t){this.el=e,this.platformUtilsService=t}onCopy(){if(null==window)return;let e="";const t=window.getSelection();for(let n=0;n<t.rangeCount;n++){const i=t.getRangeAt(n).toString();let r=i.length;const o=i.search(/(?:\r\n|\r|\n)/);if(o>-1){""===i.substr(o).trim()&&(r=o)}e+=i.substring(0,r)}this.platformUtilsService.copyToClipboard(e,{window})}}qR.ɵfac=function(e){return new(e||qR)(o["ɵɵdirectiveInject"](o.ElementRef),o["ɵɵdirectiveInject"](E.P))},qR.ɵdir=o["ɵɵdefineDirective"]({type:qR,selectors:[["","appSelectCopy",""]],hostBindings:function(e,t){1&e&&o["ɵɵlistener"]("copy",(function(){return t.onCopy()}))}});class _R{transform(e){return this.generateTemplate(e,((e,t)=>`<span class="password-${t}">${e}</span>`))}generateTemplate(e,t){const n=Array.from(e);let i="";for(let r=0;r<n.length;r++){let e=n[r],o=!1;switch(e){case"&":e="&amp;",o=!0;break;case"<":e="&lt;",o=!0;break;case">":e="&gt;",o=!0;break;case" ":e="&nbsp;",o=!0}let a="letter";e.match(N.c.regexpEmojiPresentation)?a="emoji":o||e.match(/[^\w ]/)?a="special":e.match(/\d/)&&(a="number"),i+=t(e,a,r)}return i}}function $R(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"li",16),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"div",17),o["ɵɵtext"](3,"\n              "),o["ɵɵelement"](4,"div",18),o["ɵɵpipe"](5,"colorPassword"),o["ɵɵtext"](6,"\n              "),o["ɵɵelementStart"](7,"small",19),o["ɵɵtext"](8),o["ɵɵpipe"](9,"date"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵelementStart"](12,"div",10),o["ɵɵtext"](13,"\n              "),o["ɵɵelementStart"](14,"button",20),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).copy(t.password)})),o["ɵɵpipe"](15,"i18n"),o["ɵɵtext"](16,"\n                "),o["ɵɵelement"](17,"i",21),o["ɵɵtext"](18,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit;o["ɵɵadvance"](4),o["ɵɵproperty"]("innerHTML",o["ɵɵpipeBind1"](5,3,e.password),o["ɵɵsanitizeHtml"]),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](9,5,e.date,"medium")),o["ɵɵadvance"](6),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](15,8,"copyPassword"))}}function WR(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",13),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"ul",14),o["ɵɵtext"](3,"\n          "),o["ɵɵtemplate"](4,$R,21,10,"li",15),o["ɵɵtext"](5,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.history)}}function QR(e,t){1&e&&(o["ɵɵelementStart"](0,"div",13),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](2,1,"noPasswordsInList"),"\n      "))}_R.ɵfac=function(e){return new(e||_R)},_R.ɵpipe=o["ɵɵdefinePipe"]({name:"colorPassword",type:_R,pure:!0});class YR extends GR{constructor(e,t,n){super(e,t,n,window)}}YR.ɵfac=function(e){return new(e||YR)(o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D))},YR.ɵcmp=o["ɵɵdefineComponent"]({type:YR,selectors:[["app-password-generator-history"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:43,vars:14,consts:[["role","dialog","aria-modal","true","aria-labelledby","passHistoryTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","passHistoryTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"ml-auto"],["type","button",1,"btn","btn-outline-danger",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw"],[1,"modal-body"],[1,"list-group","list-group-flush"],["class","list-group-item d-flex",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex"],[1,"password-row"],["appSelectCopy","",1,"text-monospace","generated-wrapper",3,"innerHTML"],[1,"text-muted"],[1,"btn","btn-link",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-clone"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h2",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"button",5),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"span",6),o["ɵɵtext"](16,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵtemplate"](20,WR,7,1,"div",7),o["ɵɵtext"](21,"\n      "),o["ɵɵtemplate"](22,QR,3,3,"div",7),o["ɵɵtext"](23,"\n      "),o["ɵɵelementStart"](24,"div",8),o["ɵɵtext"](25,"\n        "),o["ɵɵelementStart"](26,"button",9),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n        "),o["ɵɵelementStart"](30,"div",10),o["ɵɵtext"](31,"\n          "),o["ɵɵelementStart"](32,"button",11),o["ɵɵlistener"]("click",(function(){return t.clear()})),o["ɵɵpipe"](33,"i18n"),o["ɵɵtext"](34,"\n            "),o["ɵɵelement"](35,"i",12),o["ɵɵtext"](36,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,6,"passwordHistory")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,8,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",t.history.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.history.length),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](28,10,"close"),"\n        "),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](33,12,"clear")))},directives:[pe,B.NgIf,B.NgForOf,qR],pipes:[M.C,_R,B.DatePipe],encapsulation:2});var ZR=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const JR=["historyTemplate"];function XR(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",10),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](2,1,"passwordGeneratorPolicyInEffect"),"\n"))}function eU(e,t){if(1&e&&(o["ɵɵelement"](0,"div",11),o["ɵɵpipe"](1,"colorPassword")),2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("innerHTML",o["ɵɵpipeBind1"](1,1,e.password),o["ɵɵsanitizeHtml"])}}function tU(e,t){if(1&e&&(o["ɵɵelement"](0,"div",11),o["ɵɵpipe"](1,"colorPassword")),2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("innerHTML",o["ɵɵpipeBind1"](1,1,e.username),o["ɵɵsanitizeHtml"])}}function nU(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",12),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"input",13),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().type=t}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().typeChanged()})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"label",14),o["ɵɵtext"](5),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("id","type_",e.value,""),o["ɵɵproperty"]("ngModel",n.type)("value",e.value)("checked",n.type===e.value),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("for","type_",e.value,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n      ",e.name,"\n    ")}}function iU(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",12),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"input",23),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).passwordOptions.type=t}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).savePasswordOptions()})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"label",14),o["ɵɵtext"](5),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("id","passwordType_",e.value,""),o["ɵɵproperty"]("ngModel",n.passwordOptions.type)("value",e.value)("checked",n.passwordOptions.type===e.value),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("for","passwordType_",e.value,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",e.name,"\n      ")}}function rU(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",24),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"div",25),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"label",26),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementStart"](10,"input",27),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).passwordOptions.numWords=t}))("blur",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).savePasswordOptions()})),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n      "),o["ɵɵelementStart"](13,"div",25),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"label",28),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementStart"](19,"input",29),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).passwordOptions.wordSeparator=t}))("blur",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).savePasswordOptions()})),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n    "),o["ɵɵelementStart"](23,"label",30),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n    "),o["ɵɵelementStart"](27,"div",31),o["ɵɵtext"](28,"\n      "),o["ɵɵelementStart"](29,"div",32),o["ɵɵtext"](30,"\n        "),o["ɵɵelementStart"](31,"input",33),o["ɵɵlistener"]("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).savePasswordOptions()}))("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).passwordOptions.capitalize=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n        "),o["ɵɵelementStart"](33,"label",34),o["ɵɵtext"](34),o["ɵɵpipe"](35,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n      "),o["ɵɵelementStart"](38,"div",32),o["ɵɵtext"](39,"\n        "),o["ɵɵelementStart"](40,"input",35),o["ɵɵlistener"]("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).savePasswordOptions()}))("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).passwordOptions.includeNumber=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n        "),o["ɵɵelementStart"](42,"label",36),o["ɵɵtext"](43),o["ɵɵpipe"](44,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n  "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,11,"numWords")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.passwordOptions.numWords),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,13,"wordSeparator")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.passwordOptions.wordSeparator),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](25,15,"options")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngModel",e.passwordOptions.capitalize)("disabled",null==e.enforcedPasswordPolicyOptions?null:e.enforcedPasswordPolicyOptions.capitalize),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](35,17,"capitalize")),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngModel",e.passwordOptions.includeNumber)("disabled",null==e.enforcedPasswordPolicyOptions?null:e.enforcedPasswordPolicyOptions.includeNumber),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](44,19,"includeNumber"))}}function oU(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",24),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"div",25),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"label",37),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementStart"](10,"input",38),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).passwordOptions.length=t}))("blur",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).savePasswordOptions()}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).lengthChanged()})),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n      "),o["ɵɵelementStart"](13,"div",25),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"label",39),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementStart"](19,"input",40),o["ɵɵlistener"]("blur",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).savePasswordOptions()}))("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).passwordOptions.minNumber=t}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).minNumberChanged()})),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementStart"](22,"div",25),o["ɵɵtext"](23,"\n        "),o["ɵɵelementStart"](24,"label",41),o["ɵɵtext"](25),o["ɵɵpipe"](26,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n        "),o["ɵɵelementStart"](28,"input",42),o["ɵɵlistener"]("blur",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).savePasswordOptions()}))("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).passwordOptions.minSpecial=t}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).minSpecialChanged()})),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n    "),o["ɵɵelementStart"](32,"label",30),o["ɵɵtext"](33),o["ɵɵpipe"](34,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n    "),o["ɵɵelementStart"](36,"div",31),o["ɵɵtext"](37,"\n      "),o["ɵɵelementStart"](38,"div",32),o["ɵɵtext"](39,"\n        "),o["ɵɵelementStart"](40,"input",43),o["ɵɵlistener"]("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).savePasswordOptions()}))("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).passwordOptions.uppercase=t})),o["ɵɵpipe"](41,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n        "),o["ɵɵelementStart"](43,"label",44),o["ɵɵtext"](44,"A-Z"),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n      "),o["ɵɵelementStart"](47,"div",32),o["ɵɵtext"](48,"\n        "),o["ɵɵelementStart"](49,"input",45),o["ɵɵlistener"]("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).savePasswordOptions()}))("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).passwordOptions.lowercase=t})),o["ɵɵpipe"](50,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n        "),o["ɵɵelementStart"](52,"label",46),o["ɵɵtext"](53,"a-z"),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n      "),o["ɵɵelementStart"](56,"div",32),o["ɵɵtext"](57,"\n        "),o["ɵɵelementStart"](58,"input",47),o["ɵɵlistener"]("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).savePasswordOptions()}))("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).passwordOptions.number=t})),o["ɵɵpipe"](59,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n        "),o["ɵɵelementStart"](61,"label",48),o["ɵɵtext"](62,"0-9"),o["ɵɵelementEnd"](),o["ɵɵtext"](63,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n      "),o["ɵɵelementStart"](65,"div",32),o["ɵɵtext"](66,"\n        "),o["ɵɵelementStart"](67,"input",49),o["ɵɵlistener"]("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).savePasswordOptions()}))("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).passwordOptions.special=t})),o["ɵɵpipe"](68,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](69,"\n        "),o["ɵɵelementStart"](70,"label",50),o["ɵɵtext"](71,"!@#$%^&*"),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](73,"\n      "),o["ɵɵelementStart"](74,"div",32),o["ɵɵtext"](75,"\n        "),o["ɵɵelementStart"](76,"input",51),o["ɵɵlistener"]("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).savePasswordOptions()}))("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).avoidAmbiguous=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](77,"\n        "),o["ɵɵelementStart"](78,"label",52),o["ɵɵtext"](79),o["ɵɵpipe"](80,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](81,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](82,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](83,"\n  "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,21,"length")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.passwordOptions.length),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,23,"minNumbers")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.passwordOptions.minNumber),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](26,25,"minSpecial")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.passwordOptions.minSpecial),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](34,27,"options")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngModel",e.passwordOptions.uppercase)("disabled",null==e.enforcedPasswordPolicyOptions?null:e.enforcedPasswordPolicyOptions.useUppercase),o["ɵɵattribute"]("aria-label",o["ɵɵpipeBind1"](41,29,"uppercase")),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngModel",e.passwordOptions.lowercase)("disabled",null==e.enforcedPasswordPolicyOptions?null:e.enforcedPasswordPolicyOptions.useLowercase),o["ɵɵattribute"]("aria-label",o["ɵɵpipeBind1"](50,31,"lowercase")),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngModel",e.passwordOptions.number)("disabled",null==e.enforcedPasswordPolicyOptions?null:e.enforcedPasswordPolicyOptions.useNumbers),o["ɵɵattribute"]("aria-label",o["ɵɵpipeBind1"](59,33,"numbers")),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngModel",e.passwordOptions.special)("disabled",null==e.enforcedPasswordPolicyOptions?null:e.enforcedPasswordPolicyOptions.useSpecial),o["ɵɵattribute"]("aria-label",o["ɵɵpipeBind1"](68,35,"specialCharacters")),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngModel",e.avoidAmbiguous),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](80,37,"ambiguous"))}}function aU(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",15),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"label",16),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵtemplate"](8,iU,7,6,"div",7),o["ɵɵtext"](9,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n  "),o["ɵɵtemplate"](11,rU,48,21,"ng-container",8),o["ɵɵtext"](12,"\n  "),o["ɵɵtemplate"](13,oU,84,39,"ng-container",8),o["ɵɵtext"](14,"\n  "),o["ɵɵelementStart"](15,"div",17),o["ɵɵtext"](16,"\n    "),o["ɵɵelementStart"](17,"div"),o["ɵɵtext"](18,"\n      "),o["ɵɵelementStart"](19,"button",18),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().regenerate()})),o["ɵɵtext"](20),o["ɵɵpipe"](21,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵelementStart"](23,"button",19),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().copy()})),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n    "),o["ɵɵelementStart"](28,"div",20),o["ɵɵtext"](29,"\n      "),o["ɵɵelementStart"](30,"button",21),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().history()})),o["ɵɵpipe"](31,"i18n"),o["ɵɵtext"](32,"\n        "),o["ɵɵelement"](33,"i",22),o["ɵɵtext"](34,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n"),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,7,"passwordType")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngForOf",e.passTypeOptions),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf","passphrase"===e.passwordOptions.type),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf","password"===e.passwordOptions.type),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](21,9,"regeneratePassword"),"\n      "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](25,11,"copyPassword"),"\n      "),o["ɵɵadvance"](6),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](31,13,"passwordHistory"))}}function sU(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",32),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"input",63),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).usernameOptions.type=t}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).saveUsernameOptions()})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"label",14),o["ɵɵtext"](5),o["ɵɵelementStart"](6,"div",64),o["ɵɵtext"](7),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("id","usernameType_",e.value,""),o["ɵɵproperty"]("ngModel",n.usernameOptions.type)("value",e.value)("checked",n.usernameOptions.type===e.value),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("for","usernameType_",e.value,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",e.name,"\n        "),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.desc)}}function lU(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",32),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"input",65),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).usernameOptions.forwardedService=t}))("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).saveUsernameOptions()})),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"label",14),o["ɵɵtext"](5),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("id","forwardtype_",e.value,""),o["ɵɵproperty"]("ngModel",n.usernameOptions.forwardedService)("value",e.value)("checked",n.usernameOptions.forwardedService===e.value),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate1"]("for","forwardtype_",e.value,""),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",e.name,"\n        ")}}function dU(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",24),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",25),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"label",66),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"input",67),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).usernameOptions.forwardedSimpleLoginApiKey=t}))("blur",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).saveUsernameOptions()})),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,2,"apiKey")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.usernameOptions.forwardedSimpleLoginApiKey)}}function cU(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",24),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",25),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"label",68),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"input",69),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).usernameOptions.forwardedAnonAddyApiToken=t}))("blur",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).saveUsernameOptions()})),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"div",25),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"label",70),o["ɵɵtext"](14),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n        "),o["ɵɵelementStart"](17,"input",71),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).usernameOptions.forwardedAnonAddyDomain=t}))("blur",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).saveUsernameOptions()})),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,4,"apiAccessToken")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.usernameOptions.forwardedAnonAddyApiToken),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](15,6,"domainName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.usernameOptions.forwardedAnonAddyDomain)}}function pU(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",24),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"div",25),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"label",72),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"input",73),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).usernameOptions.forwardedFirefoxApiToken=t}))("blur",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](3).saveUsernameOptions()})),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,2,"apiAccessToken")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.usernameOptions.forwardedFirefoxApiToken)}}function uU(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",31),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"label",30),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n      "),o["ɵɵtemplate"](8,lU,7,6,"div",57),o["ɵɵtext"](9,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵtemplate"](11,dU,11,4,"div",58),o["ɵɵtext"](12,"\n    "),o["ɵɵtemplate"](13,cU,20,8,"div",58),o["ɵɵtext"](14,"\n    "),o["ɵɵtemplate"](15,pU,11,4,"div",58),o["ɵɵtext"](16,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,5,"service")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngForOf",e.forwardOptions),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf","simplelogin"===e.usernameOptions.forwardedService),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf","anonaddy"===e.usernameOptions.forwardedService),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf","firefoxrelay"===e.usernameOptions.forwardedService)}}function mU(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",24),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",25),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"label",74),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n      "),o["ɵɵelementStart"](8,"input",75),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).usernameOptions.subaddressEmail=t}))("blur",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).saveUsernameOptions()})),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,2,"emailAddress")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.usernameOptions.subaddressEmail)}}function hU(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",24),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",25),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"label",76),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n      "),o["ɵɵelementStart"](8,"input",77),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).usernameOptions.catchallDomain=t}))("blur",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).saveUsernameOptions()})),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,2,"domainName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.usernameOptions.catchallDomain)}}function vU(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"label",30),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"div",24),o["ɵɵtext"](7,"\n      "),o["ɵɵelementStart"](8,"div",31),o["ɵɵtext"](9,"\n        "),o["ɵɵelementStart"](10,"div",32),o["ɵɵtext"](11,"\n          "),o["ɵɵelementStart"](12,"input",78),o["ɵɵlistener"]("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).saveUsernameOptions()}))("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).usernameOptions.wordCapitalize=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"label",79),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementStart"](19,"div",32),o["ɵɵtext"](20,"\n          "),o["ɵɵelementStart"](21,"input",80),o["ɵɵlistener"]("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).saveUsernameOptions()}))("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).usernameOptions.wordIncludeNumber=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n          "),o["ɵɵelementStart"](23,"label",81),o["ɵɵtext"](24),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n  "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,5,"options")),o["ɵɵadvance"](9),o["ɵɵproperty"]("ngModel",e.usernameOptions.wordCapitalize),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](16,7,"capitalize")),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngModel",e.usernameOptions.wordIncludeNumber),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](25,9,"includeNumber"))}}function gU(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",53),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",30),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"label",54),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"a",55),o["ɵɵpipe"](11,"i18n"),o["ɵɵtext"](12,"\n        "),o["ɵɵelement"](13,"i",56),o["ɵɵtext"](14,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n    "),o["ɵɵtemplate"](17,sU,10,7,"div",57),o["ɵɵtext"](18,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n  "),o["ɵɵtemplate"](20,uU,17,7,"ng-container",8),o["ɵɵtext"](21,"\n  "),o["ɵɵtemplate"](22,mU,11,4,"div",58),o["ɵɵtext"](23,"\n  "),o["ɵɵtemplate"](24,hU,11,4,"div",58),o["ɵɵtext"](25,"\n  "),o["ɵɵtemplate"](26,vU,30,11,"ng-container",8),o["ɵɵtext"](27,"\n  "),o["ɵɵelementStart"](28,"div",59,60),o["ɵɵtext"](30,"\n    "),o["ɵɵelementStart"](31,"button",61),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().regenerate()})),o["ɵɵtext"](32,"\n      "),o["ɵɵelement"](33,"i",62),o["ɵɵpipe"](34,"i18n"),o["ɵɵtext"](35,"\n      "),o["ɵɵelementStart"](36,"span"),o["ɵɵtext"](37),o["ɵɵpipe"](38,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n    "),o["ɵɵelementStart"](41,"button",19),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().copy()})),o["ɵɵtext"](42),o["ɵɵpipe"](43,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n"),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵreference"](29),t=o["ɵɵnextContext"]();o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,12,"usernameType")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](11,14,"learnMore")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngForOf",t.usernameTypeOptions),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf","forwarded"===t.usernameOptions.type),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf","subaddress"===t.usernameOptions.type),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf","catchall"===t.usernameOptions.type),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf","word"===t.usernameOptions.type),o["ɵɵadvance"](2),o["ɵɵproperty"]("appApiAction",t.usernameGeneratingPromise),o["ɵɵadvance"](3),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](34,16,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](38,18,"regenerateUsername")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](43,20,"copyUsername"),"\n    ")}}function fU(e,t){}class xU extends LR{constructor(e,t,n,i,r,o,a,s){super(e,t,i,n,r,o,a,window),this.modalService=s,i.isSelfHost()&&this.forwardOptions.splice(this.forwardOptions.findIndex((e=>"firefoxrelay"===e.value)),1)}history(){return ZR(this,void 0,void 0,(function*(){yield this.modalService.openViewRef(YR,this.historyModalRef)}))}lengthChanged(){document.getElementById("length").focus()}minNumberChanged(){document.getElementById("min-number").focus()}minSpecialChanged(){document.getElementById("min-special").focus()}}xU.ɵfac=function(e){return new(e||xU)(o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](HR),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](kn))},xU.ɵcmp=o["ɵɵdefineComponent"]({type:xU,selectors:[["app-generator"]],viewQuery:function(e,t){if(1&e&&o["ɵɵviewQuery"](JR,7,o.ViewContainerRef),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.historyModalRef=e.first)}},features:[o["ɵɵInheritDefinitionFeature"]],decls:35,vars:12,consts:[[1,"page-header"],["type","info",4,"ngIf"],[1,"card","card-generated","bg-light","my-4"],[1,"card-body"],["class","generated-wrapper","appSelectCopy","",3,"innerHTML",4,"ngIf"],["role","radiogroup","aria-labelledby","typeHeading",1,"form-group"],["id","typeHeading",1,"d-block"],["class","form-check form-check-inline",4,"ngFor","ngForOf"],[4,"ngIf"],["historyTemplate",""],["type","info"],["appSelectCopy","",1,"generated-wrapper",3,"innerHTML"],[1,"form-check","form-check-inline"],["type","radio","name","Type",1,"form-check-input",3,"ngModel","id","value","checked","ngModelChange","change"],[1,"form-check-label",3,"for"],["aria-labelledby","passwordTypeHeading","role","radiogroup",1,"form-group"],["id","passwordTypeHeading",1,"d-block"],[1,"d-flex"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"ml-auto"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-clock","bwi-lg"],["type","radio","name","PasswordType",1,"form-check-input",3,"ngModel","id","value","checked","ngModelChange","change"],[1,"row"],[1,"form-group","col-4"],["for","num-words"],["id","num-words","type","number","min","3","max","20",1,"form-control",3,"ngModel","ngModelChange","blur"],["for","word-separator"],["id","word-separator","type","text","maxlength","1",1,"form-control",3,"ngModel","ngModelChange","blur"],[1,"d-block"],[1,"form-group"],[1,"form-check"],["id","capitalize","type","checkbox",1,"form-check-input",3,"ngModel","disabled","change","ngModelChange"],["for","capitalize",1,"form-check-label"],["id","include-number","type","checkbox",1,"form-check-input",3,"ngModel","disabled","change","ngModelChange"],["for","include-number",1,"form-check-label"],["for","length"],["id","length","type","number","min","5","max","128",1,"form-control",3,"ngModel","ngModelChange","blur","change"],["for","min-number"],["id","min-number","type","number","min","0","max","9",1,"form-control",3,"ngModel","blur","ngModelChange","change"],["for","min-special"],["id","min-special","type","number","min","0","max","9",1,"form-control",3,"ngModel","blur","ngModelChange","change"],["id","uppercase","type","checkbox",1,"form-check-input",3,"ngModel","disabled","change","ngModelChange"],["for","uppercase",1,"form-check-label"],["id","lowercase","type","checkbox",1,"form-check-input",3,"ngModel","disabled","change","ngModelChange"],["for","lowercase",1,"form-check-label"],["id","numbers","type","checkbox",1,"form-check-input",3,"ngModel","disabled","change","ngModelChange"],["for","numbers",1,"form-check-label"],["id","special","type","checkbox",1,"form-check-input",3,"ngModel","disabled","change","ngModelChange"],["for","special",1,"form-check-label"],["id","ambiguous","type","checkbox",1,"form-check-input",3,"ngModel","change","ngModelChange"],["for","ambiguous",1,"form-check-label"],["aria-labelledby","usernameTypeHeading","role","radiogroup",1,"form-group"],["id","usernameTypeHeading"],["href","https://bitwarden.com/help/generator/#username-types","target","_blank","rel","noopener",1,"ml-auto",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],["class","form-check",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[3,"appApiAction"],["form",""],["type","button",1,"btn","btn-submit","btn-primary",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","radio","name","UsernameType",1,"form-check-input",3,"ngModel","id","value","checked","ngModelChange","change"],[1,"small","text-muted"],["type","radio","name","ForwardType",1,"form-check-input",3,"ngModel","id","value","checked","ngModelChange","change"],["for","simplelogin-apikey"],["id","simplelogin-apikey","type","password",1,"form-control",3,"ngModel","ngModelChange","blur"],["for","anonaddy-apikey"],["id","anonaddy-apikey","type","password",1,"form-control",3,"ngModel","ngModelChange","blur"],["for","anonaddy-domain"],["id","anonaddy-domain","type","text",1,"form-control",3,"ngModel","ngModelChange","blur"],["for","firefox-apikey"],["id","firefox-apikey","type","password",1,"form-control",3,"ngModel","ngModelChange","blur"],["for","subaddress-email"],["id","subaddress-email","type","text",1,"form-control",3,"ngModel","ngModelChange","blur"],["for","catchall-domain"],["id","catchall-domain","type","text",1,"form-control",3,"ngModel","ngModelChange","blur"],["id","capitalizeUsername","type","checkbox",3,"ngModel","change","ngModelChange"],["for","capitalizeUsername",1,"form-check-label"],["id","includeNumberUsername","type","checkbox",3,"ngModel","change","ngModelChange"],["for","includeNumberUsername",1,"form-check-label"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵtemplate"](7,XR,3,3,"app-callout",1),o["ɵɵtext"](8,"\n"),o["ɵɵelementStart"](9,"div",2),o["ɵɵtext"](10,"\n  "),o["ɵɵelementStart"](11,"div",3),o["ɵɵtext"](12,"\n    "),o["ɵɵtemplate"](13,eU,2,3,"div",4),o["ɵɵtext"](14,"\n    "),o["ɵɵtemplate"](15,tU,2,3,"div",4),o["ɵɵtext"](16,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n"),o["ɵɵelementStart"](19,"div",5),o["ɵɵtext"](20,"\n  "),o["ɵɵelementStart"](21,"label",6),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n  "),o["ɵɵtemplate"](25,nU,7,6,"div",7),o["ɵɵtext"](26,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n"),o["ɵɵtemplate"](28,aU,38,15,"ng-container",8),o["ɵɵtext"](29,"\n"),o["ɵɵtemplate"](30,gU,46,22,"ng-container",8),o["ɵɵtext"](31,"\n"),o["ɵɵtemplate"](32,fU,0,0,"ng-template",null,9,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](34,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,8,"generator")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",(null==t.enforcedPasswordPolicyOptions?null:t.enforcedPasswordPolicyOptions.inEffect())&&"password"===t.type),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf","password"===t.type),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf","username"===t.type),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,10,"whatWouldYouLikeToGenerate")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngForOf",t.typeOptions),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf","password"===t.type),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf","username"===t.type))},directives:[B.NgIf,B.NgForOf,Pe.O,qR,d.RadioControlValueAccessor,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,pe,d.MinValidator,d.MaxValidator,d.NumberValueAccessor,d.MaxLengthValidator,d.CheckboxControlValueAccessor,Y.b],pipes:[M.C,_R],encapsulation:2});var yU=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class SU{constructor(e,t){this.stateService=e,this.messagingService=t,this.canAccessPremium=!1}ngOnInit(){return yU(this,void 0,void 0,(function*(){this.canAccessPremium=yield this.stateService.getCanAccessPremium()}))}premiumRequired(){this.canAccessPremium||this.messagingService.send("premiumRequired")}}SU.ɵfac=function(e){return new(e||SU)(o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](v))},SU.ɵcmp=o["ɵɵdefineComponent"]({type:SU,selectors:[["app-tools"]],decls:36,vars:12,consts:[[1,"container","page-content"],[1,"row"],[1,"col-3"],[1,"card","mb-4"],[1,"card-header"],[1,"list-group","list-group-flush"],["routerLink","generator","routerLinkActive","active",1,"list-group-item"],["routerLink","import","routerLinkActive","active",1,"list-group-item"],["routerLink","export","routerLinkActive","active",1,"list-group-item"],[1,"col-9"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"div",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"div",5),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"a",6),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"a",7),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n          "),o["ɵɵelementStart"](22,"a",8),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n    "),o["ɵɵelementStart"](29,"div",9),o["ɵɵtext"](30,"\n      "),o["ɵɵelement"](31,"router-outlet"),o["ɵɵtext"](32,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,4,"tools")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](16,6,"generator"),"\n          "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](20,8,"importData"),"\n          "),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](24,10,"exportVault"),"\n          "))},directives:[p.RouterLinkWithHref,p.RouterLinkActive,p.RouterOutlet],pipes:[M.C],encapsulation:2});const bU=[{path:"",component:fi,data:{doNotSaveUrl:!0},children:[{path:"",pathMatch:"full",children:[],canActivate:[vi]},{path:"login",component:Me,canActivate:[w]},{path:"2fa",component:$n,canActivate:[w]},{path:"register",component:Dt,canActivate:[w],data:{titleId:"createAccount"}},{path:"trial",component:br,canActivate:[w],data:{titleId:"startTrial"}},{path:"sso",component:an,canActivate:[w],data:{titleId:"enterpriseSingleSignOn"}},{path:"set-password",component:Xt,data:{titleId:"setMasterPassword"}},{path:"hint",component:X,canActivate:[w],data:{titleId:"passwordHint"}},{path:"lock",component:he,canActivate:[S]},{path:"verify-email",component:ci},{path:"accept-organization",component:$,data:{titleId:"joinOrganization",doNotSaveUrl:!1}},{path:"accept-emergency",component:z,data:{titleId:"acceptEmergency",doNotSaveUrl:!1}},{path:"accept-families-for-enterprise",component:bP,data:{titleId:"acceptFamilySponsorship",doNotSaveUrl:!1}},{path:"recover",pathMatch:"full",redirectTo:"recover-2fa"},{path:"recover-2fa",component:Ne,canActivate:[w],data:{titleId:"recoverAccountTwoStep"}},{path:"recover-delete",component:Re,canActivate:[w],data:{titleId:"deleteAccount"}},{path:"verify-recover-delete",component:mi,canActivate:[w],data:{titleId:"deleteAccount"}},{path:"send/:sendId/:key",component:PA,data:{title:"Bitwarden Send"}},{path:"update-temp-password",component:si,canActivate:[x],data:{titleId:"updateTempPassword"}},{path:"update-password",component:ei,canActivate:[x],data:{titleId:"updatePassword"}},{path:"remove-password",component:jt,canActivate:[x],data:{titleId:"removeMasterPassword"}}]},{path:"",component:_i,canActivate:[x],children:[{path:"vault",loadChildren:()=>Ec},{path:"sends",component:WO,data:{title:"Send"}},{path:"create-organization",component:PT,data:{titleId:"newOrganization"}},{path:"settings",component:aF,children:[{path:"",pathMatch:"full",redirectTo:"account"},{path:"account",component:ET,data:{titleId:"myAccount"}},{path:"preferences",component:BD,data:{titleId:"preferences"}},{path:"security",loadChildren:()=>tF},{path:"domain-rules",component:VT,data:{titleId:"domainRules"}},{path:"subscription",loadChildren:()=>VR},{path:"emergency-access",children:[{path:"",component:SD,data:{titleId:"emergencyAccess"}},{path:":id",component:eM,data:{titleId:"emergencyAccess"}}]},{path:"sponsored-families",component:wF,data:{titleId:"sponsoredFamilies"}}]},{path:"tools",component:SU,canActivate:[x],children:[{path:"",pathMatch:"full",redirectTo:"generator"},{path:"",loadChildren:()=>Promise.all([n.e(297),n.e(929),n.e(182)]).then(n.bind(n,60660)).then((e=>e.ImportExportModule))},{path:"generator",component:xU,data:{titleId:"generator"}}]},{path:"reports",loadChildren:()=>eA},{path:"setup/families-for-enterprise",component:MP}]},{path:"organizations",loadChildren:()=>fP}];class wU{}wU.ɵfac=function(e){return new(e||wU)},wU.ɵmod=o["ɵɵdefineNgModule"]({type:wU}),wU.ɵinj=o["ɵɵdefineInjector"]({imports:[[p.RouterModule.forRoot(bU,{useHash:!0,paramsInheritanceStrategy:"always"})],p.RouterModule]});var IU=n(47447);class CU{}CU.ɵfac=function(e){return new(e||CU)},CU.ɵmod=o["ɵɵdefineNgModule"]({type:CU}),CU.ɵinj=o["ɵɵdefineInjector"]({imports:[[Ir.m,hm.ScrollingModule]]});class EU{}EU.ɵfac=function(e){return new(e||EU)},EU.ɵmod=o["ɵɵdefineNgModule"]({type:EU}),EU.ɵinj=o["ɵɵdefineInjector"]({imports:[[Ir.m,hm.ScrollingModule,wr.f]]});var kU=n(49135),PU=n(1791),AU=n(31878);class OU{}OU.ɵfac=function(e){return new(e||OU)},OU.ɵmod=o["ɵɵdefineNgModule"]({type:OU}),OU.ɵinj=o["ɵɵdefineInjector"]({imports:[[Ir.m]]});class TU{}TU.ɵfac=function(e){return new(e||TU)},TU.ɵmod=o["ɵɵdefineNgModule"]({type:TU}),TU.ɵinj=o["ɵɵdefineInjector"]({providers:[B.TitleCasePipe],imports:[[Ir.m,$i.CdkStepperModule,OU,PU.kx,AU.Q,IU._]]});var BU=n(20911);class MU{}MU.ɵfac=function(e){return new(e||MU)},MU.ɵmod=o["ɵɵdefineNgModule"]({type:MU}),MU.ɵinj=o["ɵɵdefineInjector"]({imports:[[Ir.m,wr.f,TU,Cr.H,BU.D,kU.D,CU,EU,IU._],Ir.m,wr.f,TU,Cr.H,BU.D,kU.D]});var DU=n(25635),FU=n(56130),RU=n(26190);class UU{constructor(e,t){this.configuredTheme=e,this.systemTheme=t}get effectiveTheme(){return this.configuredTheme!=ly.System?this.configuredTheme:this.systemTheme}updateSystemTheme(e){return new UU(this.configuredTheme,e)}updateConfiguredTheme(e){return new UU(e,this.systemTheme)}}var zU,NU,VU,HU,jU,LU,KU=n(5298),GU=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class qU{constructor(e,t,n){this.stateService=e,this.mediaMatcher=t,this.document=n,this._theme=new FU.X(null),this.theme$=this._theme.pipe((0,de.h)((e=>null!==e))),this.monitorThemeChanges()}monitorThemeChanges(){return GU(this,void 0,void 0,(function*(){this._theme.next(new UU(yield this.stateService.getTheme(),yield this.getSystemTheme())),this.monitorConfiguredThemeChanges(),this.monitorSystemThemeChanges()}))}updateSystemTheme(e){this._theme.next(this._theme.getValue().updateSystemTheme(e))}updateConfiguredTheme(e){return GU(this,void 0,void 0,(function*(){yield this.stateService.setTheme(e),this._theme.next(this._theme.getValue().updateConfiguredTheme(e))}))}monitorConfiguredThemeChanges(){this.theme$.subscribe((e=>{this.document.documentElement.classList.remove("theme_"+ly.Light,"theme_"+ly.Dark,"theme_"+ly.Nord,"theme_"+ly.SolarizedDark),this.document.documentElement.classList.add("theme_"+e.effectiveTheme)}))}getSystemTheme(){return GU(this,void 0,void 0,(function*(){return this.mediaMatcher.matchMedia("(prefers-color-scheme: dark)").matches?ly.Dark:ly.Light}))}monitorSystemThemeChanges(){(0,RU.R)(this.mediaMatcher.matchMedia("(prefers-color-scheme: dark)"),"change").subscribe((e=>{this.updateSystemTheme(e.matches?ly.Dark:ly.Light)}))}}qU.ɵfac=function(e){return new(e||qU)(o["ɵɵinject"](P.b),o["ɵɵinject"](KU.MediaMatcher),o["ɵɵinject"](B.DOCUMENT))},qU.ɵprov=o["ɵɵdefineInjectable"]({token:qU,factory:qU.ɵfac});class _U{}class $U{}class WU{}class QU{}class YU{}class ZU{}class JU{constructor(e){this.accountConstructor=e}create(e){return new this.accountConstructor(e)}}class XU{constructor(e){this.globalStateConstructor=e}create(e){return new this.globalStateConstructor(e)}}class ez{constructor(e,t){this.globalStateFactory=new XU(e),this.accountFactory=new JU(t)}createGlobal(e){return this.globalStateFactory.create(e)}createAccount(e){return this.accountFactory.create(e)}}class tz{constructor(){this.base=null,this.api=null,this.identity=null,this.icons=null,this.notifications=null,this.events=null,this.webVault=null,this.keyConnector=null}}class nz{}class iz{}class rz{}class oz{constructor(){this.ciphers=new iz,this.folders=new rz,this.sends=new iz,this.collections=new iz,this.policies=new iz,this.passwordGenerationHistory=new nz}}class az{constructor(){this.cryptoSymmetricKey=new nz,this.organizationKeys=new nz,this.providerKeys=new nz,this.privateKey=new nz}}class sz{}class lz{constructor(){this.environmentUrls=new tz,this.pinProtected=new nz,this.vaultTimeoutAction="lock"}}class dz{}class cz{constructor(e){this.data=new oz,this.keys=new az,this.profile=new sz,this.settings=new lz,this.tokens=new dz,Object.assign(this,{data:Object.assign(Object.assign({},new oz),null==e?void 0:e.data),keys:Object.assign(Object.assign({},new az),null==e?void 0:e.keys),profile:Object.assign(Object.assign({},new sz),null==e?void 0:e.profile),settings:Object.assign(Object.assign({},new lz),null==e?void 0:e.settings),tokens:Object.assign(Object.assign({},new dz),null==e?void 0:e.tokens)})}}!function(e){e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Latest=5]="Latest"}(zU||(zU={}));class pz{}class uz{constructor(){this.theme=ly.System,this.window=new pz,this.stateVersion=zU.One,this.environmentUrls=new tz}}class mz{constructor(e,t){this.type=t.getDevice(),this.name=t.getDeviceString(),this.identifier=e,this.pushToken=null}}class hz{constructor(e,t){this.twoFactor=e,this.device=null!=t?t:null}alterIdentityTokenHeaders(e){}setTwoFactor(e){this.twoFactor=e}toIdentityToken(e){const t={scope:"api offline_access",client_id:e};return this.device&&(t.deviceType=this.device.type,t.deviceIdentifier=this.device.identifier,t.deviceName=this.device.name),this.twoFactor.token&&null!=this.twoFactor.provider&&(t.twoFactorToken=this.twoFactor.token,t.twoFactorProvider=this.twoFactor.provider,t.twoFactorRemember=this.twoFactor.remember?"1":"0"),t}}class vz extends hz{constructor(e,t,n,i){super(n,i),this.clientId=e,this.clientSecret=t,this.twoFactor=n}toIdentityToken(){const e=super.toIdentityToken(this.clientId);return e.scope=this.clientId.startsWith("organization")?"api.organization":"api",e.grant_type="client_credentials",e.client_secret=this.clientSecret,e}}class gz extends yg.c{constructor(e){super(e),this.apiKey=this.getResponseProperty("ApiKey"),this.revisionDate=new Date(this.getResponseProperty("RevisionDate"))}}class fz extends yg.c{constructor(e){super(e),this.url=null,this.attachmentId=this.getResponseProperty("AttachmentId"),this.fileUploadType=this.getResponseProperty("FileUploadType");const t=this.getResponseProperty("CipherResponse"),n=this.getResponseProperty("CipherMiniResponse");this.cipherResponse=null==t?null:new pM(t),this.cipherMiniResponse=null==n?null:new pM(n),this.url=this.getResponseProperty("Url")}}class xz extends yg.c{constructor(e){super(e),this.invoices=[],this.transactions=[],this.balance=this.getResponseProperty("Balance");const t=this.getResponseProperty("PaymentSource"),n=this.getResponseProperty("Transactions"),i=this.getResponseProperty("Invoices");this.paymentSource=null==t?null:new yz(t),null!=n&&(this.transactions=n.map((e=>new bz(e)))),null!=i&&(this.invoices=i.map((e=>new Sz(e))))}}class yz extends yg.c{constructor(e){super(e),this.type=this.getResponseProperty("Type"),this.cardBrand=this.getResponseProperty("CardBrand"),this.description=this.getResponseProperty("Description"),this.needsVerification=this.getResponseProperty("NeedsVerification")}}class Sz extends yg.c{constructor(e){super(e),this.url=this.getResponseProperty("Url"),this.pdfUrl=this.getResponseProperty("PdfUrl"),this.number=this.getResponseProperty("Number"),this.paid=this.getResponseProperty("Paid"),this.date=this.getResponseProperty("Date"),this.amount=this.getResponseProperty("Amount")}}class bz extends yg.c{constructor(e){super(e),this.createdDate=this.getResponseProperty("CreatedDate"),this.amount=this.getResponseProperty("Amount"),this.refunded=this.getResponseProperty("Refunded"),this.partiallyRefunded=this.getResponseProperty("PartiallyRefunded"),this.refundedAmount=this.getResponseProperty("RefundedAmount"),this.type=this.getResponseProperty("Type"),this.paymentMethodType=this.getResponseProperty("PaymentMethodType"),this.details=this.getResponseProperty("Details")}}class wz extends yg.c{constructor(e){super(e),this.invoices=[],this.transactions=[];const t=this.getResponseProperty("Transactions"),n=this.getResponseProperty("Invoices");null!=t&&(this.transactions=t.map((e=>new bz(e)))),null!=n&&(this.invoices=n.map((e=>new Sz(e))))}get hasNoHistory(){return 0==this.invoices.length&&0==this.transactions.length}}class Iz extends yg.c{constructor(e){super(e),this.balance=this.getResponseProperty("Balance");const t=this.getResponseProperty("PaymentSource");this.paymentSource=null==t?null:new yz(t)}}class Cz extends yg.c{constructor(e){super(e),this.addedDate=this.getResponseProperty("AddedDate"),this.breachDate=this.getResponseProperty("BreachDate"),this.dataClasses=this.getResponseProperty("DataClasses"),this.description=this.getResponseProperty("Description"),this.domain=this.getResponseProperty("Domain"),this.isActive=this.getResponseProperty("IsActive"),this.isVerified=this.getResponseProperty("IsVerified"),this.logoPath=this.getResponseProperty("LogoPath"),this.modifiedDate=this.getResponseProperty("ModifiedDate"),this.name=this.getResponseProperty("Name"),this.pwnCount=this.getResponseProperty("PwnCount"),this.title=this.getResponseProperty("Title")}}class Ez extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.readOnly=this.getResponseProperty("ReadOnly"),this.hidePasswords=this.getResponseProperty("HidePasswords")}}class kz extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.name=this.getResponseProperty("Name"),this.externalId=this.getResponseProperty("ExternalId")}}class Pz extends kz{constructor(e){super(e),this.readOnly=this.getResponseProperty("ReadOnly")||!1}}class Az extends kz{constructor(e){super(e),this.groups=[];const t=this.getResponseProperty("Groups");null!=t&&(this.groups=t.map((e=>new Ez(e))))}}class Oz extends yg.c{constructor(e){super(e),this.isDeviceVerificationSectionEnabled=this.getResponseProperty("IsDeviceVerificationSectionEnabled"),this.unknownDeviceVerificationEnabled=this.getResponseProperty("UnknownDeviceVerificationEnabled")}}class Tz extends yg.c{constructor(e){super(e),this.type=this.getResponseProperty("Type"),this.domains=this.getResponseProperty("Domains"),this.excluded=this.getResponseProperty("Excluded")}}class Bz extends yg.c{constructor(e){super(e),this.globalEquivalentDomains=[],this.equivalentDomains=this.getResponseProperty("EquivalentDomains");const t=this.getResponseProperty("GlobalEquivalentDomains");this.globalEquivalentDomains=null!=t?t.map((e=>new Tz(e))):[]}}class Mz extends yg.c{constructor(e){super(e),this.type=this.getResponseProperty("Type"),this.userId=this.getResponseProperty("UserId"),this.organizationId=this.getResponseProperty("OrganizationId"),this.providerId=this.getResponseProperty("ProviderId"),this.cipherId=this.getResponseProperty("CipherId"),this.collectionId=this.getResponseProperty("CollectionId"),this.groupId=this.getResponseProperty("GroupId"),this.policyId=this.getResponseProperty("PolicyId"),this.organizationUserId=this.getResponseProperty("OrganizationUserId"),this.providerUserId=this.getResponseProperty("ProviderUserId"),this.providerOrganizationId=this.getResponseProperty("ProviderOrganizationId"),this.actingUserId=this.getResponseProperty("ActingUserId"),this.date=this.getResponseProperty("Date"),this.deviceType=this.getResponseProperty("DeviceType"),this.ipAddress=this.getResponseProperty("IpAddress"),this.installationId=this.getResponseProperty("InstallationId")}}class Dz extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.name=this.getResponseProperty("Name"),this.accessAll=this.getResponseProperty("AccessAll"),this.externalId=this.getResponseProperty("ExternalId")}}class Fz extends Dz{constructor(e){super(e),this.collections=[];const t=this.getResponseProperty("Collections");null!=t&&(this.collections=t.map((e=>new Ez(e))))}}class Rz extends yg.c{constructor(e){super(e),this.siteKey=this.getResponseProperty("HCaptcha_SiteKey")}}class Uz extends yg.c{constructor(e){super(e),this.accessToken=e.access_token,this.expiresIn=e.expires_in,this.refreshToken=e.refresh_token,this.tokenType=e.token_type,this.resetMasterPassword=this.getResponseProperty("ResetMasterPassword"),this.privateKey=this.getResponseProperty("PrivateKey"),this.key=this.getResponseProperty("Key"),this.twoFactorToken=this.getResponseProperty("TwoFactorToken"),this.kdf=this.getResponseProperty("Kdf"),this.kdfIterations=this.getResponseProperty("KdfIterations"),this.forcePasswordReset=this.getResponseProperty("ForcePasswordReset"),this.apiUseKeyConnector=this.getResponseProperty("ApiUseKeyConnector"),this.keyConnectorUrl=this.getResponseProperty("KeyConnectorUrl")}}class zz extends yg.c{constructor(e){super(e),this.twoFactorProviders2=new Map,this.captchaToken=this.getResponseProperty("CaptchaBypassToken"),this.twoFactorProviders=this.getResponseProperty("TwoFactorProviders");const t=this.getResponseProperty("TwoFactorProviders2");if(null!=t)for(const n in t)t.hasOwnProperty(n)&&this.twoFactorProviders2.set(parseInt(n,null),t[n])}}class Nz extends yg.c{constructor(e){super(e),this.key=this.getResponseProperty("Key")}}class Vz extends yg.c{constructor(e,t){super(e);const n=this.getResponseProperty("Data");this.data=null==n?[]:n.map((e=>new t(e))),this.continuationToken=this.getResponseProperty("ContinuationToken")}}!function(e){e[e.None=0]="None",e[e.OpenIdConnect=1]="OpenIdConnect",e[e.Saml2=2]="Saml2"}(NU||(NU={})),function(e){e[e.RedirectGet=0]="RedirectGet",e[e.FormPost=1]="FormPost"}(VU||(VU={})),function(e){e[e.HttpRedirect=1]="HttpRedirect",e[e.HttpPost=2]="HttpPost"}(HU||(HU={})),function(e){e[e.NotConfigured=0]="NotConfigured",e[e.Unspecified=1]="Unspecified",e[e.EmailAddress=2]="EmailAddress",e[e.X509SubjectName=3]="X509SubjectName",e[e.WindowsDomainQualifiedName=4]="WindowsDomainQualifiedName",e[e.KerberosPrincipalName=5]="KerberosPrincipalName",e[e.EntityIdentifier=6]="EntityIdentifier",e[e.Persistent=7]="Persistent",e[e.Transient=8]="Transient"}(jU||(jU={})),function(e){e[e.IfIdpWantAuthnRequestsSigned=0]="IfIdpWantAuthnRequestsSigned",e[e.Always=1]="Always",e[e.Never=3]="Never"}(LU||(LU={}));class Hz extends yg.c{constructor(e=null){super(e),null!=e&&(this.configType=this.getResponseProperty("ConfigType"),this.keyConnectorEnabled=this.getResponseProperty("KeyConnectorEnabled"),this.keyConnectorUrl=this.getResponseProperty("KeyConnectorUrl"),this.authority=this.getResponseProperty("Authority"),this.clientId=this.getResponseProperty("ClientId"),this.clientSecret=this.getResponseProperty("ClientSecret"),this.metadataAddress=this.getResponseProperty("MetadataAddress"),this.redirectBehavior=this.getResponseProperty("RedirectBehavior"),this.getClaimsFromUserInfoEndpoint=this.getResponseProperty("GetClaimsFromUserInfoEndpoint"),this.additionalScopes=this.getResponseProperty("AdditionalScopes"),this.additionalUserIdClaimTypes=this.getResponseProperty("AdditionalUserIdClaimTypes"),this.additionalEmailClaimTypes=this.getResponseProperty("AdditionalEmailClaimTypes"),this.additionalNameClaimTypes=this.getResponseProperty("AdditionalNameClaimTypes"),this.acrValues=this.getResponseProperty("AcrValues"),this.expectedReturnAcrValue=this.getResponseProperty("ExpectedReturnAcrValue"),this.spNameIdFormat=this.getResponseProperty("SpNameIdFormat"),this.spOutboundSigningAlgorithm=this.getResponseProperty("SpOutboundSigningAlgorithm"),this.spSigningBehavior=this.getResponseProperty("SpSigningBehavior"),this.spMinIncomingSigningAlgorithm=this.getResponseProperty("SpMinIncomingSigningAlgorithm"),this.spWantAssertionsSigned=this.getResponseProperty("SpWantAssertionsSigned"),this.spValidateCertificates=this.getResponseProperty("SpValidateCertificates"),this.idpEntityId=this.getResponseProperty("IdpEntityId"),this.idpBindingType=this.getResponseProperty("IdpBindingType"),this.idpSingleSignOnServiceUrl=this.getResponseProperty("IdpSingleSignOnServiceUrl"),this.idpSingleLogoutServiceUrl=this.getResponseProperty("IdpSingleLogoutServiceUrl"),this.idpX509PublicCert=this.getResponseProperty("IdpX509PublicCert"),this.idpOutboundSigningAlgorithm=this.getResponseProperty("IdpOutboundSigningAlgorithm"),this.idpAllowUnsolicitedAuthnResponse=this.getResponseProperty("IdpAllowUnsolicitedAuthnResponse"),this.idpDisableOutboundLogoutRequests=this.getResponseProperty("IdpDisableOutboundLogoutRequests"),this.idpWantAuthnRequestsSigned=this.getResponseProperty("IdpWantAuthnRequestsSigned"))}static fromView(e,t=new Hz){return t.configType=e.configType,t.keyConnectorEnabled=e.keyConnectorEnabled,t.keyConnectorUrl=e.keyConnectorUrl,t.configType===NU.OpenIdConnect?(t.authority=e.openId.authority,t.clientId=e.openId.clientId,t.clientSecret=e.openId.clientSecret,t.metadataAddress=e.openId.metadataAddress,t.redirectBehavior=e.openId.redirectBehavior,t.getClaimsFromUserInfoEndpoint=e.openId.getClaimsFromUserInfoEndpoint,t.additionalScopes=e.openId.additionalScopes,t.additionalUserIdClaimTypes=e.openId.additionalUserIdClaimTypes,t.additionalEmailClaimTypes=e.openId.additionalEmailClaimTypes,t.additionalNameClaimTypes=e.openId.additionalNameClaimTypes,t.acrValues=e.openId.acrValues,t.expectedReturnAcrValue=e.openId.expectedReturnAcrValue):t.configType===NU.Saml2&&(t.spNameIdFormat=e.saml.spNameIdFormat,t.spOutboundSigningAlgorithm=e.saml.spOutboundSigningAlgorithm,t.spSigningBehavior=e.saml.spSigningBehavior,t.spMinIncomingSigningAlgorithm=e.saml.spMinIncomingSigningAlgorithm,t.spWantAssertionsSigned=e.saml.spWantAssertionsSigned,t.spValidateCertificates=e.saml.spValidateCertificates,t.idpEntityId=e.saml.idpEntityId,t.idpBindingType=e.saml.idpBindingType,t.idpSingleSignOnServiceUrl=e.saml.idpSingleSignOnServiceUrl,t.idpSingleLogoutServiceUrl=e.saml.idpSingleLogoutServiceUrl,t.idpX509PublicCert=e.saml.idpX509PublicCert,t.idpOutboundSigningAlgorithm=e.saml.idpOutboundSigningAlgorithm,t.idpAllowUnsolicitedAuthnResponse=e.saml.idpAllowUnsolicitedAuthnResponse,t.idpWantAuthnRequestsSigned=e.saml.idpWantAuthnRequestsSigned,t.idpDisableOutboundLogoutRequests=!e.saml.idpAllowOutboundLogoutRequests),t}}class jz extends yg.c{constructor(e){super(e),this.enabled=this.getResponseProperty("Enabled"),this.data=null!=this.getResponseProperty("Data")?new Hz(this.getResponseProperty("Data")):null,this.urls=new Lz(this.getResponseProperty("Urls"))}}class Lz extends yg.c{constructor(e){super(e),this.callbackPath=this.getResponseProperty("CallbackPath"),this.signedOutCallbackPath=this.getResponseProperty("SignedOutCallbackPath"),this.spEntityId=this.getResponseProperty("SpEntityId"),this.spMetadataUrl=this.getResponseProperty("SpMetadataUrl"),this.spAcsUrl=this.getResponseProperty("SpAcsUrl")}}class Kz extends yg.c{constructor(e){super(e),this.keyType=this.getResponseProperty("KeyType")}}class Gz extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.resetPasswordEnabled=this.getResponseProperty("ResetPasswordEnabled")}}class qz extends yg.c{constructor(e,t){super(e),this.id=this.getResponseProperty("Id"),this.type=this.getResponseProperty("Type"),this.organizationId=this.getResponseProperty("OrganizationId"),this.enabled=this.getResponseProperty("Enabled");const n=this.getResponseProperty("Config");this.config=null==n?null:new t(n)}}class _z extends yg.c{constructor(e){super(e),this.privateKey=this.getResponseProperty("PrivateKey"),this.publicKey=this.getResponseProperty("PublicKey")}}class $z extends _z{constructor(e){super(e)}}class Wz extends yg.c{constructor(e){super(e),this.type=this.getResponseProperty("Type"),this.product=this.getResponseProperty("Product"),this.name=this.getResponseProperty("Name"),this.isAnnual=this.getResponseProperty("IsAnnual"),this.nameLocalizationKey=this.getResponseProperty("NameLocalizationKey"),this.descriptionLocalizationKey=this.getResponseProperty("DescriptionLocalizationKey"),this.canBeUsedByBusiness=this.getResponseProperty("CanBeUsedByBusiness"),this.baseSeats=this.getResponseProperty("BaseSeats"),this.baseStorageGb=this.getResponseProperty("BaseStorageGb"),this.maxCollections=this.getResponseProperty("MaxCollections"),this.maxUsers=this.getResponseProperty("MaxUsers"),this.hasAdditionalSeatsOption=this.getResponseProperty("HasAdditionalSeatsOption"),this.maxAdditionalSeats=this.getResponseProperty("MaxAdditionalSeats"),this.hasAdditionalStorageOption=this.getResponseProperty("HasAdditionalStorageOption"),this.maxAdditionalStorage=this.getResponseProperty("MaxAdditionalStorage"),this.hasPremiumAccessOption=this.getResponseProperty("HasPremiumAccessOption"),this.trialPeriodDays=this.getResponseProperty("TrialPeriodDays"),this.hasSelfHost=this.getResponseProperty("HasSelfHost"),this.hasPolicies=this.getResponseProperty("HasPolicies"),this.hasGroups=this.getResponseProperty("HasGroups"),this.hasDirectory=this.getResponseProperty("HasDirectory"),this.hasEvents=this.getResponseProperty("HasEvents"),this.hasTotp=this.getResponseProperty("HasTotp"),this.has2fa=this.getResponseProperty("Has2fa"),this.hasApi=this.getResponseProperty("HasApi"),this.hasSso=this.getResponseProperty("HasSso"),this.hasResetPassword=this.getResponseProperty("HasResetPassword"),this.usersGetPremium=this.getResponseProperty("UsersGetPremium"),this.upgradeSortOrder=this.getResponseProperty("UpgradeSortOrder"),this.displaySortOrder=this.getResponseProperty("SortOrder"),this.legacyYear=this.getResponseProperty("LegacyYear"),this.disabled=this.getResponseProperty("Disabled"),this.stripePlanId=this.getResponseProperty("StripePlanId"),this.stripeSeatPlanId=this.getResponseProperty("StripeSeatPlanId"),this.stripeStoragePlanId=this.getResponseProperty("StripeStoragePlanId"),this.stripePremiumAccessPlanId=this.getResponseProperty("StripePremiumAccessPlanId"),this.basePrice=this.getResponseProperty("BasePrice"),this.seatPrice=this.getResponseProperty("SeatPrice"),this.additionalStoragePricePerGb=this.getResponseProperty("AdditionalStoragePricePerGb"),this.premiumAccessOptionPrice=this.getResponseProperty("PremiumAccessOptionPrice")}}class Qz extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.identifier=this.getResponseProperty("Identifier"),this.name=this.getResponseProperty("Name"),this.businessName=this.getResponseProperty("BusinessName"),this.businessAddress1=this.getResponseProperty("BusinessAddress1"),this.businessAddress2=this.getResponseProperty("BusinessAddress2"),this.businessAddress3=this.getResponseProperty("BusinessAddress3"),this.businessCountry=this.getResponseProperty("BusinessCountry"),this.businessTaxNumber=this.getResponseProperty("BusinessTaxNumber"),this.billingEmail=this.getResponseProperty("BillingEmail");const t=this.getResponseProperty("Plan");this.plan=null==t?null:new Wz(t),this.planType=this.getResponseProperty("PlanType"),this.seats=this.getResponseProperty("Seats"),this.maxAutoscaleSeats=this.getResponseProperty("MaxAutoscaleSeats"),this.maxCollections=this.getResponseProperty("MaxCollections"),this.maxStorageGb=this.getResponseProperty("MaxStorageGb"),this.useGroups=this.getResponseProperty("UseGroups"),this.useDirectory=this.getResponseProperty("UseDirectory"),this.useEvents=this.getResponseProperty("UseEvents"),this.useTotp=this.getResponseProperty("UseTotp"),this.use2fa=this.getResponseProperty("Use2fa"),this.useApi=this.getResponseProperty("UseApi"),this.useResetPassword=this.getResponseProperty("UseResetPassword"),this.hasPublicAndPrivateKeys=this.getResponseProperty("HasPublicAndPrivateKeys")}}class Yz extends yg.c{constructor(e){super(e);const t=this.getResponseProperty("LastSyncDate");t&&(this.lastSyncDate=new Date(t))}}class Zz extends yg.c{constructor(e){super(e),this.storageName=this.getResponseProperty("StorageName"),this.storageGb=this.getResponseProperty("StorageGb"),this.maxStorageGb=this.getResponseProperty("MaxStorageGb"),this.license=this.getResponseProperty("License"),this.expiration=this.getResponseProperty("Expiration"),this.usingInAppPurchase=this.getResponseProperty("UsingInAppPurchase");const t=this.getResponseProperty("Subscription"),n=this.getResponseProperty("UpcomingInvoice");this.subscription=null==t?null:new Jz(t),this.upcomingInvoice=null==n?null:new eN(n)}}class Jz extends yg.c{constructor(e){super(e),this.items=[],this.trialEndDate=this.getResponseProperty("TrialStartDate"),this.trialEndDate=this.getResponseProperty("TrialEndDate"),this.periodStartDate=this.getResponseProperty("PeriodStartDate"),this.periodEndDate=this.getResponseProperty("PeriodEndDate"),this.cancelledDate=this.getResponseProperty("CancelledDate"),this.cancelAtEndDate=this.getResponseProperty("CancelAtEndDate"),this.status=this.getResponseProperty("Status"),this.cancelled=this.getResponseProperty("Cancelled");const t=this.getResponseProperty("Items");null!=t&&(this.items=t.map((e=>new Xz(e))))}}class Xz extends yg.c{constructor(e){super(e),this.name=this.getResponseProperty("Name"),this.amount=this.getResponseProperty("Amount"),this.quantity=this.getResponseProperty("Quantity"),this.interval=this.getResponseProperty("Interval"),this.sponsoredSubscriptionItem=this.getResponseProperty("SponsoredSubscriptionItem")}}class eN extends yg.c{constructor(e){super(e),this.date=this.getResponseProperty("Date"),this.amount=this.getResponseProperty("Amount")}}class tN extends Qz{constructor(e){super(e),this.storageName=this.getResponseProperty("StorageName"),this.storageGb=this.getResponseProperty("StorageGb");const t=this.getResponseProperty("Subscription");this.subscription=null==t?null:new Jz(t);const n=this.getResponseProperty("UpcomingInvoice");this.upcomingInvoice=null==n?null:new eN(n),this.expiration=this.getResponseProperty("Expiration")}}class nN extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.userId=this.getResponseProperty("UserId"),this.key=this.getResponseProperty("Key")}}class iN extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.error=this.getResponseProperty("Error")}}class rN extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.userId=this.getResponseProperty("UserId"),this.type=this.getResponseProperty("Type"),this.status=this.getResponseProperty("Status"),this.permissions=new Sg(this.getResponseProperty("Permissions")),this.accessAll=this.getResponseProperty("AccessAll"),this.resetPasswordEnrolled=this.getResponseProperty("ResetPasswordEnrolled")}}class oN extends rN{constructor(e){var t;super(e),this.name=this.getResponseProperty("Name"),this.email=this.getResponseProperty("Email"),this.twoFactorEnabled=this.getResponseProperty("TwoFactorEnabled"),this.usesKeyConnector=null!==(t=this.getResponseProperty("UsesKeyConnector"))&&void 0!==t&&t}}class aN extends rN{constructor(e){super(e),this.collections=[];const t=this.getResponseProperty("Collections");null!=t&&(this.collections=t.map((e=>new Ez(e))))}}class sN extends yg.c{constructor(e){super(e),this.kdf=this.getResponseProperty("Kdf"),this.kdfIterations=this.getResponseProperty("KdfIterations"),this.resetPasswordKey=this.getResponseProperty("ResetPasswordKey"),this.encryptedPrivateKey=this.getResponseProperty("EncryptedPrivateKey")}}class lN extends yg.c{constructor(e){var t,n;super(e),this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name"),this.usePolicies=this.getResponseProperty("UsePolicies"),this.useGroups=this.getResponseProperty("UseGroups"),this.useDirectory=this.getResponseProperty("UseDirectory"),this.useEvents=this.getResponseProperty("UseEvents"),this.useTotp=this.getResponseProperty("UseTotp"),this.use2fa=this.getResponseProperty("Use2fa"),this.useApi=this.getResponseProperty("UseApi"),this.useSso=this.getResponseProperty("UseSso"),this.useKeyConnector=null!==(t=this.getResponseProperty("UseKeyConnector"))&&void 0!==t&&t,this.useResetPassword=this.getResponseProperty("UseResetPassword"),this.selfHost=this.getResponseProperty("SelfHost"),this.usersGetPremium=this.getResponseProperty("UsersGetPremium"),this.seats=this.getResponseProperty("Seats"),this.maxCollections=this.getResponseProperty("MaxCollections"),this.maxStorageGb=this.getResponseProperty("MaxStorageGb"),this.key=this.getResponseProperty("Key"),this.hasPublicAndPrivateKeys=this.getResponseProperty("HasPublicAndPrivateKeys"),this.status=this.getResponseProperty("Status"),this.type=this.getResponseProperty("Type"),this.enabled=this.getResponseProperty("Enabled"),this.ssoBound=this.getResponseProperty("SsoBound"),this.identifier=this.getResponseProperty("Identifier"),this.permissions=new Sg(this.getResponseProperty("permissions")),this.resetPasswordEnrolled=this.getResponseProperty("ResetPasswordEnrolled"),this.userId=this.getResponseProperty("UserId"),this.providerId=this.getResponseProperty("ProviderId"),this.providerName=this.getResponseProperty("ProviderName"),this.familySponsorshipFriendlyName=this.getResponseProperty("FamilySponsorshipFriendlyName"),this.familySponsorshipAvailable=this.getResponseProperty("FamilySponsorshipAvailable"),this.planProductType=this.getResponseProperty("PlanProductType"),this.keyConnectorEnabled=null!==(n=this.getResponseProperty("KeyConnectorEnabled"))&&void 0!==n&&n,this.keyConnectorUrl=this.getResponseProperty("KeyConnectorUrl");const i=this.getResponseProperty("FamilySponsorshipLastSyncDate");i&&(this.familySponsorshipLastSyncDate=new Date(i));const r=this.getResponseProperty("FamilySponsorshipValidUntil");r&&(this.familySponsorshipValidUntil=new Date(r)),this.familySponsorshipToDelete=this.getResponseProperty("FamilySponsorshipToDelete")}}class dN extends lN{constructor(e){super(e),this.keyConnectorEnabled=!1}}class cN extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name"),this.key=this.getResponseProperty("Key"),this.status=this.getResponseProperty("Status"),this.type=this.getResponseProperty("Type"),this.enabled=this.getResponseProperty("Enabled"),this.permissions=new Sg(this.getResponseProperty("permissions")),this.userId=this.getResponseProperty("UserId"),this.useEvents=this.getResponseProperty("UseEvents")}}class pN extends yg.c{constructor(e){var t,n;super(e),this.organizations=[],this.providers=[],this.providerOrganizations=[],this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name"),this.email=this.getResponseProperty("Email"),this.emailVerified=this.getResponseProperty("EmailVerified"),this.masterPasswordHint=this.getResponseProperty("MasterPasswordHint"),this.premiumPersonally=this.getResponseProperty("Premium"),this.premiumFromOrganization=this.getResponseProperty("PremiumFromOrganization"),this.culture=this.getResponseProperty("Culture"),this.twoFactorEnabled=this.getResponseProperty("TwoFactorEnabled"),this.key=this.getResponseProperty("Key"),this.privateKey=this.getResponseProperty("PrivateKey"),this.securityStamp=this.getResponseProperty("SecurityStamp"),this.forcePasswordReset=null!==(t=this.getResponseProperty("ForcePasswordReset"))&&void 0!==t&&t,this.usesKeyConnector=null!==(n=this.getResponseProperty("UsesKeyConnector"))&&void 0!==n&&n;const i=this.getResponseProperty("Organizations");null!=i&&(this.organizations=i.map((e=>new lN(e))));const r=this.getResponseProperty("Providers");null!=r&&(this.providers=r.map((e=>new cN(e))));const o=this.getResponseProperty("ProviderOrganizations");null!=o&&(this.providerOrganizations=o.map((e=>new dN(e))))}}class uN extends yg.c{constructor(e){super(e);const t=this.getResponseProperty("UserProfile");null!=t&&(this.userProfile=new pN(t)),this.paymentIntentClientSecret=this.getResponseProperty("PaymentIntentClientSecret"),this.success=this.getResponseProperty("Success")}}class mN extends yg.c{constructor(e){super(e),this.kdf=this.getResponseProperty("Kdf"),this.kdfIterations=this.getResponseProperty("KdfIterations")}}class hN extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.providerId=this.getResponseProperty("ProviderId"),this.organizationId=this.getResponseProperty("OrganizationId"),this.key=this.getResponseProperty("Key"),this.settings=this.getResponseProperty("Settings"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate")}}class vN extends hN{constructor(e){super(e),this.organizationName=this.getResponseProperty("OrganizationName")}}class gN extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name"),this.businessName=this.getResponseProperty("BusinessName"),this.billingEmail=this.getResponseProperty("BillingEmail")}}class fN extends nN{}class xN extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.error=this.getResponseProperty("Error")}}class yN extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.userId=this.getResponseProperty("UserId"),this.type=this.getResponseProperty("Type"),this.status=this.getResponseProperty("Status"),this.permissions=new Sg(this.getResponseProperty("Permissions"))}}class SN extends yN{constructor(e){super(e),this.name=this.getResponseProperty("Name"),this.email=this.getResponseProperty("Email")}}class bN extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.type=this.getResponseProperty("Type"),this.name=this.getResponseProperty("Name");const t=this.getResponseProperty("Text");null!=t&&(this.text=new DD(t));const n=this.getResponseProperty("File");null!=n&&(this.file=new MD(n)),this.expirationDate=this.getResponseProperty("ExpirationDate"),this.creatorIdentifier=this.getResponseProperty("CreatorIdentifier")}}class wN extends yg.c{constructor(e){super(e),this.id=null,this.url=null,this.id=this.getResponseProperty("Id"),this.url=this.getResponseProperty("Url")}}class IN extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.accessId=this.getResponseProperty("AccessId"),this.type=this.getResponseProperty("Type"),this.name=this.getResponseProperty("Name"),this.notes=this.getResponseProperty("Notes"),this.key=this.getResponseProperty("Key"),this.maxAccessCount=this.getResponseProperty("MaxAccessCount"),this.accessCount=this.getResponseProperty("AccessCount"),this.revisionDate=this.getResponseProperty("RevisionDate"),this.expirationDate=this.getResponseProperty("ExpirationDate"),this.deletionDate=this.getResponseProperty("DeletionDate"),this.password=this.getResponseProperty("Password"),this.disable=this.getResponseProperty("Disabled")||!1,this.hideEmail=this.getResponseProperty("HideEmail")||!1;const t=this.getResponseProperty("Text");null!=t&&(this.text=new DD(t));const n=this.getResponseProperty("File");null!=n&&(this.file=new MD(n))}}class CN extends yg.c{constructor(e){super(e),this.url=null,this.fileUploadType=this.getResponseProperty("FileUploadType");const t=this.getResponseProperty("SendResponse");this.sendResponse=null==t?null:new IN(t),this.url=this.getResponseProperty("Url")}}class EN extends yg.c{constructor(e){super(e),this.token=this.getResponseProperty("Token")}}class kN extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name"),this.revisionDate=this.getResponseProperty("RevisionDate")}}class PN extends yg.c{constructor(e){super(e),this.folders=[],this.collections=[],this.ciphers=[],this.policies=[],this.sends=[];const t=this.getResponseProperty("Profile");null!=t&&(this.profile=new pN(t));const n=this.getResponseProperty("Folders");null!=n&&(this.folders=n.map((e=>new kN(e))));const i=this.getResponseProperty("Collections");null!=i&&(this.collections=i.map((e=>new Pz(e))));const r=this.getResponseProperty("Ciphers");null!=r&&(this.ciphers=r.map((e=>new pM(e))));const o=this.getResponseProperty("Domains");null!=o&&(this.domains=new Bz(o));const a=this.getResponseProperty("Policies");null!=a&&(this.policies=a.map((e=>new $f(e))));const s=this.getResponseProperty("Sends");null!=s&&(this.sends=s.map((e=>new IN(e))))}}class AN extends yg.c{constructor(e){super(e),this.taxId=this.getResponseProperty("TaxIdNumber"),this.taxIdType=this.getResponseProperty("TaxIdType"),this.line1=this.getResponseProperty("Line1"),this.line2=this.getResponseProperty("Line2"),this.city=this.getResponseProperty("City"),this.state=this.getResponseProperty("State"),this.postalCode=this.getResponseProperty("PostalCode"),this.country=this.getResponseProperty("Country")}}class ON extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.country=this.getResponseProperty("Country"),this.state=this.getResponseProperty("State"),this.postalCode=this.getResponseProperty("PostalCode"),this.rate=this.getResponseProperty("Rate")}}class TN extends yg.c{constructor(e){super(e),this.enabled=this.getResponseProperty("Enabled"),this.key=this.getResponseProperty("Key")}}class BN extends yg.c{constructor(e){super(e),this.enabled=this.getResponseProperty("Enabled"),this.host=this.getResponseProperty("Host"),this.secretKey=this.getResponseProperty("SecretKey"),this.integrationKey=this.getResponseProperty("IntegrationKey")}}class MN extends yg.c{constructor(e){super(e),this.enabled=this.getResponseProperty("Enabled"),this.email=this.getResponseProperty("Email")}}class DN extends yg.c{constructor(e){super(e),this.enabled=this.getResponseProperty("Enabled"),this.type=this.getResponseProperty("Type")}}class FN extends yg.c{constructor(e){super(e),this.code=this.getResponseProperty("Code")}}class RN extends yg.c{constructor(e){super(e),this.enabled=this.getResponseProperty("Enabled");const t=this.getResponseProperty("Keys");this.keys=null==t?null:t.map((e=>new UN(e)))}}class UN extends yg.c{constructor(e){super(e),this.name=this.getResponseProperty("Name"),this.id=this.getResponseProperty("Id"),this.migrated=this.getResponseProperty("Migrated")}}class zN extends yg.c{constructor(e){super(e),this.attestation=this.getResponseProperty("attestation"),this.authenticatorSelection=this.getResponseProperty("authenticatorSelection"),this.challenge=N.c.fromUrlB64ToArray(this.getResponseProperty("challenge")),this.excludeCredentials=this.getResponseProperty("excludeCredentials").map((e=>(e.id=N.c.fromUrlB64ToArray(e.id).buffer,e))),this.extensions=this.getResponseProperty("extensions"),this.pubKeyCredParams=this.getResponseProperty("pubKeyCredParams"),this.rp=this.getResponseProperty("rp"),this.timeout=this.getResponseProperty("timeout");const t=this.getResponseProperty("user");t.id=N.c.fromUrlB64ToArray(t.id),this.user=t}}class NN extends yg.c{constructor(e){super(e),this.enabled=this.getResponseProperty("Enabled"),this.key1=this.getResponseProperty("Key1"),this.key2=this.getResponseProperty("Key2"),this.key3=this.getResponseProperty("Key3"),this.key4=this.getResponseProperty("Key4"),this.key5=this.getResponseProperty("Key5"),this.nfc=this.getResponseProperty("Nfc")}}class VN extends yg.c{constructor(e){super(e),this.userId=this.getResponseProperty("UserId"),this.publicKey=this.getResponseProperty("PublicKey")}}var HN,jN=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};!function(e){e.Local="local",e.Memory="memory",e.Session="session"}(HN||(HN={}));var LN=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};var KN=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},GN=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},qN=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class _N{constructor(e,t){this.cryptoFunctionService=e,this.apiService=t}passwordLeaked(e){return qN(this,void 0,void 0,(function*(){const t=yield this.cryptoFunctionService.hash(e,"sha1"),n=N.c.fromBufferToHex(t).toUpperCase(),i=n.substr(0,5),r=n.substr(5),o=yield this.apiService.nativeFetch(new Request("https://api.pwnedpasswords.com/range/"+i)),a=(yield o.text()).split(/\r?\n/).find((e=>e.split(":")[0]===r));return null!=a?parseInt(a.split(":")[1],10):0}))}breachedAccounts(e){return qN(this,void 0,void 0,(function*(){try{return yield this.apiService.getHibpBreach(e)}catch(t){if(404===t.statusCode)return[];throw new Error}}))}}var $N,WN;KN([($N=100,WN=()=>"passwordLeaked",(e,t,n)=>{const i=n.value,r=new Map;return{value:function(...e){const t=(e=>{let t=r.get(e);return null!=t||(t=new Map,r.set(e,t)),t})(this),n=WN(e);let o=t.get(n);return null==o&&(o=[],t.set(n,o)),new Promise(((a,s)=>{const l=()=>{const d=()=>{o.splice(o.indexOf(l),1),o.length>=$N?o[$N-1]():0===o.length&&(t.delete(n),0===t.size&&r.delete(this))};i.apply(this,e).then((e=>(d(),e))).catch((e=>{throw d(),e})).then(a,s)};o.push(l),o.length<=$N&&l()}))}}}),GN("design:type",Function),GN("design:paramtypes",[String]),GN("design:returntype",Promise)],_N.prototype,"passwordLeaked",null);class QN{constructor(){this.captchaSiteKey="",this.resetMasterPassword=!1,this.forcePasswordReset=!1,this.twoFactorProviders=null}get requiresCaptcha(){return!N.c.isNullOrWhitespace(this.captchaSiteKey)}get requiresTwoFactor(){return null!=this.twoFactorProviders}}var YN=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class ZN{constructor(e,t,n,i,r,o,a,s,l){this.cryptoService=e,this.apiService=t,this.tokenService=n,this.appIdService=i,this.platformUtilsService=r,this.messagingService=o,this.logService=a,this.stateService=s,this.twoFactorService=l,this.captchaBypassToken=null}logInTwoFactor(e,t=null){return YN(this,void 0,void 0,(function*(){return this.tokenRequest.setTwoFactor(e),this.startLogIn()}))}startLogIn(){return YN(this,void 0,void 0,(function*(){this.twoFactorService.clearSelectedProvider();const e=yield this.apiService.postIdentityToken(this.tokenRequest);if(e instanceof zz)return this.processTwoFactorResponse(e);if(e instanceof Rz)return this.processCaptchaResponse(e);if(e instanceof Uz)return this.processTokenResponse(e);throw new Error("Invalid response object.")}))}onSuccessfulLogin(e){return null}buildDeviceRequest(){return YN(this,void 0,void 0,(function*(){const e=yield this.appIdService.getAppId();return new mz(e,this.platformUtilsService)}))}buildTwoFactor(e){return YN(this,void 0,void 0,(function*(){if(null!=e)return e;const t=yield this.tokenService.getTwoFactorToken();return null!=t?new cn(sn.Remember,t,!1):new cn}))}saveAccountInformation(e){return YN(this,void 0,void 0,(function*(){const t=yield this.tokenService.decodeToken(e.accessToken);yield this.stateService.addAccount(new cz({profile:Object.assign(Object.assign({},new sz),{userId:t.sub,email:t.email,hasPremiumPersonally:t.premium,kdfIterations:e.kdfIterations,kdfType:e.kdf}),tokens:Object.assign(Object.assign({},new dz),{accessToken:e.accessToken,refreshToken:e.refreshToken})}))}))}processTokenResponse(e){var t;return YN(this,void 0,void 0,(function*(){const n=new QN;n.resetMasterPassword=e.resetMasterPassword,n.forcePasswordReset=e.forcePasswordReset,yield this.saveAccountInformation(e),null!=e.twoFactorToken&&(yield this.tokenService.setTwoFactorToken(e));return null==e.key||(yield this.cryptoService.setEncKey(e.key),yield this.cryptoService.setEncPrivateKey(null!==(t=e.privateKey)&&void 0!==t?t:yield this.createKeyPairForOldAccount())),yield this.onSuccessfulLogin(e),yield this.stateService.setBiometricLocked(!1),this.messagingService.send("loggedIn"),n}))}processTwoFactorResponse(e){var t;return YN(this,void 0,void 0,(function*(){const n=new QN;return n.twoFactorProviders=e.twoFactorProviders2,this.twoFactorService.setProviders(e),this.captchaBypassToken=null!==(t=e.captchaToken)&&void 0!==t?t:null,n}))}processCaptchaResponse(e){return YN(this,void 0,void 0,(function*(){const t=new QN;return t.captchaSiteKey=e.siteKey,t}))}createKeyPairForOldAccount(){return YN(this,void 0,void 0,(function*(){try{const[e,t]=yield this.cryptoService.makeKeyPair();return yield this.apiService.postAccountKeys(new je(e,t.encryptedString)),t.encryptedString}catch(e){this.logService.error(e)}}))}}var JN=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class XN extends ZN{constructor(e,t,n,i,r,o,a,s,l,d,c){super(e,t,n,i,r,o,a,s,l),this.environmentService=d,this.keyConnectorService=c}onSuccessfulLogin(e){return JN(this,void 0,void 0,(function*(){if(e.apiUseKeyConnector){const e=this.environmentService.getKeyConnectorUrl();yield this.keyConnectorService.getAndSetKey(e)}}))}logIn(e){return JN(this,void 0,void 0,(function*(){return this.tokenRequest=new vz(e.clientId,e.clientSecret,yield this.buildTwoFactor(),yield this.buildDeviceRequest()),this.startLogIn()}))}saveAccountInformation(e){const t=Object.create(null,{saveAccountInformation:{get:()=>super.saveAccountInformation}});return JN(this,void 0,void 0,(function*(){yield t.saveAccountInformation.call(this,e),yield this.stateService.setApiKeyClientId(this.tokenRequest.clientId),yield this.stateService.setApiKeyClientSecret(this.tokenRequest.clientSecret)}))}}class eV extends hz{constructor(e,t,n,i,r){super(i,r),this.email=e,this.masterPasswordHash=t,this.captchaResponse=n,this.twoFactor=i}toIdentityToken(e){const t=super.toIdentityToken(e);return t.grant_type="password",t.username=this.email,t.password=this.masterPasswordHash,null!=this.captchaResponse&&(t.captchaResponse=this.captchaResponse),t}alterIdentityTokenHeaders(e){e.set("Auth-Email",N.c.fromUtf8ToUrlB64(this.email))}}var tV=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class nV extends ZN{constructor(e,t,n,i,r,o,a,s,l,d){super(e,t,n,i,r,o,a,s,l),this.authService=d}get email(){return this.tokenRequest.email}get masterPasswordHash(){return this.tokenRequest.masterPasswordHash}onSuccessfulLogin(){return tV(this,void 0,void 0,(function*(){yield this.cryptoService.setKey(this.key),yield this.cryptoService.setKeyHash(this.localHashedPassword)}))}logInTwoFactor(e,t){const n=Object.create(null,{logInTwoFactor:{get:()=>super.logInTwoFactor}});return tV(this,void 0,void 0,(function*(){return this.tokenRequest.captchaResponse=null!=t?t:this.captchaBypassToken,n.logInTwoFactor.call(this,e)}))}logIn(e){return tV(this,void 0,void 0,(function*(){const{email:t,masterPassword:n,captchaToken:i,twoFactor:r}=e;this.key=yield this.authService.makePreloginKey(n,t),this.localHashedPassword=yield this.cryptoService.hashPassword(n,this.key,ee.LocalAuthorization);const o=yield this.cryptoService.hashPassword(n,this.key);return this.tokenRequest=new eV(t,o,i,yield this.buildTwoFactor(r),yield this.buildDeviceRequest()),this.startLogIn()}))}}class iV extends hz{constructor(e,t,n,i,r){super(i,r),this.code=e,this.codeVerifier=t,this.redirectUri=n,this.twoFactor=i}toIdentityToken(e){const t=super.toIdentityToken(e);return t.grant_type="authorization_code",t.code=this.code,t.code_verifier=this.codeVerifier,t.redirect_uri=this.redirectUri,t}}var rV=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class oV extends ZN{constructor(e,t,n,i,r,o,a,s,l,d){super(e,t,n,i,r,o,a,s,l),this.keyConnectorService=d}onSuccessfulLogin(e){return rV(this,void 0,void 0,(function*(){const t=null==e.key;null!=e.keyConnectorUrl&&(t?yield this.keyConnectorService.convertNewSsoUserToKeyConnector(e,this.orgId):yield this.keyConnectorService.getAndSetKey(e.keyConnectorUrl))}))}logIn(e){return rV(this,void 0,void 0,(function*(){return this.orgId=e.orgId,this.tokenRequest=new iV(e.code,e.codeVerifier,e.redirectUrl,yield this.buildTwoFactor(e.twoFactor),yield this.buildDeviceRequest()),this.startLogIn()}))}}class aV{constructor(e){this.email=e}}var sV=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function lV(e){return(t,n,i)=>{const r=i.value,o=new Map;return{value:function(...t){const n=(e=>{let t=o.get(e);return null!=t||(t=new Map,o.set(e,t)),t})(this),i=e(t);let a=n.get(i);if(null!=a)return a;const s=()=>{n.delete(i),0===n.size&&o.delete(this)};return a=r.apply(this,t).then((e=>(s(),e))).catch((e=>{throw s(),e})),n.set(i,a),a}}}}var dV=n(73317),cV=n(47707),pV=n(67923),uV=n(1381),mV=n(25640),hV=n(4477),vV=n(81057),gV=n(84089);class fV{constructor(e){this.comparator=e,this.sortedCiphersByUrl=new Map,this.timeouts=new Map}isCached(e){return this.sortedCiphersByUrl.has(e)}addCiphers(e,t){t.sort(this.comparator),this.sortedCiphersByUrl.set(e,new xV(t)),this.resetTimer(e)}getLastUsed(e){return this.resetTimer(e),this.isCached(e)?this.sortedCiphersByUrl.get(e).getLastUsed():null}getLastLaunched(e){return this.isCached(e)?this.sortedCiphersByUrl.get(e).getLastLaunched():null}getNext(e){return this.resetTimer(e),this.isCached(e)?this.sortedCiphersByUrl.get(e).getNext():null}updateLastUsedIndex(e){this.isCached(e)&&this.sortedCiphersByUrl.get(e).updateLastUsedIndex()}clear(){this.sortedCiphersByUrl.clear(),this.timeouts.clear()}resetTimer(e){clearTimeout(this.timeouts.get(e)),this.timeouts.set(e,setTimeout((()=>{this.sortedCiphersByUrl.delete(e),this.timeouts.delete(e)}),3e3))}}class xV{constructor(e){this.ciphers=e,this.lastUsedIndex=-1}getLastUsed(){return this.lastUsedIndex=Math.max(this.lastUsedIndex,0),this.ciphers[this.lastUsedIndex]}getLastLaunched(){return this.ciphers.filter((e=>{var t;return null===(t=e.localData)||void 0===t?void 0:t.lastLaunched})).sort(((e,t)=>t.localData.lastLaunched.valueOf()-e.localData.lastLaunched.valueOf()))[0]}getNextIndex(){return(this.lastUsedIndex+1)%this.ciphers.length}getNext(){return this.ciphers[this.getNextIndex()]}updateLastUsedIndex(){this.lastUsedIndex=this.getNextIndex()}}class yV{constructor(e,t){this.ids=null==e?[]:e,this.folderId=t}}class SV{constructor(e){this.ids=null==e?[]:e}}class bV{constructor(e,t){null!=e&&(this.ciphers=[],e.forEach((e=>{this.ciphers.push(new Br(e))}))),this.collectionIds=t}}class wV{constructor(e){this.cipher=new Tr.a(e),this.collectionIds=e.collectionIds}}var IV=n(42078),CV=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},EV=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},kV=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const PV=new Map([["google.com",new Set(["script.google.com"])]]);class AV{constructor(e,t,n,i,r,o,a,s){this.cryptoService=e,this.settingsService=t,this.apiService=n,this.fileUploadService=i,this.i18nService=r,this.searchService=o,this.logService=a,this.stateService=s,this.sortedCiphersCache=new fV(this.sortCiphersByLastUsed)}getDecryptedCipherCache(){return kV(this,void 0,void 0,(function*(){return yield this.stateService.getDecryptedCiphers()}))}setDecryptedCipherCache(e){return kV(this,void 0,void 0,(function*(){yield this.stateService.setDecryptedCiphers(e),null!=this.searchService&&(null==e?this.searchService().clearIndex():this.searchService().indexCiphers())}))}clearCache(e){return kV(this,void 0,void 0,(function*(){yield this.clearDecryptedCiphersState(e)}))}encrypt(e,t,n=null){return kV(this,void 0,void 0,(function*(){if(null!=e.id){if(null==n&&(n=yield this.get(e.id)),null!=n){const t=yield n.decrypt();if(e.passwordHistory=t.passwordHistory||[],e.type===jr.O.Login&&t.type===jr.O.Login)if(null!=t.login.password&&""!==t.login.password&&t.login.password!==e.login.password){const n=new IV.i;n.password=t.login.password,n.lastUsedDate=e.login.passwordRevisionDate=new Date,e.passwordHistory.splice(0,0,n)}else e.login.passwordRevisionDate=t.login.passwordRevisionDate;if(t.hasFields){const n=t.fields.filter((e=>e.type===ro.f.Hidden&&null!=e.name&&""!==e.name&&null!=e.value&&""!==e.value)),i=null==e.fields?[]:e.fields.filter((e=>e.type===ro.f.Hidden&&null!=e.name&&""!==e.name));n.forEach((t=>{const n=i.find((e=>e.name===t.name));if(null==n||n.value!==t.value){const n=new IV.i;n.password=t.name+": "+t.value,n.lastUsedDate=new Date,e.passwordHistory.splice(0,0,n)}}))}}null!=e.passwordHistory&&0===e.passwordHistory.length?e.passwordHistory=null:null!=e.passwordHistory&&e.passwordHistory.length>5&&(e.passwordHistory=e.passwordHistory.slice(0,5))}const i=new Gc.t;if(i.id=e.id,i.folderId=e.folderId,i.favorite=e.favorite,i.organizationId=e.organizationId,i.type=e.type,i.collectionIds=e.collectionIds,i.revisionDate=e.revisionDate,i.reprompt=e.reprompt,null==t&&null!=i.organizationId&&null==(t=yield this.cryptoService.getOrgKey(i.organizationId)))throw new Error("Cannot encrypt cipher for organization. No key.");return yield Promise.all([this.encryptObjProperty(e,i,{name:null,notes:null},t),this.encryptCipherData(i,e,t),this.encryptFields(e.fields,t).then((e=>{i.fields=e})),this.encryptPasswordHistories(e.passwordHistory,t).then((e=>{i.passwordHistory=e})),this.encryptAttachments(e.attachments,t).then((e=>{i.attachments=e}))]),i}))}encryptAttachments(e,t){return kV(this,void 0,void 0,(function*(){if(null==e||0===e.length)return null;const n=[],i=[];return e.forEach((e=>kV(this,void 0,void 0,(function*(){const r=new dV.P;r.id=e.id,r.size=e.size,r.sizeName=e.sizeName,r.url=e.url;const o=this.encryptObjProperty(e,r,{fileName:null},t).then((()=>kV(this,void 0,void 0,(function*(){null!=e.key&&(r.key=yield this.cryptoService.encrypt(e.key.key,t)),i.push(r)}))));n.push(o)})))),yield Promise.all(n),i}))}encryptFields(e,t){return kV(this,void 0,void 0,(function*(){if(!e||!e.length)return null;const n=this,i=[];return yield e.reduce(((e,r)=>kV(this,void 0,void 0,(function*(){yield e;const o=yield n.encryptField(r,t);i.push(o)}))),Promise.resolve()),i}))}encryptField(e,t){return kV(this,void 0,void 0,(function*(){const n=new pV.g;return n.type=e.type,n.linkedId=e.linkedId,e.type===ro.f.Boolean&&"true"!==e.value&&(e.value="false"),yield this.encryptObjProperty(e,n,{name:null,value:null},t),n}))}encryptPasswordHistories(e,t){return kV(this,void 0,void 0,(function*(){if(!e||!e.length)return null;const n=this,i=[];return yield e.reduce(((e,r)=>kV(this,void 0,void 0,(function*(){yield e;const o=yield n.encryptPasswordHistory(r,t);i.push(o)}))),Promise.resolve()),i}))}encryptPasswordHistory(e,t){return kV(this,void 0,void 0,(function*(){const n=new vV.r;return n.lastUsedDate=e.lastUsedDate,yield this.encryptObjProperty(e,n,{password:null},t),n}))}get(e){return kV(this,void 0,void 0,(function*(){const t=yield this.stateService.getEncryptedCiphers();if(null==t||!t.hasOwnProperty(e))return null;const n=yield this.stateService.getLocalData();return new Gc.t(t[e],n?n[e]:null)}))}getAll(){return kV(this,void 0,void 0,(function*(){const e=yield this.stateService.getLocalData(),t=yield this.stateService.getEncryptedCiphers(),n=[];for(const i in t)t.hasOwnProperty(i)&&n.push(new Gc.t(t[i],e?e[i]:null));return n}))}getAllDecrypted(){var e;return kV(this,void 0,void 0,(function*(){const t=yield this.stateService.getUserId();if(null!=(yield this.getDecryptedCipherCache()))return null!=this.searchService&&(null!==(e=this.searchService().indexedEntityId)&&void 0!==e?e:t)!==t&&(yield this.searchService().indexCiphers(t,yield this.getDecryptedCipherCache())),yield this.getDecryptedCipherCache();const n=[];if(!(yield this.cryptoService.hasKey()))throw new Error("No key.");const i=[];return(yield this.getAll()).forEach((e=>kV(this,void 0,void 0,(function*(){i.push(e.decrypt().then((e=>n.push(e))))})))),yield Promise.all(i),n.sort(this.getLocaleSortingFunction()),yield this.setDecryptedCipherCache(n),n}))}getAllDecryptedForGrouping(e,t=!0){return kV(this,void 0,void 0,(function*(){return(yield this.getAllDecrypted()).filter((n=>!n.isDeleted&&(!(!t||n.folderId!==e)||!t&&null!=n.collectionIds&&n.collectionIds.indexOf(e)>-1)))}))}getAllDecryptedForUrl(e,t,n=null){return kV(this,void 0,void 0,(function*(){if(null==e&&null==t)return Promise.resolve([]);const i=N.c.getDomain(e),r=null==i?Promise.resolve([]):this.settingsService.getEquivalentDomains().then((e=>{let t=[];return e.forEach((e=>{e.length&&e.indexOf(i)>=0&&(t=t.concat(e))})),t.length||t.push(i),t})),o=yield Promise.all([r,this.getAllDecrypted()]),a=o[0],s=o[1];return null==n&&null==(n=yield this.stateService.getDefaultUriMatch())&&(n=qr.I.Domain),s.filter((r=>{if(null!=r.deletedDate)return!1;if(null!=t&&t.indexOf(r.type)>-1)return!0;if(null!=e&&r.type===jr.O.Login&&null!=r.login.uris)for(let t=0;t<r.login.uris.length;t++){const s=r.login.uris[t];if(null==s.uri)continue;switch(null==s.match?n:s.match){case qr.I.Domain:if(null!=i&&null!=s.domain&&a.indexOf(s.domain)>-1){if(!PV.has(s.domain))return!0;{const t=N.c.getHost(e);if(!PV.get(s.domain).has(t))return!0}}break;case qr.I.Host:{const t=N.c.getHost(e);if(null!=t&&t===N.c.getHost(s.uri))return!0;break}case qr.I.Exact:if(e===s.uri)return!0;break;case qr.I.StartsWith:if(e.startsWith(s.uri))return!0;break;case qr.I.RegularExpression:try{if(new RegExp(s.uri,"i").test(e))return!0}catch(o){this.logService.error(o)}break;case qr.I.Never:}}return!1}))}))}getAllFromApiForOrganization(e){return kV(this,void 0,void 0,(function*(){const t=yield this.apiService.getCiphersOrganization(e);if(null!=t&&null!=t.data&&t.data.length){const e=[],n=[];return t.data.forEach((t=>{const i=new Kc.O(t),r=new Gc.t(i);n.push(r.decrypt().then((t=>e.push(t))))})),yield Promise.all(n),e.sort(this.getLocaleSortingFunction()),e}return[]}))}getLastUsedForUrl(e,t=!1){return kV(this,void 0,void 0,(function*(){return this.getCipherForUrl(e,!0,!1,t)}))}getLastLaunchedForUrl(e,t=!1){return kV(this,void 0,void 0,(function*(){return this.getCipherForUrl(e,!1,!0,t)}))}getNextCipherForUrl(e){return kV(this,void 0,void 0,(function*(){return this.getCipherForUrl(e,!1,!1,!1)}))}updateLastUsedIndexForUrl(e){this.sortedCiphersCache.updateLastUsedIndex(e)}updateLastUsedDate(e){return kV(this,void 0,void 0,(function*(){let t=yield this.stateService.getLocalData();t||(t={}),t[e]?t[e].lastUsedDate=(new Date).getTime():t[e]={lastUsedDate:(new Date).getTime()},yield this.stateService.setLocalData(t);const n=yield this.stateService.getDecryptedCiphers();if(n){for(let i=0;i<n.length;i++){const r=n[i];if(r.id===e){r.localData=t[e];break}}yield this.stateService.setDecryptedCiphers(n)}}))}updateLastLaunchedDate(e){return kV(this,void 0,void 0,(function*(){let t=yield this.stateService.getLocalData();t||(t={}),t[e]?t[e].lastLaunched=(new Date).getTime():t[e]={lastUsedDate:(new Date).getTime()},yield this.stateService.setLocalData(t);const n=yield this.stateService.getDecryptedCiphers();if(n){for(let i=0;i<n.length;i++){const r=n[i];if(r.id===e){r.localData=t[e];break}}yield this.stateService.setDecryptedCiphers(n)}}))}saveNeverDomain(e){return kV(this,void 0,void 0,(function*(){if(null==e)return;let t=yield this.stateService.getNeverDomains();t||(t={}),t[e]=null,yield this.stateService.setNeverDomains(t)}))}saveWithServer(e){return kV(this,void 0,void 0,(function*(){let t;if(null==e.id){if(null!=e.collectionIds){const n=new qc(e);t=yield this.apiService.postCipherCreate(n)}else{const n=new Tr.a(e);t=yield this.apiService.postCipher(n)}e.id=t.id}else{const n=new Tr.a(e);t=yield this.apiService.putCipher(e.id,n)}const n=new Kc.O(t,e.collectionIds);yield this.upsert(n)}))}shareWithServer(e,t,n){return kV(this,void 0,void 0,(function*(){const i=[];null!=e.attachments&&e.attachments.forEach((n=>{null==n.key&&i.push(this.shareAttachmentWithServer(n,e.id,t))})),yield Promise.all(i),e.organizationId=t,e.collectionIds=n;const r=yield this.encrypt(e),o=new wV(r),a=yield this.apiService.putShareCipher(e.id,o),s=new Kc.O(a,n);yield this.upsert(s)}))}shareManyWithServer(e,t,n){return kV(this,void 0,void 0,(function*(){const i=[],r=[];for(const s of e)s.organizationId=t,s.collectionIds=n,i.push(this.encrypt(s).then((e=>{r.push(e)})));yield Promise.all(i);const o=new bV(r,n);try{yield this.apiService.putShareCiphers(o)}catch(a){for(const t of e)t.organizationId=null,t.collectionIds=null;throw a}yield this.upsert(r.map((e=>e.toCipherData())))}))}saveAttachmentWithServer(e,t,n=!1){return new Promise(((i,r)=>{const o=new FileReader;o.readAsArrayBuffer(t),o.onload=o=>kV(this,void 0,void 0,(function*(){try{const r=yield this.saveAttachmentRawWithServer(e,t.name,o.target.result,n);i(r)}catch(a){r(a)}})),o.onerror=()=>{r("Error reading file.")}}))}saveAttachmentRawWithServer(e,t,n,i=!1){return kV(this,void 0,void 0,(function*(){const r=yield this.cryptoService.getOrgKey(e.organizationId),o=yield this.cryptoService.encrypt(t,r),a=yield this.cryptoService.makeEncKey(r),s=yield this.cryptoService.encryptToBytes(n,a[0]),l={key:a[1].encryptedString,fileName:o.encryptedString,fileSize:s.buffer.byteLength,adminRequest:i};let d;try{const t=yield this.apiService.postCipherAttachment(e.id,l);d=i?t.cipherMiniResponse:t.cipherResponse,yield this.fileUploadService.uploadCipherAttachment(i,t,o,s)}catch(p){if(!(p instanceof wa.i&&404===p.statusCode||405===p.statusCode))throw p instanceof wa.i?new Error(p.getSingleMessage()):p;d=yield this.legacyServerAttachmentFileUpload(i,e.id,o,s,a[1])}const c=new Kc.O(d,e.collectionIds);return i||(yield this.upsert(c)),new Gc.t(c)}))}legacyServerAttachmentFileUpload(e,t,n,i,r){return kV(this,void 0,void 0,(function*(){const o=new FormData;try{const e=new Blob([i.buffer],{type:"application/octet-stream"});o.append("key",r.encryptedString),o.append("data",e,n.encryptedString)}catch(s){if(!N.c.isNode||N.c.isBrowser)throw s;o.append("key",r.encryptedString),o.append("data",Buffer.from(i.buffer),{filepath:n.encryptedString,contentType:"application/octet-stream"})}let a;try{a=e?yield this.apiService.postCipherAttachmentAdminLegacy(t,o):yield this.apiService.postCipherAttachmentLegacy(t,o)}catch(s){throw new Error(s.getSingleMessage())}return a}))}saveCollectionsWithServer(e){return kV(this,void 0,void 0,(function*(){const t=new xu(e.collectionIds);yield this.apiService.putCipherCollections(e.id,t);const n=e.toCipherData();yield this.upsert(n)}))}upsert(e){return kV(this,void 0,void 0,(function*(){let t=yield this.stateService.getEncryptedCiphers();if(null==t&&(t={}),e instanceof Kc.O){const n=e;t[n.id]=n}else e.forEach((e=>{t[e.id]=e}));yield this.replace(t)}))}replace(e){return kV(this,void 0,void 0,(function*(){yield this.clearDecryptedCiphersState(),yield this.stateService.setEncryptedCiphers(e)}))}clear(e){return kV(this,void 0,void 0,(function*(){yield this.clearEncryptedCiphersState(e),yield this.clearCache(e)}))}moveManyWithServer(e,t){return kV(this,void 0,void 0,(function*(){yield this.apiService.putMoveCiphers(new yV(e,t));let n=yield this.stateService.getEncryptedCiphers();null==n&&(n={}),e.forEach((e=>{n.hasOwnProperty(e)&&(n[e].folderId=t)})),yield this.clearCache(),yield this.stateService.setEncryptedCiphers(n)}))}delete(e){return kV(this,void 0,void 0,(function*(){const t=yield this.stateService.getEncryptedCiphers();if(null!=t){if("string"==typeof e){if(null==t[e])return;delete t[e]}else e.forEach((e=>{delete t[e]}));yield this.clearCache(),yield this.stateService.setEncryptedCiphers(t)}}))}deleteWithServer(e){return kV(this,void 0,void 0,(function*(){yield this.apiService.deleteCipher(e),yield this.delete(e)}))}deleteManyWithServer(e){return kV(this,void 0,void 0,(function*(){yield this.apiService.deleteManyCiphers(new bd(e)),yield this.delete(e)}))}deleteAttachment(e,t){return kV(this,void 0,void 0,(function*(){const n=yield this.stateService.getEncryptedCiphers();if(null!=n&&n.hasOwnProperty(e)&&null!=n[e].attachments){for(let i=0;i<n[e].attachments.length;i++)n[e].attachments[i].id===t&&n[e].attachments.splice(i,1);yield this.clearCache(),yield this.stateService.setEncryptedCiphers(n)}}))}deleteAttachmentWithServer(e,t){return kV(this,void 0,void 0,(function*(){try{yield this.apiService.deleteCipherAttachment(e,t)}catch(n){return Promise.reject(n.getSingleMessage())}yield this.deleteAttachment(e,t)}))}sortCiphersByLastUsed(e,t){const n=e.localData&&e.localData.lastUsedDate?e.localData.lastUsedDate:null,i=t.localData&&t.localData.lastUsedDate?t.localData.lastUsedDate:null,r=null!=n&&null!=i;return r&&n<i?1:null!=n&&null==i||r&&n>i?-1:null!=i&&null==n?1:0}sortCiphersByLastUsedThenName(e,t){const n=this.sortCiphersByLastUsed(e,t);return 0!==n?n:this.getLocaleSortingFunction()(e,t)}getLocaleSortingFunction(){return(e,t)=>{let n=e.name,i=t.name;if(null==n&&null!=i)return-1;if(null!=n&&null==i)return 1;if(null==n&&null==i)return 0;const r=this.i18nService.collator?this.i18nService.collator.compare(n,i):n.localeCompare(i);return 0!==r||e.type!==jr.O.Login||t.type!==jr.O.Login?r:(null!=e.login.username&&(n+=e.login.username),null!=t.login.username&&(i+=t.login.username),this.i18nService.collator?this.i18nService.collator.compare(n,i):n.localeCompare(i))}}softDelete(e){return kV(this,void 0,void 0,(function*(){const t=yield this.stateService.getEncryptedCiphers();if(null==t)return;const n=e=>{null!=t[e]&&(t[e].deletedDate=(new Date).toISOString())};"string"==typeof e?n(e):e.forEach(n),yield this.clearCache(),yield this.stateService.setEncryptedCiphers(t)}))}softDeleteWithServer(e){return kV(this,void 0,void 0,(function*(){yield this.apiService.putDeleteCipher(e),yield this.softDelete(e)}))}softDeleteManyWithServer(e){return kV(this,void 0,void 0,(function*(){yield this.apiService.putDeleteManyCiphers(new bd(e)),yield this.softDelete(e)}))}restore(e){return kV(this,void 0,void 0,(function*(){const t=yield this.stateService.getEncryptedCiphers();if(null==t)return;const n=e=>{null!=t[e.id]&&(t[e.id].deletedDate=null,t[e.id].revisionDate=e.revisionDate)};e.constructor.name===Array.name?e.forEach(n):n(e),yield this.clearCache(),yield this.stateService.setEncryptedCiphers(t)}))}restoreWithServer(e){return kV(this,void 0,void 0,(function*(){const t=yield this.apiService.putRestoreCipher(e);yield this.restore({id:e,revisionDate:t.revisionDate})}))}restoreManyWithServer(e){return kV(this,void 0,void 0,(function*(){const t=yield this.apiService.putRestoreManyCiphers(new SV(e)),n=[];for(const e of t.data)n.push({id:e.id,revisionDate:e.revisionDate});yield this.restore(n)}))}shareAttachmentWithServer(e,t,n){return kV(this,void 0,void 0,(function*(){const i=yield this.apiService.nativeFetch(new Request(e.url,{cache:"no-store"}));if(200!==i.status)throw Error("Failed to download attachment: "+i.status.toString());const r=yield i.arrayBuffer(),o=yield this.cryptoService.decryptFromBytes(r,null),a=yield this.cryptoService.getOrgKey(n),s=yield this.cryptoService.encrypt(e.fileName,a),l=yield this.cryptoService.makeEncKey(a),d=yield this.cryptoService.encryptToBytes(o,l[0]),c=new FormData;try{const e=new Blob([d.buffer],{type:"application/octet-stream"});c.append("key",l[1].encryptedString),c.append("data",e,s.encryptedString)}catch(p){if(!N.c.isNode||N.c.isBrowser)throw p;c.append("key",l[1].encryptedString),c.append("data",Buffer.from(d.buffer),{filepath:s.encryptedString,contentType:"application/octet-stream"})}try{yield this.apiService.postShareCipherAttachment(t,e.id,c,n)}catch(p){throw new Error(p.getSingleMessage())}}))}encryptObjProperty(e,t,n,i){return kV(this,void 0,void 0,(function*(){const r=[],o=this;for(const a in n)n.hasOwnProperty(a)&&function(t,a){const s=Promise.resolve().then((()=>{const r=e[n[t]||t];return r&&""!==r?o.cryptoService.encrypt(r,i):null})).then((e=>{a[t]=e}));r.push(s)}(a,t);yield Promise.all(r)}))}encryptCipherData(e,t,n){return kV(this,void 0,void 0,(function*(){switch(e.type){case jr.O.Login:if(e.login=new mV.m,e.login.passwordRevisionDate=t.login.passwordRevisionDate,e.login.autofillOnPageLoad=t.login.autofillOnPageLoad,yield this.encryptObjProperty(t.login,e.login,{username:null,password:null,totp:null},n),null!=t.login.uris){e.login.uris=[];for(let i=0;i<t.login.uris.length;i++){const r=new hV.c;r.match=t.login.uris[i].match,yield this.encryptObjProperty(t.login.uris[i],r,{uri:null},n),e.login.uris.push(r)}}return;case jr.O.SecureNote:return e.secureNote=new gV.k,void(e.secureNote.type=t.secureNote.type);case jr.O.Card:return e.card=new cV.Z,void(yield this.encryptObjProperty(t.card,e.card,{cardholderName:null,brand:null,number:null,expMonth:null,expYear:null,code:null},n));case jr.O.Identity:return e.identity=new uV.i,void(yield this.encryptObjProperty(t.identity,e.identity,{title:null,firstName:null,middleName:null,lastName:null,address1:null,address2:null,address3:null,city:null,state:null,postalCode:null,country:null,company:null,email:null,phone:null,ssn:null,username:null,passportNumber:null,licenseNumber:null},n));default:throw new Error("Unknown cipher type.")}}))}getCipherForUrl(e,t,n,i){return kV(this,void 0,void 0,(function*(){const r=i?"autofillOnPageLoad-"+e:e;if(!this.sortedCiphersCache.isCached(r)){let t=yield this.getAllDecryptedForUrl(e);if(!t)return null;if(i){const e=yield this.stateService.getAutoFillOnPageLoadDefault();if(t=t.filter((t=>t.login.autofillOnPageLoad||null==t.login.autofillOnPageLoad&&!1!==e)),0===t.length)return null}this.sortedCiphersCache.addCiphers(r,t)}return n?this.sortedCiphersCache.getLastLaunched(r):t?this.sortedCiphersCache.getLastUsed(r):this.sortedCiphersCache.getNext(r)}))}clearEncryptedCiphersState(e){return kV(this,void 0,void 0,(function*(){yield this.stateService.setEncryptedCiphers(null,{userId:e})}))}clearDecryptedCiphersState(e){return kV(this,void 0,void 0,(function*(){yield this.stateService.setDecryptedCiphers(null,{userId:e}),this.clearSortedCiphers()}))}clearSortedCiphers(){this.sortedCiphersCache.clear()}}CV([lV((()=>"getAllDecrypted")),EV("design:type",Function),EV("design:paramtypes",[]),EV("design:returntype",Promise)],AV.prototype,"getAllDecrypted",null);var OV=n(76761),TV=n(70368),BV=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};var MV=n(62119),DV=n(48166),FV=n(33133);const RV=["abacus","abdomen","abdominal","abide","abiding","ability","ablaze","able","abnormal","abrasion","abrasive","abreast","abridge","abroad","abruptly","absence","absentee","absently","absinthe","absolute","absolve","abstain","abstract","absurd","accent","acclaim","acclimate","accompany","account","accuracy","accurate","accustom","acetone","achiness","aching","acid","acorn","acquaint","acquire","acre","acrobat","acronym","acting","action","activate","activator","active","activism","activist","activity","actress","acts","acutely","acuteness","aeration","aerobics","aerosol","aerospace","afar","affair","affected","affecting","affection","affidavit","affiliate","affirm","affix","afflicted","affluent","afford","affront","aflame","afloat","aflutter","afoot","afraid","afterglow","afterlife","aftermath","aftermost","afternoon","aged","ageless","agency","agenda","agent","aggregate","aghast","agile","agility","aging","agnostic","agonize","agonizing","agony","agreeable","agreeably","agreed","agreeing","agreement","aground","ahead","ahoy","aide","aids","aim","ajar","alabaster","alarm","albatross","album","alfalfa","algebra","algorithm","alias","alibi","alienable","alienate","aliens","alike","alive","alkaline","alkalize","almanac","almighty","almost","aloe","aloft","aloha","alone","alongside","aloof","alphabet","alright","although","altitude","alto","aluminum","alumni","always","amaretto","amaze","amazingly","amber","ambiance","ambiguity","ambiguous","ambition","ambitious","ambulance","ambush","amendable","amendment","amends","amenity","amiable","amicably","amid","amigo","amino","amiss","ammonia","ammonium","amnesty","amniotic","among","amount","amperage","ample","amplifier","amplify","amply","amuck","amulet","amusable","amused","amusement","amuser","amusing","anaconda","anaerobic","anagram","anatomist","anatomy","anchor","anchovy","ancient","android","anemia","anemic","aneurism","anew","angelfish","angelic","anger","angled","angler","angles","angling","angrily","angriness","anguished","angular","animal","animate","animating","animation","animator","anime","animosity","ankle","annex","annotate","announcer","annoying","annually","annuity","anointer","another","answering","antacid","antarctic","anteater","antelope","antennae","anthem","anthill","anthology","antibody","antics","antidote","antihero","antiquely","antiques","antiquity","antirust","antitoxic","antitrust","antiviral","antivirus","antler","antonym","antsy","anvil","anybody","anyhow","anymore","anyone","anyplace","anything","anytime","anyway","anywhere","aorta","apache","apostle","appealing","appear","appease","appeasing","appendage","appendix","appetite","appetizer","applaud","applause","apple","appliance","applicant","applied","apply","appointee","appraisal","appraiser","apprehend","approach","approval","approve","apricot","april","apron","aptitude","aptly","aqua","aqueduct","arbitrary","arbitrate","ardently","area","arena","arguable","arguably","argue","arise","armadillo","armband","armchair","armed","armful","armhole","arming","armless","armoire","armored","armory","armrest","army","aroma","arose","around","arousal","arrange","array","arrest","arrival","arrive","arrogance","arrogant","arson","art","ascend","ascension","ascent","ascertain","ashamed","ashen","ashes","ashy","aside","askew","asleep","asparagus","aspect","aspirate","aspire","aspirin","astonish","astound","astride","astrology","astronaut","astronomy","astute","atlantic","atlas","atom","atonable","atop","atrium","atrocious","atrophy","attach","attain","attempt","attendant","attendee","attention","attentive","attest","attic","attire","attitude","attractor","attribute","atypical","auction","audacious","audacity","audible","audibly","audience","audio","audition","augmented","august","authentic","author","autism","autistic","autograph","automaker","automated","automatic","autopilot","available","avalanche","avatar","avenge","avenging","avenue","average","aversion","avert","aviation","aviator","avid","avoid","await","awaken","award","aware","awhile","awkward","awning","awoke","awry","axis","babble","babbling","babied","baboon","backache","backboard","backboned","backdrop","backed","backer","backfield","backfire","backhand","backing","backlands","backlash","backless","backlight","backlit","backlog","backpack","backpedal","backrest","backroom","backshift","backside","backslid","backspace","backspin","backstab","backstage","backtalk","backtrack","backup","backward","backwash","backwater","backyard","bacon","bacteria","bacterium","badass","badge","badland","badly","badness","baffle","baffling","bagel","bagful","baggage","bagged","baggie","bagginess","bagging","baggy","bagpipe","baguette","baked","bakery","bakeshop","baking","balance","balancing","balcony","balmy","balsamic","bamboo","banana","banish","banister","banjo","bankable","bankbook","banked","banker","banking","banknote","bankroll","banner","bannister","banshee","banter","barbecue","barbed","barbell","barber","barcode","barge","bargraph","barista","baritone","barley","barmaid","barman","barn","barometer","barrack","barracuda","barrel","barrette","barricade","barrier","barstool","bartender","barterer","bash","basically","basics","basil","basin","basis","basket","batboy","batch","bath","baton","bats","battalion","battered","battering","battery","batting","battle","bauble","bazooka","blabber","bladder","blade","blah","blame","blaming","blanching","blandness","blank","blaspheme","blasphemy","blast","blatancy","blatantly","blazer","blazing","bleach","bleak","bleep","blemish","blend","bless","blighted","blimp","bling","blinked","blinker","blinking","blinks","blip","blissful","blitz","blizzard","bloated","bloating","blob","blog","bloomers","blooming","blooper","blot","blouse","blubber","bluff","bluish","blunderer","blunt","blurb","blurred","blurry","blurt","blush","blustery","boaster","boastful","boasting","boat","bobbed","bobbing","bobble","bobcat","bobsled","bobtail","bodacious","body","bogged","boggle","bogus","boil","bok","bolster","bolt","bonanza","bonded","bonding","bondless","boned","bonehead","boneless","bonelike","boney","bonfire","bonnet","bonsai","bonus","bony","boogeyman","boogieman","book","boondocks","booted","booth","bootie","booting","bootlace","bootleg","boots","boozy","borax","boring","borough","borrower","borrowing","boss","botanical","botanist","botany","botch","both","bottle","bottling","bottom","bounce","bouncing","bouncy","bounding","boundless","bountiful","bovine","boxcar","boxer","boxing","boxlike","boxy","breach","breath","breeches","breeching","breeder","breeding","breeze","breezy","brethren","brewery","brewing","briar","bribe","brick","bride","bridged","brigade","bright","brilliant","brim","bring","brink","brisket","briskly","briskness","bristle","brittle","broadband","broadcast","broaden","broadly","broadness","broadside","broadways","broiler","broiling","broken","broker","bronchial","bronco","bronze","bronzing","brook","broom","brought","browbeat","brownnose","browse","browsing","bruising","brunch","brunette","brunt","brush","brussels","brute","brutishly","bubble","bubbling","bubbly","buccaneer","bucked","bucket","buckle","buckshot","buckskin","bucktooth","buckwheat","buddhism","buddhist","budding","buddy","budget","buffalo","buffed","buffer","buffing","buffoon","buggy","bulb","bulge","bulginess","bulgur","bulk","bulldog","bulldozer","bullfight","bullfrog","bullhorn","bullion","bullish","bullpen","bullring","bullseye","bullwhip","bully","bunch","bundle","bungee","bunion","bunkbed","bunkhouse","bunkmate","bunny","bunt","busboy","bush","busily","busload","bust","busybody","buzz","cabana","cabbage","cabbie","cabdriver","cable","caboose","cache","cackle","cacti","cactus","caddie","caddy","cadet","cadillac","cadmium","cage","cahoots","cake","calamari","calamity","calcium","calculate","calculus","caliber","calibrate","calm","caloric","calorie","calzone","camcorder","cameo","camera","camisole","camper","campfire","camping","campsite","campus","canal","canary","cancel","candied","candle","candy","cane","canine","canister","cannabis","canned","canning","cannon","cannot","canola","canon","canopener","canopy","canteen","canyon","capable","capably","capacity","cape","capillary","capital","capitol","capped","capricorn","capsize","capsule","caption","captivate","captive","captivity","capture","caramel","carat","caravan","carbon","cardboard","carded","cardiac","cardigan","cardinal","cardstock","carefully","caregiver","careless","caress","caretaker","cargo","caring","carless","carload","carmaker","carnage","carnation","carnival","carnivore","carol","carpenter","carpentry","carpool","carport","carried","carrot","carrousel","carry","cartel","cartload","carton","cartoon","cartridge","cartwheel","carve","carving","carwash","cascade","case","cash","casing","casino","casket","cassette","casually","casualty","catacomb","catalog","catalyst","catalyze","catapult","cataract","catatonic","catcall","catchable","catcher","catching","catchy","caterer","catering","catfight","catfish","cathedral","cathouse","catlike","catnap","catnip","catsup","cattail","cattishly","cattle","catty","catwalk","caucasian","caucus","causal","causation","cause","causing","cauterize","caution","cautious","cavalier","cavalry","caviar","cavity","cedar","celery","celestial","celibacy","celibate","celtic","cement","census","ceramics","ceremony","certainly","certainty","certified","certify","cesarean","cesspool","chafe","chaffing","chain","chair","chalice","challenge","chamber","chamomile","champion","chance","change","channel","chant","chaos","chaperone","chaplain","chapped","chaps","chapter","character","charbroil","charcoal","charger","charging","chariot","charity","charm","charred","charter","charting","chase","chasing","chaste","chastise","chastity","chatroom","chatter","chatting","chatty","cheating","cheddar","cheek","cheer","cheese","cheesy","chef","chemicals","chemist","chemo","cherisher","cherub","chess","chest","chevron","chevy","chewable","chewer","chewing","chewy","chief","chihuahua","childcare","childhood","childish","childless","childlike","chili","chill","chimp","chip","chirping","chirpy","chitchat","chivalry","chive","chloride","chlorine","choice","chokehold","choking","chomp","chooser","choosing","choosy","chop","chosen","chowder","chowtime","chrome","chubby","chuck","chug","chummy","chump","chunk","churn","chute","cider","cilantro","cinch","cinema","cinnamon","circle","circling","circular","circulate","circus","citable","citadel","citation","citizen","citric","citrus","city","civic","civil","clad","claim","clambake","clammy","clamor","clamp","clamshell","clang","clanking","clapped","clapper","clapping","clarify","clarinet","clarity","clash","clasp","class","clatter","clause","clavicle","claw","clay","clean","clear","cleat","cleaver","cleft","clench","clergyman","clerical","clerk","clever","clicker","client","climate","climatic","cling","clinic","clinking","clip","clique","cloak","clobber","clock","clone","cloning","closable","closure","clothes","clothing","cloud","clover","clubbed","clubbing","clubhouse","clump","clumsily","clumsy","clunky","clustered","clutch","clutter","coach","coagulant","coastal","coaster","coasting","coastland","coastline","coat","coauthor","cobalt","cobbler","cobweb","cocoa","coconut","cod","coeditor","coerce","coexist","coffee","cofounder","cognition","cognitive","cogwheel","coherence","coherent","cohesive","coil","coke","cola","cold","coleslaw","coliseum","collage","collapse","collar","collected","collector","collide","collie","collision","colonial","colonist","colonize","colony","colossal","colt","coma","come","comfort","comfy","comic","coming","comma","commence","commend","comment","commerce","commode","commodity","commodore","common","commotion","commute","commuting","compacted","compacter","compactly","compactor","companion","company","compare","compel","compile","comply","component","composed","composer","composite","compost","composure","compound","compress","comprised","computer","computing","comrade","concave","conceal","conceded","concept","concerned","concert","conch","concierge","concise","conclude","concrete","concur","condense","condiment","condition","condone","conducive","conductor","conduit","cone","confess","confetti","confidant","confident","confider","confiding","configure","confined","confining","confirm","conflict","conform","confound","confront","confused","confusing","confusion","congenial","congested","congrats","congress","conical","conjoined","conjure","conjuror","connected","connector","consensus","consent","console","consoling","consonant","constable","constant","constrain","constrict","construct","consult","consumer","consuming","contact","container","contempt","contend","contented","contently","contents","contest","context","contort","contour","contrite","control","contusion","convene","convent","copartner","cope","copied","copier","copilot","coping","copious","copper","copy","coral","cork","cornball","cornbread","corncob","cornea","corned","corner","cornfield","cornflake","cornhusk","cornmeal","cornstalk","corny","coronary","coroner","corporal","corporate","corral","correct","corridor","corrode","corroding","corrosive","corsage","corset","cortex","cosigner","cosmetics","cosmic","cosmos","cosponsor","cost","cottage","cotton","couch","cough","could","countable","countdown","counting","countless","country","county","courier","covenant","cover","coveted","coveting","coyness","cozily","coziness","cozy","crabbing","crabgrass","crablike","crabmeat","cradle","cradling","crafter","craftily","craftsman","craftwork","crafty","cramp","cranberry","crane","cranial","cranium","crank","crate","crave","craving","crawfish","crawlers","crawling","crayfish","crayon","crazed","crazily","craziness","crazy","creamed","creamer","creamlike","crease","creasing","creatable","create","creation","creative","creature","credible","credibly","credit","creed","creme","creole","crepe","crept","crescent","crested","cresting","crestless","crevice","crewless","crewman","crewmate","crib","cricket","cried","crier","crimp","crimson","cringe","cringing","crinkle","crinkly","crisped","crisping","crisply","crispness","crispy","criteria","critter","croak","crock","crook","croon","crop","cross","crouch","crouton","crowbar","crowd","crown","crucial","crudely","crudeness","cruelly","cruelness","cruelty","crumb","crummiest","crummy","crumpet","crumpled","cruncher","crunching","crunchy","crusader","crushable","crushed","crusher","crushing","crust","crux","crying","cryptic","crystal","cubbyhole","cube","cubical","cubicle","cucumber","cuddle","cuddly","cufflink","culinary","culminate","culpable","culprit","cultivate","cultural","culture","cupbearer","cupcake","cupid","cupped","cupping","curable","curator","curdle","cure","curfew","curing","curled","curler","curliness","curling","curly","curry","curse","cursive","cursor","curtain","curtly","curtsy","curvature","curve","curvy","cushy","cusp","cussed","custard","custodian","custody","customary","customer","customize","customs","cut","cycle","cyclic","cycling","cyclist","cylinder","cymbal","cytoplasm","cytoplast","dab","dad","daffodil","dagger","daily","daintily","dainty","dairy","daisy","dallying","dance","dancing","dandelion","dander","dandruff","dandy","danger","dangle","dangling","daredevil","dares","daringly","darkened","darkening","darkish","darkness","darkroom","darling","darn","dart","darwinism","dash","dastardly","data","datebook","dating","daughter","daunting","dawdler","dawn","daybed","daybreak","daycare","daydream","daylight","daylong","dayroom","daytime","dazzler","dazzling","deacon","deafening","deafness","dealer","dealing","dealmaker","dealt","dean","debatable","debate","debating","debit","debrief","debtless","debtor","debug","debunk","decade","decaf","decal","decathlon","decay","deceased","deceit","deceiver","deceiving","december","decency","decent","deception","deceptive","decibel","decidable","decimal","decimeter","decipher","deck","declared","decline","decode","decompose","decorated","decorator","decoy","decrease","decree","dedicate","dedicator","deduce","deduct","deed","deem","deepen","deeply","deepness","deface","defacing","defame","default","defeat","defection","defective","defendant","defender","defense","defensive","deferral","deferred","defiance","defiant","defile","defiling","define","definite","deflate","deflation","deflator","deflected","deflector","defog","deforest","defraud","defrost","deftly","defuse","defy","degraded","degrading","degrease","degree","dehydrate","deity","dejected","delay","delegate","delegator","delete","deletion","delicacy","delicate","delicious","delighted","delirious","delirium","deliverer","delivery","delouse","delta","deluge","delusion","deluxe","demanding","demeaning","demeanor","demise","democracy","democrat","demote","demotion","demystify","denatured","deniable","denial","denim","denote","dense","density","dental","dentist","denture","deny","deodorant","deodorize","departed","departure","depict","deplete","depletion","deplored","deploy","deport","depose","depraved","depravity","deprecate","depress","deprive","depth","deputize","deputy","derail","deranged","derby","derived","desecrate","deserve","deserving","designate","designed","designer","designing","deskbound","desktop","deskwork","desolate","despair","despise","despite","destiny","destitute","destruct","detached","detail","detection","detective","detector","detention","detergent","detest","detonate","detonator","detoxify","detract","deuce","devalue","deviancy","deviant","deviate","deviation","deviator","device","devious","devotedly","devotee","devotion","devourer","devouring","devoutly","dexterity","dexterous","diabetes","diabetic","diabolic","diagnoses","diagnosis","diagram","dial","diameter","diaper","diaphragm","diary","dice","dicing","dictate","dictation","dictator","difficult","diffused","diffuser","diffusion","diffusive","dig","dilation","diligence","diligent","dill","dilute","dime","diminish","dimly","dimmed","dimmer","dimness","dimple","diner","dingbat","dinghy","dinginess","dingo","dingy","dining","dinner","diocese","dioxide","diploma","dipped","dipper","dipping","directed","direction","directive","directly","directory","direness","dirtiness","disabled","disagree","disallow","disarm","disarray","disaster","disband","disbelief","disburse","discard","discern","discharge","disclose","discolor","discount","discourse","discover","discuss","disdain","disengage","disfigure","disgrace","dish","disinfect","disjoin","disk","dislike","disliking","dislocate","dislodge","disloyal","dismantle","dismay","dismiss","dismount","disobey","disorder","disown","disparate","disparity","dispatch","dispense","dispersal","dispersed","disperser","displace","display","displease","disposal","dispose","disprove","dispute","disregard","disrupt","dissuade","distance","distant","distaste","distill","distinct","distort","distract","distress","district","distrust","ditch","ditto","ditzy","dividable","divided","dividend","dividers","dividing","divinely","diving","divinity","divisible","divisibly","division","divisive","divorcee","dizziness","dizzy","doable","docile","dock","doctrine","document","dodge","dodgy","doily","doing","dole","dollar","dollhouse","dollop","dolly","dolphin","domain","domelike","domestic","dominion","dominoes","donated","donation","donator","donor","donut","doodle","doorbell","doorframe","doorknob","doorman","doormat","doornail","doorpost","doorstep","doorstop","doorway","doozy","dork","dormitory","dorsal","dosage","dose","dotted","doubling","douche","dove","down","dowry","doze","drab","dragging","dragonfly","dragonish","dragster","drainable","drainage","drained","drainer","drainpipe","dramatic","dramatize","drank","drapery","drastic","draw","dreaded","dreadful","dreadlock","dreamboat","dreamily","dreamland","dreamless","dreamlike","dreamt","dreamy","drearily","dreary","drench","dress","drew","dribble","dried","drier","drift","driller","drilling","drinkable","drinking","dripping","drippy","drivable","driven","driver","driveway","driving","drizzle","drizzly","drone","drool","droop","drop-down","dropbox","dropkick","droplet","dropout","dropper","drove","drown","drowsily","drudge","drum","dry","dubbed","dubiously","duchess","duckbill","ducking","duckling","ducktail","ducky","duct","dude","duffel","dugout","duh","duke","duller","dullness","duly","dumping","dumpling","dumpster","duo","dupe","duplex","duplicate","duplicity","durable","durably","duration","duress","during","dusk","dust","dutiful","duty","duvet","dwarf","dweeb","dwelled","dweller","dwelling","dwindle","dwindling","dynamic","dynamite","dynasty","dyslexia","dyslexic","each","eagle","earache","eardrum","earflap","earful","earlobe","early","earmark","earmuff","earphone","earpiece","earplugs","earring","earshot","earthen","earthlike","earthling","earthly","earthworm","earthy","earwig","easeful","easel","easiest","easily","easiness","easing","eastbound","eastcoast","easter","eastward","eatable","eaten","eatery","eating","eats","ebay","ebony","ebook","ecard","eccentric","echo","eclair","eclipse","ecologist","ecology","economic","economist","economy","ecosphere","ecosystem","edge","edginess","edging","edgy","edition","editor","educated","education","educator","eel","effective","effects","efficient","effort","eggbeater","egging","eggnog","eggplant","eggshell","egomaniac","egotism","egotistic","either","eject","elaborate","elastic","elated","elbow","eldercare","elderly","eldest","electable","election","elective","elephant","elevate","elevating","elevation","elevator","eleven","elf","eligible","eligibly","eliminate","elite","elitism","elixir","elk","ellipse","elliptic","elm","elongated","elope","eloquence","eloquent","elsewhere","elude","elusive","elves","email","embargo","embark","embassy","embattled","embellish","ember","embezzle","emblaze","emblem","embody","embolism","emboss","embroider","emcee","emerald","emergency","emission","emit","emote","emoticon","emotion","empathic","empathy","emperor","emphases","emphasis","emphasize","emphatic","empirical","employed","employee","employer","emporium","empower","emptier","emptiness","empty","emu","enable","enactment","enamel","enchanted","enchilada","encircle","enclose","enclosure","encode","encore","encounter","encourage","encroach","encrust","encrypt","endanger","endeared","endearing","ended","ending","endless","endnote","endocrine","endorphin","endorse","endowment","endpoint","endurable","endurance","enduring","energetic","energize","energy","enforced","enforcer","engaged","engaging","engine","engorge","engraved","engraver","engraving","engross","engulf","enhance","enigmatic","enjoyable","enjoyably","enjoyer","enjoying","enjoyment","enlarged","enlarging","enlighten","enlisted","enquirer","enrage","enrich","enroll","enslave","ensnare","ensure","entail","entangled","entering","entertain","enticing","entire","entitle","entity","entomb","entourage","entrap","entree","entrench","entrust","entryway","entwine","enunciate","envelope","enviable","enviably","envious","envision","envoy","envy","enzyme","epic","epidemic","epidermal","epidermis","epidural","epilepsy","epileptic","epilogue","epiphany","episode","equal","equate","equation","equator","equinox","equipment","equity","equivocal","eradicate","erasable","erased","eraser","erasure","ergonomic","errand","errant","erratic","error","erupt","escalate","escalator","escapable","escapade","escapist","escargot","eskimo","esophagus","espionage","espresso","esquire","essay","essence","essential","establish","estate","esteemed","estimate","estimator","estranged","estrogen","etching","eternal","eternity","ethanol","ether","ethically","ethics","euphemism","evacuate","evacuee","evade","evaluate","evaluator","evaporate","evasion","evasive","even","everglade","evergreen","everybody","everyday","everyone","evict","evidence","evident","evil","evoke","evolution","evolve","exact","exalted","example","excavate","excavator","exceeding","exception","excess","exchange","excitable","exciting","exclaim","exclude","excluding","exclusion","exclusive","excretion","excretory","excursion","excusable","excusably","excuse","exemplary","exemplify","exemption","exerciser","exert","exes","exfoliate","exhale","exhaust","exhume","exile","existing","exit","exodus","exonerate","exorcism","exorcist","expand","expanse","expansion","expansive","expectant","expedited","expediter","expel","expend","expenses","expensive","expert","expire","expiring","explain","expletive","explicit","explode","exploit","explore","exploring","exponent","exporter","exposable","expose","exposure","express","expulsion","exquisite","extended","extending","extent","extenuate","exterior","external","extinct","extortion","extradite","extras","extrovert","extrude","extruding","exuberant","fable","fabric","fabulous","facebook","facecloth","facedown","faceless","facelift","faceplate","faceted","facial","facility","facing","facsimile","faction","factoid","factor","factsheet","factual","faculty","fade","fading","failing","falcon","fall","false","falsify","fame","familiar","family","famine","famished","fanatic","fancied","fanciness","fancy","fanfare","fang","fanning","fantasize","fantastic","fantasy","fascism","fastball","faster","fasting","fastness","faucet","favorable","favorably","favored","favoring","favorite","fax","feast","federal","fedora","feeble","feed","feel","feisty","feline","felt-tip","feminine","feminism","feminist","feminize","femur","fence","fencing","fender","ferment","fernlike","ferocious","ferocity","ferret","ferris","ferry","fervor","fester","festival","festive","festivity","fetal","fetch","fever","fiber","fiction","fiddle","fiddling","fidelity","fidgeting","fidgety","fifteen","fifth","fiftieth","fifty","figment","figure","figurine","filing","filled","filler","filling","film","filter","filth","filtrate","finale","finalist","finalize","finally","finance","financial","finch","fineness","finer","finicky","finished","finisher","finishing","finite","finless","finlike","fiscally","fit","five","flaccid","flagman","flagpole","flagship","flagstick","flagstone","flail","flakily","flaky","flame","flammable","flanked","flanking","flannels","flap","flaring","flashback","flashbulb","flashcard","flashily","flashing","flashy","flask","flatbed","flatfoot","flatly","flatness","flatten","flattered","flatterer","flattery","flattop","flatware","flatworm","flavored","flavorful","flavoring","flaxseed","fled","fleshed","fleshy","flick","flier","flight","flinch","fling","flint","flip","flirt","float","flock","flogging","flop","floral","florist","floss","flounder","flyable","flyaway","flyer","flying","flyover","flypaper","foam","foe","fog","foil","folic","folk","follicle","follow","fondling","fondly","fondness","fondue","font","food","fool","footage","football","footbath","footboard","footer","footgear","foothill","foothold","footing","footless","footman","footnote","footpad","footpath","footprint","footrest","footsie","footsore","footwear","footwork","fossil","foster","founder","founding","fountain","fox","foyer","fraction","fracture","fragile","fragility","fragment","fragrance","fragrant","frail","frame","framing","frantic","fraternal","frayed","fraying","frays","freckled","freckles","freebase","freebee","freebie","freedom","freefall","freehand","freeing","freeload","freely","freemason","freeness","freestyle","freeware","freeway","freewill","freezable","freezing","freight","french","frenzied","frenzy","frequency","frequent","fresh","fretful","fretted","friction","friday","fridge","fried","friend","frighten","frightful","frigidity","frigidly","frill","fringe","frisbee","frisk","fritter","frivolous","frolic","from","front","frostbite","frosted","frostily","frosting","frostlike","frosty","froth","frown","frozen","fructose","frugality","frugally","fruit","frustrate","frying","gab","gaffe","gag","gainfully","gaining","gains","gala","gallantly","galleria","gallery","galley","gallon","gallows","gallstone","galore","galvanize","gambling","game","gaming","gamma","gander","gangly","gangrene","gangway","gap","garage","garbage","garden","gargle","garland","garlic","garment","garnet","garnish","garter","gas","gatherer","gathering","gating","gauging","gauntlet","gauze","gave","gawk","gazing","gear","gecko","geek","geiger","gem","gender","generic","generous","genetics","genre","gentile","gentleman","gently","gents","geography","geologic","geologist","geology","geometric","geometry","geranium","gerbil","geriatric","germicide","germinate","germless","germproof","gestate","gestation","gesture","getaway","getting","getup","giant","gibberish","giblet","giddily","giddiness","giddy","gift","gigabyte","gigahertz","gigantic","giggle","giggling","giggly","gigolo","gilled","gills","gimmick","girdle","giveaway","given","giver","giving","gizmo","gizzard","glacial","glacier","glade","gladiator","gladly","glamorous","glamour","glance","glancing","glandular","glare","glaring","glass","glaucoma","glazing","gleaming","gleeful","glider","gliding","glimmer","glimpse","glisten","glitch","glitter","glitzy","gloater","gloating","gloomily","gloomy","glorified","glorifier","glorify","glorious","glory","gloss","glove","glowing","glowworm","glucose","glue","gluten","glutinous","glutton","gnarly","gnat","goal","goatskin","goes","goggles","going","goldfish","goldmine","goldsmith","golf","goliath","gonad","gondola","gone","gong","good","gooey","goofball","goofiness","goofy","google","goon","gopher","gore","gorged","gorgeous","gory","gosling","gossip","gothic","gotten","gout","gown","grab","graceful","graceless","gracious","gradation","graded","grader","gradient","grading","gradually","graduate","graffiti","grafted","grafting","grain","granddad","grandkid","grandly","grandma","grandpa","grandson","granite","granny","granola","grant","granular","grape","graph","grapple","grappling","grasp","grass","gratified","gratify","grating","gratitude","gratuity","gravel","graveness","graves","graveyard","gravitate","gravity","gravy","gray","grazing","greasily","greedily","greedless","greedy","green","greeter","greeting","grew","greyhound","grid","grief","grievance","grieving","grievous","grill","grimace","grimacing","grime","griminess","grimy","grinch","grinning","grip","gristle","grit","groggily","groggy","groin","groom","groove","grooving","groovy","grope","ground","grouped","grout","grove","grower","growing","growl","grub","grudge","grudging","grueling","gruffly","grumble","grumbling","grumbly","grumpily","grunge","grunt","guacamole","guidable","guidance","guide","guiding","guileless","guise","gulf","gullible","gully","gulp","gumball","gumdrop","gumminess","gumming","gummy","gurgle","gurgling","guru","gush","gusto","gusty","gutless","guts","gutter","guy","guzzler","gyration","habitable","habitant","habitat","habitual","hacked","hacker","hacking","hacksaw","had","haggler","haiku","half","halogen","halt","halved","halves","hamburger","hamlet","hammock","hamper","hamster","hamstring","handbag","handball","handbook","handbrake","handcart","handclap","handclasp","handcraft","handcuff","handed","handful","handgrip","handgun","handheld","handiness","handiwork","handlebar","handled","handler","handling","handmade","handoff","handpick","handprint","handrail","handsaw","handset","handsfree","handshake","handstand","handwash","handwork","handwoven","handwrite","handyman","hangnail","hangout","hangover","hangup","hankering","hankie","hanky","haphazard","happening","happier","happiest","happily","happiness","happy","harbor","hardcopy","hardcore","hardcover","harddisk","hardened","hardener","hardening","hardhat","hardhead","hardiness","hardly","hardness","hardship","hardware","hardwired","hardwood","hardy","harmful","harmless","harmonica","harmonics","harmonize","harmony","harness","harpist","harsh","harvest","hash","hassle","haste","hastily","hastiness","hasty","hatbox","hatchback","hatchery","hatchet","hatching","hatchling","hate","hatless","hatred","haunt","haven","hazard","hazelnut","hazily","haziness","hazing","hazy","headache","headband","headboard","headcount","headdress","headed","header","headfirst","headgear","heading","headlamp","headless","headlock","headphone","headpiece","headrest","headroom","headscarf","headset","headsman","headstand","headstone","headway","headwear","heap","heat","heave","heavily","heaviness","heaving","hedge","hedging","heftiness","hefty","helium","helmet","helper","helpful","helping","helpless","helpline","hemlock","hemstitch","hence","henchman","henna","herald","herbal","herbicide","herbs","heritage","hermit","heroics","heroism","herring","herself","hertz","hesitancy","hesitant","hesitate","hexagon","hexagram","hubcap","huddle","huddling","huff","hug","hula","hulk","hull","human","humble","humbling","humbly","humid","humiliate","humility","humming","hummus","humongous","humorist","humorless","humorous","humpback","humped","humvee","hunchback","hundredth","hunger","hungrily","hungry","hunk","hunter","hunting","huntress","huntsman","hurdle","hurled","hurler","hurling","hurray","hurricane","hurried","hurry","hurt","husband","hush","husked","huskiness","hut","hybrid","hydrant","hydrated","hydration","hydrogen","hydroxide","hyperlink","hypertext","hyphen","hypnoses","hypnosis","hypnotic","hypnotism","hypnotist","hypnotize","hypocrisy","hypocrite","ibuprofen","ice","iciness","icing","icky","icon","icy","idealism","idealist","idealize","ideally","idealness","identical","identify","identity","ideology","idiocy","idiom","idly","igloo","ignition","ignore","iguana","illicitly","illusion","illusive","image","imaginary","imagines","imaging","imbecile","imitate","imitation","immature","immerse","immersion","imminent","immobile","immodest","immorally","immortal","immovable","immovably","immunity","immunize","impaired","impale","impart","impatient","impeach","impeding","impending","imperfect","imperial","impish","implant","implement","implicate","implicit","implode","implosion","implosive","imply","impolite","important","importer","impose","imposing","impotence","impotency","impotent","impound","imprecise","imprint","imprison","impromptu","improper","improve","improving","improvise","imprudent","impulse","impulsive","impure","impurity","iodine","iodize","ion","ipad","iphone","ipod","irate","irk","iron","irregular","irrigate","irritable","irritably","irritant","irritate","islamic","islamist","isolated","isolating","isolation","isotope","issue","issuing","italicize","italics","item","itinerary","itunes","ivory","ivy","jab","jackal","jacket","jackknife","jackpot","jailbird","jailbreak","jailer","jailhouse","jalapeno","jam","janitor","january","jargon","jarring","jasmine","jaundice","jaunt","java","jawed","jawless","jawline","jaws","jaybird","jaywalker","jazz","jeep","jeeringly","jellied","jelly","jersey","jester","jet","jiffy","jigsaw","jimmy","jingle","jingling","jinx","jitters","jittery","job","jockey","jockstrap","jogger","jogging","john","joining","jokester","jokingly","jolliness","jolly","jolt","jot","jovial","joyfully","joylessly","joyous","joyride","joystick","jubilance","jubilant","judge","judgingly","judicial","judiciary","judo","juggle","juggling","jugular","juice","juiciness","juicy","jujitsu","jukebox","july","jumble","jumbo","jump","junction","juncture","june","junior","juniper","junkie","junkman","junkyard","jurist","juror","jury","justice","justifier","justify","justly","justness","juvenile","kabob","kangaroo","karaoke","karate","karma","kebab","keenly","keenness","keep","keg","kelp","kennel","kept","kerchief","kerosene","kettle","kick","kiln","kilobyte","kilogram","kilometer","kilowatt","kilt","kimono","kindle","kindling","kindly","kindness","kindred","kinetic","kinfolk","king","kinship","kinsman","kinswoman","kissable","kisser","kissing","kitchen","kite","kitten","kitty","kiwi","kleenex","knapsack","knee","knelt","knickers","knoll","koala","kooky","kosher","krypton","kudos","kung","labored","laborer","laboring","laborious","labrador","ladder","ladies","ladle","ladybug","ladylike","lagged","lagging","lagoon","lair","lake","lance","landed","landfall","landfill","landing","landlady","landless","landline","landlord","landmark","landmass","landmine","landowner","landscape","landside","landslide","language","lankiness","lanky","lantern","lapdog","lapel","lapped","lapping","laptop","lard","large","lark","lash","lasso","last","latch","late","lather","latitude","latrine","latter","latticed","launch","launder","laundry","laurel","lavender","lavish","laxative","lazily","laziness","lazy","lecturer","left","legacy","legal","legend","legged","leggings","legible","legibly","legislate","lego","legroom","legume","legwarmer","legwork","lemon","lend","length","lens","lent","leotard","lesser","letdown","lethargic","lethargy","letter","lettuce","level","leverage","levers","levitate","levitator","liability","liable","liberty","librarian","library","licking","licorice","lid","life","lifter","lifting","liftoff","ligament","likely","likeness","likewise","liking","lilac","lilly","lily","limb","limeade","limelight","limes","limit","limping","limpness","line","lingo","linguini","linguist","lining","linked","linoleum","linseed","lint","lion","lip","liquefy","liqueur","liquid","lisp","list","litigate","litigator","litmus","litter","little","livable","lived","lively","liver","livestock","lividly","living","lizard","lubricant","lubricate","lucid","luckily","luckiness","luckless","lucrative","ludicrous","lugged","lukewarm","lullaby","lumber","luminance","luminous","lumpiness","lumping","lumpish","lunacy","lunar","lunchbox","luncheon","lunchroom","lunchtime","lung","lurch","lure","luridness","lurk","lushly","lushness","luster","lustfully","lustily","lustiness","lustrous","lusty","luxurious","luxury","lying","lyrically","lyricism","lyricist","lyrics","macarena","macaroni","macaw","mace","machine","machinist","magazine","magenta","maggot","magical","magician","magma","magnesium","magnetic","magnetism","magnetize","magnifier","magnify","magnitude","magnolia","mahogany","maimed","majestic","majesty","majorette","majority","makeover","maker","makeshift","making","malformed","malt","mama","mammal","mammary","mammogram","manager","managing","manatee","mandarin","mandate","mandatory","mandolin","manger","mangle","mango","mangy","manhandle","manhole","manhood","manhunt","manicotti","manicure","manifesto","manila","mankind","manlike","manliness","manly","manmade","manned","mannish","manor","manpower","mantis","mantra","manual","many","map","marathon","marauding","marbled","marbles","marbling","march","mardi","margarine","margarita","margin","marigold","marina","marine","marital","maritime","marlin","marmalade","maroon","married","marrow","marry","marshland","marshy","marsupial","marvelous","marxism","mascot","masculine","mashed","mashing","massager","masses","massive","mastiff","matador","matchbook","matchbox","matcher","matching","matchless","material","maternal","maternity","math","mating","matriarch","matrimony","matrix","matron","matted","matter","maturely","maturing","maturity","mauve","maverick","maximize","maximum","maybe","mayday","mayflower","moaner","moaning","mobile","mobility","mobilize","mobster","mocha","mocker","mockup","modified","modify","modular","modulator","module","moisten","moistness","moisture","molar","molasses","mold","molecular","molecule","molehill","mollusk","mom","monastery","monday","monetary","monetize","moneybags","moneyless","moneywise","mongoose","mongrel","monitor","monkhood","monogamy","monogram","monologue","monopoly","monorail","monotone","monotype","monoxide","monsieur","monsoon","monstrous","monthly","monument","moocher","moodiness","moody","mooing","moonbeam","mooned","moonlight","moonlike","moonlit","moonrise","moonscape","moonshine","moonstone","moonwalk","mop","morale","morality","morally","morbidity","morbidly","morphine","morphing","morse","mortality","mortally","mortician","mortified","mortify","mortuary","mosaic","mossy","most","mothball","mothproof","motion","motivate","motivator","motive","motocross","motor","motto","mountable","mountain","mounted","mounting","mourner","mournful","mouse","mousiness","moustache","mousy","mouth","movable","move","movie","moving","mower","mowing","much","muck","mud","mug","mulberry","mulch","mule","mulled","mullets","multiple","multiply","multitask","multitude","mumble","mumbling","mumbo","mummified","mummify","mummy","mumps","munchkin","mundane","municipal","muppet","mural","murkiness","murky","murmuring","muscular","museum","mushily","mushiness","mushroom","mushy","music","musket","muskiness","musky","mustang","mustard","muster","mustiness","musty","mutable","mutate","mutation","mute","mutilated","mutilator","mutiny","mutt","mutual","muzzle","myself","myspace","mystified","mystify","myth","nacho","nag","nail","name","naming","nanny","nanometer","nape","napkin","napped","napping","nappy","narrow","nastily","nastiness","national","native","nativity","natural","nature","naturist","nautical","navigate","navigator","navy","nearby","nearest","nearly","nearness","neatly","neatness","nebula","nebulizer","nectar","negate","negation","negative","neglector","negligee","negligent","negotiate","nemeses","nemesis","neon","nephew","nerd","nervous","nervy","nest","net","neurology","neuron","neurosis","neurotic","neuter","neutron","never","next","nibble","nickname","nicotine","niece","nifty","nimble","nimbly","nineteen","ninetieth","ninja","nintendo","ninth","nuclear","nuclei","nucleus","nugget","nullify","number","numbing","numbly","numbness","numeral","numerate","numerator","numeric","numerous","nuptials","nursery","nursing","nurture","nutcase","nutlike","nutmeg","nutrient","nutshell","nuttiness","nutty","nuzzle","nylon","oaf","oak","oasis","oat","obedience","obedient","obituary","object","obligate","obliged","oblivion","oblivious","oblong","obnoxious","oboe","obscure","obscurity","observant","observer","observing","obsessed","obsession","obsessive","obsolete","obstacle","obstinate","obstruct","obtain","obtrusive","obtuse","obvious","occultist","occupancy","occupant","occupier","occupy","ocean","ocelot","octagon","octane","october","octopus","ogle","oil","oink","ointment","okay","old","olive","olympics","omega","omen","ominous","omission","omit","omnivore","onboard","oncoming","ongoing","onion","online","onlooker","only","onscreen","onset","onshore","onslaught","onstage","onto","onward","onyx","oops","ooze","oozy","opacity","opal","open","operable","operate","operating","operation","operative","operator","opium","opossum","opponent","oppose","opposing","opposite","oppressed","oppressor","opt","opulently","osmosis","other","otter","ouch","ought","ounce","outage","outback","outbid","outboard","outbound","outbreak","outburst","outcast","outclass","outcome","outdated","outdoors","outer","outfield","outfit","outflank","outgoing","outgrow","outhouse","outing","outlast","outlet","outline","outlook","outlying","outmatch","outmost","outnumber","outplayed","outpost","outpour","output","outrage","outrank","outreach","outright","outscore","outsell","outshine","outshoot","outsider","outskirts","outsmart","outsource","outspoken","outtakes","outthink","outward","outweigh","outwit","oval","ovary","oven","overact","overall","overarch","overbid","overbill","overbite","overblown","overboard","overbook","overbuilt","overcast","overcoat","overcome","overcook","overcrowd","overdraft","overdrawn","overdress","overdrive","overdue","overeager","overeater","overexert","overfed","overfeed","overfill","overflow","overfull","overgrown","overhand","overhang","overhaul","overhead","overhear","overheat","overhung","overjoyed","overkill","overlabor","overlaid","overlap","overlay","overload","overlook","overlord","overlying","overnight","overpass","overpay","overplant","overplay","overpower","overprice","overrate","overreach","overreact","override","overripe","overrule","overrun","overshoot","overshot","oversight","oversized","oversleep","oversold","overspend","overstate","overstay","overstep","overstock","overstuff","oversweet","overtake","overthrow","overtime","overtly","overtone","overture","overturn","overuse","overvalue","overview","overwrite","owl","oxford","oxidant","oxidation","oxidize","oxidizing","oxygen","oxymoron","oyster","ozone","paced","pacemaker","pacific","pacifier","pacifism","pacifist","pacify","padded","padding","paddle","paddling","padlock","pagan","pager","paging","pajamas","palace","palatable","palm","palpable","palpitate","paltry","pampered","pamperer","pampers","pamphlet","panama","pancake","pancreas","panda","pandemic","pang","panhandle","panic","panning","panorama","panoramic","panther","pantomime","pantry","pants","pantyhose","paparazzi","papaya","paper","paprika","papyrus","parabola","parachute","parade","paradox","paragraph","parakeet","paralegal","paralyses","paralysis","paralyze","paramedic","parameter","paramount","parasail","parasite","parasitic","parcel","parched","parchment","pardon","parish","parka","parking","parkway","parlor","parmesan","parole","parrot","parsley","parsnip","partake","parted","parting","partition","partly","partner","partridge","party","passable","passably","passage","passcode","passenger","passerby","passing","passion","passive","passivism","passover","passport","password","pasta","pasted","pastel","pastime","pastor","pastrami","pasture","pasty","patchwork","patchy","paternal","paternity","path","patience","patient","patio","patriarch","patriot","patrol","patronage","patronize","pauper","pavement","paver","pavestone","pavilion","paving","pawing","payable","payback","paycheck","payday","payee","payer","paying","payment","payphone","payroll","pebble","pebbly","pecan","pectin","peculiar","peddling","pediatric","pedicure","pedigree","pedometer","pegboard","pelican","pellet","pelt","pelvis","penalize","penalty","pencil","pendant","pending","penholder","penknife","pennant","penniless","penny","penpal","pension","pentagon","pentagram","pep","perceive","percent","perch","percolate","perennial","perfected","perfectly","perfume","periscope","perish","perjurer","perjury","perkiness","perky","perm","peroxide","perpetual","perplexed","persecute","persevere","persuaded","persuader","pesky","peso","pessimism","pessimist","pester","pesticide","petal","petite","petition","petri","petroleum","petted","petticoat","pettiness","petty","petunia","phantom","phobia","phoenix","phonebook","phoney","phonics","phoniness","phony","phosphate","photo","phrase","phrasing","placard","placate","placidly","plank","planner","plant","plasma","plaster","plastic","plated","platform","plating","platinum","platonic","platter","platypus","plausible","plausibly","playable","playback","player","playful","playgroup","playhouse","playing","playlist","playmaker","playmate","playoff","playpen","playroom","playset","plaything","playtime","plaza","pleading","pleat","pledge","plentiful","plenty","plethora","plexiglas","pliable","plod","plop","plot","plow","ploy","pluck","plug","plunder","plunging","plural","plus","plutonium","plywood","poach","pod","poem","poet","pogo","pointed","pointer","pointing","pointless","pointy","poise","poison","poker","poking","polar","police","policy","polio","polish","politely","polka","polo","polyester","polygon","polygraph","polymer","poncho","pond","pony","popcorn","pope","poplar","popper","poppy","popsicle","populace","popular","populate","porcupine","pork","porous","porridge","portable","portal","portfolio","porthole","portion","portly","portside","poser","posh","posing","possible","possibly","possum","postage","postal","postbox","postcard","posted","poster","posting","postnasal","posture","postwar","pouch","pounce","pouncing","pound","pouring","pout","powdered","powdering","powdery","power","powwow","pox","praising","prance","prancing","pranker","prankish","prankster","prayer","praying","preacher","preaching","preachy","preamble","precinct","precise","precision","precook","precut","predator","predefine","predict","preface","prefix","preflight","preformed","pregame","pregnancy","pregnant","preheated","prelaunch","prelaw","prelude","premiere","premises","premium","prenatal","preoccupy","preorder","prepaid","prepay","preplan","preppy","preschool","prescribe","preseason","preset","preshow","president","presoak","press","presume","presuming","preteen","pretended","pretender","pretense","pretext","pretty","pretzel","prevail","prevalent","prevent","preview","previous","prewar","prewashed","prideful","pried","primal","primarily","primary","primate","primer","primp","princess","print","prior","prism","prison","prissy","pristine","privacy","private","privatize","prize","proactive","probable","probably","probation","probe","probing","probiotic","problem","procedure","process","proclaim","procreate","procurer","prodigal","prodigy","produce","product","profane","profanity","professed","professor","profile","profound","profusely","progeny","prognosis","program","progress","projector","prologue","prolonged","promenade","prominent","promoter","promotion","prompter","promptly","prone","prong","pronounce","pronto","proofing","proofread","proofs","propeller","properly","property","proponent","proposal","propose","props","prorate","protector","protegee","proton","prototype","protozoan","protract","protrude","proud","provable","proved","proven","provided","provider","providing","province","proving","provoke","provoking","provolone","prowess","prowler","prowling","proximity","proxy","prozac","prude","prudishly","prune","pruning","pry","psychic","public","publisher","pucker","pueblo","pug","pull","pulmonary","pulp","pulsate","pulse","pulverize","puma","pumice","pummel","punch","punctual","punctuate","punctured","pungent","punisher","punk","pupil","puppet","puppy","purchase","pureblood","purebred","purely","pureness","purgatory","purge","purging","purifier","purify","purist","puritan","purity","purple","purplish","purposely","purr","purse","pursuable","pursuant","pursuit","purveyor","pushcart","pushchair","pusher","pushiness","pushing","pushover","pushpin","pushup","pushy","putdown","putt","puzzle","puzzling","pyramid","pyromania","python","quack","quadrant","quail","quaintly","quake","quaking","qualified","qualifier","qualify","quality","qualm","quantum","quarrel","quarry","quartered","quarterly","quarters","quartet","quench","query","quicken","quickly","quickness","quicksand","quickstep","quiet","quill","quilt","quintet","quintuple","quirk","quit","quiver","quizzical","quotable","quotation","quote","rabid","race","racing","racism","rack","racoon","radar","radial","radiance","radiantly","radiated","radiation","radiator","radio","radish","raffle","raft","rage","ragged","raging","ragweed","raider","railcar","railing","railroad","railway","raisin","rake","raking","rally","ramble","rambling","ramp","ramrod","ranch","rancidity","random","ranged","ranger","ranging","ranked","ranking","ransack","ranting","rants","rare","rarity","rascal","rash","rasping","ravage","raven","ravine","raving","ravioli","ravishing","reabsorb","reach","reacquire","reaction","reactive","reactor","reaffirm","ream","reanalyze","reappear","reapply","reappoint","reapprove","rearrange","rearview","reason","reassign","reassure","reattach","reawake","rebalance","rebate","rebel","rebirth","reboot","reborn","rebound","rebuff","rebuild","rebuilt","reburial","rebuttal","recall","recant","recapture","recast","recede","recent","recess","recharger","recipient","recital","recite","reckless","reclaim","recliner","reclining","recluse","reclusive","recognize","recoil","recollect","recolor","reconcile","reconfirm","reconvene","recopy","record","recount","recoup","recovery","recreate","rectal","rectangle","rectified","rectify","recycled","recycler","recycling","reemerge","reenact","reenter","reentry","reexamine","referable","referee","reference","refill","refinance","refined","refinery","refining","refinish","reflected","reflector","reflex","reflux","refocus","refold","reforest","reformat","reformed","reformer","reformist","refract","refrain","refreeze","refresh","refried","refueling","refund","refurbish","refurnish","refusal","refuse","refusing","refutable","refute","regain","regalia","regally","reggae","regime","region","register","registrar","registry","regress","regretful","regroup","regular","regulate","regulator","rehab","reheat","rehire","rehydrate","reimburse","reissue","reiterate","rejoice","rejoicing","rejoin","rekindle","relapse","relapsing","relatable","related","relation","relative","relax","relay","relearn","release","relenting","reliable","reliably","reliance","reliant","relic","relieve","relieving","relight","relish","relive","reload","relocate","relock","reluctant","rely","remake","remark","remarry","rematch","remedial","remedy","remember","reminder","remindful","remission","remix","remnant","remodeler","remold","remorse","remote","removable","removal","removed","remover","removing","rename","renderer","rendering","rendition","renegade","renewable","renewably","renewal","renewed","renounce","renovate","renovator","rentable","rental","rented","renter","reoccupy","reoccur","reopen","reorder","repackage","repacking","repaint","repair","repave","repaying","repayment","repeal","repeated","repeater","repent","rephrase","replace","replay","replica","reply","reporter","repose","repossess","repost","repressed","reprimand","reprint","reprise","reproach","reprocess","reproduce","reprogram","reps","reptile","reptilian","repugnant","repulsion","repulsive","repurpose","reputable","reputably","request","require","requisite","reroute","rerun","resale","resample","rescuer","reseal","research","reselect","reseller","resemble","resend","resent","reset","reshape","reshoot","reshuffle","residence","residency","resident","residual","residue","resigned","resilient","resistant","resisting","resize","resolute","resolved","resonant","resonate","resort","resource","respect","resubmit","result","resume","resupply","resurface","resurrect","retail","retainer","retaining","retake","retaliate","retention","rethink","retinal","retired","retiree","retiring","retold","retool","retorted","retouch","retrace","retract","retrain","retread","retreat","retrial","retrieval","retriever","retry","return","retying","retype","reunion","reunite","reusable","reuse","reveal","reveler","revenge","revenue","reverb","revered","reverence","reverend","reversal","reverse","reversing","reversion","revert","revisable","revise","revision","revisit","revivable","revival","reviver","reviving","revocable","revoke","revolt","revolver","revolving","reward","rewash","rewind","rewire","reword","rework","rewrap","rewrite","rhyme","ribbon","ribcage","rice","riches","richly","richness","rickety","ricotta","riddance","ridden","ride","riding","rifling","rift","rigging","rigid","rigor","rimless","rimmed","rind","rink","rinse","rinsing","riot","ripcord","ripeness","ripening","ripping","ripple","rippling","riptide","rise","rising","risk","risotto","ritalin","ritzy","rival","riverbank","riverbed","riverboat","riverside","riveter","riveting","roamer","roaming","roast","robbing","robe","robin","robotics","robust","rockband","rocker","rocket","rockfish","rockiness","rocking","rocklike","rockslide","rockstar","rocky","rogue","roman","romp","rope","roping","roster","rosy","rotten","rotting","rotunda","roulette","rounding","roundish","roundness","roundup","roundworm","routine","routing","rover","roving","royal","rubbed","rubber","rubbing","rubble","rubdown","ruby","ruckus","rudder","rug","ruined","rule","rumble","rumbling","rummage","rumor","runaround","rundown","runner","running","runny","runt","runway","rupture","rural","ruse","rush","rust","rut","sabbath","sabotage","sacrament","sacred","sacrifice","sadden","saddlebag","saddled","saddling","sadly","sadness","safari","safeguard","safehouse","safely","safeness","saffron","saga","sage","sagging","saggy","said","saint","sake","salad","salami","salaried","salary","saline","salon","saloon","salsa","salt","salutary","salute","salvage","salvaging","salvation","same","sample","sampling","sanction","sanctity","sanctuary","sandal","sandbag","sandbank","sandbar","sandblast","sandbox","sanded","sandfish","sanding","sandlot","sandpaper","sandpit","sandstone","sandstorm","sandworm","sandy","sanitary","sanitizer","sank","santa","sapling","sappiness","sappy","sarcasm","sarcastic","sardine","sash","sasquatch","sassy","satchel","satiable","satin","satirical","satisfied","satisfy","saturate","saturday","sauciness","saucy","sauna","savage","savanna","saved","savings","savior","savor","saxophone","say","scabbed","scabby","scalded","scalding","scale","scaling","scallion","scallop","scalping","scam","scandal","scanner","scanning","scant","scapegoat","scarce","scarcity","scarecrow","scared","scarf","scarily","scariness","scarring","scary","scavenger","scenic","schedule","schematic","scheme","scheming","schilling","schnapps","scholar","science","scientist","scion","scoff","scolding","scone","scoop","scooter","scope","scorch","scorebook","scorecard","scored","scoreless","scorer","scoring","scorn","scorpion","scotch","scoundrel","scoured","scouring","scouting","scouts","scowling","scrabble","scraggly","scrambled","scrambler","scrap","scratch","scrawny","screen","scribble","scribe","scribing","scrimmage","script","scroll","scrooge","scrounger","scrubbed","scrubber","scruffy","scrunch","scrutiny","scuba","scuff","sculptor","sculpture","scurvy","scuttle","secluded","secluding","seclusion","second","secrecy","secret","sectional","sector","secular","securely","security","sedan","sedate","sedation","sedative","sediment","seduce","seducing","segment","seismic","seizing","seldom","selected","selection","selective","selector","self","seltzer","semantic","semester","semicolon","semifinal","seminar","semisoft","semisweet","senate","senator","send","senior","senorita","sensation","sensitive","sensitize","sensually","sensuous","sepia","september","septic","septum","sequel","sequence","sequester","series","sermon","serotonin","serpent","serrated","serve","service","serving","sesame","sessions","setback","setting","settle","settling","setup","sevenfold","seventeen","seventh","seventy","severity","shabby","shack","shaded","shadily","shadiness","shading","shadow","shady","shaft","shakable","shakily","shakiness","shaking","shaky","shale","shallot","shallow","shame","shampoo","shamrock","shank","shanty","shape","shaping","share","sharpener","sharper","sharpie","sharply","sharpness","shawl","sheath","shed","sheep","sheet","shelf","shell","shelter","shelve","shelving","sherry","shield","shifter","shifting","shiftless","shifty","shimmer","shimmy","shindig","shine","shingle","shininess","shining","shiny","ship","shirt","shivering","shock","shone","shoplift","shopper","shopping","shoptalk","shore","shortage","shortcake","shortcut","shorten","shorter","shorthand","shortlist","shortly","shortness","shorts","shortwave","shorty","shout","shove","showbiz","showcase","showdown","shower","showgirl","showing","showman","shown","showoff","showpiece","showplace","showroom","showy","shrank","shrapnel","shredder","shredding","shrewdly","shriek","shrill","shrimp","shrine","shrink","shrivel","shrouded","shrubbery","shrubs","shrug","shrunk","shucking","shudder","shuffle","shuffling","shun","shush","shut","shy","siamese","siberian","sibling","siding","sierra","siesta","sift","sighing","silenced","silencer","silent","silica","silicon","silk","silliness","silly","silo","silt","silver","similarly","simile","simmering","simple","simplify","simply","sincere","sincerity","singer","singing","single","singular","sinister","sinless","sinner","sinuous","sip","siren","sister","sitcom","sitter","sitting","situated","situation","sixfold","sixteen","sixth","sixties","sixtieth","sixtyfold","sizable","sizably","size","sizing","sizzle","sizzling","skater","skating","skedaddle","skeletal","skeleton","skeptic","sketch","skewed","skewer","skid","skied","skier","skies","skiing","skilled","skillet","skillful","skimmed","skimmer","skimming","skimpily","skincare","skinhead","skinless","skinning","skinny","skintight","skipper","skipping","skirmish","skirt","skittle","skydiver","skylight","skyline","skype","skyrocket","skyward","slab","slacked","slacker","slacking","slackness","slacks","slain","slam","slander","slang","slapping","slapstick","slashed","slashing","slate","slather","slaw","sled","sleek","sleep","sleet","sleeve","slept","sliceable","sliced","slicer","slicing","slick","slider","slideshow","sliding","slighted","slighting","slightly","slimness","slimy","slinging","slingshot","slinky","slip","slit","sliver","slobbery","slogan","sloped","sloping","sloppily","sloppy","slot","slouching","slouchy","sludge","slug","slum","slurp","slush","sly","small","smartly","smartness","smasher","smashing","smashup","smell","smelting","smile","smilingly","smirk","smite","smith","smitten","smock","smog","smoked","smokeless","smokiness","smoking","smoky","smolder","smooth","smother","smudge","smudgy","smuggler","smuggling","smugly","smugness","snack","snagged","snaking","snap","snare","snarl","snazzy","sneak","sneer","sneeze","sneezing","snide","sniff","snippet","snipping","snitch","snooper","snooze","snore","snoring","snorkel","snort","snout","snowbird","snowboard","snowbound","snowcap","snowdrift","snowdrop","snowfall","snowfield","snowflake","snowiness","snowless","snowman","snowplow","snowshoe","snowstorm","snowsuit","snowy","snub","snuff","snuggle","snugly","snugness","speak","spearfish","spearhead","spearman","spearmint","species","specimen","specked","speckled","specks","spectacle","spectator","spectrum","speculate","speech","speed","spellbind","speller","spelling","spendable","spender","spending","spent","spew","sphere","spherical","sphinx","spider","spied","spiffy","spill","spilt","spinach","spinal","spindle","spinner","spinning","spinout","spinster","spiny","spiral","spirited","spiritism","spirits","spiritual","splashed","splashing","splashy","splatter","spleen","splendid","splendor","splice","splicing","splinter","splotchy","splurge","spoilage","spoiled","spoiler","spoiling","spoils","spoken","spokesman","sponge","spongy","sponsor","spoof","spookily","spooky","spool","spoon","spore","sporting","sports","sporty","spotless","spotlight","spotted","spotter","spotting","spotty","spousal","spouse","spout","sprain","sprang","sprawl","spray","spree","sprig","spring","sprinkled","sprinkler","sprint","sprite","sprout","spruce","sprung","spry","spud","spur","sputter","spyglass","squabble","squad","squall","squander","squash","squatted","squatter","squatting","squeak","squealer","squealing","squeamish","squeegee","squeeze","squeezing","squid","squiggle","squiggly","squint","squire","squirt","squishier","squishy","stability","stabilize","stable","stack","stadium","staff","stage","staging","stagnant","stagnate","stainable","stained","staining","stainless","stalemate","staleness","stalling","stallion","stamina","stammer","stamp","stand","stank","staple","stapling","starboard","starch","stardom","stardust","starfish","stargazer","staring","stark","starless","starlet","starlight","starlit","starring","starry","starship","starter","starting","startle","startling","startup","starved","starving","stash","state","static","statistic","statue","stature","status","statute","statutory","staunch","stays","steadfast","steadier","steadily","steadying","steam","steed","steep","steerable","steering","steersman","stegosaur","stellar","stem","stench","stencil","step","stereo","sterile","sterility","sterilize","sterling","sternness","sternum","stew","stick","stiffen","stiffly","stiffness","stifle","stifling","stillness","stilt","stimulant","stimulate","stimuli","stimulus","stinger","stingily","stinging","stingray","stingy","stinking","stinky","stipend","stipulate","stir","stitch","stock","stoic","stoke","stole","stomp","stonewall","stoneware","stonework","stoning","stony","stood","stooge","stool","stoop","stoplight","stoppable","stoppage","stopped","stopper","stopping","stopwatch","storable","storage","storeroom","storewide","storm","stout","stove","stowaway","stowing","straddle","straggler","strained","strainer","straining","strangely","stranger","strangle","strategic","strategy","stratus","straw","stray","streak","stream","street","strength","strenuous","strep","stress","stretch","strewn","stricken","strict","stride","strife","strike","striking","strive","striving","strobe","strode","stroller","strongbox","strongly","strongman","struck","structure","strudel","struggle","strum","strung","strut","stubbed","stubble","stubbly","stubborn","stucco","stuck","student","studied","studio","study","stuffed","stuffing","stuffy","stumble","stumbling","stump","stung","stunned","stunner","stunning","stunt","stupor","sturdily","sturdy","styling","stylishly","stylist","stylized","stylus","suave","subarctic","subatomic","subdivide","subdued","subduing","subfloor","subgroup","subheader","subject","sublease","sublet","sublevel","sublime","submarine","submerge","submersed","submitter","subpanel","subpar","subplot","subprime","subscribe","subscript","subsector","subside","subsiding","subsidize","subsidy","subsoil","subsonic","substance","subsystem","subtext","subtitle","subtly","subtotal","subtract","subtype","suburb","subway","subwoofer","subzero","succulent","such","suction","sudden","sudoku","suds","sufferer","suffering","suffice","suffix","suffocate","suffrage","sugar","suggest","suing","suitable","suitably","suitcase","suitor","sulfate","sulfide","sulfite","sulfur","sulk","sullen","sulphate","sulphuric","sultry","superbowl","superglue","superhero","superior","superjet","superman","supermom","supernova","supervise","supper","supplier","supply","support","supremacy","supreme","surcharge","surely","sureness","surface","surfacing","surfboard","surfer","surgery","surgical","surging","surname","surpass","surplus","surprise","surreal","surrender","surrogate","surround","survey","survival","survive","surviving","survivor","sushi","suspect","suspend","suspense","sustained","sustainer","swab","swaddling","swagger","swampland","swan","swapping","swarm","sway","swear","sweat","sweep","swell","swept","swerve","swifter","swiftly","swiftness","swimmable","swimmer","swimming","swimsuit","swimwear","swinger","swinging","swipe","swirl","switch","swivel","swizzle","swooned","swoop","swoosh","swore","sworn","swung","sycamore","sympathy","symphonic","symphony","symptom","synapse","syndrome","synergy","synopses","synopsis","synthesis","synthetic","syrup","system","t-shirt","tabasco","tabby","tableful","tables","tablet","tableware","tabloid","tackiness","tacking","tackle","tackling","tacky","taco","tactful","tactical","tactics","tactile","tactless","tadpole","taekwondo","tag","tainted","take","taking","talcum","talisman","tall","talon","tamale","tameness","tamer","tamper","tank","tanned","tannery","tanning","tantrum","tapeless","tapered","tapering","tapestry","tapioca","tapping","taps","tarantula","target","tarmac","tarnish","tarot","tartar","tartly","tartness","task","tassel","taste","tastiness","tasting","tasty","tattered","tattle","tattling","tattoo","taunt","tavern","thank","that","thaw","theater","theatrics","thee","theft","theme","theology","theorize","thermal","thermos","thesaurus","these","thesis","thespian","thicken","thicket","thickness","thieving","thievish","thigh","thimble","thing","think","thinly","thinner","thinness","thinning","thirstily","thirsting","thirsty","thirteen","thirty","thong","thorn","those","thousand","thrash","thread","threaten","threefold","thrift","thrill","thrive","thriving","throat","throbbing","throng","throttle","throwaway","throwback","thrower","throwing","thud","thumb","thumping","thursday","thus","thwarting","thyself","tiara","tibia","tidal","tidbit","tidiness","tidings","tidy","tiger","tighten","tightly","tightness","tightrope","tightwad","tigress","tile","tiling","till","tilt","timid","timing","timothy","tinderbox","tinfoil","tingle","tingling","tingly","tinker","tinkling","tinsel","tinsmith","tint","tinwork","tiny","tipoff","tipped","tipper","tipping","tiptoeing","tiptop","tiring","tissue","trace","tracing","track","traction","tractor","trade","trading","tradition","traffic","tragedy","trailing","trailside","train","traitor","trance","tranquil","transfer","transform","translate","transpire","transport","transpose","trapdoor","trapeze","trapezoid","trapped","trapper","trapping","traps","trash","travel","traverse","travesty","tray","treachery","treading","treadmill","treason","treat","treble","tree","trekker","tremble","trembling","tremor","trench","trend","trespass","triage","trial","triangle","tribesman","tribunal","tribune","tributary","tribute","triceps","trickery","trickily","tricking","trickle","trickster","tricky","tricolor","tricycle","trident","tried","trifle","trifocals","trillion","trilogy","trimester","trimmer","trimming","trimness","trinity","trio","tripod","tripping","triumph","trivial","trodden","trolling","trombone","trophy","tropical","tropics","trouble","troubling","trough","trousers","trout","trowel","truce","truck","truffle","trump","trunks","trustable","trustee","trustful","trusting","trustless","truth","try","tubby","tubeless","tubular","tucking","tuesday","tug","tuition","tulip","tumble","tumbling","tummy","turban","turbine","turbofan","turbojet","turbulent","turf","turkey","turmoil","turret","turtle","tusk","tutor","tutu","tux","tweak","tweed","tweet","tweezers","twelve","twentieth","twenty","twerp","twice","twiddle","twiddling","twig","twilight","twine","twins","twirl","twistable","twisted","twister","twisting","twisty","twitch","twitter","tycoon","tying","tyke","udder","ultimate","ultimatum","ultra","umbilical","umbrella","umpire","unabashed","unable","unadorned","unadvised","unafraid","unaired","unaligned","unaltered","unarmored","unashamed","unaudited","unawake","unaware","unbaked","unbalance","unbeaten","unbend","unbent","unbiased","unbitten","unblended","unblessed","unblock","unbolted","unbounded","unboxed","unbraided","unbridle","unbroken","unbuckled","unbundle","unburned","unbutton","uncanny","uncapped","uncaring","uncertain","unchain","unchanged","uncharted","uncheck","uncivil","unclad","unclaimed","unclamped","unclasp","uncle","unclip","uncloak","unclog","unclothed","uncoated","uncoiled","uncolored","uncombed","uncommon","uncooked","uncork","uncorrupt","uncounted","uncouple","uncouth","uncover","uncross","uncrown","uncrushed","uncured","uncurious","uncurled","uncut","undamaged","undated","undaunted","undead","undecided","undefined","underage","underarm","undercoat","undercook","undercut","underdog","underdone","underfed","underfeed","underfoot","undergo","undergrad","underhand","underline","underling","undermine","undermost","underpaid","underpass","underpay","underrate","undertake","undertone","undertook","undertow","underuse","underwear","underwent","underwire","undesired","undiluted","undivided","undocked","undoing","undone","undrafted","undress","undrilled","undusted","undying","unearned","unearth","unease","uneasily","uneasy","uneatable","uneaten","unedited","unelected","unending","unengaged","unenvied","unequal","unethical","uneven","unexpired","unexposed","unfailing","unfair","unfasten","unfazed","unfeeling","unfiled","unfilled","unfitted","unfitting","unfixable","unfixed","unflawed","unfocused","unfold","unfounded","unframed","unfreeze","unfrosted","unfrozen","unfunded","unglazed","ungloved","unglue","ungodly","ungraded","ungreased","unguarded","unguided","unhappily","unhappy","unharmed","unhealthy","unheard","unhearing","unheated","unhelpful","unhidden","unhinge","unhitched","unholy","unhook","unicorn","unicycle","unified","unifier","uniformed","uniformly","unify","unimpeded","uninjured","uninstall","uninsured","uninvited","union","uniquely","unisexual","unison","unissued","unit","universal","universe","unjustly","unkempt","unkind","unknotted","unknowing","unknown","unlaced","unlatch","unlawful","unleaded","unlearned","unleash","unless","unleveled","unlighted","unlikable","unlimited","unlined","unlinked","unlisted","unlit","unlivable","unloaded","unloader","unlocked","unlocking","unlovable","unloved","unlovely","unloving","unluckily","unlucky","unmade","unmanaged","unmanned","unmapped","unmarked","unmasked","unmasking","unmatched","unmindful","unmixable","unmixed","unmolded","unmoral","unmovable","unmoved","unmoving","unnamable","unnamed","unnatural","unneeded","unnerve","unnerving","unnoticed","unopened","unopposed","unpack","unpadded","unpaid","unpainted","unpaired","unpaved","unpeeled","unpicked","unpiloted","unpinned","unplanned","unplanted","unpleased","unpledged","unplowed","unplug","unpopular","unproven","unquote","unranked","unrated","unraveled","unreached","unread","unreal","unreeling","unrefined","unrelated","unrented","unrest","unretired","unrevised","unrigged","unripe","unrivaled","unroasted","unrobed","unroll","unruffled","unruly","unrushed","unsaddle","unsafe","unsaid","unsalted","unsaved","unsavory","unscathed","unscented","unscrew","unsealed","unseated","unsecured","unseeing","unseemly","unseen","unselect","unselfish","unsent","unsettled","unshackle","unshaken","unshaved","unshaven","unsheathe","unshipped","unsightly","unsigned","unskilled","unsliced","unsmooth","unsnap","unsocial","unsoiled","unsold","unsolved","unsorted","unspoiled","unspoken","unstable","unstaffed","unstamped","unsteady","unsterile","unstirred","unstitch","unstopped","unstuck","unstuffed","unstylish","unsubtle","unsubtly","unsuited","unsure","unsworn","untagged","untainted","untaken","untamed","untangled","untapped","untaxed","unthawed","unthread","untidy","untie","until","untimed","untimely","untitled","untoasted","untold","untouched","untracked","untrained","untreated","untried","untrimmed","untrue","untruth","unturned","untwist","untying","unusable","unused","unusual","unvalued","unvaried","unvarying","unveiled","unveiling","unvented","unviable","unvisited","unvocal","unwanted","unwarlike","unwary","unwashed","unwatched","unweave","unwed","unwelcome","unwell","unwieldy","unwilling","unwind","unwired","unwitting","unwomanly","unworldly","unworn","unworried","unworthy","unwound","unwoven","unwrapped","unwritten","unzip","upbeat","upchuck","upcoming","upcountry","update","upfront","upgrade","upheaval","upheld","uphill","uphold","uplifted","uplifting","upload","upon","upper","upright","uprising","upriver","uproar","uproot","upscale","upside","upstage","upstairs","upstart","upstate","upstream","upstroke","upswing","uptake","uptight","uptown","upturned","upward","upwind","uranium","urban","urchin","urethane","urgency","urgent","urging","urologist","urology","usable","usage","useable","used","uselessly","user","usher","usual","utensil","utility","utilize","utmost","utopia","utter","vacancy","vacant","vacate","vacation","vagabond","vagrancy","vagrantly","vaguely","vagueness","valiant","valid","valium","valley","valuables","value","vanilla","vanish","vanity","vanquish","vantage","vaporizer","variable","variably","varied","variety","various","varmint","varnish","varsity","varying","vascular","vaseline","vastly","vastness","veal","vegan","veggie","vehicular","velcro","velocity","velvet","vendetta","vending","vendor","veneering","vengeful","venomous","ventricle","venture","venue","venus","verbalize","verbally","verbose","verdict","verify","verse","version","versus","vertebrae","vertical","vertigo","very","vessel","vest","veteran","veto","vexingly","viability","viable","vibes","vice","vicinity","victory","video","viewable","viewer","viewing","viewless","viewpoint","vigorous","village","villain","vindicate","vineyard","vintage","violate","violation","violator","violet","violin","viper","viral","virtual","virtuous","virus","visa","viscosity","viscous","viselike","visible","visibly","vision","visiting","visitor","visor","vista","vitality","vitalize","vitally","vitamins","vivacious","vividly","vividness","vixen","vocalist","vocalize","vocally","vocation","voice","voicing","void","volatile","volley","voltage","volumes","voter","voting","voucher","vowed","vowel","voyage","wackiness","wad","wafer","waffle","waged","wager","wages","waggle","wagon","wake","waking","walk","walmart","walnut","walrus","waltz","wand","wannabe","wanted","wanting","wasabi","washable","washbasin","washboard","washbowl","washcloth","washday","washed","washer","washhouse","washing","washout","washroom","washstand","washtub","wasp","wasting","watch","water","waviness","waving","wavy","whacking","whacky","wham","wharf","wheat","whenever","whiff","whimsical","whinny","whiny","whisking","whoever","whole","whomever","whoopee","whooping","whoops","why","wick","widely","widen","widget","widow","width","wieldable","wielder","wife","wifi","wikipedia","wildcard","wildcat","wilder","wildfire","wildfowl","wildland","wildlife","wildly","wildness","willed","willfully","willing","willow","willpower","wilt","wimp","wince","wincing","wind","wing","winking","winner","winnings","winter","wipe","wired","wireless","wiring","wiry","wisdom","wise","wish","wisplike","wispy","wistful","wizard","wobble","wobbling","wobbly","wok","wolf","wolverine","womanhood","womankind","womanless","womanlike","womanly","womb","woof","wooing","wool","woozy","word","work","worried","worrier","worrisome","worry","worsening","worshiper","worst","wound","woven","wow","wrangle","wrath","wreath","wreckage","wrecker","wrecking","wrench","wriggle","wriggly","wrinkle","wrinkly","wrist","writing","written","wrongdoer","wronged","wrongful","wrongly","wrongness","wrought","xbox","xerox","yahoo","yam","yanking","yapping","yard","yarn","yeah","yearbook","yearling","yearly","yearning","yeast","yelling","yelp","yen","yesterday","yiddish","yield","yin","yippee","yo-yo","yodel","yoga","yogurt","yonder","yoyo","yummy","zap","zealous","zebra","zen","zeppelin","zero","zestfully","zesty","zigzagged","zipfile","zipping","zippy","zips","zit","zodiac","zombie","zone","zoning","zookeeper","zoologist","zoology","zoom"];class UV{constructor(e){this.buffer=e}}class zV{}var NV=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class VV{static fromData(e){switch(e.type){case"organization":return new HV(e.key);case"provider":return new jV(e.key,e.providerId);default:return null}}}class HV{constructor(e){this.key=e}decrypt(e){return NV(this,void 0,void 0,(function*(){const t=yield e.rsaDecrypt(this.key);return new mg.N(t)}))}toData(){return{type:"organization",key:this.key}}}class jV{constructor(e,t){this.key=e,this.providerId=t}decrypt(e){return NV(this,void 0,void 0,(function*(){const t=yield e.getProviderKey(this.providerId),n=yield e.decryptToBytes(new ie._(this.key),t);return new mg.N(n)}))}toData(){return{type:"provider",key:this.key,providerId:this.providerId}}}var LV=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},KV=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},GV=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class qV{constructor(e,t,n,i,r){this.cryptoFunctionService=e,this.encryptService=t,this.platformUtilService=n,this.logService=i,this.stateService=r}setKey(e,t){return GV(this,void 0,void 0,(function*(){yield this.stateService.setCryptoMasterKey(e,{userId:t}),yield this.storeKey(e,t)}))}setKeyHash(e){return GV(this,void 0,void 0,(function*(){yield this.stateService.setKeyHash(e)}))}setEncKey(e){return GV(this,void 0,void 0,(function*(){null!=e&&(yield this.stateService.setDecryptedCryptoSymmetricKey(null),yield this.stateService.setEncryptedCryptoSymmetricKey(e))}))}setEncPrivateKey(e){return GV(this,void 0,void 0,(function*(){null!=e&&(yield this.stateService.setDecryptedPrivateKey(null),yield this.stateService.setEncryptedPrivateKey(e))}))}setOrgKeys(e=[],t=[]){return GV(this,void 0,void 0,(function*(){const n={};return e.forEach((e=>{n[e.id]={type:"organization",key:e.key}})),t.forEach((e=>{n[e.id]={type:"provider",providerId:e.providerId,key:e.key}})),yield this.stateService.setDecryptedOrganizationKeys(null),yield this.stateService.setEncryptedOrganizationKeys(n)}))}setProviderKeys(e){return GV(this,void 0,void 0,(function*(){const t={};return e.forEach((e=>{t[e.id]=e.key})),yield this.stateService.setDecryptedProviderKeys(null),yield this.stateService.setEncryptedProviderKeys(t)}))}getKey(e,t){return GV(this,void 0,void 0,(function*(){const n=yield this.stateService.getCryptoMasterKey({userId:t});if(null!=n)return n;e||(e=te.Auto);const i=yield this.getKeyFromStorage(e,t);return null!=i&&this.setKey(i,t),i}))}getKeyFromStorage(e,t){return GV(this,void 0,void 0,(function*(){const n=yield this.retrieveKeyFromStorage(e,t);if(null!=n){const e=new mg.N(N.c.fromB64ToArray(n).buffer);return(yield this.validateKey(e))?e:(this.logService.warning("Wrong key, throwing away stored key"),yield this.clearSecretKeyStore(t),null)}return null}))}getKeyHash(){return GV(this,void 0,void 0,(function*(){return yield this.stateService.getKeyHash()}))}compareAndUpdateKeyHash(e,t){return GV(this,void 0,void 0,(function*(){const n=yield this.getKeyHash();if(null!=e&&null!=n){const i=yield this.hashPassword(e,t,ee.LocalAuthorization);if(null!=i&&n===i)return!0;const r=yield this.hashPassword(e,t,ee.ServerAuthorization);if(null!=r&&n===r)return yield this.setKeyHash(i),!0}return!1}))}getEncKey(e=null){return this.getEncKeyHelper(e)}getPublicKey(){return GV(this,void 0,void 0,(function*(){const e=yield this.stateService.getPublicKey();if(null!=e)return e;const t=yield this.getPrivateKey();if(null==t)return null;const n=yield this.cryptoFunctionService.rsaExtractPublicKey(t);return yield this.stateService.setPublicKey(n),n}))}getPrivateKey(){return GV(this,void 0,void 0,(function*(){const e=yield this.stateService.getDecryptedPrivateKey();if(null!=e)return e;const t=yield this.stateService.getEncryptedPrivateKey();if(null==t)return null;const n=yield this.decryptToBytes(new ie._(t),null);return yield this.stateService.setDecryptedPrivateKey(n),n}))}getFingerprint(e,t){return GV(this,void 0,void 0,(function*(){if(null==t&&(t=yield this.getPublicKey()),null===t)throw new Error("No public key available.");const n=yield this.cryptoFunctionService.hash(t,"sha256"),i=yield this.cryptoFunctionService.hkdfExpand(n,e,32,"sha256");return this.hashPhrase(i)}))}getOrgKeys(){return GV(this,void 0,void 0,(function*(){const e=new Map,t=yield this.stateService.getDecryptedOrganizationKeys();if(null!=t&&t.size>0)return t;const n=yield this.stateService.getEncryptedOrganizationKeys();if(null==n)return null;let i=!1;for(const r of Object.keys(n)){if(e.has(r))continue;const t=VV.fromData(n[r]),o=yield t.decrypt(this);e.set(r,o),i=!0}return i&&(yield this.stateService.setDecryptedOrganizationKeys(e)),e}))}getOrgKey(e){return GV(this,void 0,void 0,(function*(){if(null==e)return null;const t=yield this.getOrgKeys();return null!=t&&t.has(e)?t.get(e):null}))}getProviderKeys(){return GV(this,void 0,void 0,(function*(){const e=new Map,t=yield this.stateService.getDecryptedProviderKeys();if(null!=t&&t.size>0)return t;const n=yield this.stateService.getEncryptedProviderKeys();if(null==n)return null;let i=!1;for(const r in n){if(!n.hasOwnProperty(r))continue;const t=yield this.rsaDecrypt(n[r]);e.set(r,new mg.N(t)),i=!0}return i&&(yield this.stateService.setDecryptedProviderKeys(e)),e}))}getProviderKey(e){return GV(this,void 0,void 0,(function*(){if(null==e)return null;const t=yield this.getProviderKeys();return null!=t&&t.has(e)?t.get(e):null}))}hasKey(){return GV(this,void 0,void 0,(function*(){return(yield this.hasKeyInMemory())||(yield this.hasKeyStored(te.Auto))||(yield this.hasKeyStored(te.Biometric))}))}hasKeyInMemory(e){return GV(this,void 0,void 0,(function*(){return null!=(yield this.stateService.getCryptoMasterKey({userId:e}))}))}hasKeyStored(e,t){return GV(this,void 0,void 0,(function*(){switch(e){case te.Auto:return null!=(yield this.stateService.getCryptoMasterKeyAuto({userId:t}));case te.Biometric:return!0===(yield this.stateService.hasCryptoMasterKeyBiometric({userId:t}));default:return!1}}))}hasEncKey(){return GV(this,void 0,void 0,(function*(){return null!=(yield this.stateService.getEncryptedCryptoSymmetricKey())}))}clearKey(e=!0,t){return GV(this,void 0,void 0,(function*(){yield this.stateService.setCryptoMasterKey(null,{userId:t}),yield this.stateService.setLegacyEtmKey(null,{userId:t}),e&&(yield this.clearSecretKeyStore(t))}))}clearStoredKey(e){return GV(this,void 0,void 0,(function*(){e===te.Auto?yield this.stateService.setCryptoMasterKeyAuto(null):yield this.stateService.setCryptoMasterKeyBiometric(null)}))}clearKeyHash(e){return GV(this,void 0,void 0,(function*(){return yield this.stateService.setKeyHash(null,{userId:e})}))}clearEncKey(e,t){return GV(this,void 0,void 0,(function*(){yield this.stateService.setDecryptedCryptoSymmetricKey(null,{userId:t}),e||(yield this.stateService.setEncryptedCryptoSymmetricKey(null,{userId:t}))}))}clearKeyPair(e,t){return GV(this,void 0,void 0,(function*(){const n=[this.stateService.setDecryptedPrivateKey(null,{userId:t}),this.stateService.setPublicKey(null,{userId:t})];return e||n.push(this.stateService.setEncryptedPrivateKey(null,{userId:t})),Promise.all(n)}))}clearOrgKeys(e,t){return GV(this,void 0,void 0,(function*(){yield this.stateService.setDecryptedOrganizationKeys(null,{userId:t}),e||(yield this.stateService.setEncryptedOrganizationKeys(null,{userId:t}))}))}clearProviderKeys(e,t){return GV(this,void 0,void 0,(function*(){yield this.stateService.setDecryptedProviderKeys(null,{userId:t}),e||(yield this.stateService.setEncryptedProviderKeys(null,{userId:t}))}))}clearPinProtectedKey(e){return GV(this,void 0,void 0,(function*(){return yield this.stateService.setEncryptedPinProtected(null,{userId:e})}))}clearKeys(e){return GV(this,void 0,void 0,(function*(){yield this.clearKey(!0,e),yield this.clearKeyHash(e),yield this.clearOrgKeys(!1,e),yield this.clearProviderKeys(!1,e),yield this.clearEncKey(!1,e),yield this.clearKeyPair(!1,e),yield this.clearPinProtectedKey(e)}))}toggleKey(){return GV(this,void 0,void 0,(function*(){const e=yield this.getKey();yield this.setKey(e)}))}makeKey(e,t,n,i){return GV(this,void 0,void 0,(function*(){let r=null;if(null!=n&&n!==He.G3.PBKDF2_SHA256)throw new Error("Unknown Kdf.");if(null==i)i=5e3;else if(i<5e3)throw new Error("PBKDF2 iteration minimum is 5000.");return r=yield this.cryptoFunctionService.pbkdf2(e,t,"sha256",i),new mg.N(r)}))}makeKeyFromPin(e,t,n,i,r=null){return GV(this,void 0,void 0,(function*(){if(null==r){const e=yield this.stateService.getEncryptedPinProtected();if(null==e)throw new Error("No PIN protected key found.");r=new ie._(e)}const o=yield this.makePinKey(e,t,n,i),a=yield this.decryptToBytes(r,o);return new mg.N(a)}))}makeShareKey(){return GV(this,void 0,void 0,(function*(){const e=yield this.cryptoFunctionService.randomBytes(64),t=yield this.getPublicKey();return[yield this.rsaEncrypt(e,t),new mg.N(e)]}))}makeKeyPair(e){return GV(this,void 0,void 0,(function*(){const t=yield this.cryptoFunctionService.rsaGenerateKeyPair(2048);return[N.c.fromBufferToB64(t[0]),yield this.encrypt(t[1],e)]}))}makePinKey(e,t,n,i){return GV(this,void 0,void 0,(function*(){const r=yield this.makeKey(e,t,n,i);return yield this.stretchKey(r)}))}makeSendKey(e){return GV(this,void 0,void 0,(function*(){const t=yield this.cryptoFunctionService.hkdf(e,"bitwarden-send","send",64,"sha256");return new mg.N(t)}))}hashPassword(e,t,n){return GV(this,void 0,void 0,(function*(){if(null==t&&(t=yield this.getKey()),null==e||null==t)throw new Error("Invalid parameters.");const i=n===ee.LocalAuthorization?2:1,r=yield this.cryptoFunctionService.pbkdf2(t.key,e,"sha256",i);return N.c.fromBufferToB64(r)}))}makeEncKey(e){return GV(this,void 0,void 0,(function*(){const t=yield this.getKeyForEncryption(e),n=yield this.cryptoFunctionService.randomBytes(64);return this.buildEncKey(t,n)}))}remakeEncKey(e,t){return GV(this,void 0,void 0,(function*(){return null==t&&(t=yield this.getEncKey()),this.buildEncKey(e,t.key)}))}encrypt(e,t){return GV(this,void 0,void 0,(function*(){return t=yield this.getKeyForEncryption(t),yield this.encryptService.encrypt(e,t)}))}encryptToBytes(e,t){return GV(this,void 0,void 0,(function*(){const n=yield this.aesEncrypt(e,t);let i=0;null!=n.mac&&(i=n.mac.byteLength);const r=new Uint8Array(1+n.iv.byteLength+i+n.data.byteLength);return r.set([n.key.encType]),r.set(new Uint8Array(n.iv),1),null!=n.mac&&r.set(new Uint8Array(n.mac),1+n.iv.byteLength),r.set(new Uint8Array(n.data),1+n.iv.byteLength+i),new UV(r.buffer)}))}rsaEncrypt(e,t){return GV(this,void 0,void 0,(function*(){if(null==t&&(t=yield this.getPublicKey()),null==t)throw new Error("Public key unavailable.");const n=yield this.cryptoFunctionService.rsaEncrypt(e,t,"sha1");return new ie._(FV.F.Rsa2048_OaepSha1_B64,N.c.fromBufferToB64(n))}))}rsaDecrypt(e,t){return GV(this,void 0,void 0,(function*(){const n=e.split(".");let i,r=null;if(1===n.length)r=FV.F.Rsa2048_OaepSha256_B64,i=[n[0]];else if(2===n.length)try{r=parseInt(n[0],null),i=n[1].split("|")}catch(l){this.logService.error(l)}switch(r){case FV.F.Rsa2048_OaepSha256_B64:case FV.F.Rsa2048_OaepSha1_B64:case FV.F.Rsa2048_OaepSha256_HmacSha256_B64:case FV.F.Rsa2048_OaepSha1_HmacSha256_B64:break;default:throw new Error("encType unavailable.")}if(null==i||i.length<=0)throw new Error("encPieces unavailable.");const o=N.c.fromB64ToArray(i[0]).buffer,a=null!=t?t:yield this.getPrivateKey();if(null==a)throw new Error("No private key.");let s="sha1";switch(r){case FV.F.Rsa2048_OaepSha256_B64:case FV.F.Rsa2048_OaepSha256_HmacSha256_B64:s="sha256";break;case FV.F.Rsa2048_OaepSha1_B64:case FV.F.Rsa2048_OaepSha1_HmacSha256_B64:break;default:throw new Error("encType unavailable.")}return this.cryptoFunctionService.rsaDecrypt(o,a,s)}))}decryptToBytes(e,t){return GV(this,void 0,void 0,(function*(){const n=N.c.fromB64ToArray(e.iv).buffer,i=N.c.fromB64ToArray(e.data).buffer,r=e.mac?N.c.fromB64ToArray(e.mac).buffer:null,o=yield this.aesDecryptToBytes(e.encryptionType,i,n,r,t);return null==o?null:o}))}decryptToUtf8(e,t){return GV(this,void 0,void 0,(function*(){return t=yield this.getKeyForEncryption(t),t=yield this.resolveLegacyKey(e.encryptionType,t),yield this.encryptService.decryptToUtf8(e,t)}))}decryptFromBytes(e,t){return GV(this,void 0,void 0,(function*(){if(null==e)throw new Error("no encBuf.");const n=new Uint8Array(e),i=n[0];let r=null,o=null,a=null;switch(i){case FV.F.AesCbc128_HmacSha256_B64:case FV.F.AesCbc256_HmacSha256_B64:if(n.length<=49)return null;o=n.slice(1,17),a=n.slice(17,49),r=n.slice(49);break;case FV.F.AesCbc256_B64:if(n.length<=17)return null;o=n.slice(1,17),r=n.slice(17);break;default:return null}return yield this.aesDecryptToBytes(i,r.buffer,o.buffer,null!=a?a.buffer:null,t)}))}randomNumber(e,t){return GV(this,void 0,void 0,(function*(){let n=0;const i=t-e+1,r=Math.ceil(Math.log2(i));if(r>53)throw new Error("We cannot generate numbers larger than 53 bits.");const o=Math.ceil(r/8),a=Math.pow(2,r)-1,s=new Uint8Array(yield this.cryptoFunctionService.randomBytes(o));let l=8*(o-1);for(let e=0;e<o;e++)n+=s[e]*Math.pow(2,l),l-=8;return n&=a,n>=i?this.randomNumber(e,t):e+n}))}validateKey(e){return GV(this,void 0,void 0,(function*(){try{const t=yield this.stateService.getEncryptedPrivateKey(),n=yield this.getEncKeyHelper(e);if(null==t||null==n)return!1;const i=yield this.decryptToBytes(new ie._(t),n);yield this.cryptoFunctionService.rsaExtractPublicKey(i)}catch(t){return!1}return!0}))}storeKey(e,t){return GV(this,void 0,void 0,(function*(){(yield this.shouldStoreKey(te.Auto,t))?yield this.stateService.setCryptoMasterKeyAuto(e.keyB64,{userId:t}):(yield this.shouldStoreKey(te.Biometric,t))?yield this.stateService.setCryptoMasterKeyBiometric(e.keyB64,{userId:t}):(yield this.stateService.setCryptoMasterKeyAuto(null,{userId:t}),yield this.stateService.setCryptoMasterKeyBiometric(null,{userId:t}))}))}shouldStoreKey(e,t){return GV(this,void 0,void 0,(function*(){let n=!1;if(e===te.Auto){n=null==(yield this.stateService.getVaultTimeout({userId:t}))}else if(e===te.Biometric){n=(yield this.stateService.getBiometricUnlock({userId:t}))&&this.platformUtilService.supportsSecureStorage()}return n}))}retrieveKeyFromStorage(e,t){return GV(this,void 0,void 0,(function*(){return e===te.Auto?yield this.stateService.getCryptoMasterKeyAuto({userId:t}):yield this.stateService.getCryptoMasterKeyBiometric({userId:t})}))}aesEncrypt(e,t){return GV(this,void 0,void 0,(function*(){const n=new zV;if(n.key=yield this.getKeyForEncryption(t),n.iv=yield this.cryptoFunctionService.randomBytes(16),n.data=yield this.cryptoFunctionService.aesEncrypt(e,n.iv,n.key.encKey),null!=n.key.macKey){const e=new Uint8Array(n.iv.byteLength+n.data.byteLength);e.set(new Uint8Array(n.iv),0),e.set(new Uint8Array(n.data),n.iv.byteLength),n.mac=yield this.cryptoFunctionService.hmac(e.buffer,n.key.macKey,"sha256")}return n}))}aesDecryptToBytes(e,t,n,i,r){return GV(this,void 0,void 0,(function*(){const o=yield this.getKeyForEncryption(r),a=yield this.resolveLegacyKey(e,o);if(null!=a.macKey&&null==i)return null;if(a.encType!==e)return null;if(null!=a.macKey&&null!=i){const e=new Uint8Array(n.byteLength+t.byteLength);e.set(new Uint8Array(n),0),e.set(new Uint8Array(t),n.byteLength);const r=yield this.cryptoFunctionService.hmac(e.buffer,a.macKey,"sha256");if(null===r)return null;if(!(yield this.cryptoFunctionService.compare(i,r)))return this.logService.error("mac failed."),null}return yield this.cryptoFunctionService.aesDecrypt(t,n,a.encKey)}))}getKeyForEncryption(e){return GV(this,void 0,void 0,(function*(){if(null!=e)return e;const t=yield this.getEncKey();return null!=t?t:yield this.getKey()}))}resolveLegacyKey(e,t){return GV(this,void 0,void 0,(function*(){if(e===FV.F.AesCbc128_HmacSha256_B64&&t.encType===FV.F.AesCbc256_B64){let e=yield this.stateService.getLegacyEtmKey();return null==e&&(e=new mg.N(t.key,FV.F.AesCbc128_HmacSha256_B64),yield this.stateService.setLegacyEtmKey(e)),e}return t}))}stretchKey(e){return GV(this,void 0,void 0,(function*(){const t=new Uint8Array(64),n=yield this.cryptoFunctionService.hkdfExpand(e.key,"enc",32,"sha256"),i=yield this.cryptoFunctionService.hkdfExpand(e.key,"mac",32,"sha256");return t.set(new Uint8Array(n)),t.set(new Uint8Array(i),32),new mg.N(t.buffer)}))}hashPhrase(e,t=64){return GV(this,void 0,void 0,(function*(){const n=Math.log(RV.length)/Math.log(2);let i=Math.ceil(t/n);const r=Array.from(new Uint8Array(e));if(i*n>4*r.length)throw new Error("Output entropy of hash function is too small");const o=[];let a=DV.fromArray(r,256);for(;i--;){const e=a.mod(RV.length);a=a.divide(RV.length),o.push(RV[e])}return o}))}buildEncKey(e,t){return GV(this,void 0,void 0,(function*(){let n=null;if(32===e.key.byteLength){const i=yield this.stretchKey(e);n=yield this.encrypt(t,i)}else{if(64!==e.key.byteLength)throw new Error("Invalid key size.");n=yield this.encrypt(t,e)}return[new mg.N(t),n]}))}clearSecretKeyStore(e){return GV(this,void 0,void 0,(function*(){yield this.stateService.setCryptoMasterKeyAuto(null,{userId:e}),yield this.stateService.setCryptoMasterKeyBiometric(null,{userId:e})}))}getEncKeyHelper(e=null){return GV(this,void 0,void 0,(function*(){const t=yield this.stateService.getDecryptedCryptoSymmetricKey();if(null!=t)return t;const n=yield this.stateService.getEncryptedCryptoSymmetricKey();if(null==n)return null;if(null==e&&(e=yield this.getKey()),null==e)return null;let i;const r=new ie._(n);if(r.encryptionType===FV.F.AesCbc256_B64)i=yield this.decryptToBytes(r,e);else{if(r.encryptionType!==FV.F.AesCbc256_HmacSha256_B64)throw new Error("Unsupported encKey type.");{const t=yield this.stretchKey(e);i=yield this.decryptToBytes(r,t)}}if(null==i)return null;const o=new mg.N(i);return yield this.stateService.setDecryptedCryptoSymmetricKey(o),o}))}}LV([lV((()=>"getEncKey")),KV("design:type",Function),KV("design:paramtypes",[mg.N]),KV("design:returntype",Promise)],qV.prototype,"getEncKey",null),LV([lV((()=>"getOrgKeys")),KV("design:type",Function),KV("design:paramtypes",[]),KV("design:returntype",Promise)],qV.prototype,"getOrgKeys",null),LV([lV((()=>"getProviderKeys")),KV("design:type",Function),KV("design:paramtypes",[]),KV("design:returntype",Promise)],qV.prototype,"getProviderKeys",null);var _V=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};var $V=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class WV{}class QV{}var YV=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};var ZV=n(90286),JV=n(23702),XV=n(43579);class eH{constructor(e){this.message=e.humanReadableMessage,this.appIcon=e.appIcon,this.appName=e.appName,this.userId=e.userId,this.userName=e.userName,this.userEmail=e.userEmail,this.date=e.date,this.ip=e.ip,this.type=Lr.t[e.type],this.installationId=e.installationId}}var tH,nH=n(38685),iH=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};!function(e){e[e.Direct=0]="Direct",e[e.Azure=1]="Azure"}(tH||(tH={}));var rH=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class oH{constructor(e){this.logService=e}upload(e,t,n){return rH(this,void 0,void 0,(function*(){return t.buffer.byteLength<=268435456?yield this.azureUploadBlob(e,t):yield this.azureUploadBlocks(e,t,n)}))}azureUploadBlob(e,t){return rH(this,void 0,void 0,(function*(){const n=N.c.getUrl(e),i=new Headers({"x-ms-date":(new Date).toUTCString(),"x-ms-version":n.searchParams.get("sv"),"Content-Length":t.buffer.byteLength.toString(),"x-ms-blob-type":"BlockBlob"}),r=new Request(e,{body:t.buffer,cache:"no-store",method:"PUT",headers:i}),o=yield fetch(r);if(201!==o.status)throw new Error(`Failed to create Azure blob: ${o.status}`)}))}azureUploadBlocks(e,t,n){return rH(this,void 0,void 0,(function*(){const i=N.c.getUrl(e),r=this.getMaxBlockSize(i.searchParams.get("sv"));let o=0;const a=Math.ceil(t.buffer.byteLength/r),s=[];if(a>5e4)throw new Error("Cannot upload file, exceeds maximum size of "+5e4*r);try{for(;o<a;){e=yield this.renewUrlIfNecessary(e,n);const i=N.c.getUrl(e),a=this.encodedBlockId(o);i.searchParams.append("comp","block"),i.searchParams.append("blockid",a);const l=o*r,d=t.buffer.slice(l,l+r),c=new Headers({"x-ms-date":(new Date).toUTCString(),"x-ms-version":i.searchParams.get("sv"),"Content-Length":d.byteLength.toString()}),p=new Request(i.toString(),{body:d,cache:"no-store",method:"PUT",headers:c}),u=yield fetch(p);if(201!==u.status){const e=`Unsuccessful block PUT. Received status ${u.status}`;throw this.logService.error(e+"\n"+(yield u.json())),new Error(e)}s.push(a),o++}e=yield this.renewUrlIfNecessary(e,n);const i=N.c.getUrl(e),l=this.blockListXml(s);i.searchParams.append("comp","blocklist");const d=new Headers({"x-ms-date":(new Date).toUTCString(),"x-ms-version":i.searchParams.get("sv"),"Content-Length":l.length.toString()}),c=new Request(i.toString(),{body:l,cache:"no-store",method:"PUT",headers:d}),p=yield fetch(c);if(201!==p.status){const e=`Unsuccessful block list PUT. Received status ${p.status}`;throw this.logService.error(e+"\n"+(yield p.json())),new Error(e)}}catch(l){throw l}}))}renewUrlIfNecessary(e,t){var n;return rH(this,void 0,void 0,(function*(){const i=N.c.getUrl(e),r=new Date(null!==(n=i.searchParams.get("se"))&&void 0!==n?n:"");return isNaN(r.getTime())&&r.setTime(Date.now()+36e5),r.getTime()<Date.now()+1e3?yield t():e}))}encodedBlockId(e){const t=("000000000000000000000000000000000000000000000000"+e.toString()).slice(-48);return N.c.fromUtf8ToB64(t)}blockListXml(e){let t='<?xml version="1.0" encoding="utf-8"?><BlockList>';return e.forEach((e=>{t+=`<Latest>${e}</Latest>`})),t+="</BlockList>",t}getMaxBlockSize(e){return aH.compare(e,"2019-12-12")>=0?4194304e3:aH.compare(e,"2016-05-31")>=0?104857600:4194304}}class aH{constructor(e){this.year=0,this.month=0,this.day=0;try{const t=e.split("-").map((e=>Number.parseInt(e,10)));this.year=t[0],this.month=t[1],this.day=t[2]}catch(t){}}static compare(e,t){return"string"==typeof e&&(e=new aH(e)),"string"==typeof t&&(t=new aH(t)),e.year!==t.year?e.year-t.year:e.month!==t.month?e.month-t.month:e.day!==t.day?e.day-t.day:0}compare(e){return aH.compare(this,e)}}var sH=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class lH{constructor(e){this.apiService=e}upload(e,t,n){return sH(this,void 0,void 0,(function*(){const i=new FormData;try{const n=new Blob([t.buffer],{type:"application/octet-stream"});i.append("data",n,e)}catch(r){if(!N.c.isNode||N.c.isBrowser)throw r;i.append("data",Buffer.from(t.buffer),{filepath:e,contentType:"application/octet-stream"})}yield n(i)}))}}var dH=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class cH{constructor(e){this.name=e.name,this.id=e.id,this.revisionDate=e.revisionDate}}var pH=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};var uH=n(86212),mH=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class hH{constructor(e,t,n,i,r){this.key=e,this.kdf=t,this.kdfIterations=n,this.orgIdentifier=i,this.keys=r}}class vH{constructor(e){this.key=e}}var gH=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};var fH,xH=n(72486),yH=n(34760);!function(e){e[e.SyncCipherUpdate=0]="SyncCipherUpdate",e[e.SyncCipherCreate=1]="SyncCipherCreate",e[e.SyncLoginDelete=2]="SyncLoginDelete",e[e.SyncFolderDelete=3]="SyncFolderDelete",e[e.SyncCiphers=4]="SyncCiphers",e[e.SyncVault=5]="SyncVault",e[e.SyncOrgKeys=6]="SyncOrgKeys",e[e.SyncFolderCreate=7]="SyncFolderCreate",e[e.SyncFolderUpdate=8]="SyncFolderUpdate",e[e.SyncCipherDelete=9]="SyncCipherDelete",e[e.SyncSettings=10]="SyncSettings",e[e.LogOut=11]="LogOut",e[e.SyncSendCreate=12]="SyncSendCreate",e[e.SyncSendUpdate=13]="SyncSendUpdate",e[e.SyncSendDelete=14]="SyncSendDelete"}(fH||(fH={}));class SH extends yg.c{constructor(e){super(e),this.contextId=this.getResponseProperty("ContextId"),this.type=this.getResponseProperty("Type");const t=this.getResponseProperty("Payload");switch(this.type){case fH.SyncCipherCreate:case fH.SyncCipherDelete:case fH.SyncCipherUpdate:case fH.SyncLoginDelete:this.payload=new bH(t);break;case fH.SyncFolderCreate:case fH.SyncFolderDelete:case fH.SyncFolderUpdate:this.payload=new wH(t);break;case fH.SyncVault:case fH.SyncCiphers:case fH.SyncOrgKeys:case fH.SyncSettings:case fH.LogOut:this.payload=new IH(t);break;case fH.SyncSendCreate:case fH.SyncSendUpdate:case fH.SyncSendDelete:this.payload=new CH(t)}}}class bH extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.userId=this.getResponseProperty("UserId"),this.organizationId=this.getResponseProperty("OrganizationId"),this.collectionIds=this.getResponseProperty("CollectionIds"),this.revisionDate=new Date(this.getResponseProperty("RevisionDate"))}}class wH extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.userId=this.getResponseProperty("UserId"),this.revisionDate=new Date(this.getResponseProperty("RevisionDate"))}}class IH extends yg.c{constructor(e){super(e),this.userId=this.getResponseProperty("UserId"),this.date=new Date(this.getResponseProperty("Date"))}}class CH extends yg.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.userId=this.getResponseProperty("UserId"),this.revisionDate=new Date(this.getResponseProperty("RevisionDate"))}}var EH=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};var kH=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};var PH=n(16152);class AH{constructor(e,t){this.password=e,this.date=t}}class OH extends _e.Z{constructor(){super(...arguments),this.defaultType="",this.minLength=0,this.useUppercase=!1,this.useLowercase=!1,this.useNumbers=!1,this.numberCount=0,this.useSpecial=!1,this.specialCount=0,this.minNumberWords=0,this.capitalize=!1,this.includeNumber=!1}inEffect(){return""!==this.defaultType||this.minLength>0||this.numberCount>0||this.specialCount>0||this.useUppercase||this.useLowercase||this.useNumbers||this.useSpecial||this.minNumberWords>0||this.capitalize||this.includeNumber}}var TH=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const BH={length:14,ambiguous:!1,number:!0,minNumber:1,uppercase:!0,minUppercase:0,lowercase:!0,minLowercase:0,special:!1,minSpecial:1,type:"password",numWords:3,wordSeparator:"-",capitalize:!1,includeNumber:!1};class MH extends _e.Z{constructor(){super(...arguments),this.autoEnrollEnabled=!1}}var DH,FH,RH=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};!function(e){e[e.Invited=0]="Invited",e[e.Accepted=1]="Accepted",e[e.Confirmed=2]="Confirmed",e[e.Deactivated=-1]="Deactivated"}(DH||(DH={})),function(e){e[e.ProviderAdmin=0]="ProviderAdmin",e[e.ServiceUser=1]="ServiceUser"}(FH||(FH={}));class UH{constructor(e){null!=e&&(this.id=e.id,this.name=e.name,this.status=e.status,this.type=e.type,this.enabled=e.enabled,this.userId=e.userId,this.useEvents=e.useEvents)}get canAccess(){return!!this.isProviderAdmin||this.enabled&&this.status===DH.Confirmed}get canCreateOrganizations(){return this.enabled&&this.isProviderAdmin}get canManageUsers(){return this.isProviderAdmin}get canAccessEventLogs(){return this.isProviderAdmin}get isProviderAdmin(){return this.type===FH.ProviderAdmin}}var zH=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};var NH=n(38437),VH=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class HH{constructor(e,t,n){this.cipherService=e,this.logService=t,this.i18nService=n,this.indexedEntityId=null,this.indexing=!1,this.index=null,this.immediateSearchLocales=["zh-CN","zh-TW","ja","ko","vi"],this.defaultSearchableMinLength=2,this.searchableMinLength=this.defaultSearchableMinLength,this.i18nService.locale$.subscribe((e=>{-1!==this.immediateSearchLocales.indexOf(e)?this.searchableMinLength=1:this.searchableMinLength=this.defaultSearchableMinLength})),NH.Pipeline.registerFunction(this.normalizeAccentsPipelineFunction,"normalizeAccents")}clearIndex(){this.indexedEntityId=null,this.index=null}isSearchable(e){return!(null==(e=HH.normalizeSearchQuery(e))||null==this.index&&e.length<this.searchableMinLength||null!=this.index&&e.length<this.searchableMinLength&&0!==e.indexOf(">"))}indexCiphers(e,t){return VH(this,void 0,void 0,(function*(){if(this.indexing)return;this.logService.time("search indexing"),this.indexing=!0,this.indexedEntityId=e,this.index=null;const n=new NH.Builder;n.pipeline.add(this.normalizeAccentsPipelineFunction),n.ref("id"),n.field("shortid",{boost:100,extractor:e=>e.id.substr(0,8)}),n.field("name",{boost:10}),n.field("subtitle",{boost:5,extractor:e=>null!=e.subTitle&&e.type===jr.O.Card?e.subTitle.replace(/\*/g,""):e.subTitle}),n.field("notes"),n.field("login.username",{extractor:e=>e.type===jr.O.Login&&null!=e.login?e.login.username:null}),n.field("login.uris",{boost:2,extractor:e=>this.uriExtractor(e)}),n.field("fields",{extractor:e=>this.fieldExtractor(e,!1)}),n.field("fields_joined",{extractor:e=>this.fieldExtractor(e,!0)}),n.field("attachments",{extractor:e=>this.attachmentExtractor(e,!1)}),n.field("attachments_joined",{extractor:e=>this.attachmentExtractor(e,!0)}),n.field("organizationid",{extractor:e=>e.organizationId}),(t=t||(yield this.cipherService.getAllDecrypted())).forEach((e=>n.add(e))),this.index=n.build(),this.indexing=!1,this.logService.timeEnd("search indexing")}))}searchCiphers(e,t=null,n=null){return VH(this,void 0,void 0,(function*(){const i=[];if(null!=e&&(e=HH.normalizeSearchQuery(e.trim().toLowerCase())),""===e&&(e=null),null==n&&(n=yield this.cipherService.getAllDecrypted()),null!=t&&Array.isArray(t)&&t.length>0?n=n.filter((e=>t.every((t=>null==t||t(e))))):null!=t&&(n=n.filter(t)),!this.isSearchable(e))return n;this.indexing&&(yield new Promise((e=>setTimeout(e,250))),this.indexing&&(yield new Promise((e=>setTimeout(e,500)))));const r=this.getIndexForSearch();if(null==r)return this.searchCiphersBasic(n,e);const o=new Map;n.forEach((e=>o.set(e.id,e)));let a=null;if(null!=e&&e.length>1&&0===e.indexOf(">"))try{a=r.search(e.substr(1).trim())}catch(s){this.logService.error(s)}else{const t=NH.Query.wildcard.LEADING|NH.Query.wildcard.TRAILING;a=r.query((n=>{NH.tokenizer(e).forEach((e=>{const i=e.toString();n.term(i,{fields:["name"],wildcard:t}),n.term(i,{fields:["subtitle"],wildcard:t}),n.term(i,{fields:["login.uris"],wildcard:t}),n.term(i,{})}))}))}return null!=a&&a.forEach((e=>{o.has(e.ref)&&i.push(o.get(e.ref))})),i}))}searchCiphersBasic(e,t,n=!1){return t=HH.normalizeSearchQuery(t.trim().toLowerCase()),e.filter((e=>n===e.isDeleted&&(null!=e.name&&e.name.toLowerCase().indexOf(t)>-1||(!!(t.length>=8&&e.id.startsWith(t))||(null!=e.subTitle&&e.subTitle.toLowerCase().indexOf(t)>-1||!!(e.login&&e.login.hasUris&&e.login.uris.some((e=>e.uri.toLowerCase().indexOf(t)>-1))))))))}searchSends(e,t){if(null===(t=HH.normalizeSearchQuery(t.trim().toLocaleLowerCase())))return e;const n=[],i=[];return e.forEach((e=>{var r,o,a;null!=e.name&&e.name.toLowerCase().indexOf(t)>-1?n.push(e):(t.length>=8&&(e.id.startsWith(t)||e.accessId.toLocaleLowerCase().startsWith(t)||null!=(null===(r=e.file)||void 0===r?void 0:r.id)&&e.file.id.startsWith(t))||null!=e.notes&&e.notes.toLowerCase().indexOf(t)>-1||null!=(null===(o=e.text)||void 0===o?void 0:o.text)&&e.text.text.toLowerCase().indexOf(t)>-1||null!=(null===(a=e.file)||void 0===a?void 0:a.fileName)&&e.file.fileName.toLowerCase().indexOf(t)>-1)&&i.push(e)})),n.concat(i)}getIndexForSearch(){return this.index}fieldExtractor(e,t){if(!e.hasFields)return null;let n=[];return e.fields.forEach((e=>{null!=e.name&&n.push(e.name),e.type===ro.f.Text&&null!=e.value&&n.push(e.value)})),n=n.filter((e=>""!==e.trim())),0===n.length?null:t?n.join(" "):n}attachmentExtractor(e,t){if(!e.hasAttachments)return null;let n=[];return e.attachments.forEach((e=>{null!=e&&null!=e.fileName&&(t&&e.fileName.indexOf(".")>-1?n.push(e.fileName.substr(0,e.fileName.lastIndexOf("."))):n.push(e.fileName))})),n=n.filter((e=>""!==e.trim())),0===n.length?null:t?n.join(" "):n}uriExtractor(e){if(e.type!==jr.O.Login||null==e.login||!e.login.hasUris)return null;const t=[];return e.login.uris.forEach((e=>{if(null==e.uri||""===e.uri)return;if(null!=e.hostname)return void t.push(e.hostname);let n=e.uri;if(e.match!==qr.I.RegularExpression){const e=n.indexOf("://");e>-1&&(n=n.substr(e+3));const t=n.search(/\?|&|#/);t>-1&&(n=n.substring(0,t))}t.push(n)})),t.length>0?t:null}normalizeAccentsPipelineFunction(e){const t=["name","login.username","subtitle","notes"];return e.metadata.fields.every((e=>t.includes(e)))?HH.normalizeSearchQuery(e.toString()):e}static normalizeSearchQuery(e){return null==e?void 0:e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}}class jH{constructor(e){null!=e&&(this.id=e.id,this.fileName=e.fileName,this.size=e.size,this.sizeName=e.sizeName)}}class LH{constructor(e){null!=e&&(this.text=e.text,this.hidden=e.hidden)}}class KH{constructor(e){if(null!=e)switch(this.id=e.id,this.accessId=e.accessId,this.type=e.type,this.name=e.name,this.notes=e.notes,this.key=e.key,this.maxAccessCount=e.maxAccessCount,this.accessCount=e.accessCount,this.revisionDate=e.revisionDate,this.expirationDate=e.expirationDate,this.deletionDate=e.deletionDate,this.password=e.password,this.disabled=e.disable,this.hideEmail=e.hideEmail,this.type){case tA.Text:this.text=new LH(e.text);break;case tA.File:this.file=new jH(e.file)}}}var GH=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class qH extends _e.Z{constructor(e){if(super(),null!=e)switch(this.buildDomainModel(this,e,{id:null,accessId:null,name:null,notes:null,key:null},["id","accessId"]),this.type=e.type,this.maxAccessCount=e.maxAccessCount,this.accessCount=e.accessCount,this.password=e.password,this.disabled=e.disabled,this.revisionDate=null!=e.revisionDate?new Date(e.revisionDate):null,this.deletionDate=null!=e.deletionDate?new Date(e.deletionDate):null,this.expirationDate=null!=e.expirationDate?new Date(e.expirationDate):null,this.hideEmail=e.hideEmail,this.type){case tA.Text:this.text=new sA(e.text);break;case tA.File:this.file=new aA(e.file)}}decrypt(){return GH(this,void 0,void 0,(function*(){const e=new BA(this);let t;const n=N.c.global.bitwardenContainerService;if(!n)throw new Error("global bitwardenContainerService not initialized.");t=n.getCryptoService();try{e.key=yield t.decryptToBytes(this.key,null),e.cryptoKey=yield t.makeSendKey(e.key)}catch(i){}switch(yield this.decryptObj(e,{name:null,notes:null},null,e.cryptoKey),this.type){case tA.File:e.file=yield this.file.decrypt(e.cryptoKey);break;case tA.Text:e.text=yield this.text.decrypt(e.cryptoKey)}return e}))}}var _H=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};var $H=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const WH="equivalentDomains";var QH;!function(e){e.Both="both",e.Disk="disk",e.Memory="memory"}(QH||(QH={}));class YH{constructor(e){this.id=e.id,this.name=e.name,this.status=e.status,this.type=e.type,this.enabled=e.enabled,this.userId=e.userId,this.useEvents=e.useEvents}}class ZH{constructor(e){this.accounts={},this.authenticatedAccounts=[],this.accountActivity={},this.globals=e}}var JH=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},XH=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ej=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const tj="state",nj="global",ij="authenticatedAccounts",rj="activeUserId",oj="tempAccountSettings",aj="accountActivity",sj="_masterkey_auto",lj="_masterkey_biometric",dj="_masterkey";class cj{constructor(e,t,n,i,r,o,a=!0){this.storageService=e,this.secureStorageService=t,this.memoryStorageService=n,this.logService=i,this.stateMigrationService=r,this.stateFactory=o,this.useAccountCache=a,this.accounts=new FU.X({}),this.activeAccount=new FU.X(null),this.hasBeenInited=!1,this.isRecoveredSession=!1,this.accountDiskCache=new Map}init(){return ej(this,void 0,void 0,(function*(){this.hasBeenInited||((yield this.stateMigrationService.needsMigration())&&(yield this.stateMigrationService.migrate()),yield this.state().then((e=>ej(this,void 0,void 0,(function*(){null==e?yield this.setState(new ZH(this.createGlobals())):this.isRecoveredSession=!0})))),yield this.initAccountState(),this.hasBeenInited=!0)}))}initAccountState(){return ej(this,void 0,void 0,(function*(){this.isRecoveredSession||(yield this.updateState((e=>ej(this,void 0,void 0,(function*(){var t;e.authenticatedAccounts=null!==(t=yield this.storageService.get(ij))&&void 0!==t?t:[];for(const i in e.authenticatedAccounts)null!=i&&(yield this.syncAccountFromDisk(e.authenticatedAccounts[i]));const n=yield this.storageService.get(rj);return null!=n&&(e.activeUserId=n),yield this.pushAccounts(),this.activeAccount.next(e.activeUserId),e})))))}))}syncAccountFromDisk(e){return ej(this,void 0,void 0,(function*(){null!=e&&(yield this.updateState((t=>ej(this,void 0,void 0,(function*(){t.accounts[e]=this.createAccount();const n=yield this.getAccountFromDisk({userId:e});return t.accounts[e].profile=n.profile,t})))))}))}addAccount(e){return ej(this,void 0,void 0,(function*(){e=yield this.setAccountEnvironmentUrls(e),yield this.updateState((t=>ej(this,void 0,void 0,(function*(){return t.authenticatedAccounts.push(e.profile.userId),yield this.storageService.save(ij,t.authenticatedAccounts),t.accounts[e.profile.userId]=e,t})))),yield this.scaffoldNewAccountStorage(e),yield this.setLastActive((new Date).getTime(),{userId:e.profile.userId}),yield this.setActiveUser(e.profile.userId),this.activeAccount.next(e.profile.userId)}))}setActiveUser(e){return ej(this,void 0,void 0,(function*(){this.clearDecryptedDataForActiveUser(),yield this.updateState((t=>ej(this,void 0,void 0,(function*(){return t.activeUserId=e,yield this.storageService.save(rj,e),this.activeAccount.next(t.activeUserId),t})))),yield this.pushAccounts()}))}clean(e){var t;return ej(this,void 0,void 0,(function*(){e=this.reconcileOptions(e,yield this.defaultInMemoryOptions()),yield this.deAuthenticateAccount(e.userId),e.userId===(null===(t=yield this.state())||void 0===t?void 0:t.activeUserId)&&(yield this.dynamicallySetActiveUser()),yield this.removeAccountFromDisk(null==e?void 0:e.userId),this.removeAccountFromMemory(null==e?void 0:e.userId),yield this.pushAccounts()}))}getAccessToken(e){var t,n;return ej(this,void 0,void 0,(function*(){return e=yield this.getTimeoutBasedStorageOptions(e),null===(n=null===(t=yield this.getAccount(e))||void 0===t?void 0:t.tokens)||void 0===n?void 0:n.accessToken}))}setAccessToken(e,t){return ej(this,void 0,void 0,(function*(){t=yield this.getTimeoutBasedStorageOptions(t);const n=yield this.getAccount(t);n.tokens.accessToken=e,yield this.saveAccount(n,t)}))}getAddEditCipherInfo(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.data)||void 0===n?void 0:n.addEditCipherInfo}))}setAddEditCipherInfo(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.data.addEditCipherInfo=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getAlwaysShowDock(e){var t,n;return ej(this,void 0,void 0,(function*(){return null!==(n=null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.alwaysShowDock)&&void 0!==n&&n}))}setAlwaysShowDock(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.alwaysShowDock=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getApiKeyClientId(e){var t,n;return ej(this,void 0,void 0,(function*(){return e=yield this.getTimeoutBasedStorageOptions(e),null===(n=null===(t=yield this.getAccount(e))||void 0===t?void 0:t.profile)||void 0===n?void 0:n.apiKeyClientId}))}setApiKeyClientId(e,t){return ej(this,void 0,void 0,(function*(){t=yield this.getTimeoutBasedStorageOptions(t);const n=yield this.getAccount(t);n.profile.apiKeyClientId=e,yield this.saveAccount(n,t)}))}getApiKeyClientSecret(e){var t,n;return ej(this,void 0,void 0,(function*(){return e=yield this.getTimeoutBasedStorageOptions(e),null===(n=null===(t=yield this.getAccount(e))||void 0===t?void 0:t.keys)||void 0===n?void 0:n.apiKeyClientSecret}))}setApiKeyClientSecret(e,t){return ej(this,void 0,void 0,(function*(){t=yield this.getTimeoutBasedStorageOptions(t);const n=yield this.getAccount(t);n.keys.apiKeyClientSecret=e,yield this.saveAccount(n,t)}))}getAutoConfirmFingerPrints(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.autoConfirmFingerPrints)&&void 0!==i&&i}))}setAutoConfirmFingerprints(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.autoConfirmFingerPrints=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getAutoFillOnPageLoadDefault(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null===(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.autoFillOnPageLoadDefault)||void 0===i||i}))}setAutoFillOnPageLoadDefault(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.autoFillOnPageLoadDefault=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getBiometricAwaitingAcceptance(e){var t,n;return ej(this,void 0,void 0,(function*(){return null!==(n=null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.biometricAwaitingAcceptance)&&void 0!==n&&n}))}setBiometricAwaitingAcceptance(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.biometricAwaitingAcceptance=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getBiometricFingerprintValidated(e){var t,n;return ej(this,void 0,void 0,(function*(){return null!==(n=null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.biometricFingerprintValidated)&&void 0!==n&&n}))}setBiometricFingerprintValidated(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.biometricFingerprintValidated=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getBiometricLocked(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.biometricLocked)&&void 0!==i&&i}))}setBiometricLocked(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.settings.biometricLocked=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getBiometricText(e){var t;return ej(this,void 0,void 0,(function*(){return null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.biometricText}))}setBiometricText(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.biometricText=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getBiometricUnlock(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.biometricUnlock)&&void 0!==i&&i}))}setBiometricUnlock(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.biometricUnlock=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getCanAccessPremium(e){return ej(this,void 0,void 0,(function*(){return!!(yield this.getIsAuthenticated(e))&&((yield this.getHasPremiumPersonally(e))||(yield this.getHasPremiumFromOrganization(e)))}))}getHasPremiumPersonally(e){var t;return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions()));return null===(t=null==n?void 0:n.profile)||void 0===t?void 0:t.hasPremiumPersonally}))}setHasPremiumPersonally(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.profile.hasPremiumPersonally=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getHasPremiumFromOrganization(e){var t;return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions()));if(null===(t=n.profile)||void 0===t?void 0:t.hasPremiumFromOrganization)return!0;const i=yield this.getOrganizations(e);if(null==i)return!1;for(const e of Object.keys(i)){const t=i[e];if(t.enabled&&t.usersGetPremium&&!t.isProviderUser)return!0}return!1}))}setHasPremiumFromOrganization(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.profile.hasPremiumFromOrganization=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getClearClipboard(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.clearClipboard)&&void 0!==i?i:null}))}setClearClipboard(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.settings.clearClipboard=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getCollapsedGroupings(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.collapsedGroupings}))}setCollapsedGroupings(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.settings.collapsedGroupings=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getConvertAccountToKeyConnector(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.profile)||void 0===n?void 0:n.convertAccountToKeyConnector}))}setConvertAccountToKeyConnector(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.profile.convertAccountToKeyConnector=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getCryptoMasterKey(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.keys)||void 0===n?void 0:n.cryptoMasterKey}))}setCryptoMasterKey(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.keys.cryptoMasterKey=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getCryptoMasterKeyAuto(e){return ej(this,void 0,void 0,(function*(){return null==(null==(e=this.reconcileOptions(this.reconcileOptions(e,{keySuffix:"auto"}),yield this.defaultSecureStorageOptions()))?void 0:e.userId)?null:yield this.secureStorageService.get(`${e.userId}${sj}`,e)}))}setCryptoMasterKeyAuto(e,t){return ej(this,void 0,void 0,(function*(){null!=(null==(t=this.reconcileOptions(this.reconcileOptions(t,{keySuffix:"auto"}),yield this.defaultSecureStorageOptions()))?void 0:t.userId)&&(yield this.saveSecureStorageKey(sj,e,t))}))}getCryptoMasterKeyB64(e){return ej(this,void 0,void 0,(function*(){return null==(null==(e=this.reconcileOptions(e,yield this.defaultSecureStorageOptions()))?void 0:e.userId)?null:yield this.secureStorageService.get(`${null==e?void 0:e.userId}${dj}`,e)}))}setCryptoMasterKeyB64(e,t){return ej(this,void 0,void 0,(function*(){null!=(null==(t=this.reconcileOptions(t,yield this.defaultSecureStorageOptions()))?void 0:t.userId)&&(yield this.saveSecureStorageKey(dj,e,t))}))}getCryptoMasterKeyBiometric(e){return ej(this,void 0,void 0,(function*(){return null==(null==(e=this.reconcileOptions(this.reconcileOptions(e,{keySuffix:"biometric"}),yield this.defaultSecureStorageOptions()))?void 0:e.userId)?null:yield this.secureStorageService.get(`${e.userId}${lj}`,e)}))}hasCryptoMasterKeyBiometric(e){return ej(this,void 0,void 0,(function*(){return null!=(null==(e=this.reconcileOptions(this.reconcileOptions(e,{keySuffix:"biometric"}),yield this.defaultSecureStorageOptions()))?void 0:e.userId)&&(yield this.secureStorageService.has(`${e.userId}${lj}`,e))}))}setCryptoMasterKeyBiometric(e,t){return ej(this,void 0,void 0,(function*(){null!=(null==(t=this.reconcileOptions(this.reconcileOptions(t,{keySuffix:"biometric"}),yield this.defaultSecureStorageOptions()))?void 0:t.userId)&&(yield this.saveSecureStorageKey(lj,e,t))}))}getDecodedToken(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.tokens)||void 0===n?void 0:n.decodedToken}))}setDecodedToken(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.tokens.decodedToken=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getDecryptedCiphers(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null===(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.data)||void 0===n?void 0:n.ciphers)||void 0===i?void 0:i.decrypted}))}setDecryptedCiphers(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.data.ciphers.decrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getDecryptedCollections(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null===(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.data)||void 0===n?void 0:n.collections)||void 0===i?void 0:i.decrypted}))}setDecryptedCollections(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.data.collections.decrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getDecryptedCryptoSymmetricKey(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null===(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.keys)||void 0===n?void 0:n.cryptoSymmetricKey)||void 0===i?void 0:i.decrypted}))}setDecryptedCryptoSymmetricKey(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.keys.cryptoSymmetricKey.decrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getDecryptedOrganizationKeys(e){var t,n;return ej(this,void 0,void 0,(function*(){const i=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions()));return null===(n=null===(t=null==i?void 0:i.keys)||void 0===t?void 0:t.organizationKeys)||void 0===n?void 0:n.decrypted}))}setDecryptedOrganizationKeys(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.keys.organizationKeys.decrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getDecryptedPasswordGenerationHistory(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null===(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.data)||void 0===n?void 0:n.passwordGenerationHistory)||void 0===i?void 0:i.decrypted}))}setDecryptedPasswordGenerationHistory(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.data.passwordGenerationHistory.decrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getDecryptedPinProtected(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null===(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.pinProtected)||void 0===i?void 0:i.decrypted}))}setDecryptedPinProtected(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.settings.pinProtected.decrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getDecryptedPolicies(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null===(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.data)||void 0===n?void 0:n.policies)||void 0===i?void 0:i.decrypted}))}setDecryptedPolicies(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.data.policies.decrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getDecryptedPrivateKey(e){var t,n;return ej(this,void 0,void 0,(function*(){const i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.keys)||void 0===n?void 0:n.privateKey;let r=null==i?void 0:i.decrypted;return null==r&&null!=(null==i?void 0:i.decryptedSerialized)&&(r=N.c.fromByteStringToArray(i.decryptedSerialized)),r}))}setDecryptedPrivateKey(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.keys.privateKey.decrypted=e,n.keys.privateKey.decryptedSerialized=null==e?null:N.c.fromBufferToByteString(e),yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getDecryptedProviderKeys(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null===(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.keys)||void 0===n?void 0:n.providerKeys)||void 0===i?void 0:i.decrypted}))}setDecryptedProviderKeys(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.keys.providerKeys.decrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getDecryptedSends(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null===(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.data)||void 0===n?void 0:n.sends)||void 0===i?void 0:i.decrypted}))}setDecryptedSends(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.data.sends.decrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getDefaultUriMatch(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.defaultUriMatch}))}setDefaultUriMatch(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.defaultUriMatch=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getDisableAddLoginNotification(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.disableAddLoginNotification)&&void 0!==i&&i}))}setDisableAddLoginNotification(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.disableAddLoginNotification=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getDisableAutoBiometricsPrompt(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.disableAutoBiometricsPrompt)&&void 0!==i&&i}))}setDisableAutoBiometricsPrompt(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.disableAutoBiometricsPrompt=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getDisableAutoTotpCopy(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.disableAutoTotpCopy)&&void 0!==i&&i}))}setDisableAutoTotpCopy(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.disableAutoTotpCopy=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getDisableBadgeCounter(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.disableBadgeCounter)&&void 0!==i&&i}))}setDisableBadgeCounter(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.disableBadgeCounter=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getDisableChangedPasswordNotification(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.disableChangedPasswordNotification)&&void 0!==i&&i}))}setDisableChangedPasswordNotification(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.disableChangedPasswordNotification=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getDisableContextMenuItem(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.disableContextMenuItem)&&void 0!==i&&i}))}setDisableContextMenuItem(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.disableContextMenuItem=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getDisableFavicon(e){var t,n;return ej(this,void 0,void 0,(function*(){return null!==(n=null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.disableFavicon)&&void 0!==n&&n}))}setDisableFavicon(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.disableFavicon=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getDisableGa(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.disableGa)&&void 0!==i&&i}))}setDisableGa(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.disableGa=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getDontShowCardsCurrentTab(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.dontShowCardsCurrentTab)&&void 0!==i&&i}))}setDontShowCardsCurrentTab(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.dontShowCardsCurrentTab=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getDontShowIdentitiesCurrentTab(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.dontShowIdentitiesCurrentTab)&&void 0!==i&&i}))}setDontShowIdentitiesCurrentTab(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.dontShowIdentitiesCurrentTab=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEmail(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.profile)||void 0===n?void 0:n.email}))}setEmail(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.profile.email=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getEmailVerified(e){var t,n;return ej(this,void 0,void 0,(function*(){return null!==(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.profile.emailVerified)&&void 0!==n&&n}))}setEmailVerified(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.profile.emailVerified=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEnableAlwaysOnTop(e){var t,n,i,r;return ej(this,void 0,void 0,(function*(){const o=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.enableAlwaysOnTop,a=null===(i=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===i?void 0:i.enableAlwaysOnTop;return null!==(r=null!=o?o:a)&&void 0!==r&&r}))}setEnableAlwaysOnTop(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.enableAlwaysOnTop=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()));const i=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));i.enableAlwaysOnTop=e,yield this.saveGlobals(i,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEnableAutoFillOnPageLoad(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.enableAutoFillOnPageLoad)&&void 0!==i&&i}))}setEnableAutoFillOnPageLoad(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.enableAutoFillOnPageLoad=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEnableBiometric(e){var t,n;return ej(this,void 0,void 0,(function*(){return null!==(n=null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.enableBiometrics)&&void 0!==n&&n}))}setEnableBiometric(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.enableBiometrics=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEnableBrowserIntegration(e){var t,n;return ej(this,void 0,void 0,(function*(){return null!==(n=null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.enableBrowserIntegration)&&void 0!==n&&n}))}setEnableBrowserIntegration(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.enableBrowserIntegration=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEnableBrowserIntegrationFingerprint(e){var t,n;return ej(this,void 0,void 0,(function*(){return null!==(n=null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.enableBrowserIntegrationFingerprint)&&void 0!==n&&n}))}setEnableBrowserIntegrationFingerprint(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.enableBrowserIntegrationFingerprint=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEnableCloseToTray(e){var t,n;return ej(this,void 0,void 0,(function*(){return null!==(n=null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.enableCloseToTray)&&void 0!==n&&n}))}setEnableCloseToTray(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.enableCloseToTray=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEnableFullWidth(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.enableFullWidth)&&void 0!==i&&i}))}setEnableFullWidth(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.settings.enableFullWidth=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getEnableGravitars(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.enableGravitars)&&void 0!==i&&i}))}setEnableGravitars(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.settings.enableGravitars=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getEnableMinimizeToTray(e){var t,n;return ej(this,void 0,void 0,(function*(){return null!==(n=null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.enableMinimizeToTray)&&void 0!==n&&n}))}setEnableMinimizeToTray(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.enableMinimizeToTray=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEnableStartToTray(e){var t,n;return ej(this,void 0,void 0,(function*(){return null!==(n=null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.enableStartToTray)&&void 0!==n&&n}))}setEnableStartToTray(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.enableStartToTray=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEnableTray(e){var t,n;return ej(this,void 0,void 0,(function*(){return null!==(n=null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.enableTray)&&void 0!==n&&n}))}setEnableTray(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.enableTray=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEncryptedCiphers(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null===(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskMemoryOptions())))||void 0===t?void 0:t.data)||void 0===n?void 0:n.ciphers)||void 0===i?void 0:i.encrypted}))}setEncryptedCiphers(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskMemoryOptions()));n.data.ciphers.encrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskMemoryOptions()))}))}getEncryptedCollections(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null===(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskMemoryOptions())))||void 0===t?void 0:t.data)||void 0===n?void 0:n.collections)||void 0===i?void 0:i.encrypted}))}setEncryptedCollections(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskMemoryOptions()));n.data.collections.encrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskMemoryOptions()))}))}getEncryptedCryptoSymmetricKey(e){var t;return ej(this,void 0,void 0,(function*(){return null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.keys.cryptoSymmetricKey.encrypted}))}setEncryptedCryptoSymmetricKey(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.keys.cryptoSymmetricKey.encrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEncryptedFolders(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null===(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskMemoryOptions())))||void 0===t?void 0:t.data)||void 0===n?void 0:n.folders)||void 0===i?void 0:i.encrypted}))}setEncryptedFolders(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskMemoryOptions()));n.data.folders.encrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskMemoryOptions()))}))}getEncryptedOrganizationKeys(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.keys)||void 0===n?void 0:n.organizationKeys.encrypted}))}setEncryptedOrganizationKeys(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.keys.organizationKeys.encrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEncryptedPasswordGenerationHistory(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null===(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.data)||void 0===n?void 0:n.passwordGenerationHistory)||void 0===i?void 0:i.encrypted}))}setEncryptedPasswordGenerationHistory(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.data.passwordGenerationHistory.encrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEncryptedPinProtected(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null===(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.pinProtected)||void 0===i?void 0:i.encrypted}))}setEncryptedPinProtected(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.pinProtected.encrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEncryptedPolicies(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null===(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.data)||void 0===n?void 0:n.policies)||void 0===i?void 0:i.encrypted}))}setEncryptedPolicies(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.data.policies.encrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEncryptedPrivateKey(e){var t,n;return ej(this,void 0,void 0,(function*(){const i=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions()));return null===(n=null===(t=null==i?void 0:i.keys)||void 0===t?void 0:t.privateKey)||void 0===n?void 0:n.encrypted}))}setEncryptedPrivateKey(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.keys.privateKey.encrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEncryptedProviderKeys(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null===(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.keys)||void 0===n?void 0:n.providerKeys)||void 0===i?void 0:i.encrypted}))}setEncryptedProviderKeys(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.keys.providerKeys.encrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEncryptedSends(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskMemoryOptions())))||void 0===t?void 0:t.data)||void 0===n?void 0:n.sends.encrypted}))}setEncryptedSends(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskMemoryOptions()));n.data.sends.encrypted=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskMemoryOptions()))}))}getEntityId(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.profile)||void 0===n?void 0:n.entityId}))}setEntityId(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.profile.entityId=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getEntityType(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.profile)||void 0===n?void 0:n.entityType}))}setEntityType(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.profile.entityType=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getEnvironmentUrls(e){var t,n,i,r;return ej(this,void 0,void 0,(function*(){return null==(null===(t=yield this.state())||void 0===t?void 0:t.activeUserId)?yield this.getGlobalEnvironmentUrls(e):(e=this.reconcileOptions(e,yield this.defaultOnDiskOptions()),null!==(r=null===(i=null===(n=yield this.getAccount(e))||void 0===n?void 0:n.settings)||void 0===i?void 0:i.environmentUrls)&&void 0!==r?r:new tz)}))}setEnvironmentUrls(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.environmentUrls=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEquivalentDomains(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.equivalentDomains}))}setEquivalentDomains(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.equivalentDomains=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEventCollection(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.data)||void 0===n?void 0:n.eventCollection}))}setEventCollection(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.data.eventCollection=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getEverBeenUnlocked(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.profile)||void 0===n?void 0:n.everBeenUnlocked)&&void 0!==i&&i}))}setEverBeenUnlocked(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.profile.everBeenUnlocked=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getForcePasswordReset(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.profile)||void 0===n?void 0:n.forcePasswordReset)&&void 0!==i&&i}))}setForcePasswordReset(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.profile.forcePasswordReset=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getInstalledVersion(e){var t;return ej(this,void 0,void 0,(function*(){return null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.installedVersion}))}setInstalledVersion(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.installedVersion=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getIsAuthenticated(e){return ej(this,void 0,void 0,(function*(){return null!=(yield this.getAccessToken(e))&&null!=(yield this.getUserId(e))}))}getKdfIterations(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.profile)||void 0===n?void 0:n.kdfIterations}))}setKdfIterations(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.profile.kdfIterations=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getKdfType(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.profile)||void 0===n?void 0:n.kdfType}))}setKdfType(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.profile.kdfType=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getKeyHash(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.profile)||void 0===n?void 0:n.keyHash}))}setKeyHash(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.profile.keyHash=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getLastActive(e){return ej(this,void 0,void 0,(function*(){e=this.reconcileOptions(e,yield this.defaultOnDiskOptions());const t=yield this.storageService.get(aj,e);return null==t||Object.keys(t).length<1?null:t[e.userId]}))}setLastActive(e,t){var n;return ej(this,void 0,void 0,(function*(){if(null==(t=this.reconcileOptions(t,yield this.defaultOnDiskOptions())).userId)return;const i=null!==(n=yield this.storageService.get(aj,t))&&void 0!==n?n:{};i[t.userId]=e,yield this.storageService.save(aj,i,t)}))}getLastSync(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskMemoryOptions())))||void 0===t?void 0:t.profile)||void 0===n?void 0:n.lastSync}))}setLastSync(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskMemoryOptions()));n.profile.lastSync=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskMemoryOptions()))}))}getLegacyEtmKey(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.keys)||void 0===n?void 0:n.legacyEtmKey}))}setLegacyEtmKey(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.keys.legacyEtmKey=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getLocalData(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.data)||void 0===n?void 0:n.localData}))}setLocalData(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.data.localData=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getLocale(e){var t;return ej(this,void 0,void 0,(function*(){return null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.locale}))}setLocale(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.locale=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getMainWindowSize(e){var t;return ej(this,void 0,void 0,(function*(){return null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.mainWindowSize}))}setMainWindowSize(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.mainWindowSize=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getMinimizeOnCopyToClipboard(e){var t,n,i;return ej(this,void 0,void 0,(function*(){return null!==(i=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.minimizeOnCopyToClipboard)&&void 0!==i&&i}))}setMinimizeOnCopyToClipboard(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.minimizeOnCopyToClipboard=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getNeverDomains(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.neverDomains}))}setNeverDomains(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.neverDomains=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getNoAutoPromptBiometrics(e){var t,n;return ej(this,void 0,void 0,(function*(){return null!==(n=null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.noAutoPromptBiometrics)&&void 0!==n&&n}))}setNoAutoPromptBiometrics(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.noAutoPromptBiometrics=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getNoAutoPromptBiometricsText(e){var t;return ej(this,void 0,void 0,(function*(){return null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.noAutoPromptBiometricsText}))}setNoAutoPromptBiometricsText(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.noAutoPromptBiometricsText=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getOpenAtLogin(e){var t,n;return ej(this,void 0,void 0,(function*(){return null!==(n=null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.openAtLogin)&&void 0!==n&&n}))}setOpenAtLogin(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.openAtLogin=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getOrganizationInvitation(e){var t;return ej(this,void 0,void 0,(function*(){return null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.organizationInvitation}))}setOrganizationInvitation(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.organizationInvitation=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getOrganizations(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.data)||void 0===n?void 0:n.organizations}))}setOrganizations(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.data.organizations=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getPasswordGenerationOptions(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.passwordGenerationOptions}))}setPasswordGenerationOptions(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.settings.passwordGenerationOptions=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getUsernameGenerationOptions(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.usernameGenerationOptions}))}setUsernameGenerationOptions(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.settings.usernameGenerationOptions=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getGeneratorOptions(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.generatorOptions}))}setGeneratorOptions(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.settings.generatorOptions=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getProtectedPin(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.protectedPin}))}setProtectedPin(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.settings.protectedPin=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getProviders(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.data)||void 0===n?void 0:n.providers}))}setProviders(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.data.providers=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getPublicKey(e){var t;return ej(this,void 0,void 0,(function*(){const n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.keys;let i=null==n?void 0:n.publicKey;return null==i&&null!=(null==n?void 0:n.publicKeySerialized)&&(i=N.c.fromByteStringToArray(n.publicKeySerialized)),i}))}setPublicKey(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.keys.publicKey=e,n.keys.publicKeySerialized=null==e?null:N.c.fromBufferToByteString(e),yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getRefreshToken(e){var t,n;return ej(this,void 0,void 0,(function*(){return e=yield this.getTimeoutBasedStorageOptions(e),null===(n=null===(t=yield this.getAccount(e))||void 0===t?void 0:t.tokens)||void 0===n?void 0:n.refreshToken}))}setRefreshToken(e,t){return ej(this,void 0,void 0,(function*(){t=yield this.getTimeoutBasedStorageOptions(t);const n=yield this.getAccount(t);n.tokens.refreshToken=e,yield this.saveAccount(n,t)}))}getRememberedEmail(e){var t;return ej(this,void 0,void 0,(function*(){return null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.rememberedEmail}))}setRememberedEmail(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.rememberedEmail=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getSecurityStamp(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultInMemoryOptions())))||void 0===t?void 0:t.tokens)||void 0===n?void 0:n.securityStamp}))}setSecurityStamp(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultInMemoryOptions()));n.tokens.securityStamp=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultInMemoryOptions()))}))}getSettings(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskMemoryOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.settings}))}setSettings(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskMemoryOptions()));n.settings.settings=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskMemoryOptions()))}))}getSsoCodeVerifier(e){var t;return ej(this,void 0,void 0,(function*(){return null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.ssoCodeVerifier}))}setSsoCodeVerifier(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.ssoCodeVerifier=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getSsoOrgIdentifier(e){var t;return ej(this,void 0,void 0,(function*(){return null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.ssoOrganizationIdentifier}))}setSsoOrganizationIdentifier(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.ssoOrganizationIdentifier=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getSsoState(e){var t;return ej(this,void 0,void 0,(function*(){return null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.ssoState}))}setSsoState(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.ssoState=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getTheme(e){var t;return ej(this,void 0,void 0,(function*(){return null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.theme}))}setTheme(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.theme=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getTwoFactorToken(e){var t;return ej(this,void 0,void 0,(function*(){return null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.twoFactorToken}))}setTwoFactorToken(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.twoFactorToken=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getUserId(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.profile)||void 0===n?void 0:n.userId}))}getUsesKeyConnector(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskOptions())))||void 0===t?void 0:t.profile)||void 0===n?void 0:n.usesKeyConnector}))}setUsesKeyConnector(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));n.profile.usesKeyConnector=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getVaultTimeout(e){var t,n;return ej(this,void 0,void 0,(function*(){return null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.vaultTimeout}))}setVaultTimeout(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.settings.vaultTimeout=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getVaultTimeoutAction(e){var t,n,i;return ej(this,void 0,void 0,(function*(){const r=null===(n=null===(t=yield this.getAccount(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.settings)||void 0===n?void 0:n.vaultTimeoutAction,o=null===(i=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===i?void 0:i.vaultTimeoutAction;return null!=r?r:o}))}setVaultTimeoutAction(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getAccount(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.settings.vaultTimeoutAction=e,yield this.saveAccount(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getStateVersion(){var e;return ej(this,void 0,void 0,(function*(){return null!==(e=(yield this.getGlobals(yield this.defaultOnDiskLocalOptions())).stateVersion)&&void 0!==e?e:1}))}setStateVersion(e){return ej(this,void 0,void 0,(function*(){const t=yield this.getGlobals(yield this.defaultOnDiskOptions());t.stateVersion=e,yield this.saveGlobals(t,yield this.defaultOnDiskOptions())}))}getWindow(){return ej(this,void 0,void 0,(function*(){const e=yield this.getGlobals(yield this.defaultOnDiskOptions());return null!=(null==e?void 0:e.window)&&Object.keys(e.window).length>0?e.window:new pz}))}setWindow(e,t){return ej(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskOptions()));return n.window=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskOptions()))}))}getGlobals(e){return ej(this,void 0,void 0,(function*(){let t;return this.useMemory(e.storageLocation)&&(t=yield this.getGlobalsFromMemory()),this.useDisk&&null==t&&(t=yield this.getGlobalsFromDisk(e)),null!=t?t:this.createGlobals()}))}saveGlobals(e,t){return ej(this,void 0,void 0,(function*(){return this.useMemory(t.storageLocation)?this.saveGlobalsToMemory(e):yield this.saveGlobalsToDisk(e,t)}))}getGlobalsFromMemory(){return ej(this,void 0,void 0,(function*(){return(yield this.state()).globals}))}getGlobalsFromDisk(e){return ej(this,void 0,void 0,(function*(){return yield this.storageService.get(nj,e)}))}saveGlobalsToMemory(e){return ej(this,void 0,void 0,(function*(){yield this.updateState((t=>ej(this,void 0,void 0,(function*(){return t.globals=e,t}))))}))}saveGlobalsToDisk(e,t){return ej(this,void 0,void 0,(function*(){t.useSecureStorage?yield this.secureStorageService.save(nj,e,t):yield this.storageService.save(nj,e,t)}))}getAccount(e){return ej(this,void 0,void 0,(function*(){try{let t;return this.useMemory(e.storageLocation)&&(t=yield this.getAccountFromMemory(e)),this.useDisk(e.storageLocation)&&null==t&&(t=yield this.getAccountFromDisk(e)),t}catch(t){this.logService.error(t)}}))}getAccountFromMemory(e){return ej(this,void 0,void 0,(function*(){return yield this.state().then((t=>ej(this,void 0,void 0,(function*(){return null==t.accounts?null:t.accounts[yield this.getUserIdFromMemory(e)]}))))}))}getUserIdFromMemory(e){return ej(this,void 0,void 0,(function*(){return yield this.state().then((t=>{var n,i;return null!=(null==e?void 0:e.userId)?null===(i=null===(n=t.accounts[e.userId])||void 0===n?void 0:n.profile)||void 0===i?void 0:i.userId:t.activeUserId}))}))}getAccountFromDisk(e){var t,n;return ej(this,void 0,void 0,(function*(){if(null==(null==e?void 0:e.userId)&&null==(null===(t=yield this.state())||void 0===t?void 0:t.activeUserId))return null;if(this.useAccountCache){const t=this.accountDiskCache.get(e.userId);if(null!=t)return t}const i=(null==e?void 0:e.useSecureStorage)?null!==(n=yield this.secureStorageService.get(e.userId,e))&&void 0!==n?n:yield this.storageService.get(e.userId,this.reconcileOptions(e,{htmlStorageLocation:HN.Local})):yield this.storageService.get(e.userId,e);return this.useAccountCache&&this.accountDiskCache.set(e.userId,i),i}))}useMemory(e){return e===QH.Memory||e===QH.Both}useDisk(e){return e===QH.Disk||e===QH.Both}saveAccount(e,t={storageLocation:QH.Both,useSecureStorage:!1}){return ej(this,void 0,void 0,(function*(){return this.useMemory(t.storageLocation)?yield this.saveAccountToMemory(e):yield this.saveAccountToDisk(e,t)}))}saveAccountToDisk(e,t){return ej(this,void 0,void 0,(function*(){const n=t.useSecureStorage?this.secureStorageService:this.storageService;yield n.save(`${t.userId}`,e,t),this.useAccountCache&&this.accountDiskCache.delete(t.userId)}))}saveAccountToMemory(e){return ej(this,void 0,void 0,(function*(){null!==this.getAccountFromMemory({userId:e.profile.userId})&&(yield this.updateState((t=>new Promise((n=>{t.accounts[e.profile.userId]=e,n(t)}))))),yield this.pushAccounts()}))}scaffoldNewAccountStorage(e){return ej(this,void 0,void 0,(function*(){const t=JSON.parse(JSON.stringify(e));yield this.scaffoldNewAccountLocalStorage(t),yield this.scaffoldNewAccountSessionStorage(t),yield this.scaffoldNewAccountMemoryStorage(t)}))}scaffoldNewAccountLocalStorage(e){return ej(this,void 0,void 0,(function*(){const t=yield this.getAccount(this.reconcileOptions({userId:e.profile.userId},yield this.defaultOnDiskLocalOptions())),n=e.settings.environmentUrls;null!=(null==t?void 0:t.settings)?e.settings=t.settings:(yield this.storageService.has(oj))&&(e.settings=yield this.storageService.get(oj),yield this.storageService.remove(oj)),e.settings.environmentUrls=n,"logOut"===e.settings.vaultTimeoutAction&&null!=e.settings.vaultTimeout&&(e.tokens.accessToken=null,e.tokens.refreshToken=null,e.profile.apiKeyClientId=null,e.keys.apiKeyClientSecret=null),yield this.saveAccount(e,this.reconcileOptions({userId:e.profile.userId},yield this.defaultOnDiskLocalOptions()))}))}scaffoldNewAccountMemoryStorage(e){return ej(this,void 0,void 0,(function*(){const t=yield this.getAccount(this.reconcileOptions({userId:e.profile.userId},yield this.defaultOnDiskMemoryOptions()));null!=(null==t?void 0:t.settings)&&(t.settings.environmentUrls=e.settings.environmentUrls,e.settings=t.settings),yield this.storageService.save(e.profile.userId,e,yield this.defaultOnDiskMemoryOptions()),yield this.saveAccount(e,this.reconcileOptions({userId:e.profile.userId},yield this.defaultOnDiskMemoryOptions()))}))}scaffoldNewAccountSessionStorage(e){return ej(this,void 0,void 0,(function*(){const t=yield this.getAccount(this.reconcileOptions({userId:e.profile.userId},yield this.defaultOnDiskOptions()));null!=(null==t?void 0:t.settings)&&(t.settings.environmentUrls=e.settings.environmentUrls,e.settings=t.settings),yield this.storageService.save(e.profile.userId,e,yield this.defaultOnDiskMemoryOptions()),yield this.saveAccount(e,this.reconcileOptions({userId:e.profile.userId},yield this.defaultOnDiskOptions()))}))}pushAccounts(){return ej(this,void 0,void 0,(function*(){yield this.pruneInMemoryAccounts(),yield this.state().then((e=>{null==e.accounts||Object.keys(e.accounts).length<1?this.accounts.next(null):this.accounts.next(e.accounts)}))}))}reconcileOptions(e,t){var n,i,r,o,a;return null==e?t:(e.userId=null!==(n=null==e?void 0:e.userId)&&void 0!==n?n:t.userId,e.storageLocation=null!==(i=null==e?void 0:e.storageLocation)&&void 0!==i?i:t.storageLocation,e.useSecureStorage=null!==(r=null==e?void 0:e.useSecureStorage)&&void 0!==r?r:t.useSecureStorage,e.htmlStorageLocation=null!==(o=null==e?void 0:e.htmlStorageLocation)&&void 0!==o?o:t.htmlStorageLocation,e.keySuffix=null!==(a=null==e?void 0:e.keySuffix)&&void 0!==a?a:t.keySuffix,e)}defaultInMemoryOptions(){return ej(this,void 0,void 0,(function*(){return{storageLocation:QH.Memory,userId:(yield this.state()).activeUserId}}))}defaultOnDiskOptions(){var e,t;return ej(this,void 0,void 0,(function*(){return{storageLocation:QH.Disk,htmlStorageLocation:HN.Session,userId:null!==(t=null===(e=yield this.state())||void 0===e?void 0:e.activeUserId)&&void 0!==t?t:yield this.getActiveUserIdFromStorage(),useSecureStorage:!1}}))}defaultOnDiskLocalOptions(){var e,t;return ej(this,void 0,void 0,(function*(){return{storageLocation:QH.Disk,htmlStorageLocation:HN.Local,userId:null!==(t=null===(e=yield this.state())||void 0===e?void 0:e.activeUserId)&&void 0!==t?t:yield this.getActiveUserIdFromStorage(),useSecureStorage:!1}}))}defaultOnDiskMemoryOptions(){var e,t;return ej(this,void 0,void 0,(function*(){return{storageLocation:QH.Disk,htmlStorageLocation:HN.Memory,userId:null!==(t=null===(e=yield this.state())||void 0===e?void 0:e.activeUserId)&&void 0!==t?t:yield this.getUserId(),useSecureStorage:!1}}))}defaultSecureStorageOptions(){var e,t;return ej(this,void 0,void 0,(function*(){return{storageLocation:QH.Disk,useSecureStorage:!0,userId:null!==(t=null===(e=yield this.state())||void 0===e?void 0:e.activeUserId)&&void 0!==t?t:yield this.getActiveUserIdFromStorage()}}))}getActiveUserIdFromStorage(){return ej(this,void 0,void 0,(function*(){return yield this.storageService.get(rj)}))}removeAccountFromLocalStorage(e=null){var t;return ej(this,void 0,void 0,(function*(){e=null!=e?e:null===(t=yield this.state())||void 0===t?void 0:t.activeUserId;const n=yield this.getAccount(this.reconcileOptions({userId:e},yield this.defaultOnDiskLocalOptions()));yield this.saveAccount(this.resetAccount(n),this.reconcileOptions({userId:e},yield this.defaultOnDiskLocalOptions()))}))}removeAccountFromSessionStorage(e=null){var t;return ej(this,void 0,void 0,(function*(){e=null!=e?e:null===(t=yield this.state())||void 0===t?void 0:t.activeUserId;const n=yield this.getAccount(this.reconcileOptions({userId:e},yield this.defaultOnDiskOptions()));yield this.saveAccount(this.resetAccount(n),this.reconcileOptions({userId:e},yield this.defaultOnDiskOptions()))}))}removeAccountFromSecureStorage(e=null){var t;return ej(this,void 0,void 0,(function*(){e=null!=e?e:null===(t=yield this.state())||void 0===t?void 0:t.activeUserId,yield this.setCryptoMasterKeyAuto(null,{userId:e}),yield this.setCryptoMasterKeyBiometric(null,{userId:e}),yield this.setCryptoMasterKeyB64(null,{userId:e})}))}removeAccountFromMemory(e=null){return ej(this,void 0,void 0,(function*(){yield this.updateState((t=>ej(this,void 0,void 0,(function*(){return e=null!=e?e:t.activeUserId,delete t.accounts[e],this.useAccountCache&&this.accountDiskCache.delete(e),t}))))}))}pruneInMemoryAccounts(){var e;return ej(this,void 0,void 0,(function*(){for(const t in null===(e=yield this.state())||void 0===e?void 0:e.accounts)(yield this.getIsAuthenticated({userId:t}))||(yield this.removeAccountFromMemory(t))}))}resetAccount(e){const t={settings:e.settings};return Object.assign(this.createAccount(),t)}setAccountEnvironmentUrls(e){return ej(this,void 0,void 0,(function*(){return e.settings.environmentUrls=yield this.getGlobalEnvironmentUrls(),e}))}getGlobalEnvironmentUrls(e){var t;return ej(this,void 0,void 0,(function*(){return e=this.reconcileOptions(e,yield this.defaultOnDiskOptions()),null!==(t=(yield this.getGlobals(e)).environmentUrls)&&void 0!==t?t:new tz}))}clearDecryptedDataForActiveUser(){return ej(this,void 0,void 0,(function*(){yield this.updateState((e=>ej(this,void 0,void 0,(function*(){var t;const n=null==e?void 0:e.activeUserId;if(null!=n&&null!=(null===(t=null==e?void 0:e.accounts[n])||void 0===t?void 0:t.data))return e.accounts[n].data=new oz,e}))))}))}createAccount(e=null){return this.stateFactory.createAccount(e)}createGlobals(e=null){return this.stateFactory.createGlobal(e)}deAuthenticateAccount(e){return ej(this,void 0,void 0,(function*(){yield this.setAccessToken(null,{userId:e}),yield this.setLastActive(null,{userId:e}),yield this.updateState((t=>ej(this,void 0,void 0,(function*(){return t.authenticatedAccounts=t.authenticatedAccounts.filter((t=>t!==e)),yield this.storageService.save(ij,t.authenticatedAccounts),t}))))}))}removeAccountFromDisk(e){return ej(this,void 0,void 0,(function*(){yield this.removeAccountFromSessionStorage(e),yield this.removeAccountFromLocalStorage(e),yield this.removeAccountFromSecureStorage(e)}))}dynamicallySetActiveUser(){var e;return ej(this,void 0,void 0,(function*(){const t=null===(e=yield this.state())||void 0===e?void 0:e.accounts;if(null==t||Object.keys(t).length<1)yield this.setActiveUser(null);else for(const e in t)if(null!=e){if(yield this.getIsAuthenticated({userId:e})){yield this.setActiveUser(e);break}yield this.setActiveUser(null)}}))}getTimeoutBasedStorageOptions(e){return ej(this,void 0,void 0,(function*(){const t=yield this.getVaultTimeoutAction({userId:null==e?void 0:e.userId}),n=yield this.getVaultTimeout({userId:null==e?void 0:e.userId}),i="logOut"===t&&null!=n?yield this.defaultInMemoryOptions():yield this.defaultOnDiskOptions();return this.reconcileOptions(e,i)}))}saveSecureStorageKey(e,t,n){return ej(this,void 0,void 0,(function*(){return null==t?yield this.secureStorageService.remove(`${n.userId}${e}`,n):yield this.secureStorageService.save(`${n.userId}${e}`,t,n)}))}state(){return this.memoryStorageService.get(tj)}setState(e){return ej(this,void 0,void 0,(function*(){yield this.memoryStorageService.save(tj,e)}))}updateState(e){return ej(this,void 0,void 0,(function*(){yield this.state().then((t=>ej(this,void 0,void 0,(function*(){const n=yield e(t);yield this.setState(n)}))))}))}}function pj(e,t=(e=>e)){return(n,i,r)=>{const o=r.value;return{value:function(...n){const r=o.apply(this,n);if(!(r instanceof Promise))throw new Error(`Error applying prototype to stored value -- result is not a promise for method ${String(i)}`);return r.then((n=>null==n||n.constructor.name===e.prototype.constructor.name?t(n):t(Object.create(e.prototype,Object.getOwnPropertyDescriptors(n)))))}}}}function uj(e,t=(e=>e)){return(n,i,r)=>{const o=r.value;return{value:function(...n){const r=o.apply(this,n);if(!(r instanceof Promise))throw new Error(`Error applying prototype to stored value -- result is not a promise for method ${String(i)}`);return r.then((n=>{if(null==n)return null;if(n instanceof Array)return n.map((n=>null==n||n.constructor.name===e.prototype.constructor.name?t(n):t(Object.create(e.prototype,Object.getOwnPropertyDescriptors(n)))));throw new Error(`Attempted to retrieve non array type from state as an array for method ${String(i)}`)}))}}}}function mj(e,t=(e=>e)){return(n,i,r)=>{const o=r.value;return{value:function(...n){const r=o.apply(this,n);if(!(r instanceof Promise))throw new Error(`Error applying prototype to stored value -- result is not a promise for method ${String(i)}`);return r.then((n=>{if(null==n)return null;for(const[i,r]of Object.entries(n))n[i]=null==r||r.constructor.name===e.prototype.constructor.name?t(r):t(Object.create(e.prototype,Object.getOwnPropertyDescriptors(r)));return n}))}}}}function hj(e,t=(e=>e)){return(n,i,r)=>{const o=r.value;return{value:function(...n){const r=o.apply(this,n);if(!(r instanceof Promise))throw new Error(`Error applying prototype to stored value -- result is not a promise for method ${String(i)}`);return r.then((n=>{if(null==n)return null;if(n instanceof Map)return n;for(const i in Object.keys(n))n[i]=null==n[i]||n[i].constructor.name===e.prototype.constructor.name?t(n[i]):t(Object.create(e.prototype,Object.getOwnPropertyDescriptors(n[i])));return new Map(Object.entries(n))}))}}}}JH([pj(mg.N,mg.N.initFromJson),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getCryptoMasterKey",null),JH([uj(Ar.$),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getDecryptedCiphers",null),JH([uj(TV.n),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getDecryptedCollections",null),JH([pj(mg.N,mg.N.initFromJson),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getDecryptedCryptoSymmetricKey",null),JH([hj(mg.N,mg.N.initFromJson),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getDecryptedOrganizationKeys",null),JH([uj(AH),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getDecryptedPasswordGenerationHistory",null),JH([pj(ie._),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getDecryptedPinProtected",null),JH([uj($e),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getDecryptedPolicies",null),JH([hj(mg.N,mg.N.initFromJson),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getDecryptedProviderKeys",null),JH([uj(BA),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getDecryptedSends",null),JH([mj(Kc.O),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getEncryptedCiphers",null),JH([mj(cm.Z),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getEncryptedCollections",null),JH([mj(cH),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getEncryptedFolders",null),JH([uj(AH),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getEncryptedPasswordGenerationHistory",null),JH([mj(Ee),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getEncryptedPolicies",null),JH([mj(KH),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getEncryptedSends",null),JH([pj(tz),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getEnvironmentUrls",null),JH([uj(WV),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getEventCollection",null),JH([pj(mg.N,mg.N.initFromJson),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getLegacyEtmKey",null),JH([mj(YH),XH("design:type",Function),XH("design:paramtypes",[Object]),XH("design:returntype",Promise)],cj.prototype,"getProviders",null);var vj=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class gj{constructor(e){this.stateService=e}static decodeToken(e){if(null==e)throw new Error("Token not provided.");const t=e.split(".");if(3!==t.length)throw new Error("JWT must have 3 parts");const n=N.c.fromUrlB64ToUtf8(t[1]);if(null==n)throw new Error("Cannot decode the token");return JSON.parse(n)}setTokens(e,t,n){return vj(this,void 0,void 0,(function*(){yield this.setToken(e),yield this.setRefreshToken(t),null!=n&&(yield this.setClientId(n[0]),yield this.setClientSecret(n[1]))}))}setClientId(e){return vj(this,void 0,void 0,(function*(){return yield this.stateService.setApiKeyClientId(e)}))}getClientId(){return vj(this,void 0,void 0,(function*(){return yield this.stateService.getApiKeyClientId()}))}setClientSecret(e){return vj(this,void 0,void 0,(function*(){return yield this.stateService.setApiKeyClientSecret(e)}))}getClientSecret(){return vj(this,void 0,void 0,(function*(){return yield this.stateService.getApiKeyClientSecret()}))}setToken(e){return vj(this,void 0,void 0,(function*(){yield this.stateService.setAccessToken(e)}))}getToken(){return vj(this,void 0,void 0,(function*(){return yield this.stateService.getAccessToken()}))}setRefreshToken(e){return vj(this,void 0,void 0,(function*(){return yield this.stateService.setRefreshToken(e)}))}getRefreshToken(){return vj(this,void 0,void 0,(function*(){return yield this.stateService.getRefreshToken()}))}setTwoFactorToken(e){return vj(this,void 0,void 0,(function*(){return yield this.stateService.setTwoFactorToken(e.twoFactorToken)}))}getTwoFactorToken(){return vj(this,void 0,void 0,(function*(){return yield this.stateService.getTwoFactorToken()}))}clearTwoFactorToken(){return vj(this,void 0,void 0,(function*(){return yield this.stateService.setTwoFactorToken(null)}))}clearToken(e){return vj(this,void 0,void 0,(function*(){yield this.stateService.setAccessToken(null,{userId:e}),yield this.stateService.setRefreshToken(null,{userId:e}),yield this.stateService.setApiKeyClientId(null,{userId:e}),yield this.stateService.setApiKeyClientSecret(null,{userId:e})}))}decodeToken(e){return vj(this,void 0,void 0,(function*(){const t=yield this.stateService.getDecodedToken();if(null===e&&null!=t)return t;if(null==(e=null!=e?e:yield this.stateService.getAccessToken()))throw new Error("Token not found.");return gj.decodeToken(e)}))}getTokenExpirationDate(){return vj(this,void 0,void 0,(function*(){const e=yield this.decodeToken();if(void 0===e.exp)return null;const t=new Date(0);return t.setUTCSeconds(e.exp),t}))}tokenSecondsRemaining(e=0){return vj(this,void 0,void 0,(function*(){const t=yield this.getTokenExpirationDate();if(null==t)return 0;const n=t.valueOf()-((new Date).valueOf()+1e3*e);return Math.round(n/1e3)}))}tokenNeedsRefresh(e=5){return vj(this,void 0,void 0,(function*(){return(yield this.tokenSecondsRemaining())<60*e}))}getUserId(){return vj(this,void 0,void 0,(function*(){const e=yield this.decodeToken();if(void 0===e.sub)throw new Error("No user id found");return e.sub}))}getEmail(){return vj(this,void 0,void 0,(function*(){const e=yield this.decodeToken();if(void 0===e.email)throw new Error("No email found");return e.email}))}getEmailVerified(){return vj(this,void 0,void 0,(function*(){const e=yield this.decodeToken();if(void 0===e.email_verified)throw new Error("No email verification found");return e.email_verified}))}getName(){return vj(this,void 0,void 0,(function*(){const e=yield this.decodeToken();return void 0===e.name?null:e.name}))}getIssuer(){return vj(this,void 0,void 0,(function*(){const e=yield this.decodeToken();if(void 0===e.iss)throw new Error("No issuer found");return e.iss}))}getIsExternal(){return vj(this,void 0,void 0,(function*(){const e=yield this.decodeToken();return Array.isArray(e.amr)&&e.amr.includes("external")}))}}var fj=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const xj={accessToken:"accessToken",alwaysShowDock:"alwaysShowDock",autoConfirmFingerprints:"autoConfirmFingerprints",autoFillOnPageLoadDefault:"autoFillOnPageLoadDefault",biometricAwaitingAcceptance:"biometricAwaitingAcceptance",biometricFingerprintValidated:"biometricFingerprintValidated",biometricText:"biometricText",biometricUnlock:"biometric",clearClipboard:"clearClipboardKey",clientId:"apikey_clientId",clientSecret:"apikey_clientSecret",collapsedGroupings:"collapsedGroupings",convertAccountToKeyConnector:"convertAccountToKeyConnector",defaultUriMatch:"defaultUriMatch",disableAddLoginNotification:"disableAddLoginNotification",disableAutoBiometricsPrompt:"noAutoPromptBiometrics",disableAutoTotpCopy:"disableAutoTotpCopy",disableBadgeCounter:"disableBadgeCounter",disableChangedPasswordNotification:"disableChangedPasswordNotification",disableContextMenuItem:"disableContextMenuItem",disableFavicon:"disableFavicon",disableGa:"disableGa",dontShowCardsCurrentTab:"dontShowCardsCurrentTab",dontShowIdentitiesCurrentTab:"dontShowIdentitiesCurrentTab",emailVerified:"emailVerified",enableAlwaysOnTop:"enableAlwaysOnTopKey",enableAutoFillOnPageLoad:"enableAutoFillOnPageLoad",enableBiometric:"enabledBiometric",enableBrowserIntegration:"enableBrowserIntegration",enableBrowserIntegrationFingerprint:"enableBrowserIntegrationFingerprint",enableCloseToTray:"enableCloseToTray",enableFullWidth:"enableFullWidth",enableGravatars:"enableGravatars",enableMinimizeToTray:"enableMinimizeToTray",enableStartToTray:"enableStartToTrayKey",enableTray:"enableTray",encKey:"encKey",encOrgKeys:"encOrgKeys",encPrivate:"encPrivateKey",encProviderKeys:"encProviderKeys",entityId:"entityId",entityType:"entityType",environmentUrls:"environmentUrls",equivalentDomains:"equivalentDomains",eventCollection:"eventCollection",forcePasswordReset:"forcePasswordReset",history:"generatedPasswordHistory",installedVersion:"installedVersion",kdf:"kdf",kdfIterations:"kdfIterations",key:"key",keyHash:"keyHash",lastActive:"lastActive",localData:"sitesLocalData",locale:"locale",mainWindowSize:"mainWindowSize",minimizeOnCopyToClipboard:"minimizeOnCopyToClipboardKey",neverDomains:"neverDomains",noAutoPromptBiometricsText:"noAutoPromptBiometricsText",openAtLogin:"openAtLogin",passwordGenerationOptions:"passwordGenerationOptions",pinProtected:"pinProtectedKey",protectedPin:"protectedPin",refreshToken:"refreshToken",ssoCodeVerifier:"ssoCodeVerifier",ssoIdentifier:"ssoOrgIdentifier",ssoState:"ssoState",stamp:"securityStamp",theme:"theme",userEmail:"userEmail",userId:"userId",usesConnector:"usesKeyConnector",vaultTimeoutAction:"vaultTimeoutAction",vaultTimeout:"lockOption",rememberedEmail:"rememberedEmail"},yj={ciphers:"ciphers_",collections:"collections_",folders:"folders_",lastSync:"lastSync_",policies:"policies_",twoFactorToken:"twoFactorToken_",organizations:"organizations_",providers:"providers_",sends:"sends_",settings:"settings_"},Sj="global",bj="authenticatedAccounts",wj="activeUserId",Ij="tempAccountSettings",Cj="accountActivity",Ej="_masterkey_auto",kj="_masterkey_biometric",Pj="_masterkey";class Aj{constructor(e,t,n){this.storageService=e,this.secureStorageService=t,this.stateFactory=n}needsMigration(){return fj(this,void 0,void 0,(function*(){const e=yield this.getCurrentStateVersion();return null==e||e<zU.Latest}))}migrate(){return fj(this,void 0,void 0,(function*(){let e=yield this.getCurrentStateVersion();for(;e<zU.Latest;){switch(e){case zU.One:yield this.migrateStateFrom1To2();break;case zU.Two:yield this.migrateStateFrom2To3();break;case zU.Three:yield this.migrateStateFrom3To4();break;case zU.Four:{const e=yield this.getAuthenticatedAccounts();for(const t of e){const e=yield this.migrateAccountFrom4To5(t);yield this.set(t.profile.userId,e)}yield this.setCurrentStateVersion(zU.Five);break}}e+=1}}))}migrateStateFrom1To2(){var e,t,n,i,r,o,a,s,l,d,c,p,u,m,h,v,g,f,x,y,S,b,w,I,C,E,k,P,A,O,T,B,M,D,F,R,U,z,N,V,H,j,L,K,G,q,_,$;return fj(this,void 0,void 0,(function*(){const W=e=>fj(this,void 0,void 0,(function*(){for(const e in xj)null!=e&&(yield this.set(xj[e],null));if(null!=e)for(const e in yj)null!=e&&(yield this.set(yj[e]+Y,null))})),Q=null!==(e=yield this.get(Sj))&&void 0!==e?e:this.stateFactory.createGlobal(null);Q.stateVersion=zU.Two,Q.environmentUrls=null!==(t=yield this.get(xj.environmentUrls))&&void 0!==t?t:Q.environmentUrls,Q.locale=null!==(n=yield this.get(xj.locale))&&void 0!==n?n:Q.locale,Q.noAutoPromptBiometrics=null!==(i=yield this.get(xj.disableAutoBiometricsPrompt))&&void 0!==i?i:Q.noAutoPromptBiometrics,Q.noAutoPromptBiometricsText=null!==(r=yield this.get(xj.noAutoPromptBiometricsText))&&void 0!==r?r:Q.noAutoPromptBiometricsText,Q.ssoCodeVerifier=null!==(o=yield this.get(xj.ssoCodeVerifier))&&void 0!==o?o:Q.ssoCodeVerifier,Q.ssoOrganizationIdentifier=null!==(a=yield this.get(xj.ssoIdentifier))&&void 0!==a?a:Q.ssoOrganizationIdentifier,Q.ssoState=null!==(s=yield this.get(xj.ssoState))&&void 0!==s?s:Q.ssoState,Q.rememberedEmail=null!==(l=yield this.get(xj.rememberedEmail))&&void 0!==l?l:Q.rememberedEmail,Q.theme=null!==(d=yield this.get(xj.theme))&&void 0!==d?d:Q.theme,Q.vaultTimeout=null!==(c=yield this.get(xj.vaultTimeout))&&void 0!==c?c:Q.vaultTimeout,Q.vaultTimeoutAction=null!==(p=yield this.get(xj.vaultTimeoutAction))&&void 0!==p?p:Q.vaultTimeoutAction,Q.window=null!==(u=yield this.get(xj.mainWindowSize))&&void 0!==u?u:Q.window,Q.enableTray=null!==(m=yield this.get(xj.enableTray))&&void 0!==m?m:Q.enableTray,Q.enableMinimizeToTray=null!==(h=yield this.get(xj.enableMinimizeToTray))&&void 0!==h?h:Q.enableMinimizeToTray,Q.enableCloseToTray=null!==(v=yield this.get(xj.enableCloseToTray))&&void 0!==v?v:Q.enableCloseToTray,Q.enableStartToTray=null!==(g=yield this.get(xj.enableStartToTray))&&void 0!==g?g:Q.enableStartToTray,Q.openAtLogin=null!==(f=yield this.get(xj.openAtLogin))&&void 0!==f?f:Q.openAtLogin,Q.alwaysShowDock=null!==(x=yield this.get(xj.alwaysShowDock))&&void 0!==x?x:Q.alwaysShowDock,Q.enableBrowserIntegration=null!==(y=yield this.get(xj.enableBrowserIntegration))&&void 0!==y?y:Q.enableBrowserIntegration,Q.enableBrowserIntegrationFingerprint=null!==(S=yield this.get(xj.enableBrowserIntegrationFingerprint))&&void 0!==S?S:Q.enableBrowserIntegrationFingerprint;const Y=null!==(b=yield this.get(xj.userId))&&void 0!==b?b:yield this.get(xj.entityId),Z=this.stateFactory.createAccount(null),J={autoConfirmFingerPrints:null!==(w=yield this.get(xj.autoConfirmFingerprints))&&void 0!==w?w:Z.settings.autoConfirmFingerPrints,autoFillOnPageLoadDefault:null!==(I=yield this.get(xj.autoFillOnPageLoadDefault))&&void 0!==I?I:Z.settings.autoFillOnPageLoadDefault,biometricLocked:null,biometricUnlock:null!==(C=yield this.get(xj.biometricUnlock))&&void 0!==C?C:Z.settings.biometricUnlock,clearClipboard:null!==(E=yield this.get(xj.clearClipboard))&&void 0!==E?E:Z.settings.clearClipboard,defaultUriMatch:null!==(k=yield this.get(xj.defaultUriMatch))&&void 0!==k?k:Z.settings.defaultUriMatch,disableAddLoginNotification:null!==(P=yield this.get(xj.disableAddLoginNotification))&&void 0!==P?P:Z.settings.disableAddLoginNotification,disableAutoBiometricsPrompt:null!==(A=yield this.get(xj.disableAutoBiometricsPrompt))&&void 0!==A?A:Z.settings.disableAutoBiometricsPrompt,disableAutoTotpCopy:null!==(O=yield this.get(xj.disableAutoTotpCopy))&&void 0!==O?O:Z.settings.disableAutoTotpCopy,disableBadgeCounter:null!==(T=yield this.get(xj.disableBadgeCounter))&&void 0!==T?T:Z.settings.disableBadgeCounter,disableChangedPasswordNotification:null!==(B=yield this.get(xj.disableChangedPasswordNotification))&&void 0!==B?B:Z.settings.disableChangedPasswordNotification,disableContextMenuItem:null!==(M=yield this.get(xj.disableContextMenuItem))&&void 0!==M?M:Z.settings.disableContextMenuItem,disableGa:null!==(D=yield this.get(xj.disableGa))&&void 0!==D?D:Z.settings.disableGa,dontShowCardsCurrentTab:null!==(F=yield this.get(xj.dontShowCardsCurrentTab))&&void 0!==F?F:Z.settings.dontShowCardsCurrentTab,dontShowIdentitiesCurrentTab:null!==(R=yield this.get(xj.dontShowIdentitiesCurrentTab))&&void 0!==R?R:Z.settings.dontShowIdentitiesCurrentTab,enableAlwaysOnTop:null!==(U=yield this.get(xj.enableAlwaysOnTop))&&void 0!==U?U:Z.settings.enableAlwaysOnTop,enableAutoFillOnPageLoad:null!==(z=yield this.get(xj.enableAutoFillOnPageLoad))&&void 0!==z?z:Z.settings.enableAutoFillOnPageLoad,enableBiometric:null!==(N=yield this.get(xj.enableBiometric))&&void 0!==N?N:Z.settings.enableBiometric,enableFullWidth:null!==(V=yield this.get(xj.enableFullWidth))&&void 0!==V?V:Z.settings.enableFullWidth,enableGravitars:null!==(H=yield this.get(xj.enableGravatars))&&void 0!==H?H:Z.settings.enableGravitars,environmentUrls:null!==(j=Q.environmentUrls)&&void 0!==j?j:Z.settings.environmentUrls,equivalentDomains:null!==(L=yield this.get(xj.equivalentDomains))&&void 0!==L?L:Z.settings.equivalentDomains,minimizeOnCopyToClipboard:null!==(K=yield this.get(xj.minimizeOnCopyToClipboard))&&void 0!==K?K:Z.settings.minimizeOnCopyToClipboard,neverDomains:null!==(G=yield this.get(xj.neverDomains))&&void 0!==G?G:Z.settings.neverDomains,passwordGenerationOptions:null!==(q=yield this.get(xj.passwordGenerationOptions))&&void 0!==q?q:Z.settings.passwordGenerationOptions,pinProtected:{decrypted:null,encrypted:yield this.get(xj.pinProtected)},protectedPin:yield this.get(xj.protectedPin),settings:null==Y?null:yield this.get(yj.settings+Y),vaultTimeout:null!==(_=yield this.get(xj.vaultTimeout))&&void 0!==_?_:Z.settings.vaultTimeout,vaultTimeoutAction:null!==($=yield this.get(xj.vaultTimeoutAction))&&void 0!==$?$:Z.settings.vaultTimeoutAction};if(null==Y)return yield this.set(Ij,J),yield this.set(Sj,Q),yield this.set(bj,[]),yield this.set(wj,null),void(yield W());Q.twoFactorToken=yield this.get(yj.twoFactorToken+Y),yield this.set(Sj,Q),yield this.set(Y,{data:{addEditCipherInfo:null,ciphers:{decrypted:null,encrypted:yield this.get(yj.ciphers+Y)},collapsedGroupings:null,collections:{decrypted:null,encrypted:yield this.get(yj.collections+Y)},eventCollection:yield this.get(xj.eventCollection),folders:{decrypted:null,encrypted:yield this.get(yj.folders+Y)},localData:null,organizations:yield this.get(yj.organizations+Y),passwordGenerationHistory:{decrypted:null,encrypted:yield this.get(xj.history)},policies:{decrypted:null,encrypted:yield this.get(yj.policies+Y)},providers:yield this.get(yj.providers+Y),sends:{decrypted:null,encrypted:yield this.get(yj.sends+Y)}},keys:{apiKeyClientSecret:yield this.get(xj.clientSecret),cryptoMasterKey:null,cryptoMasterKeyAuto:null,cryptoMasterKeyB64:null,cryptoMasterKeyBiometric:null,cryptoSymmetricKey:{encrypted:yield this.get(xj.encKey),decrypted:null},legacyEtmKey:null,organizationKeys:{decrypted:null,encrypted:yield this.get(xj.encOrgKeys)},privateKey:{decrypted:null,encrypted:yield this.get(xj.encPrivate)},providerKeys:{decrypted:null,encrypted:yield this.get(xj.encProviderKeys)},publicKey:null},profile:{apiKeyClientId:yield this.get(xj.clientId),authenticationStatus:null,convertAccountToKeyConnector:yield this.get(xj.convertAccountToKeyConnector),email:yield this.get(xj.userEmail),emailVerified:yield this.get(xj.emailVerified),entityId:null,entityType:null,everBeenUnlocked:null,forcePasswordReset:null,hasPremiumPersonally:null,kdfIterations:yield this.get(xj.kdfIterations),kdfType:yield this.get(xj.kdf),keyHash:yield this.get(xj.keyHash),lastSync:null,userId:Y,usesKeyConnector:null},settings:J,tokens:{accessToken:yield this.get(xj.accessToken),decodedToken:null,refreshToken:yield this.get(xj.refreshToken),securityStamp:null}}),yield this.set(bj,[Y]),yield this.set(wj,Y);const X={[Y]:yield this.get(xj.lastActive)};X[Y]=yield this.get(xj.lastActive),yield this.set(Cj,X),yield W(Y),(yield this.secureStorageService.has(xj.key,{keySuffix:"biometric"}))&&(yield this.secureStorageService.save(`${Y}${kj}`,yield this.secureStorageService.get(xj.key,{keySuffix:"biometric"}),{keySuffix:"biometric"}),yield this.secureStorageService.remove(xj.key,{keySuffix:"biometric"})),(yield this.secureStorageService.has(xj.key,{keySuffix:"auto"}))&&(yield this.secureStorageService.save(`${Y}${Ej}`,yield this.secureStorageService.get(xj.key,{keySuffix:"auto"}),{keySuffix:"auto"}),yield this.secureStorageService.remove(xj.key,{keySuffix:"auto"})),(yield this.secureStorageService.has(xj.key))&&(yield this.secureStorageService.save(`${Y}${Pj}`,yield this.secureStorageService.get(xj.key)),yield this.secureStorageService.remove(xj.key))}))}migrateStateFrom2To3(){return fj(this,void 0,void 0,(function*(){const e=yield this.get(bj);yield Promise.all(e.map((e=>fj(this,void 0,void 0,(function*(){var t,n;const i=yield this.get(e);if(null===(null===(t=null==i?void 0:i.profile)||void 0===t?void 0:t.hasPremiumPersonally)&&null!=(null===(n=i.tokens)||void 0===n?void 0:n.accessToken)){const t=yield gj.decodeToken(i.tokens.accessToken);i.profile.hasPremiumPersonally=t.premium,yield this.set(e,i)}})))));const t=yield this.getGlobals();t.stateVersion=zU.Three,yield this.set(Sj,t)}))}migrateStateFrom3To4(){return fj(this,void 0,void 0,(function*(){const e=yield this.get(bj);yield Promise.all(e.map((e=>fj(this,void 0,void 0,(function*(){var t;const n=yield this.get(e);if(null!=(null===(t=null==n?void 0:n.profile)||void 0===t?void 0:t.everBeenUnlocked))return delete n.profile.everBeenUnlocked,this.set(e,n)})))));const t=yield this.getGlobals();t.stateVersion=zU.Four,yield this.set(Sj,t)}))}migrateAccountFrom4To5(e){var t,n;return fj(this,void 0,void 0,(function*(){const i=null===(n=null===(t=e.keys)||void 0===t?void 0:t.organizationKeys)||void 0===n?void 0:n.encrypted;if(null!=i)for(const[e,t]of Object.entries(i))i[e]={type:"organization",key:t};return e}))}get options(){return{htmlStorageLocation:HN.Local}}get(e){return this.storageService.get(e,this.options)}set(e,t){return null==t?this.storageService.remove(e,this.options):this.storageService.save(e,t,this.options)}getGlobals(){return fj(this,void 0,void 0,(function*(){return yield this.get(Sj)}))}getCurrentStateVersion(){var e,t;return fj(this,void 0,void 0,(function*(){return null!==(t=null===(e=yield this.getGlobals())||void 0===e?void 0:e.stateVersion)&&void 0!==t?t:zU.One}))}setCurrentStateVersion(e){return fj(this,void 0,void 0,(function*(){const t=yield this.getGlobals();t.stateVersion=e,yield this.set(Sj,t)}))}getAuthenticatedAccounts(){return fj(this,void 0,void 0,(function*(){const e=yield this.get(bj);return Promise.all(e.map((e=>this.get(e))))}))}}class Oj{constructor(e){this.id=e.id,this.name=e.name,this.status=e.status,this.type=e.type,this.enabled=e.enabled,this.usePolicies=e.usePolicies,this.useGroups=e.useGroups,this.useDirectory=e.useDirectory,this.useEvents=e.useEvents,this.useTotp=e.useTotp,this.use2fa=e.use2fa,this.useApi=e.useApi,this.useSso=e.useSso,this.useKeyConnector=e.useKeyConnector,this.useResetPassword=e.useResetPassword,this.selfHost=e.selfHost,this.usersGetPremium=e.usersGetPremium,this.seats=e.seats,this.maxCollections=e.maxCollections,this.maxStorageGb=e.maxStorageGb,this.ssoBound=e.ssoBound,this.identifier=e.identifier,this.permissions=e.permissions,this.resetPasswordEnrolled=e.resetPasswordEnrolled,this.userId=e.userId,this.hasPublicAndPrivateKeys=e.hasPublicAndPrivateKeys,this.providerId=e.providerId,this.providerName=e.providerName,this.familySponsorshipFriendlyName=e.familySponsorshipFriendlyName,this.familySponsorshipAvailable=e.familySponsorshipAvailable,this.planProductType=e.planProductType,this.keyConnectorEnabled=e.keyConnectorEnabled,this.keyConnectorUrl=e.keyConnectorUrl,this.familySponsorshipLastSyncDate=e.familySponsorshipLastSyncDate,this.familySponsorshipValidUntil=e.familySponsorshipValidUntil,this.familySponsorshipToDelete=e.familySponsorshipToDelete}}var Tj=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Bj=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Mj=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Dj{constructor(e,t,n,i,r,o,a,s,l,d,c,p,u,m,h,v){this.apiService=e,this.settingsService=t,this.folderService=n,this.cipherService=i,this.cryptoService=r,this.collectionService=o,this.messagingService=a,this.policyService=s,this.sendService=l,this.logService=d,this.keyConnectorService=c,this.stateService=p,this.organizationService=u,this.providerService=m,this.folderApiService=h,this.logoutCallback=v,this.syncInProgress=!1}getLastSync(){return Mj(this,void 0,void 0,(function*(){if(null==(yield this.stateService.getUserId()))return null;const e=yield this.stateService.getLastSync();return e?new Date(e):null}))}setLastSync(e,t){return Mj(this,void 0,void 0,(function*(){yield this.stateService.setLastSync(e.toJSON(),{userId:t})}))}fullSync(e,t=!1){return Mj(this,void 0,void 0,(function*(){this.syncStarted();if(!(yield this.stateService.getIsAuthenticated()))return this.syncCompleted(!1);const n=new Date;let i=!1;try{i=yield this.needsSyncing(e)}catch(r){if(t)throw r}if(!i)return yield this.setLastSync(n),this.syncCompleted(!1);try{yield this.apiService.refreshIdentityToken();const e=yield this.apiService.getSync();return yield this.syncProfile(e.profile),yield this.syncFolders(e.folders),yield this.syncCollections(e.collections),yield this.syncCiphers(e.ciphers),yield this.syncSends(e.sends),yield this.syncSettings(e.domains),yield this.syncPolicies(e.policies),yield this.setLastSync(n),this.syncCompleted(!0)}catch(r){if(t)throw r;return this.syncCompleted(!1)}}))}syncUpsertFolder(e,t){return Mj(this,void 0,void 0,(function*(){if(this.syncStarted(),yield this.stateService.getIsAuthenticated())try{const n=yield this.folderService.get(e.id);if(!t&&null==n||t&&null!=n&&n.revisionDate<e.revisionDate){const t=yield this.folderApiService.get(e.id);if(null!=t)return yield this.folderService.upsert(new cH(t)),this.messagingService.send("syncedUpsertedFolder",{folderId:e.id}),this.syncCompleted(!0)}}catch(n){this.logService.error(n)}return this.syncCompleted(!1)}))}syncDeleteFolder(e){return Mj(this,void 0,void 0,(function*(){return this.syncStarted(),(yield this.stateService.getIsAuthenticated())?(yield this.folderService.delete(e.id),this.messagingService.send("syncedDeletedFolder",{folderId:e.id}),this.syncCompleted(!0),!0):this.syncCompleted(!1)}))}syncUpsertCipher(e,t){return Mj(this,void 0,void 0,(function*(){if(this.syncStarted(),yield this.stateService.getIsAuthenticated())try{let n=!0;const i=yield this.cipherService.get(e.id);null!=i&&i.revisionDate>=e.revisionDate&&(n=!1);let r=!1;if(n&&(t?(n=null!=i,r=!0):null==e.collectionIds||null==e.organizationId?n=null==i:(n=!1,r=!0)),!n&&r&&null!=e.organizationId&&null!=e.collectionIds&&e.collectionIds.length>0){const t=yield this.collectionService.getAll();if(null!=t)for(let i=0;i<t.length;i++)if(e.collectionIds.indexOf(t[i].id)>-1){n=!0;break}}if(n){const t=yield this.apiService.getFullCipherDetails(e.id);if(null!=t)return yield this.cipherService.upsert(new Kc.O(t)),this.messagingService.send("syncedUpsertedCipher",{cipherId:e.id}),this.syncCompleted(!0)}}catch(n){if(null!=n&&404===n.statusCode&&t)return yield this.cipherService.delete(e.id),this.messagingService.send("syncedDeletedCipher",{cipherId:e.id}),this.syncCompleted(!0)}return this.syncCompleted(!1)}))}syncDeleteCipher(e){return Mj(this,void 0,void 0,(function*(){return this.syncStarted(),(yield this.stateService.getIsAuthenticated())?(yield this.cipherService.delete(e.id),this.messagingService.send("syncedDeletedCipher",{cipherId:e.id}),this.syncCompleted(!0)):this.syncCompleted(!1)}))}syncUpsertSend(e,t){return Mj(this,void 0,void 0,(function*(){if(this.syncStarted(),yield this.stateService.getIsAuthenticated())try{const n=yield this.sendService.get(e.id);if(!t&&null==n||t&&null!=n&&n.revisionDate<e.revisionDate){const t=yield this.apiService.getSend(e.id);if(null!=t)return yield this.sendService.upsert(new KH(t)),this.messagingService.send("syncedUpsertedSend",{sendId:e.id}),this.syncCompleted(!0)}}catch(n){this.logService.error(n)}return this.syncCompleted(!1)}))}syncDeleteSend(e){return Mj(this,void 0,void 0,(function*(){return this.syncStarted(),(yield this.stateService.getIsAuthenticated())?(yield this.sendService.delete(e.id),this.messagingService.send("syncedDeletedSend",{sendId:e.id}),this.syncCompleted(!0),!0):this.syncCompleted(!1)}))}syncStarted(){this.syncInProgress=!0,this.messagingService.send("syncStarted")}syncCompleted(e){return this.syncInProgress=!1,this.messagingService.send("syncCompleted",{successfully:e}),e}needsSyncing(e){return Mj(this,void 0,void 0,(function*(){if(e)return!0;const t=yield this.getLastSync();if(null==t||0===t.getTime())return!0;const n=yield this.apiService.getAccountRevisionDate();return!(new Date(n)<=t)}))}syncProfile(e){return Mj(this,void 0,void 0,(function*(){const t=yield this.stateService.getSecurityStamp();if(null!=t&&t!==e.securityStamp)throw null!=this.logoutCallback&&(yield this.logoutCallback(!0)),new Error("Stamp has changed");yield this.cryptoService.setEncKey(e.key),yield this.cryptoService.setEncPrivateKey(e.privateKey),yield this.cryptoService.setProviderKeys(e.providers),yield this.cryptoService.setOrgKeys(e.organizations,e.providerOrganizations),yield this.stateService.setSecurityStamp(e.securityStamp),yield this.stateService.setEmailVerified(e.emailVerified),yield this.stateService.setHasPremiumPersonally(e.premiumPersonally),yield this.stateService.setHasPremiumFromOrganization(e.premiumFromOrganization),yield this.stateService.setForcePasswordReset(e.forcePasswordReset),yield this.keyConnectorService.setUsesKeyConnector(e.usesKeyConnector);const n={};e.organizations.forEach((e=>{n[e.id]=new Oj(e)}));const i={};e.providers.forEach((e=>{i[e.id]=new YH(e)})),e.providerOrganizations.forEach((e=>{null==n[e.id]&&(n[e.id]=new Oj(e),n[e.id].isProviderUser=!0)})),yield this.organizationService.save(n),yield this.providerService.save(i),(yield this.keyConnectorService.userNeedsMigration())?(yield this.keyConnectorService.setConvertAccountRequired(!0),this.messagingService.send("convertAccountToKeyConnector")):this.keyConnectorService.removeConvertAccountRequired()}))}syncFolders(e){return Mj(this,void 0,void 0,(function*(){const t={};return e.forEach((e=>{t[e.id]=new cH(e)})),yield this.folderService.replace(t)}))}syncCollections(e){return Mj(this,void 0,void 0,(function*(){const t={};return e.forEach((e=>{t[e.id]=new cm.Z(e)})),yield this.collectionService.replace(t)}))}syncCiphers(e){return Mj(this,void 0,void 0,(function*(){const t={};return e.forEach((e=>{t[e.id]=new Kc.O(e)})),yield this.cipherService.replace(t)}))}syncSends(e){return Mj(this,void 0,void 0,(function*(){const t={};return e.forEach((e=>{t[e.id]=new KH(e)})),yield this.sendService.replace(t)}))}syncSettings(e){return Mj(this,void 0,void 0,(function*(){let t=[];return null!=e&&null!=e.equivalentDomains&&(t=t.concat(e.equivalentDomains)),null!=e&&null!=e.globalEquivalentDomains&&e.globalEquivalentDomains.forEach((e=>{e.domains.length>0&&t.push(e.domains)})),this.settingsService.setEquivalentDomains(t)}))}syncPolicies(e){return Mj(this,void 0,void 0,(function*(){const t={};return null!=e&&e.forEach((e=>{t[e.id]=new Ee(e)})),yield this.policyService.replace(t)}))}}Tj([lV((()=>"fullSync")),Bj("design:type",Function),Bj("design:paramtypes",[Boolean,Object]),Bj("design:returntype",Promise)],Dj.prototype,"fullSync",null);var Fj=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const Rj="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",Uj="23456789BCDFGHJKMNPQRTVWXY";class zj{constructor(e){this.OTP=e}}var Nj=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};var Vj=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const Hj={type:"word",wordCapitalize:!0,wordIncludeNumber:!0,subaddressType:"random",catchallType:"random",forwardedService:"simplelogin",forwardedAnonAddyDomain:"anonaddy.me"};var jj=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};var Lj=n(36432);class Kj{}var Gj=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class qj extends class{constructor(){this.subscribers=new Map}send(e,t){null==t?this.subscribers.forEach((t=>{t(e)})):this.subscribers.has(t)&&this.subscribers.get(t)(e)}subscribe(e,t){this.subscribers.set(e,t)}unsubscribe(e){this.subscribers.has(e)&&this.subscribers.delete(e)}}{}qj.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](qj)))(t||qj)}}(),qj.ɵprov=o["ɵɵdefineInjectable"]({token:qj,factory:qj.ɵfac});var _j=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class $j{constructor(e,t,n,i){this.modalRef=e,this.cryptoService=t,this.platformUtilsService=n,this.i18nService=i,this.showPassword=!1,this.masterPassword=""}togglePassword(){this.showPassword=!this.showPassword}submit(){return _j(this,void 0,void 0,(function*(){(yield this.cryptoService.compareAndUpdateKeyHash(this.masterPassword,null))?this.modalRef.close(!0):this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("invalidMasterPassword"))}))}}$j.ɵfac=function(e){return new(e||$j)(o["ɵɵdirectiveInject"](yn),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D))},$j.ɵdir=o["ɵɵdefineDirective"]({type:$j});var Wj=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Qj{constructor(e,t){this.modalService=e,this.keyConnectorService=t,this.component=$j}protectedFields(){return["TOTP","Password","H_Field","Card Number","Security Code"]}showPasswordPrompt(){return Wj(this,void 0,void 0,(function*(){if(!(yield this.enabled()))return!0;const e=this.modalService.open(this.component,{allowMultipleModals:!0});if(null==e)return!1;return!0===(yield e.onClosedPromise())}))}enabled(){return Wj(this,void 0,void 0,(function*(){return!(yield this.keyConnectorService.getUsesKeyConnector())}))}}Qj.ɵfac=function(e){return new(e||Qj)(o["ɵɵinject"](kn),o["ɵɵinject"](g.J))},Qj.ɵprov=o["ɵɵdefineInjectable"]({token:Qj,factory:Qj.ɵfac});const Yj=new o.InjectionToken("WINDOW"),Zj=new o.InjectionToken("MEMORY_STORAGE"),Jj=new o.InjectionToken("SECURE_STORAGE"),Xj=new o.InjectionToken("STATE_FACTORY"),eL=new o.InjectionToken("STATE_SERVICE_USE_CACHE"),tL=new o.InjectionToken("LOGOUT_CALLBACK"),nL=new o.InjectionToken("LOCKED_CALLBACK"),iL=(new o.InjectionToken("CLIENT_TYPE"),new o.InjectionToken("LOCALES_DIRECTORY")),rL=new o.InjectionToken("SYSTEM_LANGUAGE"),oL=new o.InjectionToken("LOG_MAC_FAILURES");class aL{}aL.ɵfac=function(e){return new(e||aL)},aL.ɵmod=o["ɵɵdefineNgModule"]({type:aL}),aL.ɵinj=o["ɵɵdefineInjector"]({providers:[ov.R,x,w,S,kn,{provide:Yj,useValue:window},{provide:o.LOCALE_ID,useFactory:e=>e.translationLocale,deps:[k.D]},{provide:iL,useValue:"./locales"},{provide:rL,useFactory:e=>e.navigator.language,deps:[Yj]},{provide:Xj,useValue:new ez(uz,cz)},{provide:eL,useValue:!0},{provide:tL,useFactory:e=>(t,n)=>e.send("logout",{expired:t,userId:n}),deps:[v]},{provide:nL,useValue:null},{provide:oL,useValue:!0},{provide:hn,useClass:class{constructor(e){this.storageService=e}getAppId(){return this.makeAndGetAppId("appId")}getAnonymousAppId(){return this.makeAndGetAppId("anonymousAppId")}makeAndGetAppId(e){return LN(this,void 0,void 0,(function*(){const t=yield this.storageService.get(e,{htmlStorageLocation:HN.Local});if(null!=t)return t;const n=N.c.newGuid();return yield this.storageService.save(e,n,{htmlStorageLocation:HN.Local}),n}))}},deps:[ZU]},{provide:Zr,useClass:_N,deps:[we,T.s]},{provide:h,useClass:class{constructor(e,t,n,i,r,o,a,s,l,d,c,p){this.cryptoService=e,this.apiService=t,this.tokenService=n,this.appIdService=i,this.platformUtilsService=r,this.messagingService=o,this.logService=a,this.keyConnectorService=s,this.environmentService=l,this.stateService=d,this.twoFactorService=c,this.i18nService=p}get email(){return this.logInStrategy instanceof nV?this.logInStrategy.email:null}get masterPasswordHash(){return this.logInStrategy instanceof nV?this.logInStrategy.masterPasswordHash:null}logIn(e){return sV(this,void 0,void 0,(function*(){let t;this.clearState(),e.type===ve.Password?t=new nV(this.cryptoService,this.apiService,this.tokenService,this.appIdService,this.platformUtilsService,this.messagingService,this.logService,this.stateService,this.twoFactorService,this):e.type===ve.Sso?t=new oV(this.cryptoService,this.apiService,this.tokenService,this.appIdService,this.platformUtilsService,this.messagingService,this.logService,this.stateService,this.twoFactorService,this.keyConnectorService):e.type===ve.Api&&(t=new XN(this.cryptoService,this.apiService,this.tokenService,this.appIdService,this.platformUtilsService,this.messagingService,this.logService,this.stateService,this.twoFactorService,this.environmentService,this.keyConnectorService));const n=yield t.logIn(e);return(null==n?void 0:n.requiresTwoFactor)&&this.saveState(t),n}))}logInTwoFactor(e,t){return sV(this,void 0,void 0,(function*(){if(null==this.logInStrategy)throw new Error(this.i18nService.t("sessionTimeout"));try{const n=yield this.logInStrategy.logInTwoFactor(e,t);return n.requiresTwoFactor||n.requiresCaptcha||this.clearState(),n}catch(n){throw n instanceof wa.i||this.clearState(),n}}))}logOut(e){e(),this.messagingService.send("loggedOut")}authingWithApiKey(){return this.logInStrategy instanceof XN}authingWithSso(){return this.logInStrategy instanceof oV}authingWithPassword(){return this.logInStrategy instanceof nV}getAuthStatus(e){return sV(this,void 0,void 0,(function*(){if(!(yield this.stateService.getIsAuthenticated({userId:e})))return i.LoggedOut;(yield this.cryptoService.hasKeyStored(te.Auto,e))&&!(yield this.stateService.getEverBeenUnlocked({userId:e}))&&(yield this.cryptoService.getKey(te.Auto,e));return(yield this.cryptoService.hasKeyInMemory(e))?i.Unlocked:i.Locked}))}makePreloginKey(e,t){return sV(this,void 0,void 0,(function*(){t=t.trim().toLowerCase();let n=null,i=null;try{const e=yield this.apiService.postPrelogin(new aV(t));null!=e&&(n=e.kdf,i=e.kdfIterations)}catch(r){if(null==r||404!==r.statusCode)throw r}return this.cryptoService.makeKey(e,t,n,i)}))}saveState(e){this.logInStrategy=e,this.startSessionTimeout()}clearState(){this.logInStrategy=null,this.clearSessionTimeout()}startSessionTimeout(){this.clearSessionTimeout(),this.sessionTimeout=setTimeout((()=>this.clearState()),12e4)}clearSessionTimeout(){null!=this.sessionTimeout&&clearTimeout(this.sessionTimeout)}},deps:[H.$,T.s,bi,hn,E.P,v,L.$,g.J,ae,P.b,mn,k.D]},{provide:Ur.u,useFactory:(e,t,n,i,r,o,a,s)=>new AV(e,t,n,i,r,(()=>o.get(za)),a,s),deps:[H.$,QU,T.s,$U,k.D,o.Injector,L.$,P.b]},{provide:Rr.s,useClass:class{constructor(e,t,n,i,r){this.cryptoService=e,this.i18nService=t,this.cipherService=n,this.stateService=i,this.broadcasterService=r,this._folders=new FU.X([]),this._folderViews=new FU.X([]),this.folders$=this._folders.asObservable(),this.folderViews$=this._folderViews.asObservable(),this.stateService.activeAccount.subscribe((e=>mH(this,void 0,void 0,(function*(){if(null==N.c.global.bitwardenContainerService)return;if(null==e)return this._folders.next([]),void this._folderViews.next([]);const t=yield this.stateService.getEncryptedFolders();yield this.updateObservables(t)})))),this.broadcasterService.subscribe("FolderService",(e=>mH(this,void 0,void 0,(function*(){switch(e.command){case"unlocked":{const e=yield this.stateService.getEncryptedFolders();yield this.updateObservables(e);break}}}))))}clearCache(){return mH(this,void 0,void 0,(function*(){this._folderViews.next([])}))}encrypt(e,t){return mH(this,void 0,void 0,(function*(){const n=new uH.g;return n.id=e.id,n.name=yield this.cryptoService.encrypt(e.name,t),n}))}get(e){return mH(this,void 0,void 0,(function*(){return this._folders.getValue().find((t=>t.id===e))}))}upsert(e){return mH(this,void 0,void 0,(function*(){let t=yield this.stateService.getEncryptedFolders();if(null==t&&(t={}),e instanceof cH){const n=e;t[n.id]=n}else e.forEach((e=>{t[e.id]=e}));yield this.updateObservables(t),yield this.stateService.setEncryptedFolders(t)}))}replace(e){return mH(this,void 0,void 0,(function*(){yield this.updateObservables(e),yield this.stateService.setEncryptedFolders(e)}))}clear(e){return mH(this,void 0,void 0,(function*(){null!=e&&e!=(yield this.stateService.getUserId())||(this._folders.next([]),this._folderViews.next([])),yield this.stateService.setEncryptedFolders(null,{userId:e})}))}delete(e){return mH(this,void 0,void 0,(function*(){const t=yield this.stateService.getEncryptedFolders();if(null==t)return;if("string"==typeof e){if(null==t[e])return;delete t[e]}else e.forEach((e=>{delete t[e]}));yield this.updateObservables(t),yield this.stateService.setEncryptedFolders(t);const n=yield this.stateService.getEncryptedCiphers();if(null!=n){const t=[];for(const i in n)n[i].folderId===e&&(n[i].folderId=null,t.push(n[i]));t.length>0&&this.cipherService.upsert(t)}}))}updateObservables(e){return mH(this,void 0,void 0,(function*(){const t=Object.values(e||{}).map((e=>new uH.g(e))),n=t.map((e=>e.decrypt())),i=yield Promise.all(n);i.sort(N.c.getSortFunction(this.i18nService,"name"));const r=new ks.a;r.name=this.i18nService.t("noneFolder"),i.push(r),this._folders.next(t),this._folderViews.next(i)}))}},deps:[H.$,k.D,Ur.u,P.b,Ci]},{provide:Rr.G,useExisting:Rr.s},{provide:Ps,useClass:class{constructor(e,t){this.folderService=e,this.apiService=t}save(e){return pH(this,void 0,void 0,(function*(){const t=new Mr.i(e);let n;null==e.id?(n=yield this.postFolder(t),e.id=n.id):n=yield this.putFolder(e.id,t);const i=new cH(n);yield this.folderService.upsert(i)}))}delete(e){return pH(this,void 0,void 0,(function*(){yield this.deleteFolder(e),yield this.folderService.delete(e)}))}get(e){return pH(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/folders/"+e,null,!0,!0);return new kN(t)}))}postFolder(e){return pH(this,void 0,void 0,(function*(){const t=yield this.apiService.send("POST","/folders",e,!0,!0);return new kN(t)}))}putFolder(e,t){return pH(this,void 0,void 0,(function*(){const n=yield this.apiService.send("PUT","/folders/"+e,t,!0,!0);return new kN(n)}))}deleteFolder(e){return this.apiService.send("DELETE","/folders/"+e,null,!0,!1)}},deps:[Rr.s,T.s]},{provide:L.$,useFactory:()=>new MV.d(!1)},{provide:Jr.a,useClass:class{constructor(e,t,n){this.cryptoService=e,this.i18nService=t,this.stateService=n}clearCache(e){return BV(this,void 0,void 0,(function*(){yield this.stateService.setDecryptedCollections(null,{userId:e})}))}encrypt(e){return BV(this,void 0,void 0,(function*(){if(null==e.organizationId)throw new Error("Collection has no organization id.");const t=yield this.cryptoService.getOrgKey(e.organizationId);if(null==t)throw new Error("No key for this collection's organization.");const n=new pm.F;return n.id=e.id,n.organizationId=e.organizationId,n.readOnly=e.readOnly,n.name=yield this.cryptoService.encrypt(e.name,t),n}))}decryptMany(e){return BV(this,void 0,void 0,(function*(){if(null==e)return[];const t=[],n=[];return e.forEach((e=>{n.push(e.decrypt().then((e=>t.push(e))))})),yield Promise.all(n),t.sort(N.c.getSortFunction(this.i18nService,"name"))}))}get(e){return BV(this,void 0,void 0,(function*(){const t=yield this.stateService.getEncryptedCollections();return null!=t&&t.hasOwnProperty(e)?new pm.F(t[e]):null}))}getAll(){return BV(this,void 0,void 0,(function*(){const e=yield this.stateService.getEncryptedCollections(),t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(new pm.F(e[n]));return t}))}getAllDecrypted(){return BV(this,void 0,void 0,(function*(){let e=yield this.stateService.getDecryptedCollections();if(null!=e)return e;if(!(yield this.cryptoService.hasKey()))throw new Error("No key.");const t=yield this.getAll();return e=yield this.decryptMany(t),yield this.stateService.setDecryptedCollections(e),e}))}getAllNested(e=null){return BV(this,void 0,void 0,(function*(){null==e&&(e=yield this.getAllDecrypted());const t=[];return e.forEach((e=>{const n=new TV.n;n.id=e.id,n.organizationId=e.organizationId;const i=null!=e.name?e.name.replace(/^\/+|\/+$/g,"").split("/"):[];OV.L.nestedTraverse(t,0,i,n,null,"/")})),t}))}getNested(e){return BV(this,void 0,void 0,(function*(){const t=yield this.getAllNested();return OV.L.getTreeNodeObject(t,e)}))}upsert(e){return BV(this,void 0,void 0,(function*(){let t=yield this.stateService.getEncryptedCollections();if(null==t&&(t={}),e instanceof cm.Z){const n=e;t[n.id]=n}else e.forEach((e=>{t[e.id]=e}));yield this.replace(t)}))}replace(e){return BV(this,void 0,void 0,(function*(){yield this.clearCache(),yield this.stateService.setEncryptedCollections(e)}))}clear(e){return BV(this,void 0,void 0,(function*(){yield this.clearCache(e),yield this.stateService.setEncryptedCollections(null,{userId:e})}))}delete(e){return BV(this,void 0,void 0,(function*(){const t=yield this.stateService.getEncryptedCollections();null!=t&&("string"==typeof e?delete t[e]:e.forEach((e=>{delete t[e]})),yield this.replace(t))}))}},deps:[H.$,k.D,P.b]},{provide:ae,useClass:class{constructor(e){this.stateService=e,this.urlsSubject=new xn.x,this.urls=this.urlsSubject,this.stateService.activeAccount.subscribe((()=>$V(this,void 0,void 0,(function*(){yield this.setUrlsFromStorage()}))))}hasBaseUrl(){return null!=this.baseUrl}getNotificationsUrl(){return null!=this.notificationsUrl?this.notificationsUrl:null!=this.baseUrl?this.baseUrl+"/notifications":"https://notifications.bitwarden.com"}getWebVaultUrl(){return null!=this.webVaultUrl?this.webVaultUrl:this.baseUrl?this.baseUrl:"https://vault.bitwarden.com"}getSendUrl(){return"https://vault.bitwarden.com"===this.getWebVaultUrl()?"https://send.bitwarden.com/#":this.getWebVaultUrl()+"/#/send/"}getIconsUrl(){return null!=this.iconsUrl?this.iconsUrl:this.baseUrl?this.baseUrl+"/icons":"https://icons.bitwarden.net"}getApiUrl(){return null!=this.apiUrl?this.apiUrl:this.baseUrl?this.baseUrl+"/api":"https://api.bitwarden.com"}getIdentityUrl(){return null!=this.identityUrl?this.identityUrl:this.baseUrl?this.baseUrl+"/identity":"https://identity.bitwarden.com"}getEventsUrl(){return null!=this.eventsUrl?this.eventsUrl:this.baseUrl?this.baseUrl+"/events":"https://events.bitwarden.com"}getKeyConnectorUrl(){return this.keyConnectorUrl}setUrlsFromStorage(){return $V(this,void 0,void 0,(function*(){const e=yield this.stateService.getEnvironmentUrls(),t=new tz;this.baseUrl=t.base=e.base,this.webVaultUrl=e.webVault,this.apiUrl=t.api=e.api,this.identityUrl=t.identity=e.identity,this.iconsUrl=e.icons,this.notificationsUrl=e.notifications,this.eventsUrl=t.events=e.events,this.keyConnectorUrl=e.keyConnector}))}setUrls(e){return $V(this,void 0,void 0,(function*(){return e.base=this.formatUrl(e.base),e.webVault=this.formatUrl(e.webVault),e.api=this.formatUrl(e.api),e.identity=this.formatUrl(e.identity),e.icons=this.formatUrl(e.icons),e.notifications=this.formatUrl(e.notifications),e.events=this.formatUrl(e.events),e.keyConnector=this.formatUrl(e.keyConnector),yield this.stateService.setEnvironmentUrls({base:e.base,api:e.api,identity:e.identity,webVault:e.webVault,icons:e.icons,notifications:e.notifications,events:e.events,keyConnector:e.keyConnector}),this.baseUrl=e.base,this.webVaultUrl=e.webVault,this.apiUrl=e.api,this.identityUrl=e.identity,this.iconsUrl=e.icons,this.notificationsUrl=e.notifications,this.eventsUrl=e.events,this.keyConnectorUrl=e.keyConnector,this.urlsSubject.next(e),e}))}getUrls(){return{base:this.baseUrl,webVault:this.webVaultUrl,api:this.apiUrl,identity:this.identityUrl,icons:this.iconsUrl,notifications:this.notificationsUrl,events:this.eventsUrl,keyConnector:this.keyConnectorUrl}}formatUrl(e){return null==e||""===e?null:((e=e.replace(/\/+$/g,"")).startsWith("http://")||e.startsWith("https://")||(e="https://"+e),e.trim())}},deps:[P.b]},{provide:io,useClass:class{constructor(e,t){this.cryptoFunctionService=e,this.logService=t}getCode(e){return Fj(this,void 0,void 0,(function*(){if(null==e)return null;let t=30,n="sha1",i=6,r=e;const o=0===e.toLowerCase().indexOf("otpauth://"),a=!o&&0===e.toLowerCase().indexOf("steam://");if(o){const o=N.c.getQueryParams(e);if(o.has("digits")&&null!=o.get("digits"))try{const e=parseInt(o.get("digits").trim(),null);e>10?i=10:e>0&&(i=e)}catch(v){this.logService.error("Invalid digits param.")}if(o.has("period")&&null!=o.get("period"))try{const e=parseInt(o.get("period").trim(),null);e>0&&(t=e)}catch(g){this.logService.error("Invalid period param.")}if(o.has("secret")&&null!=o.get("secret")&&(r=o.get("secret")),o.has("algorithm")&&null!=o.get("algorithm")){const e=o.get("algorithm").toLowerCase();"sha1"!==e&&"sha256"!==e&&"sha512"!==e||(n=e)}}else a&&(r=e.substr("steam://".length),i=5);const s=Math.round((new Date).getTime()/1e3),l=this.leftPad(this.decToHex(Math.floor(s/t)),16,"0"),d=N.c.fromHexToArray(l),c=this.b32ToBytes(r);if(!c.length||!d.length)return null;const p=yield this.sign(c,d,n);if(0===p.length)return null;const u=15&p[p.length-1],m=(127&p[u])<<24|(255&p[u+1])<<16|(255&p[u+2])<<8|255&p[u+3];let h="";if(a){let e=2147483647&m;for(let t=0;t<i;t++)h+=Uj[e%Uj.length],e=Math.trunc(e/Uj.length)}else h=(m%Math.pow(10,i)).toString(),h=this.leftPad(h,i,"0");return h}))}getTimeInterval(e){let t=30;if(null!=e&&0===e.toLowerCase().indexOf("otpauth://")){const i=N.c.getQueryParams(e);if(i.has("period")&&null!=i.get("period"))try{t=parseInt(i.get("period").trim(),null)}catch(n){this.logService.error("Invalid period param.")}}return t}leftPad(e,t,n){return t+1>=e.length&&(e=Array(t+1-e.length).join(n)+e),e}decToHex(e){return(e<15.5?"0":"")+Math.round(e).toString(16)}b32ToHex(e){e=e.toUpperCase();let t="";for(let r=0;r<e.length;r++)Rj.indexOf(e[r])<0||(t+=e[r]);e=t;let n="",i="";for(let r=0;r<e.length;r++){const t=Rj.indexOf(e.charAt(r));t<0||(n+=this.leftPad(t.toString(2),5,"0"))}for(let r=0;r+4<=n.length;r+=4){const e=n.substr(r,4);i+=parseInt(e,2).toString(16)}return i}b32ToBytes(e){return N.c.fromHexToArray(this.b32ToHex(e))}sign(e,t,n){return Fj(this,void 0,void 0,(function*(){const i=yield this.cryptoFunctionService.hmac(t.buffer,e.buffer,n);return new Uint8Array(i)}))}},deps:[we,L.$,P.b]},{provide:bi,useClass:gj,deps:[P.b]},{provide:H.$,useClass:qV,deps:[we,_U,E.P,L.$,P.b]},{provide:be,useClass:class{constructor(e,t,n){this.cryptoService=e,this.policyService=t,this.stateService=n}generatePassword(e){return TH(this,void 0,void 0,(function*(){const t=Object.assign({},BH,e);if("passphrase"===t.type)return this.generatePassphrase(e);this.sanitizePasswordLength(t,!0);const n=t.minUppercase+t.minLowercase+t.minNumber+t.minSpecial;t.length<n&&(t.length=n);const i=[];if(t.lowercase&&t.minLowercase>0)for(let e=0;e<t.minLowercase;e++)i.push("l");if(t.uppercase&&t.minUppercase>0)for(let e=0;e<t.minUppercase;e++)i.push("u");if(t.number&&t.minNumber>0)for(let e=0;e<t.minNumber;e++)i.push("n");if(t.special&&t.minSpecial>0)for(let e=0;e<t.minSpecial;e++)i.push("s");for(;i.length<t.length;)i.push("a");yield this.shuffleArray(i);let r="",o="abcdefghijkmnopqrstuvwxyz";t.ambiguous&&(o+="l"),t.lowercase&&(r+=o);let a="ABCDEFGHJKLMNPQRSTUVWXYZ";t.ambiguous&&(a+="IO"),t.uppercase&&(r+=a);let s="23456789";t.ambiguous&&(s+="01"),t.number&&(r+=s);const l="!@#$%^&*";t.special&&(r+=l);let d="";for(let e=0;e<t.length;e++){let t;switch(i[e]){case"l":t=o;break;case"u":t=a;break;case"n":t=s;break;case"s":t=l;break;case"a":t=r}const n=yield this.cryptoService.randomNumber(0,t.length-1);d+=t.charAt(n)}return d}))}generatePassphrase(e){return TH(this,void 0,void 0,(function*(){const t=Object.assign({},BH,e);(null==t.numWords||t.numWords<=2)&&(t.numWords=BH.numWords),(null==t.wordSeparator||0===t.wordSeparator.length||t.wordSeparator.length>1)&&(t.wordSeparator=" "),null==t.capitalize&&(t.capitalize=!1),null==t.includeNumber&&(t.includeNumber=!1);const n=RV.length-1,i=new Array(t.numWords);for(let e=0;e<t.numWords;e++){const r=yield this.cryptoService.randomNumber(0,n);t.capitalize?i[e]=this.capitalize(RV[r]):i[e]=RV[r]}return t.includeNumber&&(yield this.appendRandomNumberToRandomWord(i)),i.join(t.wordSeparator)}))}getOptions(){return TH(this,void 0,void 0,(function*(){let e=yield this.stateService.getPasswordGenerationOptions();e=null==e?Object.assign({},BH):Object.assign({},BH,e),yield this.stateService.setPasswordGenerationOptions(e);const t=yield this.enforcePasswordGeneratorPoliciesOnOptions(e);return e=t[0],[e,t[1]]}))}enforcePasswordGeneratorPoliciesOnOptions(e){return TH(this,void 0,void 0,(function*(){let t=yield this.getPasswordGeneratorPolicyOptions();return null!=t?(e.length<t.minLength&&(e.length=t.minLength),t.useUppercase&&(e.uppercase=!0),t.useLowercase&&(e.lowercase=!0),t.useNumbers&&(e.number=!0),e.minNumber<t.numberCount&&(e.minNumber=t.numberCount),t.useSpecial&&(e.special=!0),e.minSpecial<t.specialCount&&(e.minSpecial=t.specialCount),e.minSpecial+e.minNumber>e.length&&(e.minSpecial=e.length-e.minNumber),e.numWords<t.minNumberWords&&(e.numWords=t.minNumberWords),t.capitalize&&(e.capitalize=!0),t.includeNumber&&(e.includeNumber=!0),"password"!==t.defaultType&&"passphrase"!==t.defaultType||(e.type=t.defaultType)):t=new OH,[e,t]}))}getPasswordGeneratorPolicyOptions(){return TH(this,void 0,void 0,(function*(){const e=null==this.policyService?null:yield this.policyService.getAll(Kr.M.PasswordGenerator);let t=null;return null==e||0===e.length||e.forEach((e=>{e.enabled&&null!=e.data&&(null==t&&(t=new OH),null!=e.data.defaultType&&"password"!==t.defaultType&&(t.defaultType=e.data.defaultType),null!=e.data.minLength&&e.data.minLength>t.minLength&&(t.minLength=e.data.minLength),e.data.useUpper&&(t.useUppercase=!0),e.data.useLower&&(t.useLowercase=!0),e.data.useNumbers&&(t.useNumbers=!0),null!=e.data.minNumbers&&e.data.minNumbers>t.numberCount&&(t.numberCount=e.data.minNumbers),e.data.useSpecial&&(t.useSpecial=!0),null!=e.data.minSpecial&&e.data.minSpecial>t.specialCount&&(t.specialCount=e.data.minSpecial),null!=e.data.minNumberWords&&e.data.minNumberWords>t.minNumberWords&&(t.minNumberWords=e.data.minNumberWords),e.data.capitalize&&(t.capitalize=!0),e.data.includeNumber&&(t.includeNumber=!0))})),t}))}saveOptions(e){return TH(this,void 0,void 0,(function*(){yield this.stateService.setPasswordGenerationOptions(e)}))}getHistory(){return TH(this,void 0,void 0,(function*(){if(!(yield this.cryptoService.hasKey()))return new Array;if(null==(yield this.stateService.getDecryptedPasswordGenerationHistory())){const e=yield this.stateService.getEncryptedPasswordGenerationHistory(),t=yield this.decryptHistory(e);yield this.stateService.setDecryptedPasswordGenerationHistory(t)}const e=yield this.stateService.getDecryptedPasswordGenerationHistory();return null!=e?e:new Array}))}addHistory(e){return TH(this,void 0,void 0,(function*(){if(!(yield this.cryptoService.hasKey()))return;const t=yield this.getHistory();if(this.matchesPrevious(e,t))return;t.unshift(new AH(e,Date.now())),t.length>100&&t.pop();const n=yield this.encryptHistory(t);return yield this.stateService.setEncryptedPasswordGenerationHistory(n)}))}clear(e){return TH(this,void 0,void 0,(function*(){yield this.stateService.setEncryptedPasswordGenerationHistory(null,{userId:e}),yield this.stateService.setDecryptedPasswordGenerationHistory(null,{userId:e})}))}passwordStrength(e,t=null){if(null==e||0===e.length)return null;let n=["bitwarden","bit","warden"];null!=t&&t.length>0&&(n=n.concat(t));const i=Array.from(new Set(n));return PH(e,i)}normalizeOptions(e,t){e.minLowercase=0,e.minUppercase=0,!e.length||e.length<5?e.length=5:e.length>128&&(e.length=128),e.length<t.minLength&&(e.length=t.minLength),e.minNumber?e.minNumber>e.length?e.minNumber=e.length:e.minNumber>9&&(e.minNumber=9):e.minNumber=0,e.minNumber<t.numberCount&&(e.minNumber=t.numberCount),e.minSpecial?e.minSpecial>e.length?e.minSpecial=e.length:e.minSpecial>9&&(e.minSpecial=9):e.minSpecial=0,e.minSpecial<t.specialCount&&(e.minSpecial=t.specialCount),e.minSpecial+e.minNumber>e.length&&(e.minSpecial=e.length-e.minNumber),null==e.numWords||e.length<3?e.numWords=3:e.numWords>20&&(e.numWords=20),e.numWords<t.minNumberWords&&(e.numWords=t.minNumberWords),null!=e.wordSeparator&&e.wordSeparator.length>1&&(e.wordSeparator=e.wordSeparator[0]),this.sanitizePasswordLength(e,!1)}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}appendRandomNumberToRandomWord(e){return TH(this,void 0,void 0,(function*(){if(null==e||e.length<=0)return;const t=yield this.cryptoService.randomNumber(0,e.length-1),n=yield this.cryptoService.randomNumber(0,9);e[t]=e[t]+n}))}encryptHistory(e){return TH(this,void 0,void 0,(function*(){if(null==e||0===e.length)return Promise.resolve([]);const t=e.map((e=>TH(this,void 0,void 0,(function*(){const t=yield this.cryptoService.encrypt(e.password);return new AH(t.encryptedString,e.date)}))));return yield Promise.all(t)}))}decryptHistory(e){return TH(this,void 0,void 0,(function*(){if(null==e||0===e.length)return Promise.resolve([]);const t=e.map((e=>TH(this,void 0,void 0,(function*(){const t=yield this.cryptoService.decryptToUtf8(new ie._(e.password));return new AH(t,e.date)}))));return yield Promise.all(t)}))}matchesPrevious(e,t){return null!=t&&0!==t.length&&t[t.length-1].password===e}shuffleArray(e){return TH(this,void 0,void 0,(function*(){for(let t=e.length-1;t>0;t--){const n=yield this.cryptoService.randomNumber(0,t);[e[t],e[n]]=[e[n],e[t]]}}))}sanitizePasswordLength(e,t){let n=0,i=0,r=e.minNumber,o=e.minSpecial;e.uppercase&&e.minUppercase<=0?n=1:e.uppercase||(n=0),e.lowercase&&e.minLowercase<=0?i=1:e.lowercase||(i=0),e.number&&e.minNumber<=0?r=1:e.number||(r=0),e.special&&e.minSpecial<=0?o=1:e.special||(o=0),(!e.length||e.length<1)&&(e.length=10);const a=n+i+r+o;e.length<a&&(e.length=a),t&&(e.minUppercase=n,e.minLowercase=i,e.minNumber=r,e.minSpecial=o)}},deps:[H.$,j.d,P.b]},{provide:HR,useClass:class{constructor(e,t,n){this.cryptoService=e,this.stateService=t,this.apiService=n}generateUsername(e){return"catchall"===e.type?this.generateCatchall(e):"subaddress"===e.type?this.generateSubaddress(e):"forwarded"===e.type?this.generateForwarded(e):this.generateWord(e)}generateWord(e){return Vj(this,void 0,void 0,(function*(){const t=Object.assign({},Hj,e);null==t.wordCapitalize&&(t.wordCapitalize=!0),null==t.wordIncludeNumber&&(t.wordIncludeNumber=!0);const n=yield this.cryptoService.randomNumber(0,RV.length-1);let i=RV[n];if(t.wordCapitalize&&(i=i.charAt(0).toUpperCase()+i.slice(1)),t.wordIncludeNumber){const e=yield this.cryptoService.randomNumber(1,9999);i+=this.zeroPad(e.toString(),4)}return i}))}generateSubaddress(e){return Vj(this,void 0,void 0,(function*(){const t=Object.assign({},Hj,e),n=t.subaddressEmail;if(null==n||n.length<3)return t.subaddressEmail;const i=n.indexOf("@");if(i<1||i>=n.length-1)return n;null==t.subaddressType&&(t.subaddressType="random");const r=n.substr(0,i),o=n.substr(i+1,n.length);let a="";return"random"===t.subaddressType?a=yield this.randomString(8):"website-name"===t.subaddressType&&(a=t.website),r+"+"+a+"@"+o}))}generateCatchall(e){return Vj(this,void 0,void 0,(function*(){const t=Object.assign({},Hj,e);if(null==t.catchallDomain||""===t.catchallDomain)return null;null==t.catchallType&&(t.catchallType="random");let n="";return"random"===t.catchallType?n=yield this.randomString(8):"website-name"===t.catchallType&&(n=t.website),n+"@"+t.catchallDomain}))}generateForwarded(e){return Vj(this,void 0,void 0,(function*(){const t=Object.assign({},Hj,e);return null==t.forwardedService?null:"simplelogin"===t.forwardedService?null==t.forwardedSimpleLoginApiKey||""===t.forwardedSimpleLoginApiKey?null:this.generateSimpleLoginAlias(t.forwardedSimpleLoginApiKey,t.website):"anonaddy"===t.forwardedService?null==t.forwardedAnonAddyApiToken||""===t.forwardedAnonAddyApiToken||null==t.forwardedAnonAddyDomain||""==t.forwardedAnonAddyDomain?null:this.generateAnonAddyAlias(t.forwardedAnonAddyApiToken,t.forwardedAnonAddyDomain,t.website):"firefoxrelay"===t.forwardedService?null==t.forwardedFirefoxApiToken||""===t.forwardedFirefoxApiToken?null:this.generateFirefoxRelayAlias(t.forwardedFirefoxApiToken,t.website):null}))}getOptions(){return Vj(this,void 0,void 0,(function*(){let e=yield this.stateService.getUsernameGenerationOptions();return e=null==e?Object.assign({},Hj):Object.assign({},Hj,e),yield this.stateService.setUsernameGenerationOptions(e),e}))}saveOptions(e){return Vj(this,void 0,void 0,(function*(){yield this.stateService.setUsernameGenerationOptions(e)}))}randomString(e){return Vj(this,void 0,void 0,(function*(){let t="";const n="abcdefghijklmnopqrstuvwxyz1234567890";for(let i=0;i<e;i++){const e=yield this.cryptoService.randomNumber(0,n.length-1);t+=n.charAt(e)}return t}))}zeroPad(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e}generateSimpleLoginAlias(e,t){return Vj(this,void 0,void 0,(function*(){if(null==e||""===e)throw"Invalid SimpleLogin API key.";const n={redirect:"manual",cache:"no-store",method:"POST",headers:new Headers({Authentication:e,"Content-Type":"application/json"})};let i="https://app.simplelogin.io/api/alias/random/new";null!=t&&(i+="?hostname="+t),n.body=JSON.stringify({note:(null!=t?"Website: "+t+". ":"")+"Generated by Bitwarden."});const r=new Request(i,n),o=yield this.apiService.nativeFetch(r);if(200===o.status||201===o.status){return(yield o.json()).alias}if(401===o.status)throw"Invalid SimpleLogin API key.";try{const e=yield o.json();if(null!=(null==e?void 0:e.error))throw"SimpleLogin error:"+e.error}catch(a){}throw"Unknown SimpleLogin error occurred."}))}generateAnonAddyAlias(e,t,n){var i;return Vj(this,void 0,void 0,(function*(){if(null==e||""===e)throw"Invalid AnonAddy API token.";const r={redirect:"manual",cache:"no-store",method:"POST",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/json"})};r.body=JSON.stringify({domain:t,description:(null!=n?"Website: "+n+". ":"")+"Generated by Bitwarden."});const o=new Request("https://app.anonaddy.com/api/v1/aliases",r),a=yield this.apiService.nativeFetch(o);if(200===a.status||201===a.status){const e=yield a.json();return null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.email}if(401===a.status)throw"Invalid AnonAddy API token.";throw"Unknown AnonAddy error occurred."}))}generateFirefoxRelayAlias(e,t){return Vj(this,void 0,void 0,(function*(){if(null==e||""===e)throw"Invalid Firefox Relay API token.";const n={redirect:"manual",cache:"no-store",method:"POST",headers:new Headers({Authorization:"Token "+e,"Content-Type":"application/json"})};n.body=JSON.stringify({enabled:!0,generated_for:t,description:(null!=t?t+" - ":"")+"Generated by Bitwarden."});const i=new Request("https://relay.firefox.com/api/v1/relayaddresses/",n),r=yield this.apiService.nativeFetch(i);if(200===r.status||201===r.status){const e=yield r.json();return null==e?void 0:e.full_address}if(401===r.status)throw"Invalid Firefox Relay API token.";throw"Unknown Firefox Relay error occurred."}))}},deps:[H.$,P.b,T.s]},{provide:T.s,useClass:class{constructor(e,t,n,i,r,o=null){this.tokenService=e,this.platformUtilsService=t,this.environmentService=n,this.appIdService=i,this.logoutCallback=r,this.customUserAgent=o,this.isWebClient=!1,this.isDesktopClient=!1,this.device=t.getDevice(),this.deviceType=this.device.toString(),this.isWebClient=this.device===kc.IEBrowser||this.device===kc.ChromeBrowser||this.device===kc.EdgeBrowser||this.device===kc.FirefoxBrowser||this.device===kc.OperaBrowser||this.device===kc.SafariBrowser||this.device===kc.UnknownBrowser||this.device===kc.VivaldiBrowser,this.isDesktopClient=this.device===kc.WindowsDesktop||this.device===kc.MacOsDesktop||this.device===kc.LinuxDesktop}postIdentityToken(e){return jN(this,void 0,void 0,(function*(){const t=new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Accept:"application/json","Device-Type":this.deviceType});null!=this.customUserAgent&&t.set("User-Agent",this.customUserAgent),e.alterIdentityTokenHeaders(t);const n=e instanceof vz?e.toIdentityToken():e.toIdentityToken(this.platformUtilsService.getClientType()),i=yield this.fetch(new Request(this.environmentService.getIdentityUrl()+"/connect/token",{body:this.qsStringify(n),credentials:this.getCredentials(),cache:"no-store",headers:t,method:"POST"}));let r=null;if(this.isJsonResponse(i)&&(r=yield i.json()),null!=r){if(200===i.status)return new Uz(r);if(400===i.status&&r.TwoFactorProviders2&&Object.keys(r.TwoFactorProviders2).length)return yield this.tokenService.clearTwoFactorToken(),new zz(r);if(400===i.status&&r.HCaptcha_SiteKey&&Object.keys(r.HCaptcha_SiteKey).length)return new Rz(r)}return Promise.reject(new wa.i(r,i.status,!0))}))}refreshIdentityToken(){return jN(this,void 0,void 0,(function*(){try{yield this.doAuthRefresh()}catch(e){return Promise.reject(null)}}))}getProfile(){return jN(this,void 0,void 0,(function*(){const e=yield this.send("GET","/accounts/profile",null,!0,!0);return new pN(e)}))}getUserSubscription(){return jN(this,void 0,void 0,(function*(){const e=yield this.send("GET","/accounts/subscription",null,!0,!0);return new Zz(e)}))}getTaxInfo(){return jN(this,void 0,void 0,(function*(){const e=yield this.send("GET","/accounts/tax",null,!0,!0);return new AN(e)}))}putProfile(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("PUT","/accounts/profile",e,!0,!0);return new pN(t)}))}putTaxInfo(e){return this.send("PUT","/accounts/tax",e,!0,!1)}postPrelogin(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/accounts/prelogin",e,!1,!0,this.platformUtilsService.isDev()?this.environmentService.getIdentityUrl():this.environmentService.getApiUrl());return new mN(t)}))}postEmailToken(e){return this.send("POST","/accounts/email-token",e,!0,!1)}postEmail(e){return this.send("POST","/accounts/email",e,!0,!1)}postPassword(e){return this.send("POST","/accounts/password",e,!0,!1)}setPassword(e){return this.send("POST","/accounts/set-password",e,!0,!1)}postSetKeyConnectorKey(e){return this.send("POST","/accounts/set-key-connector-key",e,!0,!1)}postSecurityStamp(e){return this.send("POST","/accounts/security-stamp",e,!0,!1)}deleteAccount(e){return this.send("DELETE","/accounts",e,!0,!1)}getAccountRevisionDate(){return jN(this,void 0,void 0,(function*(){return yield this.send("GET","/accounts/revision-date",null,!0,!0)}))}postPasswordHint(e){return this.send("POST","/accounts/password-hint",e,!1,!1)}postRegister(e){return this.send("POST","/accounts/register",e,!1,!1,this.platformUtilsService.isDev()?this.environmentService.getIdentityUrl():this.environmentService.getApiUrl())}postPremium(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/accounts/premium",e,!0,!0);return new uN(t)}))}postIapCheck(e){return jN(this,void 0,void 0,(function*(){return this.send("POST","/accounts/iap-check",e,!0,!1)}))}postReinstatePremium(){return this.send("POST","/accounts/reinstate-premium",null,!0,!1)}postCancelPremium(){return this.send("POST","/accounts/cancel-premium",null,!0,!1)}postAccountStorage(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/accounts/storage",e,!0,!0);return new uN(t)}))}postAccountPayment(e){return this.send("POST","/accounts/payment",e,!0,!1)}postAccountLicense(e){return this.send("POST","/accounts/license",e,!0,!1)}postAccountKeys(e){return this.send("POST","/accounts/keys",e,!0,!1)}postAccountKey(e){return this.send("POST","/accounts/key",e,!0,!1)}postAccountVerifyEmail(){return this.send("POST","/accounts/verify-email",null,!0,!1)}postAccountVerifyEmailToken(e){return this.send("POST","/accounts/verify-email-token",e,!1,!1)}postAccountVerifyPassword(e){return this.send("POST","/accounts/verify-password",e,!0,!1)}postAccountRecoverDelete(e){return this.send("POST","/accounts/delete-recover",e,!1,!1)}postAccountRecoverDeleteToken(e){return this.send("POST","/accounts/delete-recover-token",e,!1,!1)}postAccountKdf(e){return this.send("POST","/accounts/kdf",e,!0,!1)}deleteSsoUser(e){return jN(this,void 0,void 0,(function*(){return this.send("DELETE","/accounts/sso/"+e,null,!0,!1)}))}getSsoUserIdentifier(){return jN(this,void 0,void 0,(function*(){return this.send("GET","/accounts/sso/user-identifier",null,!0,!0)}))}postUserApiKey(e,t){return jN(this,void 0,void 0,(function*(){const e=yield this.send("POST","/accounts/api-key",t,!0,!0);return new gz(e)}))}postUserRotateApiKey(e,t){return jN(this,void 0,void 0,(function*(){const e=yield this.send("POST","/accounts/rotate-api-key",t,!0,!0);return new gz(e)}))}putUpdateTempPassword(e){return this.send("PUT","/accounts/update-temp-password",e,!0,!1)}postAccountRequestOTP(){return this.send("POST","/accounts/request-otp",null,!0,!1)}postAccountVerifyOTP(e){return this.send("POST","/accounts/verify-otp",e,!0,!1)}postConvertToKeyConnector(){return this.send("POST","/accounts/convert-to-key-connector",null,!0,!1)}getUserBillingHistory(){return jN(this,void 0,void 0,(function*(){const e=yield this.send("GET","/accounts/billing/history",null,!0,!0);return new wz(e)}))}getUserBillingPayment(){return jN(this,void 0,void 0,(function*(){const e=yield this.send("GET","/accounts/billing/payment-method",null,!0,!0);return new Iz(e)}))}getSend(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/sends/"+e,null,!0,!0);return new IN(t)}))}postSendAccess(e,t,n){return jN(this,void 0,void 0,(function*(){const i=yield this.send("POST","/sends/access/"+e,t,!1,!0,n,(t=>{t.set("Send-Id",e)}));return new bN(i)}))}getSendFileDownloadData(e,t,n){return jN(this,void 0,void 0,(function*(){const i=yield this.send("POST","/sends/"+e.id+"/access/file/"+e.file.id,t,!1,!0,n,(t=>{t.set("Send-Id",e.id)}));return new wN(i)}))}getSends(){return jN(this,void 0,void 0,(function*(){const e=yield this.send("GET","/sends",null,!0,!0);return new Vz(e,IN)}))}postSend(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/sends",e,!0,!0);return new IN(t)}))}postFileTypeSend(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/sends/file/v2",e,!0,!0);return new CN(t)}))}renewSendFileUploadUrl(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("GET","/sends/"+e+"/file/"+t,null,!0,!0);return new CN(n)}))}postSendFile(e,t,n){return this.send("POST","/sends/"+e+"/file/"+t,n,!0,!1)}postSendFileLegacy(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/sends/file",e,!0,!0);return new IN(t)}))}putSend(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("PUT","/sends/"+e,t,!0,!0);return new IN(n)}))}putSendRemovePassword(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("PUT","/sends/"+e+"/remove-password",null,!0,!0);return new IN(t)}))}deleteSend(e){return this.send("DELETE","/sends/"+e,null,!0,!1)}getCipher(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/ciphers/"+e,null,!0,!0);return new pM(t)}))}getFullCipherDetails(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/ciphers/"+e+"/details",null,!0,!0);return new pM(t)}))}getCipherAdmin(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/ciphers/"+e+"/admin",null,!0,!0);return new pM(t)}))}getCiphersOrganization(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/ciphers/organization-details?organizationId="+e,null,!0,!0);return new Vz(t,pM)}))}postCipher(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/ciphers",e,!0,!0);return new pM(t)}))}postCipherCreate(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/ciphers/create",e,!0,!0);return new pM(t)}))}postCipherAdmin(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/ciphers/admin",e,!0,!0);return new pM(t)}))}putCipher(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("PUT","/ciphers/"+e,t,!0,!0);return new pM(n)}))}putCipherAdmin(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("PUT","/ciphers/"+e+"/admin",t,!0,!0);return new pM(n)}))}deleteCipher(e){return this.send("DELETE","/ciphers/"+e,null,!0,!1)}deleteCipherAdmin(e){return this.send("DELETE","/ciphers/"+e+"/admin",null,!0,!1)}deleteManyCiphers(e){return this.send("DELETE","/ciphers",e,!0,!1)}deleteManyCiphersAdmin(e){return this.send("DELETE","/ciphers/admin",e,!0,!1)}putMoveCiphers(e){return this.send("PUT","/ciphers/move",e,!0,!1)}putShareCipher(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("PUT","/ciphers/"+e+"/share",t,!0,!0);return new pM(n)}))}putShareCiphers(e){return this.send("PUT","/ciphers/share",e,!0,!1)}putCipherCollections(e,t){return this.send("PUT","/ciphers/"+e+"/collections",t,!0,!1)}putCipherCollectionsAdmin(e,t){return this.send("PUT","/ciphers/"+e+"/collections-admin",t,!0,!1)}postPurgeCiphers(e,t=null){let n="/ciphers/purge";return null!=t&&(n+="?organizationId="+t),this.send("POST",n,e,!0,!1)}postImportCiphers(e){return this.send("POST","/ciphers/import",e,!0,!1)}postImportOrganizationCiphers(e,t){return this.send("POST","/ciphers/import-organization?organizationId="+e,t,!0,!1)}putDeleteCipher(e){return this.send("PUT","/ciphers/"+e+"/delete",null,!0,!1)}putDeleteCipherAdmin(e){return this.send("PUT","/ciphers/"+e+"/delete-admin",null,!0,!1)}putDeleteManyCiphers(e){return this.send("PUT","/ciphers/delete",e,!0,!1)}putDeleteManyCiphersAdmin(e){return this.send("PUT","/ciphers/delete-admin",e,!0,!1)}putRestoreCipher(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("PUT","/ciphers/"+e+"/restore",null,!0,!0);return new pM(t)}))}putRestoreCipherAdmin(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("PUT","/ciphers/"+e+"/restore-admin",null,!0,!0);return new pM(t)}))}putRestoreManyCiphers(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("PUT","/ciphers/restore",e,!0,!0);return new Vz(t,pM)}))}getAttachmentData(e,t,n){return jN(this,void 0,void 0,(function*(){const i=(null!=n?"/emergency-access/"+n+"/":"/ciphers/")+e+"/attachment/"+t,r=yield this.send("GET",i,null,!0,!0);return new dM(r)}))}postCipherAttachment(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/ciphers/"+e+"/attachment/v2",t,!0,!0);return new fz(n)}))}postCipherAttachmentLegacy(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/ciphers/"+e+"/attachment",t,!0,!0);return new pM(n)}))}postCipherAttachmentAdminLegacy(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/ciphers/"+e+"/attachment-admin",t,!0,!0);return new pM(n)}))}deleteCipherAttachment(e,t){return this.send("DELETE","/ciphers/"+e+"/attachment/"+t,null,!0,!1)}deleteCipherAttachmentAdmin(e,t){return this.send("DELETE","/ciphers/"+e+"/attachment/"+t+"/admin",null,!0,!1)}postShareCipherAttachment(e,t,n,i){return this.send("POST","/ciphers/"+e+"/attachment/"+t+"/share?organizationId="+i,n,!0,!1)}renewAttachmentUploadUrl(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("GET","/ciphers/"+e+"/attachment/"+t+"/renew",null,!0,!0);return new fz(n)}))}postAttachmentFile(e,t,n){return this.send("POST","/ciphers/"+e+"/attachment/"+t,n,!0,!1)}getCollectionDetails(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("GET","/organizations/"+e+"/collections/"+t+"/details",null,!0,!0);return new Az(n)}))}getUserCollections(){return jN(this,void 0,void 0,(function*(){const e=yield this.send("GET","/collections",null,!0,!0);return new Vz(e,kz)}))}getCollections(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/organizations/"+e+"/collections",null,!0,!0);return new Vz(t,kz)}))}getCollectionUsers(e,t){return jN(this,void 0,void 0,(function*(){return(yield this.send("GET","/organizations/"+e+"/collections/"+t+"/users",null,!0,!0)).map((e=>new Ez(e)))}))}postCollection(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/organizations/"+e+"/collections",t,!0,!0);return new kz(n)}))}putCollection(e,t,n){return jN(this,void 0,void 0,(function*(){const i=yield this.send("PUT","/organizations/"+e+"/collections/"+t,n,!0,!0);return new kz(i)}))}putCollectionUsers(e,t,n){return jN(this,void 0,void 0,(function*(){yield this.send("PUT","/organizations/"+e+"/collections/"+t+"/users",n,!0,!1)}))}deleteCollection(e,t){return this.send("DELETE","/organizations/"+e+"/collections/"+t,null,!0,!1)}deleteCollectionUser(e,t,n){return this.send("DELETE","/organizations/"+e+"/collections/"+t+"/user/"+n,null,!0,!1)}getGroupDetails(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("GET","/organizations/"+e+"/groups/"+t+"/details",null,!0,!0);return new Fz(n)}))}getGroups(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/organizations/"+e+"/groups",null,!0,!0);return new Vz(t,Dz)}))}getGroupUsers(e,t){return jN(this,void 0,void 0,(function*(){return yield this.send("GET","/organizations/"+e+"/groups/"+t+"/users",null,!0,!0)}))}postGroup(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/organizations/"+e+"/groups",t,!0,!0);return new Dz(n)}))}putGroup(e,t,n){return jN(this,void 0,void 0,(function*(){const i=yield this.send("PUT","/organizations/"+e+"/groups/"+t,n,!0,!0);return new Dz(i)}))}putGroupUsers(e,t,n){return jN(this,void 0,void 0,(function*(){yield this.send("PUT","/organizations/"+e+"/groups/"+t+"/users",n,!0,!1)}))}deleteGroup(e,t){return this.send("DELETE","/organizations/"+e+"/groups/"+t,null,!0,!1)}deleteGroupUser(e,t,n){return this.send("DELETE","/organizations/"+e+"/groups/"+t+"/user/"+n,null,!0,!1)}getPolicy(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("GET","/organizations/"+e+"/policies/"+t,null,!0,!0);return new $f(n)}))}getPolicies(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/organizations/"+e+"/policies",null,!0,!0);return new Vz(t,$f)}))}getPoliciesByToken(e,t,n,i){return jN(this,void 0,void 0,(function*(){const r=yield this.send("GET","/organizations/"+e+"/policies/token?token="+encodeURIComponent(t)+"&email="+encodeURIComponent(n)+"&organizationUserId="+i,null,!1,!0);return new Vz(r,$f)}))}getPoliciesByInvitedUser(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("GET","/organizations/"+e+"/policies/invited-user?userId="+t,null,!1,!0);return new Vz(n,$f)}))}putPolicy(e,t,n){return jN(this,void 0,void 0,(function*(){const i=yield this.send("PUT","/organizations/"+e+"/policies/"+t,n,!0,!0);return new $f(i)}))}getOrganizationUser(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("GET","/organizations/"+e+"/users/"+t,null,!0,!0);return new aN(n)}))}getOrganizationUserGroups(e,t){return jN(this,void 0,void 0,(function*(){return yield this.send("GET","/organizations/"+e+"/users/"+t+"/groups",null,!0,!0)}))}getOrganizationUsers(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/organizations/"+e+"/users",null,!0,!0);return new Vz(t,oN)}))}getOrganizationUserResetPasswordDetails(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("GET","/organizations/"+e+"/users/"+t+"/reset-password-details",null,!0,!0);return new sN(n)}))}getOrganizationAutoEnrollStatus(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/organizations/"+e+"/auto-enroll-status",null,!0,!0);return new Gz(t)}))}postOrganizationUserInvite(e,t){return this.send("POST","/organizations/"+e+"/users/invite",t,!0,!1)}postOrganizationUserReinvite(e,t){return this.send("POST","/organizations/"+e+"/users/"+t+"/reinvite",null,!0,!1)}postManyOrganizationUserReinvite(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/organizations/"+e+"/users/reinvite",t,!0,!0);return new Vz(n,iN)}))}postOrganizationUserAccept(e,t,n){return this.send("POST","/organizations/"+e+"/users/"+t+"/accept",n,!0,!1)}postOrganizationUserConfirm(e,t,n){return this.send("POST","/organizations/"+e+"/users/"+t+"/confirm",n,!0,!1)}postOrganizationUsersPublicKey(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/organizations/"+e+"/users/public-keys",t,!0,!0);return new Vz(n,nN)}))}postOrganizationUserBulkConfirm(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/organizations/"+e+"/users/confirm",t,!0,!0);return new Vz(n,iN)}))}putOrganizationUser(e,t,n){return this.send("PUT","/organizations/"+e+"/users/"+t,n,!0,!1)}putOrganizationUserGroups(e,t,n){return this.send("PUT","/organizations/"+e+"/users/"+t+"/groups",n,!0,!1)}putOrganizationUserResetPasswordEnrollment(e,t,n){return this.send("PUT","/organizations/"+e+"/users/"+t+"/reset-password-enrollment",n,!0,!1)}putOrganizationUserResetPassword(e,t,n){return this.send("PUT","/organizations/"+e+"/users/"+t+"/reset-password",n,!0,!1)}deleteOrganizationUser(e,t){return this.send("DELETE","/organizations/"+e+"/users/"+t,null,!0,!1)}deleteManyOrganizationUsers(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("DELETE","/organizations/"+e+"/users",t,!0,!0);return new Vz(n,iN)}))}deactivateOrganizationUser(e,t){return this.send("PUT","/organizations/"+e+"/users/"+t+"/deactivate",null,!0,!1)}deactivateManyOrganizationUsers(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("PUT","/organizations/"+e+"/users/deactivate",t,!0,!0);return new Vz(n,iN)}))}activateOrganizationUser(e,t){return this.send("PUT","/organizations/"+e+"/users/"+t+"/activate",null,!0,!1)}activateManyOrganizationUsers(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("PUT","/organizations/"+e+"/users/activate",t,!0,!0);return new Vz(n,iN)}))}getPlans(){return jN(this,void 0,void 0,(function*(){const e=yield this.send("GET","/plans/",null,!0,!0);return new Vz(e,Wz)}))}postImportDirectory(e,t){return jN(this,void 0,void 0,(function*(){return this.send("POST","/organizations/"+e+"/import",t,!0,!1)}))}postPublicImportDirectory(e){return jN(this,void 0,void 0,(function*(){return this.send("POST","/public/organization/import",e,!0,!1)}))}getTaxRates(){return jN(this,void 0,void 0,(function*(){const e=yield this.send("GET","/plans/sales-tax-rates/",null,!0,!0);return new Vz(e,ON)}))}getSettingsDomains(){return jN(this,void 0,void 0,(function*(){const e=yield this.send("GET","/settings/domains",null,!0,!0);return new Bz(e)}))}putSettingsDomains(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("PUT","/settings/domains",e,!0,!0);return new Bz(t)}))}getSync(){return jN(this,void 0,void 0,(function*(){const e=this.isDesktopClient||this.isWebClient?"/sync?excludeDomains=true":"/sync",t=yield this.send("GET",e,null,!0,!0);return new PN(t)}))}getTwoFactorProviders(){return jN(this,void 0,void 0,(function*(){const e=yield this.send("GET","/two-factor",null,!0,!0);return new Vz(e,DN)}))}getTwoFactorOrganizationProviders(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/organizations/"+e+"/two-factor",null,!0,!0);return new Vz(t,DN)}))}getTwoFactorAuthenticator(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/two-factor/get-authenticator",e,!0,!0);return new TN(t)}))}getTwoFactorEmail(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/two-factor/get-email",e,!0,!0);return new MN(t)}))}getTwoFactorDuo(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/two-factor/get-duo",e,!0,!0);return new BN(t)}))}getTwoFactorOrganizationDuo(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/organizations/"+e+"/two-factor/get-duo",t,!0,!0);return new BN(n)}))}getTwoFactorYubiKey(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/two-factor/get-yubikey",e,!0,!0);return new NN(t)}))}getTwoFactorWebAuthn(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/two-factor/get-webauthn",e,!0,!0);return new RN(t)}))}getTwoFactorWebAuthnChallenge(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/two-factor/get-webauthn-challenge",e,!0,!0);return new zN(t)}))}getTwoFactorRecover(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/two-factor/get-recover",e,!0,!0);return new FN(t)}))}putTwoFactorAuthenticator(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("PUT","/two-factor/authenticator",e,!0,!0);return new TN(t)}))}putTwoFactorEmail(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("PUT","/two-factor/email",e,!0,!0);return new MN(t)}))}putTwoFactorDuo(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("PUT","/two-factor/duo",e,!0,!0);return new BN(t)}))}putTwoFactorOrganizationDuo(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("PUT","/organizations/"+e+"/two-factor/duo",t,!0,!0);return new BN(n)}))}putTwoFactorYubiKey(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("PUT","/two-factor/yubikey",e,!0,!0);return new NN(t)}))}putTwoFactorWebAuthn(e){return jN(this,void 0,void 0,(function*(){const t=e.deviceResponse.response,n=Object.assign({},e);n.deviceResponse={id:e.deviceResponse.id,rawId:btoa(e.deviceResponse.id),type:e.deviceResponse.type,extensions:e.deviceResponse.getClientExtensionResults(),response:{AttestationObject:N.c.fromBufferToB64(t.attestationObject),clientDataJson:N.c.fromBufferToB64(t.clientDataJSON)}};const i=yield this.send("PUT","/two-factor/webauthn",n,!0,!0);return new RN(i)}))}deleteTwoFactorWebAuthn(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("DELETE","/two-factor/webauthn",e,!0,!0);return new RN(t)}))}putTwoFactorDisable(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("PUT","/two-factor/disable",e,!0,!0);return new DN(t)}))}putTwoFactorOrganizationDisable(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("PUT","/organizations/"+e+"/two-factor/disable",t,!0,!0);return new DN(n)}))}postTwoFactorRecover(e){return this.send("POST","/two-factor/recover",e,!1,!1)}postTwoFactorEmailSetup(e){return this.send("POST","/two-factor/send-email",e,!0,!1)}postTwoFactorEmail(e){return this.send("POST","/two-factor/send-email-login",e,!1,!1)}getDeviceVerificationSettings(){return jN(this,void 0,void 0,(function*(){const e=yield this.send("GET","/two-factor/get-device-verification-settings",null,!0,!0);return new Oz(e)}))}putDeviceVerificationSettings(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("PUT","/two-factor/device-verification-settings",e,!0,!0);return new Oz(t)}))}getEmergencyAccessTrusted(){return jN(this,void 0,void 0,(function*(){const e=yield this.send("GET","/emergency-access/trusted",null,!0,!0);return new Vz(e,uM)}))}getEmergencyAccessGranted(){return jN(this,void 0,void 0,(function*(){const e=yield this.send("GET","/emergency-access/granted",null,!0,!0);return new Vz(e,mM)}))}getEmergencyAccess(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/emergency-access/"+e,null,!0,!0);return new uM(t)}))}getEmergencyGrantorPolicies(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/emergency-access/"+e+"/policies",null,!0,!0);return new Vz(t,$f)}))}putEmergencyAccess(e,t){return this.send("PUT","/emergency-access/"+e,t,!0,!1)}deleteEmergencyAccess(e){return this.send("DELETE","/emergency-access/"+e,null,!0,!1)}postEmergencyAccessInvite(e){return this.send("POST","/emergency-access/invite",e,!0,!1)}postEmergencyAccessReinvite(e){return this.send("POST","/emergency-access/"+e+"/reinvite",null,!0,!1)}postEmergencyAccessAccept(e,t){return this.send("POST","/emergency-access/"+e+"/accept",t,!0,!1)}postEmergencyAccessConfirm(e,t){return this.send("POST","/emergency-access/"+e+"/confirm",t,!0,!1)}postEmergencyAccessInitiate(e){return this.send("POST","/emergency-access/"+e+"/initiate",null,!0,!1)}postEmergencyAccessApprove(e){return this.send("POST","/emergency-access/"+e+"/approve",null,!0,!1)}postEmergencyAccessReject(e){return this.send("POST","/emergency-access/"+e+"/reject",null,!0,!1)}postEmergencyAccessTakeover(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/emergency-access/"+e+"/takeover",null,!0,!0);return new hM(t)}))}postEmergencyAccessPassword(e,t){return jN(this,void 0,void 0,(function*(){yield this.send("POST","/emergency-access/"+e+"/password",t,!0,!0)}))}postEmergencyAccessView(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/emergency-access/"+e+"/view",null,!0,!0);return new vM(t)}))}getOrganization(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/organizations/"+e,null,!0,!0);return new Qz(t)}))}getOrganizationBilling(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/organizations/"+e+"/billing",null,!0,!0);return new xz(t)}))}getOrganizationSubscription(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/organizations/"+e+"/subscription",null,!0,!0);return new tN(t)}))}getCloudCommunicationsEnabled(){return jN(this,void 0,void 0,(function*(){return yield this.send("GET","/organizations/connections/enabled",null,!0,!0)}))}getOrganizationConnection(e,t,n){return jN(this,void 0,void 0,(function*(){const i=yield this.send("GET",`/organizations/connections/${e}/${t}`,null,!0,!0);return new qz(i,n)}))}createOrganizationConnection(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/organizations/connections/",e,!0,!0);return new qz(n,t)}))}updateOrganizationConnection(e,t,n){return jN(this,void 0,void 0,(function*(){const i=yield this.send("PUT","/organizations/connections/"+n,e,!0,!0);return new qz(i,t)}))}deleteOrganizationConnection(e){return jN(this,void 0,void 0,(function*(){return this.send("DELETE","/organizations/connections/"+e,null,!0,!1)}))}getOrganizationLicense(e,t){return jN(this,void 0,void 0,(function*(){return this.send("GET","/organizations/"+e+"/license?installationId="+t,null,!0,!0)}))}getOrganizationTaxInfo(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/organizations/"+e+"/tax",null,!0,!0);return new AN(t)}))}getOrganizationSso(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/organizations/"+e+"/sso",null,!0,!0);return new jz(t)}))}postOrganization(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/organizations",e,!0,!0);return new Qz(t)}))}putOrganization(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("PUT","/organizations/"+e,t,!0,!0);return new Qz(n)}))}putOrganizationTaxInfo(e,t){return jN(this,void 0,void 0,(function*(){return this.send("PUT","/organizations/"+e+"/tax",t,!0,!1)}))}postLeaveOrganization(e){return this.send("POST","/organizations/"+e+"/leave",null,!0,!1)}postOrganizationLicense(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("POST","/organizations/license",e,!0,!0);return new Qz(t)}))}postOrganizationLicenseUpdate(e,t){return jN(this,void 0,void 0,(function*(){return this.send("POST","/organizations/"+e+"/license",t,!0,!1)}))}postOrganizationApiKey(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/organizations/"+e+"/api-key",t,!0,!0);return new gz(n)}))}getOrganizationApiKeyInformation(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/organizations/"+e+"/api-key-information",null,!0,!0);return new Vz(t,Kz)}))}postOrganizationRotateApiKey(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/organizations/"+e+"/rotate-api-key",t,!0,!0);return new gz(n)}))}postOrganizationSso(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/organizations/"+e+"/sso",t,!0,!0);return new jz(n)}))}postOrganizationUpgrade(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/organizations/"+e+"/upgrade",t,!0,!0);return new uN(n)}))}postOrganizationUpdateSubscription(e,t){return jN(this,void 0,void 0,(function*(){return this.send("POST","/organizations/"+e+"/subscription",t,!0,!1)}))}postOrganizationSeat(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/organizations/"+e+"/seat",t,!0,!0);return new uN(n)}))}postOrganizationStorage(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/organizations/"+e+"/storage",t,!0,!0);return new uN(n)}))}postOrganizationPayment(e,t){return this.send("POST","/organizations/"+e+"/payment",t,!0,!1)}postOrganizationVerifyBank(e,t){return this.send("POST","/organizations/"+e+"/verify-bank",t,!0,!1)}postOrganizationCancel(e){return this.send("POST","/organizations/"+e+"/cancel",null,!0,!1)}postOrganizationReinstate(e){return this.send("POST","/organizations/"+e+"/reinstate",null,!0,!1)}deleteOrganization(e,t){return this.send("DELETE","/organizations/"+e,t,!0,!1)}getOrganizationKeys(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/organizations/"+e+"/keys",null,!0,!0);return new $z(t)}))}postOrganizationKeys(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/organizations/"+e+"/keys",t,!0,!0);return new $z(n)}))}postProviderSetup(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/providers/"+e+"/setup",t,!0,!0);return new gN(n)}))}getProvider(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/providers/"+e,null,!0,!0);return new gN(t)}))}putProvider(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("PUT","/providers/"+e,t,!0,!0);return new gN(n)}))}getProviderUsers(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/providers/"+e+"/users",null,!0,!0);return new Vz(t,SN)}))}getProviderUser(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("GET","/providers/"+e+"/users/"+t,null,!0,!0);return new yN(n)}))}postProviderUserInvite(e,t){return this.send("POST","/providers/"+e+"/users/invite",t,!0,!1)}postProviderUserReinvite(e,t){return this.send("POST","/providers/"+e+"/users/"+t+"/reinvite",null,!0,!1)}postManyProviderUserReinvite(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/providers/"+e+"/users/reinvite",t,!0,!0);return new Vz(n,xN)}))}postProviderUserBulkConfirm(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/providers/"+e+"/users/confirm",t,!0,!0);return new Vz(n,xN)}))}deleteManyProviderUsers(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("DELETE","/providers/"+e+"/users",t,!0,!0);return new Vz(n,xN)}))}postProviderUserAccept(e,t,n){return this.send("POST","/providers/"+e+"/users/"+t+"/accept",n,!0,!1)}postProviderUserConfirm(e,t,n){return this.send("POST","/providers/"+e+"/users/"+t+"/confirm",n,!0,!1)}postProviderUsersPublicKey(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/providers/"+e+"/users/public-keys",t,!0,!0);return new Vz(n,fN)}))}putProviderUser(e,t,n){return this.send("PUT","/providers/"+e+"/users/"+t,n,!0,!1)}deleteProviderUser(e,t){return this.send("DELETE","/providers/"+e+"/users/"+t,null,!0,!1)}getProviderClients(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/providers/"+e+"/organizations",null,!0,!0);return new Vz(t,vN)}))}postProviderAddOrganization(e,t){return this.send("POST","/providers/"+e+"/organizations/add",t,!0,!1)}postProviderCreateOrganization(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.send("POST","/providers/"+e+"/organizations",t,!0,!0);return new hN(n)}))}deleteProviderOrganization(e,t){return this.send("DELETE","/providers/"+e+"/organizations/"+t,null,!0,!1)}getEvents(e,t,n){return jN(this,void 0,void 0,(function*(){const i=yield this.send("GET",this.addEventParameters("/events",e,t,n),null,!0,!0);return new Vz(i,Mz)}))}getEventsCipher(e,t,n,i){return jN(this,void 0,void 0,(function*(){const r=yield this.send("GET",this.addEventParameters("/ciphers/"+e+"/events",t,n,i),null,!0,!0);return new Vz(r,Mz)}))}getEventsOrganization(e,t,n,i){return jN(this,void 0,void 0,(function*(){const r=yield this.send("GET",this.addEventParameters("/organizations/"+e+"/events",t,n,i),null,!0,!0);return new Vz(r,Mz)}))}getEventsOrganizationUser(e,t,n,i,r){return jN(this,void 0,void 0,(function*(){const o=yield this.send("GET",this.addEventParameters("/organizations/"+e+"/users/"+t+"/events",n,i,r),null,!0,!0);return new Vz(o,Mz)}))}getEventsProvider(e,t,n,i){return jN(this,void 0,void 0,(function*(){const r=yield this.send("GET",this.addEventParameters("/providers/"+e+"/events",t,n,i),null,!0,!0);return new Vz(r,Mz)}))}getEventsProviderUser(e,t,n,i,r){return jN(this,void 0,void 0,(function*(){const o=yield this.send("GET",this.addEventParameters("/providers/"+e+"/users/"+t+"/events",n,i,r),null,!0,!0);return new Vz(o,Mz)}))}postEventsCollect(e){return jN(this,void 0,void 0,(function*(){const t=yield this.getActiveBearerToken(),n=new Headers({"Device-Type":this.deviceType,Authorization:"Bearer "+t,"Content-Type":"application/json; charset=utf-8"});null!=this.customUserAgent&&n.set("User-Agent",this.customUserAgent);if(200!==(yield this.fetch(new Request(this.environmentService.getEventsUrl()+"/collect",{cache:"no-store",credentials:this.getCredentials(),method:"POST",body:JSON.stringify(e),headers:n}))).status)return Promise.reject("Event post failed.")}))}getUserPublicKey(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/users/"+e+"/public-key",null,!0,!0);return new VN(t)}))}getHibpBreach(e){return jN(this,void 0,void 0,(function*(){return(yield this.send("GET","/hibp/breach?username="+e,null,!0,!0)).map((e=>new Cz(e)))}))}postBitPayInvoice(e){return jN(this,void 0,void 0,(function*(){return yield this.send("POST","/bitpay-invoice",e,!0,!0)}))}postSetupPayment(){return jN(this,void 0,void 0,(function*(){return yield this.send("POST","/setup-payment",null,!0,!0)}))}getUserKeyFromKeyConnector(e){return jN(this,void 0,void 0,(function*(){const t=yield this.getActiveBearerToken(),n=yield this.fetch(new Request(e+"/user-keys",{cache:"no-store",method:"GET",headers:new Headers({Accept:"application/json",Authorization:"Bearer "+t})}));if(200!==n.status){const e=yield this.handleError(n,!1,!0);return Promise.reject(e)}return new Nz(yield n.json())}))}postUserKeyToKeyConnector(e,t){return jN(this,void 0,void 0,(function*(){const n=yield this.getActiveBearerToken(),i=yield this.fetch(new Request(e+"/user-keys",{cache:"no-store",method:"POST",headers:new Headers({Accept:"application/json",Authorization:"Bearer "+n,"Content-Type":"application/json; charset=utf-8"}),body:JSON.stringify(t)}));if(200!==i.status){const e=yield this.handleError(i,!1,!0);return Promise.reject(e)}}))}getKeyConnectorAlive(e){return jN(this,void 0,void 0,(function*(){const t=yield this.fetch(new Request(e+"/alive",{cache:"no-store",method:"GET",headers:new Headers({Accept:"application/json","Content-Type":"application/json; charset=utf-8"})}));if(200!==t.status){const e=yield this.handleError(t,!1,!0);return Promise.reject(e)}}))}getActiveBearerToken(){return jN(this,void 0,void 0,(function*(){let e=yield this.tokenService.getToken();return(yield this.tokenService.tokenNeedsRefresh())&&(yield this.doAuthRefresh(),e=yield this.tokenService.getToken()),e}))}fetch(e){return jN(this,void 0,void 0,(function*(){return"GET"===e.method&&(e.headers.set("Cache-Control","no-store"),e.headers.set("Pragma","no-cache")),e.headers.set("Bitwarden-Client-Name",this.platformUtilsService.getClientType()),e.headers.set("Bitwarden-Client-Version",yield this.platformUtilsService.getApplicationVersion()),this.nativeFetch(e)}))}nativeFetch(e){return fetch(e)}preValidateSso(e){return jN(this,void 0,void 0,(function*(){if(null==e||""===e)throw new Error("Organization Identifier was not provided.");const t=new Headers({Accept:"application/json","Device-Type":this.deviceType});null!=this.customUserAgent&&t.set("User-Agent",this.customUserAgent);const n=`/account/prevalidate?domainHint=${encodeURIComponent(e)}`,i=yield this.fetch(new Request(this.environmentService.getIdentityUrl()+n,{cache:"no-store",credentials:this.getCredentials(),headers:t,method:"GET"}));if(200===i.status){const e=yield i.json();return new EN(e)}{const e=yield this.handleError(i,!1,!0);return Promise.reject(e)}}))}postCreateSponsorship(e,t){return jN(this,void 0,void 0,(function*(){return yield this.send("POST","/organization/sponsorship/"+(this.platformUtilsService.isSelfHost()?"self-hosted/":"")+e+"/families-for-enterprise",t,!0,!1)}))}getSponsorshipSyncStatus(e){return jN(this,void 0,void 0,(function*(){const t=yield this.send("GET","/organization/sponsorship/"+e+"/sync-status",null,!0,!0);return new Yz(t)}))}deleteRevokeSponsorship(e){return jN(this,void 0,void 0,(function*(){return yield this.send("DELETE","/organization/sponsorship/"+(this.platformUtilsService.isSelfHost()?"self-hosted/":"")+e,null,!0,!1)}))}deleteRemoveSponsorship(e){return jN(this,void 0,void 0,(function*(){return yield this.send("DELETE","/organization/sponsorship/sponsored/"+e,null,!0,!1)}))}postPreValidateSponsorshipToken(e){return jN(this,void 0,void 0,(function*(){return yield this.send("POST","/organization/sponsorship/validate-token?sponsorshipToken="+encodeURIComponent(e),null,!0,!0)}))}postRedeemSponsorship(e,t){return jN(this,void 0,void 0,(function*(){return yield this.send("POST","/organization/sponsorship/redeem?sponsorshipToken="+encodeURIComponent(e),t,!0,!1)}))}postResendSponsorshipOffer(e){return jN(this,void 0,void 0,(function*(){return yield this.send("POST","/organization/sponsorship/"+e+"/families-for-enterprise/resend",null,!0,!1)}))}doAuthRefresh(){return jN(this,void 0,void 0,(function*(){const e=yield this.tokenService.getRefreshToken();if(null!=e&&""!==e)return this.doRefreshToken();const t=yield this.tokenService.getClientId(),n=yield this.tokenService.getClientSecret();if(!N.c.isNullOrWhitespace(t)&&!N.c.isNullOrWhitespace(n))return this.doApiTokenRefresh();throw new Error("Cannot refresh token, no refresh token or api keys are stored")}))}doRefreshToken(){return jN(this,void 0,void 0,(function*(){const e=yield this.tokenService.getRefreshToken();if(null==e||""===e)throw new Error;const t=new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Accept:"application/json","Device-Type":this.deviceType});null!=this.customUserAgent&&t.set("User-Agent",this.customUserAgent);const n=yield this.tokenService.decodeToken(),i=yield this.fetch(new Request(this.environmentService.getIdentityUrl()+"/connect/token",{body:this.qsStringify({grant_type:"refresh_token",client_id:n.client_id,refresh_token:e}),cache:"no-store",credentials:this.getCredentials(),headers:t,method:"POST"}));if(200!==i.status){const e=yield this.handleError(i,!0,!0);return Promise.reject(e)}{const e=yield i.json(),t=new Uz(e);yield this.tokenService.setTokens(t.accessToken,t.refreshToken,null)}}))}doApiTokenRefresh(){return jN(this,void 0,void 0,(function*(){const e=yield this.tokenService.getClientId(),t=yield this.tokenService.getClientSecret(),n=yield this.appIdService.getAppId(),i=new mz(n,this.platformUtilsService),r=new vz(e,t,new cn,i),o=yield this.postIdentityToken(r);if(!(o instanceof Uz))throw new Error("Invalid response received when refreshing api token");yield this.tokenService.setToken(o.accessToken)}))}send(e,t,n,i,r,o,a){return jN(this,void 0,void 0,(function*(){const s=(o=N.c.isNullOrWhitespace(o)?this.environmentService.getApiUrl():o)+t;if(new URL(s).href!==s)return Promise.reject("Invalid request url path.");const l=new Headers({"Device-Type":this.deviceType});null!=this.customUserAgent&&l.set("User-Agent",this.customUserAgent);const d={cache:"no-store",credentials:this.getCredentials(),method:e};if(i){const e=yield this.getActiveBearerToken();l.set("Authorization","Bearer "+e)}null!=n&&("string"==typeof n?(d.body=n,l.set("Content-Type","application/x-www-form-urlencoded; charset=utf-8")):"object"==typeof n&&(n instanceof FormData?d.body=n:(l.set("Content-Type","application/json; charset=utf-8"),d.body=JSON.stringify(n)))),r&&l.set("Accept","application/json"),null!=a&&a(l),d.headers=l;const c=yield this.fetch(new Request(s,d));if(r&&200===c.status){return yield c.json()}if(200!==c.status){const e=yield this.handleError(c,!1,i);return Promise.reject(e)}}))}handleError(e,t,n){return jN(this,void 0,void 0,(function*(){if(n&&(t&&400===e.status||401===e.status||403===e.status))return yield this.logoutCallback(!0),null;let i=null;return this.isJsonResponse(e)?i=yield e.json():this.isTextResponse(e)&&(i={Message:yield e.text()}),new wa.i(i,e.status,t)}))}qsStringify(e){return Object.keys(e).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t]))).join("&")}getCredentials(){if(!this.isWebClient||this.environmentService.hasBaseUrl())return"include"}addEventParameters(e,t,n,i){return null!=t&&(e+="?start="+t),null!=n&&(e+=e.indexOf("?")>-1?"&":"?",e+="end="+n),null!=i&&(e+=e.indexOf("?")>-1?"&":"?",e+="continuationToken="+i),e}isJsonResponse(e){const t=e.headers.get("content-type");return null!=t&&t.indexOf("application/json")>-1}isTextResponse(e){const t=e.headers.get("content-type");return null!=t&&t.indexOf("text")>-1}},deps:[bi,E.P,ae,hn,tL]},{provide:$U,useClass:class{constructor(e,t){this.logService=e,this.apiService=t,this.azureFileUploadService=new oH(e),this.bitwardenFileUploadService=new lH(t)}uploadSendFile(e,t,n){return dH(this,void 0,void 0,(function*(){try{switch(e.fileUploadType){case tH.Direct:yield this.bitwardenFileUploadService.upload(t.encryptedString,n,(t=>this.apiService.postSendFile(e.sendResponse.id,e.sendResponse.file.id,t)));break;case tH.Azure:{const t=()=>dH(this,void 0,void 0,(function*(){return(yield this.apiService.renewSendFileUploadUrl(e.sendResponse.id,e.sendResponse.file.id)).url}));yield this.azureFileUploadService.upload(e.url,n,t);break}default:throw new Error("Unknown file upload type")}}catch(i){throw yield this.apiService.deleteSend(e.sendResponse.id),i}}))}uploadCipherAttachment(e,t,n,i){return dH(this,void 0,void 0,(function*(){const r=e?t.cipherMiniResponse:t.cipherResponse;try{switch(t.fileUploadType){case tH.Direct:yield this.bitwardenFileUploadService.upload(n.encryptedString,i,(e=>this.apiService.postAttachmentFile(r.id,t.attachmentId,e)));break;case tH.Azure:{const e=()=>dH(this,void 0,void 0,(function*(){return(yield this.apiService.renewAttachmentUploadUrl(r.id,t.attachmentId)).url}));yield this.azureFileUploadService.upload(t.url,i,e);break}default:throw new Error("Unknown file upload type.")}}catch(o){throw e?yield this.apiService.deleteCipherAttachmentAdmin(r.id,t.attachmentId):yield this.apiService.deleteCipherAttachment(r.id,t.attachmentId),o}}))}},deps:[L.$,T.s]},{provide:Ft._,useClass:Dj,deps:[T.s,QU,Rr.s,Ur.u,H.$,Jr.a,v,j.d,AA,L.$,g.J,P.b,Ii.M,wi,Ps,tL]},{provide:Ci,useClass:qj},{provide:QU,useClass:class{constructor(e){this.stateService=e}clearCache(){return $H(this,void 0,void 0,(function*(){yield this.stateService.setSettings(null)}))}getEquivalentDomains(){return this.getSettingsKey(WH)}setEquivalentDomains(e){return $H(this,void 0,void 0,(function*(){yield this.setSettingsKey(WH,e)}))}clear(e){return $H(this,void 0,void 0,(function*(){yield this.stateService.setSettings(null,{userId:e})}))}getSettings(){return $H(this,void 0,void 0,(function*(){const e=yield this.stateService.getSettings();if(null==e){yield this.stateService.getUserId()}return e}))}getSettingsKey(e){return $H(this,void 0,void 0,(function*(){const t=yield this.getSettings();return null!=t&&t[e]?t[e]:null}))}setSettingsKey(e,t){return $H(this,void 0,void 0,(function*(){let n=yield this.getSettings();n||(n={}),n[e]=t,yield this.stateService.setSettings(n)}))}},deps:[P.b]},{provide:oe,useClass:class{constructor(e,t,n,i,r,o,a,s,l,d,c,p,u=null,m=null){this.cipherService=e,this.folderService=t,this.collectionService=n,this.cryptoService=i,this.platformUtilsService=r,this.messagingService=o,this.searchService=a,this.tokenService=s,this.policyService=l,this.keyConnectorService=d,this.stateService=c,this.authService=p,this.lockedCallback=u,this.loggedOutCallback=m,this.inited=!1}init(e){this.inited||(this.inited=!0,e&&this.startCheck())}startCheck(){this.checkVaultTimeout(),setInterval((()=>this.checkVaultTimeout()),1e4)}checkVaultTimeout(){return jj(this,void 0,void 0,(function*(){if(!(yield this.platformUtilsService.isViewOpen()))for(const e in this.stateService.accounts.getValue())null!=e&&(yield this.shouldLock(e))&&(yield this.executeTimeoutAction(e))}))}lock(e=!1,t){return jj(this,void 0,void 0,(function*(){if(yield this.stateService.getIsAuthenticated({userId:t})){if(yield this.keyConnectorService.getUsesKeyConnector()){const e=yield this.isPinLockSet();e[0]&&null!=(yield this.stateService.getDecryptedPinProtected())||e[1]||(yield this.isBiometricLockSet())||(yield this.logOut(t))}null!=t&&t!==(yield this.stateService.getUserId())||(this.searchService.clearIndex(),yield this.folderService.clearCache()),yield this.stateService.setEverBeenUnlocked(!0,{userId:t}),yield this.stateService.setBiometricLocked(!0,{userId:t}),yield this.stateService.setCryptoMasterKeyAuto(null,{userId:t}),yield this.cryptoService.clearKey(!1,t),yield this.cryptoService.clearOrgKeys(!0,t),yield this.cryptoService.clearKeyPair(!0,t),yield this.cryptoService.clearEncKey(!0,t),yield this.cipherService.clearCache(t),yield this.collectionService.clearCache(t),this.messagingService.send("locked",{userId:t}),null!=this.lockedCallback&&(yield this.lockedCallback(t))}}))}logOut(e){return jj(this,void 0,void 0,(function*(){null!=this.loggedOutCallback&&(yield this.loggedOutCallback(!1,e))}))}setVaultTimeoutOptions(e,t){return jj(this,void 0,void 0,(function*(){yield this.stateService.setVaultTimeout(e);const n=yield this.tokenService.getToken(),i=yield this.tokenService.getRefreshToken(),r=yield this.tokenService.getClientId(),o=yield this.tokenService.getClientSecret(),a=yield this.stateService.getVaultTimeoutAction();null==e&&0!==e||"logOut"!==t||t===a||(yield this.tokenService.clearToken()),yield this.stateService.setVaultTimeoutAction(t),yield this.tokenService.setToken(n),yield this.tokenService.setRefreshToken(i),yield this.tokenService.setClientId(r),yield this.tokenService.setClientSecret(o),yield this.cryptoService.toggleKey()}))}isPinLockSet(){return jj(this,void 0,void 0,(function*(){return[null!=(yield this.stateService.getProtectedPin()),null!=(yield this.stateService.getEncryptedPinProtected())]}))}isBiometricLockSet(){return jj(this,void 0,void 0,(function*(){return yield this.stateService.getBiometricUnlock()}))}getVaultTimeout(e){return jj(this,void 0,void 0,(function*(){const t=yield this.stateService.getVaultTimeout({userId:e});if(yield this.policyService.policyAppliesToUser(Kr.M.MaximumVaultTimeout,null,e)){const n=yield this.policyService.getAll(Kr.M.MaximumVaultTimeout,e);let i=Math.min(t,n[0].data.minutes);return(null==t||i<0)&&(i=n[0].data.minutes),t!==i&&(yield this.stateService.setVaultTimeout(i,{userId:e})),i}return t}))}clear(e){return jj(this,void 0,void 0,(function*(){yield this.stateService.setEverBeenUnlocked(!1,{userId:e}),yield this.stateService.setDecryptedPinProtected(null,{userId:e}),yield this.stateService.setProtectedPin(null,{userId:e})}))}shouldLock(e){return jj(this,void 0,void 0,(function*(){const t=yield this.authService.getAuthStatus(e);if(t===i.Locked||t===i.LoggedOut)return!1;const n=yield this.getVaultTimeout(e);if(null==n||n<0)return!1;const r=yield this.stateService.getLastActive({userId:e});if(null==r)return!1;const o=60*n;return((new Date).getTime()-r)/1e3>=o}))}executeTimeoutAction(e){return jj(this,void 0,void 0,(function*(){"logOut"===(yield this.stateService.getVaultTimeoutAction({userId:e}))?yield this.logOut(e):yield this.lock(!0,e)}))}},deps:[Ur.u,Rr.s,Jr.a,H.$,E.P,v,za,bi,j.d,g.J,P.b,h,nL,tL]},{provide:P.b,useClass:cj,deps:[ZU,Jj,Zj,L.$,YU,Xj,eL]},{provide:YU,useClass:Aj,deps:[ZU,Jj,Xj]},{provide:hh.T,useClass:class{constructor(e,t,n,i,r){this.folderService=e,this.cipherService=t,this.apiService=n,this.cryptoService=i,this.cryptoFunctionService=r}getExport(e="csv",t){return iH(this,void 0,void 0,(function*(){return t?yield this.getOrganizationExport(t,e):"encrypted_json"===e?this.getEncryptedExport():this.getDecryptedExport(e)}))}getPasswordProtectedExport(e,t){return iH(this,void 0,void 0,(function*(){const n=t?yield this.getOrganizationExport(t,"json"):yield this.getExport("json"),i=N.c.fromBufferToB64(yield this.cryptoFunctionService.randomBytes(16)),r=He.wH,o=yield this.cryptoService.makePinKey(e,i,He.G3.PBKDF2_SHA256,r),a=yield this.cryptoService.encrypt(N.c.newGuid(),o),s=yield this.cryptoService.encrypt(n,o),l={encrypted:!0,passwordProtected:!0,salt:i,kdfIterations:r,kdfType:He.G3.PBKDF2_SHA256,encKeyValidation_DO_NOT_EDIT:a.encryptedString,data:s.encryptedString};return JSON.stringify(l,null,"  ")}))}getOrganizationExport(e,t="csv"){return iH(this,void 0,void 0,(function*(){return"encrypted_json"===t?this.getOrganizationEncryptedExport(e):this.getOrganizationDecryptedExport(e,t)}))}getEventExport(e){return iH(this,void 0,void 0,(function*(){return ZV.unparse(e.map((e=>new eH(e))))}))}getFileName(e=null,t="csv"){const n=new Date;return"bitwarden"+(e?"_"+e:"")+"_export_"+(n.getFullYear()+""+this.padNumber(n.getMonth()+1,2)+this.padNumber(n.getDate(),2)+this.padNumber(n.getHours(),2)+this.padNumber(n.getMinutes(),2)+this.padNumber(n.getSeconds(),2))+"."+t}getDecryptedExport(e){return iH(this,void 0,void 0,(function*(){let t=[],n=[];const i=[];if(i.push((0,Or.z)(this.folderService.folderViews$).then((e=>{t=e}))),i.push(this.cipherService.getAllDecrypted().then((e=>{n=e.filter((e=>null==e.deletedDate))}))),yield Promise.all(i),"csv"===e){const e=new Map;t.forEach((t=>{null!=t.id&&e.set(t.id,t)}));const i=[];return n.forEach((t=>{if(t.type!==jr.O.Login&&t.type!==jr.O.SecureNote)return;if(null!=t.organizationId)return;const n={};n.folder=null!=t.folderId&&e.has(t.folderId)?e.get(t.folderId).name:null,n.favorite=t.favorite?1:null,this.buildCommonCipher(n,t),i.push(n)})),ZV.unparse(i)}{const e={encrypted:!1,folders:[],items:[]};return t.forEach((t=>{if(null==t.id)return;const n=new nH.L;n.build(t),e.folders.push(n)})),n.forEach((t=>{if(null!=t.organizationId)return;const n=new JV.R;n.build(t),n.collectionIds=null,e.items.push(n)})),JSON.stringify(e,null,"  ")}}))}getEncryptedExport(){return iH(this,void 0,void 0,(function*(){let e=[],t=[];const n=[];n.push((0,Or.z)(this.folderService.folders$).then((t=>{e=t}))),n.push(this.cipherService.getAll().then((e=>{t=e.filter((e=>null==e.deletedDate))}))),yield Promise.all(n);const i={encrypted:!0,encKeyValidation_DO_NOT_EDIT:(yield this.cryptoService.encrypt(N.c.newGuid())).encryptedString,folders:[],items:[]};return e.forEach((e=>{if(null==e.id)return;const t=new nH.L;t.build(e),i.folders.push(t)})),t.forEach((e=>{if(null!=e.organizationId)return;const t=new JV.R;t.build(e),t.collectionIds=null,i.items.push(t)})),JSON.stringify(i,null,"  ")}))}getOrganizationDecryptedExport(e,t){return iH(this,void 0,void 0,(function*(){const n=[],i=[],r=[];if(r.push(this.apiService.getCollections(e).then((e=>{const t=[];return null!=e&&null!=e.data&&e.data.length>0&&e.data.forEach((e=>{const i=new pm.F(new cm.Z(e));t.push(i.decrypt().then((e=>{n.push(e)})))})),Promise.all(t)}))),r.push(this.apiService.getCiphersOrganization(e).then((e=>{const t=[];return null!=e&&null!=e.data&&e.data.length>0&&e.data.filter((e=>null===e.deletedDate)).forEach((e=>{const n=new Gc.t(new Kc.O(e));t.push(n.decrypt().then((e=>{i.push(e)})))})),Promise.all(t)}))),yield Promise.all(r),"csv"===t){const e=new Map;n.forEach((t=>{e.set(t.id,t)}));const t=[];return i.forEach((n=>{if(n.type!==jr.O.Login&&n.type!==jr.O.SecureNote)return;const i={collections:[]};null!=n.collectionIds&&(i.collections=n.collectionIds.filter((t=>e.has(t))).map((t=>e.get(t).name))),this.buildCommonCipher(i,n),t.push(i)})),ZV.unparse(t)}{const e={encrypted:!1,collections:[],items:[]};return n.forEach((t=>{const n=new XV.l;n.build(t),e.collections.push(n)})),i.forEach((t=>{const n=new JV.R;n.build(t),e.items.push(n)})),JSON.stringify(e,null,"  ")}}))}getOrganizationEncryptedExport(e){return iH(this,void 0,void 0,(function*(){const t=[],n=[],i=[];i.push(this.apiService.getCollections(e).then((e=>(null!=e&&null!=e.data&&e.data.length>0&&e.data.forEach((e=>{const n=new pm.F(new cm.Z(e));t.push(n)})),Promise.all([]))))),i.push(this.apiService.getCiphersOrganization(e).then((e=>(null!=e&&null!=e.data&&e.data.length>0&&e.data.filter((e=>null===e.deletedDate)).forEach((e=>{const t=new Gc.t(new Kc.O(e));n.push(t)})),Promise.all([]))))),yield Promise.all(i);const r=yield this.cryptoService.getOrgKey(e),o={encrypted:!0,encKeyValidation_DO_NOT_EDIT:(yield this.cryptoService.encrypt(N.c.newGuid(),r)).encryptedString,collections:[],items:[]};return t.forEach((e=>{const t=new XV.l;t.build(e),o.collections.push(t)})),n.forEach((e=>{const t=new JV.R;t.build(e),o.items.push(t)})),JSON.stringify(o,null,"  ")}))}padNumber(e,t,n="0"){const i=e.toString();return i.length>=t?i:new Array(t-i.length+1).join(n)+i}buildCommonCipher(e,t){switch(e.type=null,e.name=t.name,e.notes=t.notes,e.fields=null,e.reprompt=t.reprompt,e.login_uri=null,e.login_username=null,e.login_password=null,e.login_totp=null,t.fields&&t.fields.forEach((t=>{e.fields?e.fields+="\n":e.fields="",e.fields+=(t.name||"")+": "+t.value})),t.type){case jr.O.Login:e.type="login",e.login_username=t.login.username,e.login_password=t.login.password,e.login_totp=t.login.totp,t.login.uris&&(e.login_uri=[],t.login.uris.forEach((t=>{e.login_uri.push(t.uri)})));break;case jr.O.SecureNote:e.type="note";break;default:return}return e}},deps:[Rr.s,Ur.u,T.s,H.$]},{provide:za,useClass:HH,deps:[Ur.u,L.$,k.D]},{provide:WU,useClass:class{constructor(e,t,n,i,r,o,a,s){this.syncService=e,this.appIdService=t,this.apiService=n,this.environmentService=i,this.logoutCallback=r,this.logService=o,this.stateService=a,this.authService=s,this.connected=!1,this.inited=!1,this.inactive=!1,this.reconnectTimer=null,this.environmentService.urls.subscribe((()=>{this.inited&&this.init()}))}init(){return EH(this,void 0,void 0,(function*(){this.inited=!1,this.url=this.environmentService.getNotificationsUrl(),"https://-"!==this.url&&(null!=this.signalrConnection&&(this.signalrConnection.off("ReceiveMessage"),this.signalrConnection.off("Heartbeat"),yield this.signalrConnection.stop(),this.connected=!1,this.signalrConnection=null),this.signalrConnection=(new xH.su).withUrl(this.url+"/hub",{accessTokenFactory:()=>this.apiService.getActiveBearerToken(),skipNegotiation:!0,transport:xH.n4.WebSockets}).withHubProtocol(new yH.e).build(),this.signalrConnection.on("ReceiveMessage",(e=>this.processNotification(new SH(e)))),this.signalrConnection.on("Heartbeat",(e=>{})),this.signalrConnection.onclose((()=>{this.connected=!1,this.reconnect(!0)})),this.inited=!0,(yield this.isAuthedAndUnlocked())&&(yield this.reconnect(!1)))}))}updateConnection(e=!1){return EH(this,void 0,void 0,(function*(){if(this.inited)try{(yield this.isAuthedAndUnlocked())?yield this.reconnect(e):yield this.signalrConnection.stop()}catch(t){this.logService.error(t.toString())}}))}reconnectFromActivity(){return EH(this,void 0,void 0,(function*(){this.inactive=!1,this.inited&&!this.connected&&(yield this.reconnect(!0))}))}disconnectFromInactivity(){return EH(this,void 0,void 0,(function*(){this.inactive=!0,this.inited&&this.connected&&(yield this.signalrConnection.stop())}))}processNotification(e){return EH(this,void 0,void 0,(function*(){const t=yield this.appIdService.getAppId();if(null==e||e.contextId===t)return;const n=yield this.stateService.getIsAuthenticated(),i=e.payload.userId||e.payload.UserId,r=yield this.stateService.getUserId();if(!n||null==i||i===r)switch(e.type){case fH.SyncCipherCreate:case fH.SyncCipherUpdate:yield this.syncService.syncUpsertCipher(e.payload,e.type===fH.SyncCipherUpdate);break;case fH.SyncCipherDelete:case fH.SyncLoginDelete:yield this.syncService.syncDeleteCipher(e.payload);break;case fH.SyncFolderCreate:case fH.SyncFolderUpdate:yield this.syncService.syncUpsertFolder(e.payload,e.type===fH.SyncFolderUpdate);break;case fH.SyncFolderDelete:yield this.syncService.syncDeleteFolder(e.payload);break;case fH.SyncVault:case fH.SyncCiphers:case fH.SyncSettings:n&&(yield this.syncService.fullSync(!1));break;case fH.SyncOrgKeys:n&&(yield this.syncService.fullSync(!0),yield this.signalrConnection.stop());break;case fH.LogOut:n&&this.logoutCallback(!0);break;case fH.SyncSendCreate:case fH.SyncSendUpdate:yield this.syncService.syncUpsertSend(e.payload,e.type===fH.SyncSendUpdate);break;case fH.SyncSendDelete:yield this.syncService.syncDeleteSend(e.payload)}}))}reconnect(e){return EH(this,void 0,void 0,(function*(){if(null!=this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.connected||!this.inited||this.inactive)return;if(yield this.isAuthedAndUnlocked()){try{yield this.signalrConnection.start(),this.connected=!0,e&&(yield this.syncService.fullSync(!1))}catch(t){this.logService.error(t)}this.connected||(this.reconnectTimer=setTimeout((()=>this.reconnect(e)),this.random(12e4,3e5)))}}))}isAuthedAndUnlocked(){return EH(this,void 0,void 0,(function*(){return(yield this.authService.getAuthStatus())>=i.Unlocked}))}random(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}},deps:[Ft._,hn,T.s,ae,tL,L.$,P.b,h]},{provide:we,useClass:class{constructor(e){this.crypto=void 0!==e.crypto?e.crypto:null,this.subtle=this.crypto&&void 0!==e.crypto.subtle?e.crypto.subtle:null}pbkdf2(e,t,n,i){return Gj(this,void 0,void 0,(function*(){const r="sha256"===n?256:512,o=this.toBuf(e),a={name:"PBKDF2",salt:this.toBuf(t),iterations:i,hash:{name:this.toWebCryptoAlgorithm(n)}},s=yield this.subtle.importKey("raw",o,{name:"PBKDF2"},!1,["deriveBits"]);return yield this.subtle.deriveBits(a,s,r)}))}hkdf(e,t,n,i,r){return Gj(this,void 0,void 0,(function*(){const o={name:"HKDF",salt:this.toBuf(t),info:this.toBuf(n),hash:{name:this.toWebCryptoAlgorithm(r)}},a=yield this.subtle.importKey("raw",e,{name:"HKDF"},!1,["deriveBits"]);return yield this.subtle.deriveBits(o,a,8*i)}))}hkdfExpand(e,t,n,i){return Gj(this,void 0,void 0,(function*(){const r="sha256"===i?32:64;if(n>255*r)throw new Error("outputByteSize is too large.");if(new Uint8Array(e).length<r)throw new Error("prk is too small.");const o=this.toBuf(t),a=new Uint8Array(o);let s=0,l=new Uint8Array(0);const d=Math.ceil(n/r),c=new Uint8Array(d*r);for(let t=0;t<d;t++){const r=new Uint8Array(l.length+a.length+1);if(r.set(l),r.set(a,l.length),r.set([t+1],r.length-1),l=new Uint8Array(yield this.hmac(r.buffer,e,i)),c.set(l,s),s+=l.length,s>=n)break}return c.slice(0,n).buffer}))}hash(e,t){return Gj(this,void 0,void 0,(function*(){if("md5"===t){const n="md5"===t?Lj.md.md5.create():Lj.md.sha1.create(),i=this.toByteString(e);return n.update(i,"raw"),N.c.fromByteStringToArray(n.digest().data).buffer}const n=this.toBuf(e);return yield this.subtle.digest({name:this.toWebCryptoAlgorithm(t)},n)}))}hmac(e,t,n){return Gj(this,void 0,void 0,(function*(){const i={name:"HMAC",hash:{name:this.toWebCryptoAlgorithm(n)}},r=yield this.subtle.importKey("raw",t,i,!1,["sign"]);return yield this.subtle.sign(i,r,e)}))}compare(e,t){return Gj(this,void 0,void 0,(function*(){const n=yield this.randomBytes(32),i={name:"HMAC",hash:{name:"SHA-256"}},r=yield this.subtle.importKey("raw",n,i,!1,["sign"]),o=yield this.subtle.sign(i,r,e),a=yield this.subtle.sign(i,r,t);if(o.byteLength!==a.byteLength)return!1;const s=new Uint8Array(o),l=new Uint8Array(a);for(let e=0;e<l.length;e++)if(s[e]!==l[e])return!1;return!0}))}hmacFast(e,t,n){const i=Lj.hmac.create();i.start(n,t),i.update(e);const r=i.digest().getBytes();return Promise.resolve(r)}compareFast(e,t){return Gj(this,void 0,void 0,(function*(){const n=yield this.randomBytes(32),i=new Uint32Array(n),r=Lj.util.createBuffer();for(let e=0;e<i.length;e++)r.putInt32(i[e]);const o=r.getBytes(),a=Lj.hmac.create();a.start("sha256",o),a.update(e);const s=a.digest().getBytes();a.start(null,null),a.update(t);return s===a.digest().getBytes()}))}aesEncrypt(e,t,n){return Gj(this,void 0,void 0,(function*(){const i=yield this.subtle.importKey("raw",n,{name:"AES-CBC"},!1,["encrypt"]);return yield this.subtle.encrypt({name:"AES-CBC",iv:t},i,e)}))}aesDecryptFastParameters(e,t,n,i){const r=new Kj;return null!=i.meta&&(r.encKey=i.meta.encKeyByteString,r.macKey=i.meta.macKeyByteString),null==r.encKey&&(r.encKey=Lj.util.decode64(i.encKeyB64)),r.data=Lj.util.decode64(e),r.iv=Lj.util.decode64(t),r.macData=r.iv+r.data,null==r.macKey&&null!=i.macKeyB64&&(r.macKey=Lj.util.decode64(i.macKeyB64)),null!=n&&(r.mac=Lj.util.decode64(n)),null==i.meta&&(i.meta={}),null==i.meta.encKeyByteString&&(i.meta.encKeyByteString=r.encKey),null!=r.macKey&&null==i.meta.macKeyByteString&&(i.meta.macKeyByteString=r.macKey),r}aesDecryptFast(e){const t=Lj.util.createBuffer(e.data),n=Lj.cipher.createDecipher("AES-CBC",e.encKey);n.start({iv:e.iv}),n.update(t),n.finish();const i=n.output.toString();return Promise.resolve(i)}aesDecrypt(e,t,n){return Gj(this,void 0,void 0,(function*(){const i=yield this.subtle.importKey("raw",n,{name:"AES-CBC"},!1,["decrypt"]);return yield this.subtle.decrypt({name:"AES-CBC",iv:t},i,e)}))}rsaEncrypt(e,t,n){return Gj(this,void 0,void 0,(function*(){const i={name:"RSA-OAEP",hash:{name:this.toWebCryptoAlgorithm(n)}},r=yield this.subtle.importKey("spki",t,i,!1,["encrypt"]);return yield this.subtle.encrypt(i,r,e)}))}rsaDecrypt(e,t,n){return Gj(this,void 0,void 0,(function*(){const i={name:"RSA-OAEP",hash:{name:this.toWebCryptoAlgorithm(n)}},r=yield this.subtle.importKey("pkcs8",t,i,!1,["decrypt"]);return yield this.subtle.decrypt(i,r,e)}))}rsaExtractPublicKey(e){return Gj(this,void 0,void 0,(function*(){const t={name:"RSA-OAEP",hash:{name:this.toWebCryptoAlgorithm("sha1")}},n=yield this.subtle.importKey("pkcs8",e,t,!0,["decrypt"]),i=yield this.subtle.exportKey("jwk",n),r={kty:"RSA",e:i.e,n:i.n,alg:"RSA-OAEP",ext:!0},o=yield this.subtle.importKey("jwk",r,t,!0,["encrypt"]);return yield this.subtle.exportKey("spki",o)}))}rsaGenerateKeyPair(e){return Gj(this,void 0,void 0,(function*(){const t={name:"RSA-OAEP",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:this.toWebCryptoAlgorithm("sha1")}},n=yield this.subtle.generateKey(t,!0,["encrypt","decrypt"]);return[yield this.subtle.exportKey("spki",n.publicKey),yield this.subtle.exportKey("pkcs8",n.privateKey)]}))}randomBytes(e){const t=new Uint8Array(e);return this.crypto.getRandomValues(t),Promise.resolve(t.buffer)}toBuf(e){let t;return t="string"==typeof e?N.c.fromUtf8ToArray(e).buffer:e,t}toByteString(e){let t;return t="string"==typeof e?Lj.util.encodeUtf8(e):N.c.fromBufferToByteString(e),t}toWebCryptoAlgorithm(e){if("md5"===e)throw new Error("MD5 is not supported in WebCrypto.");return"sha1"===e?"SHA-1":"sha256"===e?"SHA-256":"SHA-512"}},deps:[Yj]},{provide:_U,useClass:class{constructor(e,t,n){this.cryptoFunctionService=e,this.logService=t,this.logMacFailures=n}encrypt(e,t){return _V(this,void 0,void 0,(function*(){if(null==t)throw new Error("no encryption key provided.");if(null==e)return Promise.resolve(null);let n;n="string"==typeof e?N.c.fromUtf8ToArray(e).buffer:e;const i=yield this.aesEncrypt(n,t),r=N.c.fromBufferToB64(i.iv),o=N.c.fromBufferToB64(i.data),a=null!=i.mac?N.c.fromBufferToB64(i.mac):null;return new ie._(i.key.encType,o,r,a)}))}decryptToUtf8(e,t){return _V(this,void 0,void 0,(function*(){if(null!=(null==t?void 0:t.macKey)&&null==(null==e?void 0:e.mac))return this.logService.error("mac required."),null;if(t.encType!==e.encryptionType)return this.logService.error("encType unavailable."),null;const n=this.cryptoFunctionService.aesDecryptFastParameters(e.data,e.iv,e.mac,t);if(null!=n.macKey&&null!=n.mac){const e=yield this.cryptoFunctionService.hmacFast(n.macData,n.macKey,"sha256");if(!(yield this.cryptoFunctionService.compareFast(n.mac,e)))return this.logMacFailed("mac failed."),null}return this.cryptoFunctionService.aesDecryptFast(n)}))}aesEncrypt(e,t){return _V(this,void 0,void 0,(function*(){const n=new zV;if(n.key=t,n.iv=yield this.cryptoFunctionService.randomBytes(16),n.data=yield this.cryptoFunctionService.aesEncrypt(e,n.iv,n.key.encKey),null!=n.key.macKey){const e=new Uint8Array(n.iv.byteLength+n.data.byteLength);e.set(new Uint8Array(n.iv),0),e.set(new Uint8Array(n.data),n.iv.byteLength),n.mac=yield this.cryptoFunctionService.hmac(e.buffer,n.key.macKey,"sha256")}return n}))}logMacFailed(e){this.logMacFailures&&this.logService.error(e)}},deps:[we,L.$,oL]},{provide:Xr.P,useClass:class{constructor(e,t,n,i,r){this.apiService=e,this.cipherService=t,this.stateService=n,this.logService=i,this.organizationService=r,this.inited=!1}init(e){this.inited||(this.inited=!0,e&&(this.uploadEvents(),setInterval((()=>this.uploadEvents()),6e4)))}collect(e,t=null,n=!1){return YV(this,void 0,void 0,(function*(){if(!(yield this.stateService.getIsAuthenticated()))return;const i=yield this.organizationService.getAll();if(null==i)return;const r=new Set(i.filter((e=>e.useEvents)).map((e=>e.id)));if(0===r.size)return;if(null!=t){const e=yield this.cipherService.get(t);if(null==e||null==e.organizationId||!r.has(e.organizationId))return}let o=yield this.stateService.getEventCollection();null==o&&(o=[]);const a=new WV;a.type=e,a.cipherId=t,a.date=(new Date).toISOString(),o.push(a),yield this.stateService.setEventCollection(o),n&&(yield this.uploadEvents())}))}uploadEvents(e){return YV(this,void 0,void 0,(function*(){if(!(yield this.stateService.getIsAuthenticated({userId:e})))return;const t=yield this.stateService.getEventCollection({userId:e});if(null==t||0===t.length)return;const n=t.map((e=>{const t=new QV;return t.type=e.type,t.cipherId=e.cipherId,t.date=e.date,t}));try{yield this.apiService.postEventsCollect(n),this.clearEvents(e)}catch(i){this.logService.error(i)}}))}clearEvents(e){return YV(this,void 0,void 0,(function*(){yield this.stateService.setEventCollection(null,{userId:e})}))}},deps:[T.s,Ur.u,P.b,L.$,Ii.M]},{provide:j.d,useClass:class{constructor(e,t,n){this.stateService=e,this.organizationService=t,this.apiService=n}clearCache(){return RH(this,void 0,void 0,(function*(){yield this.stateService.setDecryptedPolicies(null)}))}getAll(e,t){return RH(this,void 0,void 0,(function*(){let n=[];const i=yield this.stateService.getDecryptedPolicies({userId:t});if(null!=i)n=i;else{const e=yield this.stateService.getEncryptedPolicies({userId:t});for(const t in e)e.hasOwnProperty(t)&&n.push(new $e(e[t]));yield this.stateService.setDecryptedPolicies(n,{userId:t})}return null!=e?n.filter((t=>t.type===e)):n}))}getPolicyForOrganization(e,t){return RH(this,void 0,void 0,(function*(){const n=yield this.organizationService.get(t);if(null==n?void 0:n.isProviderUser){const e=(yield this.apiService.getPolicies(t)).data.find((e=>e.organizationId===t));return null==e?null:new $e(new Ee(e))}return(yield this.getAll(e)).find((e=>e.organizationId===t))}))}replace(e){return RH(this,void 0,void 0,(function*(){yield this.stateService.setDecryptedPolicies(null),yield this.stateService.setEncryptedPolicies(e)}))}clear(e){return RH(this,void 0,void 0,(function*(){yield this.stateService.setDecryptedPolicies(null,{userId:e}),yield this.stateService.setEncryptedPolicies(null,{userId:e})}))}getMasterPasswordPoliciesForInvitedUsers(e){return RH(this,void 0,void 0,(function*(){const t=yield this.stateService.getUserId(),n=yield this.apiService.getPoliciesByInvitedUser(e,t),i=yield this.mapPoliciesFromToken(n);return this.getMasterPasswordPolicyOptions(i)}))}getMasterPasswordPolicyOptions(e){return RH(this,void 0,void 0,(function*(){let t=null;return null==(e=null==e?yield this.getAll(Kr.M.MasterPassword):e.filter((e=>e.type===Kr.M.MasterPassword)))||0===e.length||e.forEach((e=>{e.enabled&&null!=e.data&&(null==t&&(t=new Qe.v),null!=e.data.minComplexity&&e.data.minComplexity>t.minComplexity&&(t.minComplexity=e.data.minComplexity),null!=e.data.minLength&&e.data.minLength>t.minLength&&(t.minLength=e.data.minLength),e.data.requireUpper&&(t.requireUpper=!0),e.data.requireLower&&(t.requireLower=!0),e.data.requireNumbers&&(t.requireNumbers=!0),e.data.requireSpecial&&(t.requireSpecial=!0))})),t}))}evaluateMasterPassword(e,t,n){return null==n||!(n.minComplexity>0&&n.minComplexity>e)&&(!(n.minLength>0&&n.minLength>t.length)&&((!n.requireUpper||t.toLocaleLowerCase()!==t)&&((!n.requireLower||t.toLocaleUpperCase()!==t)&&(!(n.requireNumbers&&!/[0-9]/.test(t))&&!(n.requireSpecial&&!/[!@#$%\^&*]/g.test(t))))))}getResetPasswordPolicyOptions(e,t){var n,i,r;const o=new MH;if(null==e||null==t)return[o,!1];const a=e.find((e=>e.organizationId===t&&e.type===Kr.M.ResetPassword&&e.enabled));return o.autoEnrollEnabled=null!==(i=null===(n=null==a?void 0:a.data)||void 0===n?void 0:n.autoEnrollEnabled)&&void 0!==i&&i,[o,null!==(r=null==a?void 0:a.enabled)&&void 0!==r&&r]}mapPoliciesFromToken(e){if(null==e||null==e.data)return null;return e.data.map((e=>new Ee(e))).map((e=>new $e(e)))}policyAppliesToUser(e,t,n){return RH(this,void 0,void 0,(function*(){const i=yield this.getAll(e,n),r=yield this.organizationService.getAll(n);let o;o=null!=t?i.filter((e=>e.enabled&&t(e))):i.filter((e=>e.enabled));const a=new Set(o.map((e=>e.organizationId)));return r.some((t=>t.enabled&&t.status>=Vr.Accepted&&t.usePolicies&&!this.isExcemptFromPolicies(t,e)&&a.has(t.id)))}))}isExcemptFromPolicies(e,t){return t===Kr.M.MaximumVaultTimeout?e.type===Qs.Owner:e.isExemptFromPolicies}},deps:[P.b,Ii.M,T.s]},{provide:AA,useClass:class{constructor(e,t,n,i,r,o){this.cryptoService=e,this.apiService=t,this.fileUploadService=n,this.i18nService=i,this.cryptoFunctionService=r,this.stateService=o}clearCache(){return _H(this,void 0,void 0,(function*(){yield this.stateService.setDecryptedSends(null)}))}encrypt(e,t,n,i){return _H(this,void 0,void 0,(function*(){let r=null;const o=new qH;if(o.id=e.id,o.type=e.type,o.disabled=e.disabled,o.hideEmail=e.hideEmail,o.maxAccessCount=e.maxAccessCount,null==e.key&&(e.key=yield this.cryptoFunctionService.randomBytes(16),e.cryptoKey=yield this.cryptoService.makeSendKey(e.key)),null!=n){const t=yield this.cryptoFunctionService.pbkdf2(n,e.key,"sha256",He.gY);o.password=N.c.fromBufferToB64(t)}if(o.key=yield this.cryptoService.encrypt(e.key,i),o.name=yield this.cryptoService.encrypt(e.name,e.cryptoKey),o.notes=yield this.cryptoService.encrypt(e.notes,e.cryptoKey),o.type===tA.Text)o.text=new sA,o.text.text=yield this.cryptoService.encrypt(e.text.text,e.cryptoKey),o.text.hidden=e.text.hidden;else if(o.type===tA.File&&(o.file=new aA,null!=t))if(t instanceof ArrayBuffer){const[n,i]=yield this.encryptFileData(e.file.fileName,t,e.cryptoKey);o.file.fileName=n,r=i}else r=yield this.parseFile(o,t,e.cryptoKey);return[o,r]}))}get(e){return _H(this,void 0,void 0,(function*(){const t=yield this.stateService.getEncryptedSends();return null!=t&&t.hasOwnProperty(e)?new qH(t[e]):null}))}getAll(){return _H(this,void 0,void 0,(function*(){const e=yield this.stateService.getEncryptedSends(),t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(new qH(e[n]));return t}))}getAllDecrypted(){return _H(this,void 0,void 0,(function*(){let e=yield this.stateService.getDecryptedSends();if(null!=e)return e;e=[];if(!(yield this.cryptoService.hasKey()))throw new Error("No key.");const t=[];return(yield this.getAll()).forEach((n=>{t.push(n.decrypt().then((t=>e.push(t))))})),yield Promise.all(t),e.sort(N.c.getSortFunction(this.i18nService,"name")),yield this.stateService.setDecryptedSends(e),e}))}saveWithServer(e){var t;return _H(this,void 0,void 0,(function*(){const n=new FD(e[0],null===(t=e[1])||void 0===t?void 0:t.buffer.byteLength);let i;if(null==e[0].id){if(e[0].type===tA.Text)i=yield this.apiService.postSend(n);else try{const t=yield this.apiService.postFileTypeSend(n);i=t.sendResponse,yield this.fileUploadService.uploadSendFile(t,e[0].file.fileName,e[1])}catch(o){if(!(o instanceof wa.i&&404===o.statusCode))throw o instanceof wa.i?new Error(o.getSingleMessage()):o;i=yield this.legacyServerSendFileUpload(e,n)}e[0].id=i.id,e[0].accessId=i.accessId}else i=yield this.apiService.putSend(e[0].id,n);const r=new KH(i);yield this.upsert(r)}))}legacyServerSendFileUpload(e,t){return _H(this,void 0,void 0,(function*(){const n=new FormData;try{const i=new Blob([e[1].buffer],{type:"application/octet-stream"});n.append("model",JSON.stringify(t)),n.append("data",i,e[0].file.fileName.encryptedString)}catch(i){if(!N.c.isNode||N.c.isBrowser)throw i;n.append("model",JSON.stringify(t)),n.append("data",Buffer.from(e[1].buffer),{filepath:e[0].file.fileName.encryptedString,contentType:"application/octet-stream"})}return yield this.apiService.postSendFileLegacy(n)}))}upsert(e){return _H(this,void 0,void 0,(function*(){let t=yield this.stateService.getEncryptedSends();if(null==t&&(t={}),e instanceof KH){const n=e;t[n.id]=n}else e.forEach((e=>{t[e.id]=e}));yield this.replace(t)}))}replace(e){return _H(this,void 0,void 0,(function*(){yield this.stateService.setDecryptedSends(null),yield this.stateService.setEncryptedSends(e)}))}clear(){return _H(this,void 0,void 0,(function*(){yield this.stateService.setDecryptedSends(null),yield this.stateService.setEncryptedSends(null)}))}delete(e){return _H(this,void 0,void 0,(function*(){const t=yield this.stateService.getEncryptedSends();if(null!=t){if("string"==typeof e){if(null==t[e])return;delete t[e]}else e.forEach((e=>{delete t[e]}));yield this.replace(t)}}))}deleteWithServer(e){return _H(this,void 0,void 0,(function*(){yield this.apiService.deleteSend(e),yield this.delete(e)}))}removePasswordWithServer(e){return _H(this,void 0,void 0,(function*(){const t=yield this.apiService.putSendRemovePassword(e),n=new KH(t);yield this.upsert(n)}))}parseFile(e,t,n){return new Promise(((i,r)=>{const o=new FileReader;o.readAsArrayBuffer(t),o.onload=o=>_H(this,void 0,void 0,(function*(){try{const[r,a]=yield this.encryptFileData(t.name,o.target.result,n);e.file.fileName=r,i(a)}catch(a){r(a)}})),o.onerror=()=>{r("Error reading file.")}}))}encryptFileData(e,t,n){return _H(this,void 0,void 0,(function*(){return[yield this.cryptoService.encrypt(e,n),yield this.cryptoService.encryptToBytes(t,n)]}))}},deps:[H.$,T.s,$U,k.D,we,P.b]},{provide:g.J,useClass:class{constructor(e,t,n,i,r,o,a,s){this.stateService=e,this.cryptoService=t,this.apiService=n,this.tokenService=i,this.logService=r,this.organizationService=o,this.cryptoFunctionService=a,this.logoutCallback=s}setUsesKeyConnector(e){return this.stateService.setUsesKeyConnector(e)}getUsesKeyConnector(){return gH(this,void 0,void 0,(function*(){return yield this.stateService.getUsesKeyConnector()}))}userNeedsMigration(){return gH(this,void 0,void 0,(function*(){const e=yield this.tokenService.getIsExternal(),t=null!=(yield this.getManagingOrganization()),n=!(yield this.getUsesKeyConnector());return e&&t&&n}))}migrateUser(){return gH(this,void 0,void 0,(function*(){const e=yield this.getManagingOrganization(),t=yield this.cryptoService.getKey(),n=new vH(t.encKeyB64);try{yield this.apiService.postUserKeyToKeyConnector(e.keyConnectorUrl,n)}catch(i){this.handleKeyConnectorError(i)}yield this.apiService.postConvertToKeyConnector()}))}getAndSetKey(e){return gH(this,void 0,void 0,(function*(){try{const t=yield this.apiService.getUserKeyFromKeyConnector(e),n=N.c.fromB64ToArray(t.key),i=new mg.N(n);yield this.cryptoService.setKey(i)}catch(t){this.handleKeyConnectorError(t)}}))}getManagingOrganization(){return gH(this,void 0,void 0,(function*(){return(yield this.organizationService.getAll()).find((e=>e.keyConnectorEnabled&&e.type!==Qs.Admin&&e.type!==Qs.Owner&&!e.isProviderUser))}))}convertNewSsoUserToKeyConnector(e,t){return gH(this,void 0,void 0,(function*(){const{kdf:n,kdfIterations:i,keyConnectorUrl:r}=e,o=yield this.cryptoFunctionService.randomBytes(64),a=yield this.cryptoService.makeKey(N.c.fromBufferToB64(o),yield this.tokenService.getEmail(),n,i),s=new vH(a.encKeyB64);yield this.cryptoService.setKey(a);const l=yield this.cryptoService.makeEncKey(a);yield this.cryptoService.setEncKey(l[1].encryptedString);const[d,c]=yield this.cryptoService.makeKeyPair();try{yield this.apiService.postUserKeyToKeyConnector(r,s)}catch(m){this.handleKeyConnectorError(m)}const p=new je(d,c.encryptedString),u=new hH(l[1].encryptedString,n,i,t,p);yield this.apiService.postSetKeyConnectorKey(u)}))}setConvertAccountRequired(e){return gH(this,void 0,void 0,(function*(){yield this.stateService.setConvertAccountToKeyConnector(e)}))}getConvertAccountRequired(){return gH(this,void 0,void 0,(function*(){return yield this.stateService.getConvertAccountToKeyConnector()}))}removeConvertAccountRequired(){return gH(this,void 0,void 0,(function*(){yield this.stateService.setConvertAccountToKeyConnector(null)}))}clear(){return gH(this,void 0,void 0,(function*(){yield this.removeConvertAccountRequired()}))}handleKeyConnectorError(e){throw this.logService.error(e),null!=this.logoutCallback&&this.logoutCallback(!1),new Error("Key Connector error")}},deps:[P.b,H.$,T.s,bi,L.$,Ii.M,we,tL]},{provide:Yn.i,useClass:class{constructor(e,t,n){this.cryptoService=e,this.i18nService=t,this.apiService=n}buildRequest(e,t,n){return Nj(this,void 0,void 0,(function*(){this.validateInput(e);const i=null!=t?new t:new re;return e.type===Wn.R.OTP?i.otp=e.secret:i.masterPasswordHash=n?e.secret:yield this.cryptoService.hashPassword(e.secret,null),i}))}verifyUser(e){return Nj(this,void 0,void 0,(function*(){if(this.validateInput(e),e.type===Wn.R.OTP){const n=new zj(e.secret);try{yield this.apiService.postAccountVerifyOTP(n)}catch(t){throw new Error(this.i18nService.t("invalidVerificationCode"))}}else{if(!(yield this.cryptoService.compareAndUpdateKeyHash(e.secret,null)))throw new Error(this.i18nService.t("invalidMasterPassword"))}return!0}))}requestOTP(){return Nj(this,void 0,void 0,(function*(){yield this.apiService.postAccountRequestOTP()}))}validateInput(e){if(null==(null==e?void 0:e.secret)||""===e.secret)throw e.type===Wn.R.OTP?new Error(this.i18nService.t("verificationCodeRequired")):new Error(this.i18nService.t("masterPassRequired"))}},deps:[H.$,k.D,T.s]},{provide:eo,useClass:Qj},{provide:Ii.M,useClass:class{constructor(e){this.stateService=e}get(e){return kH(this,void 0,void 0,(function*(){const t=yield this.stateService.getOrganizations();return null!=t&&t.hasOwnProperty(e)?new Xs(t[e]):null}))}getByIdentifier(e){return kH(this,void 0,void 0,(function*(){const t=yield this.getAll();return null==t||0===t.length?null:t.find((t=>t.identifier===e))}))}getAll(e){return kH(this,void 0,void 0,(function*(){const t=yield this.stateService.getOrganizations({userId:e}),n=[];for(const e in t)t.hasOwnProperty(e)&&!t[e].isProviderUser&&n.push(new Xs(t[e]));return n.sort(((e,t)=>e.name.localeCompare(t.name)))}))}save(e){return kH(this,void 0,void 0,(function*(){return yield this.stateService.setOrganizations(e)}))}canManageSponsorships(){return kH(this,void 0,void 0,(function*(){return(yield this.getAll()).some((e=>e.familySponsorshipAvailable||null!==e.familySponsorshipFriendlyName))}))}hasOrganizations(e){return kH(this,void 0,void 0,(function*(){return(yield this.getAll(e)).length>0}))}},deps:[P.b]},{provide:wi,useClass:class{constructor(e){this.stateService=e}get(e){return zH(this,void 0,void 0,(function*(){const t=yield this.stateService.getProviders();return null!=t&&t.hasOwnProperty(e)?new UH(t[e]):null}))}getAll(){return zH(this,void 0,void 0,(function*(){const e=yield this.stateService.getProviders(),t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(new UH(e[n]));return t}))}save(e){return zH(this,void 0,void 0,(function*(){yield this.stateService.setProviders(e)}))}},deps:[P.b]},{provide:mn,useClass:class{constructor(e,t){this.i18nService=e,this.platformUtilsService=t,this.selectedTwoFactorProviderType=null}init(){un[sn.Email].name=this.i18nService.t("emailTitle"),un[sn.Email].description=this.i18nService.t("emailDesc"),un[sn.Authenticator].name=this.i18nService.t("authenticatorAppTitle"),un[sn.Authenticator].description=this.i18nService.t("authenticatorAppDesc"),un[sn.Duo].description=this.i18nService.t("duoDesc"),un[sn.OrganizationDuo].name="Duo ("+this.i18nService.t("organization")+")",un[sn.OrganizationDuo].description=this.i18nService.t("duoOrganizationDesc"),un[sn.WebAuthn].name=this.i18nService.t("webAuthnTitle"),un[sn.WebAuthn].description=this.i18nService.t("webAuthnDesc"),un[sn.Yubikey].name=this.i18nService.t("yubiKeyTitle"),un[sn.Yubikey].description=this.i18nService.t("yubiKeyDesc")}getSupportedProviders(e){const t=[];return null==this.twoFactorProvidersData||(this.twoFactorProvidersData.has(sn.OrganizationDuo)&&this.platformUtilsService.supportsDuo()&&t.push(un[sn.OrganizationDuo]),this.twoFactorProvidersData.has(sn.Authenticator)&&t.push(un[sn.Authenticator]),this.twoFactorProvidersData.has(sn.Yubikey)&&t.push(un[sn.Yubikey]),this.twoFactorProvidersData.has(sn.Duo)&&this.platformUtilsService.supportsDuo()&&t.push(un[sn.Duo]),this.twoFactorProvidersData.has(sn.WebAuthn)&&this.platformUtilsService.supportsWebAuthn(e)&&t.push(un[sn.WebAuthn]),this.twoFactorProvidersData.has(sn.Email)&&t.push(un[sn.Email])),t}getDefaultProvider(e){if(null==this.twoFactorProvidersData)return null;if(null!=this.selectedTwoFactorProviderType&&this.twoFactorProvidersData.has(this.selectedTwoFactorProviderType))return this.selectedTwoFactorProviderType;let t=null,n=-1;return this.twoFactorProvidersData.forEach(((i,r)=>{const o=un[r];if(null!=o&&o.priority>n){if(r===sn.WebAuthn&&!e)return;t=r,n=o.priority}})),t}setSelectedProvider(e){this.selectedTwoFactorProviderType=e}clearSelectedProvider(){this.selectedTwoFactorProviderType=null}setProviders(e){this.twoFactorProvidersData=e.twoFactorProviders2}clearProviders(){this.twoFactorProvidersData=null}getProviders(){return this.twoFactorProvidersData}},deps:[k.D,E.P]},{provide:hy,useClass:qU},{provide:Ke,useClass:class{getFormValidationErrors(e){let t=[];return Object.keys(e).forEach((n=>{const i=e[n];i instanceof d.FormGroup&&(t=t.concat(this.getFormValidationErrors(i.controls)));const r=e[n].errors;null!==r&&Object.keys(r).forEach((e=>{t.push({controlName:n,errorName:e})}))})),t}}}]});var sL=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class lL{constructor(){this.store=new Map}get(e){if(this.store.has(e)){const t=this.store.get(e);return Promise.resolve(t)}return Promise.resolve(null)}has(e){return sL(this,void 0,void 0,(function*(){return null!=this.get(e)}))}save(e,t){return null==t?this.remove(e):(this.store.set(e,t),Promise.resolve())}remove(e){return this.store.delete(e),Promise.resolve()}}class dL extends lz{constructor(){super(...arguments),this.vaultTimeout=15}}class cL extends cz{constructor(e){super(e),this.settings=new dL,Object.assign(this.settings,Object.assign(Object.assign({},new dL),this.settings))}}class pL{constructor(e){this.broadcasterService=e}send(e,t={}){const n=Object.assign({},{command:e},t);this.broadcasterService.send(n)}}pL.ɵfac=function(e){return new(e||pL)(o["ɵɵinject"](Ci))},pL.ɵprov=o["ɵɵdefineInjectable"]({token:pL,factory:pL.ɵfac});var uL=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class mL{get defaultOptions(){return{htmlStorageLocation:HN.Session}}get(e,t=this.defaultOptions){let n=null;switch(t.htmlStorageLocation){case HN.Local:n=window.localStorage.getItem(e);break;case HN.Session:default:n=window.sessionStorage.getItem(e)}if(null!=n){const e=JSON.parse(n);return Promise.resolve(e)}return Promise.resolve(null)}has(e,t=this.defaultOptions){return uL(this,void 0,void 0,(function*(){return null!=(yield this.get(e,t))}))}save(e,t,n=this.defaultOptions){if(null==t)return this.remove(e,n);t instanceof Set&&(t=Array.from(t));const i=JSON.stringify(t);switch(n.htmlStorageLocation){case HN.Local:window.localStorage.setItem(e,i);break;case HN.Session:default:window.sessionStorage.setItem(e,i)}return Promise.resolve()}remove(e,t=this.defaultOptions){switch(t.htmlStorageLocation){case HN.Local:window.localStorage.removeItem(e);break;case HN.Session:default:window.sessionStorage.removeItem(e)}return Promise.resolve()}}mL.ɵfac=function(e){return new(e||mL)},mL.ɵprov=o["ɵɵdefineInjectable"]({token:mL,factory:mL.ɵfac});var hL=n(24504),vL=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};var gL=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class fL{constructor(e){this.el=e}onClick(){this.el.nativeElement.blur()}}fL.ɵfac=function(e){return new(e||fL)(o["ɵɵdirectiveInject"](o.ElementRef))},fL.ɵdir=o["ɵɵdefineDirective"]({type:fL,selectors:[["","appBlurClick",""]],hostBindings:function(e,t){1&e&&o["ɵɵlistener"]("click",(function(){return t.onClick()}))}});const xL=function(e,t){return{"bwi-eye":e,"bwi-eye-slash":t}};class yL extends $j{}yL.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](yL)))(t||yL)}}(),yL.ɵcmp=o["ɵɵdefineComponent"]({type:yL,selectors:[["ng-component"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:59,vars:24,consts:[["role","dialog","aria-modal","true","aria-labelledby","confirmUserTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content",3,"ngSubmit"],["form",""],[1,"modal-header"],["id","confirmUserTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],["for","masterPassword"],[1,"d-flex"],["id","masterPassword","name","MasterPassword","required","","appAutofocus","","appInputVerbatim","",1,"text-monospace","form-control",3,"type","ngModel","ngModelChange"],["type","button",1,"ml-1","btn","btn-link",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg",3,"ngClass"],[1,"modal-footer"],["type","submit","appBlurClick","",1,"btn","btn-primary","btn-submit"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"button",6),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"span",7),o["ɵɵtext"](16,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"div",8),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementStart"](23,"div",9),o["ɵɵtext"](24,"\n          "),o["ɵɵelementStart"](25,"label",10),o["ɵɵtext"](26),o["ɵɵpipe"](27,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n          "),o["ɵɵelementStart"](29,"div",11),o["ɵɵtext"](30,"\n            "),o["ɵɵelementStart"](31,"input",12),o["ɵɵlistener"]("ngModelChange",(function(e){return t.masterPassword=e})),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n            "),o["ɵɵelementStart"](33,"button",13),o["ɵɵlistener"]("click",(function(){return t.togglePassword()})),o["ɵɵpipe"](34,"i18n"),o["ɵɵtext"](35,"\n              "),o["ɵɵelement"](36,"i",14),o["ɵɵtext"](37,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n      "),o["ɵɵelementStart"](42,"div",15),o["ɵɵtext"](43,"\n        "),o["ɵɵelementStart"](44,"button",16),o["ɵɵtext"](45,"\n          "),o["ɵɵelementStart"](46,"span"),o["ɵɵtext"](47),o["ɵɵpipe"](48,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n        "),o["ɵɵelementStart"](51,"button",17),o["ɵɵtext"](52),o["ɵɵpipe"](53,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](56,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](57,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n")),2&e&&(o["ɵɵadvance"](10),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](11,9,"passwordConfirmation"),"\n        "),o["ɵɵadvance"](11),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](22,11,"passwordConfirmationDesc"),"\n\n        "),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](27,13,"masterPass")),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("type",t.showPassword?"text":"password"),o["ɵɵproperty"]("ngModel",t.masterPassword),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](34,15,"toggleVisibility")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](21,xL,!t.showPassword,t.showPassword)),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](48,17,"ok")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](53,19,"cancel"),"\n        "))},directives:[d["ɵNgNoValidate"],d.NgControlStatusGroup,d.NgForm,d.DefaultValueAccessor,d.RequiredValidator,Z.U,J.b,d.NgControlStatus,d.NgModel,pe,B.NgClass,fL],pipes:[M.C],encapsulation:2});class SL extends Qj{constructor(){super(...arguments),this.component=yL}}SL.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](SL)))(t||SL)}}(),SL.ɵprov=o["ɵɵdefineInjectable"]({token:SL,factory:SL.ɵfac});var bL=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};var wL=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};var IL,CL=n(76291),EL=n.n(CL);!function(e){e.Web="web",e.Browser="browser",e.Desktop="desktop",e.Mobile="mobile",e.Cli="cli",e.DirectoryConnector="connector"}(IL||(IL={}));var kL=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class PL{constructor(e,t,n){this.i18nService=e,this.messagingService=t,this.logService=n,this.browserCache=null}getDevice(){return null!=this.browserCache||(-1!==navigator.userAgent.indexOf(" Firefox/")||-1!==navigator.userAgent.indexOf(" Gecko/")?this.browserCache=kc.FirefoxBrowser:navigator.userAgent.indexOf(" OPR/")>=0?this.browserCache=kc.OperaBrowser:-1!==navigator.userAgent.indexOf(" Edg/")?this.browserCache=kc.EdgeBrowser:-1!==navigator.userAgent.indexOf(" Vivaldi/")?this.browserCache=kc.VivaldiBrowser:-1!==navigator.userAgent.indexOf(" Safari/")&&-1===navigator.userAgent.indexOf("Chrome")?this.browserCache=kc.SafariBrowser:window.chrome&&-1!==navigator.userAgent.indexOf(" Chrome/")?this.browserCache=kc.ChromeBrowser:-1!==navigator.userAgent.indexOf(" Trident/")?this.browserCache=kc.IEBrowser:this.browserCache=kc.UnknownBrowser),this.browserCache}getDeviceString(){return kc[this.getDevice()].toLowerCase().replace("browser","")}getClientType(){return IL.Web}isFirefox(){return this.getDevice()===kc.FirefoxBrowser}isChrome(){return this.getDevice()===kc.ChromeBrowser}isEdge(){return this.getDevice()===kc.EdgeBrowser}isOpera(){return this.getDevice()===kc.OperaBrowser}isVivaldi(){return this.getDevice()===kc.VivaldiBrowser}isSafari(){return this.getDevice()===kc.SafariBrowser}isMacAppStore(){return!1}isViewOpen(){return Promise.resolve(!1)}launchUri(e,t){const n=document.createElement("a");n.href=e,null!=t&&t.sameWindow||(n.target="_blank",n.rel="noreferrer noopener"),n.classList.add("d-none"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}getApplicationVersion(){return Promise.resolve("2022.6.2")}supportsWebAuthn(e){return"undefined"!=typeof PublicKeyCredential}supportsDuo(){return!0}showToast(e,t,n,i){this.messagingService.send("showToast",{text:n,title:t,type:e,options:i})}showDialog(e,t,n,i,r,o=!1){return kL(this,void 0,void 0,(function*(){let a=null;if(null!=r)switch(r){case"success":a="bwi-check text-success";break;case"warning":a="bwi-exclamation-triangle text-warning";break;case"error":a="bwi-error text-danger";break;case"info":a="bwi-info-circle text-info"}const s=document.querySelector("div.modal");null!=s&&s.removeAttribute("tabindex");const l=null!=a?`<i class="swal-custom-icon bwi ${a}"></i>`:void 0,d=yield EL().fire({heightAuto:!1,buttonsStyling:!1,icon:r,iconHtml:l,text:o?null:e,html:o?e:null,titleText:t,showCancelButton:null!=i,cancelButtonText:i,showConfirmButton:!0,confirmButtonText:null==n?this.i18nService.t("ok"):n});return null!=s&&s.setAttribute("tabindex","-1"),d.value}))}isDev(){return!1}isSelfHost(){return"selfhosted"==="cloud".toString()}copyToClipboard(e,t){let n=window,i=window.document;if(t&&(t.window||t.win)?(n=t.window||t.win,i=n.document):t&&t.doc&&(i=t.doc),n.clipboardData&&n.clipboardData.setData)n.clipboardData.setData("Text",e);else if(i.queryCommandSupported&&i.queryCommandSupported("copy")){const t=i.createElement("textarea");t.textContent=e,t.style.position="fixed";let n=i.body;i.body.classList.contains("modal-open")&&(n=i.body.querySelector(".modal")),n.appendChild(t),t.select();let o=!1;try{o=i.execCommand("copy"),o||this.logService.debug("Copy command unsupported or disabled.")}catch(r){console.warn("Copy to clipboard failed.",r)}finally{n.removeChild(t)}return o}}readFromClipboard(e){throw new Error("Cannot read from clipboard on web.")}supportsBiometric(){return Promise.resolve(!1)}authenticateBiometric(){return Promise.resolve(!1)}supportsSecureStorage(){return!1}}PL.ɵfac=function(e){return new(e||PL)(o["ɵɵinject"](k.D),o["ɵɵinject"](v),o["ɵɵinject"](L.$))},PL.ɵprov=o["ɵɵdefineInjectable"]({token:PL,factory:PL.ɵfac});class AL{constructor(e){this.cryptoService=e}attachToWindow(e){this.attachToGlobal(e)}attachToGlobal(e){e.bitwardenContainerService||(e.bitwardenContainerService=this)}getCryptoService(){return this.cryptoService}}var OL=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class TL{constructor(e,t,n,i,r,o,a,s,l,d){this.win=e,this.environmentService=t,this.notificationsService=n,this.vaultTimeoutService=i,this.i18nService=r,this.eventLoggingService=o,this.twoFactorService=a,this.stateService=s,this.cryptoService=l,this.themingService=d}init(){return()=>OL(this,void 0,void 0,(function*(){var e;yield this.stateService.init();const t={icons:"https://icons.bitwarden.net",notifications:"https://notifications.bitwarden.com"};null!==(e=t.base)&&void 0!==e||(t.base=this.win.location.origin),this.environmentService.setUrls(t),setTimeout((()=>this.notificationsService.init()),3e3),this.vaultTimeoutService.init(!0);const n=yield this.stateService.getLocale();yield this.i18nService.init(n),this.eventLoggingService.init(!0),this.twoFactorService.init();this.win.document.documentElement.classList.add("locale_"+this.i18nService.translationLocale),yield this.themingService.monitorThemeChanges();new AL(this.cryptoService).attachToWindow(this.win)}))}}TL.ɵfac=function(e){return new(e||TL)(o["ɵɵinject"](Yj),o["ɵɵinject"](ae),o["ɵɵinject"](WU),o["ɵɵinject"](oe),o["ɵɵinject"](k.D),o["ɵɵinject"](Xr.P),o["ɵɵinject"](mn),o["ɵɵinject"](P.b),o["ɵɵinject"](H.$),o["ɵɵinject"](hy))},TL.ɵprov=o["ɵɵdefineInjectable"]({token:TL,factory:TL.ɵfac});class BL extends kn{constructor(e,t,n,i){super(e,t,n),this.messagingService=i,this.el=null,this.modalOpen=!1}setupHandlers(e){e.onCreated.pipe((0,C.P)()).subscribe((()=>{const t=Array.from(document.querySelectorAll(".modal"));t.length>0&&(this.el=a(t[0]),this.el.modal("show"),this.el.on("show.bs.modal",(()=>{e.show(),this.messagingService.send("modalShow")})),this.el.on("shown.bs.modal",(()=>{e.shown(),this.messagingService.send("modalShown"),N.c.isMobileBrowser||this.el.find("*[appAutoFocus]").focus()})),this.el.on("hide.bs.modal",(()=>{this.messagingService.send("modalClose")})),this.el.on("hidden.bs.modal",(()=>{e.closed(),this.messagingService.send("modalClosed")})))})),e.onClose.pipe((0,C.P)()).subscribe((()=>{null!=this.el&&this.el.modal("hide")}))}}BL.ɵfac=function(e){return new(e||BL)(o["ɵɵinject"](o.ComponentFactoryResolver),o["ɵɵinject"](o.ApplicationRef),o["ɵɵinject"](o.Injector),o["ɵɵinject"](v))},BL.ɵprov=o["ɵɵdefineInjectable"]({token:BL,factory:BL.ɵfac});class ML{constructor(e){this._request=e}get blobOptions(){var e;const t=null!==(e=this._request.blobOptions)&&void 0!==e?e:{};return null==t.type&&(t.type=this.fileType),t}get blob(){return null!=this.blobOptions?new Blob([this._request.blobData],this.blobOptions):new Blob([this._request.blobData])}get downloadMethod(){return null!=this._request.downloadMethod?this._request.downloadMethod:"application/pdf"!=this.fileType?"save":"open"}get fileType(){const e=this._request.fileName.toLowerCase();return e.endsWith(".pdf")?"application/pdf":e.endsWith(".xlsx")?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":e.endsWith(".docx")?"application/vnd.openxmlformats-officedocument.wordprocessingml.document":e.endsWith(".pptx")?"application/vnd.openxmlformats-officedocument.presentationml.presentation":e.endsWith(".csv")?"text/csv":e.endsWith(".png")?"image/png":e.endsWith(".jpg")||e.endsWith(".jpeg")?"image/jpeg":e.endsWith(".gif")?"image/gif":null}}class DL{constructor(e){this.platformUtilsService=e}download(e){const t=new ML(e),n=window.document.createElement("a");"save"===t.downloadMethod?n.download=e.fileName:this.platformUtilsService.isSafari()||(n.target="_blank"),n.href=URL.createObjectURL(t.blob),n.style.position="fixed",window.document.body.appendChild(n),n.click(),window.document.body.removeChild(n)}}DL.ɵfac=function(e){return new(e||DL)(o["ɵɵinject"](E.P))},DL.ɵprov=o["ɵɵdefineInjectable"]({token:DL,factory:DL.ɵfac});class FL{}FL.ɵfac=function(e){return new(e||FL)},FL.ɵmod=o["ɵɵdefineNgModule"]({type:FL}),FL.ɵinj=o["ɵɵdefineInjector"]({providers:[Si,Qu.v,TL,ce,Oc,nx,{provide:o.APP_INITIALIZER,useFactory:e=>e.init(),deps:[TL],multi:!0},{provide:Xj,useValue:new ez(class extends uz{constructor(){super(...arguments),this.theme=ly.Light,this.rememberEmail=!0}},cL)},{provide:eL,useValue:!1},{provide:k.D,useClass:class extends class{constructor(e,t,n){this.systemLanguage=e,this.localesDirectory=t,this.getLocalesJson=n,this._locale=new hL.t(1),this.locale$=this._locale.asObservable(),this.supportedTranslationLocales=["en"],this.localeNames=new Map([["af","Afrikaans"],["az","Azərbaycanca"],["be","Беларуская"],["bg","български"],["bn","বাংলা"],["bs","bosanski jezik"],["ca","català"],["cs","čeština"],["da","dansk"],["de","Deutsch"],["el","Ελληνικά"],["en","English"],["en-GB","English (British)"],["en-IN","English (India)"],["eo","Esperanto"],["es","español"],["et","eesti"],["fa","فارسی"],["fi","suomi"],["fil","Wikang Filipino"],["fr","français"],["he","עברית"],["hi","हिन्दी"],["hr","hrvatski"],["hu","magyar"],["id","Bahasa Indonesia"],["it","italiano"],["ja","日本語"],["ka","ქართული"],["km","ខ្មែរ, ខេមរភាសា, ភាសាខ្មែរ"],["kn","ಕನ್ನಡ"],["ko","한국어"],["lt","lietuvių kalba"],["lv","Latvietis"],["me","црногорски"],["ml","മലയാളം"],["nb","norsk (bokmål)"],["nl","Nederlands"],["nn","Norsk Nynorsk"],["pl","polski"],["pt-BR","português do Brasil"],["pt-PT","português"],["ro","română"],["ru","русский"],["si","සිංහල"],["sk","slovenčina"],["sl","Slovenski jezik, Slovenščina"],["sr","Српски"],["sv","svenska"],["th","ไทย"],["tr","Türkçe"],["uk","українська"],["vi","Tiếng Việt"],["zh-CN","中文（中国大陆）"],["zh-TW","中文（台灣）"]]),this.defaultMessages={},this.localeMessages={},this.systemLanguage=e.replace("_","-")}init(e){return vL(this,void 0,void 0,(function*(){if(this.inited)throw new Error("i18n already initialized.");if(null==this.supportedTranslationLocales||0===this.supportedTranslationLocales.length)throw new Error("supportedTranslationLocales not set.");this.inited=!0,this.translationLocale=null!=e?e:this.systemLanguage,this._locale.next(this.translationLocale);try{this.collator=new Intl.Collator(this.translationLocale,{numeric:!0,sensitivity:"base"})}catch(t){this.collator=null}-1===this.supportedTranslationLocales.indexOf(this.translationLocale)&&(this.translationLocale=this.translationLocale.slice(0,2),-1===this.supportedTranslationLocales.indexOf(this.translationLocale)&&(this.translationLocale=this.supportedTranslationLocales[0])),null!=this.localesDirectory&&(yield this.loadMessages(this.translationLocale,this.localeMessages),this.translationLocale!==this.supportedTranslationLocales[0]&&(yield this.loadMessages(this.supportedTranslationLocales[0],this.defaultMessages)))}))}t(e,t,n,i){return this.translate(e,t,n,i)}translate(e,t,n,i){let r;return r=this.localeMessages.hasOwnProperty(e)&&this.localeMessages[e]?this.localeMessages[e]:this.defaultMessages.hasOwnProperty(e)&&this.defaultMessages[e]?this.defaultMessages[e]:"",""!==r&&(null!=t&&(r=r.split("__$1__").join(t)),null!=n&&(r=r.split("__$2__").join(n)),null!=i&&(r=r.split("__$3__").join(i))),r}loadMessages(e,t){return vL(this,void 0,void 0,(function*(){const n=e.replace("-","_"),i=yield this.getLocalesJson(n);for(const e in i)if(i.hasOwnProperty(e)&&(t[e]=i[e].message,i[e].placeholders))for(const n in i[e].placeholders){if(!i[e].placeholders.hasOwnProperty(n)||!i[e].placeholders[n].content)continue;const r="\\$"+n.toUpperCase()+"\\$";let o=i[e].placeholders[n].content;"$1"!==o&&"$2"!==o&&"$3"!==o||(o="__$"+o+"__"),t[e]=t[e].replace(new RegExp(r,"g"),o)}}))}}{constructor(e,t){super(e||"en-US",t,(e=>gL(this,void 0,void 0,(function*(){const t=this.localesDirectory+"/"+e+"/messages.json?cache=8oouw",n=yield fetch(t);return yield n.json()})))),this.supportedTranslationLocales=["en","af","az","be","bg","bn","bs","ca","cs","da","de","el","en-GB","en-IN","eo","es","et","fi","fil","fr","he","hi","hr","hu","id","it","ja","ka","km","kn","ko","lv","ml","nb","nl","nn","pl","pt-PT","pt-BR","ro","ru","si","sk","sl","sr","sv","tr","uk","vi","zh-CN","zh-TW"]}},deps:[rL,iL]},{provide:ZU,useClass:mL},{provide:Jj,useClass:lL},{provide:Zj,useClass:lL},{provide:E.P,useClass:PL},{provide:v,useClass:pL},{provide:kn,useClass:BL},{provide:YU,useClass:class extends Aj{migrationStateFrom1To2(){const e=Object.create(null,{migrateStateFrom1To2:{get:()=>super.migrateStateFrom1To2}});var t,n;return wL(this,void 0,void 0,(function*(){yield e.migrateStateFrom1To2.call(this);const i=null!==(t=yield this.get("global"))&&void 0!==t?t:this.stateFactory.createGlobal(null);i.rememberEmail=null!==(n=yield this.get("rememberEmail"))&&void 0!==n?n:i.rememberEmail,yield this.set("global",i)}))}},deps:[ZU,Jj,Xj]},{provide:ke,useClass:class extends cj{addAccount(e){const t=Object.create(null,{addAccount:{get:()=>super.addAccount}});return bL(this,void 0,void 0,(function*(){e=new cL(e),yield t.addAccount.call(this,e)}))}getRememberEmail(e){var t;return bL(this,void 0,void 0,(function*(){return null===(t=yield this.getGlobals(this.reconcileOptions(e,yield this.defaultOnDiskLocalOptions())))||void 0===t?void 0:t.rememberEmail}))}setRememberEmail(e,t){return bL(this,void 0,void 0,(function*(){const n=yield this.getGlobals(this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()));n.rememberEmail=e,yield this.saveGlobals(n,this.reconcileOptions(t,yield this.defaultOnDiskLocalOptions()))}))}getEncryptedCiphers(e){const t=Object.create(null,{getEncryptedCiphers:{get:()=>super.getEncryptedCiphers}});return bL(this,void 0,void 0,(function*(){return e=this.reconcileOptions(e,yield this.defaultInMemoryOptions()),yield t.getEncryptedCiphers.call(this,e)}))}setEncryptedCiphers(e,t){const n=Object.create(null,{setEncryptedCiphers:{get:()=>super.setEncryptedCiphers}});return bL(this,void 0,void 0,(function*(){return t=this.reconcileOptions(t,yield this.defaultInMemoryOptions()),yield n.setEncryptedCiphers.call(this,e,t)}))}getEncryptedCollections(e){const t=Object.create(null,{getEncryptedCollections:{get:()=>super.getEncryptedCollections}});return bL(this,void 0,void 0,(function*(){return e=this.reconcileOptions(e,yield this.defaultInMemoryOptions()),yield t.getEncryptedCollections.call(this,e)}))}setEncryptedCollections(e,t){const n=Object.create(null,{setEncryptedCollections:{get:()=>super.setEncryptedCollections}});return bL(this,void 0,void 0,(function*(){return t=this.reconcileOptions(t,yield this.defaultInMemoryOptions()),yield n.setEncryptedCollections.call(this,e,t)}))}getEncryptedFolders(e){const t=Object.create(null,{getEncryptedFolders:{get:()=>super.getEncryptedFolders}});return bL(this,void 0,void 0,(function*(){return e=this.reconcileOptions(e,yield this.defaultInMemoryOptions()),yield t.getEncryptedFolders.call(this,e)}))}setEncryptedFolders(e,t){const n=Object.create(null,{setEncryptedFolders:{get:()=>super.setEncryptedFolders}});return bL(this,void 0,void 0,(function*(){return t=this.reconcileOptions(t,yield this.defaultInMemoryOptions()),yield n.setEncryptedFolders.call(this,e,t)}))}getEncryptedSends(e){const t=Object.create(null,{getEncryptedSends:{get:()=>super.getEncryptedSends}});return bL(this,void 0,void 0,(function*(){return e=this.reconcileOptions(e,yield this.defaultInMemoryOptions()),yield t.getEncryptedSends.call(this,e)}))}setEncryptedSends(e,t){const n=Object.create(null,{setEncryptedSends:{get:()=>super.setEncryptedSends}});return bL(this,void 0,void 0,(function*(){return t=this.reconcileOptions(t,yield this.defaultInMemoryOptions()),yield n.setEncryptedSends.call(this,e,t)}))}getLastSync(e){const t=Object.create(null,{getLastSync:{get:()=>super.getLastSync}});return bL(this,void 0,void 0,(function*(){return e=this.reconcileOptions(e,yield this.defaultInMemoryOptions()),yield t.getLastSync.call(this,e)}))}setLastSync(e,t){const n=Object.create(null,{setLastSync:{get:()=>super.setLastSync}});return bL(this,void 0,void 0,(function*(){return t=this.reconcileOptions(t,yield this.defaultInMemoryOptions()),yield n.setLastSync.call(this,e,t)}))}},deps:[ZU,Jj,Zj,L.$,YU,Xj,eL]},{provide:P.b,useExisting:ke},{provide:eo,useClass:SL},{provide:Ia._,useClass:DL},vi],imports:[[DU.ToastrModule,aL]]});class RL{}RL.ɵfac=function(e){return new(e||RL)},RL.ɵmod=o["ɵɵdefineNgModule"]({type:RL}),RL.ɵinj=o["ɵɵdefineInjector"]({imports:[[p.RouterModule.forChild([{path:"**",redirectTo:""}])],p.RouterModule]});class UL{}var zL=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class NL{constructor(e,t,n){this.cryptoService=e,this.syncService=t,this.apiService=n}addOrganizationToProvider(e,t){return zL(this,void 0,void 0,(function*(){const n=yield this.cryptoService.getOrgKey(t),i=yield this.cryptoService.getProviderKey(e),r=yield this.cryptoService.encrypt(n.key,i),o=new UL;o.organizationId=t,o.key=r.encryptedString;const a=yield this.apiService.postProviderAddOrganization(e,o);return yield this.syncService.fullSync(!0),a}))}detachOrganizastion(e,t){return zL(this,void 0,void 0,(function*(){yield this.apiService.deleteProviderOrganization(e,t),yield this.syncService.fullSync(!0)}))}}NL.ɵfac=function(e){return new(e||NL)(o["ɵɵinject"](H.$),o["ɵɵinject"](Ft._),o["ɵɵinject"](T.s))},NL.ɵprov=o["ɵɵdefineInjectable"]({token:NL,factory:NL.ɵfac});var VL=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function HL(e,t){1&e&&(o["ɵɵelementStart"](0,"div",10),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",11),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](5,4,"loading"),"\n        "))}function jL(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",14),o["ɵɵtext"](3,"\n                "),o["ɵɵelement"](4,"app-avatar",15),o["ɵɵtext"](5,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n              "),o["ɵɵelementStart"](7,"td"),o["ɵɵtext"](8),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"td"),o["ɵɵtext"](11,"\n                "),o["ɵɵelementStart"](12,"button",16),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](2).add(t)})),o["ɵɵtext"](13,"\n                  Add\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n            "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("data",e.name)("circle",!0)("fontSize",14),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n                ",e.name,"\n              "),o["ɵɵadvance"](4),o["ɵɵproperty"]("disabled",n.formPromise)}}function LL(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"table",12),o["ɵɵtext"](3,"\n            "),o["ɵɵtemplate"](4,jL,16,5,"tr",13),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.organizations)}}class KL{constructor(e,t,n,i,r){this.providerService=e,this.webProviderService=t,this.i18nService=n,this.platformUtilsService=i,this.validationService=r,this.onAddedOrganization=new o.EventEmitter,this.loading=!0}ngOnInit(){return VL(this,void 0,void 0,(function*(){yield this.load()}))}load(){return VL(this,void 0,void 0,(function*(){null!=this.providerId&&(this.provider=yield this.providerService.get(this.providerId),this.loading=!1)}))}add(e){return VL(this,void 0,void 0,(function*(){if(this.formPromise)return;if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("addOrganizationConfirmation",e.name,this.provider.name),e.name,this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{this.formPromise=this.webProviderService.addOrganizationToProvider(this.providerId,e.id),yield this.formPromise}catch(t){return void this.validationService.showError(t)}finally{this.formPromise=null}this.platformUtilsService.showToast("success",null,this.i18nService.t("organizationJoinedProvider")),this.onAddedOrganization.emit()}))}}KL.ɵfac=function(e){return new(e||KL)(o["ɵɵdirectiveInject"](wi),o["ɵɵdirectiveInject"](NL),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](ov.R))},KL.ɵcmp=o["ɵɵdefineComponent"]({type:KL,selectors:[["provider-add-organization"]],inputs:{providerId:"providerId",organizations:"organizations"},outputs:{onAddedOrganization:"onAddedOrganization"},decls:30,vars:8,consts:[["role","dialog","aria-modal","true","aria-labelledby","addTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","addTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["class","card-body text-center",4,"ngIf"],[4,"ngIf"],[1,"card-body","text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[1,"table","table-hover","table-list"],[4,"ngFor","ngForOf"],["width","30"],["size","25",3,"data","circle","fontSize"],[1,"btn","btn-outline-secondary","pull-right",3,"disabled","click"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h2",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"button",5),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"span",6),o["ɵɵtext"](16,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"div",7),o["ɵɵtext"](21,"\n        "),o["ɵɵtemplate"](22,HL,6,6,"div",8),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,LL,7,1,"ng-container",9),o["ɵɵtext"](25,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](10,4,"addExistingOrganization"),"\n        "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,6,"close")),o["ɵɵadvance"](10),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading))},directives:[pe,B.NgIf,B.NgForOf,Di],pipes:[M.C],encapsulation:2});var GL=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class qL{constructor(e,t){this.providerService=e,this.router=t}canActivate(e){return GL(this,void 0,void 0,(function*(){const t=yield this.providerService.get(e.params.providerId),n=null==e.data?null:e.data.permissions;return!!(-1!==n.indexOf(xi.P.AccessEventLogs)&&t.canAccessEventLogs||-1!==n.indexOf(xi.P.ManageProvider)&&t.isProviderAdmin||-1!==n.indexOf(xi.P.ManageUsers)&&t.canManageUsers)||(this.router.navigate(["/providers",t.id]),!1)}))}}qL.ɵfac=function(e){return new(e||qL)(o["ɵɵinject"](wi),o["ɵɵinject"](p.Router))},qL.ɵprov=o["ɵɵdefineInjectable"]({token:qL,factory:qL.ɵfac});var _L=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class $L{constructor(e,t,n,i){this.router=e,this.platformUtilsService=t,this.i18nService=n,this.providerService=i}canActivate(e){return _L(this,void 0,void 0,(function*(){const t=yield this.providerService.get(e.params.providerId);return null==t?(this.router.navigate(["/"]),!1):!(!t.isProviderAdmin&&!t.enabled)||(this.platformUtilsService.showToast("error",null,this.i18nService.t("providerIsDisabled")),this.router.navigate(["/"]),!1)}))}}$L.ɵfac=function(e){return new(e||$L)(o["ɵɵinject"](p.Router),o["ɵɵinject"](E.P),o["ɵɵinject"](k.D),o["ɵɵinject"](wi))},$L.ɵprov=o["ɵɵdefineInjectable"]({token:$L,factory:$L.ɵfac});var WL=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function QL(e,t){1&e&&(o["ɵɵelementStart"](0,"p",4),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",5),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"span",6),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function YL(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",13),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",6),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"providerIsDisabled")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"providerIsDisabled")))}const ZL=function(e){return["/providers",e]};function JL(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"td",10),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"app-avatar",11),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"td"),o["ɵɵtext"](8,"\n            "),o["ɵɵelementStart"](9,"a",12),o["ɵɵtext"](10),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵtemplate"](12,YL,9,6,"ng-container",3),o["ɵɵtext"](13,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](4),o["ɵɵproperty"]("data",e.name)("circle",!0)("fontSize",14),o["ɵɵadvance"](5),o["ɵɵproperty"]("routerLink",o["ɵɵpureFunction1"](6,ZL,e.id)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.enabled)}}function XL(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",8),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"tbody"),o["ɵɵtext"](3,"\n        "),o["ɵɵtemplate"](4,JL,15,8,"tr",9),o["ɵɵtext"](5,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n    "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e.providers)}}function eK(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵtemplate"](2,XL,7,1,"table",7),o["ɵɵtext"](3,"\n  "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.providers&&e.providers.length)}}class tK{constructor(e,t){this.providerService=e,this.i18nService=t,this.loaded=!1}ngOnInit(){return WL(this,void 0,void 0,(function*(){document.body.classList.remove("layout_frontend"),yield this.load()}))}load(){return WL(this,void 0,void 0,(function*(){const e=yield this.providerService.getAll();e.sort(N.c.getSortFunction(this.i18nService,"name")),this.providers=e,this.loaded=!0}))}}tK.ɵfac=function(e){return new(e||tK)(o["ɵɵdirectiveInject"](wi),o["ɵɵdirectiveInject"](k.D))},tK.ɵcmp=o["ɵɵdefineComponent"]({type:tK,selectors:[["app-providers"]],decls:18,vars:5,consts:[[1,"container","page-content"],[1,"page-header","d-flex"],["class","text-muted",4,"ngIf"],[4,"ngIf"],[1,"text-muted"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],[1,"sr-only"],["class","table table-hover table-list",4,"ngIf"],[1,"table","table-hover","table-list"],[4,"ngFor","ngForOf"],["width","30"],["size","25",3,"data","circle","fontSize"],["href","#",3,"routerLink"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle","text-danger",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelement"](0,"app-navbar"),o["ɵɵtext"](1,"\n"),o["ɵɵelementStart"](2,"div",0),o["ɵɵtext"](3,"\n  "),o["ɵɵelementStart"](4,"div",1),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"h1"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n  "),o["ɵɵtemplate"](11,QL,9,6,"p",2),o["ɵɵtext"](12,"\n  "),o["ɵɵtemplate"](13,eK,4,1,"ng-container",3),o["ɵɵtext"](14,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n"),o["ɵɵelement"](16,"app-footer"),o["ɵɵtext"](17,"\n")),2&e&&(o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,3,"providers")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!t.loaded),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.loaded))},directives:[Ki,B.NgIf,qi,B.NgForOf,Di,p.RouterLinkWithHref],pipes:[M.C],encapsulation:2});var nK=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const iK=["add"];function rK(e,t){1&e&&(o["ɵɵelementStart"](0,"a",8),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",9),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](4,1,"newClientOrganization"),"\n    "))}function oK(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",10),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().addExistingOrganization()})),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",9),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](4,1,"addExistingOrganization"),"\n    "))}function aK(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",11),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",12),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function sK(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"noClientsInList")))}function lK(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"td",19),o["ɵɵtext"](1,"\n            "),o["ɵɵelementStart"](2,"div",20),o["ɵɵtext"](3,"\n              "),o["ɵɵelementStart"](4,"button",21),o["ɵɵpipe"](5,"i18n"),o["ɵɵtext"](6,"\n                "),o["ɵɵelement"](7,"i",22),o["ɵɵtext"](8,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n              "),o["ɵɵelementStart"](10,"div",23),o["ɵɵtext"](11,"\n                "),o["ɵɵelementStart"](12,"a",24),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).remove(t)})),o["ɵɵtext"](13,"\n                  "),o["ɵɵelement"](14,"i",25),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](4),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](5,2,"options")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](16,4,"remove"),"\n                "))}const dK=function(e){return["/organizations",e]};function cK(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"td",15),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"app-avatar",16),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"td"),o["ɵɵtext"](8,"\n            "),o["ɵɵelementStart"](9,"a",17),o["ɵɵtext"](10),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n          "),o["ɵɵtemplate"](13,lK,20,6,"td",18),o["ɵɵtext"](14,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("data",e.organizationName)("circle",!0)("fontSize",14),o["ɵɵadvance"](5),o["ɵɵproperty"]("routerLink",o["ɵɵpureFunction1"](6,dK,e.organizationId)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.organizationName),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",n.manageOrganizations)}}function pK(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"table",13),o["ɵɵlistener"]("scrolled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).loadMore()})),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"tbody"),o["ɵɵtext"](5,"\n        "),o["ɵɵtemplate"](6,cK,15,8,"tr",14),o["ɵɵtext"](7,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n  "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().ngIf,t=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("infiniteScrollDistance",1)("infiniteScrollDisabled",!t.isPaging()),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e)}}function uK(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,sK,3,3,"p",6),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,pK,10,3,"ng-container",6),o["ɵɵtext"](5,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=t.ngIf;o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.length)}}function mK(e,t){}const hK=[sS.Free,sS.FamiliesAnnually2019,sS.FamiliesAnnually];class vK{constructor(e,t,n,i,r,o,a,s,l,d,c){this.route=e,this.providerService=t,this.apiService=n,this.searchService=i,this.platformUtilsService=r,this.i18nService=o,this.validationService=a,this.webProviderService=s,this.logService=l,this.modalService=d,this.organizationService=c,this.loading=!0,this.manageOrganizations=!1,this.showAddExisting=!1,this.didScroll=!1,this.pageSize=100,this.pagedClientsCount=0}ngOnInit(){return nK(this,void 0,void 0,(function*(){this.route.parent.params.subscribe((e=>nK(this,void 0,void 0,(function*(){this.providerId=e.providerId,yield this.load(),this.route.queryParams.pipe((0,C.P)()).subscribe((e=>nK(this,void 0,void 0,(function*(){this.searchText=e.search}))))}))))}))}load(){return nK(this,void 0,void 0,(function*(){const e=yield this.apiService.getProviderClients(this.providerId);this.clients=null!=e.data&&e.data.length>0?e.data:[],this.manageOrganizations=(yield this.providerService.get(this.providerId)).type===FH.ProviderAdmin;const t=(yield this.organizationService.getAll()).filter((e=>e.isOwner&&null==e.providerId)),n=yield Promise.all(t.map((e=>this.apiService.getOrganization(e.id)))).then((e=>e.filter((e=>!hK.includes(e.planType))).map((e=>e.id))));this.addableOrganizations=t.filter((e=>n.includes(e.id))),this.showAddExisting=0!==this.addableOrganizations.length,this.loading=!1}))}isPaging(){const e=this.isSearching();return e&&this.didScroll&&this.resetPaging(),!e&&this.clients&&this.clients.length>this.pageSize}isSearching(){return this.searchService.isSearchable(this.searchText)}resetPaging(){return nK(this,void 0,void 0,(function*(){this.pagedClients=[],this.loadMore()}))}loadMore(){if(!this.clients||this.clients.length<=this.pageSize)return;const e=this.pagedClients.length;let t=this.pageSize;0===e&&this.pagedClientsCount>this.pageSize&&(t=this.pagedClientsCount),this.clients.length>e&&(this.pagedClients=this.pagedClients.concat(this.clients.slice(e,e+t))),this.pagedClientsCount=this.pagedClients.length,this.didScroll=this.pagedClients.length>this.pageSize}addExistingOrganization(){return nK(this,void 0,void 0,(function*(){const[e]=yield this.modalService.openViewRef(KL,this.addModalRef,(t=>{t.providerId=this.providerId,t.organizations=this.addableOrganizations,t.onAddedOrganization.subscribe((()=>nK(this,void 0,void 0,(function*(){try{yield this.load(),e.close()}catch(t){this.logService.error(`Handled exception: ${t}`)}}))))}))}))}remove(e){return nK(this,void 0,void 0,(function*(){if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("detachOrganizationConfirmation"),e.organizationName,this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;this.actionPromise=this.webProviderService.detachOrganizastion(this.providerId,e.id);try{yield this.actionPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("detachedOrganization",e.organizationName)),yield this.load()}catch(t){this.validationService.showError(t)}this.actionPromise=null}))}}vK.ɵfac=function(e){return new(e||vK)(o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](wi),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](za),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](ov.R),o["ɵɵdirectiveInject"](NL),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](Ii.M))},vK.ɵcmp=o["ɵɵdefineComponent"]({type:vK,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&o["ɵɵviewQuery"](iK,7,o.ViewContainerRef),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.addModalRef=e.first)}},decls:32,vars:19,consts:[[1,"page-header","d-flex"],[1,"ml-auto","d-flex"],["for","search",1,"sr-only"],["type","search","id","search",1,"form-control","form-control-sm",3,"placeholder","ngModel","ngModelChange"],["class","btn btn-sm btn-outline-primary ml-3","routerLink","create",4,"ngIf"],["class","btn btn-sm btn-outline-primary ml-3",3,"click",4,"ngIf"],[4,"ngIf"],["add",""],["routerLink","create",1,"btn","btn-sm","btn-outline-primary","ml-3"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],[1,"btn","btn-sm","btn-outline-primary","ml-3",3,"click"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["infiniteScroll","",1,"table","table-hover","table-list",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled"],[4,"ngFor","ngForOf"],["width","30"],["size","25",3,"data","circle","fontSize"],[3,"routerLink"],["class","table-list-options",4,"ngIf"],[1,"table-list-options"],["appListDropdown","",1,"dropdown"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-cog","bwi-lg"],[1,"dropdown-menu","dropdown-menu-right"],["href","#","appStopClick","",1,"dropdown-item","text-danger",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-close"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n\n  "),o["ɵɵelementStart"](6,"div",1),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"div"),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"label",2),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n      "),o["ɵɵelementStart"](14,"input",3),o["ɵɵlistener"]("ngModelChange",(function(e){return t.searchText=e})),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n    "),o["ɵɵtemplate"](18,rK,5,3,"a",4),o["ɵɵtext"](19,"\n    "),o["ɵɵtemplate"](20,oK,5,3,"button",5),o["ɵɵtext"](21,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n\n"),o["ɵɵtemplate"](24,aK,9,6,"ng-container",6),o["ɵɵtext"](25,"\n\n"),o["ɵɵtemplate"](26,uK,6,2,"ng-container",6),o["ɵɵpipe"](27,"search"),o["ɵɵtext"](28,"\n\n"),o["ɵɵtemplate"](29,mK,0,0,"ng-template",null,7,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](31,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,8,"clients")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,10,"search")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](15,12,"search")),o["ɵɵproperty"]("ngModel",t.searchText),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.manageOrganizations),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.manageOrganizations&&t.showAddExisting),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&o["ɵɵpipeBind4"](27,14,t.clients,t.searchText,"organizationName","id")))},directives:[d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,B.NgIf,p.RouterLinkWithHref,u.InfiniteScrollDirective,B.NgForOf,Di,pe,Tn],pipes:[M.C,um.C],encapsulation:2});var gK=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class fK{constructor(e){this.route=e}ngOnInit(){this.route.parent.params.subscribe((e=>gK(this,void 0,void 0,(function*(){this.providerId=e.providerId}))))}}fK.ɵfac=function(e){return new(e||fK)(o["ɵɵdirectiveInject"](p.ActivatedRoute))},fK.ɵcmp=o["ɵɵdefineComponent"]({type:fK,selectors:[["app-create-organization"]],viewQuery:function(e,t){if(1&e&&o["ɵɵviewQuery"](Mb,7),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.orgPlansComponent=e.first)}},decls:13,vars:7,consts:[[1,"page-header"],[3,"providerId"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵelementStart"](7,"p"),o["ɵɵtext"](8),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n"),o["ɵɵelement"](11,"app-organization-plans",1),o["ɵɵtext"](12,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"newClientOrganization")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](9,5,"newClientOrganizationDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("providerId",t.providerId))},directives:[Mb],pipes:[M.C],encapsulation:2});class xK{}var yK=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function SK(e,t){1&e&&(o["ɵɵelementStart"](0,"div",2),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div"),o["ɵɵtext"](3,"\n    "),o["ɵɵelement"](4,"img",3),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"p",4),o["ɵɵtext"](7,"\n      "),o["ɵɵelement"](8,"i",5),o["ɵɵpipe"](9,"i18n"),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"span",6),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](8),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](9,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,4,"loading")))}const bK=function(e){return{email:e}};function wK(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",7),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",8),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",9),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"p",10),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"div",11),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"div",12),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"p",4),o["ɵɵtext"](15),o["ɵɵelementStart"](16,"strong",13),o["ɵɵtext"](17),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n          "),o["ɵɵelementStart"](20,"p"),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n          "),o["ɵɵelement"](24,"hr"),o["ɵɵtext"](25,"\n          "),o["ɵɵelementStart"](26,"div",14),o["ɵɵtext"](27,"\n            "),o["ɵɵelementStart"](28,"a",15),o["ɵɵtext"](29),o["ɵɵpipe"](30,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n            "),o["ɵɵelementStart"](32,"a",16),o["ɵɵtext"](33),o["ɵɵpipe"](34,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,8,"joinProvider")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("\n            ",e.providerName,"\n            "),o["ɵɵadvance"](2),o["ɵɵtextInterpolate"](e.email),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](22,10,"joinProviderDesc")),o["ɵɵadvance"](7),o["ɵɵproperty"]("queryParams",o["ɵɵpureFunction1"](16,bK,e.email)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](30,12,"logIn"),"\n            "),o["ɵɵadvance"](3),o["ɵɵproperty"]("queryParams",o["ɵɵpureFunction1"](18,bK,e.email)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](34,14,"createAccount"),"\n            ")}}class IK extends O{constructor(e,t,n,i,r,o){super(e,o,t,n,i),this.apiService=r,this.failedMessage="providerInviteAcceptFailed",this.requiredParameters=["providerId","providerUserId","token"]}authedHandler(e){return yK(this,void 0,void 0,(function*(){const t=new xK;t.token=e.token,yield this.apiService.postProviderUserAccept(e.providerId,e.providerUserId,t),this.platformUtilService.showToast("success",this.i18nService.t("inviteAccepted"),this.i18nService.t("providerInviteAcceptedDesc"),{timeout:1e4}),this.router.navigate(["/vault"])}))}unauthedHandler(e){return yK(this,void 0,void 0,(function*(){this.providerName=e.providerName}))}}IK.ɵfac=function(e){return new(e||IK)(o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](E.P))},IK.ɵcmp=o["ɵɵdefineComponent"]({type:IK,selectors:[["app-accept-provider"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:4,vars:2,consts:[["class","mt-5 d-flex justify-content-center",4,"ngIf"],["class","container",4,"ngIf"],[1,"mt-5","d-flex","justify-content-center"],["alt","Bitwarden",1,"mb-4","logo","logo-themed"],[1,"text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-2x","text-muted",3,"title"],[1,"sr-only"],[1,"container"],[1,"row","justify-content-md-center","mt-5"],[1,"col-5"],[1,"lead","text-center","mb-4"],[1,"card","d-block"],[1,"card-body"],[1,"d-block","mt-2"],[1,"d-flex"],["routerLink","/login",1,"btn","btn-primary","btn-block",3,"queryParams"],["routerLink","/register",1,"btn","btn-primary","btn-block","ml-2","mt-0",3,"queryParams"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,SK,17,6,"div",0),o["ɵɵtext"](1,"\n"),o["ɵɵtemplate"](2,wK,41,20,"div",1),o["ɵɵtext"](3,"\n")),2&e&&(o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&!t.authed))},directives:[B.NgIf,p.RouterLinkWithHref],pipes:[M.C],encapsulation:2});var CK=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function EK(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",16),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",17),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function kK(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"noEventsInList")))}function PK(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"td"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"date"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"td"),o["ɵɵtext"](7,"\n          "),o["ɵɵelement"](8,"i",26),o["ɵɵtext"](9,"\n          "),o["ɵɵelementStart"](10,"span",17),o["ɵɵtext"](11),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵelementStart"](14,"td"),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"span",27),o["ɵɵtext"](17),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n        "),o["ɵɵelement"](20,"td",28),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](4,11,e.date,"medium")),o["ɵɵadvance"](5),o["ɵɵclassMapInterpolate1"]("text-muted bwi bwi-lg ",e.appIcon,""),o["ɵɵpropertyInterpolate2"]("title","",e.appName,", ",e.ip,""),o["ɵɵadvance"](3),o["ɵɵtextInterpolate2"]("",e.appName,", ",e.ip,""),o["ɵɵadvance"](5),o["ɵɵpropertyInterpolate"]("title",e.userEmail),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.userName),o["ɵɵadvance"](3),o["ɵɵproperty"]("innerHTML",e.message,o["ɵɵsanitizeHtml"])}}function AK(e,t){if(1&e&&(o["ɵɵelementStart"](0,"table",20),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"thead"),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"tr"),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"th",21),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementStart"](10,"th",22),o["ɵɵtext"](11,"\n          "),o["ɵɵelementStart"](12,"span",17),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n        "),o["ɵɵelementStart"](17,"th",23),o["ɵɵtext"](18),o["ɵɵpipe"](19,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementStart"](21,"th",24),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n    "),o["ɵɵelementStart"](27,"tbody"),o["ɵɵtext"](28,"\n      "),o["ɵɵtemplate"](29,PK,22,14,"tr",25),o["ɵɵtext"](30,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,5,"timestamp")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,7,"device")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](19,9,"user")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,11,"event")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngForOf",e.events)}}function OK(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",29,30),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).loadEvents(!1)})),o["ɵɵtext"](2,"\n    "),o["ɵɵelement"](3,"i",31),o["ɵɵpipe"](4,"i18n"),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"span"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"](2);o["ɵɵproperty"]("appApiAction",t.morePromise)("disabled",t.loaded&&e.loading),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](4,4,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,6,"loadMore"))}}function TK(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,kK,3,3,"p",15),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,AK,32,13,"table",18),o["ɵɵtext"](5,"\n  "),o["ɵɵtemplate"](6,OK,10,8,"button",19),o["ɵɵtext"](7,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.events||!e.events.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.events&&e.events.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.continuationToken)}}const BK=function(e){return{"bwi-spin":e}},MK=function(e){return{loading:e}};class DK extends gh{constructor(e,t,n,i,r,o,a,s,l,d,c){super(n,i,o,a,l,c),this.apiService=e,this.route=t,this.providerService=r,this.router=s,this.userNamePipe=d,this.exportFileName="provider-events",this.providerUsersUserIdMap=new Map,this.providerUsersIdMap=new Map}ngOnInit(){return CK(this,void 0,void 0,(function*(){this.route.parent.parent.params.subscribe((e=>CK(this,void 0,void 0,(function*(){this.providerId=e.providerId;const t=yield this.providerService.get(this.providerId);null!=t&&t.useEvents?yield this.load():this.router.navigate(["/providers",this.providerId])}))))}))}load(){return CK(this,void 0,void 0,(function*(){(yield this.apiService.getProviderUsers(this.providerId)).data.forEach((e=>{const t=this.userNamePipe.transform(e);this.providerUsersIdMap.set(e.id,{name:t,email:e.email}),this.providerUsersUserIdMap.set(e.userId,{name:t,email:e.email})})),yield this.loadEvents(!0),this.loaded=!0}))}requestEvents(e,t,n){return this.apiService.getEventsProvider(this.providerId,e,t,n)}getUserName(e,t){return null!=t&&this.providerUsersUserIdMap.has(t)?this.providerUsersUserIdMap.get(t):null}}DK.ɵfac=function(e){return new(e||DK)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](Oc),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](wi),o["ɵɵdirectiveInject"](hh.T),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](Pc.z),o["ɵɵdirectiveInject"](Ia._))},DK.ɵcmp=o["ɵɵdefineComponent"]({type:DK,selectors:[["provider-events"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:57,vars:35,consts:[[1,"page-header","d-flex"],[1,"ml-auto","d-flex"],[1,"form-inline"],["for","start",1,"sr-only"],["type","datetime-local","id","start","placeholder","YYYY-MM-DDTHH:MM",1,"form-control","form-control-sm",3,"placeholder","ngModel","ngModelChange","change"],[1,"mx-2"],["for","end",1,"sr-only"],["type","datetime-local","id","end","placeholder","YYYY-MM-DDTHH:MM",1,"form-control","form-control-sm",3,"placeholder","ngModel","ngModelChange","change"],[1,"d-inline",3,"appApiAction"],["refreshForm",""],["type","button",1,"btn","btn-sm","btn-outline-primary","ml-3",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-refresh","bwi-fw",3,"ngClass"],["exportForm",""],["type","button",1,"btn","btn-sm","btn-outline-primary","btn-submit","manual","ml-3",3,"ngClass","disabled","click"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin"],[4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["class","table table-hover",4,"ngIf"],["type","button","class","btn btn-block btn-link btn-submit",3,"appApiAction","disabled","click",4,"ngIf"],[1,"table","table-hover"],["width","210",1,"border-top-0"],["width","40",1,"border-top-0"],["width","150",1,"border-top-0"],[1,"border-top-0"],[4,"ngFor","ngForOf"],["aria-hidden","true",3,"title"],[3,"title"],[3,"innerHTML"],["type","button",1,"btn","btn-block","btn-link","btn-submit",3,"appApiAction","disabled","click"],["moreBtn",""],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"div",1),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"div",2),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"label",3),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n      "),o["ɵɵelementStart"](14,"input",4),o["ɵɵlistener"]("ngModelChange",(function(e){return t.start=e}))("change",(function(){return t.dirtyDates=!0})),o["ɵɵpipe"](15,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n      "),o["ɵɵelementStart"](17,"span",5),o["ɵɵtext"](18,"-"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"label",6),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵelementStart"](24,"input",7),o["ɵɵlistener"]("ngModelChange",(function(e){return t.end=e}))("change",(function(){return t.dirtyDates=!0})),o["ɵɵpipe"](25,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n    "),o["ɵɵelementStart"](28,"form",8,9),o["ɵɵtext"](30,"\n      "),o["ɵɵelementStart"](31,"button",10),o["ɵɵlistener"]("click",(function(){return t.loadEvents(!0)})),o["ɵɵtext"](32,"\n        "),o["ɵɵelement"](33,"i",11),o["ɵɵtext"](34),o["ɵɵpipe"](35,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n    "),o["ɵɵelementStart"](38,"form",8,12),o["ɵɵtext"](40,"\n      "),o["ɵɵelementStart"](41,"button",13),o["ɵɵlistener"]("click",(function(){return t.exportEvents()})),o["ɵɵtext"](42,"\n        "),o["ɵɵelement"](43,"i",14),o["ɵɵtext"](44,"\n        "),o["ɵɵelementStart"](45,"span"),o["ɵɵtext"](46),o["ɵɵpipe"](47,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](51,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n"),o["ɵɵtemplate"](53,EK,9,6,"ng-container",15),o["ɵɵtext"](54,"\n"),o["ɵɵtemplate"](55,TK,8,3,"ng-container",15),o["ɵɵtext"](56,"\n")),2&e){const e=o["ɵɵreference"](29),n=o["ɵɵreference"](39);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,17,"eventLogs")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,19,"startDate")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](15,21,"startDate")),o["ɵɵproperty"]("ngModel",t.start),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](22,23,"endDate")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](25,25,"endDate")),o["ɵɵproperty"]("ngModel",t.end),o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.refreshPromise),o["ɵɵadvance"](3),o["ɵɵproperty"]("disabled",t.loaded&&e.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](31,BK,t.loaded&&e.loading)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](35,27,"refresh"),"\n      "),o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.exportPromise),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](33,MK,n.loading))("disabled",t.loaded&&n.loading||t.dirtyDates),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](47,29,"export")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngIf",!t.loaded),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.loaded)}},directives:[d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,d["ɵNgNoValidate"],d.NgControlStatusGroup,d.NgForm,Y.b,B.NgClass,B.NgIf,B.NgForOf],pipes:[M.C,B.DatePipe],encapsulation:2});var FK=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function RK(e,t){1&e&&(o["ɵɵelementStart"](0,"a",10),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"people"),"\n          "))}function UK(e,t){1&e&&(o["ɵɵelementStart"](0,"a",11),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"eventLogs"),"\n          "))}function zK(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",5),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"div",6),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n        "),o["ɵɵelementStart"](6,"div",7),o["ɵɵtext"](7,"\n          "),o["ɵɵtemplate"](8,RK,3,3,"a",8),o["ɵɵtext"](9,"\n          "),o["ɵɵtemplate"](10,UK,3,3,"a",9),o["ɵɵtext"](11,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"manage")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.provider.canManageUsers),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.provider.canAccessEventLogs&&e.accessEvents)}}class NK{constructor(e,t){this.route=e,this.providerService=t,this.accessEvents=!1}ngOnInit(){this.route.parent.params.subscribe((e=>FK(this,void 0,void 0,(function*(){this.provider=yield this.providerService.get(e.providerId),this.accessEvents=this.provider.useEvents}))))}}NK.ɵfac=function(e){return new(e||NK)(o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](wi))},NK.ɵcmp=o["ɵɵdefineComponent"]({type:NK,selectors:[["provider-manage"]],decls:16,vars:1,consts:[[1,"container","page-content"],[1,"row"],[1,"col-3"],["class","card",4,"ngIf"],[1,"col-9"],[1,"card"],[1,"card-header"],[1,"list-group","list-group-flush"],["routerLink","people","class","list-group-item","routerLinkActive","active",4,"ngIf"],["routerLink","events","class","list-group-item","routerLinkActive","active",4,"ngIf"],["routerLink","people","routerLinkActive","active",1,"list-group-item"],["routerLink","events","routerLinkActive","active",1,"list-group-item"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵtemplate"](6,zK,13,5,"div",3),o["ɵɵtext"](7,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n    "),o["ɵɵelementStart"](9,"div",4),o["ɵɵtext"](10,"\n      "),o["ɵɵelement"](11,"router-outlet"),o["ɵɵtext"](12,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n")),2&e&&(o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",t.provider))},directives:[B.NgIf,p.RouterOutlet,p.RouterLinkWithHref,p.RouterLinkActive],pipes:[M.C],encapsulation:2});class VK{constructor(e){this.ids=null==e?[]:e}}class HK{}class jK{constructor(e){this.keys=e}}var LK=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function KK(e,t){1&e&&(o["ɵɵelementStart"](0,"div",15),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",16),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](5,4,"loading"),"\n        "))}function GK(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",17),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"noSelectedUsersApplicable"),"\n        "))}function qK(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",18),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",e.error,"\n        ")}}function _K(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",26),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function $K(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",23),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"app-avatar",24),o["ɵɵpipe"](5,"userName"),o["ɵɵtext"](6,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementStart"](9,"td"),o["ɵɵtext"](10),o["ɵɵtemplate"](11,_K,2,1,"small",25),o["ɵɵtext"](12,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵelementStart"](14,"td"),o["ɵɵtext"](15),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](5,7,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n                ",e.email,"\n                "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.name),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n                ",n.fingerprints.get(e.id),"\n              ")}}function WK(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",26),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function QK(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",23),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"app-avatar",24),o["ɵɵpipe"](5,"userName"),o["ɵɵtext"](6,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementStart"](9,"td"),o["ɵɵtext"](10),o["ɵɵtemplate"](11,WK,2,1,"small",25),o["ɵɵtext"](12,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵelementStart"](14,"td"),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](4),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](5,7,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n                ",e.email,"\n                "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.name),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](16,9,"bulkFilteredMessage"),"\n              ")}}function YK(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementStart"](5,"a",19),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n          "),o["ɵɵelementStart"](10,"table",20),o["ɵɵtext"](11,"\n            "),o["ɵɵelementStart"](12,"thead"),o["ɵɵtext"](13,"\n              "),o["ɵɵelementStart"](14,"tr"),o["ɵɵtext"](15,"\n                "),o["ɵɵelementStart"](16,"th",21),o["ɵɵtext"](17),o["ɵɵpipe"](18,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n                "),o["ɵɵelementStart"](20,"th"),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n            "),o["ɵɵtemplate"](26,$K,17,9,"tr",22),o["ɵɵtext"](27,"\n            "),o["ɵɵtemplate"](28,QK,18,11,"tr",22),o["ɵɵtext"](29,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](4,6,"fingerprintEnsureIntegrityVerify"),"\n            "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](7,8,"learnMore"),""),o["ɵɵadvance"](11),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](18,10,"user")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](22,12,"fingerprint")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",e.filteredUsers),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",e.excludedUsers)}}function ZK(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",26),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function JK(e,t){if(1&e&&(o["ɵɵelementStart"](0,"td"),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](2);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",t.statuses.get(e.id),"\n              ")}}function XK(e,t){1&e&&(o["ɵɵelementStart"](0,"td"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](2,1,"bulkFilteredMessage"),"\n              "))}function eG(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",23),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"app-avatar",24),o["ɵɵpipe"](5,"userName"),o["ɵɵtext"](6,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementStart"](9,"td"),o["ɵɵtext"](10),o["ɵɵtemplate"](11,ZK,2,1,"small",25),o["ɵɵtext"](12,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵtemplate"](14,JK,2,1,"td",11),o["ɵɵtext"](15,"\n              "),o["ɵɵtemplate"](16,XK,3,3,"td",11),o["ɵɵtext"](17,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](5,8,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n                ",e.email,"\n                "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.name),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",n.statuses.has(e.id)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!n.statuses.has(e.id))}}function tG(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"table",20),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"thead"),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"tr"),o["ɵɵtext"](7,"\n                "),o["ɵɵelementStart"](8,"th",21),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n                "),o["ɵɵelementStart"](12,"th"),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n            "),o["ɵɵtemplate"](18,eG,18,10,"tr",22),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,3,"user")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,5,"status")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",e.filteredUsers)}}function nG(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",27),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",16),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,5,"confirm"))}}class iG extends Bv{isAccepted(e){return e.status===DH.Accepted}getPublicKeys(){return LK(this,void 0,void 0,(function*(){const e=new VK(this.filteredUsers.map((e=>e.id)));return yield this.apiService.postProviderUsersPublicKey(this.providerId,e)}))}getCryptoKey(){return this.cryptoService.getProviderKey(this.providerId)}postConfirmRequest(e){return LK(this,void 0,void 0,(function*(){const t=new jK(e);return yield this.apiService.postProviderUserBulkConfirm(this.providerId,t)}))}}iG.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](iG)))(t||iG)}}(),iG.ɵcmp=o["ɵɵdefineComponent"]({type:iG,selectors:[["ng-component"]],inputs:{providerId:"providerId"},features:[o["ɵɵInheritDefinitionFeature"]],decls:45,vars:15,consts:[["role","dialog","aria-modal","true","aria-labelledby","bulkTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","bulkTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["class","card-body text-center",4,"ngIf"],["type","danger",4,"ngIf"],["type","error",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled","click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"card-body","text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","danger"],["type","error"],["href","https://bitwarden.com/help/fingerprint-phrase/","target","_blank","rel","noopener"],[1,"table","table-hover","table-list"],["colspan","2"],[4,"ngFor","ngForOf"],["width","30"],["size","25",3,"data","email","circle","fontSize"],["class","text-muted d-block",4,"ngIf"],[1,"text-muted","d-block"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled","click"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h2",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"button",5),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"span",6),o["ɵɵtext"](16,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"div",7),o["ɵɵtext"](21,"\n        "),o["ɵɵtemplate"](22,KK,6,6,"div",8),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,GK,3,3,"app-callout",9),o["ɵɵtext"](25,"\n        "),o["ɵɵtemplate"](26,qK,2,1,"app-callout",10),o["ɵɵtext"](27,"\n        "),o["ɵɵtemplate"](28,YK,31,14,"ng-container",11),o["ɵɵtext"](29,"\n        "),o["ɵɵtemplate"](30,tG,21,7,"ng-container",11),o["ɵɵtext"](31,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n      "),o["ɵɵelementStart"](33,"div",12),o["ɵɵtext"](34,"\n        "),o["ɵɵtemplate"](35,nG,9,7,"button",13),o["ɵɵtext"](36,"\n        "),o["ɵɵelementStart"](37,"button",14),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](10,9,"confirmUsers"),"\n        "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,11,"close")),o["ɵɵadvance"](10),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.filteredUsers.length<=0),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.error),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&!t.done),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&t.done),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!t.done),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](39,13,"close"),"\n        "))},directives:[pe,B.NgIf,Pe.O,B.NgForOf,Di],pipes:[M.C,Pc.z],encapsulation:2});var rG=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function oG(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",14),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](2,1,"noSelectedUsersApplicable"),"\n        "))}function aG(e,t){if(1&e&&(o["ɵɵelementStart"](0,"app-callout",15),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n          ",e.error,"\n        ")}}function sG(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",20),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](2,1,"removeUsersWarning"),"\n          "))}function lG(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",24),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function dG(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",21),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"app-avatar",22),o["ɵɵpipe"](5,"userName"),o["ɵɵtext"](6,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementStart"](9,"td"),o["ɵɵtext"](10),o["ɵɵtemplate"](11,lG,2,1,"small",23),o["ɵɵtext"](12,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵadvance"](4),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](5,6,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n                ",e.email,"\n                "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.name)}}function cG(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵtemplate"](2,sG,3,3,"app-callout",16),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"table",17),o["ɵɵtext"](5,"\n            "),o["ɵɵelementStart"](6,"thead"),o["ɵɵtext"](7,"\n              "),o["ɵɵelementStart"](8,"tr"),o["ɵɵtext"](9,"\n                "),o["ɵɵelementStart"](10,"th",18),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n            "),o["ɵɵtemplate"](16,dG,14,8,"tr",19),o["ɵɵtext"](17,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.users.length>0&&!e.error),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,3,"user")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",e.users)}}function pG(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",24),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function uG(e,t){if(1&e&&(o["ɵɵelementStart"](0,"td"),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit,t=o["ɵɵnextContext"](2);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",t.statuses.get(e.id),"\n              ")}}function mG(e,t){1&e&&(o["ɵɵelementStart"](0,"td"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](2,1,"bulkFilteredMessage"),"\n              "))}function hG(e,t){if(1&e&&(o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n              "),o["ɵɵelementStart"](2,"td",21),o["ɵɵtext"](3,"\n                "),o["ɵɵelementStart"](4,"app-avatar",22),o["ɵɵpipe"](5,"userName"),o["ɵɵtext"](6,"\n                "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n              "),o["ɵɵelementStart"](9,"td"),o["ɵɵtext"](10),o["ɵɵtemplate"](11,pG,2,1,"small",23),o["ɵɵtext"](12,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n              "),o["ɵɵtemplate"](14,uG,2,1,"td",10),o["ɵɵtext"](15,"\n              "),o["ɵɵtemplate"](16,mG,3,3,"td",10),o["ɵɵtext"](17,"\n            "),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit,n=o["ɵɵnextContext"](2);o["ɵɵadvance"](4),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](5,8,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n                ",e.email,"\n                "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",e.name),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",n.statuses.has(e.id)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!n.statuses.has(e.id))}}function vG(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"table",17),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"thead"),o["ɵɵtext"](5,"\n              "),o["ɵɵelementStart"](6,"tr"),o["ɵɵtext"](7,"\n                "),o["ɵɵelementStart"](8,"th",18),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n                "),o["ɵɵelementStart"](12,"th"),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n            "),o["ɵɵtemplate"](18,hG,18,10,"tr",19),o["ɵɵtext"](19,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n        "),o["ɵɵelementContainerEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,3,"user")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,5,"status")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",e.users)}}function gG(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",25),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",26),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n          "),o["ɵɵelementStart"](5,"span"),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,3,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,5,"removeUsers"))}}class fG extends og{deleteUsers(){return rG(this,void 0,void 0,(function*(){const e=new VK(this.users.map((e=>e.id)));return yield this.apiService.deleteManyProviderUsers(this.providerId,e)}))}}fG.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](fG)))(t||fG)}}(),fG.ɵcmp=o["ɵɵdefineComponent"]({type:fG,selectors:[["ng-component"]],inputs:{providerId:"providerId"},features:[o["ɵɵInheritDefinitionFeature"]],decls:43,vars:14,consts:[["role","dialog","aria-modal","true","aria-labelledby","bulkTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","bulkTitle",1,"modal-title"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],[1,"modal-body"],["type","danger",4,"ngIf"],["type","error",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-submit",3,"disabled","click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],["type","danger"],["type","error"],["type","warning",4,"ngIf"],[1,"table","table-hover","table-list"],["colspan","2"],[4,"ngFor","ngForOf"],["type","warning"],["width","30"],["size","25",3,"data","email","circle","fontSize"],["class","text-muted d-block",4,"ngIf"],[1,"text-muted","d-block"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled","click"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"h2",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"button",5),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"span",6),o["ɵɵtext"](16,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"div",7),o["ɵɵtext"](21,"\n        "),o["ɵɵtemplate"](22,oG,3,3,"app-callout",8),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,aG,2,1,"app-callout",9),o["ɵɵtext"](25,"\n        "),o["ɵɵtemplate"](26,cG,19,5,"ng-container",10),o["ɵɵtext"](27,"\n        "),o["ɵɵtemplate"](28,vG,21,7,"ng-container",10),o["ɵɵtext"](29,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n      "),o["ɵɵelementStart"](31,"div",11),o["ɵɵtext"](32,"\n        "),o["ɵɵtemplate"](33,gG,9,7,"button",12),o["ɵɵtext"](34,"\n        "),o["ɵɵelementStart"](35,"button",13),o["ɵɵtext"](36),o["ɵɵpipe"](37,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](10,8,"removeUsers"),"\n        "),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](13,10,"close")),o["ɵɵadvance"](10),o["ɵɵproperty"]("ngIf",t.users.length<=0),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.error),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.done),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.done),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",!t.done&&t.users.length>0),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](37,12,"close"),"\n        "))},directives:[pe,B.NgIf,Pe.O,B.NgForOf,Di],pipes:[M.C,Pc.z],encapsulation:2});class xG{constructor(){this.emails=[]}}class yG{}var SG=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function bG(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",16),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function wG(e,t){1&e&&(o["ɵɵelementStart"](0,"div",17),o["ɵɵtext"](1,"\n        "),o["ɵɵelement"](2,"i",18),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n        "),o["ɵɵelementStart"](5,"span",19),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n      "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function IG(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"p"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementStart"](6,"div",28),o["ɵɵtext"](7,"\n            "),o["ɵɵelementStart"](8,"label",29),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n            "),o["ɵɵelementStart"](12,"input",30),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).emails=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n            "),o["ɵɵelementStart"](14,"small",16),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,4,"providerInviteUserDesc")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,6,"email")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",e.emails),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind2"](16,8,"inviteMultipleEmailDesc","20"))}}function CG(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",17),o["ɵɵtext"](1,"\n        "),o["ɵɵtemplate"](2,IG,19,11,"ng-container",20),o["ɵɵtext"](3,"\n        "),o["ɵɵelementStart"](4,"h3"),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementStart"](7,"a",21),o["ɵɵpipe"](8,"i18n"),o["ɵɵtext"](9,"\n            "),o["ɵɵelement"](10,"i",22),o["ɵɵtext"](11,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵelementStart"](14,"div",23),o["ɵɵtext"](15,"\n          "),o["ɵɵelementStart"](16,"input",24),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().type=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"label",25),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementStart"](21,"small"),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵelementStart"](27,"div",23),o["ɵɵtext"](28,"\n          "),o["ɵɵelementStart"](29,"input",26),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().type=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n          "),o["ɵɵelementStart"](31,"label",27),o["ɵɵtext"](32),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementStart"](34,"small"),o["ɵɵtext"](35),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n      "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.editMode),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](6,11,"userType"),"\n          "),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](8,13,"learnMore")),o["ɵɵadvance"](9),o["ɵɵproperty"]("value",e.userType.ServiceUser)("ngModel",e.type),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](20,15,"serviceUser"),"\n            "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,17,"serviceUserDesc")),o["ɵɵadvance"](7),o["ɵɵproperty"]("value",e.userType.ProviderAdmin)("ngModel",e.type),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](33,19,"providerAdmin"),"\n            "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](36,21,"providerAdminDesc"))}}function EG(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",31,32),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().delete()})),o["ɵɵpipe"](2,"i18n"),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"i",33),o["ɵɵtext"](5,"\n            "),o["ɵɵelement"](6,"i",34),o["ɵɵpipe"](7,"i18n"),o["ɵɵtext"](8,"\n          "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](2,6,"delete")),o["ɵɵproperty"]("disabled",e.loading)("appApiAction",t.deletePromise),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](7,8,"loading")),o["ɵɵproperty"]("hidden",!e.loading)}}class kG{constructor(e,t,n,i){this.apiService=e,this.i18nService=t,this.platformUtilsService=n,this.logService=i,this.onSavedUser=new o.EventEmitter,this.onDeletedUser=new o.EventEmitter,this.loading=!0,this.editMode=!1,this.type=FH.ServiceUser,this.permissions=new Sg,this.showCustom=!1,this.access="selected",this.userType=FH}ngOnInit(){return SG(this,void 0,void 0,(function*(){if(this.editMode=this.loading=null!=this.providerUserId,this.editMode){this.editMode=!0,this.title=this.i18nService.t("editUser");try{const e=yield this.apiService.getProviderUser(this.providerId,this.providerUserId);this.type=e.type}catch(e){this.logService.error(e)}}else this.title=this.i18nService.t("inviteUser");this.loading=!1}))}submit(){return SG(this,void 0,void 0,(function*(){try{if(this.editMode){const e=new yG;e.type=this.type,this.formPromise=this.apiService.putProviderUser(this.providerId,this.providerUserId,e)}else{const e=new xG;e.emails=this.emails.trim().split(/\s*,\s*/),e.type=this.type,this.formPromise=this.apiService.postProviderUserInvite(this.providerId,e)}yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t(this.editMode?"editedUserId":"invitedUsers",this.name)),this.onSavedUser.emit()}catch(e){this.logService.error(e)}}))}delete(){return SG(this,void 0,void 0,(function*(){if(!this.editMode)return;if(!(yield this.platformUtilsService.showDialog(this.i18nService.t("removeUserConfirmation"),this.name,this.i18nService.t("yes"),this.i18nService.t("no"),"warning")))return!1;try{this.deletePromise=this.apiService.deleteProviderUser(this.providerId,this.providerUserId),yield this.deletePromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("removedUserId",this.name)),this.onDeletedUser.emit()}catch(e){this.logService.error(e)}}))}}kG.ɵfac=function(e){return new(e||kG)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$))},kG.ɵcmp=o["ɵɵdefineComponent"]({type:kG,selectors:[["provider-user-add-edit"]],inputs:{name:"name",providerUserId:"providerUserId",providerId:"providerId"},outputs:{onSavedUser:"onSavedUser",onDeletedUser:"onDeletedUser"},decls:51,vars:19,consts:[["role","dialog","aria-modal","true","aria-labelledby","userAddEditTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable","modal-lg"],["ngNativeValidate","",1,"modal-content",3,"appApiAction","ngSubmit"],["form",""],[1,"modal-header"],["id","userAddEditTitle",1,"modal-title"],["class","text-muted",4,"ngIf"],["type","button","data-dismiss","modal",1,"close",3,"appA11yTitle"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","data-dismiss","modal",1,"btn","btn-outline-secondary"],[1,"ml-auto"],["type","button","class","btn btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click",4,"ngIf"],[1,"text-muted"],[1,"modal-body"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[4,"ngIf"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/provider-users/",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],[1,"form-check","mt-2","form-check-block"],["type","radio","name","userType","id","userTypeServiceUser",1,"form-check-input",3,"value","ngModel","ngModelChange"],["for","userTypeServiceUser",1,"form-check-label"],["type","radio","name","userType","id","userTypeProviderAdmin",1,"form-check-input",3,"value","ngModel","ngModelChange"],["for","userTypeProviderAdmin",1,"form-check-label"],[1,"form-group","mb-4"],["for","emails"],["id","emails","type","text","name","Emails","required","","appAutoFocus","",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-outline-danger",3,"appA11yTitle","disabled","appApiAction","click"],["deleteBtn",""],["aria-hidden","true",1,"bwi","bwi-trash","bwi-lg","bwi-fw",3,"hidden"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-lg","bwi-fw",3,"hidden","title"]],template:function(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"form",2,3),o["ɵɵlistener"]("ngSubmit",(function(){return t.submit()})),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",4),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"h2",5),o["ɵɵtext"](10),o["ɵɵtemplate"](11,bG,2,1,"small",6),o["ɵɵtext"](12,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n        "),o["ɵɵelementStart"](14,"button",7),o["ɵɵpipe"](15,"i18n"),o["ɵɵtext"](16,"\n          "),o["ɵɵelementStart"](17,"span",8),o["ɵɵtext"](18,"×"),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵtemplate"](22,wG,9,6,"div",9),o["ɵɵtext"](23,"\n      "),o["ɵɵtemplate"](24,CG,40,23,"div",9),o["ɵɵtext"](25,"\n      "),o["ɵɵelementStart"](26,"div",10),o["ɵɵtext"](27,"\n        "),o["ɵɵelementStart"](28,"button",11),o["ɵɵtext"](29,"\n          "),o["ɵɵelement"](30,"i",12),o["ɵɵpipe"](31,"i18n"),o["ɵɵtext"](32,"\n          "),o["ɵɵelementStart"](33,"span"),o["ɵɵtext"](34),o["ɵɵpipe"](35,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](36,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n        "),o["ɵɵelementStart"](38,"button",13),o["ɵɵtext"](39),o["ɵɵpipe"](40,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n        "),o["ɵɵelementStart"](42,"div",14),o["ɵɵtext"](43,"\n          "),o["ɵɵtemplate"](44,EG,9,10,"button",15),o["ɵɵtext"](45,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](48,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](50,"\n")),2&e){const e=o["ɵɵreference"](5);o["ɵɵadvance"](4),o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",t.title,"\n          "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",t.name),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](15,11,"close")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading),o["ɵɵadvance"](4),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](31,13,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](35,15,"save")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](40,17,"cancel"),"\n        "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",t.editMode)}},directives:[d.NgControlStatusGroup,d.NgForm,Y.b,B.NgIf,pe,d.RadioControlValueAccessor,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,d.RequiredValidator],pipes:[M.C],encapsulation:2});var PG=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const AG=["addEdit"],OG=["groupsTemplate"],TG=["eventsTemplate"],BG=["bulkStatusTemplate"],MG=["bulkConfirmTemplate"],DG=["bulkRemoveTemplate"];function FG(e,t){if(1&e&&(o["ɵɵelementStart"](0,"span",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.allCount)}}function RG(e,t){if(1&e&&(o["ɵɵelementStart"](0,"span",30),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.invitedCount)}}function UG(e,t){if(1&e&&(o["ɵɵelementStart"](0,"span",31),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.acceptedCount)}}function zG(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",32),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().bulkConfirm()})),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",33),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](4,1,"confirmSelected"),"\n        "))}function NG(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",34),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",35),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function VG(e,t){1&e&&(o["ɵɵelementStart"](0,"p"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"noUsersInList")))}function HG(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",39),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,2,"confirmUsers")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](3,4,"providerUsersNeedConfirmed"),"\n    "))}function jG(e,t){1&e&&(o["ɵɵelementStart"](0,"span",55),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"invited")))}function LG(e,t){1&e&&(o["ɵɵelementStart"](0,"span",31),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"accepted")))}function KG(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",56),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]().$implicit;o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}function GG(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n              "),o["ɵɵelement"](2,"i",57),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n              "),o["ɵɵelementStart"](5,"span",35),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n            "),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"userUsingTwoStep")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"userUsingTwoStep")))}function qG(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"providerAdmin")))}function _G(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"serviceUser")))}function $G(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](2,1,"custom")))}function WG(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",58),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).reinvite(t)})),o["ɵɵtext"](1,"\n                  "),o["ɵɵelement"](2,"i",14),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](4,1,"resendInvitation"),"\n                "))}function QG(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",59),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).confirm(t)})),o["ɵɵtext"](1,"\n                  "),o["ɵɵelement"](2,"i",33),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](4,1,"confirm"),"\n                "))}function YG(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",58),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).groups(t)})),o["ɵɵtext"](1,"\n                  "),o["ɵɵelement"](2,"i",60),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](4,1,"groups"),"\n                "))}function ZG(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"a",58),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]().$implicit;return o["ɵɵnextContext"](3).events(t)})),o["ɵɵtext"](1,"\n                  "),o["ɵɵelement"](2,"i",61),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](4,1,"eventLogs"),"\n                "))}function JG(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"tr"),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"td",40),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).checkUser(t)})),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"input",41),o["ɵɵlistener"]("ngModelChange",(function(t){return o["ɵɵrestoreView"](e).$implicit.checked=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          "),o["ɵɵelementStart"](7,"td",42),o["ɵɵtext"](8,"\n            "),o["ɵɵelementStart"](9,"app-avatar",43),o["ɵɵpipe"](10,"userName"),o["ɵɵtext"](11,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"td"),o["ɵɵtext"](15,"\n            "),o["ɵɵelementStart"](16,"a",44),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).edit(t)})),o["ɵɵtext"](17),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n            "),o["ɵɵtemplate"](19,jG,3,3,"span",45),o["ɵɵtext"](20,"\n            "),o["ɵɵtemplate"](21,LG,3,3,"span",5),o["ɵɵtext"](22,"\n            "),o["ɵɵtemplate"](23,KG,2,1,"small",46),o["ɵɵtext"](24,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n          "),o["ɵɵelementStart"](26,"td"),o["ɵɵtext"](27,"\n            "),o["ɵɵtemplate"](28,GG,9,6,"ng-container",23),o["ɵɵtext"](29,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n          "),o["ɵɵelementStart"](31,"td"),o["ɵɵtext"](32,"\n            "),o["ɵɵtemplate"](33,qG,3,3,"span",23),o["ɵɵtext"](34,"\n            "),o["ɵɵtemplate"](35,_G,3,3,"span",23),o["ɵɵtext"](36,"\n            "),o["ɵɵtemplate"](37,$G,3,3,"span",23),o["ɵɵtext"](38,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n          "),o["ɵɵelementStart"](40,"td",47),o["ɵɵtext"](41,"\n            "),o["ɵɵelementStart"](42,"div",48),o["ɵɵtext"](43,"\n              "),o["ɵɵelementStart"](44,"button",49),o["ɵɵpipe"](45,"i18n"),o["ɵɵtext"](46,"\n                "),o["ɵɵelement"](47,"i",50),o["ɵɵtext"](48,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](49,"\n              "),o["ɵɵelementStart"](50,"div",51),o["ɵɵtext"](51,"\n                "),o["ɵɵtemplate"](52,WG,5,3,"a",52),o["ɵɵtext"](53,"\n                "),o["ɵɵtemplate"](54,QG,5,3,"a",53),o["ɵɵtext"](55,"\n                "),o["ɵɵtemplate"](56,YG,5,3,"a",52),o["ɵɵtext"](57,"\n                "),o["ɵɵtemplate"](58,ZG,5,3,"a",52),o["ɵɵtext"](59,"\n                "),o["ɵɵelementStart"](60,"a",54),o["ɵɵlistener"]("click",(function(){const t=o["ɵɵrestoreView"](e).$implicit;return o["ɵɵnextContext"](3).remove(t)})),o["ɵɵtext"](61,"\n                  "),o["ɵɵelement"](62,"i",17),o["ɵɵtext"](63),o["ɵɵpipe"](64,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n              "),o["ɵɵelementEnd"](),o["ɵɵtext"](66,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](68,"\n        "),o["ɵɵelementEnd"]()}if(2&e){const e=t.$implicit,n=o["ɵɵnextContext"](3);o["ɵɵadvance"](4),o["ɵɵproperty"]("ngModel",e.checked),o["ɵɵadvance"](5),o["ɵɵproperty"]("data",o["ɵɵpipeBind1"](10,19,e))("email",e.email)("circle",!0)("fontSize",14),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](e.email),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===n.userStatusType.Invited),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===n.userStatusType.Accepted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.name),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.twoFactorEnabled),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.type===n.userType.ProviderAdmin),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===n.userType.ServiceUser),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.type===n.userType.Custom),o["ɵɵadvance"](7),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](45,21,"options")),o["ɵɵadvance"](8),o["ɵɵproperty"]("ngIf",e.status===n.userStatusType.Invited),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.status===n.userStatusType.Accepted),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",n.accessGroups),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",n.accessEvents&&e.status===n.userStatusType.Confirmed),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n                  ",o["ɵɵpipeBind1"](64,23,"remove"),"\n                ")}}function XG(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n    "),o["ɵɵtemplate"](2,HG,4,6,"app-callout",36),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"table",37),o["ɵɵlistener"]("scrolled",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).loadMore()})),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"tbody"),o["ɵɵtext"](7,"\n        "),o["ɵɵtemplate"](8,JG,69,25,"tr",38),o["ɵɵtext"](9,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n  "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"]().ngIf,t=o["ɵɵnextContext"]();o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.showConfirmUsers),o["ɵɵadvance"](2),o["ɵɵproperty"]("infiniteScrollDistance",1)("infiniteScrollDisabled",!t.isPaging()),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngForOf",e)}}function eq(e,t){if(1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵtemplate"](2,VG,3,3,"p",23),o["ɵɵtext"](3,"\n  "),o["ɵɵtemplate"](4,XG,12,4,"ng-container",23),o["ɵɵtext"](5,"\n"),o["ɵɵelementContainerEnd"]()),2&e){const e=t.ngIf;o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.length),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.length)}}function tq(e,t){}function nq(e,t){}function iq(e,t){}function rq(e,t){}function oq(e,t){}function aq(e,t){}const sq=function(e){return{active:e}},lq=function(e,t){return[e,t,"name","email","id"]};class dq extends hv{constructor(e,t,n,i,r,o,a,s,l,d,c,p,u,m){super(e,s,n,r,o,l,i,d,c,p,u),this.route=t,this.router=a,this.providerService=m,this.userType=FH,this.userStatusType=DH,this.accessEvents=!1}ngOnInit(){this.route.parent.params.subscribe((e=>PG(this,void 0,void 0,(function*(){this.providerId=e.providerId;const t=yield this.providerService.get(this.providerId);t.canManageUsers?(this.accessEvents=t.useEvents,yield this.load(),this.route.queryParams.pipe((0,C.P)()).subscribe((e=>PG(this,void 0,void 0,(function*(){if(this.searchText=e.search,null!=e.viewEvents){const t=this.users.filter((t=>t.id===e.viewEvents));t.length>0&&t[0].status===DH.Confirmed&&this.events(t[0])}}))))):this.router.navigate(["../"],{relativeTo:this.route})}))))}getUsers(){return this.apiService.getProviderUsers(this.providerId)}deleteUser(e){return this.apiService.deleteProviderUser(this.providerId,e)}deactivateUser(e){return null}activateUser(e){return null}reinviteUser(e){return this.apiService.postProviderUserReinvite(this.providerId,e)}confirmUser(e,t){return PG(this,void 0,void 0,(function*(){const n=yield this.cryptoService.getProviderKey(this.providerId),i=yield this.cryptoService.rsaEncrypt(n.key,t.buffer),r=new HK;r.key=i.encryptedString,yield this.apiService.postProviderUserConfirm(this.providerId,e.id,r)}))}edit(e){return PG(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(kG,this.addEditModalRef,(n=>{n.name=this.userNamePipe.transform(e),n.providerId=this.providerId,n.providerUserId=null!=e?e.id:null,n.onSavedUser.subscribe((()=>{t.close(),this.load()})),n.onDeletedUser.subscribe((()=>{t.close(),this.removeUser(e)}))}))}))}events(e){return PG(this,void 0,void 0,(function*(){yield this.modalService.openViewRef(Lc,this.eventsModalRef,(t=>{t.name=this.userNamePipe.transform(e),t.providerId=this.providerId,t.entityId=e.id,t.showUser=!1,t.entity="user"}))}))}bulkRemove(){return PG(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const[e]=yield this.modalService.openViewRef(fG,this.bulkRemoveModalRef,(e=>{e.providerId=this.providerId,e.users=this.getCheckedUsers()}));yield e.onClosedPromise(),yield this.load()}))}bulkReinvite(){return PG(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const e=this.getCheckedUsers(),t=e.filter((e=>e.status===DH.Invited));if(t.length<=0)this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("noSelectedUsersApplicable"));else{try{const n=new VK(t.map((e=>e.id))),i=this.apiService.postManyProviderUserReinvite(this.providerId,n);this.showBulkStatus(e,t,i,this.i18nService.t("bulkReinviteMessage"))}catch(n){this.validationService.showError(n)}this.actionPromise=null}}))}bulkConfirm(){return PG(this,void 0,void 0,(function*(){if(null!=this.actionPromise)return;const[e]=yield this.modalService.openViewRef(iG,this.bulkConfirmModalRef,(e=>{e.providerId=this.providerId,e.users=this.getCheckedUsers()}));yield e.onClosedPromise(),yield this.load()}))}showBulkStatus(e,t,n,i){return PG(this,void 0,void 0,(function*(){const[r,o]=yield this.modalService.openViewRef(ug,this.bulkStatusModalRef,(e=>{e.loading=!0}));let a=!1;r.onShown.subscribe((()=>{a&&r.close()}));try{const a=yield n;if(r){const n=a.data.filter((e=>""!==e.error)).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t.error})),{}),r=t.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.id]:t})),{});o.users=e.map((e=>{var t;let o=null!==(t=n[e.id])&&void 0!==t?t:i;return r.hasOwnProperty(e.id)||(o=this.i18nService.t("bulkFilteredMessage")),{user:e,error:n.hasOwnProperty(e.id),message:o}})),o.loading=!1}}catch(s){a=!0,r.close()}}))}}dq.ɵfac=function(e){return new(e||dq)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](kn),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](za),o["ɵɵdirectiveInject"](ov.R),o["ɵɵdirectiveInject"](L.$),o["ɵɵdirectiveInject"](um.C),o["ɵɵdirectiveInject"](Pc.z),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](wi))},dq.ɵcmp=o["ɵɵdefineComponent"]({type:dq,selectors:[["provider-people"]],viewQuery:function(e,t){if(1&e&&(o["ɵɵviewQuery"](AG,7,o.ViewContainerRef),o["ɵɵviewQuery"](OG,7,o.ViewContainerRef),o["ɵɵviewQuery"](TG,7,o.ViewContainerRef),o["ɵɵviewQuery"](BG,7,o.ViewContainerRef),o["ɵɵviewQuery"](MG,7,o.ViewContainerRef),o["ɵɵviewQuery"](DG,7,o.ViewContainerRef)),2&e){let e;o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.addEditModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.groupsModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.eventsModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.bulkStatusModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.bulkConfirmModalRef=e.first),o["ɵɵqueryRefresh"](e=o["ɵɵloadQuery"]())&&(t.bulkRemoveModalRef=e.first)}},features:[o["ɵɵInheritDefinitionFeature"]],decls:110,vars:61,consts:[[1,"page-header","d-flex"],[1,"ml-auto","d-flex"],["role","group",1,"btn-group","btn-group-sm"],["type","button",1,"btn","btn-outline-secondary",3,"ngClass","click"],["bitBadge","","badgeType","info",4,"ngIf"],["bitBadge","","badgeType","warning",4,"ngIf"],[1,"ml-3"],["for","search",1,"sr-only"],["type","search","id","search",1,"form-control","form-control-sm",3,"placeholder","ngModel","ngModelChange"],["appListDropdown","",1,"dropdown","ml-3"],["type","button","id","bulkActionsButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-sm","btn-outline-secondary","dropdown-toggle",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-cog"],["aria-labelledby","bulkActionsButton",1,"dropdown-menu","dropdown-menu-right"],["appStopClick","",1,"dropdown-item",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-envelope"],["class","dropdown-item text-success","appStopClick","",3,"click",4,"ngIf"],["appStopClick","",1,"dropdown-item","text-danger",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-close"],[1,"dropdown-divider"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-check-square"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-minus-square"],["type","button",1,"btn","btn-sm","btn-outline-primary","ml-3",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus","bwi-fw"],[4,"ngIf"],["addEdit",""],["eventsTemplate",""],["confirmTemplate",""],["bulkStatusTemplate",""],["bulkConfirmTemplate",""],["bulkRemoveTemplate",""],["bitBadge","","badgeType","info"],["bitBadge","","badgeType","warning"],["appStopClick","",1,"dropdown-item","text-success",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-check"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["type","info","icon","bwi bwi-check-circle",3,"title",4,"ngIf"],["infiniteScroll","",1,"table","table-hover","table-list",3,"infiniteScrollDistance","infiniteScrollDisabled","scrolled"],[4,"ngFor","ngForOf"],["type","info","icon","bwi bwi-check-circle",3,"title"],[1,"table-list-checkbox",3,"click"],["type","checkbox","appStopProp","",3,"ngModel","ngModelChange"],["width","30"],["size","25",3,"data","email","circle","fontSize"],["href","#","appStopClick","",3,"click"],["bitBadge","","badgeType","secondary",4,"ngIf"],["class","text-muted d-block",4,"ngIf"],[1,"table-list-options"],["appListDropdown","",1,"dropdown"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-cog","bwi-lg"],[1,"dropdown-menu","dropdown-menu-right"],["class","dropdown-item","href","#","appStopClick","",3,"click",4,"ngIf"],["class","dropdown-item text-success","href","#","appStopClick","",3,"click",4,"ngIf"],["href","#","appStopClick","",1,"dropdown-item","text-danger",3,"click"],["bitBadge","","badgeType","secondary"],[1,"text-muted","d-block"],["aria-hidden","true",1,"bwi","bwi-lock",3,"title"],["href","#","appStopClick","",1,"dropdown-item",3,"click"],["href","#","appStopClick","",1,"dropdown-item","text-success",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-sitemap"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-file-text"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"div",1),o["ɵɵtext"](7,"\n    "),o["ɵɵelementStart"](8,"div",2),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"button",3),o["ɵɵlistener"]("click",(function(){return t.filter(null)})),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵtemplate"](13,FG,2,1,"span",4),o["ɵɵtext"](14,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n      "),o["ɵɵelementStart"](16,"button",3),o["ɵɵlistener"]("click",(function(){return t.filter(t.userStatusType.Invited)})),o["ɵɵtext"](17),o["ɵɵpipe"](18,"i18n"),o["ɵɵtemplate"](19,RG,2,1,"span",4),o["ɵɵtext"](20,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementStart"](22,"button",3),o["ɵɵlistener"]("click",(function(){return t.filter(t.userStatusType.Accepted)})),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵtemplate"](25,UG,2,1,"span",5),o["ɵɵtext"](26,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n    "),o["ɵɵelementStart"](29,"div",6),o["ɵɵtext"](30,"\n      "),o["ɵɵelementStart"](31,"label",7),o["ɵɵtext"](32),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n      "),o["ɵɵelementStart"](35,"input",8),o["ɵɵlistener"]("ngModelChange",(function(e){return t.searchText=e})),o["ɵɵpipe"](36,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](37,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n    "),o["ɵɵelementStart"](39,"div",9),o["ɵɵtext"](40,"\n      "),o["ɵɵelementStart"](41,"button",10),o["ɵɵpipe"](42,"i18n"),o["ɵɵtext"](43,"\n        "),o["ɵɵelement"](44,"i",11),o["ɵɵtext"](45,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n      "),o["ɵɵelementStart"](47,"div",12),o["ɵɵtext"](48,"\n        "),o["ɵɵelementStart"](49,"button",13),o["ɵɵlistener"]("click",(function(){return t.bulkReinvite()})),o["ɵɵtext"](50,"\n          "),o["ɵɵelement"](51,"i",14),o["ɵɵtext"](52),o["ɵɵpipe"](53,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n        "),o["ɵɵtemplate"](55,zG,5,3,"button",15),o["ɵɵtext"](56,"\n        "),o["ɵɵelementStart"](57,"button",16),o["ɵɵlistener"]("click",(function(){return t.bulkRemove()})),o["ɵɵtext"](58,"\n          "),o["ɵɵelement"](59,"i",17),o["ɵɵtext"](60),o["ɵɵpipe"](61,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](62,"\n        "),o["ɵɵelement"](63,"div",18),o["ɵɵtext"](64,"\n        "),o["ɵɵelementStart"](65,"button",13),o["ɵɵlistener"]("click",(function(){return t.selectAll(!0)})),o["ɵɵtext"](66,"\n          "),o["ɵɵelement"](67,"i",19),o["ɵɵtext"](68),o["ɵɵpipe"](69,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](70,"\n        "),o["ɵɵelementStart"](71,"button",13),o["ɵɵlistener"]("click",(function(){return t.selectAll(!1)})),o["ɵɵtext"](72,"\n          "),o["ɵɵelement"](73,"i",20),o["ɵɵtext"](74),o["ɵɵpipe"](75,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](77,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](78,"\n    "),o["ɵɵelementStart"](79,"button",21),o["ɵɵlistener"]("click",(function(){return t.invite()})),o["ɵɵtext"](80,"\n      "),o["ɵɵelement"](81,"i",22),o["ɵɵtext"](82),o["ɵɵpipe"](83,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](84,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](85,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](86,"\n"),o["ɵɵtemplate"](87,NG,9,6,"ng-container",23),o["ɵɵtext"](88,"\n"),o["ɵɵtemplate"](89,eq,6,2,"ng-container",23),o["ɵɵpipe"](90,"search"),o["ɵɵtext"](91,"\n"),o["ɵɵtemplate"](92,tq,0,0,"ng-template",null,24,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](94,"\n"),o["ɵɵtemplate"](95,nq,0,0,"ng-template",null,25,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](97,"\n"),o["ɵɵtemplate"](98,iq,0,0,"ng-template",null,26,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](100,"\n"),o["ɵɵtemplate"](101,rq,0,0,"ng-template",null,27,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](103,"\n"),o["ɵɵtemplate"](104,oq,0,0,"ng-template",null,28,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](106,"\n"),o["ɵɵtemplate"](107,aq,0,0,"ng-template",null,29,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](109,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,22,"people")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](52,sq,null==t.status)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](12,24,"all"),"\n        "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.allCount),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](54,sq,t.status==t.userStatusType.Invited)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](18,26,"invited"),"\n        "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.invitedCount),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction1"](56,sq,t.status==t.userStatusType.Accepted)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](24,28,"accepted"),"\n        "),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.acceptedCount),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](33,30,"search")),o["ɵɵadvance"](3),o["ɵɵpropertyInterpolate"]("placeholder",o["ɵɵpipeBind1"](36,32,"search")),o["ɵɵproperty"]("ngModel",t.searchText),o["ɵɵadvance"](6),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](42,34,"options")),o["ɵɵadvance"](11),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](53,36,"reinviteSelected"),"\n        "),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.showBulkConfirmUsers),o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](61,38,"remove"),"\n        "),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](69,40,"selectAll"),"\n        "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](75,42,"unselectAll"),"\n        "),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](83,44,"inviteUser"),"\n    "),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&(t.isPaging()?t.pagedUsers:o["ɵɵpipeBindV"](90,46,o["ɵɵpureFunction2"](58,lq,t.users,t.searchText)))))},directives:[B.NgClass,B.NgIf,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,pe,Tn,Po.l,u.InfiniteScrollDirective,B.NgForOf,Pe.O,d.CheckboxControlValueAccessor,Oi,Di],pipes:[M.C,um.C,Pc.z],encapsulation:2});var cq=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function pq(e,t){1&e&&(o["ɵɵelementStart"](0,"div",11),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"div",12),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"i",13),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](6,1,"providerIsDisabled"),"\n          "))}function uq(e,t){if(1&e&&(o["ɵɵelementStart"](0,"li",15),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"a",19),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"i",20),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("routerLink",e.manageRoute),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](6,2,"manage"),"\n          ")}}function mq(e,t){1&e&&(o["ɵɵelementStart"](0,"li",15),o["ɵɵtext"](1,"\n          "),o["ɵɵelementStart"](2,"a",21),o["ɵɵtext"](3,"\n            "),o["ɵɵelement"](4,"i",22),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n        "),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](6,1,"settings"),"\n          "))}function hq(e,t){if(1&e&&(o["ɵɵelementStart"](0,"ul",14),o["ɵɵtext"](1,"\n        "),o["ɵɵelementStart"](2,"li",15),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"a",16),o["ɵɵtext"](5,"\n            "),o["ɵɵelement"](6,"i",17),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n        "),o["ɵɵtemplate"](11,uq,8,4,"li",18),o["ɵɵtext"](12,"\n        "),o["ɵɵtemplate"](13,mq,8,3,"li",18),o["ɵɵtext"](14,"\n      "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](8,3,"clients"),"\n          "),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",e.showManageTab),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.showSettingsTab)}}function vq(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",2),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",3),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",4),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",5),o["ɵɵtext"](7,"\n        "),o["ɵɵelement"](8,"app-avatar",6),o["ɵɵtext"](9,"\n        "),o["ɵɵelementStart"](10,"div",7),o["ɵɵtext"](11,"\n          "),o["ɵɵelementStart"](12,"span"),o["ɵɵtext"](13),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n          "),o["ɵɵelementStart"](15,"small",8),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n        "),o["ɵɵtemplate"](20,pq,8,3,"div",9),o["ɵɵtext"](21,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](22,"\n      "),o["ɵɵtemplate"](23,hq,15,5,"ul",10),o["ɵɵtext"](24,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](8),o["ɵɵproperty"]("data",e.provider.name)("circle",!0),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](e.provider.name),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,6,"provider")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",!e.provider.enabled),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",e.showMenuBar)}}class gq{constructor(e,t){this.route=e,this.providerService=t}ngOnInit(){document.body.classList.remove("layout_frontend"),this.route.params.subscribe((e=>cq(this,void 0,void 0,(function*(){this.providerId=e.providerId,yield this.load()}))))}load(){return cq(this,void 0,void 0,(function*(){this.provider=yield this.providerService.get(this.providerId)}))}get showMenuBar(){return this.showManageTab||this.showSettingsTab}get showManageTab(){return this.provider.canManageUsers||this.provider.canAccessEventLogs}get showSettingsTab(){return this.provider.isProviderAdmin}get manageRoute(){switch(!0){case this.provider.canManageUsers:return"manage/people";case this.provider.canAccessEventLogs:return"manage/events"}}}gq.ɵfac=function(e){return new(e||gq)(o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](wi))},gq.ɵcmp=o["ɵɵdefineComponent"]({type:gq,selectors:[["providers-layout"]],decls:11,vars:1,consts:[["class","org-nav",4,"ngIf"],[1,"container","page-content"],[1,"org-nav"],[1,"container","d-flex"],[1,"d-flex","flex-column"],[1,"my-auto","d-flex","align-items-center","pl-1"],["size","45",3,"data","circle"],[1,"org-name","ml-3"],[1,"text-muted"],["class","ml-3 card border-danger text-danger bg-transparent",4,"ngIf"],["class","nav nav-tabs",4,"ngIf"],[1,"ml-3","card","border-danger","text-danger","bg-transparent"],[1,"card-body","py-2"],["aria-hidden","true",1,"bwi","bwi-exclamation-triangle"],[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","clients","routerLinkActive","active",1,"nav-link"],["aria-hidden","true",1,"bwi","bwi-bank"],["class","nav-item",4,"ngIf"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],["aria-hidden","true",1,"bwi","bwi-sliders"],["routerLink","settings","routerLinkActive","active",1,"nav-link"],["aria-hidden","true",1,"bwi","bwi-cogs"]],template:function(e,t){1&e&&(o["ɵɵelement"](0,"app-navbar"),o["ɵɵtext"](1,"\n"),o["ɵɵtemplate"](2,vq,27,8,"div",0),o["ɵɵtext"](3,"\n"),o["ɵɵelementStart"](4,"div",1),o["ɵɵtext"](5,"\n  "),o["ɵɵelement"](6,"router-outlet"),o["ɵɵtext"](7,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelement"](9,"app-footer"),o["ɵɵtext"](10,"\n")),2&e&&(o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.provider))},directives:[Ki,B.NgIf,p.RouterOutlet,qi,Di,p.RouterLinkWithHref,p.RouterLinkActive],pipes:[M.C],encapsulation:2});class fq{}var xq=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function yq(e,t){1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",3),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",4),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function Sq(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",5,6),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"div",7),o["ɵɵtext"](4,"\n    "),o["ɵɵelementStart"](5,"div",8),o["ɵɵtext"](6,"\n      "),o["ɵɵelementStart"](7,"div",9),o["ɵɵtext"](8,"\n        "),o["ɵɵelementStart"](9,"label",10),o["ɵɵtext"](10),o["ɵɵpipe"](11,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n        "),o["ɵɵelementStart"](13,"input",11),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().provider.name=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n      "),o["ɵɵelementStart"](16,"div",9),o["ɵɵtext"](17,"\n        "),o["ɵɵelementStart"](18,"label",12),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n        "),o["ɵɵelementStart"](22,"input",13),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().provider.billingEmail=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n    "),o["ɵɵelementStart"](26,"div",8),o["ɵɵtext"](27,"\n      "),o["ɵɵelement"](28,"app-avatar",14),o["ɵɵtext"](29,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n  "),o["ɵɵelementStart"](32,"button",15),o["ɵɵtext"](33,"\n    "),o["ɵɵelement"](34,"i",16),o["ɵɵpipe"](35,"i18n"),o["ɵɵtext"](36,"\n    "),o["ɵɵelementStart"](37,"span"),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](11,11,"providerName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.provider.name)("disabled",t.selfHosted),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](20,13,"billingEmail")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.provider.billingEmail)("disabled",t.selfHosted),o["ɵɵadvance"](6),o["ɵɵpropertyInterpolate"]("data",t.provider.name),o["ɵɵadvance"](4),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](35,15,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](39,17,"save"))}}class bq{constructor(e,t,n,i,r,o){this.apiService=e,this.i18nService=t,this.route=n,this.syncService=i,this.platformUtilsService=r,this.logService=o,this.selfHosted=!1,this.loading=!0}ngOnInit(){return xq(this,void 0,void 0,(function*(){this.selfHosted=this.platformUtilsService.isSelfHost(),this.route.parent.parent.params.subscribe((e=>xq(this,void 0,void 0,(function*(){this.providerId=e.providerId;try{this.provider=yield this.apiService.getProvider(this.providerId)}catch(t){this.logService.error(`Handled exception: ${t}`)}})))),this.loading=!1}))}submit(){return xq(this,void 0,void 0,(function*(){try{const e=new fq;e.name=this.provider.name,e.businessName=this.provider.businessName,e.billingEmail=this.provider.billingEmail,this.formPromise=this.apiService.putProvider(this.providerId,e).then((()=>this.syncService.fullSync(!0))),yield this.formPromise,this.platformUtilsService.showToast("success",null,this.i18nService.t("providerUpdated"))}catch(e){this.logService.error(`Handled exception: ${e}`)}}))}}bq.ɵfac=function(e){return new(e||bq)(o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](L.$))},bq.ɵcmp=o["ɵɵdefineComponent"]({type:bq,selectors:[["provider-account"]],decls:11,vars:5,consts:[[1,"page-header"],[4,"ngIf"],["ngNativeValidate","",3,"appApiAction","ngSubmit",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"row"],[1,"col-6"],[1,"form-group"],["for","name"],["id","name","type","text","name","Name",1,"form-control",3,"ngModel","disabled","ngModelChange"],["for","billingEmail"],["id","billingEmail","type","text","name","BillingEmail",1,"form-control",3,"ngModel","disabled","ngModelChange"],["dynamic","true","size","75","fontSize","35",3,"data"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n"),o["ɵɵtemplate"](7,yq,9,6,"div",1),o["ɵɵtext"](8,"\n"),o["ɵɵtemplate"](9,Sq,42,19,"form",2),o["ɵɵtext"](10,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"myProvider")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.provider&&!t.loading))},directives:[B.NgIf,d.NgControlStatusGroup,d.NgForm,Y.b,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,Di],pipes:[M.C],encapsulation:2});var wq=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class Iq{constructor(e,t){this.route=e,this.providerService=t}ngOnInit(){this.route.parent.params.subscribe((e=>wq(this,void 0,void 0,(function*(){yield this.providerService.get(e.providerId)}))))}}Iq.ɵfac=function(e){return new(e||Iq)(o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](wi))},Iq.ɵcmp=o["ɵɵdefineComponent"]({type:Iq,selectors:[["provider-settings"]],decls:28,vars:6,consts:[[1,"container","page-content"],[1,"row"],[1,"col-3"],[1,"card"],[1,"card-header"],[1,"list-group","list-group-flush"],["routerLink","account","routerLinkActive","active",1,"list-group-item"],[1,"col-9"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"div",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"div",5),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"a",6),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n    "),o["ɵɵelementStart"](21,"div",7),o["ɵɵtext"](22,"\n      "),o["ɵɵelement"](23,"router-outlet"),o["ɵɵtext"](24,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n")),2&e&&(o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,2,"settings")),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](16,4,"myProvider"),"\n          "))},directives:[p.RouterLinkWithHref,p.RouterLinkActive,p.RouterOutlet],pipes:[M.C],encapsulation:2});var Cq=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Eq(e,t){1&e&&(o["ɵɵelementStart"](0,"div",2),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div"),o["ɵɵtext"](3,"\n    "),o["ɵɵelement"](4,"img",3),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"p",4),o["ɵɵtext"](7,"\n      "),o["ɵɵelement"](8,"i",5),o["ɵɵpipe"](9,"i18n"),o["ɵɵtext"](10,"\n      "),o["ɵɵelementStart"](11,"span",6),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](8),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](9,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,4,"loading")))}const kq=function(e){return{email:e}};function Pq(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",7),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",8),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",9),o["ɵɵtext"](5,"\n      "),o["ɵɵelementStart"](6,"p",10),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"div",11),o["ɵɵtext"](11,"\n        "),o["ɵɵelementStart"](12,"div",12),o["ɵɵtext"](13,"\n          "),o["ɵɵelementStart"](14,"p"),o["ɵɵtext"](15),o["ɵɵpipe"](16,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n          "),o["ɵɵelement"](18,"hr"),o["ɵɵtext"](19,"\n          "),o["ɵɵelementStart"](20,"div",13),o["ɵɵtext"](21,"\n            "),o["ɵɵelementStart"](22,"a",14),o["ɵɵtext"](23),o["ɵɵpipe"](24,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,4,"setupProvider")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](16,6,"setupProviderLoginDesc")),o["ɵɵadvance"](7),o["ɵɵproperty"]("queryParams",o["ɵɵpureFunction1"](10,kq,e.email)),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](24,8,"logIn"),"\n            ")}}class Aq extends O{constructor(){super(...arguments),this.failedShortMessage="inviteAcceptFailedShort",this.failedMessage="inviteAcceptFailed",this.requiredParameters=["providerId","email","token"]}authedHandler(e){return Cq(this,void 0,void 0,(function*(){this.router.navigate(["/providers/setup"],{queryParams:e})}))}unauthedHandler(e){return Cq(this,void 0,void 0,(function*(){}))}}Aq.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](Aq)))(t||Aq)}}(),Aq.ɵcmp=o["ɵɵdefineComponent"]({type:Aq,selectors:[["app-setup-provider"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:4,vars:2,consts:[["class","mt-5 d-flex justify-content-center",4,"ngIf"],["class","container",4,"ngIf"],[1,"mt-5","d-flex","justify-content-center"],["alt","Bitwarden",1,"mb-4","logo","logo-themed"],[1,"text-center"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","bwi-2x","text-muted",3,"title"],[1,"sr-only"],[1,"container"],[1,"row","justify-content-md-center","mt-5"],[1,"col-5"],[1,"lead","text-center","mb-4"],[1,"card","d-block"],[1,"card-body"],[1,"d-flex"],["routerLink","/login",1,"btn","btn-primary","btn-block",3,"queryParams"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,Eq,17,6,"div",0),o["ɵɵtext"](1,"\n"),o["ɵɵtemplate"](2,Pq,31,12,"div",1),o["ɵɵtext"](3,"\n")),2&e&&(o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading&&!t.authed))},directives:[B.NgIf,p.RouterLinkWithHref],pipes:[M.C],encapsulation:2});class Oq{}var Tq=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Bq(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"button",16),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).cancel()})),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](2,1,"cancel"),"\n      "))}function Mq(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",3,4),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](2,"\n    "),o["ɵɵelementStart"](3,"h2",5),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n    "),o["ɵɵelementStart"](7,"div",6),o["ɵɵtext"](8,"\n      "),o["ɵɵelementStart"](9,"div",7),o["ɵɵtext"](10,"\n        "),o["ɵɵelementStart"](11,"label",8),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementStart"](15,"input",9),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().name=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n      "),o["ɵɵelementStart"](18,"div",7),o["ɵɵtext"](19,"\n        "),o["ɵɵelementStart"](20,"label",10),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n        "),o["ɵɵelementStart"](24,"input",11),o["ɵɵlistener"]("ngModelChange",(function(t){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().billingEmail=t})),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n\n    "),o["ɵɵelementStart"](28,"div",12),o["ɵɵtext"](29,"\n      "),o["ɵɵelementStart"](30,"button",13),o["ɵɵtext"](31,"\n        "),o["ɵɵelement"](32,"i",14),o["ɵɵpipe"](33,"i18n"),o["ɵɵtext"](34,"\n        "),o["ɵɵelementStart"](35,"span"),o["ɵɵtext"](36),o["ɵɵpipe"](37,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n      "),o["ɵɵtemplate"](40,Bq,3,3,"button",15),o["ɵɵtext"](41,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](42,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵproperty"]("appApiAction",t.formPromise),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](5,10,"generalInformation")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,12,"providerName")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.name),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](22,14,"billingEmail")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngModel",t.billingEmail),o["ɵɵadvance"](6),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](33,16,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](37,18,"submit")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.showCancel)}}class Dq{constructor(e,t,n,i,r,o,a,s){this.router=e,this.platformUtilsService=t,this.i18nService=n,this.route=i,this.cryptoService=r,this.apiService=o,this.syncService=a,this.validationService=s,this.loading=!0,this.authed=!1}ngOnInit(){document.body.classList.remove("layout_frontend"),this.route.queryParams.pipe((0,C.P)()).subscribe((e=>Tq(this,void 0,void 0,(function*(){if(null==e.providerId||null==e.email||null==e.token)return this.platformUtilsService.showToast("error",null,this.i18nService.t("emergencyInviteAcceptFailed"),{timeout:1e4}),void this.router.navigate(["/"]);this.providerId=e.providerId,this.token=e.token;try{const e=yield this.apiService.getProvider(this.providerId);null!=e.name&&this.router.navigate(["/providers",e.id],{replaceUrl:!0})}catch(t){this.validationService.showError(t),this.router.navigate(["/"])}}))))}submit(){return Tq(this,void 0,void 0,(function*(){this.formPromise=this.doSubmit(),yield this.formPromise,this.formPromise=null}))}doSubmit(){return Tq(this,void 0,void 0,(function*(){try{const e=(yield this.cryptoService.makeShareKey())[0].encryptedString,t=new Oq;t.name=this.name,t.billingEmail=this.billingEmail,t.token=this.token,t.key=e;const n=yield this.apiService.postProviderSetup(this.providerId,t);this.platformUtilsService.showToast("success",null,this.i18nService.t("providerSetup")),yield this.syncService.fullSync(!0),this.router.navigate(["/providers",n.id])}catch(e){this.validationService.showError(e)}}))}}Dq.ɵfac=function(e){return new(e||Dq)(o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](ov.R))},Dq.ɵcmp=o["ɵɵdefineComponent"]({type:Dq,selectors:[["provider-setup"]],decls:20,vars:7,consts:[[1,"container","page-content"],[1,"page-header"],["ngNativeValidate","",3,"appApiAction","ngSubmit",4,"ngIf"],["ngNativeValidate","",3,"appApiAction","ngSubmit"],["form",""],[1,"mt-5"],[1,"row"],[1,"form-group","col-6"],["for","name"],["id","name","type","text","name","Name","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","billingEmail"],["id","billingEmail","type","text","name","BillingEmail","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"mt-4"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(e,t){1&e&&(o["ɵɵelement"](0,"app-navbar"),o["ɵɵtext"](1,"\n"),o["ɵɵelementStart"](2,"div",0),o["ɵɵtext"](3,"\n  "),o["ɵɵelementStart"](4,"div",1),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"h1"),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n  "),o["ɵɵelementStart"](11,"p"),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n\n  "),o["ɵɵtemplate"](15,Mq,43,20,"form",2),o["ɵɵtext"](16,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n"),o["ɵɵelement"](18,"app-footer"),o["ɵɵtext"](19,"\n")),2&e&&(o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,3,"setupProvider")),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,5,"setupProviderDesc")),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.loading))},directives:[Ki,B.NgIf,qi,d.NgControlStatusGroup,d.NgForm,Y.b,d.DefaultValueAccessor,d.RequiredValidator,d.NgControlStatus,d.NgModel],pipes:[M.C],encapsulation:2});const Fq=[{path:"",canActivate:[x],component:tK},{path:"",component:fi,children:[{path:"setup-provider",component:Aq,data:{titleId:"setupProvider"}},{path:"accept-provider",component:IK,data:{titleId:"acceptProvider"}}]},{path:"",canActivate:[x],children:[{path:"setup",component:Dq},{path:":providerId",component:gq,canActivate:[$L],children:[{path:"",pathMatch:"full",redirectTo:"clients"},{path:"clients/create",component:fK},{path:"clients",component:vK,data:{titleId:"clients"}},{path:"manage",component:NK,children:[{path:"",pathMatch:"full",redirectTo:"people"},{path:"people",component:dq,canActivate:[qL],data:{titleId:"people",permissions:[xi.P.ManageUsers]}},{path:"events",component:DK,canActivate:[qL],data:{titleId:"eventLogs",permissions:[xi.P.AccessEventLogs]}}]},{path:"settings",component:Iq,children:[{path:"",pathMatch:"full",redirectTo:"account"},{path:"account",component:bq,canActivate:[qL],data:{titleId:"myProvider",permissions:[xi.P.ManageProvider]}}]}]}]}];class Rq{}Rq.ɵfac=function(e){return new(e||Rq)},Rq.ɵmod=o["ɵɵdefineNgModule"]({type:Rq}),Rq.ɵinj=o["ɵɵdefineInjector"]({imports:[[p.RouterModule.forChild(Fq)],p.RouterModule]});class Uq{constructor(e,t){e.registerComponentFactoryResolver(KL,t)}}Uq.ɵfac=function(e){return new(e||Uq)(o["ɵɵinject"](kn),o["ɵɵinject"](o.ComponentFactoryResolver))},Uq.ɵmod=o["ɵɵdefineNgModule"]({type:Uq}),Uq.ɵinj=o["ɵɵdefineInjector"]({providers:[NL,$L,qL],imports:[[B.CommonModule,d.FormsModule,MU,m.b,Rq]]});const zq=[{path:"providers",loadChildren:()=>Uq}];class Nq{}Nq.ɵfac=function(e){return new(e||Nq)},Nq.ɵmod=o["ɵɵdefineNgModule"]({type:Nq}),Nq.ɵinj=o["ɵɵdefineInjector"]({imports:[[p.RouterModule.forChild(zq)],p.RouterModule]});class Vq extends Qf{constructor(){super(...arguments),this.name="disableSend",this.description="disableSendPolicyDesc",this.type=Kr.M.DisableSend,this.component=Hq}}class Hq extends Yf{}Hq.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](Hq)))(t||Hq)}}(),Hq.ɵcmp=o["ɵɵdefineComponent"]({type:Hq,selectors:[["policy-disable-send"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:16,vars:7,consts:[["type","warning"],[1,"form-group"],[1,"form-check"],["type","checkbox","id","enabled","name","Enabled",1,"form-check-input",3,"formControl"],["for","enabled",1,"form-check-label"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",0),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n\n"),o["ɵɵelementStart"](4,"div",1),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"div",2),o["ɵɵtext"](7,"\n    "),o["ɵɵelement"](8,"input",3),o["ɵɵtext"](9,"\n    "),o["ɵɵelementStart"](10,"label",4),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n")),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](2,3,"disableSendExemption"),"\n"),o["ɵɵadvance"](7),o["ɵɵproperty"]("formControl",t.enabled),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,5,"turnOn")))},directives:[Pe.O,d.CheckboxControlValueAccessor,d.NgControlStatus,d.FormControlDirective],pipes:[M.C],encapsulation:2});var jq=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function Lq(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",21),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](2,1,"keyConnectorPolicyRestriction"),"\n"))}function Kq(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",22),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}class Gq extends Qf{constructor(){super(...arguments),this.name="masterPassPolicyTitle",this.description="masterPassPolicyDesc",this.type=Kr.M.MasterPassword,this.component=qq}}class qq extends Yf{constructor(e,t,n){super(),this.formBuilder=e,this.organizationService=n,this.data=this.formBuilder.group({minComplexity:[null],minLength:[null],requireUpper:[null],requireLower:[null],requireNumbers:[null],requireSpecial:[null]}),this.showKeyConnectorInfo=!1,this.passwordScores=[{name:"-- "+t.t("select")+" --",value:null},{name:t.t("weak")+" (0)",value:0},{name:t.t("weak")+" (1)",value:1},{name:t.t("weak")+" (2)",value:2},{name:t.t("good")+" (3)",value:3},{name:t.t("strong")+" (4)",value:4}]}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return jq(this,void 0,void 0,(function*(){e.ngOnInit.call(this);const t=yield this.organizationService.get(this.policyResponse.organizationId);this.showKeyConnectorInfo=t.keyConnectorEnabled}))}}function _q(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",32),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.name)}}qq.ɵfac=function(e){return new(e||qq)(o["ɵɵdirectiveInject"](d.FormBuilder),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Ii.M))},qq.ɵcmp=o["ɵɵdefineComponent"]({type:qq,selectors:[["policy-master-password"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:73,vars:13,consts:[["type","info",4,"ngIf"],[3,"formGroup"],[1,"form-group"],[1,"form-check"],["type","checkbox","id","enabled","name","Enabled",1,"form-check-input",3,"formControl"],["for","enabled",1,"form-check-label"],[1,"row"],[1,"col-6","form-group"],["for","minComplexity"],["id","minComplexity","name","minComplexity","formControlName","minComplexity",1,"form-control"],[3,"ngValue",4,"ngFor","ngForOf"],["for","minLength"],["id","minLength","type","number","min","8","name","minLength","formControlName","minLength",1,"form-control"],["type","checkbox","id","requireUpper","name","requireUpper","formControlName","requireUpper",1,"form-check-input"],["for","requireUpper",1,"form-check-label"],["type","checkbox","id","requireLower","name","requireLower","formControlName","requireLower",1,"form-check-input"],["for","requireLower",1,"form-check-label"],["type","checkbox","id","requireNumbers","name","requireNumbers","formControlName","requireNumbers",1,"form-check-input"],["for","requireNumbers",1,"form-check-label"],["type","checkbox","id","requireSpecial","name","requireSpecial","formControlName","requireSpecial",1,"form-check-input"],["for","requireSpecial",1,"form-check-label"],["type","info"],[3,"ngValue"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,Lq,3,3,"app-callout",0),o["ɵɵtext"](1,"\n\n"),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n  "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"div",3),o["ɵɵtext"](7,"\n      "),o["ɵɵelement"](8,"input",4),o["ɵɵtext"](9,"\n      "),o["ɵɵelementStart"](10,"label",5),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n\n  "),o["ɵɵelementStart"](16,"div",6),o["ɵɵtext"](17,"\n    "),o["ɵɵelementStart"](18,"div",7),o["ɵɵtext"](19,"\n      "),o["ɵɵelementStart"](20,"label",8),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n      "),o["ɵɵelementStart"](24,"select",9),o["ɵɵtext"](25,"\n        "),o["ɵɵtemplate"](26,Kq,2,2,"option",10),o["ɵɵtext"](27,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n    "),o["ɵɵelementStart"](30,"div",7),o["ɵɵtext"](31,"\n      "),o["ɵɵelementStart"](32,"label",11),o["ɵɵtext"](33),o["ɵɵpipe"](34,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n      "),o["ɵɵelement"](36,"input",12),o["ɵɵtext"](37,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n  "),o["ɵɵelementStart"](40,"div",3),o["ɵɵtext"](41,"\n    "),o["ɵɵelement"](42,"input",13),o["ɵɵtext"](43,"\n    "),o["ɵɵelementStart"](44,"label",14),o["ɵɵtext"](45,"A-Z"),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n  "),o["ɵɵelementStart"](48,"div",3),o["ɵɵtext"](49,"\n    "),o["ɵɵelement"](50,"input",15),o["ɵɵtext"](51,"\n    "),o["ɵɵelementStart"](52,"label",16),o["ɵɵtext"](53,"a-z"),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n  "),o["ɵɵelementStart"](56,"div",3),o["ɵɵtext"](57,"\n    "),o["ɵɵelement"](58,"input",17),o["ɵɵtext"](59,"\n    "),o["ɵɵelementStart"](60,"label",18),o["ɵɵtext"](61,"0-9"),o["ɵɵelementEnd"](),o["ɵɵtext"](62,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](63,"\n  "),o["ɵɵelementStart"](64,"div",3),o["ɵɵtext"](65,"\n    "),o["ɵɵelement"](66,"input",19),o["ɵɵtext"](67,"\n    "),o["ɵɵelementStart"](68,"label",20),o["ɵɵtext"](69,"!@#$%^&*"),o["ɵɵelementEnd"](),o["ɵɵtext"](70,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](71,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n")),2&e&&(o["ɵɵproperty"]("ngIf",t.showKeyConnectorInfo),o["ɵɵadvance"](2),o["ɵɵproperty"]("formGroup",t.data),o["ɵɵadvance"](6),o["ɵɵproperty"]("formControl",t.enabled),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,7,"turnOn")),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](22,9,"minComplexityScore")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",t.passwordScores),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](34,11,"minLength")))},directives:[B.NgIf,d.NgControlStatusGroup,d.FormGroupDirective,d.CheckboxControlValueAccessor,d.NgControlStatus,d.FormControlDirective,d.SelectControlValueAccessor,d.FormControlName,B.NgForOf,d.MinValidator,d.NumberValueAccessor,d.DefaultValueAccessor,Pe.O,d.NgSelectOption,d["ɵNgSelectMultipleOption"]],pipes:[M.C],encapsulation:2});class $q extends Qf{constructor(){super(...arguments),this.name="passwordGenerator",this.description="passwordGeneratorPolicyDesc",this.type=Kr.M.PasswordGenerator,this.component=Wq}}class Wq extends Yf{constructor(e,t){super(),this.formBuilder=e,this.data=this.formBuilder.group({defaultType:[null],minLength:[null],useUpper:[null],useLower:[null],useNumbers:[null],useSpecial:[null],minNumbers:[null],minSpecial:[null],minNumberWords:[null],capitalize:[null],includeNumber:[null]}),this.defaultTypes=[{name:t.t("userPreference"),value:null},{name:t.t("password"),value:"password"},{name:t.t("passphrase"),value:"passphrase"}]}}Wq.ɵfac=function(e){return new(e||Wq)(o["ɵɵdirectiveInject"](d.FormBuilder),o["ɵɵdirectiveInject"](k.D))},Wq.ɵcmp=o["ɵɵdefineComponent"]({type:Wq,selectors:[["policy-password-generator"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:133,vars:33,consts:[[3,"formGroup"],[1,"form-group"],[1,"form-check"],["type","checkbox","id","enabled","name","Enabled",1,"form-check-input",3,"formControl"],["for","enabled",1,"form-check-label"],[1,"row"],[1,"col-6","form-group","mb-0"],["for","defaultType"],["id","defaultType","name","defaultType","formControlName","defaultType",1,"form-control"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"col-6","form-group"],["for","minLength"],["id","minLength","type","number","name","minLength","min","5","max","128","formControlName","minLength",1,"form-control"],["for","minNumbers"],["id","minNumbers","type","number","name","minNumbers","min","0","max","9","formControlName","minNumbers",1,"form-control"],["for","minSpecial"],["id","minSpecial","type","number","name","minSpecial","min","0","max","9","formControlName","minSpecial",1,"form-control"],["type","checkbox","id","useUpper","formControlName","useUpper","name","useUpper",1,"form-check-input"],["for","useUpper",1,"form-check-label"],["type","checkbox","id","useLower","name","useLower","formControlName","useLower",1,"form-check-input"],["for","useLower",1,"form-check-label"],["type","checkbox","id","useNumbers","name","useNumbers","formControlName","useNumbers",1,"form-check-input"],["for","useNumbers",1,"form-check-label"],["type","checkbox","id","useSpecial","name","useSpecial","formControlName","useSpecial",1,"form-check-input"],["for","useSpecial",1,"form-check-label"],["for","minNumberWords"],["id","minNumberWords","type","number","name","minNumberWords","min","3","max","20","formControlName","minNumberWords",1,"form-control"],["type","checkbox","id","capitalize","name","capitalize","formControlName","capitalize",1,"form-check-input"],["for","capitalize",1,"form-check-label"],["type","checkbox","id","includeNumber","name","includeNumber","formControlName","includeNumber",1,"form-check-input"],["for","includeNumber",1,"form-check-label"],[3,"ngValue"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"div",2),o["ɵɵtext"](5,"\n      "),o["ɵɵelement"](6,"input",3),o["ɵɵtext"](7,"\n      "),o["ɵɵelementStart"](8,"label",4),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n\n  "),o["ɵɵelementStart"](14,"div",5),o["ɵɵtext"](15,"\n    "),o["ɵɵelementStart"](16,"div",6),o["ɵɵtext"](17,"\n      "),o["ɵɵelementStart"](18,"label",7),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n      "),o["ɵɵelementStart"](22,"select",8),o["ɵɵtext"](23,"\n        "),o["ɵɵtemplate"](24,_q,2,2,"option",9),o["ɵɵtext"](25,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](26,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n  "),o["ɵɵelementStart"](29,"h3",10),o["ɵɵtext"](30),o["ɵɵpipe"](31,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](32,"\n  "),o["ɵɵelementStart"](33,"div",5),o["ɵɵtext"](34,"\n    "),o["ɵɵelementStart"](35,"div",11),o["ɵɵtext"](36,"\n      "),o["ɵɵelementStart"](37,"label",12),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n      "),o["ɵɵelement"](41,"input",13),o["ɵɵtext"](42,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n  "),o["ɵɵelementStart"](45,"div",5),o["ɵɵtext"](46,"\n    "),o["ɵɵelementStart"](47,"div",11),o["ɵɵtext"](48,"\n      "),o["ɵɵelementStart"](49,"label",14),o["ɵɵtext"](50),o["ɵɵpipe"](51,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](52,"\n      "),o["ɵɵelement"](53,"input",15),o["ɵɵtext"](54,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](55,"\n    "),o["ɵɵelementStart"](56,"div",11),o["ɵɵtext"](57,"\n      "),o["ɵɵelementStart"](58,"label",16),o["ɵɵtext"](59),o["ɵɵpipe"](60,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](61,"\n      "),o["ɵɵelement"](62,"input",17),o["ɵɵtext"](63,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](64,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](65,"\n  "),o["ɵɵelementStart"](66,"div",2),o["ɵɵtext"](67,"\n    "),o["ɵɵelement"](68,"input",18),o["ɵɵtext"](69,"\n    "),o["ɵɵelementStart"](70,"label",19),o["ɵɵtext"](71,"A-Z"),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](73,"\n  "),o["ɵɵelementStart"](74,"div",2),o["ɵɵtext"](75,"\n    "),o["ɵɵelement"](76,"input",20),o["ɵɵtext"](77,"\n    "),o["ɵɵelementStart"](78,"label",21),o["ɵɵtext"](79,"a-z"),o["ɵɵelementEnd"](),o["ɵɵtext"](80,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](81,"\n  "),o["ɵɵelementStart"](82,"div",2),o["ɵɵtext"](83,"\n    "),o["ɵɵelement"](84,"input",22),o["ɵɵtext"](85,"\n    "),o["ɵɵelementStart"](86,"label",23),o["ɵɵtext"](87,"0-9"),o["ɵɵelementEnd"](),o["ɵɵtext"](88,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](89,"\n  "),o["ɵɵelementStart"](90,"div",2),o["ɵɵtext"](91,"\n    "),o["ɵɵelement"](92,"input",24),o["ɵɵtext"](93,"\n    "),o["ɵɵelementStart"](94,"label",25),o["ɵɵtext"](95,"!@#$%^&*"),o["ɵɵelementEnd"](),o["ɵɵtext"](96,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](97,"\n  "),o["ɵɵelementStart"](98,"h3",10),o["ɵɵtext"](99),o["ɵɵpipe"](100,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](101,"\n  "),o["ɵɵelementStart"](102,"div",5),o["ɵɵtext"](103,"\n    "),o["ɵɵelementStart"](104,"div",11),o["ɵɵtext"](105,"\n      "),o["ɵɵelementStart"](106,"label",26),o["ɵɵtext"](107),o["ɵɵpipe"](108,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](109,"\n      "),o["ɵɵelement"](110,"input",27),o["ɵɵtext"](111,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](112,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](113,"\n  "),o["ɵɵelementStart"](114,"div",2),o["ɵɵtext"](115,"\n    "),o["ɵɵelement"](116,"input",28),o["ɵɵtext"](117,"\n    "),o["ɵɵelementStart"](118,"label",29),o["ɵɵtext"](119),o["ɵɵpipe"](120,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](121,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](122,"\n  "),o["ɵɵelementStart"](123,"div",2),o["ɵɵtext"](124,"\n    "),o["ɵɵelement"](125,"input",30),o["ɵɵtext"](126,"\n    "),o["ɵɵelementStart"](127,"label",31),o["ɵɵtext"](128),o["ɵɵpipe"](129,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](130,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](131,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](132,"\n")),2&e&&(o["ɵɵproperty"]("formGroup",t.data),o["ɵɵadvance"](6),o["ɵɵproperty"]("formControl",t.enabled),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](10,13,"turnOn")),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](20,15,"defaultType")),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngForOf",t.defaultTypes),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](31,17,"password")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](39,19,"minLength")),o["ɵɵadvance"](12),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](51,21,"minNumbers")),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](60,23,"minSpecial")),o["ɵɵadvance"](40),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](100,25,"passphrase")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](108,27,"minimumNumberOfWords")),o["ɵɵadvance"](12),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](120,29,"capitalize")),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](129,31,"includeNumber")))},directives:[d.NgControlStatusGroup,d.FormGroupDirective,d.CheckboxControlValueAccessor,d.NgControlStatus,d.FormControlDirective,d.SelectControlValueAccessor,d.FormControlName,B.NgForOf,d.MinValidator,d.MaxValidator,d.NumberValueAccessor,d.DefaultValueAccessor,d.NgSelectOption,d["ɵNgSelectMultipleOption"]],pipes:[M.C],encapsulation:2});class Qq extends Qf{constructor(){super(...arguments),this.name="personalOwnership",this.description="personalOwnershipPolicyDesc",this.type=Kr.M.PersonalOwnership,this.component=Yq}}class Yq extends Yf{}Yq.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](Yq)))(t||Yq)}}(),Yq.ɵcmp=o["ɵɵdefineComponent"]({type:Yq,selectors:[["policy-personal-ownership"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:16,vars:7,consts:[["type","warning"],[1,"form-group"],[1,"form-check"],["type","checkbox","id","enabled","name","Enabled",1,"form-check-input",3,"formControl"],["for","enabled",1,"form-check-label"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",0),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n\n"),o["ɵɵelementStart"](4,"div",1),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"div",2),o["ɵɵtext"](7,"\n    "),o["ɵɵelement"](8,"input",3),o["ɵɵtext"](9,"\n    "),o["ɵɵelementStart"](10,"label",4),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n")),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](2,3,"personalOwnershipExemption"),"\n"),o["ɵɵadvance"](7),o["ɵɵproperty"]("formControl",t.enabled),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,5,"turnOn")))},directives:[Pe.O,d.CheckboxControlValueAccessor,d.NgControlStatus,d.FormControlDirective],pipes:[M.C],encapsulation:2});class Zq extends Qf{constructor(){super(...arguments),this.name="requireSso",this.description="requireSsoPolicyDesc",this.type=Kr.M.RequireSso,this.component=Jq}display(e){return e.useSso}}class Jq extends Yf{constructor(e){super(),this.i18nService=e}buildRequest(e){var t;const n=null!==(t=e.get(Kr.M.SingleOrg))&&void 0!==t&&t;if(this.enabled.value&&!n)throw new Error(this.i18nService.t("requireSsoPolicyReqError"));return super.buildRequest(e)}}Jq.ɵfac=function(e){return new(e||Jq)(o["ɵɵdirectiveInject"](k.D))},Jq.ɵcmp=o["ɵɵdefineComponent"]({type:Jq,selectors:[["policy-require-sso"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:21,vars:13,consts:[["type","tip",3,"title"],["type","warning"],[1,"form-group"],[1,"form-check"],["type","checkbox","id","enabled","name","Enabled",1,"form-check-input",3,"formControl"],["for","enabled",1,"form-check-label"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",0),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](4,"\n"),o["ɵɵelementStart"](5,"app-callout",1),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n\n"),o["ɵɵelementStart"](9,"div",2),o["ɵɵtext"](10,"\n  "),o["ɵɵelementStart"](11,"div",3),o["ɵɵtext"](12,"\n    "),o["ɵɵelement"](13,"input",4),o["ɵɵtext"](14,"\n    "),o["ɵɵelementStart"](15,"label",5),o["ɵɵtext"](16),o["ɵɵpipe"](17,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](18,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](20,"\n")),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,5,"prerequisite")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](3,7,"requireSsoPolicyReq"),"\n"),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](7,9,"requireSsoExemption"),"\n"),o["ɵɵadvance"](7),o["ɵɵproperty"]("formControl",t.enabled),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](17,11,"turnOn")))},directives:[Pe.O,d.CheckboxControlValueAccessor,d.NgControlStatus,d.FormControlDirective],pipes:[M.C],encapsulation:2});var Xq=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function e_(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",10),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](2,1,"keyConnectorPolicyRestriction"),"\n"))}class t_ extends Qf{constructor(){super(...arguments),this.name="resetPasswordPolicy",this.description="resetPasswordPolicyDescription",this.type=Kr.M.ResetPassword,this.component=n_}display(e){return e.useResetPassword}}class n_ extends Yf{constructor(e,t){super(),this.formBuilder=e,this.organizationService=t,this.data=this.formBuilder.group({autoEnrollEnabled:!1}),this.showKeyConnectorInfo=!1}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=>super.ngOnInit}});return Xq(this,void 0,void 0,(function*(){e.ngOnInit.call(this);const t=yield this.organizationService.get(this.policyResponse.organizationId);this.showKeyConnectorInfo=t.keyConnectorEnabled}))}}n_.ɵfac=function(e){return new(e||n_)(o["ɵɵdirectiveInject"](d.FormBuilder),o["ɵɵdirectiveInject"](Ii.M))},n_.ɵcmp=o["ɵɵdefineComponent"]({type:n_,selectors:[["policy-reset-password"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:42,vars:21,consts:[["type","info",4,"ngIf"],["type","warning"],[1,"form-group"],[1,"form-check"],["type","checkbox","id","enabled","name","Enabled",1,"form-check-input",3,"formControl"],["for","enabled",1,"form-check-label"],[3,"formGroup"],[1,"mt-4"],["type","checkbox","id","autoEnrollEnabled","name","AutoEnrollEnabled","formControlName","autoEnrollEnabled",1,"form-check-input"],["for","autoEnrollEnabled",1,"form-check-label"],["type","info"]],template:function(e,t){1&e&&(o["ɵɵtemplate"](0,e_,3,3,"app-callout",0),o["ɵɵtext"](1,"\n\n"),o["ɵɵelementStart"](2,"app-callout",1),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n\n"),o["ɵɵelementStart"](6,"div",2),o["ɵɵtext"](7,"\n  "),o["ɵɵelementStart"](8,"div",3),o["ɵɵtext"](9,"\n    "),o["ɵɵelement"](10,"input",4),o["ɵɵtext"](11,"\n    "),o["ɵɵelementStart"](12,"label",5),o["ɵɵtext"](13),o["ɵɵpipe"](14,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](17,"\n\n"),o["ɵɵelementStart"](18,"div",6),o["ɵɵtext"](19,"\n  "),o["ɵɵelementStart"](20,"h3",7),o["ɵɵtext"](21),o["ɵɵpipe"](22,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](23,"\n  "),o["ɵɵelementStart"](24,"p"),o["ɵɵtext"](25),o["ɵɵpipe"](26,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n  "),o["ɵɵelementStart"](28,"app-callout",1),o["ɵɵtext"](29),o["ɵɵpipe"](30,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n  "),o["ɵɵelementStart"](32,"div",3),o["ɵɵtext"](33,"\n    "),o["ɵɵelement"](34,"input",8),o["ɵɵtext"](35,"\n    "),o["ɵɵelementStart"](36,"label",9),o["ɵɵtext"](37),o["ɵɵpipe"](38,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](41,"\n")),2&e&&(o["ɵɵproperty"]("ngIf",t.showKeyConnectorInfo),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](4,9,"resetPasswordPolicyWarning"),"\n"),o["ɵɵadvance"](7),o["ɵɵproperty"]("formControl",t.enabled),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](14,11,"turnOn")),o["ɵɵadvance"](5),o["ɵɵproperty"]("formGroup",t.data),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](22,13,"resetPasswordPolicyAutoEnroll")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](26,15,"resetPasswordPolicyAutoEnrollDescription")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](30,17,"resetPasswordPolicyAutoEnrollWarning"),"\n  "),o["ɵɵadvance"](8),o["ɵɵtextInterpolate1"]("\n      ",o["ɵɵpipeBind1"](38,19,"resetPasswordPolicyAutoEnrollCheckbox"),"\n    "))},directives:[B.NgIf,Pe.O,d.CheckboxControlValueAccessor,d.NgControlStatus,d.FormControlDirective,d.NgControlStatusGroup,d.FormGroupDirective,d.FormControlName],pipes:[M.C],encapsulation:2});class i_ extends Qf{constructor(){super(...arguments),this.name="sendOptions",this.description="sendOptionsPolicyDesc",this.type=Kr.M.SendOptions,this.component=r_}}class r_ extends Yf{constructor(e){super(),this.formBuilder=e,this.data=this.formBuilder.group({disableHideEmail:!1})}}r_.ɵfac=function(e){return new(e||r_)(o["ɵɵdirectiveInject"](d.FormBuilder))},r_.ɵcmp=o["ɵɵdefineComponent"]({type:r_,selectors:[["policy-send-options"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:32,vars:14,consts:[["type","warning"],[1,"form-group"],[1,"form-check"],["type","checkbox","id","enabled","name","Enabled",1,"form-check-input",3,"formControl"],["for","enabled",1,"form-check-label"],[3,"formGroup"],[1,"mt-4"],["type","checkbox","id","disableHideEmail","name","DisableHideEmail","formControlName","disableHideEmail",1,"form-check-input"],["for","disableHideEmail",1,"form-check-label"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",0),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n\n"),o["ɵɵelementStart"](4,"div",1),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"div",2),o["ɵɵtext"](7,"\n    "),o["ɵɵelement"](8,"input",3),o["ɵɵtext"](9,"\n    "),o["ɵɵelementStart"](10,"label",4),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n\n"),o["ɵɵelementStart"](16,"div",5),o["ɵɵtext"](17,"\n  "),o["ɵɵelementStart"](18,"h3",6),o["ɵɵtext"](19),o["ɵɵpipe"](20,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n  "),o["ɵɵelementStart"](22,"div",2),o["ɵɵtext"](23,"\n    "),o["ɵɵelement"](24,"input",7),o["ɵɵtext"](25,"\n    "),o["ɵɵelementStart"](26,"label",8),o["ɵɵtext"](27),o["ɵɵpipe"](28,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](31,"\n")),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](2,6,"sendOptionsExemption"),"\n"),o["ɵɵadvance"](7),o["ɵɵproperty"]("formControl",t.enabled),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,8,"turnOn")),o["ɵɵadvance"](5),o["ɵɵproperty"]("formGroup",t.data),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](20,10,"options")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](28,12,"disableHideEmail")))},directives:[Pe.O,d.CheckboxControlValueAccessor,d.NgControlStatus,d.FormControlDirective,d.NgControlStatusGroup,d.FormGroupDirective,d.FormControlName],pipes:[M.C],encapsulation:2});class o_ extends Qf{constructor(){super(...arguments),this.name="singleOrg",this.description="singleOrgDesc",this.type=Kr.M.SingleOrg,this.component=a_}}class a_ extends Yf{constructor(e){super(),this.i18nService=e}buildRequest(e){var t,n;if(!this.enabled.value){if(null!==(t=e.get(Kr.M.RequireSso))&&void 0!==t&&t)throw new Error(this.i18nService.t("disableRequiredError",this.i18nService.t("requireSso")));if(null!==(n=e.get(Kr.M.MaximumVaultTimeout))&&void 0!==n&&n)throw new Error(this.i18nService.t("disableRequiredError",this.i18nService.t("maximumVaultTimeoutLabel")))}return super.buildRequest(e)}}a_.ɵfac=function(e){return new(e||a_)(o["ɵɵdirectiveInject"](k.D))},a_.ɵcmp=o["ɵɵdefineComponent"]({type:a_,selectors:[["policy-single-org"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:16,vars:7,consts:[["type","warning"],[1,"form-group"],[1,"form-check"],["type","checkbox","id","enabled","name","Enabled",1,"form-check-input",3,"formControl"],["for","enabled",1,"form-check-label"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",0),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n\n"),o["ɵɵelementStart"](4,"div",1),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"div",2),o["ɵɵtext"](7,"\n    "),o["ɵɵelement"](8,"input",3),o["ɵɵtext"](9,"\n    "),o["ɵɵelementStart"](10,"label",4),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n")),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](2,3,"singleOrgPolicyWarning"),"\n"),o["ɵɵadvance"](7),o["ɵɵproperty"]("formControl",t.enabled),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,5,"turnOn")))},directives:[Pe.O,d.CheckboxControlValueAccessor,d.NgControlStatus,d.FormControlDirective],pipes:[M.C],encapsulation:2});class s_ extends Qf{constructor(){super(...arguments),this.name="twoStepLoginPolicyTitle",this.description="twoStepLoginPolicyDesc",this.type=Kr.M.TwoFactorAuthentication,this.component=l_}}class l_ extends Yf{}l_.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](l_)))(t||l_)}}(),l_.ɵcmp=o["ɵɵdefineComponent"]({type:l_,selectors:[["policy-two-factor-authentication"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:16,vars:7,consts:[["type","warning"],[1,"form-group"],[1,"form-check"],["type","checkbox","id","enabled","name","Enabled",1,"form-check-input",3,"formControl"],["for","enabled",1,"form-check-label"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",0),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](3,"\n\n"),o["ɵɵelementStart"](4,"div",1),o["ɵɵtext"](5,"\n  "),o["ɵɵelementStart"](6,"div",2),o["ɵɵtext"](7,"\n    "),o["ɵɵelement"](8,"input",3),o["ɵɵtext"](9,"\n    "),o["ɵɵelementStart"](10,"label",4),o["ɵɵtext"](11),o["ɵɵpipe"](12,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n")),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](2,3,"twoStepLoginPolicyWarning"),"\n"),o["ɵɵadvance"](7),o["ɵɵproperty"]("formControl",t.enabled),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](12,5,"turnOn")))},directives:[Pe.O,d.CheckboxControlValueAccessor,d.NgControlStatus,d.FormControlDirective],pipes:[M.C],encapsulation:2});var d_=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const c_="AppComponent";class p_{constructor(e,t,n,i,r,o,a,s,l,d,c,p,u,m,h,v,g,f,x,y,S,b,w,I,C){this.document=e,this.broadcasterService=t,this.folderService=n,this.settingsService=i,this.syncService=r,this.passwordGenerationService=o,this.cipherService=a,this.authService=s,this.router=l,this.toastrService=d,this.i18nService=c,this.platformUtilsService=p,this.ngZone=u,this.vaultTimeoutService=m,this.cryptoService=h,this.collectionService=v,this.sanitizer=g,this.searchService=f,this.notificationsService=x,this.routerService=y,this.stateService=S,this.eventService=b,this.policyService=w,this.policyListService=I,this.keyConnectorService=C,this.lastActivity=null,this.idleTimer=null,this.isIdle=!1,this.destroy$=new xn.x}ngOnInit(){this.i18nService.locale$.pipe((0,dy.R)(this.destroy$)).subscribe((e=>{this.document.documentElement.lang=e})),this.ngZone.runOutsideAngular((()=>{window.onmousemove=()=>this.recordActivity(),window.onmousedown=()=>this.recordActivity(),window.ontouchstart=()=>this.recordActivity(),window.onclick=()=>this.recordActivity(),window.onscroll=()=>this.recordActivity(),window.onkeypress=()=>this.recordActivity()})),this.broadcasterService.subscribe(c_,(e=>d_(this,void 0,void 0,(function*(){this.ngZone.run((()=>d_(this,void 0,void 0,(function*(){switch(e.command){case"loggedIn":this.notificationsService.updateConnection(!1);break;case"loggedOut":this.routerService.setPreviousUrl(null),this.notificationsService.updateConnection(!1);break;case"unlocked":this.notificationsService.updateConnection(!1);break;case"authBlocked":this.routerService.setPreviousUrl(e.url),this.router.navigate(["/"]);break;case"logout":this.logOut(!!e.expired);break;case"lockVault":yield this.vaultTimeoutService.lock();break;case"locked":this.notificationsService.updateConnection(!1),this.router.navigate(["lock"]);break;case"lockedUrl":this.routerService.setPreviousUrl(e.url);break;case"syncStarted":case"syncCompleted":break;case"upgradeOrganization":(yield this.platformUtilsService.showDialog(this.i18nService.t("upgradeOrganizationDesc"),this.i18nService.t("upgradeOrganization"),this.i18nService.t("upgradeOrganization"),this.i18nService.t("cancel")))&&this.router.navigate(["organizations",e.organizationId,"settings","billing"]);break;case"premiumRequired":(yield this.platformUtilsService.showDialog(this.i18nService.t("premiumRequiredDesc"),this.i18nService.t("premiumRequired"),this.i18nService.t("learnMore"),this.i18nService.t("cancel")))&&this.router.navigate(["settings/premium"]);break;case"emailVerificationRequired":(yield this.platformUtilsService.showDialog(this.i18nService.t("emailVerificationRequiredDesc"),this.i18nService.t("emailVerificationRequired"),this.i18nService.t("learnMore"),this.i18nService.t("cancel")))&&this.platformUtilsService.launchUri("https://bitwarden.com/help/create-bitwarden-account/");break;case"showToast":this.showToast(e);break;case"setFullWidth":this.setFullWidth();break;case"convertAccountToKeyConnector":this.router.navigate(["/remove-password"])}}))))})))),this.router.events.pipe((0,dy.R)(this.destroy$)).subscribe((e=>{if(e instanceof p.NavigationEnd){const e=Array.from(document.querySelectorAll(".modal"));for(const t of e)a(t).modal("hide");null!=document.querySelector(".swal-modal")&&EL().close(void 0)}})),this.policyListService.addPolicies([new s_,new Gq,new t_,new $q,new o_,new Zq,new Qq,new Vq,new i_]),this.setFullWidth()}ngOnDestroy(){this.broadcasterService.unsubscribe(c_),this.destroy$.next(),this.destroy$.unsubscribe()}logOut(e){return d_(this,void 0,void 0,(function*(){yield this.eventService.uploadEvents();const t=yield this.stateService.getUserId();yield Promise.all([this.eventService.clearEvents(),this.syncService.setLastSync(new Date(0)),this.cryptoService.clearKeys(),this.settingsService.clear(t),this.cipherService.clear(t),this.folderService.clear(t),this.collectionService.clear(t),this.policyService.clear(t),this.passwordGenerationService.clear(),this.keyConnectorService.clear()]),this.searchService.clearIndex(),this.authService.logOut((()=>d_(this,void 0,void 0,(function*(){e&&this.platformUtilsService.showToast("warning",this.i18nService.t("loggedOut"),this.i18nService.t("loginExpired")),yield this.stateService.clean({userId:t}),EL().close(),this.router.navigate(["/"])}))))}))}recordActivity(){return d_(this,void 0,void 0,(function*(){const e=(new Date).getTime();null!=this.lastActivity&&e-this.lastActivity<250||(this.lastActivity=e,this.stateService.setLastActive(e),this.isIdle&&(this.isIdle=!1,this.idleStateChanged()),null!=this.idleTimer&&(window.clearTimeout(this.idleTimer),this.idleTimer=null),this.idleTimer=window.setTimeout((()=>{this.isIdle||(this.isIdle=!0,this.idleStateChanged())}),6e5))}))}showToast(e){let t="";const n={};"string"==typeof e.text?t=e.text:1===e.text.length?t=e.text[0]:(e.text.forEach((e=>t+="<p>"+this.sanitizer.sanitize(o.SecurityContext.HTML,e)+"</p>")),n.enableHtml=!0),null!=e.options&&(!0===e.options.trustedHtml&&(n.enableHtml=!0),null!=e.options.timeout&&e.options.timeout>0&&(n.timeOut=e.options.timeout)),this.toastrService.show(t,e.title,n,"toast-"+e.type)}idleStateChanged(){this.isIdle?this.notificationsService.disconnectFromInactivity():this.notificationsService.reconnectFromActivity()}setFullWidth(){return d_(this,void 0,void 0,(function*(){(yield this.stateService.getEnableFullWidth())?document.body.classList.add("full-width"):document.body.classList.remove("full-width")}))}}p_.ɵfac=function(e){return new(e||p_)(o["ɵɵdirectiveInject"](B.DOCUMENT),o["ɵɵdirectiveInject"](Ci),o["ɵɵdirectiveInject"](Rr.G),o["ɵɵdirectiveInject"](QU),o["ɵɵdirectiveInject"](Ft._),o["ɵɵdirectiveInject"](be),o["ɵɵdirectiveInject"](Ur.u),o["ɵɵdirectiveInject"](h),o["ɵɵdirectiveInject"](p.Router),o["ɵɵdirectiveInject"](DU.ToastrService),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](o.NgZone),o["ɵɵdirectiveInject"](oe),o["ɵɵdirectiveInject"](H.$),o["ɵɵdirectiveInject"](Jr.a),o["ɵɵdirectiveInject"](r.DomSanitizer),o["ɵɵdirectiveInject"](za),o["ɵɵdirectiveInject"](WU),o["ɵɵdirectiveInject"](ce),o["ɵɵdirectiveInject"](P.b),o["ɵɵdirectiveInject"](Xr.P),o["ɵɵdirectiveInject"](j.d),o["ɵɵdirectiveInject"](nx),o["ɵɵdirectiveInject"](g.J))},p_.ɵcmp=o["ɵɵdefineComponent"]({type:p_,selectors:[["app-root"]],decls:2,vars:0,template:function(e,t){1&e&&(o["ɵɵelement"](0,"router-outlet"),o["ɵɵtext"](1,"\n"))},directives:[p.RouterOutlet],encapsulation:2});class u_ extends Qf{constructor(){super(...arguments),this.name="disablePersonalVaultExport",this.description="disablePersonalVaultExportDesc",this.type=Kr.M.DisablePersonalVaultExport,this.component=m_}}class m_ extends Yf{}m_.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](m_)))(t||m_)}}(),m_.ɵcmp=o["ɵɵdefineComponent"]({type:m_,selectors:[["policy-disable-personal-vault-export"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:12,vars:4,consts:[[1,"form-group"],[1,"form-check"],["type","checkbox","id","enabled","name","Enabled",1,"form-check-input",3,"formControl"],["for","enabled",1,"form-check-label"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelement"](4,"input",2),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"label",3),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](10,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵproperty"]("formControl",t.enabled),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,2,"turnOn")))},directives:[d.CheckboxControlValueAccessor,d.NgControlStatus,d.FormControlDirective],pipes:[M.C],encapsulation:2});class h_ extends Qf{constructor(){super(...arguments),this.name="maximumVaultTimeout",this.description="maximumVaultTimeoutDesc",this.type=Kr.M.MaximumVaultTimeout,this.component=v_}}class v_ extends Yf{constructor(e,t){super(),this.formBuilder=e,this.i18nService=t,this.data=this.formBuilder.group({hours:[null],minutes:[null]})}loadData(){var e;const t=null===(e=this.policyResponse.data)||void 0===e?void 0:e.minutes;null!=t&&this.data.patchValue({hours:Math.floor(t/60),minutes:t%60})}buildRequestData(){return null==this.data.value.hours&&null==this.data.value.minutes?null:{minutes:60*this.data.value.hours+this.data.value.minutes}}buildRequest(e){var t;const n=null!==(t=e.get(Kr.M.SingleOrg))&&void 0!==t&&t;if(this.enabled.value&&!n)throw new Error(this.i18nService.t("requireSsoPolicyReqError"));const i=this.buildRequestData();if(null==(null==i?void 0:i.minutes)||(null==i?void 0:i.minutes)<=0)throw new Error(this.i18nService.t("invalidMaximumVaultTimeout"));return super.buildRequest(e)}}v_.ɵfac=function(e){return new(e||v_)(o["ɵɵdirectiveInject"](d.FormBuilder),o["ɵɵdirectiveInject"](k.D))},v_.ɵcmp=o["ɵɵdefineComponent"]({type:v_,selectors:[["policy-maximum-timeout"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:48,vars:20,consts:[["type","tip",3,"title"],[1,"form-group"],[1,"form-check"],["type","checkbox","id","enabled","name","Enabled",1,"form-check-input",3,"formControl"],["for","enabled",1,"form-check-label"],[3,"formGroup"],["for","hours"],[1,"row"],[1,"col-6"],["id","hours","type","number","min","0","name","hours","formControlName","hours",1,"form-control"],["id","minutes","type","number","min","0","max","59","name","minutes","formControlName","minutes",1,"form-control"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"app-callout",0),o["ɵɵpipe"](1,"i18n"),o["ɵɵtext"](2),o["ɵɵpipe"](3,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](4,"\n\n"),o["ɵɵelementStart"](5,"div",1),o["ɵɵtext"](6,"\n  "),o["ɵɵelementStart"](7,"div",2),o["ɵɵtext"](8,"\n    "),o["ɵɵelement"](9,"input",3),o["ɵɵtext"](10,"\n    "),o["ɵɵelementStart"](11,"label",4),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](16,"\n\n"),o["ɵɵelementStart"](17,"div",5),o["ɵɵtext"](18,"\n  "),o["ɵɵelementStart"](19,"div",1),o["ɵɵtext"](20,"\n    "),o["ɵɵelementStart"](21,"label",6),o["ɵɵtext"](22),o["ɵɵpipe"](23,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](24,"\n    "),o["ɵɵelementStart"](25,"div",7),o["ɵɵtext"](26,"\n      "),o["ɵɵelementStart"](27,"div",8),o["ɵɵtext"](28,"\n        "),o["ɵɵelement"](29,"input",9),o["ɵɵtext"](30,"\n        "),o["ɵɵelementStart"](31,"small"),o["ɵɵtext"](32),o["ɵɵpipe"](33,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](34,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](35,"\n      "),o["ɵɵelementStart"](36,"div",8),o["ɵɵtext"](37,"\n        "),o["ɵɵelement"](38,"input",10),o["ɵɵtext"](39,"\n        "),o["ɵɵelementStart"](40,"small"),o["ɵɵtext"](41),o["ɵɵpipe"](42,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](43,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](44,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n")),2&e&&(o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,8,"prerequisite")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n  ",o["ɵɵpipeBind1"](3,10,"requireSsoPolicyReq"),"\n"),o["ɵɵadvance"](7),o["ɵɵproperty"]("formControl",t.enabled),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](13,12,"turnOn")),o["ɵɵadvance"](5),o["ɵɵproperty"]("formGroup",t.data),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](23,14,"maximumVaultTimeoutLabel")),o["ɵɵadvance"](10),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](33,16,"hours")),o["ɵɵadvance"](9),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](42,18,"minutes")))},directives:[Pe.O,d.CheckboxControlValueAccessor,d.NgControlStatus,d.FormControlDirective,d.NgControlStatusGroup,d.FormGroupDirective,d.MinValidator,d.NumberValueAccessor,d.DefaultValueAccessor,d.FormControlName,d.MaxValidator],pipes:[M.C],encapsulation:2});class g_ extends p_{ngOnInit(){super.ngOnInit(),this.policyListService.addPolicies([new h_,new u_])}}function f_(e){return e.dirty?d.Validators.required(e):null}g_.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](g_)))(t||g_)}}(),g_.ɵcmp=o["ɵɵdefineComponent"]({type:g_,selectors:[["app-root"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:2,vars:0,template:function(e,t){1&e&&(o["ɵɵelement"](0,"router-outlet"),o["ɵɵtext"](1,"\n"))},directives:[p.RouterOutlet],encapsulation:2});class x_{constructor(){this.enabled=!1}}class y_ extends class{}{constructor(e){super(),null!=e&&(this.configType=e.configType,this.keyConnectorEnabled=e.keyConnectorEnabled,this.keyConnectorUrl=e.keyConnectorUrl,this.configType===NU.OpenIdConnect?this.openId={authority:e.authority,clientId:e.clientId,clientSecret:e.clientSecret,metadataAddress:e.metadataAddress,redirectBehavior:e.redirectBehavior,getClaimsFromUserInfoEndpoint:e.getClaimsFromUserInfoEndpoint,additionalScopes:e.additionalScopes,additionalUserIdClaimTypes:e.additionalUserIdClaimTypes,additionalEmailClaimTypes:e.additionalEmailClaimTypes,additionalNameClaimTypes:e.additionalNameClaimTypes,acrValues:e.acrValues,expectedReturnAcrValue:e.expectedReturnAcrValue}:this.configType===NU.Saml2&&(this.saml={spNameIdFormat:e.spNameIdFormat,spOutboundSigningAlgorithm:e.spOutboundSigningAlgorithm,spSigningBehavior:e.spSigningBehavior,spMinIncomingSigningAlgorithm:e.spMinIncomingSigningAlgorithm,spWantAssertionsSigned:e.spWantAssertionsSigned,spValidateCertificates:e.spValidateCertificates,idpEntityId:e.idpEntityId,idpBindingType:e.idpBindingType,idpSingleSignOnServiceUrl:e.idpSingleSignOnServiceUrl,idpSingleLogoutServiceUrl:e.idpSingleLogoutServiceUrl,idpX509PublicCert:e.idpX509PublicCert,idpOutboundSigningAlgorithm:e.idpOutboundSigningAlgorithm,idpAllowUnsolicitedAuthnResponse:e.idpAllowUnsolicitedAuthnResponse,idpWantAuthnRequestsSigned:e.idpWantAuthnRequestsSigned,idpAllowOutboundLogoutRequests:null==e.idpDisableOutboundLogoutRequests?null:!e.idpDisableOutboundLogoutRequests}))}}class S_{constructor(e){this.controlDir=e,this.internalControl=new d.FormControl(""),this.onValueChangesInternal=e=>this.onChange(e),this.controlDir.valueAccessor=this}get describedById(){return this.showDescribedBy?this.controlId+"Desc":null}get showDescribedBy(){return null!=this.helperText||this.controlDir.control.hasError("required")}get isRequired(){return this.controlDir.control.hasValidator(d.Validators.required)||this.controlDir.control.hasValidator(f_)}ngOnInit(){this.internalControl.valueChanges.subscribe(this.onValueChangesInternal)}onBlurInternal(){this.onTouched()}writeValue(e){this.internalControl.setValue(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.internalControl.disable():this.internalControl.enable()}}function b_(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",5),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵattribute"]("id",e.describedById),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](e.helperText)}}S_.ɵfac=function(e){return new(e||S_)(o["ɵɵdirectiveInject"](d.NgControl,2))},S_.ɵdir=o["ɵɵdefineDirective"]({type:S_,inputs:{label:"label",controlId:"controlId",helperText:"helperText"}});class w_ extends S_{}function I_(e,t){1&e&&(o["ɵɵelementStart"](0,"small",4),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("(",o["ɵɵpipeBind1"](2,1,"required"),")"))}function C_(e,t){if(1&e&&(o["ɵɵelementStart"](0,"option",5),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=t.$implicit;o["ɵɵpropertyInterpolate"]("disabled",e.disabled),o["ɵɵproperty"]("ngValue",e.value),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n      ",e.name,"\n    ")}}w_.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](w_)))(t||w_)}}(),w_.ɵcmp=o["ɵɵdefineComponent"]({type:w_,selectors:[["app-input-checkbox"]],features:[o["ɵɵInheritDefinitionFeature"]],decls:13,vars:6,consts:[[1,"form-group"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"formControl","blur"],[1,"form-check-label"],["class","form-text text-muted",4,"ngIf"],[1,"form-text","text-muted"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"div",1),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"input",2),o["ɵɵlistener"]("blur",(function(){return t.onBlurInternal()})),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n    "),o["ɵɵelementStart"](6,"label",3),o["ɵɵtext"](7),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](9,"\n  "),o["ɵɵtemplate"](10,b_,2,2,"small",4),o["ɵɵtext"](11,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n")),2&e&&(o["ɵɵadvance"](4),o["ɵɵproperty"]("formControl",t.internalControl),o["ɵɵattribute"]("id",t.controlId)("aria-describedby",t.describedById),o["ɵɵadvance"](2),o["ɵɵattribute"]("for",t.controlId),o["ɵɵadvance"](1),o["ɵɵtextInterpolate"](t.label),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.showDescribedBy))},directives:[d.CheckboxControlValueAccessor,d.NgControlStatus,d.FormControlDirective,B.NgIf],encapsulation:2});class E_ extends S_{}E_.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](E_)))(t||E_)}}(),E_.ɵcmp=o["ɵɵdefineComponent"]({type:E_,selectors:[["app-select"]],inputs:{selectOptions:"selectOptions"},features:[o["ɵɵInheritDefinitionFeature"]],decls:13,vars:7,consts:[[1,"form-group"],["class","text-muted form-text d-inline",4,"ngIf"],[1,"form-control",3,"formControl","blur"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[1,"text-muted","form-text","d-inline"],[3,"ngValue","disabled"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"label"),o["ɵɵtext"](3),o["ɵɵtemplate"](4,I_,3,3,"small",1),o["ɵɵtext"](5,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n  "),o["ɵɵelementStart"](7,"select",2),o["ɵɵlistener"]("blur",(function(){return t.onBlurInternal()})),o["ɵɵtext"](8,"\n    "),o["ɵɵtemplate"](9,C_,2,3,"option",3),o["ɵɵtext"](10,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](12,"\n")),2&e&&(o["ɵɵadvance"](2),o["ɵɵattribute"]("for",t.controlId),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",t.label,"\n    "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",t.isRequired),o["ɵɵadvance"](3),o["ɵɵproperty"]("formControl",t.internalControl),o["ɵɵattribute"]("id",t.controlId)("aria-invalid",t.controlDir.control.invalid),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngForOf",t.selectOptions))},directives:[B.NgIf,d.SelectControlValueAccessor,d.NgControlStatus,d.FormControlDirective,B.NgForOf,d.NgSelectOption,d["ɵNgSelectMultipleOption"]],pipes:[M.C],encapsulation:2});class k_{constructor(e){this.el=e}onInput(){this.el.nativeElement.value=this.el.nativeElement.value.replace(/ /g,"")}}k_.ɵfac=function(e){return new(e||k_)(o["ɵɵdirectiveInject"](o.ElementRef))},k_.ɵdir=o["ɵɵdefineDirective"]({type:k_,selectors:[["input","appInputStripSpaces",""]],hostBindings:function(e,t){1&e&&o["ɵɵlistener"]("input",(function(){return t.onInput()}))}});class P_{constructor(e,t){this.el=e,this.formControlDirective=t}ngOnInit(){this.sub=this.formControlDirective.control.statusChanges.subscribe((e=>{"INVALID"===e?this.el.nativeElement.setAttribute("aria-invalid","true"):"VALID"===e&&this.el.nativeElement.setAttribute("aria-invalid","false")}))}ngOnDestroy(){var e;null===(e=this.sub)||void 0===e||e.unsubscribe()}}function A_(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",4),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"button",5),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]();return t.launchUri(t.controlValue)})),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n        "),o["ɵɵelement"](5,"i",6),o["ɵɵtext"](6,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](3,1,"launch")))}function O_(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",4),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"button",5),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);const t=o["ɵɵnextContext"]();return t.copy(t.controlValue)})),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n        "),o["ɵɵelement"](5,"i",7),o["ɵɵtext"](6,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n    "),o["ɵɵelementEnd"]()}2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](3,1,"copyValue")))}P_.ɵfac=function(e){return new(e||P_)(o["ɵɵdirectiveInject"](o.ElementRef),o["ɵɵdirectiveInject"](d.NgControl))},P_.ɵdir=o["ɵɵdefineDirective"]({type:P_,selectors:[["","appA11yInvalid",""]]});class T_{constructor(e){this.platformUtilsService=e,this.showCopy=!0,this.showLaunch=!1}copy(e){this.platformUtilsService.copyToClipboard(e)}launchUri(e){this.platformUtilsService.launchUri(e)}}T_.ɵfac=function(e){return new(e||T_)(o["ɵɵdirectiveInject"](E.P))},T_.ɵcmp=o["ɵɵdefineComponent"]({type:T_,selectors:[["app-input-text-readonly"]],inputs:{controlValue:"controlValue",label:"label",showCopy:"showCopy",showLaunch:"showLaunch"},decls:15,vars:4,consts:[[1,"form-group"],[1,"input-group"],["readonly","",1,"form-control",3,"value"],["class","input-group-append",4,"ngIf"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"appA11yTitle","click"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-external-link"],["aria-hidden","true",1,"bwi","bwi-lg","bwi-clone"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"label"),o["ɵɵtext"](3),o["ɵɵelementEnd"](),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"div",1),o["ɵɵtext"](6,"\n    "),o["ɵɵelement"](7,"input",2),o["ɵɵtext"](8,"\n    "),o["ɵɵtemplate"](9,A_,8,3,"div",3),o["ɵɵtext"](10,"\n    "),o["ɵɵtemplate"](11,O_,8,3,"div",3),o["ɵɵtext"](12,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](13,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](t.label),o["ɵɵadvance"](4),o["ɵɵproperty"]("value",t.controlValue),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.showLaunch),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.showCopy))},directives:[B.NgIf,pe],pipes:[M.C],encapsulation:2});function B_(e,t){1&e&&(o["ɵɵelementStart"](0,"small",4),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("(",o["ɵɵpipeBind1"](2,1,"required"),")"))}function M_(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",7),o["ɵɵtext"](1),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n      ",e.helperText,"\n    ")}}function D_(e,t){if(1&e&&(o["ɵɵelementStart"](0,"small",8),o["ɵɵtext"](1,"\n      "),o["ɵɵelement"](2,"i",9),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"span",10),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](6,2,"error"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n      ",e.controlDir.control.hasError(e.helperTextSameAsError)?e.helperText:o["ɵɵpipeBind2"](8,4,"fieldRequiredError",e.label),"\n    ")}}function F_(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div"),o["ɵɵtext"](1,"\n    "),o["ɵɵtemplate"](2,M_,2,1,"small",5),o["ɵɵtext"](3,"\n    "),o["ɵɵtemplate"](4,D_,9,7,"small",6),o["ɵɵtext"](5,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"]();o["ɵɵattribute"]("id",e.describedById),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",null!=e.helperText&&!e.controlDir.control.hasError(e.helperTextSameAsError)),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.controlDir.control.hasError("required"))}}class R_ extends S_{constructor(){super(...arguments),this.stripSpaces=!1,this.transformValue=null,this.onValueChangesInternal=e=>{let t=e;null!=this.transformValue&&(t=this.transformValue(e),this.internalControl.setValue(t,{emitEvent:!1})),this.onChange(t)}}ngOnInit(){super.ngOnInit(),this.stripSpaces&&(this.transformValue=this.doStripSpaces)}writeValue(e){this.internalControl.setValue(null==e?"":e)}onValueChangeInternal(e){let t=e;null!=this.transformValue&&(t=this.transformValue(e),this.internalControl.setValue(t,{emitEvent:!1}))}doStripSpaces(e){return e.replace(/ /g,"")}}R_.ɵfac=function(){let e;return function(t){return(e||(e=o["ɵɵgetInheritedFactory"](R_)))(t||R_)}}(),R_.ɵcmp=o["ɵɵdefineComponent"]({type:R_,selectors:[["app-input-text","label","","controlId",""]],inputs:{helperTextSameAsError:"helperTextSameAsError",requiredErrorMessage:"requiredErrorMessage",stripSpaces:"stripSpaces"},features:[o["ɵɵInheritDefinitionFeature"]],attrs:["label","","controlId",""],decls:12,vars:8,consts:[[1,"form-group"],["class","text-muted form-text d-inline",4,"ngIf"],[1,"form-control",3,"formControl","blur"],[4,"ngIf"],[1,"text-muted","form-text","d-inline"],["class","form-text text-muted",4,"ngIf"],["class","error-inline","role","alert",4,"ngIf"],[1,"form-text","text-muted"],["role","alert",1,"error-inline"],["aria-hidden","true",1,"bwi","bwi-exclamation-circle"],[1,"sr-only"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"label"),o["ɵɵtext"](3),o["ɵɵtemplate"](4,B_,3,3,"small",1),o["ɵɵtext"](5,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n  "),o["ɵɵelementStart"](7,"input",2),o["ɵɵlistener"]("blur",(function(){return t.onBlurInternal()})),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n  "),o["ɵɵtemplate"](9,F_,6,3,"div",3),o["ɵɵtext"](10,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](11,"\n")),2&e&&(o["ɵɵadvance"](2),o["ɵɵattribute"]("for",t.controlId),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n    ",t.label,"\n    "),o["ɵɵadvance"](1),o["ɵɵproperty"]("ngIf",t.isRequired),o["ɵɵadvance"](3),o["ɵɵproperty"]("formControl",t.internalControl),o["ɵɵattribute"]("id",t.controlId)("aria-describedby",t.describedById)("aria-invalid",t.controlDir.control.invalid),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.showDescribedBy))},directives:[B.NgIf,d.DefaultValueAccessor,d.NgControlStatus,d.FormControlDirective],pipes:[M.C],encapsulation:2});var U_=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function z_(e,t){1&e&&(o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n  "),o["ɵɵelement"](2,"i",3),o["ɵɵpipe"](3,"i18n"),o["ɵɵtext"](4,"\n  "),o["ɵɵelementStart"](5,"span",4),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n"),o["ɵɵelementContainerEnd"]()),2&e&&(o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](3,2,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,4,"loading")))}function N_(e,t){1&e&&(o["ɵɵelement"](0,"i",21),o["ɵɵpipe"](1,"i18n")),2&e&&o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](1,1,"loading"))}function V_(e,t){1&e&&(o["ɵɵelementStart"](0,"span"),o["ɵɵtext"](1),o["ɵɵpipe"](2,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n                ",o["ɵɵpipeBind1"](2,1,"keyConnectorTest"),"\n              "))}function H_(e,t){1&e&&(o["ɵɵelementStart"](0,"small",35),o["ɵɵtext"](1,"\n            "),o["ɵɵelement"](2,"i",36),o["ɵɵtext"](3,"\n            "),o["ɵɵelementStart"](4,"span",4),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](6,2,"error"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n            ",o["ɵɵpipeBind1"](8,4,"keyConnectorTestFail"),"\n          "))}function j_(e,t){1&e&&(o["ɵɵtext"](0,"\n            "),o["ɵɵelementStart"](1,"small",37),o["ɵɵtext"](2,"\n              "),o["ɵɵelement"](3,"i",38),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n          ")),2&e&&(o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n              ",o["ɵɵpipeBind1"](5,1,"keyConnectorTestSuccess"),"\n            "))}function L_(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",32),o["ɵɵtext"](1,"\n          "),o["ɵɵtemplate"](2,H_,9,6,"small",33),o["ɵɵtext"](3,"\n          "),o["ɵɵtemplate"](4,j_,7,3,"ng-template",null,34,o["ɵɵtemplateRefExtractor"]),o["ɵɵtext"](6,"\n        "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵreference"](5),t=o["ɵɵnextContext"](3);o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",t.keyConnectorUrl.hasError("invalidUrl"))("ngIfElse",e)}}function K_(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementContainerStart"](0),o["ɵɵtext"](1,"\n      "),o["ɵɵelementStart"](2,"app-callout",23),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n\n      "),o["ɵɵelementStart"](6,"div",9),o["ɵɵtext"](7,"\n        "),o["ɵɵelementStart"](8,"label",24),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelementStart"](11,"small",25),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](15,"\n        "),o["ɵɵelementStart"](16,"div",26),o["ɵɵtext"](17,"\n          "),o["ɵɵelementStart"](18,"input",27),o["ɵɵlistener"]("change",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).haveTestedKeyConnector=!1})),o["ɵɵelementEnd"](),o["ɵɵtext"](19,"\n          "),o["ɵɵelementStart"](20,"div",28),o["ɵɵtext"](21,"\n            "),o["ɵɵelementStart"](22,"button",29),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).validateKeyConnectorUrl()})),o["ɵɵtext"](23,"\n              "),o["ɵɵtemplate"](24,N_,2,3,"i",30),o["ɵɵtext"](25,"\n              "),o["ɵɵtemplate"](26,V_,3,3,"span",1),o["ɵɵtext"](27,"\n            "),o["ɵɵelementEnd"](),o["ɵɵtext"](28,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n        "),o["ɵɵtemplate"](31,L_,7,2,"div",31),o["ɵɵtext"](32,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n    "),o["ɵɵelementContainerEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵadvance"](2),o["ɵɵproperty"]("useAlertRole",!0),o["ɵɵadvance"](1),o["ɵɵtextInterpolate1"]("\n        ",o["ɵɵpipeBind1"](4,8,"keyConnectorWarning"),"\n      "),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](10,10,"keyConnectorUrl"),"\n          "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("(",o["ɵɵpipeBind1"](13,12,"required"),")"),o["ɵɵadvance"](10),o["ɵɵproperty"]("disabled",!e.enableTestKeyConnector),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",e.keyConnectorUrl.pending),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!e.keyConnectorUrl.pending),o["ɵɵadvance"](5),o["ɵɵproperty"]("ngIf",e.haveTestedKeyConnector)}}const G_=function(e,t){return{"bwi-angle-down":e,"bwi-chevron-up":t}};function q_(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"div",39),o["ɵɵtext"](1,"\n    "),o["ɵɵelementStart"](2,"div",40),o["ɵɵtext"](3,"\n      "),o["ɵɵelementStart"](4,"h2",41),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7,"\n\n      "),o["ɵɵelement"](8,"app-input-text-readonly",42),o["ɵɵpipe"](9,"i18n"),o["ɵɵtext"](10,"\n\n      "),o["ɵɵelement"](11,"app-input-text-readonly",42),o["ɵɵpipe"](12,"i18n"),o["ɵɵtext"](13,"\n\n      "),o["ɵɵelement"](14,"app-input-text",43),o["ɵɵpipe"](15,"i18n"),o["ɵɵtext"](16,"\n\n      "),o["ɵɵelement"](17,"app-input-text",44),o["ɵɵpipe"](18,"i18n"),o["ɵɵtext"](19,"\n\n      "),o["ɵɵelement"](20,"app-input-text",45),o["ɵɵpipe"](21,"i18n"),o["ɵɵtext"](22,"\n\n      "),o["ɵɵelement"](23,"app-input-text",46),o["ɵɵpipe"](24,"i18n"),o["ɵɵpipe"](25,"i18n"),o["ɵɵtext"](26,"\n\n      "),o["ɵɵelementStart"](27,"app-select",47),o["ɵɵpipe"](28,"i18n"),o["ɵɵtext"](29,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](30,"\n\n      "),o["ɵɵelement"](31,"app-input-checkbox",48),o["ɵɵpipe"](32,"i18n"),o["ɵɵtext"](33,"\n\n      "),o["ɵɵtext"](34,"\n      "),o["ɵɵelementStart"](35,"div",49),o["ɵɵlistener"]("click",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"](2).toggleOpenIdCustomizations()})),o["ɵɵtext"](36,"\n        "),o["ɵɵelementStart"](37,"h3",50),o["ɵɵtext"](38),o["ɵɵpipe"](39,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n        "),o["ɵɵelementStart"](41,"button",51),o["ɵɵtext"](42,"\n          "),o["ɵɵelement"](43,"i",52),o["ɵɵtext"](44,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](45,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](46,"\n      "),o["ɵɵelementStart"](47,"div",53),o["ɵɵtext"](48,"\n        "),o["ɵɵelement"](49,"app-input-text",54),o["ɵɵpipe"](50,"i18n"),o["ɵɵpipe"](51,"i18n"),o["ɵɵtext"](52,"\n\n        "),o["ɵɵelement"](53,"app-input-text",55),o["ɵɵpipe"](54,"i18n"),o["ɵɵpipe"](55,"i18n"),o["ɵɵtext"](56,"\n\n        "),o["ɵɵelement"](57,"app-input-text",56),o["ɵɵpipe"](58,"i18n"),o["ɵɵpipe"](59,"i18n"),o["ɵɵtext"](60,"\n\n        "),o["ɵɵelement"](61,"app-input-text",57),o["ɵɵpipe"](62,"i18n"),o["ɵɵpipe"](63,"i18n"),o["ɵɵtext"](64,"\n\n        "),o["ɵɵelement"](65,"app-input-text",58),o["ɵɵpipe"](66,"i18n"),o["ɵɵtext"](67,"\n\n        "),o["ɵɵelement"](68,"app-input-text",59),o["ɵɵpipe"](69,"i18n"),o["ɵɵtext"](70,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](71,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](72,"\n  "),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵnextContext"](2);o["ɵɵproperty"]("formGroup",e.openIdForm),o["ɵɵadvance"](5),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](6,32,"openIdConnectConfig")),o["ɵɵadvance"](3),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](9,34,"callbackPath"))("controlValue",e.callbackPath),o["ɵɵadvance"](3),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](12,36,"signedOutCallbackPath"))("controlValue",e.signedOutCallbackPath),o["ɵɵadvance"](3),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](15,38,"authority"))("stripSpaces",!0),o["ɵɵadvance"](3),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](18,40,"clientId"))("stripSpaces",!0),o["ɵɵadvance"](3),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](21,42,"clientSecret"))("stripSpaces",!0),o["ɵɵadvance"](3),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](24,44,"metadataAddress"))("stripSpaces",!0)("helperText",o["ɵɵpipeBind1"](25,46,"openIdAuthorityRequired")),o["ɵɵadvance"](4),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](28,48,"oidcRedirectBehavior"))("selectOptions",e.connectRedirectOptions),o["ɵɵadvance"](4),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](32,50,"getClaimsFromUserInfoEndpoint")),o["ɵɵadvance"](7),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](39,52,"openIdOptionalCustomizations"),"\n        "),o["ɵɵadvance"](3),o["ɵɵattribute"]("aria-expanded",e.showOpenIdCustomizations),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngClass",o["ɵɵpureFunction2"](74,G_,!e.showOpenIdCustomizations,e.showOpenIdCustomizations)),o["ɵɵadvance"](4),o["ɵɵproperty"]("hidden",!e.showOpenIdCustomizations),o["ɵɵadvance"](2),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](50,54,"additionalScopes"))("helperText",o["ɵɵpipeBind1"](51,56,"separateMultipleWithComma")),o["ɵɵadvance"](4),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](54,58,"additionalUserIdClaimTypes"))("helperText",o["ɵɵpipeBind1"](55,60,"separateMultipleWithComma")),o["ɵɵadvance"](4),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](58,62,"additionalEmailClaimTypes"))("helperText",o["ɵɵpipeBind1"](59,64,"separateMultipleWithComma")),o["ɵɵadvance"](4),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](62,66,"additionalNameClaimTypes"))("helperText",o["ɵɵpipeBind1"](63,68,"separateMultipleWithComma")),o["ɵɵadvance"](4),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](66,70,"acrValues")),o["ɵɵadvance"](3),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](69,72,"expectedReturnAcrValue"))}}function __(e,t){1&e&&(o["ɵɵelementStart"](0,"small",77),o["ɵɵtext"](1,"\n          "),o["ɵɵelement"](2,"i",36),o["ɵɵtext"](3,"\n          "),o["ɵɵelementStart"](4,"span",4),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵpipe"](9,"i18n"),o["ɵɵelementEnd"]()),2&e&&(o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](6,2,"error"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind2"](8,4,"fieldRequiredError",o["ɵɵpipeBind1"](9,7,"idpX509PublicCert")),"\n        "))}function $_(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",39),o["ɵɵtext"](1,"\n    "),o["ɵɵtext"](2,"\n    "),o["ɵɵelementStart"](3,"div",40),o["ɵɵtext"](4,"\n      "),o["ɵɵelementStart"](5,"h2",41),o["ɵɵtext"](6),o["ɵɵpipe"](7,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](8,"\n\n      "),o["ɵɵelement"](9,"app-input-text-readonly",42),o["ɵɵpipe"](10,"i18n"),o["ɵɵtext"](11,"\n\n      "),o["ɵɵelement"](12,"app-input-text-readonly",60),o["ɵɵpipe"](13,"i18n"),o["ɵɵtext"](14,"\n\n      "),o["ɵɵelement"](15,"app-input-text-readonly",42),o["ɵɵpipe"](16,"i18n"),o["ɵɵtext"](17,"\n\n      "),o["ɵɵelementStart"](18,"app-select",61),o["ɵɵpipe"](19,"i18n"),o["ɵɵtext"](20,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](21,"\n\n      "),o["ɵɵelementStart"](22,"app-select",62),o["ɵɵpipe"](23,"i18n"),o["ɵɵtext"](24,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](25,"\n\n      "),o["ɵɵelementStart"](26,"app-select",63),o["ɵɵpipe"](27,"i18n"),o["ɵɵtext"](28,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](29,"\n\n      "),o["ɵɵelementStart"](30,"app-select",64),o["ɵɵpipe"](31,"i18n"),o["ɵɵtext"](32,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](33,"\n\n      "),o["ɵɵelement"](34,"app-input-checkbox",65),o["ɵɵpipe"](35,"i18n"),o["ɵɵtext"](36,"\n\n      "),o["ɵɵelement"](37,"app-input-checkbox",66),o["ɵɵpipe"](38,"i18n"),o["ɵɵtext"](39,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n\n    "),o["ɵɵtext"](41,"\n    "),o["ɵɵelementStart"](42,"div",40),o["ɵɵtext"](43,"\n      "),o["ɵɵelementStart"](44,"h2",41),o["ɵɵtext"](45),o["ɵɵpipe"](46,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](47,"\n\n      "),o["ɵɵelement"](48,"app-input-text",67),o["ɵɵpipe"](49,"i18n"),o["ɵɵtext"](50,"\n\n      "),o["ɵɵelementStart"](51,"app-select",68),o["ɵɵpipe"](52,"i18n"),o["ɵɵtext"](53,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](54,"\n\n      "),o["ɵɵelement"](55,"app-input-text",69),o["ɵɵpipe"](56,"i18n"),o["ɵɵpipe"](57,"i18n"),o["ɵɵtext"](58,"\n\n      "),o["ɵɵelement"](59,"app-input-text",70),o["ɵɵpipe"](60,"i18n"),o["ɵɵtext"](61,"\n\n      "),o["ɵɵelementStart"](62,"div",9),o["ɵɵtext"](63,"\n        "),o["ɵɵelementStart"](64,"label",71),o["ɵɵtext"](65),o["ɵɵpipe"](66,"i18n"),o["ɵɵelementStart"](67,"small",25),o["ɵɵtext"](68),o["ɵɵpipe"](69,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](70,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](71,"\n        "),o["ɵɵelement"](72,"textarea",72),o["ɵɵtext"](73,"\n        "),o["ɵɵtemplate"](74,__,10,9,"small",73),o["ɵɵtext"](75,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](76,"\n\n      "),o["ɵɵelementStart"](77,"app-select",74),o["ɵɵpipe"](78,"i18n"),o["ɵɵtext"](79,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](80,"\n\n      "),o["ɵɵtext"](81,"\n      "),o["ɵɵtext"](82,"\n\n      "),o["ɵɵelement"](83,"app-input-checkbox",75),o["ɵɵpipe"](84,"i18n"),o["ɵɵtext"](85,"\n\n      "),o["ɵɵelement"](86,"app-input-checkbox",76),o["ɵɵpipe"](87,"i18n"),o["ɵɵtext"](88,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](89,"\n  "),o["ɵɵelementEnd"]()),2&e){const e=o["ɵɵnextContext"](2);o["ɵɵproperty"]("formGroup",e.samlForm),o["ɵɵadvance"](6),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](7,35,"samlSpConfig")),o["ɵɵadvance"](3),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](10,37,"spEntityId"))("controlValue",e.spEntityId),o["ɵɵadvance"](3),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](13,39,"spMetadataUrl"))("controlValue",e.spMetadataUrl)("showLaunch",!0),o["ɵɵadvance"](3),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](16,41,"spAcsUrl"))("controlValue",e.spAcsUrl),o["ɵɵadvance"](3),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](19,43,"spNameIdFormat"))("selectOptions",e.saml2NameIdFormatOptions),o["ɵɵadvance"](4),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](23,45,"spOutboundSigningAlgorithm"))("selectOptions",e.samlSigningAlgorithmOptions),o["ɵɵadvance"](4),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](27,47,"spSigningBehavior"))("selectOptions",e.saml2SigningBehaviourOptions),o["ɵɵadvance"](4),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](31,49,"spMinIncomingSigningAlgorithm"))("selectOptions",e.samlSigningAlgorithmOptions),o["ɵɵadvance"](4),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](35,51,"spWantAssertionsSigned")),o["ɵɵadvance"](3),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](38,53,"spValidateCertificates")),o["ɵɵadvance"](8),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](46,55,"samlIdpConfig")),o["ɵɵadvance"](3),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](49,57,"idpEntityId")),o["ɵɵadvance"](3),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](52,59,"idpBindingType"))("selectOptions",e.saml2BindingTypeOptions),o["ɵɵadvance"](4),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](56,61,"idpSingleSignOnServiceUrl"))("helperText",o["ɵɵpipeBind1"](57,63,"idpSingleSignOnServiceUrlRequired"))("stripSpaces",!0),o["ɵɵadvance"](4),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](60,65,"idpSingleLogoutServiceUrl"))("stripSpaces",!0),o["ɵɵadvance"](6),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](66,67,"idpX509PublicCert"),"\n          "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("(",o["ɵɵpipeBind1"](69,69,"required"),")"),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",e.samlForm.get("idpX509PublicCert").hasError("required")),o["ɵɵadvance"](3),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](78,71,"idpOutboundSigningAlgorithm"))("selectOptions",e.samlSigningAlgorithmOptions),o["ɵɵadvance"](6),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](84,73,"idpAllowOutboundLogoutRequests")),o["ɵɵadvance"](3),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](87,75,"idpSignAuthenticationRequests"))}}function W_(e,t){if(1&e&&(o["ɵɵelementStart"](0,"div",78),o["ɵɵtext"](1,"\n    "),o["ɵɵelement"](2,"i",36),o["ɵɵtext"](3,"\n    "),o["ɵɵelementStart"](4,"span",4),o["ɵɵtext"](5),o["ɵɵpipe"](6,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"]()),2&e){const e=t.ngIf;o["ɵɵadvance"](5),o["ɵɵtextInterpolate1"]("",o["ɵɵpipeBind1"](6,2,"error"),":"),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind2"](8,4,1===e?"formErrorSummarySingle":"formErrorSummaryPlural",e),"\n  ")}}function Q_(e,t){if(1&e){const e=o["ɵɵgetCurrentView"]();o["ɵɵelementStart"](0,"form",5,6),o["ɵɵlistener"]("ngSubmit",(function(){o["ɵɵrestoreView"](e);return o["ɵɵnextContext"]().submit()})),o["ɵɵtext"](2,"\n  "),o["ɵɵelementStart"](3,"p"),o["ɵɵtext"](4),o["ɵɵpipe"](5,"i18n"),o["ɵɵelementStart"](6,"a",7),o["ɵɵtext"](7),o["ɵɵpipe"](8,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](9),o["ɵɵpipe"](10,"i18n"),o["ɵɵelement"](11,"br"),o["ɵɵtext"](12),o["ɵɵpipe"](13,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](14,"\n\n  "),o["ɵɵtext"](15,"\n  "),o["ɵɵelementContainerStart"](16),o["ɵɵtext"](17,"\n    "),o["ɵɵelement"](18,"app-input-checkbox",8),o["ɵɵpipe"](19,"i18n"),o["ɵɵpipe"](20,"i18n"),o["ɵɵtext"](21,"\n\n    "),o["ɵɵelementStart"](22,"div",9),o["ɵɵtext"](23,"\n      "),o["ɵɵelementStart"](24,"label"),o["ɵɵtext"](25),o["ɵɵpipe"](26,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](27,"\n      "),o["ɵɵelementStart"](28,"div",10),o["ɵɵtext"](29,"\n        "),o["ɵɵelement"](30,"input",11),o["ɵɵtext"](31,"\n        "),o["ɵɵelementStart"](32,"label",12),o["ɵɵtext"](33),o["ɵɵpipe"](34,"i18n"),o["ɵɵelementStart"](35,"small"),o["ɵɵtext"](36),o["ɵɵpipe"](37,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](38,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](39,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](40,"\n      "),o["ɵɵelementStart"](41,"div",13),o["ɵɵtext"](42,"\n        "),o["ɵɵelement"](43,"input",14),o["ɵɵtext"](44,"\n        "),o["ɵɵelementStart"](45,"label",15),o["ɵɵtext"](46),o["ɵɵpipe"](47,"i18n"),o["ɵɵelementStart"](48,"a",16),o["ɵɵpipe"](49,"i18n"),o["ɵɵtext"](50,"\n            "),o["ɵɵelement"](51,"i",17),o["ɵɵtext"](52,"\n          "),o["ɵɵelementEnd"](),o["ɵɵtext"](53,"\n          "),o["ɵɵelementStart"](54,"small"),o["ɵɵtext"](55),o["ɵɵpipe"](56,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](57,"\n        "),o["ɵɵelementEnd"](),o["ɵɵtext"](58,"\n      "),o["ɵɵelementEnd"](),o["ɵɵtext"](59,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](60,"\n\n    "),o["ɵɵtext"](61,"\n    "),o["ɵɵtemplate"](62,K_,34,14,"ng-container",1),o["ɵɵtext"](63,"\n\n    "),o["ɵɵelementStart"](64,"app-select",18),o["ɵɵpipe"](65,"i18n"),o["ɵɵtext"](66,"\n    "),o["ɵɵelementEnd"](),o["ɵɵtext"](67,"\n  "),o["ɵɵelementContainerEnd"](),o["ɵɵtext"](68,"\n\n  "),o["ɵɵtext"](69,"\n  "),o["ɵɵtemplate"](70,q_,73,77,"div",19),o["ɵɵtext"](71,"\n\n  "),o["ɵɵtext"](72,"\n  "),o["ɵɵtemplate"](73,$_,90,77,"div",19),o["ɵɵtext"](74,"\n\n  "),o["ɵɵelementStart"](75,"button",20),o["ɵɵtext"](76,"\n    "),o["ɵɵelement"](77,"i",21),o["ɵɵpipe"](78,"i18n"),o["ɵɵtext"](79,"\n    "),o["ɵɵelementStart"](80,"span"),o["ɵɵtext"](81),o["ɵɵpipe"](82,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](83,"\n  "),o["ɵɵelementEnd"](),o["ɵɵtext"](84,"\n  "),o["ɵɵtemplate"](85,W_,9,7,"div",22),o["ɵɵtext"](86,"\n"),o["ɵɵelementEnd"]()}if(2&e){const e=o["ɵɵreference"](1),t=o["ɵɵnextContext"]();o["ɵɵproperty"]("formGroup",t.ssoConfigForm)("appApiAction",t.formPromise),o["ɵɵadvance"](4),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](5,27,"ssoPolicyHelpStart"),"\n    "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](8,29,"ssoPolicyHelpLink")),o["ɵɵadvance"](2),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](10,31,"ssoPolicyHelpEnd"),"\n    "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n    ",o["ɵɵpipeBind1"](13,33,"ssoPolicyHelpKeyConnector"),"\n  "),o["ɵɵadvance"](6),o["ɵɵproperty"]("formControl",t.enabled)("label",o["ɵɵpipeBind1"](19,35,"allowSso"))("helperText",o["ɵɵpipeBind1"](20,37,"allowSsoDesc")),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](26,39,"memberDecryptionOption")),o["ɵɵadvance"](5),o["ɵɵproperty"]("value",!1),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](34,41,"masterPass"),"\n          "),o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](37,43,"memberDecryptionPassDesc")),o["ɵɵadvance"](7),o["ɵɵproperty"]("value",!0),o["ɵɵattribute"]("disabled",!t.organization.useKeyConnector||null),o["ɵɵadvance"](3),o["ɵɵtextInterpolate1"]("\n          ",o["ɵɵpipeBind1"](47,45,"keyConnector"),"\n          "),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("appA11yTitle",o["ɵɵpipeBind1"](49,47,"learnMore")),o["ɵɵadvance"](7),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](56,49,"memberDecryptionKeyConnectorDesc")),o["ɵɵadvance"](7),o["ɵɵproperty"]("ngIf",t.ssoConfigForm.get("keyConnectorEnabled").value),o["ɵɵadvance"](2),o["ɵɵproperty"]("label",o["ɵɵpipeBind1"](65,51,"type"))("selectOptions",t.ssoTypeOptions),o["ɵɵadvance"](6),o["ɵɵproperty"]("ngIf",t.ssoConfigForm.get("configType").value===t.ssoType.OpenIdConnect),o["ɵɵadvance"](3),o["ɵɵproperty"]("ngIf",t.ssoConfigForm.get("configType").value===t.ssoType.Saml2),o["ɵɵadvance"](2),o["ɵɵproperty"]("disabled",e.loading),o["ɵɵadvance"](2),o["ɵɵpropertyInterpolate"]("title",o["ɵɵpipeBind1"](78,53,"loading")),o["ɵɵadvance"](4),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](82,55,"save")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.getErrorCount(t.ssoConfigForm))}}const Y_="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256";class Z_{constructor(e,t,n,i,r,o){this.formBuilder=e,this.route=t,this.apiService=n,this.platformUtilsService=i,this.i18nService=r,this.organizationService=o,this.ssoType=NU,this.ssoTypeOptions=[{name:this.i18nService.t("selectType"),value:NU.None,disabled:!0},{name:"OpenID Connect",value:NU.OpenIdConnect},{name:"SAML 2.0",value:NU.Saml2}],this.samlSigningAlgorithms=["http://www.w3.org/2001/04/xmldsig-more#rsa-sha256","http://www.w3.org/2000/09/xmldsig#rsa-sha384","http://www.w3.org/2000/09/xmldsig#rsa-sha512","http://www.w3.org/2000/09/xmldsig#rsa-sha1"],this.saml2SigningBehaviourOptions=[{name:"If IdP Wants Authn Requests Signed",value:LU.IfIdpWantAuthnRequestsSigned},{name:"Always",value:LU.Always},{name:"Never",value:LU.Never}],this.saml2BindingTypeOptions=[{name:"Redirect",value:HU.HttpRedirect},{name:"HTTP POST",value:HU.HttpPost}],this.saml2NameIdFormatOptions=[{name:"Not Configured",value:jU.NotConfigured},{name:"Unspecified",value:jU.Unspecified},{name:"Email Address",value:jU.EmailAddress},{name:"X.509 Subject Name",value:jU.X509SubjectName},{name:"Windows Domain Qualified Name",value:jU.WindowsDomainQualifiedName},{name:"Kerberos Principal Name",value:jU.KerberosPrincipalName},{name:"Entity Identifier",value:jU.EntityIdentifier},{name:"Persistent",value:jU.Persistent},{name:"Transient",value:jU.Transient}],this.connectRedirectOptions=[{name:"Redirect GET",value:VU.RedirectGet},{name:"Form POST",value:VU.FormPost}],this.showOpenIdCustomizations=!1,this.loading=!0,this.haveTestedKeyConnector=!1,this.enabled=this.formBuilder.control(!1),this.openIdForm=this.formBuilder.group({authority:["",f_],clientId:["",f_],clientSecret:["",f_],metadataAddress:[],redirectBehavior:[VU.RedirectGet,f_],getClaimsFromUserInfoEndpoint:[],additionalScopes:[],additionalUserIdClaimTypes:[],additionalEmailClaimTypes:[],additionalNameClaimTypes:[],acrValues:[],expectedReturnAcrValue:[]},{updateOn:"blur"}),this.samlForm=this.formBuilder.group({spNameIdFormat:[jU.NotConfigured],spOutboundSigningAlgorithm:[Y_],spSigningBehavior:[LU.IfIdpWantAuthnRequestsSigned],spMinIncomingSigningAlgorithm:[Y_],spWantAssertionsSigned:[],spValidateCertificates:[],idpEntityId:["",f_],idpBindingType:[HU.HttpRedirect],idpSingleSignOnServiceUrl:[],idpSingleLogoutServiceUrl:[],idpX509PublicCert:["",f_],idpOutboundSigningAlgorithm:[Y_],idpAllowUnsolicitedAuthnResponse:[],idpAllowOutboundLogoutRequests:[!0],idpWantAuthnRequestsSigned:[]},{updateOn:"blur"}),this.ssoConfigForm=this.formBuilder.group({configType:[NU.None],keyConnectorEnabled:[!1],keyConnectorUrl:[""],openId:this.openIdForm,saml:this.samlForm})}ngOnInit(){return U_(this,void 0,void 0,(function*(){this.ssoConfigForm.get("configType").valueChanges.subscribe((e=>{e===NU.OpenIdConnect?(this.openIdForm.enable(),this.samlForm.disable()):e===NU.Saml2?(this.openIdForm.disable(),this.samlForm.enable()):(this.openIdForm.disable(),this.samlForm.disable())})),this.samlForm.get("spSigningBehavior").valueChanges.subscribe((()=>this.samlForm.get("idpX509PublicCert").updateValueAndValidity())),this.route.parent.parent.params.subscribe((e=>U_(this,void 0,void 0,(function*(){this.organizationId=e.organizationId,yield this.load()}))))}))}load(){return U_(this,void 0,void 0,(function*(){this.organization=yield this.organizationService.get(this.organizationId);const e=yield this.apiService.getOrganizationSso(this.organizationId);this.populateForm(e),this.callbackPath=e.urls.callbackPath,this.signedOutCallbackPath=e.urls.signedOutCallbackPath,this.spEntityId=e.urls.spEntityId,this.spMetadataUrl=e.urls.spMetadataUrl,this.spAcsUrl=e.urls.spAcsUrl,this.loading=!1}))}submit(){return U_(this,void 0,void 0,(function*(){if(this.validateForm(this.ssoConfigForm),this.ssoConfigForm.get("keyConnectorEnabled").value&&(yield this.validateKeyConnectorUrl()),!this.ssoConfigForm.valid)return void this.readOutErrors();const e=new x_;e.enabled=this.enabled.value,e.data=Hz.fromView(this.ssoConfigForm.value),this.formPromise=this.apiService.postOrganizationSso(this.organizationId,e);try{const e=yield this.formPromise;this.populateForm(e),this.platformUtilsService.showToast("success",null,this.i18nService.t("ssoSettingsSaved"))}catch(t){}this.formPromise=null}))}validateKeyConnectorUrl(){return U_(this,void 0,void 0,(function*(){if(!this.haveTestedKeyConnector){this.keyConnectorUrl.markAsPending();try{yield this.apiService.getKeyConnectorAlive(this.keyConnectorUrl.value),this.keyConnectorUrl.updateValueAndValidity()}catch(e){this.keyConnectorUrl.setErrors({invalidUrl:!0})}this.haveTestedKeyConnector=!0}}))}toggleOpenIdCustomizations(){this.showOpenIdCustomizations=!this.showOpenIdCustomizations}getErrorCount(e){return Object.values(e.controls).reduce(((e,t)=>t instanceof d.FormGroup?e+this.getErrorCount(t):null==t.errors?e:e+Object.keys(t.errors).length),0)}get enableTestKeyConnector(){var e;return this.ssoConfigForm.get("keyConnectorEnabled").value&&!N.c.isNullOrWhitespace(null===(e=this.keyConnectorUrl)||void 0===e?void 0:e.value)}get keyConnectorUrl(){return this.ssoConfigForm.get("keyConnectorUrl")}get samlSigningAlgorithmOptions(){return this.samlSigningAlgorithms.map((e=>({name:e,value:e})))}validateForm(e){Object.values(e.controls).forEach((e=>{e.disabled||(e instanceof d.FormGroup?this.validateForm(e):(e.markAsDirty(),e.markAsTouched(),e.updateValueAndValidity()))}))}populateForm(e){if(this.enabled.setValue(e.enabled),null!=e.data){const t=new y_(e.data);this.ssoConfigForm.patchValue(t)}}readOutErrors(){const e=this.i18nService.t("error"),t=this.getErrorCount(this.ssoConfigForm),n=this.i18nService.t(1===t?"formErrorSummarySingle":"formErrorSummaryPlural",t.toString()),i=document.createElement("div");i.className="sr-only",i.id="srErrorCount",i.setAttribute("aria-live","polite"),i.innerText=e+": "+n;const r=document.getElementById("srErrorCount");null!=r&&r.remove(),document.body.append(i)}}Z_.ɵfac=function(e){return new(e||Z_)(o["ɵɵdirectiveInject"](d.FormBuilder),o["ɵɵdirectiveInject"](p.ActivatedRoute),o["ɵɵdirectiveInject"](T.s),o["ɵɵdirectiveInject"](E.P),o["ɵɵdirectiveInject"](k.D),o["ɵɵdirectiveInject"](Ii.M))},Z_.ɵcmp=o["ɵɵdefineComponent"]({type:Z_,selectors:[["app-org-manage-sso"]],decls:11,vars:5,consts:[[1,"page-header","d-flex"],[4,"ngIf"],[3,"formGroup","appApiAction","ngSubmit",4,"ngIf"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin","text-muted",3,"title"],[1,"sr-only"],[3,"formGroup","appApiAction","ngSubmit"],["form",""],["routerLink","../policies"],["controlId","enabled",3,"formControl","label","helperText"],[1,"form-group"],[1,"form-check","form-check-block"],["type","radio","id","memberDecryptionPass","formControlName","keyConnectorEnabled",1,"form-check-input",3,"value"],["for","memberDecryptionPass",1,"form-check-label"],[1,"form-check","mt-2","form-check-block"],["type","radio","id","memberDecryptionKey","formControlName","keyConnectorEnabled",1,"form-check-input",3,"value"],["for","memberDecryptionKey",1,"form-check-label"],["target","_blank","rel","noopener","href","https://bitwarden.com/help/about-key-connector/",3,"appA11yTitle"],["aria-hidden","true",1,"bwi","bwi-question-circle"],["controlId","type","formControlName","configType",3,"label","selectOptions"],[3,"formGroup",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-submit",3,"disabled"],["aria-hidden","true",1,"bwi","bwi-spinner","bwi-spin",3,"title"],["id","errorSummary","class","error-summary text-danger",4,"ngIf"],["type","warning",3,"useAlertRole"],["for","keyConnectorUrl"],[1,"text-muted","form-text","d-inline"],[1,"input-group"],["formControlName","keyConnectorUrl","id","keyConnectorUrl","aria-describedby","keyConnectorUrlDesc","appInputStripSpaces","","appA11yInvalid","",1,"form-control",3,"change"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],["class","bwi bwi-spinner bwi-spin","aria-hidden","true",3,"title",4,"ngIf"],["id","keyConnectorUrlDesc","aria-live","polite",4,"ngIf"],["id","keyConnectorUrlDesc","aria-live","polite"],["class","error-inline",4,"ngIf","ngIfElse"],["keyConnectorSuccess",""],[1,"error-inline"],["aria-hidden","true",1,"bwi","bwi-exclamation-circle"],[1,"text-success"],["aria-hidden","true",1,"bwi","bwi-check-circle"],[3,"formGroup"],[1,"config-section"],[1,"secondary-header"],[3,"label","controlValue"],["controlId","authority","formControlName","authority",3,"label","stripSpaces"],["controlId","clientId","formControlName","clientId",3,"label","stripSpaces"],["controlId","clientSecret","formControlName","clientSecret",3,"label","stripSpaces"],["controlId","metadataAddress","formControlName","metadataAddress",3,"label","stripSpaces","helperText"],["controlId","redirectBehavior","formControlName","redirectBehavior",3,"label","selectOptions"],["controlId","getClaimsFromUserInfoEndpoint","formControlName","getClaimsFromUserInfoEndpoint",3,"label"],[1,"section-header","d-flex","flex-row","align-items-center","mt-3","mb-3",3,"click"],["id","customizations-header",1,"mb-0","mr-2"],["type","button","appStopClick","","role","button","aria-controls","customizations","aria-labelledby","customizations-header",1,"mb-1","btn","btn-link"],["aria-hidden","true",1,"bwi",3,"ngClass"],["id","customizations",3,"hidden"],["controlId","additionalScopes","formControlName","additionalScopes",3,"label","helperText"],["controlId","additionalUserIdClaimTypes","formControlName","additionalUserIdClaimTypes",3,"label","helperText"],["controlId","additionalEmailClaimTypes","formControlName","additionalEmailClaimTypes",3,"label","helperText"],["controlId","additionalNameClaimTypes","formControlName","additionalNameClaimTypes",3,"label","helperText"],["controlId","acrValues","helperText","acr_values","formControlName","acrValues",3,"label"],["controlId","expectedReturnAcrValue","helperText","acr_validation","formControlName","expectedReturnAcrValue",3,"label"],[3,"label","controlValue","showLaunch"],["controlId","spNameIdFormat","formControlName","spNameIdFormat",3,"label","selectOptions"],["controlId","spOutboundSigningAlgorithm","formControlName","spOutboundSigningAlgorithm",3,"label","selectOptions"],["controlId","spSigningBehavior","formControlName","spSigningBehavior",3,"label","selectOptions"],["controlId","spMinIncomingSigningAlgorithm","formControlName","spMinIncomingSigningAlgorithm",3,"label","selectOptions"],["controlId","spWantAssertionsSigned","formControlName","spWantAssertionsSigned",3,"label"],["controlId","spValidateCertificates","formControlName","spValidateCertificates",3,"label"],["controlId","idpEntityId","formControlName","idpEntityId",3,"label"],["controlId","idpBindingType","formControlName","idpBindingType",3,"label","selectOptions"],["controlId","idpSingleSignOnServiceUrl","formControlName","idpSingleSignOnServiceUrl",3,"label","helperText","stripSpaces"],["controlId","idpSingleLogoutServiceUrl","formControlName","idpSingleLogoutServiceUrl",3,"label","stripSpaces"],["for","idpX509PublicCert"],["formControlName","idpX509PublicCert","rows","6","id","idpX509PublicCert","appA11yInvalid","","aria-describedby","idpX509PublicCertDesc",1,"form-control","form-control-sm","text-monospace"],["id","idpX509PublicCertDesc","class","error-inline","role","alert",4,"ngIf"],["controlId","idpOutboundSigningAlgorithm","formControlName","idpOutboundSigningAlgorithm",3,"label","selectOptions"],["controlId","idpAllowOutboundLogoutRequests","formControlName","idpAllowOutboundLogoutRequests",3,"label"],["controlId","idpWantAuthnRequestsSigned","formControlName","idpWantAuthnRequestsSigned",3,"label"],["id","idpX509PublicCertDesc","role","alert",1,"error-inline"],["id","errorSummary",1,"error-summary","text-danger"]],template:function(e,t){1&e&&(o["ɵɵelementStart"](0,"div",0),o["ɵɵtext"](1,"\n  "),o["ɵɵelementStart"](2,"h1"),o["ɵɵtext"](3),o["ɵɵpipe"](4,"i18n"),o["ɵɵelementEnd"](),o["ɵɵtext"](5,"\n"),o["ɵɵelementEnd"](),o["ɵɵtext"](6,"\n\n"),o["ɵɵtemplate"](7,z_,9,6,"ng-container",1),o["ɵɵtext"](8,"\n\n"),o["ɵɵtemplate"](9,Q_,87,57,"form",2),o["ɵɵtext"](10,"\n")),2&e&&(o["ɵɵadvance"](3),o["ɵɵtextInterpolate"](o["ɵɵpipeBind1"](4,3,"singleSignOn")),o["ɵɵadvance"](4),o["ɵɵproperty"]("ngIf",t.loading),o["ɵɵadvance"](2),o["ɵɵproperty"]("ngIf",!t.loading))},directives:[B.NgIf,d["ɵNgNoValidate"],d.NgControlStatusGroup,d.FormGroupDirective,Y.b,p.RouterLinkWithHref,w_,d.NgControlStatus,d.FormControlDirective,d.RadioControlValueAccessor,d.DefaultValueAccessor,d.FormControlName,pe,E_,Pe.O,k_,P_,T_,R_,Tn,B.NgClass],pipes:[M.C],encapsulation:2});const J_=[{path:"organizations/:organizationId",component:dm,canActivate:[x,Qu.v],children:[{path:"manage",component:rv,canActivate:[Qu.v],data:{permissions:Si.getPermissions("manage")},children:[{path:"sso",component:Z_,canActivate:[Qu.v],data:{permissions:[xi.P.ManageSso]}}]}]}];class X_{}X_.ɵfac=function(e){return new(e||X_)},X_.ɵmod=o["ɵɵdefineNgModule"]({type:X_}),X_.ɵinj=o["ɵɵdefineInjector"]({imports:[[p.RouterModule.forChild(J_)],p.RouterModule]});class e${}e$.ɵfac=function(e){return new(e||e$)},e$.ɵmod=o["ɵɵdefineNgModule"]({type:e$}),e$.ɵinj=o["ɵɵdefineInjector"]({imports:[[B.CommonModule,d.FormsModule,d.ReactiveFormsModule,m.b,X_]]});class t${}t$.ɵfac=function(e){return new(e||t$)},t$.ɵmod=o["ɵɵdefineNgModule"]({type:t$,bootstrap:[g_]}),t$.ɵinj=o["ɵɵdefineInjector"]({imports:[[l.OverlayModule,MU,m.b,c.BrowserAnimationsModule,d.FormsModule,d.ReactiveFormsModule,FL,u.InfiniteScrollModule,s.DragDropModule,Nq,wU,e$,p.RouterModule,RL]]}),n(67234),n(21834),(0,o.enableProdMode)(),r.platformBrowser().bootstrapModule(t$,{preserveWhitespaces:!0})},53707:(e,t,n)=>{"use strict";n.d(t,{O:()=>f});n(43548);var i=n(53857),r=n(94820),o=n(52187),a=n(17404);function s(e,t){if(1&e&&i["ɵɵelement"](0,"i",6),2&e){const e=i["ɵɵnextContext"](2);i["ɵɵclassMapInterpolate1"]("bwi ",e.icon,"")}}function l(e,t){if(1&e&&(i["ɵɵelementStart"](0,"h3",4),i["ɵɵtext"](1,"\n    "),i["ɵɵtemplate"](2,s,1,3,"i",5),i["ɵɵtext"](3),i["ɵɵelementEnd"]()),2&e){const e=i["ɵɵnextContext"]();i["ɵɵadvance"](2),i["ɵɵproperty"]("ngIf",e.icon),i["ɵɵadvance"](1),i["ɵɵtextInterpolate1"]("\n    ",e.title,"\n  ")}}function d(e,t){if(1&e&&(i["ɵɵelementStart"](0,"li"),i["ɵɵtext"](1),i["ɵɵpipe"](2,"i18n"),i["ɵɵelementEnd"]()),2&e){const e=i["ɵɵnextContext"](2);i["ɵɵadvance"](1),i["ɵɵtextInterpolate1"]("\n        ",i["ɵɵpipeBind2"](2,1,"policyInEffectMinComplexity",e.getPasswordScoreAlertDisplay()),"\n      ")}}function c(e,t){if(1&e&&(i["ɵɵelementStart"](0,"li"),i["ɵɵtext"](1),i["ɵɵpipe"](2,"i18n"),i["ɵɵelementEnd"]()),2&e){const e=i["ɵɵnextContext"](2);i["ɵɵadvance"](1),i["ɵɵtextInterpolate1"]("\n        ",i["ɵɵpipeBind2"](2,1,"policyInEffectMinLength",null==e.enforcedPolicyOptions?null:e.enforcedPolicyOptions.minLength.toString()),"\n      ")}}function p(e,t){1&e&&(i["ɵɵelementStart"](0,"li"),i["ɵɵtext"](1),i["ɵɵpipe"](2,"i18n"),i["ɵɵelementEnd"]()),2&e&&(i["ɵɵadvance"](1),i["ɵɵtextInterpolate1"]("\n        ",i["ɵɵpipeBind1"](2,1,"policyInEffectUppercase"),"\n      "))}function u(e,t){1&e&&(i["ɵɵelementStart"](0,"li"),i["ɵɵtext"](1),i["ɵɵpipe"](2,"i18n"),i["ɵɵelementEnd"]()),2&e&&(i["ɵɵadvance"](1),i["ɵɵtextInterpolate1"]("\n        ",i["ɵɵpipeBind1"](2,1,"policyInEffectLowercase"),"\n      "))}function m(e,t){1&e&&(i["ɵɵelementStart"](0,"li"),i["ɵɵtext"](1),i["ɵɵpipe"](2,"i18n"),i["ɵɵelementEnd"]()),2&e&&(i["ɵɵadvance"](1),i["ɵɵtextInterpolate1"]("\n        ",i["ɵɵpipeBind1"](2,1,"policyInEffectNumbers"),"\n      "))}function h(e,t){1&e&&(i["ɵɵelementStart"](0,"li"),i["ɵɵtext"](1),i["ɵɵpipe"](2,"i18n"),i["ɵɵelementEnd"]()),2&e&&(i["ɵɵadvance"](1),i["ɵɵtextInterpolate1"]("\n        ",i["ɵɵpipeBind2"](2,1,"policyInEffectSpecial","!@#$%^&*"),"\n      "))}function v(e,t){if(1&e&&(i["ɵɵelementStart"](0,"div",7),i["ɵɵtext"](1),i["ɵɵelementStart"](2,"ul"),i["ɵɵtext"](3,"\n      "),i["ɵɵtemplate"](4,d,3,4,"li",8),i["ɵɵtext"](5,"\n      "),i["ɵɵtemplate"](6,c,3,4,"li",8),i["ɵɵtext"](7,"\n      "),i["ɵɵtemplate"](8,p,3,3,"li",8),i["ɵɵtext"](9,"\n      "),i["ɵɵtemplate"](10,u,3,3,"li",8),i["ɵɵtext"](11,"\n      "),i["ɵɵtemplate"](12,m,3,3,"li",8),i["ɵɵtext"](13,"\n      "),i["ɵɵtemplate"](14,h,3,4,"li",8),i["ɵɵtext"](15,"\n    "),i["ɵɵelementEnd"](),i["ɵɵtext"](16,"\n  "),i["ɵɵelementEnd"]()),2&e){const e=i["ɵɵnextContext"]();i["ɵɵadvance"](1),i["ɵɵtextInterpolate1"]("\n    ",e.enforcedPolicyMessage,"\n    "),i["ɵɵadvance"](3),i["ɵɵproperty"]("ngIf",(null==e.enforcedPolicyOptions?null:e.enforcedPolicyOptions.minComplexity)>0),i["ɵɵadvance"](2),i["ɵɵproperty"]("ngIf",(null==e.enforcedPolicyOptions?null:e.enforcedPolicyOptions.minLength)>0),i["ɵɵadvance"](2),i["ɵɵproperty"]("ngIf",null==e.enforcedPolicyOptions?null:e.enforcedPolicyOptions.requireUpper),i["ɵɵadvance"](2),i["ɵɵproperty"]("ngIf",null==e.enforcedPolicyOptions?null:e.enforcedPolicyOptions.requireLower),i["ɵɵadvance"](2),i["ɵɵproperty"]("ngIf",null==e.enforcedPolicyOptions?null:e.enforcedPolicyOptions.requireNumbers),i["ɵɵadvance"](2),i["ɵɵproperty"]("ngIf",null==e.enforcedPolicyOptions?null:e.enforcedPolicyOptions.requireSpecial)}}const g=function(e){return{clickable:e}};class f{constructor(e){this.i18nService=e,this.type="info",this.useAlertRole=!1}ngOnInit(){this.calloutStyle=this.type,void 0===this.enforcedPolicyMessage&&(this.enforcedPolicyMessage=this.i18nService.t("masterPasswordPolicyInEffect")),"warning"===this.type||"danger"===this.type?("danger"===this.type&&(this.calloutStyle="danger"),void 0===this.title&&(this.title=this.i18nService.t("warning")),void 0===this.icon&&(this.icon="bwi-exclamation-triangle")):"error"===this.type?(this.calloutStyle="danger",void 0===this.title&&(this.title=this.i18nService.t("error")),void 0===this.icon&&(this.icon="bwi-error")):"tip"===this.type&&(this.calloutStyle="success",void 0===this.title&&(this.title=this.i18nService.t("tip")),void 0===this.icon&&(this.icon="bwi-lightbulb"))}getPasswordScoreAlertDisplay(){if(null==this.enforcedPolicyOptions)return"";let e;switch(this.enforcedPolicyOptions.minComplexity){case 4:e=this.i18nService.t("strong");break;case 3:e=this.i18nService.t("good");break;default:e=this.i18nService.t("weak")}return e+" ("+this.enforcedPolicyOptions.minComplexity+")"}}f.ɵfac=function(e){return new(e||f)(i["ɵɵdirectiveInject"](r.D))},f.ɵcmp=i["ɵɵdefineComponent"]({type:f,selectors:[["app-callout"]],inputs:{type:"type",icon:"icon",title:"title",clickable:"clickable",enforcedPolicyOptions:"enforcedPolicyOptions",enforcedPolicyMessage:"enforcedPolicyMessage",useAlertRole:"useAlertRole"},ngContentSelectors:["*"],decls:10,vars:9,consts:[[3,"ngClass"],["callout",""],["class","callout-heading",4,"ngIf"],["class","enforced-policy-options",4,"ngIf"],[1,"callout-heading"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true"],[1,"enforced-policy-options"],[4,"ngIf"]],template:function(e,t){1&e&&(i["ɵɵprojectionDef"](),i["ɵɵelementStart"](0,"div",0,1),i["ɵɵtext"](2,"\n  "),i["ɵɵtemplate"](3,l,4,2,"h3",2),i["ɵɵtext"](4,"\n  "),i["ɵɵtemplate"](5,v,17,7,"div",3),i["ɵɵtext"](6,"\n  "),i["ɵɵprojection"](7),i["ɵɵtext"](8,"\n"),i["ɵɵelementEnd"](),i["ɵɵtext"](9,"\n")),2&e&&(i["ɵɵclassMapInterpolate1"]("callout callout-",t.calloutStyle,""),i["ɵɵproperty"]("ngClass",i["ɵɵpureFunction1"](7,g,t.clickable)),i["ɵɵattribute"]("role",t.useAlertRole?"alert":null),i["ɵɵadvance"](3),i["ɵɵproperty"]("ngIf",t.title),i["ɵɵadvance"](2),i["ɵɵproperty"]("ngIf",t.enforcedPolicyOptions))},directives:[o.NgClass,o.NgIf],pipes:[a.C],encapsulation:2})},73484:(e,t,n)=>{"use strict";n.d(t,{W:()=>f});var i=n(89601),r=n(68405),o=n(24540),a=n(53857),s=n(77128),l=n(20510),d=n(52187),c=n(62374),p=n(85356),u=n(17404),m=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};function h(e,t){if(1&e&&(a["ɵɵelementContainerStart"](0),a["ɵɵtext"](1,"\n  "),a["ɵɵelementStart"](2,"label",1),a["ɵɵtext"](3),a["ɵɵpipe"](4,"i18n"),a["ɵɵelementEnd"](),a["ɵɵtext"](5,"\n  "),a["ɵɵelement"](6,"input",2),a["ɵɵtext"](7,"\n  "),a["ɵɵelementStart"](8,"small",3),a["ɵɵtext"](9),a["ɵɵpipe"](10,"i18n"),a["ɵɵelementEnd"](),a["ɵɵtext"](11,"\n"),a["ɵɵelementContainerEnd"]()),2&e){const e=a["ɵɵnextContext"]();a["ɵɵadvance"](3),a["ɵɵtextInterpolate"](a["ɵɵpipeBind1"](4,3,"masterPass")),a["ɵɵadvance"](3),a["ɵɵproperty"]("formControl",e.secret),a["ɵɵadvance"](3),a["ɵɵtextInterpolate"](a["ɵɵpipeBind1"](10,5,"confirmIdentity"))}}function v(e,t){1&e&&(a["ɵɵelementStart"](0,"span",10),a["ɵɵtext"](1,"\n      "),a["ɵɵelement"](2,"i",11),a["ɵɵtext"](3),a["ɵɵpipe"](4,"i18n"),a["ɵɵelementEnd"]()),2&e&&(a["ɵɵproperty"]("@sent",void 0),a["ɵɵadvance"](3),a["ɵɵtextInterpolate1"]("\n      ",a["ɵɵpipeBind1"](4,2,"codeSent"),"\n    "))}function g(e,t){if(1&e){const e=a["ɵɵgetCurrentView"]();a["ɵɵelementContainerStart"](0),a["ɵɵtext"](1,"\n  "),a["ɵɵelementStart"](2,"div",4),a["ɵɵtext"](3,"\n    "),a["ɵɵelementStart"](4,"label",5),a["ɵɵtext"](5),a["ɵɵpipe"](6,"i18n"),a["ɵɵelementEnd"](),a["ɵɵtext"](7,"\n    "),a["ɵɵelementStart"](8,"button",6),a["ɵɵlistener"]("click",(function(){a["ɵɵrestoreView"](e);return a["ɵɵnextContext"]().requestOTP()})),a["ɵɵtext"](9),a["ɵɵpipe"](10,"i18n"),a["ɵɵelementEnd"](),a["ɵɵtext"](11,"\n    "),a["ɵɵtemplate"](12,v,5,4,"span",7),a["ɵɵtext"](13,"\n  "),a["ɵɵelementEnd"](),a["ɵɵtext"](14,"\n\n  "),a["ɵɵelementStart"](15,"div",4),a["ɵɵtext"](16,"\n    "),a["ɵɵelementStart"](17,"label",8),a["ɵɵtext"](18),a["ɵɵpipe"](19,"i18n"),a["ɵɵelementEnd"](),a["ɵɵtext"](20,"\n    "),a["ɵɵelement"](21,"input",9),a["ɵɵtext"](22,"\n    "),a["ɵɵelementStart"](23,"small",3),a["ɵɵtext"](24),a["ɵɵpipe"](25,"i18n"),a["ɵɵelementEnd"](),a["ɵɵtext"](26,"\n  "),a["ɵɵelementEnd"](),a["ɵɵtext"](27,"\n"),a["ɵɵelementContainerEnd"]()}if(2&e){const e=a["ɵɵnextContext"]();a["ɵɵadvance"](5),a["ɵɵtextInterpolate"](a["ɵɵpipeBind1"](6,7,"sendVerificationCode")),a["ɵɵadvance"](3),a["ɵɵproperty"]("disabled",e.disableRequestOTP),a["ɵɵadvance"](1),a["ɵɵtextInterpolate1"]("\n      ",a["ɵɵpipeBind1"](10,9,"sendCode"),"\n    "),a["ɵɵadvance"](3),a["ɵɵproperty"]("ngIf",e.sentCode),a["ɵɵadvance"](6),a["ɵɵtextInterpolate"](a["ɵɵpipeBind1"](19,11,"verificationCode")),a["ɵɵadvance"](3),a["ɵɵproperty"]("formControl",e.secret),a["ɵɵadvance"](3),a["ɵɵtextInterpolate"](a["ɵɵpipeBind1"](25,13,"confirmIdentity"))}}class f{constructor(e,t){this.keyConnectorService=e,this.userVerificationService=t,this.usesKeyConnector=!1,this.disableRequestOTP=!1,this.sentCode=!1,this.secret=new r.FormControl("")}ngOnInit(){return m(this,void 0,void 0,(function*(){this.usesKeyConnector=yield this.keyConnectorService.getUsesKeyConnector(),this.processChanges(this.secret.value),this.secret.valueChanges.subscribe((e=>this.processChanges(e)))}))}requestOTP(){return m(this,void 0,void 0,(function*(){if(this.usesKeyConnector){this.disableRequestOTP=!0;try{yield this.userVerificationService.requestOTP(),this.sentCode=!0}finally{this.disableRequestOTP=!1}}}))}writeValue(e){this.secret.setValue(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){}setDisabledState(e){this.disableRequestOTP=e,e?this.secret.disable():this.secret.enable()}processChanges(e){null!=this.onChange&&this.onChange({type:this.usesKeyConnector?o.R.OTP:o.R.MasterPassword,secret:e})}}f.ɵfac=function(e){return new(e||f)(a["ɵɵdirectiveInject"](s.J),a["ɵɵdirectiveInject"](l.i))},f.ɵcmp=a["ɵɵdefineComponent"]({type:f,selectors:[["app-user-verification"]],features:[a["ɵɵProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,multi:!0,useExisting:f}])],decls:4,vars:2,consts:[[4,"ngIf"],["for","masterPassword"],["id","masterPassword","type","password","name","MasterPasswordHash","required","","appAutofocus","","appInputVerbatim","",1,"form-control",3,"formControl"],[1,"form-text","text-muted"],[1,"form-group"],[1,"d-block"],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],["class","ml-2 text-success","role","alert",4,"ngIf"],["for","verificationCode"],["id","verificationCode","type","input","name","verificationCode","required","","appAutofocus","","appInputVerbatim","",1,"form-control",3,"formControl"],["role","alert",1,"ml-2","text-success"],["aria-hidden","true",1,"bwi","bwi-check-circle"]],template:function(e,t){1&e&&(a["ɵɵtemplate"](0,h,12,7,"ng-container",0),a["ɵɵtext"](1,"\n"),a["ɵɵtemplate"](2,g,28,15,"ng-container",0),a["ɵɵtext"](3,"\n")),2&e&&(a["ɵɵproperty"]("ngIf",!t.usesKeyConnector),a["ɵɵadvance"](2),a["ɵɵproperty"]("ngIf",t.usesKeyConnector))},directives:[d.NgIf,r.DefaultValueAccessor,r.RequiredValidator,c.U,p.b,r.NgControlStatus,r.FormControlDirective],pipes:[u.C],encapsulation:2,data:{animation:[(0,i.trigger)("sent",[(0,i.transition)(":enter",[(0,i.style)({opacity:0}),(0,i.animate)("100ms",(0,i.style)({opacity:1}))])])]}})},24610:(e,t,n)=>{"use strict";n.d(t,{b:()=>a});var i=n(36478),r=n(53857),o=n(27885);class a{constructor(e,t,n){this.el=e,this.validationService=t,this.logService=n}ngOnChanges(e){null!=this.appApiAction&&null!=this.appApiAction.then&&(this.el.nativeElement.loading=!0,this.appApiAction.then((e=>{this.el.nativeElement.loading=!1}),(e=>{var t;this.el.nativeElement.loading=!1,e.captchaRequired?this.logService.error("Captcha required error response: "+e.getSingleMessage()):(null===(t=this.logService)||void 0===t||t.error(`Received API exception: ${e}`),this.validationService.showError(e))})))}}a.ɵfac=function(e){return new(e||a)(r["ɵɵdirectiveInject"](r.ElementRef),r["ɵɵdirectiveInject"](i.R),r["ɵɵdirectiveInject"](o.$))},a.ɵdir=r["ɵɵdefineDirective"]({type:a,selectors:[["","appApiAction",""]],inputs:{appApiAction:"appApiAction"},features:[r["ɵɵNgOnChangesFeature"]]})},62374:(e,t,n)=>{"use strict";n.d(t,{U:()=>a});var i=n(20236),r=n(14512),o=n(53857);class a{constructor(e,t){this.el=e,this.ngZone=t}set appAutofocus(e){this.autofocus=""===e||!0===e}ngOnInit(){!r.c.isMobileBrowser&&this.autofocus&&(this.ngZone.isStable?this.el.nativeElement.focus():this.ngZone.onStable.pipe((0,i.q)(1)).subscribe((()=>this.el.nativeElement.focus())))}}a.ɵfac=function(e){return new(e||a)(o["ɵɵdirectiveInject"](o.ElementRef),o["ɵɵdirectiveInject"](o.NgZone))},a.ɵdir=o["ɵɵdefineDirective"]({type:a,selectors:[["","appAutofocus",""]],inputs:{appAutofocus:"appAutofocus"}})},85356:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});var i=n(53857);class r{constructor(e,t){this.el=e,this.renderer=t}set appInputVerbatim(e){this.disableComplete=""===e||!0===e}ngOnInit(){this.disableComplete&&!this.el.nativeElement.hasAttribute("autocomplete")&&this.renderer.setAttribute(this.el.nativeElement,"autocomplete","off"),this.el.nativeElement.hasAttribute("autocapitalize")||this.renderer.setAttribute(this.el.nativeElement,"autocapitalize","none"),this.el.nativeElement.hasAttribute("autocorrect")||this.renderer.setAttribute(this.el.nativeElement,"autocorrect","none"),this.el.nativeElement.hasAttribute("spellcheck")||this.renderer.setAttribute(this.el.nativeElement,"spellcheck","false"),this.el.nativeElement.hasAttribute("inputmode")||this.renderer.setAttribute(this.el.nativeElement,"inputmode","verbatim")}}r.ɵfac=function(e){return new(e||r)(i["ɵɵdirectiveInject"](i.ElementRef),i["ɵɵdirectiveInject"](i.Renderer2))},r.ɵdir=i["ɵɵdefineDirective"]({type:r,selectors:[["","appInputVerbatim",""]],inputs:{appInputVerbatim:"appInputVerbatim"}})},51470:(e,t,n)=>{"use strict";n.d(t,{b:()=>w});var i=n(52187),r=n(68405),o=n(89601),a=n(25635),s=n(53857);function l(e,t){if(1&e){const e=s["ɵɵgetCurrentView"]();s["ɵɵelementStart"](0,"button",6),s["ɵɵlistener"]("click",(function(){s["ɵɵrestoreView"](e);return s["ɵɵnextContext"]().remove()})),s["ɵɵelementStart"](1,"span",7),s["ɵɵtext"](2,"×"),s["ɵɵelementEnd"](),s["ɵɵelementEnd"]()}}function d(e,t){if(1&e&&(s["ɵɵelementContainerStart"](0),s["ɵɵtext"](1),s["ɵɵelementContainerEnd"]()),2&e){const e=s["ɵɵnextContext"](2);s["ɵɵadvance"](1),s["ɵɵtextInterpolate1"]("[",e.duplicatesCount+1,"]")}}function c(e,t){if(1&e&&(s["ɵɵelementStart"](0,"div"),s["ɵɵtext"](1),s["ɵɵtemplate"](2,d,2,1,"ng-container",5),s["ɵɵelementEnd"]()),2&e){const e=s["ɵɵnextContext"]();s["ɵɵclassMap"](e.options.titleClass),s["ɵɵattribute"]("aria-label",e.title),s["ɵɵadvance"](1),s["ɵɵtextInterpolate1"](" ",e.title," "),s["ɵɵadvance"](1),s["ɵɵproperty"]("ngIf",e.duplicatesCount)}}function p(e,t){if(1&e&&s["ɵɵelement"](0,"div",8),2&e){const e=s["ɵɵnextContext"]();s["ɵɵclassMap"](e.options.messageClass),s["ɵɵproperty"]("innerHTML",e.message,s["ɵɵsanitizeHtml"])}}function u(e,t){if(1&e&&(s["ɵɵelementStart"](0,"div",9),s["ɵɵtext"](1),s["ɵɵelementEnd"]()),2&e){const e=s["ɵɵnextContext"]();s["ɵɵclassMap"](e.options.messageClass),s["ɵɵattribute"]("aria-label",e.message),s["ɵɵadvance"](1),s["ɵɵtextInterpolate1"](" ",e.message," ")}}function m(e,t){if(1&e&&(s["ɵɵelementStart"](0,"div"),s["ɵɵelement"](1,"div",10),s["ɵɵelementEnd"]()),2&e){const e=s["ɵɵnextContext"]();s["ɵɵadvance"](1),s["ɵɵstyleProp"]("width",e.width+"%")}}class h extends a.Toast{constructor(e,t){super(e,t),this.toastrService=e,this.toastPackage=t}}h.ɵfac=function(e){return new(e||h)(s["ɵɵdirectiveInject"](a.ToastrService),s["ɵɵdirectiveInject"](a.ToastPackage))},h.ɵcmp=s["ɵɵdefineComponent"]({type:h,selectors:[["","toast-component2",""]],features:[s["ɵɵInheritDefinitionFeature"]],attrs:["toast-component2",""],decls:8,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[1,"icon"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(e,t){1&e&&(s["ɵɵtemplate"](0,l,3,0,"button",0),s["ɵɵelementStart"](1,"div",1),s["ɵɵelement"](2,"i"),s["ɵɵelementEnd"](),s["ɵɵelementStart"](3,"div"),s["ɵɵtemplate"](4,c,3,5,"div",2),s["ɵɵtemplate"](5,p,1,3,"div",3),s["ɵɵtemplate"](6,u,2,4,"div",4),s["ɵɵelementEnd"](),s["ɵɵtemplate"](7,m,2,2,"div",5)),2&e&&(s["ɵɵproperty"]("ngIf",t.options.closeButton),s["ɵɵadvance"](4),s["ɵɵproperty"]("ngIf",t.title),s["ɵɵadvance"](1),s["ɵɵproperty"]("ngIf",t.message&&t.options.enableHtml),s["ɵɵadvance"](1),s["ɵɵproperty"]("ngIf",t.message&&!t.options.enableHtml),s["ɵɵadvance"](1),s["ɵɵproperty"]("ngIf",t.options.progressBar))},directives:[i.NgIf],encapsulation:2,data:{animation:[(0,o.trigger)("flyInOut",[(0,o.state)("inactive",(0,o.style)({opacity:0})),(0,o.state)("active",(0,o.style)({opacity:1})),(0,o.state)("removed",(0,o.style)({opacity:0})),(0,o.transition)("inactive => active",(0,o.animate)("{{ easeTime }}ms {{ easing }}")),(0,o.transition)("active => removed",(0,o.animate)("{{ easeTime }}ms {{ easing }}"))])]}});const v=Object.assign(Object.assign({},a.DefaultNoComponentGlobalConfig),{toastComponent:h});class g{static forRoot(e={}){return{ngModule:g,providers:[{provide:a.TOAST_CONFIG,useValue:{default:v,config:e}}]}}}g.ɵfac=function(e){return new(e||g)},g.ɵmod=s["ɵɵdefineNgModule"]({type:g}),g.ɵinj=s["ɵɵdefineInjector"]({imports:[[i.CommonModule]]});const f={Visa:[{cardLength:16,blocks:[4,4,4,4]}],Mastercard:[{cardLength:16,blocks:[4,4,4,4]}],Maestro:[{cardLength:16,blocks:[4,4,4,4]},{cardLength:13,blocks:[4,4,5]},{cardLength:15,blocks:[4,6,5]},{cardLength:19,blocks:[4,4,4,4,3]}],Discover:[{cardLength:16,blocks:[4,4,4,4]}],"Diners Club":[{cardLength:14,blocks:[4,6,4]}],JCB:[{cardLength:16,blocks:[4,4,4,4]}],UnionPay:[{cardLength:16,blocks:[4,4,4,4]},{cardLength:19,blocks:[6,13]}],Amex:[{cardLength:15,blocks:[4,6,5]}],Other:[{cardLength:16,blocks:[4,4,4,4]}]};class x{transform(e,t){let n=f[t];null==n&&(n=f.Other);const i=e.length;let r=n.find((e=>e.cardLength==i));null==r&&(r=n[0]);const o=r.blocks,a=[];let s=0;return o.forEach((t=>{a.push(e.slice(s,s+t)),s+=t})),i>s&&a.push(e.slice(s)),a.join(" ")}}x.ɵfac=function(e){return new(e||x)},x.ɵpipe=s["ɵɵdefinePipe"]({name:"creditCardNumber",type:x,pure:!0});var y=n(17404),S=n(5712),b=n(19576);class w{}w.ɵfac=function(e){return new(e||w)},w.ɵmod=s["ɵɵdefineNgModule"]({type:w}),w.ɵinj=s["ɵɵdefineInjector"]({providers:[x,i.DatePipe,y.C,S.C,b.z],imports:[[g.forRoot({maxOpened:5,autoDismiss:!0,closeButton:!0}),i.CommonModule,r.FormsModule,r.ReactiveFormsModule],g]})},76899:(e,t,n)=>{"use strict";n.d(t,{H:()=>i});class i{constructor(e){Object.assign(this,e)}hasId(e){return null!=this.fullList&&this.fullList.filter((t=>t.id===e)).length>0}}},33652:(e,t,n)=>{"use strict";n.d(t,{n:()=>f});var i=n(40878),r=n(90859),o=n(3650),a=n(76761),s=n(58255),l=n(76899),d=n(53857),c=n(64184),p=n(41320),u=n(75402),m=n(3906),h=n(56815),v=n(44279),g=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class f{constructor(e,t,n,i,r,o){this.stateService=e,this.organizationService=t,this.folderService=n,this.cipherService=i,this.collectionService=r,this.policyService=o}storeCollapsedFilterNodes(e){return g(this,void 0,void 0,(function*(){yield this.stateService.setCollapsedGroupings(Array.from(e))}))}buildCollapsedFilterNodes(){return g(this,void 0,void 0,(function*(){return new Set(yield this.stateService.getCollapsedGroupings())}))}buildOrganizations(){return g(this,void 0,void 0,(function*(){return yield this.organizationService.getAll()}))}buildNestedFolders(e){const t=t=>g(this,void 0,void 0,(function*(){let n;if(null!=e){const i=yield this.cipherService.getAllDecrypted(),r=i.filter((t=>t.organizationId==e));n=t.filter((e=>r.filter((t=>t.folderId==e.id)).length>0||i.filter((t=>t.folderId==e.id)).length<1))}else n=t;const i=yield this.getAllFoldersNested(n);return new l.H({fullList:n,nestedList:i})}));return this.folderService.folderViews$.pipe((0,i.z)((e=>(0,r.D)(t(e)))))}buildCollections(e){return g(this,void 0,void 0,(function*(){const t=yield this.collectionService.getAllDecrypted();let n;n=null!=e?t.filter((t=>t.organizationId===e)):t;const i=yield this.collectionService.getAllNested(n);return new l.H({fullList:n,nestedList:i})}))}checkForSingleOrganizationPolicy(){return g(this,void 0,void 0,(function*(){return yield this.policyService.policyAppliesToUser(o.M.SingleOrg)}))}checkForPersonalOwnershipPolicy(){return g(this,void 0,void 0,(function*(){return yield this.policyService.policyAppliesToUser(o.M.PersonalOwnership)}))}getAllFoldersNested(e){return g(this,void 0,void 0,(function*(){const t=[];return e.forEach((e=>{const n=new s.a;n.id=e.id,n.revisionDate=e.revisionDate;const i=null!=e.name?e.name.replace(/^\/+|\/+$/g,"").split("/"):[];a.L.nestedTraverse(t,0,i,n,null,"/")})),t}))}getFolderNested(e){return g(this,void 0,void 0,(function*(){const t=yield this.getAllFoldersNested();return a.L.getTreeNodeObject(t,e)}))}}f.ɵfac=function(e){return new(e||f)(d["ɵɵinject"](c.b),d["ɵɵinject"](p.M),d["ɵɵinject"](u.s),d["ɵɵinject"](m.u),d["ɵɵinject"](h.a),d["ɵɵinject"](v.d))},f.ɵprov=d["ɵɵdefineInjectable"]({token:f,factory:f.ɵfac})},17404:(e,t,n)=>{"use strict";n.d(t,{C:()=>o});var i=n(53857),r=n(94820);class o{constructor(e){this.i18nService=e}transform(e,t,n,i){return this.i18nService.t(e,t,n,i)}}o.ɵfac=function(e){return new(e||o)(i["ɵɵdirectiveInject"](r.D,16))},o.ɵpipe=i["ɵɵdefinePipe"]({name:"i18n",type:o,pure:!0})},5712:(e,t,n)=>{"use strict";n.d(t,{C:()=>r});var i=n(53857);class r{transform(e,t,n,i,r){return null==e||0===e.length?[]:null==t||t.length<2?e:(t=t.trim().toLowerCase(),e.filter((e=>null!=n&&null!=e[n]&&e[n].toString().toLowerCase().indexOf(t)>-1||(null!=i&&null!=e[i]&&e[i].toString().toLowerCase().indexOf(t)>-1||null!=r&&null!=e[r]&&e[r].toString().toLowerCase().indexOf(t)>-1))))}}r.ɵfac=function(e){return new(e||r)},r.ɵpipe=i["ɵɵdefinePipe"]({name:"search",type:r,pure:!0})},19576:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var i=n(53857);class r{transform(e){return null==e?null:null==e.name||""===e.name.trim()?e.email:e.name}}r.ɵfac=function(e){return new(e||r)},r.ɵpipe=i["ɵɵdefinePipe"]({name:"userName",type:r,pure:!0})},36478:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var i=n(53857),r=n(94820),o=n(32100);class a{constructor(e,t){this.i18nService=e,this.platformUtilsService=t}showError(e){const t=this.i18nService.t("unexpectedError");let n=[];return null!=e&&"string"==typeof e?n.push(e):null==e||"object"!=typeof e?n.push(t):null!=e.validationErrors?n=n.concat(e.getAllMessages()):n.push(e.message?e.message:t),1===n.length?this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),n[0]):n.length>1&&this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),n,{timeout:5e3*n.length}),n}}a.ɵfac=function(e){return new(e||a)(i["ɵɵinject"](r.D),i["ɵɵinject"](o.P))},a.ɵprov=i["ɵɵdefineInjectable"]({token:a,factory:a.ɵfac})},55602:(e,t,n)=>{"use strict";n.d(t,{s:()=>i});class i{}},3906:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});class i{}},56815:(e,t,n)=>{"use strict";n.d(t,{a:()=>i});class i{}},92785:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});class i{}},65332:(e,t,n)=>{"use strict";n.d(t,{P:()=>i});class i{}},14424:(e,t,n)=>{"use strict";n.d(t,{T:()=>i});class i{}},86290:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});class i{}},75402:(e,t,n)=>{"use strict";n.d(t,{G:()=>r,s:()=>i});class i{}class r extends i{}},94820:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});class i{}},77128:(e,t,n)=>{"use strict";n.d(t,{J:()=>i});class i{}},27885:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});class i{}},41320:(e,t,n)=>{"use strict";n.d(t,{M:()=>i});class i{}},32100:(e,t,n)=>{"use strict";n.d(t,{P:()=>i});class i{}},44279:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});class i{}},64184:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});class i{}},72523:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});class i{}},20510:(e,t,n)=>{"use strict";n.d(t,{i:()=>i});class i{}},26702:(e,t,n)=>{"use strict";var i;n.d(t,{N:()=>i}),function(e){e[e.None=0]="None",e[e.Password=1]="Password"}(i||(i={}))},32001:(e,t,n)=>{"use strict";var i;n.d(t,{O:()=>i}),function(e){e[e.Login=1]="Login",e[e.SecureNote=2]="SecureNote",e[e.Card=3]="Card",e[e.Identity=4]="Identity"}(i||(i={}))},33133:(e,t,n)=>{"use strict";var i;n.d(t,{F:()=>i}),function(e){e[e.AesCbc256_B64=0]="AesCbc256_B64",e[e.AesCbc128_HmacSha256_B64=1]="AesCbc128_HmacSha256_B64",e[e.AesCbc256_HmacSha256_B64=2]="AesCbc256_HmacSha256_B64",e[e.Rsa2048_OaepSha256_B64=3]="Rsa2048_OaepSha256_B64",e[e.Rsa2048_OaepSha1_B64=4]="Rsa2048_OaepSha1_B64",e[e.Rsa2048_OaepSha256_HmacSha256_B64=5]="Rsa2048_OaepSha256_HmacSha256_B64",e[e.Rsa2048_OaepSha1_HmacSha256_B64=6]="Rsa2048_OaepSha1_HmacSha256_B64"}(i||(i={}))},70291:(e,t,n)=>{"use strict";var i;n.d(t,{t:()=>i}),function(e){e[e.User_LoggedIn=1e3]="User_LoggedIn",e[e.User_ChangedPassword=1001]="User_ChangedPassword",e[e.User_Updated2fa=1002]="User_Updated2fa",e[e.User_Disabled2fa=1003]="User_Disabled2fa",e[e.User_Recovered2fa=1004]="User_Recovered2fa",e[e.User_FailedLogIn=1005]="User_FailedLogIn",e[e.User_FailedLogIn2fa=1006]="User_FailedLogIn2fa",e[e.User_ClientExportedVault=1007]="User_ClientExportedVault",e[e.User_UpdatedTempPassword=1008]="User_UpdatedTempPassword",e[e.User_MigratedKeyToKeyConnector=1009]="User_MigratedKeyToKeyConnector",e[e.Cipher_Created=1100]="Cipher_Created",e[e.Cipher_Updated=1101]="Cipher_Updated",e[e.Cipher_Deleted=1102]="Cipher_Deleted",e[e.Cipher_AttachmentCreated=1103]="Cipher_AttachmentCreated",e[e.Cipher_AttachmentDeleted=1104]="Cipher_AttachmentDeleted",e[e.Cipher_Shared=1105]="Cipher_Shared",e[e.Cipher_UpdatedCollections=1106]="Cipher_UpdatedCollections",e[e.Cipher_ClientViewed=1107]="Cipher_ClientViewed",e[e.Cipher_ClientToggledPasswordVisible=1108]="Cipher_ClientToggledPasswordVisible",e[e.Cipher_ClientToggledHiddenFieldVisible=1109]="Cipher_ClientToggledHiddenFieldVisible",e[e.Cipher_ClientToggledCardCodeVisible=1110]="Cipher_ClientToggledCardCodeVisible",e[e.Cipher_ClientCopiedPassword=1111]="Cipher_ClientCopiedPassword",e[e.Cipher_ClientCopiedHiddenField=1112]="Cipher_ClientCopiedHiddenField",e[e.Cipher_ClientCopiedCardCode=1113]="Cipher_ClientCopiedCardCode",e[e.Cipher_ClientAutofilled=1114]="Cipher_ClientAutofilled",e[e.Cipher_SoftDeleted=1115]="Cipher_SoftDeleted",e[e.Cipher_Restored=1116]="Cipher_Restored",e[e.Cipher_ClientToggledCardNumberVisible=1117]="Cipher_ClientToggledCardNumberVisible",e[e.Collection_Created=1300]="Collection_Created",e[e.Collection_Updated=1301]="Collection_Updated",e[e.Collection_Deleted=1302]="Collection_Deleted",e[e.Group_Created=1400]="Group_Created",e[e.Group_Updated=1401]="Group_Updated",e[e.Group_Deleted=1402]="Group_Deleted",e[e.OrganizationUser_Invited=1500]="OrganizationUser_Invited",e[e.OrganizationUser_Confirmed=1501]="OrganizationUser_Confirmed",e[e.OrganizationUser_Updated=1502]="OrganizationUser_Updated",e[e.OrganizationUser_Removed=1503]="OrganizationUser_Removed",e[e.OrganizationUser_UpdatedGroups=1504]="OrganizationUser_UpdatedGroups",e[e.OrganizationUser_UnlinkedSso=1505]="OrganizationUser_UnlinkedSso",e[e.OrganizationUser_ResetPassword_Enroll=1506]="OrganizationUser_ResetPassword_Enroll",e[e.OrganizationUser_ResetPassword_Withdraw=1507]="OrganizationUser_ResetPassword_Withdraw",e[e.OrganizationUser_AdminResetPassword=1508]="OrganizationUser_AdminResetPassword",e[e.OrganizationUser_ResetSsoLink=1509]="OrganizationUser_ResetSsoLink",e[e.OrganizationUser_FirstSsoLogin=1510]="OrganizationUser_FirstSsoLogin",e[e.Organization_Updated=1600]="Organization_Updated",e[e.Organization_PurgedVault=1601]="Organization_PurgedVault",e[e.Organization_VaultAccessed=1603]="Organization_VaultAccessed",e[e.Organization_EnabledSso=1604]="Organization_EnabledSso",e[e.Organization_DisabledSso=1605]="Organization_DisabledSso",e[e.Organization_EnabledKeyConnector=1606]="Organization_EnabledKeyConnector",e[e.Organization_DisabledKeyConnector=1607]="Organization_DisabledKeyConnector",e[e.Organization_SponsorshipsSynced=1608]="Organization_SponsorshipsSynced",e[e.Policy_Updated=1700]="Policy_Updated",e[e.ProviderUser_Invited=1800]="ProviderUser_Invited",e[e.ProviderUser_Confirmed=1801]="ProviderUser_Confirmed",e[e.ProviderUser_Updated=1802]="ProviderUser_Updated",e[e.ProviderUser_Removed=1803]="ProviderUser_Removed",e[e.ProviderOrganization_Created=1900]="ProviderOrganization_Created",e[e.ProviderOrganization_Added=1901]="ProviderOrganization_Added",e[e.ProviderOrganization_Removed=1902]="ProviderOrganization_Removed",e[e.ProviderOrganization_VaultAccessed=1903]="ProviderOrganization_VaultAccessed"}(i||(i={}))},69064:(e,t,n)=>{"use strict";var i;n.d(t,{f:()=>i}),function(e){e[e.Text=0]="Text",e[e.Hidden=1]="Hidden",e[e.Boolean=2]="Boolean",e[e.Linked=3]="Linked"}(i||(i={}))},74862:(e,t,n)=>{"use strict";var i;n.d(t,{G3:()=>i,gY:()=>a,jg:()=>r,wH:()=>o}),function(e){e[e.PBKDF2_SHA256=0]="PBKDF2_SHA256"}(i||(i={}));const r=i.PBKDF2_SHA256,o=1e5,a=1e5},89028:(e,t,n)=>{"use strict";var i,r,o;n.d(t,{LC:()=>o,Wp:()=>r,qA:()=>i}),function(e){e[e.Username=100]="Username",e[e.Password=101]="Password"}(i||(i={})),function(e){e[e.CardholderName=300]="CardholderName",e[e.ExpMonth=301]="ExpMonth",e[e.ExpYear=302]="ExpYear",e[e.Code=303]="Code",e[e.Brand=304]="Brand",e[e.Number=305]="Number"}(r||(r={})),function(e){e[e.Title=400]="Title",e[e.MiddleName=401]="MiddleName",e[e.Address1=402]="Address1",e[e.Address2=403]="Address2",e[e.Address3=404]="Address3",e[e.City=405]="City",e[e.State=406]="State",e[e.PostalCode=407]="PostalCode",e[e.Country=408]="Country",e[e.Company=409]="Company",e[e.Email=410]="Email",e[e.Phone=411]="Phone",e[e.Ssn=412]="Ssn",e[e.Username=413]="Username",e[e.PassportNumber=414]="PassportNumber",e[e.LicenseNumber=415]="LicenseNumber",e[e.FirstName=416]="FirstName",e[e.LastName=417]="LastName",e[e.FullName=418]="FullName"}(o||(o={}))},63628:(e,t,n)=>{"use strict";var i;n.d(t,{P:()=>i}),function(e){e[e.AccessEventLogs=0]="AccessEventLogs",e[e.AccessImportExport=1]="AccessImportExport",e[e.AccessReports=2]="AccessReports",e[e.ManageAllCollections=3]="ManageAllCollections",e[e.ManageAssignedCollections=4]="ManageAssignedCollections",e[e.ManageGroups=5]="ManageGroups",e[e.ManageOrganization=6]="ManageOrganization",e[e.ManagePolicies=7]="ManagePolicies",e[e.ManageProvider=8]="ManageProvider",e[e.ManageUsers=9]="ManageUsers",e[e.ManageUsersPassword=10]="ManageUsersPassword",e[e.CreateNewCollections=11]="CreateNewCollections",e[e.EditAnyCollection=12]="EditAnyCollection",e[e.DeleteAnyCollection=13]="DeleteAnyCollection",e[e.EditAssignedCollections=14]="EditAssignedCollections",e[e.DeleteAssignedCollections=15]="DeleteAssignedCollections",e[e.ManageSso=16]="ManageSso",e[e.ManageBilling=17]="ManageBilling"}(i||(i={}))},3650:(e,t,n)=>{"use strict";var i;n.d(t,{M:()=>i}),function(e){e[e.TwoFactorAuthentication=0]="TwoFactorAuthentication",e[e.MasterPassword=1]="MasterPassword",e[e.PasswordGenerator=2]="PasswordGenerator",e[e.SingleOrg=3]="SingleOrg",e[e.RequireSso=4]="RequireSso",e[e.PersonalOwnership=5]="PersonalOwnership",e[e.DisableSend=6]="DisableSend",e[e.SendOptions=7]="SendOptions",e[e.ResetPassword=8]="ResetPassword",e[e.MaximumVaultTimeout=9]="MaximumVaultTimeout",e[e.DisablePersonalVaultExport=10]="DisablePersonalVaultExport"}(i||(i={}))},97596:(e,t,n)=>{"use strict";var i;n.d(t,{x:()=>i}),function(e){e[e.Generic=0]="Generic"}(i||(i={}))},41122:(e,t,n)=>{"use strict";var i;n.d(t,{I:()=>i}),function(e){e[e.Domain=0]="Domain",e[e.Host=1]="Host",e[e.StartsWith=2]="StartsWith",e[e.Exact=3]="Exact",e[e.RegularExpression=4]="RegularExpression",e[e.Never=5]="Never"}(i||(i={}))},24540:(e,t,n)=>{"use strict";var i;n.d(t,{R:()=>i}),function(e){e[e.MasterPassword=0]="MasterPassword",e[e.OTP=1]="OTP"}(i||(i={}))},97278:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});class i{constructor(e,t){this.propertyKey=e,this._i18nKey=t}get i18nKey(){var e;return null!==(e=this._i18nKey)&&void 0!==e?e:this.propertyKey}}function r(e,t){return(n,r)=>{null==n.linkedFieldOptions&&(n.linkedFieldOptions=new Map),n.linkedFieldOptions.set(e,new i(r,t))}}},76761:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});class i{constructor(e,t,n){this.children=[],this.parent=n,this.node=e,this.node.name=t}}class r{static nestedTraverse(e,t,n,o,a,s){if(n.length<=t)return;const l=t===n.length-1,d=n[t];for(let c=0;c<e.length;c++)if(e[c].node.name===n[t])return l&&e[c].node.id!==o.id?void e.push(new i(o,d,a)):void r.nestedTraverse(e[c].children,t+1,n,o,e[c].node,s);if(0===e.filter((e=>e.node.name===d)).length){if(l)return void e.push(new i(o,d,a));const c=n[t]+s+n[t+1];r.nestedTraverse(e,0,[c,...n.slice(t+2)],o,a,s)}}static getTreeNodeObject(e,t){for(let n=0;n<e.length;n++){if(e[n].node.id===t)return e[n];if(null!=e[n].children){const i=r.getTreeNodeObject(e[n].children,t);if(null!==i)return i}}return null}}},14512:(e,t,n)=>{"use strict";n.d(t,{c:()=>l});var i={};function r(e){return null}function o(e){return!0}n.r(i),n.d(i,{getDomain:()=>r,isValid:()=>o});var a=n(34406);const s="undefined"==typeof window?n(883):null;class l{static init(){l.inited||(l.inited=!0,l.isNode=void 0!==a&&null!=a.release&&"node"===a.release.name,l.isBrowser="undefined"!=typeof window,l.isMobileBrowser=l.isBrowser&&this.isMobile(window),l.isAppleMobileBrowser=l.isBrowser&&this.isAppleMobile(window),l.global=l.isNode&&!l.isBrowser?n.g:window)}static fromB64ToArray(e){if(l.isNode)return new Uint8Array(Buffer.from(e,"base64"));{const t=window.atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}}static fromUrlB64ToArray(e){return l.fromB64ToArray(l.fromUrlB64ToB64(e))}static fromHexToArray(e){if(l.isNode)return new Uint8Array(Buffer.from(e,"hex"));{const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n/2]=parseInt(e.substr(n,2),16);return t}}static fromUtf8ToArray(e){if(l.isNode)return new Uint8Array(Buffer.from(e,"utf8"));{const t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}}static fromByteStringToArray(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}static fromBufferToB64(e){if(l.isNode)return Buffer.from(e).toString("base64");{let t="";const n=new Uint8Array(e);for(let e=0;e<n.byteLength;e++)t+=String.fromCharCode(n[e]);return window.btoa(t)}}static fromBufferToUrlB64(e){return l.fromB64toUrlB64(l.fromBufferToB64(e))}static fromB64toUrlB64(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}static fromBufferToUtf8(e){if(l.isNode)return Buffer.from(e).toString("utf8");{const t=new Uint8Array(e),n=String.fromCharCode.apply(null,t);return decodeURIComponent(escape(n))}}static fromBufferToByteString(e){return String.fromCharCode.apply(null,new Uint8Array(e))}static fromBufferToHex(e){if(l.isNode)return Buffer.from(e).toString("hex");{const t=new Uint8Array(e);return Array.prototype.map.call(t,(e=>("00"+e.toString(16)).slice(-2))).join("")}}static fromUrlB64ToB64(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Illegal base64url string!")}return t}static fromUrlB64ToUtf8(e){return l.fromB64ToUtf8(l.fromUrlB64ToB64(e))}static fromUtf8ToB64(e){return l.isNode?Buffer.from(e,"utf8").toString("base64"):decodeURIComponent(escape(window.btoa(e)))}static fromUtf8ToUrlB64(e){return l.fromBufferToUrlB64(l.fromUtf8ToArray(e))}static fromB64ToUtf8(e){return l.isNode?Buffer.from(e,"base64").toString("utf8"):decodeURIComponent(escape(window.atob(e)))}static newGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}static isGuid(e){return RegExp(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/,"i").test(e)}static getHostname(e){const t=l.getUrl(e);try{return null!=t&&""!==t.hostname?t.hostname:null}catch(n){return null}}static getHost(e){const t=l.getUrl(e);try{return null!=t&&""!==t.host?t.host:null}catch(n){return null}}static getDomain(e){if(null==e)return null;if(""===(e=e.trim()))return null;if(e.startsWith("data:"))return null;let t=e.startsWith("http://")||e.startsWith("https://");if(!t&&e.indexOf("://")<0&&l.tldEndingRegex.test(e)&&e.indexOf("@")<0&&(e="http://"+e,t=!0),t)try{const t=l.getUrlObject(e);if(!(null==(null==i?void 0:o)||(t.hostname,!0)))return null;if("localhost"===t.hostname||l.validIpAddress(t.hostname))return t.hostname;const n=null!=i&&null!=r?(t.hostname,null):null;return null!=n?n:t.hostname}catch(n){}try{const e=null;if(null!=e)return e}catch(a){return null}return null}static getQueryParams(e){const t=l.getUrl(e);if(null==t||null==t.search||""===t.search)return null;const n=new Map;return("?"===t.search[0]?t.search.substr(1):t.search).split("&").forEach((e=>{const t=e.split("=");t.length<1||n.set(decodeURIComponent(t[0]).toLowerCase(),null==t[1]?"":decodeURIComponent(t[1]))})),n}static getSortFunction(e,t){return(n,i)=>null==n[t]&&null!=i[t]?-1:null!=n[t]&&null==i[t]?1:null==n[t]&&null==i[t]?0:e.collator?e.collator.compare(n[t],i[t]):n[t].localeCompare(i[t])}static isNullOrWhitespace(e){return null==e||"string"!=typeof e||""===e.trim()}static isNullOrEmpty(e){return null==e||"string"!=typeof e||""==e}static nameOf(e){return e}static assign(e,t){return Object.assign(e,t)}static iterateEnum(e){return Object.keys(e).filter((e=>Number.isNaN(+e))).map((t=>e[t]))}static getUrl(e){if(null==e)return null;if(""===(e=e.trim()))return null;let t=l.getUrlObject(e);if(null==t){!(0===e.indexOf("http://")||0===e.indexOf("https://"))&&e.indexOf(".")>-1&&(t=l.getUrlObject("http://"+e))}return t}static camelToPascalCase(e){return e.charAt(0).toUpperCase()+e.slice(1)}static validIpAddress(e){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}static isMobile(e){let t=!1;var n;return n=e.navigator.userAgent||e.navigator.vendor||e.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)))&&(t=!0),t||null!=e.navigator.userAgent.match(/iPad/i)}static isAppleMobile(e){return null!=e.navigator.userAgent.match(/iPhone/i)||null!=e.navigator.userAgent.match(/iPad/i)}static getUrlObject(e){try{if(null!=s)return new s.URL(e);if("function"==typeof URL)return new URL(e);if(null!=window){const t=e.indexOf("://")>-1;if(!t&&e.indexOf(".")>-1)e="http://"+e;else if(!t)return null;const n=window.document.createElement("a");return n.href=e,n}}catch(t){}return null}}l.inited=!1,l.isNode=!1,l.isBrowser=!0,l.isMobileBrowser=!1,l.isAppleMobileBrowser=!1,l.global=null,l.tldEndingRegex=/.*\.(com|net|org|edu|uk|gov|ca|de|jp|fr|au|ru|ch|io|es|us|co|xyz|info|ly|mil)$/,l.regexpEmojiPresentation=/(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])/g,l.init()},97715:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var i=n(33459);class r extends i.c{constructor(e=null){super(e),null!=e&&(this.cardholderName=this.getResponseProperty("CardholderName"),this.brand=this.getResponseProperty("Brand"),this.number=this.getResponseProperty("Number"),this.expMonth=this.getResponseProperty("ExpMonth"),this.expYear=this.getResponseProperty("ExpYear"),this.code=this.getResponseProperty("Code"))}}},8116:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});var i=n(33459);class r extends i.c{constructor(e=null){super(e),null!=e&&(this.type=this.getResponseProperty("Type"),this.name=this.getResponseProperty("Name"),this.value=this.getResponseProperty("Value"),this.linkedId=this.getResponseProperty("linkedId"))}}},96039:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var i=n(33459);class r extends i.c{constructor(e=null){super(e),null!=e&&(this.title=this.getResponseProperty("Title"),this.firstName=this.getResponseProperty("FirstName"),this.middleName=this.getResponseProperty("MiddleName"),this.lastName=this.getResponseProperty("LastName"),this.address1=this.getResponseProperty("Address1"),this.address2=this.getResponseProperty("Address2"),this.address3=this.getResponseProperty("Address3"),this.city=this.getResponseProperty("City"),this.state=this.getResponseProperty("State"),this.postalCode=this.getResponseProperty("PostalCode"),this.country=this.getResponseProperty("Country"),this.company=this.getResponseProperty("Company"),this.email=this.getResponseProperty("Email"),this.phone=this.getResponseProperty("Phone"),this.ssn=this.getResponseProperty("SSN"),this.username=this.getResponseProperty("Username"),this.passportNumber=this.getResponseProperty("PassportNumber"),this.licenseNumber=this.getResponseProperty("LicenseNumber"))}}},4181:(e,t,n)=>{"use strict";n.d(t,{I:()=>o});var i=n(33459),r=n(19841);class o extends i.c{constructor(e=null){if(super(e),null==e)return;this.username=this.getResponseProperty("Username"),this.password=this.getResponseProperty("Password"),this.passwordRevisionDate=this.getResponseProperty("PasswordRevisionDate"),this.totp=this.getResponseProperty("Totp"),this.autofillOnPageLoad=this.getResponseProperty("AutofillOnPageLoad");const t=this.getResponseProperty("Uris");null!=t&&(this.uris=t.map((e=>new r.l(e))))}}},19841:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});var i=n(33459);class r extends i.c{constructor(e=null){if(super(e),this.match=null,null==e)return;this.uri=this.getResponseProperty("Uri");const t=this.getResponseProperty("Match");this.match=null!=t?t:null}}},83250:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});var i=n(33459);class r extends i.c{constructor(e=null){super(e),null!=e&&(this.type=this.getResponseProperty("Type"))}}},23349:(e,t,n)=>{"use strict";n.d(t,{T:()=>i});class i{constructor(e){null!=e&&(this.id=e.id,this.url=e.url,this.fileName=e.fileName,this.key=e.key,this.size=e.size,this.sizeName=e.sizeName)}}},18700:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});class i{constructor(e){null!=e&&(this.cardholderName=e.cardholderName,this.brand=e.brand,this.number=e.number,this.expMonth=e.expMonth,this.expYear=e.expYear,this.code=e.code)}}},54408:(e,t,n)=>{"use strict";n.d(t,{O:()=>p});var i=n(32001),r=n(23349),o=n(18700),a=n(39863),s=n(48182),l=n(8146),d=n(98555),c=n(35288);class p{constructor(e,t){if(null!=e){switch(this.id=e.id,this.organizationId=e.organizationId,this.folderId=e.folderId,this.edit=e.edit,this.viewPassword=e.viewPassword,this.organizationUseTotp=e.organizationUseTotp,this.favorite=e.favorite,this.revisionDate=e.revisionDate,this.type=e.type,this.name=e.name,this.notes=e.notes,this.collectionIds=null!=t?t:e.collectionIds,this.deletedDate=e.deletedDate,this.reprompt=e.reprompt,this.type){case i.O.Login:this.login=new l.V(e.login);break;case i.O.SecureNote:this.secureNote=new c.a(e.secureNote);break;case i.O.Card:this.card=new o.w(e.card);break;case i.O.Identity:this.identity=new s.h(e.identity)}null!=e.fields&&(this.fields=e.fields.map((e=>new a.t(e)))),null!=e.attachments&&(this.attachments=e.attachments.map((e=>new r.T(e)))),null!=e.passwordHistory&&(this.passwordHistory=e.passwordHistory.map((e=>new d.t(e))))}}}},62247:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});class i{constructor(e){this.id=e.id,this.organizationId=e.organizationId,this.name=e.name,this.externalId=e.externalId,this.readOnly=e.readOnly}}},39863:(e,t,n)=>{"use strict";n.d(t,{t:()=>i});class i{constructor(e){null!=e&&(this.type=e.type,this.name=e.name,this.value=e.value,this.linkedId=e.linkedId)}}},48182:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});class i{constructor(e){null!=e&&(this.title=e.title,this.firstName=e.firstName,this.middleName=e.middleName,this.lastName=e.lastName,this.address1=e.address1,this.address2=e.address2,this.address3=e.address3,this.city=e.city,this.state=e.state,this.postalCode=e.postalCode,this.country=e.country,this.company=e.company,this.email=e.email,this.phone=e.phone,this.ssn=e.ssn,this.username=e.username,this.passportNumber=e.passportNumber,this.licenseNumber=e.licenseNumber)}}},8146:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});var i=n(90904);class r{constructor(e){null!=e&&(this.username=e.username,this.password=e.password,this.passwordRevisionDate=e.passwordRevisionDate,this.totp=e.totp,this.autofillOnPageLoad=e.autofillOnPageLoad,e.uris&&(this.uris=e.uris.map((e=>new i.h(e)))))}}},90904:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});class i{constructor(e){this.match=null,null!=e&&(this.uri=e.uri,this.match=e.match)}}},98555:(e,t,n)=>{"use strict";n.d(t,{t:()=>i});class i{constructor(e){null!=e&&(this.password=e.password,this.lastUsedDate=e.lastUsedDate)}}},35288:(e,t,n)=>{"use strict";n.d(t,{a:()=>i});class i{constructor(e){null!=e&&(this.type=e.type)}}},73317:(e,t,n)=>{"use strict";n.d(t,{P:()=>d});var i=n(14512),r=n(23349);class o{constructor(e){this.id=null,this.url=null,this.size=null,this.sizeName=null,this.fileName=null,this.key=null,e&&(this.id=e.id,this.url=e.url,this.size=e.size,this.sizeName=e.sizeName)}get fileSize(){try{if(null!=this.size)return parseInt(this.size,null)}catch(e){}return 0}}var a=n(77547),s=n(42738),l=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class d extends a.Z{constructor(e){super(),null!=e&&(this.size=e.size,this.buildDomainModel(this,e,{id:null,url:null,sizeName:null,fileName:null,key:null},["id","url","sizeName"]))}decrypt(e,t){return l(this,void 0,void 0,(function*(){const n=yield this.decryptObj(new o(this),{fileName:null},e,t);if(null!=this.key){let o;const a=i.c.global.bitwardenContainerService;if(!a)throw new Error("global bitwardenContainerService not initialized.");o=a.getCryptoService();try{const i=yield o.getOrgKey(e),r=yield o.decryptToBytes(this.key,null!=i?i:t);n.key=new s.N(r)}catch(r){}}return n}))}toAttachmentData(){const e=new r.T;return e.size=this.size,this.buildDataModel(this,e,{id:null,url:null,sizeName:null,fileName:null,key:null},["id","url","sizeName"]),e}}},47707:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(18700),r=n(60337),o=n(77547);class a extends o.Z{constructor(e){super(),null!=e&&this.buildDomainModel(this,e,{cardholderName:null,brand:null,number:null,expMonth:null,expYear:null,code:null},[])}decrypt(e,t){return this.decryptObj(new r._,{cardholderName:null,brand:null,number:null,expMonth:null,expYear:null,code:null},e,t)}toCardData(){const e=new i.w;return this.buildDataModel(this,e,{cardholderName:null,brand:null,number:null,expMonth:null,expYear:null,code:null}),e}}},11975:(e,t,n)=>{"use strict";n.d(t,{t:()=>v});var i=n(32001),r=n(54408),o=n(91414),a=n(73317),s=n(47707),l=n(77547),d=n(67923),c=n(1381),p=n(25640),u=n(81057),m=n(84089),h=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class v extends l.Z{constructor(e,t=null){if(super(),null!=e){switch(this.buildDomainModel(this,e,{id:null,organizationId:null,folderId:null,name:null,notes:null},["id","organizationId","folderId"]),this.type=e.type,this.favorite=e.favorite,this.organizationUseTotp=e.organizationUseTotp,this.edit=e.edit,null!=e.viewPassword?this.viewPassword=e.viewPassword:this.viewPassword=!0,this.revisionDate=null!=e.revisionDate?new Date(e.revisionDate):null,this.collectionIds=e.collectionIds,this.localData=t,this.deletedDate=null!=e.deletedDate?new Date(e.deletedDate):null,this.reprompt=e.reprompt,this.type){case i.O.Login:this.login=new p.m(e.login);break;case i.O.SecureNote:this.secureNote=new m.k(e.secureNote);break;case i.O.Card:this.card=new s.Z(e.card);break;case i.O.Identity:this.identity=new c.i(e.identity)}null!=e.attachments?this.attachments=e.attachments.map((e=>new a.P(e))):this.attachments=null,null!=e.fields?this.fields=e.fields.map((e=>new d.g(e))):this.fields=null,null!=e.passwordHistory?this.passwordHistory=e.passwordHistory.map((e=>new u.r(e))):this.passwordHistory=null}}decrypt(e){return h(this,void 0,void 0,(function*(){const t=new o.$(this);switch(yield this.decryptObj(t,{name:null,notes:null},this.organizationId,e),this.type){case i.O.Login:t.login=yield this.login.decrypt(this.organizationId,e);break;case i.O.SecureNote:t.secureNote=yield this.secureNote.decrypt(this.organizationId,e);break;case i.O.Card:t.card=yield this.card.decrypt(this.organizationId,e);break;case i.O.Identity:t.identity=yield this.identity.decrypt(this.organizationId,e)}const n=this.organizationId;if(null!=this.attachments&&this.attachments.length>0){const i=[];yield this.attachments.reduce(((t,r)=>t.then((()=>r.decrypt(n,e))).then((e=>{i.push(e)}))),Promise.resolve()),t.attachments=i}if(null!=this.fields&&this.fields.length>0){const i=[];yield this.fields.reduce(((t,r)=>t.then((()=>r.decrypt(n,e))).then((e=>{i.push(e)}))),Promise.resolve()),t.fields=i}if(null!=this.passwordHistory&&this.passwordHistory.length>0){const i=[];yield this.passwordHistory.reduce(((t,r)=>t.then((()=>r.decrypt(n,e))).then((e=>{i.push(e)}))),Promise.resolve()),t.passwordHistory=i}return t}))}toCipherData(){const e=new r.O;switch(e.id=this.id,e.organizationId=this.organizationId,e.folderId=this.folderId,e.edit=this.edit,e.viewPassword=this.viewPassword,e.organizationUseTotp=this.organizationUseTotp,e.favorite=this.favorite,e.revisionDate=null!=this.revisionDate?this.revisionDate.toISOString():null,e.type=this.type,e.collectionIds=this.collectionIds,e.deletedDate=null!=this.deletedDate?this.deletedDate.toISOString():null,e.reprompt=this.reprompt,this.buildDataModel(this,e,{name:null,notes:null}),e.type){case i.O.Login:e.login=this.login.toLoginData();break;case i.O.SecureNote:e.secureNote=this.secureNote.toSecureNoteData();break;case i.O.Card:e.card=this.card.toCardData();break;case i.O.Identity:e.identity=this.identity.toIdentityData()}return null!=this.fields&&(e.fields=this.fields.map((e=>e.toFieldData()))),null!=this.attachments&&(e.attachments=this.attachments.map((e=>e.toAttachmentData()))),null!=this.passwordHistory&&(e.passwordHistory=this.passwordHistory.map((e=>e.toPasswordHistoryData()))),e}}},81394:(e,t,n)=>{"use strict";n.d(t,{F:()=>o});var i=n(70368),r=n(77547);class o extends r.Z{constructor(e){super(),null!=e&&this.buildDomainModel(this,e,{id:null,organizationId:null,name:null,externalId:null,readOnly:null,hidePasswords:null},["id","organizationId","externalId","readOnly","hidePasswords"])}decrypt(){return this.decryptObj(new i.n(this),{name:null},this.organizationId)}}},77547:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(71498),r=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class o{buildDomainModel(e,t,n,r=[]){for(const o in n){if(!n.hasOwnProperty(o))continue;const a=t[n[o]||o];r.indexOf(o)>-1?e[o]=a||null:e[o]=a?new i._(a):null}}buildDataModel(e,t,n,i=[]){for(const r in n){if(!n.hasOwnProperty(r))continue;const o=e[n[r]||r];i.indexOf(r)>-1?t[r]=null!=o?o:null:t[r]=null!=o?o.encryptedString:null}}decryptObj(e,t,n,i=null){return r(this,void 0,void 0,(function*(){const r=[],o=this;for(const a in t)t.hasOwnProperty(a)&&function(a){const s=Promise.resolve().then((()=>{const e=t[a]||a;return o[e]?o[e].decrypt(n,i):null})).then((t=>{e[a]=t}));r.push(s)}(a);return yield Promise.all(r),e}))}}},71498:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var i=n(33133),r=n(14512),o=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class a{constructor(e,t,n,r){if(null!=t){const i=e;return this.encryptedString=null!=n?i+"."+n+"|"+t:i+"."+t,null!=r&&(this.encryptedString+="|"+r),this.encryptionType=i,this.data=t,this.iv=n,void(this.mac=r)}if(this.encryptedString=e,!this.encryptedString)return;const o=this.encryptedString.split(".");let a=null;if(2===o.length)try{this.encryptionType=parseInt(o[0],null),a=o[1].split("|")}catch(s){return}else a=this.encryptedString.split("|"),this.encryptionType=3===a.length?i.F.AesCbc128_HmacSha256_B64:i.F.AesCbc256_B64;switch(this.encryptionType){case i.F.AesCbc128_HmacSha256_B64:case i.F.AesCbc256_HmacSha256_B64:if(3!==a.length)return;this.iv=a[0],this.data=a[1],this.mac=a[2];break;case i.F.AesCbc256_B64:if(2!==a.length)return;this.iv=a[0],this.data=a[1];break;case i.F.Rsa2048_OaepSha256_B64:case i.F.Rsa2048_OaepSha1_B64:if(1!==a.length)return;this.data=a[0];break;default:return}}decrypt(e,t=null){return o(this,void 0,void 0,(function*(){if(null!=this.decryptedValue)return this.decryptedValue;let n;const i=r.c.global.bitwardenContainerService;if(!i)throw new Error("global bitwardenContainerService not initialized.");n=i.getCryptoService();try{null==t&&(t=yield n.getOrgKey(e)),this.decryptedValue=yield n.decryptToUtf8(this,t)}catch(o){this.decryptedValue="[error: cannot decrypt]"}return this.decryptedValue}))}}},67923:(e,t,n)=>{"use strict";n.d(t,{g:()=>a});var i=n(39863),r=n(98197),o=n(77547);class a extends o.Z{constructor(e){super(),null!=e&&(this.type=e.type,this.linkedId=e.linkedId,this.buildDomainModel(this,e,{name:null,value:null},[]))}decrypt(e,t){return this.decryptObj(new r.k(this),{name:null,value:null},e,t)}toFieldData(){const e=new i.t;return this.buildDataModel(this,e,{name:null,value:null,type:null,linkedId:null},["type","linkedId"]),e}}},86212:(e,t,n)=>{"use strict";n.d(t,{g:()=>o});var i=n(58255),r=n(77547);class o extends r.Z{constructor(e){super(),null!=e&&(this.buildDomainModel(this,e,{id:null,name:null},["id"]),this.revisionDate=null!=e.revisionDate?new Date(e.revisionDate):null)}decrypt(){return this.decryptObj(new i.a(this),{name:null},null)}}},1381:(e,t,n)=>{"use strict";n.d(t,{i:()=>a});var i=n(48182),r=n(65893),o=n(77547);class a extends o.Z{constructor(e){super(),null!=e&&this.buildDomainModel(this,e,{title:null,firstName:null,middleName:null,lastName:null,address1:null,address2:null,address3:null,city:null,state:null,postalCode:null,country:null,company:null,email:null,phone:null,ssn:null,username:null,passportNumber:null,licenseNumber:null},[])}decrypt(e,t){return this.decryptObj(new r.t,{title:null,firstName:null,middleName:null,lastName:null,address1:null,address2:null,address3:null,city:null,state:null,postalCode:null,country:null,company:null,email:null,phone:null,ssn:null,username:null,passportNumber:null,licenseNumber:null},e,t)}toIdentityData(){const e=new i.h;return this.buildDataModel(this,e,{title:null,firstName:null,middleName:null,lastName:null,address1:null,address2:null,address3:null,city:null,state:null,postalCode:null,country:null,company:null,email:null,phone:null,ssn:null,username:null,passportNumber:null,licenseNumber:null}),e}}},25640:(e,t,n)=>{"use strict";n.d(t,{m:()=>l});var i=n(8146),r=n(83297),o=n(77547),a=n(4477),s=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};class l extends o.Z{constructor(e){super(),null!=e&&(this.passwordRevisionDate=null!=e.passwordRevisionDate?new Date(e.passwordRevisionDate):null,this.autofillOnPageLoad=e.autofillOnPageLoad,this.buildDomainModel(this,e,{username:null,password:null,totp:null},[]),e.uris&&(this.uris=[],e.uris.forEach((e=>{this.uris.push(new a.c(e))}))))}decrypt(e,t){return s(this,void 0,void 0,(function*(){const n=yield this.decryptObj(new r.q(this),{username:null,password:null,totp:null},e,t);if(null!=this.uris){n.uris=[];for(let i=0;i<this.uris.length;i++){const r=yield this.uris[i].decrypt(e,t);n.uris.push(r)}}return n}))}toLoginData(){const e=new i.V;return e.passwordRevisionDate=null!=this.passwordRevisionDate?this.passwordRevisionDate.toISOString():null,e.autofillOnPageLoad=this.autofillOnPageLoad,this.buildDataModel(this,e,{username:null,password:null,totp:null}),null!=this.uris&&this.uris.length>0&&(e.uris=[],this.uris.forEach((t=>{e.uris.push(t.toLoginUriData())}))),e}}},4477:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var i=n(90904),r=n(5644),o=n(77547);class a extends o.Z{constructor(e){super(),null!=e&&(this.match=e.match,this.buildDomainModel(this,e,{uri:null},[]))}decrypt(e,t){return this.decryptObj(new r.E(this),{uri:null},e,t)}toLoginUriData(){const e=new i.h;return this.buildDataModel(this,e,{uri:null,match:null},["match"]),e}}},43548:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});var i=n(77547);class r extends i.Z{constructor(){super(...arguments),this.minComplexity=0,this.minLength=0,this.requireUpper=!1,this.requireLower=!1,this.requireNumbers=!1,this.requireSpecial=!1}}},81057:(e,t,n)=>{"use strict";n.d(t,{r:()=>a});var i=n(98555),r=n(42078),o=n(77547);class a extends o.Z{constructor(e){super(),null!=e&&(this.buildDomainModel(this,e,{password:null}),this.lastUsedDate=new Date(e.lastUsedDate))}decrypt(e,t){return this.decryptObj(new r.i(this),{password:null},e,t)}toPasswordHistoryData(){const e=new i.t;return e.lastUsedDate=this.lastUsedDate.toISOString(),this.buildDataModel(this,e,{password:null}),e}}},84089:(e,t,n)=>{"use strict";n.d(t,{k:()=>a});var i=n(35288),r=n(99053),o=n(77547);class a extends o.Z{constructor(e){super(),null!=e&&(this.type=e.type)}decrypt(e,t){return Promise.resolve(new r.z(this))}toSecureNoteData(){const e=new i.a;return e.type=this.type,e}}},42738:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var i=n(33133),r=n(14512);class o{constructor(e,t){if(null==e)throw new Error("Must provide key");if(null==t)if(32===e.byteLength)t=i.F.AesCbc256_B64;else{if(64!==e.byteLength)throw new Error("Unable to determine encType.");t=i.F.AesCbc256_HmacSha256_B64}if(this.key=e,this.encType=t,t===i.F.AesCbc256_B64&&32===e.byteLength)this.encKey=e,this.macKey=null;else if(t===i.F.AesCbc128_HmacSha256_B64&&32===e.byteLength)this.encKey=e.slice(0,16),this.macKey=e.slice(16,32);else{if(t!==i.F.AesCbc256_HmacSha256_B64||64!==e.byteLength)throw new Error("Unsupported encType/key length.");this.encKey=e.slice(0,32),this.macKey=e.slice(32,64)}null!=this.key&&(this.keyB64=r.c.fromBufferToB64(this.key)),null!=this.encKey&&(this.encKeyB64=r.c.fromBufferToB64(this.encKey)),null!=this.macKey&&(this.macKeyB64=r.c.fromBufferToB64(this.macKey))}static initFromJson(e){return null==e||(null!=e.keyB64&&(e.key=r.c.fromB64ToArray(e.keyB64).buffer),null!=e.encKeyB64&&(e.encKey=r.c.fromB64ToArray(e.encKeyB64).buffer),null!=e.macKeyB64&&(e.macKey=r.c.fromB64ToArray(e.macKeyB64).buffer)),e}}},23702:(e,t,n)=>{"use strict";n.d(t,{R:()=>O});var i=n(26702),r=n(32001),o=n(11975),a=n(71498),s=n(91414),l=n(47707),d=n(60337);class c{constructor(e){var t,n,i,r,o,a;null!=e&&(e instanceof d._?(this.cardholderName=e.cardholderName,this.brand=e.brand,this.number=e.number,this.expMonth=e.expMonth,this.expYear=e.expYear,this.code=e.code):(this.cardholderName=null===(t=e.cardholderName)||void 0===t?void 0:t.encryptedString,this.brand=null===(n=e.brand)||void 0===n?void 0:n.encryptedString,this.number=null===(i=e.number)||void 0===i?void 0:i.encryptedString,this.expMonth=null===(r=e.expMonth)||void 0===r?void 0:r.encryptedString,this.expYear=null===(o=e.expYear)||void 0===o?void 0:o.encryptedString,this.code=null===(a=e.code)||void 0===a?void 0:a.encryptedString))}static template(){const e=new c;return e.cardholderName="John Doe",e.brand="visa",e.number="4242424242424242",e.expMonth="04",e.expYear="2023",e.code="123",e}static toView(e,t=new d._){return t.cardholderName=e.cardholderName,t.brand=e.brand,t.number=e.number,t.expMonth=e.expMonth,t.expYear=e.expYear,t.code=e.code,t}static toDomain(e,t=new l.Z){return t.cardholderName=null!=e.cardholderName?new a._(e.cardholderName):null,t.brand=null!=e.brand?new a._(e.brand):null,t.number=null!=e.number?new a._(e.number):null,t.expMonth=null!=e.expMonth?new a._(e.expMonth):null,t.expYear=null!=e.expYear?new a._(e.expYear):null,t.code=null!=e.code?new a._(e.code):null,t}}var p=n(69064),u=n(67923),m=n(98197);class h{constructor(e){var t,n;null!=e&&(e instanceof m.k?(this.name=e.name,this.value=e.value):(this.name=null===(t=e.name)||void 0===t?void 0:t.encryptedString,this.value=null===(n=e.value)||void 0===n?void 0:n.encryptedString),this.type=e.type,this.linkedId=e.linkedId)}static template(){const e=new h;return e.name="Field name",e.value="Some value",e.type=p.f.Text,e}static toView(e,t=new m.k){return t.type=e.type,t.value=e.value,t.name=e.name,t.linkedId=e.linkedId,t}static toDomain(e,t=new u.g){return t.type=e.type,t.value=null!=e.value?new a._(e.value):null,t.name=null!=e.name?new a._(e.name):null,t.linkedId=e.linkedId,t}}var v=n(1381),g=n(65893);class f{constructor(e){var t,n,i,r,o,a,s,l,d,c,p,u,m,h,v,f,x,y;null!=e&&(e instanceof g.t?(this.title=e.title,this.firstName=e.firstName,this.middleName=e.middleName,this.lastName=e.lastName,this.address1=e.address1,this.address2=e.address2,this.address3=e.address3,this.city=e.city,this.state=e.state,this.postalCode=e.postalCode,this.country=e.country,this.company=e.company,this.email=e.email,this.phone=e.phone,this.ssn=e.ssn,this.username=e.username,this.passportNumber=e.passportNumber,this.licenseNumber=e.licenseNumber):(this.title=null===(t=e.title)||void 0===t?void 0:t.encryptedString,this.firstName=null===(n=e.firstName)||void 0===n?void 0:n.encryptedString,this.middleName=null===(i=e.middleName)||void 0===i?void 0:i.encryptedString,this.lastName=null===(r=e.lastName)||void 0===r?void 0:r.encryptedString,this.address1=null===(o=e.address1)||void 0===o?void 0:o.encryptedString,this.address2=null===(a=e.address2)||void 0===a?void 0:a.encryptedString,this.address3=null===(s=e.address3)||void 0===s?void 0:s.encryptedString,this.city=null===(l=e.city)||void 0===l?void 0:l.encryptedString,this.state=null===(d=e.state)||void 0===d?void 0:d.encryptedString,this.postalCode=null===(c=e.postalCode)||void 0===c?void 0:c.encryptedString,this.country=null===(p=e.country)||void 0===p?void 0:p.encryptedString,this.company=null===(u=e.company)||void 0===u?void 0:u.encryptedString,this.email=null===(m=e.email)||void 0===m?void 0:m.encryptedString,this.phone=null===(h=e.phone)||void 0===h?void 0:h.encryptedString,this.ssn=null===(v=e.ssn)||void 0===v?void 0:v.encryptedString,this.username=null===(f=e.username)||void 0===f?void 0:f.encryptedString,this.passportNumber=null===(x=e.passportNumber)||void 0===x?void 0:x.encryptedString,this.licenseNumber=null===(y=e.licenseNumber)||void 0===y?void 0:y.encryptedString))}static template(){const e=new f;return e.title="Mr",e.firstName="John",e.middleName="William",e.lastName="Doe",e.address1="123 Any St",e.address2="Apt #123",e.address3=null,e.city="New York",e.state="NY",e.postalCode="10001",e.country="US",e.company="Acme Inc.",e.email="john@company.com",e.phone="5555551234",e.ssn="000-123-4567",e.username="jdoe",e.passportNumber="US-123456789",e.licenseNumber="D123-12-123-12333",e}static toView(e,t=new g.t){return t.title=e.title,t.firstName=e.firstName,t.middleName=e.middleName,t.lastName=e.lastName,t.address1=e.address1,t.address2=e.address2,t.address3=e.address3,t.city=e.city,t.state=e.state,t.postalCode=e.postalCode,t.country=e.country,t.company=e.company,t.email=e.email,t.phone=e.phone,t.ssn=e.ssn,t.username=e.username,t.passportNumber=e.passportNumber,t.licenseNumber=e.licenseNumber,t}static toDomain(e,t=new v.i){return t.title=null!=e.title?new a._(e.title):null,t.firstName=null!=e.firstName?new a._(e.firstName):null,t.middleName=null!=e.middleName?new a._(e.middleName):null,t.lastName=null!=e.lastName?new a._(e.lastName):null,t.address1=null!=e.address1?new a._(e.address1):null,t.address2=null!=e.address2?new a._(e.address2):null,t.address3=null!=e.address3?new a._(e.address3):null,t.city=null!=e.city?new a._(e.city):null,t.state=null!=e.state?new a._(e.state):null,t.postalCode=null!=e.postalCode?new a._(e.postalCode):null,t.country=null!=e.country?new a._(e.country):null,t.company=null!=e.company?new a._(e.company):null,t.email=null!=e.email?new a._(e.email):null,t.phone=null!=e.phone?new a._(e.phone):null,t.ssn=null!=e.ssn?new a._(e.ssn):null,t.username=null!=e.username?new a._(e.username):null,t.passportNumber=null!=e.passportNumber?new a._(e.passportNumber):null,t.licenseNumber=null!=e.licenseNumber?new a._(e.licenseNumber):null,t}}var x=n(25640),y=n(83297),S=n(4477),b=n(5644);class w{constructor(e){var t;this.match=null,null!=e&&(e instanceof b.E?this.uri=e.uri:this.uri=null===(t=e.uri)||void 0===t?void 0:t.encryptedString,this.match=e.match)}static template(){const e=new w;return e.uri="https://google.com",e.match=null,e}static toView(e,t=new b.E){return t.uri=e.uri,t.match=e.match,t}static toDomain(e,t=new S.c){return t.uri=null!=e.uri?new a._(e.uri):null,t.match=e.match,t}}class I{constructor(e){var t,n,i;null!=e&&(null!=e.uris&&(y.q,this.uris=e.uris.map((e=>new w(e)))),e instanceof y.q?(this.username=e.username,this.password=e.password,this.totp=e.totp):(this.username=null===(t=e.username)||void 0===t?void 0:t.encryptedString,this.password=null===(n=e.password)||void 0===n?void 0:n.encryptedString,this.totp=null===(i=e.totp)||void 0===i?void 0:i.encryptedString))}static template(){const e=new I;return e.uris=[],e.username="jdoe",e.password="myp@ssword123",e.totp="JBSWY3DPEHPK3PXP",e}static toView(e,t=new y.q){return null!=e.uris&&(t.uris=e.uris.map((e=>w.toView(e)))),t.username=e.username,t.password=e.password,t.totp=e.totp,t}static toDomain(e,t=new x.m){return null!=e.uris&&(t.uris=e.uris.map((e=>w.toDomain(e)))),t.username=null!=e.username?new a._(e.username):null,t.password=null!=e.password?new a._(e.password):null,t.totp=null!=e.totp?new a._(e.totp):null,t}}var C=n(97596),E=n(84089),k=n(99053);class P{constructor(e){null!=e&&(this.type=e.type)}static template(){const e=new P;return e.type=C.x.Generic,e}static toView(e,t=new k.z){return t.type=e.type,t}static toDomain(e,t=new E.k){return t.type=e.type,t}}class A{static template(){const e=new A;return e.organizationId=null,e.collectionIds=null,e.folderId=null,e.type=r.O.Login,e.name="Item name",e.notes="Some notes about this item.",e.favorite=!1,e.fields=[],e.login=null,e.secureNote=null,e.card=null,e.identity=null,e.reprompt=i.N.None,e}static toView(e,t=new s.$){var n,o,a;if(t.type=e.type,t.folderId=e.folderId,null==t.organizationId&&(t.organizationId=e.organizationId),t.collectionIds||e.collectionIds){const i=new Set((null!==(n=t.collectionIds)&&void 0!==n?n:[]).concat(null!==(o=e.collectionIds)&&void 0!==o?o:[]));t.collectionIds=Array.from(i.values())}switch(t.name=e.name,t.notes=e.notes,t.favorite=e.favorite,t.reprompt=null!==(a=e.reprompt)&&void 0!==a?a:i.N.None,null!=e.fields&&(t.fields=e.fields.map((e=>h.toView(e)))),e.type){case r.O.Login:t.login=I.toView(e.login);break;case r.O.SecureNote:t.secureNote=P.toView(e.secureNote);break;case r.O.Card:t.card=c.toView(e.card);break;case r.O.Identity:t.identity=f.toView(e.identity)}return t}static toDomain(e,t=new o.t){var n;switch(t.type=e.type,t.folderId=e.folderId,null==t.organizationId&&(t.organizationId=e.organizationId),t.name=null!=e.name?new a._(e.name):null,t.notes=null!=e.notes?new a._(e.notes):null,t.favorite=e.favorite,t.reprompt=null!==(n=e.reprompt)&&void 0!==n?n:i.N.None,null!=e.fields&&(t.fields=e.fields.map((e=>h.toDomain(e)))),e.type){case r.O.Login:t.login=I.toDomain(e.login);break;case r.O.SecureNote:t.secureNote=P.toDomain(e.secureNote);break;case r.O.Card:t.card=c.toDomain(e.card);break;case r.O.Identity:t.identity=f.toDomain(e.identity)}return t}build(e){var t,n;switch(this.organizationId=e.organizationId,this.folderId=e.folderId,this.type=e.type,this.reprompt=e.reprompt,e instanceof s.$?(this.name=e.name,this.notes=e.notes):(this.name=null===(t=e.name)||void 0===t?void 0:t.encryptedString,this.notes=null===(n=e.notes)||void 0===n?void 0:n.encryptedString),this.favorite=e.favorite,null!=e.fields&&(s.$,this.fields=e.fields.map((e=>new h(e)))),e.type){case r.O.Login:this.login=new I(e.login);break;case r.O.SecureNote:this.secureNote=new P(e.secureNote);break;case r.O.Card:this.card=new c(e.card);break;case r.O.Identity:this.identity=new f(e.identity)}}}class O extends A{build(e){this.id=e.id,super.build(e),this.collectionIds=e.collectionIds}}},43579:(e,t,n)=>{"use strict";n.d(t,{l:()=>s});var i=n(81394),r=n(71498),o=n(70368);class a{static template(){const e=new a;return e.organizationId="00000000-0000-0000-0000-000000000000",e.name="Collection name",e.externalId=null,e}static toView(e,t=new o.n){return t.name=e.name,t.externalId=e.externalId,null==t.organizationId&&(t.organizationId=e.organizationId),t}static toDomain(e,t=new i.F){return t.name=null!=e.name?new r._(e.name):null,t.externalId=e.externalId,null==t.organizationId&&(t.organizationId=e.organizationId),t}build(e){var t;this.organizationId=e.organizationId,e instanceof o.n?this.name=e.name:this.name=null===(t=e.name)||void 0===t?void 0:t.encryptedString,this.externalId=e.externalId}}class s extends a{build(e){this.id=e.id,super.build(e)}}},38685:(e,t,n)=>{"use strict";n.d(t,{L:()=>s});var i=n(71498),r=n(86212),o=n(58255);class a{static template(){const e=new a;return e.name="Folder name",e}static toView(e,t=new o.a){return t.name=e.name,t}static toDomain(e,t=new r.g){return t.name=null!=e.name?new i._(e.name):null,t}build(e){var t;e instanceof o.a?this.name=e.name:this.name=null===(t=e.name)||void 0===t?void 0:t.encryptedString}}class s extends a{build(e){this.id=e.id,super.build(e)}}},1937:(e,t,n)=>{"use strict";n.d(t,{a:()=>p});var i=n(32001),r=n(97715),o=n(8116),a=n(96039),s=n(4181),l=n(19841),d=n(83250);class c{}class p{constructor(e){switch(this.type=e.type,this.folderId=e.folderId,this.organizationId=e.organizationId,this.name=e.name?e.name.encryptedString:null,this.notes=e.notes?e.notes.encryptedString:null,this.favorite=e.favorite,this.lastKnownRevisionDate=e.revisionDate,this.reprompt=e.reprompt,this.type){case i.O.Login:this.login=new s.I,this.login.uris=null,this.login.username=e.login.username?e.login.username.encryptedString:null,this.login.password=e.login.password?e.login.password.encryptedString:null,this.login.passwordRevisionDate=null!=e.login.passwordRevisionDate?e.login.passwordRevisionDate.toISOString():null,this.login.totp=e.login.totp?e.login.totp.encryptedString:null,this.login.autofillOnPageLoad=e.login.autofillOnPageLoad,null!=e.login.uris&&(this.login.uris=e.login.uris.map((e=>{const t=new l.l;return t.uri=null!=e.uri?e.uri.encryptedString:null,t.match=null!=e.match?e.match:null,t})));break;case i.O.SecureNote:this.secureNote=new d.t,this.secureNote.type=e.secureNote.type;break;case i.O.Card:this.card=new r.E,this.card.cardholderName=null!=e.card.cardholderName?e.card.cardholderName.encryptedString:null,this.card.brand=null!=e.card.brand?e.card.brand.encryptedString:null,this.card.number=null!=e.card.number?e.card.number.encryptedString:null,this.card.expMonth=null!=e.card.expMonth?e.card.expMonth.encryptedString:null,this.card.expYear=null!=e.card.expYear?e.card.expYear.encryptedString:null,this.card.code=null!=e.card.code?e.card.code.encryptedString:null;break;case i.O.Identity:this.identity=new a.x,this.identity.title=null!=e.identity.title?e.identity.title.encryptedString:null,this.identity.firstName=null!=e.identity.firstName?e.identity.firstName.encryptedString:null,this.identity.middleName=null!=e.identity.middleName?e.identity.middleName.encryptedString:null,this.identity.lastName=null!=e.identity.lastName?e.identity.lastName.encryptedString:null,this.identity.address1=null!=e.identity.address1?e.identity.address1.encryptedString:null,this.identity.address2=null!=e.identity.address2?e.identity.address2.encryptedString:null,this.identity.address3=null!=e.identity.address3?e.identity.address3.encryptedString:null,this.identity.city=null!=e.identity.city?e.identity.city.encryptedString:null,this.identity.state=null!=e.identity.state?e.identity.state.encryptedString:null,this.identity.postalCode=null!=e.identity.postalCode?e.identity.postalCode.encryptedString:null,this.identity.country=null!=e.identity.country?e.identity.country.encryptedString:null,this.identity.company=null!=e.identity.company?e.identity.company.encryptedString:null,this.identity.email=null!=e.identity.email?e.identity.email.encryptedString:null,this.identity.phone=null!=e.identity.phone?e.identity.phone.encryptedString:null,this.identity.ssn=null!=e.identity.ssn?e.identity.ssn.encryptedString:null,this.identity.username=null!=e.identity.username?e.identity.username.encryptedString:null,this.identity.passportNumber=null!=e.identity.passportNumber?e.identity.passportNumber.encryptedString:null,this.identity.licenseNumber=null!=e.identity.licenseNumber?e.identity.licenseNumber.encryptedString:null}null!=e.fields&&(this.fields=e.fields.map((e=>{const t=new o.P;return t.type=e.type,t.name=e.name?e.name.encryptedString:null,t.value=e.value?e.value.encryptedString:null,t.linkedId=e.linkedId,t}))),null!=e.passwordHistory&&(this.passwordHistory=[],e.passwordHistory.forEach((e=>{this.passwordHistory.push({lastUsedDate:e.lastUsedDate,password:e.password?e.password.encryptedString:null})}))),null!=e.attachments&&(this.attachments={},this.attachments2={},e.attachments.forEach((e=>{const t=e.fileName?e.fileName.encryptedString:null;this.attachments[e.id]=t;const n=new c;n.fileName=t,null!=e.key&&(n.key=e.key.encryptedString),this.attachments2[e.id]=n})))}}},20537:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});class i{constructor(e){this.groups=[],null!=e&&(this.name=e.name?e.name.encryptedString:null,this.externalId=e.externalId)}}},45733:(e,t,n)=>{"use strict";n.d(t,{i:()=>i});class i{constructor(e){this.name=e.name?e.name.encryptedString:null}}},33459:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});class i{constructor(e){this.response=e}getResponseProperty(e,t=null,n=!1){if(null==e||""===e)throw new Error("propertyName must not be null/empty.");if(null==t&&null!=this.response&&(t=this.response),null==t)return null;if(!n&&void 0===t[e]){let n=null;n=e.charAt(0)===e.charAt(0).toUpperCase()?e.charAt(0).toLowerCase():e.charAt(0).toUpperCase(),e.length>1&&(n+=e.slice(1)),void 0===t[e=n]&&(e=e.toLowerCase()),void 0===t[e]&&(e=e.toUpperCase())}return t[e]}}},93638:(e,t,n)=>{"use strict";n.d(t,{i:()=>o});var i=n(14512),r=n(33459);class o extends r.c{constructor(e,t,n){var r,o;super(e);let a=null;if(null!=e){const t=this.getResponseProperty("ErrorModel");a=t&&n?t:e}a?(this.message=this.getResponseProperty("Message",a),this.validationErrors=this.getResponseProperty("ValidationErrors",a),this.captchaSiteKey=null===(o=null===(r=this.validationErrors)||void 0===r?void 0:r.HCaptcha_SiteKey)||void 0===o?void 0:o[0],this.captchaRequired=!i.c.isNullOrWhitespace(this.captchaSiteKey)):429===t&&(this.message="Rate limit exceeded. Try again later."),this.statusCode=t}getSingleMessage(){if(null==this.validationErrors)return this.message;for(const e in this.validationErrors)if(this.validationErrors.hasOwnProperty(e)&&this.validationErrors[e].length)return this.validationErrors[e][0];return this.message}getAllMessages(){const e=[];if(null==this.validationErrors)return e;for(const t in this.validationErrors)this.validationErrors.hasOwnProperty(t)&&this.validationErrors[t].forEach((n=>{let i="";if(t.indexOf("[")>-1&&t.indexOf("]")>-1){const e=t.lastIndexOf(".");i=t.substr(0,e>-1?e:t.length)+": "}e.push(i+n)}));return e}}},60337:(e,t,n)=>{"use strict";n.d(t,{_:()=>l});var i=n(89028),r=n(97278),o=n(14571),a=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},s=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class l extends o.A{constructor(){super(),this.cardholderName=null,this.expMonth=null,this.expYear=null,this.code=null,this._brand=null,this._number=null,this._subTitle=null}get maskedCode(){return null!=this.code?"•".repeat(this.code.length):null}get maskedNumber(){return null!=this.number?"•".repeat(this.number.length):null}get brand(){return this._brand}set brand(e){this._brand=e,this._subTitle=null}get number(){return this._number}set number(e){this._number=e,this._subTitle=null}get subTitle(){if(null==this._subTitle&&(this._subTitle=this.brand,null!=this.number&&this.number.length>=4)){null!=this._subTitle&&""!==this._subTitle?this._subTitle+=", ":this._subTitle="";const e=this.number.length>=5&&null!=this.number.match(new RegExp("^3[47]"))?5:4;this._subTitle+="*"+this.number.substr(this.number.length-e)}return this._subTitle}get expiration(){if(!this.expMonth&&!this.expYear)return null;let e=null!=this.expMonth?("0"+this.expMonth).slice(-2):"__";return e+=" / "+(null!=this.expYear?this.formatYear(this.expYear):"____"),e}formatYear(e){return 2===e.length?"20"+e:e}}a([(0,r.B)(i.Wp.CardholderName),s("design:type",String)],l.prototype,"cardholderName",void 0),a([(0,r.B)(i.Wp.ExpMonth,"expirationMonth"),s("design:type",String)],l.prototype,"expMonth",void 0),a([(0,r.B)(i.Wp.ExpYear,"expirationYear"),s("design:type",String)],l.prototype,"expYear",void 0),a([(0,r.B)(i.Wp.Code,"securityCode"),s("design:type",String)],l.prototype,"code",void 0),a([(0,r.B)(i.Wp.Brand),s("design:type",String),s("design:paramtypes",[String])],l.prototype,"brand",null),a([(0,r.B)(i.Wp.Number),s("design:type",String),s("design:paramtypes",[String])],l.prototype,"number",null)},91414:(e,t,n)=>{"use strict";n.d(t,{$:()=>d});var i=n(26702),r=n(32001),o=n(60337),a=n(65893),s=n(83297),l=n(99053);class d{constructor(e){var t;this.id=null,this.organizationId=null,this.folderId=null,this.name=null,this.notes=null,this.type=null,this.favorite=!1,this.organizationUseTotp=!1,this.edit=!1,this.viewPassword=!0,this.login=new s.q,this.identity=new a.t,this.card=new o._,this.secureNote=new l.z,this.attachments=null,this.fields=null,this.passwordHistory=null,this.collectionIds=null,this.revisionDate=null,this.deletedDate=null,this.reprompt=i.N.None,e&&(this.id=e.id,this.organizationId=e.organizationId,this.folderId=e.folderId,this.favorite=e.favorite,this.organizationUseTotp=e.organizationUseTotp,this.edit=e.edit,this.viewPassword=e.viewPassword,this.type=e.type,this.localData=e.localData,this.collectionIds=e.collectionIds,this.revisionDate=e.revisionDate,this.deletedDate=e.deletedDate,this.reprompt=null!==(t=e.reprompt)&&void 0!==t?t:i.N.None)}get item(){switch(this.type){case r.O.Login:return this.login;case r.O.SecureNote:return this.secureNote;case r.O.Card:return this.card;case r.O.Identity:return this.identity}return null}get subTitle(){return this.item.subTitle}get hasPasswordHistory(){return this.passwordHistory&&this.passwordHistory.length>0}get hasAttachments(){return this.attachments&&this.attachments.length>0}get hasOldAttachments(){if(this.hasAttachments)for(let e=0;e<this.attachments.length;e++)if(null==this.attachments[e].key)return!0;return!1}get hasFields(){return this.fields&&this.fields.length>0}get passwordRevisionDisplayDate(){return this.type!==r.O.Login||null==this.login||null==this.login.password||""===this.login.password?null:this.login.passwordRevisionDate}get isDeleted(){return null!=this.deletedDate}get linkedFieldOptions(){return this.item.linkedFieldOptions}linkedFieldValue(e){var t;const n=null===(t=this.linkedFieldOptions)||void 0===t?void 0:t.get(e);if(null==n)return null;this.item;return this.item[n.propertyKey]}linkedFieldI18nKey(e){var t;return null===(t=this.linkedFieldOptions.get(e))||void 0===t?void 0:t.i18nKey}}},70368:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var i=n(81394);class r{constructor(e){this.id=null,this.organizationId=null,this.name=null,this.externalId=null,this.readOnly=null,this.hidePasswords=null,e&&(this.id=e.id,this.organizationId=e.organizationId,this.externalId=e.externalId,e instanceof i.F&&(this.readOnly=e.readOnly,this.hidePasswords=e.hidePasswords))}}},98197:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});class i{constructor(e){this.name=null,this.value=null,this.type=null,this.newField=!1,this.showValue=!1,this.showCount=!1,this.linkedId=null,e&&(this.type=e.type,this.linkedId=e.linkedId)}get maskedValue(){return null!=this.value?"••••••••":null}}},58255:(e,t,n)=>{"use strict";n.d(t,{a:()=>i});class i{constructor(e){this.id=null,this.name=null,this.revisionDate=null,e&&(this.id=e.id,this.revisionDate=e.revisionDate)}}},65893:(e,t,n)=>{"use strict";n.d(t,{t:()=>d});var i=n(89028),r=n(97278),o=n(14512),a=n(14571),s=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class d extends a.A{constructor(){super(),this.title=null,this.middleName=null,this.address1=null,this.address2=null,this.address3=null,this.city=null,this.state=null,this.postalCode=null,this.country=null,this.company=null,this.email=null,this.phone=null,this.ssn=null,this.username=null,this.passportNumber=null,this.licenseNumber=null,this._firstName=null,this._lastName=null,this._subTitle=null}get firstName(){return this._firstName}set firstName(e){this._firstName=e,this._subTitle=null}get lastName(){return this._lastName}set lastName(e){this._lastName=e,this._subTitle=null}get subTitle(){return null!=this._subTitle||null==this.firstName&&null==this.lastName||(this._subTitle="",null!=this.firstName&&(this._subTitle=this.firstName),null!=this.lastName&&(""!==this._subTitle&&(this._subTitle+=" "),this._subTitle+=this.lastName)),this._subTitle}get fullName(){if(null!=this.title||null!=this.firstName||null!=this.middleName||null!=this.lastName){let e="";return null!=this.title&&(e+=this.title+" "),null!=this.firstName&&(e+=this.firstName+" "),null!=this.middleName&&(e+=this.middleName+" "),null!=this.lastName&&(e+=this.lastName),e.trim()}return null}get fullAddress(){let e=this.address1;return o.c.isNullOrWhitespace(this.address2)||(o.c.isNullOrWhitespace(e)||(e+=", "),e+=this.address2),o.c.isNullOrWhitespace(this.address3)||(o.c.isNullOrWhitespace(e)||(e+=", "),e+=this.address3),e}get fullAddressPart2(){if(null==this.city&&null==this.state&&null==this.postalCode)return null;const e=this.city||"-",t=this.state,n=this.postalCode||"-";let i=e;return o.c.isNullOrWhitespace(t)||(i+=", "+t),i+=", "+n,i}}s([(0,r.B)(i.LC.Title),l("design:type",String)],d.prototype,"title",void 0),s([(0,r.B)(i.LC.MiddleName),l("design:type",String)],d.prototype,"middleName",void 0),s([(0,r.B)(i.LC.Address1),l("design:type",String)],d.prototype,"address1",void 0),s([(0,r.B)(i.LC.Address2),l("design:type",String)],d.prototype,"address2",void 0),s([(0,r.B)(i.LC.Address3),l("design:type",String)],d.prototype,"address3",void 0),s([(0,r.B)(i.LC.City,"cityTown"),l("design:type",String)],d.prototype,"city",void 0),s([(0,r.B)(i.LC.State,"stateProvince"),l("design:type",String)],d.prototype,"state",void 0),s([(0,r.B)(i.LC.PostalCode,"zipPostalCode"),l("design:type",String)],d.prototype,"postalCode",void 0),s([(0,r.B)(i.LC.Country),l("design:type",String)],d.prototype,"country",void 0),s([(0,r.B)(i.LC.Company),l("design:type",String)],d.prototype,"company",void 0),s([(0,r.B)(i.LC.Email),l("design:type",String)],d.prototype,"email",void 0),s([(0,r.B)(i.LC.Phone),l("design:type",String)],d.prototype,"phone",void 0),s([(0,r.B)(i.LC.Ssn),l("design:type",String)],d.prototype,"ssn",void 0),s([(0,r.B)(i.LC.Username),l("design:type",String)],d.prototype,"username",void 0),s([(0,r.B)(i.LC.PassportNumber),l("design:type",String)],d.prototype,"passportNumber",void 0),s([(0,r.B)(i.LC.LicenseNumber),l("design:type",String)],d.prototype,"licenseNumber",void 0),s([(0,r.B)(i.LC.FirstName),l("design:type",String),l("design:paramtypes",[String])],d.prototype,"firstName",null),s([(0,r.B)(i.LC.LastName),l("design:type",String),l("design:paramtypes",[String])],d.prototype,"lastName",null),s([(0,r.B)(i.LC.FullName),l("design:type",String),l("design:paramtypes",[])],d.prototype,"fullName",null)},14571:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class i{}},5644:(e,t,n)=>{"use strict";n.d(t,{E:()=>a});var i=n(41122),r=n(14512);const o=["https://","http://","ssh://","ftp://","sftp://","irc://","vnc://","rdp://","ms-rd:","chrome://","iosapp://","androidapp://"];class a{constructor(e){this.match=null,this._uri=null,this._domain=null,this._hostname=null,this._host=null,this._canLaunch=null,e&&(this.match=e.match)}get uri(){return this._uri}set uri(e){this._uri=e,this._domain=null,this._canLaunch=null}get domain(){return null==this._domain&&null!=this.uri&&(this._domain=r.c.getDomain(this.uri),""===this._domain&&(this._domain=null)),this._domain}get hostname(){return this.match===i.I.RegularExpression?null:(null==this._hostname&&null!=this.uri&&(this._hostname=r.c.getHostname(this.uri),""===this._hostname&&(this._hostname=null)),this._hostname)}get host(){return this.match===i.I.RegularExpression?null:(null==this._host&&null!=this.uri&&(this._host=r.c.getHost(this.uri),""===this._host&&(this._host=null)),this._host)}get hostnameOrUri(){return null!=this.hostname?this.hostname:this.uri}get hostOrUri(){return null!=this.host?this.host:this.uri}get isWebsite(){return null!=this.uri&&(0===this.uri.indexOf("http://")||0===this.uri.indexOf("https://")||this.uri.indexOf("://")<0&&r.c.tldEndingRegex.test(this.uri))}get canLaunch(){if(null!=this._canLaunch)return this._canLaunch;if(null!=this.uri&&this.match!==i.I.RegularExpression){const e=this.launchUri;for(let t=0;t<o.length;t++)if(0===e.indexOf(o[t]))return this._canLaunch=!0,this._canLaunch}return this._canLaunch=!1,this._canLaunch}get launchUri(){return this.uri.indexOf("://")<0&&r.c.tldEndingRegex.test(this.uri)?"http://"+this.uri:this.uri}}},83297:(e,t,n)=>{"use strict";n.d(t,{q:()=>d});var i=n(89028),r=n(97278),o=n(14512),a=n(14571),s=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class d extends a.A{constructor(e){super(),this.username=null,this.password=null,this.passwordRevisionDate=null,this.totp=null,this.uris=null,this.autofillOnPageLoad=null,e&&(this.passwordRevisionDate=e.passwordRevisionDate,this.autofillOnPageLoad=e.autofillOnPageLoad)}get uri(){return this.hasUris?this.uris[0].uri:null}get maskedPassword(){return null!=this.password?"••••••••":null}get subTitle(){return this.username}get canLaunch(){return this.hasUris&&this.uris.some((e=>e.canLaunch))}get hasTotp(){return!o.c.isNullOrWhitespace(this.totp)}get launchUri(){if(this.hasUris){const e=this.uris.find((e=>e.canLaunch));if(null!=e)return e.launchUri}return null}get hasUris(){return null!=this.uris&&this.uris.length>0}}s([(0,r.B)(i.qA.Username),l("design:type",String)],d.prototype,"username",void 0),s([(0,r.B)(i.qA.Password),l("design:type",String)],d.prototype,"password",void 0)},42078:(e,t,n)=>{"use strict";n.d(t,{i:()=>i});class i{constructor(e){this.password=null,this.lastUsedDate=null,e&&(this.lastUsedDate=e.lastUsedDate)}}},99053:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var i=n(14571);class r extends i.A{constructor(e){super(),this.type=null,e&&(this.type=e.type)}get subTitle(){return null}}},62119:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var i,r=n(41869);!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(i||(i={}));class o{constructor(e,t=null){this.isDev=e,this.filter=t,this.timersMap=new Map}debug(e){this.isDev&&this.write(i.Debug,e)}info(e){this.write(i.Info,e)}warning(e){this.write(i.Warning,e)}error(e){this.write(i.Error,e)}write(e,t){if(null==this.filter||!this.filter(e))switch(e){case i.Debug:case i.Info:console.log(t);break;case i.Warning:console.warn(t);break;case i.Error:console.error(t)}}time(e="default"){this.timersMap.has(e)||this.timersMap.set(e,r())}timeEnd(e="default"){const t=r(this.timersMap.get(e));return this.timersMap.delete(e),this.write(i.Info,`${e}: ${1e3*t[0]+t[1]/1e7}ms`),t}}},66385:(e,t,n)=>{"use strict";n.d(t,{l:()=>a});var i=n(53857);const r={primary:["tw-bg-primary-500"],secondary:["tw-bg-text-muted"],success:["tw-bg-success-500"],danger:["tw-bg-danger-500"],warning:["tw-bg-warning-500"],info:["tw-bg-info-500"]},o={primary:["hover:tw-bg-primary-700"],secondary:["hover:tw-bg-secondary-700"],success:["hover:tw-bg-success-700"],danger:["hover:tw-bg-danger-700"],warning:["hover:tw-bg-warning-700"],info:["hover:tw-bg-info-700"]};class a{constructor(e){var t;this.badgeType="primary",this.hasHoverEffects=!1,this.hasHoverEffects="SPAN"!=(null===(t=null==e?void 0:e.nativeElement)||void 0===t?void 0:t.nodeName)}get classList(){return["tw-inline-block","tw-py-1","tw-px-1.5","tw-font-bold","tw-leading-none","tw-text-center","!tw-text-contrast","tw-rounded","tw-border-none","tw-box-border","tw-whitespace-no-wrap","tw-text-xs","hover:tw-no-underline","focus:tw-outline-none","focus:tw-ring","focus:tw-ring-offset-2","focus:tw-ring-primary-700"].concat(r[this.badgeType]).concat(this.hasHoverEffects?o[this.badgeType]:[])}}a.ɵfac=function(e){return new(e||a)(i["ɵɵdirectiveInject"](i.ElementRef))},a.ɵdir=i["ɵɵdefineDirective"]({type:a,selectors:[["span","bitBadge",""],["a","bitBadge",""],["button","bitBadge",""]],hostVars:2,hostBindings:function(e,t){2&e&&i["ɵɵclassMap"](t.classList)},inputs:{badgeType:"badgeType"}})},64707:(e,t,n)=>{"use strict";n.d(t,{H:()=>o});var i=n(53857);const r={primary:["tw-border-primary-500","tw-bg-primary-500","!tw-text-contrast","hover:tw-bg-primary-700","hover:tw-border-primary-700","focus:tw-bg-primary-700","focus:tw-border-primary-700"],secondary:["tw-bg-transparent","tw-border-text-muted","!tw-text-muted","hover:tw-bg-secondary-500","hover:tw-border-secondary-500","hover:!tw-text-contrast","focus:tw-bg-secondary-500","focus:tw-border-secondary-500","focus:!tw-text-contrast"],danger:["tw-bg-transparent","tw-border-danger-500","!tw-text-danger","hover:tw-bg-danger-500","hover:tw-border-danger-500","hover:!tw-text-contrast","focus:tw-bg-danger-500","focus:tw-border-danger-500","focus:!tw-text-contrast"]};class o{constructor(){this.buttonType="secondary",this.block=!1}get classList(){var e;return["tw-font-semibold","tw-py-1.5","tw-px-3","tw-rounded","tw-transition","tw-border","tw-border-solid","tw-text-center","hover:tw-no-underline","disabled:tw-bg-secondary-100","disabled:tw-border-secondary-100","disabled:!tw-text-main","focus:tw-outline-none","focus:tw-ring","focus:tw-ring-offset-2","focus:tw-ring-primary-700","focus:tw-z-10"].concat(this.block?["tw-w-full","tw-block"]:["tw-inline-block"]).concat(null!==(e=r[this.buttonType])&&void 0!==e?e:[])}}o.ɵfac=function(e){return new(e||o)},o.ɵdir=i["ɵɵdefineDirective"]({type:o,selectors:[["button","bitButton",""],["a","bitButton",""]],hostVars:2,hostBindings:function(e,t){2&e&&i["ɵɵclassMap"](t.classList)},inputs:{buttonType:"buttonType",block:"block"}})},24083:(e,t,n)=>{"use strict";n.d(t,{O:()=>c});var i=n(53857),r=n(94820),o=n(52187);function a(e,t){if(1&e&&i["ɵɵelement"](0,"i",4),2&e){const e=i["ɵɵnextContext"](2);i["ɵɵclassMapInterpolate1"]("bwi ",e.icon,"")}}function s(e,t){if(1&e&&(i["ɵɵelementStart"](0,"h3",2),i["ɵɵtext"](1,"\n    "),i["ɵɵtemplate"](2,a,1,3,"i",3),i["ɵɵtext"](3),i["ɵɵelementEnd"]()),2&e){const e=i["ɵɵnextContext"]();i["ɵɵproperty"]("ngClass",e.headerClass),i["ɵɵadvance"](2),i["ɵɵproperty"]("ngIf",e.icon),i["ɵɵadvance"](1),i["ɵɵtextInterpolate1"]("\n    ",e.title,"\n  ")}}const l={success:"bwi-check",info:"bwi-info-circle",warning:"bwi-exclamation-triangle",danger:"bwi-error"},d={warning:"warning",danger:"error"};class c{constructor(e){this.i18nService=e,this.type="info",this.useAlertRole=!1}ngOnInit(){var e;null!==(e=this.icon)&&void 0!==e||(this.icon=l[this.type]),null==this.title&&null!=d[this.type]&&(this.title=this.i18nService.t(d[this.type]))}get calloutClass(){switch(this.type){case"danger":return"tw-border-l-danger-500";case"info":return"tw-border-l-info-500";case"success":return"tw-border-l-success-500";case"warning":return"tw-border-l-warning-500"}}get headerClass(){switch(this.type){case"danger":return"!tw-text-danger";case"info":return"!tw-text-info";case"success":return"!tw-text-success";case"warning":return"!tw-text-warning"}}}c.ɵfac=function(e){return new(e||c)(i["ɵɵdirectiveInject"](r.D))},c.ɵcmp=i["ɵɵdefineComponent"]({type:c,selectors:[["bit-callout"]],inputs:{type:"type",icon:"icon",title:"title",useAlertRole:"useAlertRole"},ngContentSelectors:["*"],decls:7,vars:2,consts:[[1,"tw-py-3","tw-px-5","tw-mb-4","tw-leading-5","tw-rounded","tw-bg-background-alt","tw-border","tw-border-secondary-300","tw-border-solid","tw-box-border","tw-border-l-8","tw-text-main",3,"ngClass"],["class","tw-mt-0 tw-mb-2 tw-text-base tw-font-bold tw-uppercase",3,"ngClass",4,"ngIf"],[1,"tw-mt-0","tw-mb-2","tw-text-base","tw-font-bold","tw-uppercase",3,"ngClass"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true"]],template:function(e,t){1&e&&(i["ɵɵprojectionDef"](),i["ɵɵelementStart"](0,"div",0),i["ɵɵtext"](1,"\n  "),i["ɵɵtemplate"](2,s,4,3,"h3",1),i["ɵɵtext"](3,"\n  "),i["ɵɵprojection"](4),i["ɵɵtext"](5,"\n"),i["ɵɵelementEnd"](),i["ɵɵtext"](6,"\n")),2&e&&(i["ɵɵproperty"]("ngClass",t.calloutClass),i["ɵɵadvance"](2),i["ɵɵproperty"]("ngIf",t.title))},directives:[o.NgClass,o.NgIf],encapsulation:2})},16048:(e,t,n)=>{"use strict";n.d(t,{P:()=>a});var i=n(68405),r=n(53857);function o(e,t){if(1&e&&(r["ɵɵelementContainerStart"](0),r["ɵɵtext"](1,"\n    "),r["ɵɵelement"](2,"i",1),r["ɵɵtext"](3),r["ɵɵpipe"](4,"i18n"),r["ɵɵelementContainerEnd"]()),2&e){const e=r["ɵɵnextContext"]();r["ɵɵadvance"](3),r["ɵɵtextInterpolate1"](" ",r["ɵɵpipeBind2"](4,1,"fieldsNeedAttention",e.errorString),"\n  ")}}class a{get errorCount(){return this.getErrorCount(this.formGroup)}get errorString(){return this.errorCount.toString()}getErrorCount(e){return Object.values(e.controls).reduce(((e,t)=>t instanceof i.FormGroup?e+this.getErrorCount(t):null==t.errors?e:e+Object.keys(t.errors).length),0)}}a.ɵfac=function(e){return new(e||a)},a.ɵcmp=r["ɵɵdefineComponent"]({type:a,selectors:[["bit-error-summary"]],hostAttrs:["aria-live","assertive",1,"tw-block","tw-text-danger","tw-mt-2"],inputs:{formGroup:"formGroup"},decls:2,vars:1,consts:[[4,"ngIf"],[1,"bwi","bwi-error"]],template:function(e,t){1&e&&(r["ɵɵtext"](0," "),r["ɵɵtemplate"](1,o,5,4,"ng-container",0)),2&e&&(r["ɵɵadvance"](1),r["ɵɵproperty"]("ngIf",t.errorCount>0))},encapsulation:2})},5991:(e,t,n)=>{"use strict";n.d(t,{h:()=>a});var i=n(53857),r=n(94820);let o=0;class a{constructor(e){this.i18nService=e,this.id="bit-error-"+o++}get displayError(){var e,t,n;switch(this.error[0]){case"required":return this.i18nService.t("inputRequired");case"email":return this.i18nService.t("inputEmail");case"minlength":return this.i18nService.t("inputMinLength",null===(e=this.error[1])||void 0===e?void 0:e.requiredLength);default:return(null===(t=this.error[1])||void 0===t?void 0:t.message)?null===(n=this.error[1])||void 0===n?void 0:n.message:this.error}}}a.ɵfac=function(e){return new(e||a)(i["ɵɵdirectiveInject"](r.D))},a.ɵcmp=i["ɵɵdefineComponent"]({type:a,selectors:[["bit-error"]],hostAttrs:["aria-live","assertive",1,"tw-block","tw-mt-1","tw-text-danger"],hostVars:1,hostBindings:function(e,t){2&e&&i["ɵɵhostProperty"]("id",t.id)},inputs:{error:"error"},decls:2,vars:1,consts:[[1,"bwi","bwi-error"]],template:function(e,t){1&e&&(i["ɵɵelement"](0,"i",0),i["ɵɵtext"](1)),2&e&&(i["ɵɵadvance"](1),i["ɵɵtextInterpolate1"](" ",t.displayError,""))},encapsulation:2})},21509:(e,t,n)=>{"use strict";n.d(t,{d:()=>v});var i=n(11512),r=n(5991),o=n(17935),a=n(57139),s=n(1e4),l=n(53857);function d(e,t){1&e&&(l["ɵɵelementStart"](0,"span",7),l["ɵɵtext"](1),l["ɵɵpipe"](2,"i18n"),l["ɵɵelementEnd"]()),2&e&&(l["ɵɵadvance"](1),l["ɵɵtextInterpolate1"](" (",l["ɵɵpipeBind1"](2,1,"required"),")"))}function c(e,t){1&e&&(l["ɵɵelementStart"](0,"div",2),l["ɵɵtext"](1,"\n    "),l["ɵɵprojection"](2,2),l["ɵɵtext"](3,"\n  "),l["ɵɵelementEnd"]())}function p(e,t){1&e&&(l["ɵɵelementStart"](0,"div",2),l["ɵɵtext"](1,"\n    "),l["ɵɵprojection"](2,3),l["ɵɵtext"](3,"\n  "),l["ɵɵelementEnd"]())}function u(e,t){1&e&&l["ɵɵprojection"](0,4,["*ngSwitchCase","false"])}function m(e,t){if(1&e&&l["ɵɵelement"](0,"bit-error",8),2&e){const e=l["ɵɵnextContext"]();l["ɵɵproperty"]("error",e.input.error)}}const h=[[["bit-label"]],"*",[["","bitPrefix",""]],[["","bitSuffix",""]],[["bit-hint"]]];class v{ngAfterContentChecked(){this.error?this.input.ariaDescribedBy=this.error.id:this.hint?this.input.ariaDescribedBy=this.hint.id:this.input.ariaDescribedBy=void 0}}v.ɵfac=function(e){return new(e||v)},v.ɵcmp=l["ɵɵdefineComponent"]({type:v,selectors:[["bit-form-field"]],contentQueries:function(e,t,n){if(1&e&&(l["ɵɵcontentQuery"](n,i.G,5),l["ɵɵcontentQuery"](n,o.M,5),l["ɵɵcontentQuery"](n,a.x,4),l["ɵɵcontentQuery"](n,s.e,4)),2&e){let e;l["ɵɵqueryRefresh"](e=l["ɵɵloadQuery"]())&&(t.input=e.first),l["ɵɵqueryRefresh"](e=l["ɵɵloadQuery"]())&&(t.hint=e.first),l["ɵɵqueryRefresh"](e=l["ɵɵloadQuery"]())&&(t.prefixChildren=e),l["ɵɵqueryRefresh"](e=l["ɵɵloadQuery"]())&&(t.suffixChildren=e)}},viewQuery:function(e,t){if(1&e&&l["ɵɵviewQuery"](r.h,5),2&e){let e;l["ɵɵqueryRefresh"](e=l["ɵɵloadQuery"]())&&(t.error=e.first)}},hostAttrs:[1,"tw-mb-6","tw-block"],ngContentSelectors:["bit-label","*","[bitPrefix]","[bitSuffix]","bit-hint"],decls:23,vars:7,consts:[[1,"tw-block","tw-font-semibold","tw-mb-1","tw-text-main"],["class","tw-text-xs tw-font-normal",4,"ngIf"],[1,"tw-flex"],["class","tw-flex",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"error",4,"ngSwitchCase"],[1,"tw-text-xs","tw-font-normal"],[3,"error"]],template:function(e,t){1&e&&(l["ɵɵprojectionDef"](h),l["ɵɵelementStart"](0,"label",0),l["ɵɵtext"](1,"\n  "),l["ɵɵprojection"](2),l["ɵɵtext"](3,"\n  "),l["ɵɵtemplate"](4,d,3,3,"span",1),l["ɵɵtext"](5,"\n"),l["ɵɵelementEnd"](),l["ɵɵtext"](6,"\n"),l["ɵɵelementStart"](7,"div",2),l["ɵɵtext"](8,"\n  "),l["ɵɵtemplate"](9,c,4,0,"div",3),l["ɵɵtext"](10,"\n  "),l["ɵɵprojection"](11,1),l["ɵɵtext"](12,"\n  "),l["ɵɵtemplate"](13,p,4,0,"div",3),l["ɵɵtext"](14,"\n"),l["ɵɵelementEnd"](),l["ɵɵtext"](15,"\n"),l["ɵɵelementContainerStart"](16,4),l["ɵɵtext"](17,"\n  "),l["ɵɵtemplate"](18,u,1,0,"ng-content",5),l["ɵɵtext"](19,"\n  "),l["ɵɵtemplate"](20,m,1,1,"bit-error",6),l["ɵɵtext"](21,"\n"),l["ɵɵelementContainerEnd"](),l["ɵɵtext"](22,"\n")),2&e&&(l["ɵɵattribute"]("for",t.input.id),l["ɵɵadvance"](4),l["ɵɵproperty"]("ngIf",t.input.required),l["ɵɵadvance"](5),l["ɵɵproperty"]("ngIf",t.prefixChildren.length),l["ɵɵadvance"](4),l["ɵɵproperty"]("ngIf",t.suffixChildren.length),l["ɵɵadvance"](3),l["ɵɵproperty"]("ngSwitch",t.input.hasError),l["ɵɵadvance"](2),l["ɵɵproperty"]("ngSwitchCase",!1),l["ɵɵadvance"](2),l["ɵɵproperty"]("ngSwitchCase",!0))},encapsulation:2})},17935:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var i=n(53857);let r=0;class o{constructor(){this.id="bit-hint-"+r++}}o.ɵfac=function(e){return new(e||o)},o.ɵdir=i["ɵɵdefineDirective"]({type:o,selectors:[["bit-hint"]],hostAttrs:[1,"tw-text-muted","tw-inline-block","tw-mt-1"],hostVars:1,hostBindings:function(e,t){2&e&&i["ɵɵhostProperty"]("id",t.id)}})},57139:(e,t,n)=>{"use strict";n.d(t,{w:()=>r,x:()=>o});var i=n(53857);const r=["tw-block","tw-px-3","tw-py-1.5","tw-bg-background-alt","tw-border","tw-border-solid","tw-border-secondary-500","tw-text-muted","tw-rounded-none"];class o{get classList(){return r.concat(["tw-border-r-0","first:tw-rounded-l"])}}o.ɵfac=function(e){return new(e||o)},o.ɵdir=i["ɵɵdefineDirective"]({type:o,selectors:[["","bitPrefix",""]],hostVars:2,hostBindings:function(e,t){2&e&&i["ɵɵclassMap"](t.classList)},inputs:{classList:"classList"}})},1e4:(e,t,n)=>{"use strict";n.d(t,{e:()=>o});var i=n(57139),r=n(53857);class o{get classList(){return i.w.concat(["tw-border-l-0","last:tw-rounded-r"])}}o.ɵfac=function(e){return new(e||o)},o.ɵdir=r["ɵɵdefineDirective"]({type:o,selectors:[["","bitSuffix",""]],hostVars:2,hostBindings:function(e,t){2&e&&r["ɵɵclassMap"](t.classList)},inputs:{classList:"classList"}})},1791:(e,t,n)=>{"use strict";n.d(t,{TX:()=>o,hJ:()=>p,df:()=>u,kx:()=>y,$9:()=>b,oc:()=>w});n(66385);var i=n(52187),r=n(53857);class o{}function a(e,t){if(1&e&&r["ɵɵelement"](0,"i",5),2&e){const e=r["ɵɵnextContext"]();r["ɵɵproperty"]("ngClass",e.icon)}}function s(e,t){1&e&&r["ɵɵelement"](0,"i",6)}o.ɵfac=function(e){return new(e||o)},o.ɵmod=r["ɵɵdefineNgModule"]({type:o}),o.ɵinj=r["ɵɵdefineInjector"]({imports:[[i.CommonModule]]});const l={premium:"bwi-star",info:"bwi-info-circle",warning:"bwi-exclamation-triangle",danger:"bwi-error"};class d{constructor(){this.bannerType="info",this.useAlertRole=!0,this.onClose=new r.EventEmitter}ngOnInit(){var e;null!==(e=this.icon)&&void 0!==e||(this.icon=l[this.bannerType])}get bannerClass(){switch(this.bannerType){case"danger":return"tw-bg-danger-500";case"info":return"tw-bg-info-500";case"premium":return"tw-bg-success-500";case"warning":return"tw-bg-warning-500"}}}d.ɵfac=function(e){return new(e||d)},d.ɵcmp=r["ɵɵdefineComponent"]({type:d,selectors:[["bit-banner"]],inputs:{bannerType:"bannerType",icon:"icon",useAlertRole:"useAlertRole"},outputs:{onClose:"onClose"},ngContentSelectors:["*"],decls:15,vars:5,consts:[[1,"tw-py-2.5","tw-px-4","tw-text-contrast","tw-flex","tw-gap-2","tw-items-center",3,"ngClass"],["class","bwi tw-align-middle","aria-hidden","true",3,"ngClass",4,"ngIf"],[1,"tw-text-base","tw-grow"],[1,"tw-border-0","tw-bg-transparent","tw-text-contrast","tw-p-0",3,"click"],["class","bwi bwi-close tw-text-sm","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"bwi","tw-align-middle",3,"ngClass"],["aria-hidden","true",1,"bwi","bwi-close","tw-text-sm"]],template:function(e,t){1&e&&(r["ɵɵprojectionDef"](),r["ɵɵelementStart"](0,"div",0),r["ɵɵtext"](1,"\n  "),r["ɵɵtemplate"](2,a,1,1,"i",1),r["ɵɵtext"](3,"\n  "),r["ɵɵelementStart"](4,"span",2),r["ɵɵtext"](5,"\n    "),r["ɵɵprojection"](6),r["ɵɵtext"](7,"\n  "),r["ɵɵelementEnd"](),r["ɵɵtext"](8,"\n  "),r["ɵɵelementStart"](9,"button",3),r["ɵɵlistener"]("click",(function(){return t.onClose.emit()})),r["ɵɵtext"](10,"\n    "),r["ɵɵtemplate"](11,s,1,0,"i",4),r["ɵɵtext"](12,"\n  "),r["ɵɵelementEnd"](),r["ɵɵtext"](13,"\n"),r["ɵɵelementEnd"](),r["ɵɵtext"](14,"\n")),2&e&&(r["ɵɵproperty"]("ngClass",t.bannerClass),r["ɵɵattribute"]("role",t.useAlertRole?"status":null)("aria-live",t.useAlertRole?"polite":null),r["ɵɵadvance"](2),r["ɵɵproperty"]("ngIf",t.icon),r["ɵɵadvance"](9),r["ɵɵproperty"]("ngIf",t.icon))},directives:[i.NgClass,i.NgIf],encapsulation:2});class c{}c.ɵfac=function(e){return new(e||c)},c.ɵmod=r["ɵɵdefineNgModule"]({type:c}),c.ɵinj=r["ɵɵdefineInjector"]({imports:[[i.CommonModule]]});n(64707);class p{}p.ɵfac=function(e){return new(e||p)},p.ɵmod=r["ɵɵdefineNgModule"]({type:p}),p.ɵinj=r["ɵɵdefineInjector"]({imports:[[i.CommonModule]]});class u{}u.ɵfac=function(e){return new(e||u)},u.ɵmod=r["ɵɵdefineNgModule"]({type:u}),u.ɵinj=r["ɵɵdefineInjector"]({imports:[[i.CommonModule]]});n(24083);class m{}m.ɵfac=function(e){return new(e||m)},m.ɵmod=r["ɵɵdefineNgModule"]({type:m}),m.ɵinj=r["ɵɵdefineInjector"]({imports:[[i.CommonModule]]});var h=n(16048),v=n(5991),g=n(21509),f=n(94820);class x{constructor(e){this.i18nService=e}transform(e,t,n,i){return this.i18nService.t(e,t,n,i)}}x.ɵfac=function(e){return new(e||x)(r["ɵɵdirectiveInject"](f.D,16))},x.ɵpipe=r["ɵɵdefinePipe"]({name:"i18n",type:x,pure:!0});class y{}y.ɵfac=function(e){return new(e||y)},y.ɵmod=r["ɵɵdefineNgModule"]({type:y}),y.ɵinj=r["ɵɵdefineInjector"]({imports:[[i.CommonModule,m]]}),r["ɵɵsetComponentScope"](h.P,[i.NgIf],[x]),r["ɵɵsetComponentScope"](g.d,[i.NgIf,i.NgSwitch,i.NgSwitchCase,v.h],[x]);var S=n(52781);class b{}b.ɵfac=function(e){return new(e||b)},b.ɵmod=r["ɵɵdefineNgModule"]({type:b}),b.ɵinj=r["ɵɵdefineInjector"]({imports:[[i.CommonModule,S.OverlayModule]]});n(73974),n(26194),n(44234),n(91849);class w{}w.ɵfac=function(e){return new(e||w)},w.ɵmod=r["ɵɵdefineNgModule"]({type:w}),w.ɵinj=r["ɵɵdefineInjector"]({imports:[[i.CommonModule,p]]})},11512:(e,t,n)=>{"use strict";n.d(t,{G:()=>a});var i=n(68405),r=n(53857);let o=0;class a{constructor(e){this.ngControl=e,this.id="bit-input-"+o++,this.hasPrefix=!1,this.hasSuffix=!1}get classList(){return["tw-block","tw-w-full","tw-px-3","tw-py-1.5","tw-bg-background-alt","tw-border","tw-border-solid",this.hasError?"tw-border-danger-500":"tw-border-secondary-500","tw-text-main","tw-placeholder-text-muted","tw-rounded-none","first:tw-rounded-l","last:tw-rounded-r","focus:tw-outline-none","focus:tw-border-primary-700","focus:tw-ring-1","focus:tw-ring-primary-700","focus:tw-z-10","disabled:tw-bg-secondary-100"].filter((e=>""!=e))}get ariaInvalid(){return!!this.hasError||void 0}get required(){var e,t,n,r;return null!==(r=null!==(e=this._required)&&void 0!==e?e:null===(n=null===(t=this.ngControl)||void 0===t?void 0:t.control)||void 0===n?void 0:n.hasValidator(i.Validators.required))&&void 0!==r&&r}set required(e){this._required=null!=e&&!1!==e}get hasError(){var e,t;return"INVALID"===(null===(e=this.ngControl)||void 0===e?void 0:e.status)&&(null===(t=this.ngControl)||void 0===t?void 0:t.touched)}get error(){const e=Object.keys(this.ngControl.errors)[0];return[e,this.ngControl.errors[e]]}}a.ɵfac=function(e){return new(e||a)(r["ɵɵdirectiveInject"](i.NgControl,10))},a.ɵdir=r["ɵɵdefineDirective"]({type:a,selectors:[["input","bitInput",""],["select","bitInput",""],["textarea","bitInput",""]],hostVars:6,hostBindings:function(e,t){2&e&&(r["ɵɵhostProperty"]("id",t.id)("required",t.required),r["ɵɵattribute"]("aria-describedby",t.ariaDescribedBy)("aria-invalid",t.ariaInvalid),r["ɵɵclassMap"](t.classList))},inputs:{classList:"classList",required:"required",hasPrefix:"hasPrefix",hasSuffix:"hasSuffix"}})},91849:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var i=n(53857);class r{}r.ɵfac=function(e){return new(e||r)},r.ɵcmp=i["ɵɵdefineComponent"]({type:r,selectors:[["bit-menu-divider"]],decls:2,vars:0,consts:[["role","separator",1,"tw-border-solid","tw-border-0","tw-border-t","tw-border-t-secondary-500","tw-my-2"]],template:function(e,t){1&e&&(i["ɵɵelement"](0,"div",0),i["ɵɵtext"](1,"\n"))},encapsulation:2})},44234:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});var i=n(53857);class r{constructor(e){this.elementRef=e,this.classList=["tw-block","tw-py-1","tw-px-4","!tw-text-main","!tw-no-underline","tw-cursor-pointer","tw-border-none","tw-bg-background","tw-text-left","hover:tw-bg-secondary-100","focus:tw-bg-secondary-100","focus:tw-z-50","focus:tw-outline-none","focus:tw-ring","focus:tw-ring-offset-2","focus:tw-ring-primary-700","active:!tw-ring-0","active:!tw-ring-offset-0"],this.role="menuitem",this.tabIndex="-1"}focus(){this.elementRef.nativeElement.focus()}}r.ɵfac=function(e){return new(e||r)(i["ɵɵdirectiveInject"](i.ElementRef))},r.ɵdir=i["ɵɵdefineDirective"]({type:r,selectors:[["","bitMenuItem",""]],hostVars:4,hostBindings:function(e,t){2&e&&(i["ɵɵhostProperty"]("tabIndex",t.tabIndex),i["ɵɵattribute"]("role",t.role),i["ɵɵclassMap"](t.classList))}})},26194:(e,t,n)=>{"use strict";n.d(t,{t:()=>l});var i=n(89124),r=n(99054),o=n(62499),a=(n(73974),n(53857)),s=n(52781);class l{constructor(e,t,n){this.elementRef=e,this.viewContainerRef=t,this.overlay=n,this.isOpen=!1,this.hasPopup="menu",this.role="button",this.defaultMenuConfig={panelClass:"bit-menu-panel",hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop",scrollStrategy:this.overlay.scrollStrategies.reposition(),positionStrategy:this.overlay.position().flexibleConnectedTo(this.elementRef).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}]).withLockedPosition(!0).withFlexibleDimensions(!1).withPush(!1)}}toggleMenu(){this.isOpen?this.destroyMenu():this.openMenu()}ngOnDestroy(){this.disposeAll()}openMenu(){if(null==this.menu)throw new Error("Cannot find bit-menu element");this.isOpen=!0,this.overlayRef=this.overlay.create(this.defaultMenuConfig);const e=new i.TemplatePortal(this.menu.templateRef,this.viewContainerRef);this.overlayRef.attach(e),this.closedEventsSub=this.getClosedEvents().subscribe((e=>{"Tab"===(null==e?void 0:e.key)&&this.elementRef.nativeElement.focus(),this.destroyMenu()})),this.keyDownEventsSub=this.overlayRef.keydownEvents().subscribe((e=>this.menu.keyManager.onKeydown(e)))}destroyMenu(){null!=this.overlayRef&&this.isOpen&&(this.isOpen=!1,this.disposeAll())}getClosedEvents(){const e=this.overlayRef.detachments(),t=this.overlayRef.keydownEvents().pipe((0,r.h)((e=>"Escape"===e.key||"Tab"===e.key))),n=this.overlayRef.backdropClick(),i=this.menu.closed;return e.pipe((0,o.b)(t,n,i))}disposeAll(){var e,t,n;null===(e=this.closedEventsSub)||void 0===e||e.unsubscribe(),null===(t=this.overlayRef)||void 0===t||t.dispose(),null===(n=this.keyDownEventsSub)||void 0===n||n.unsubscribe()}}l.ɵfac=function(e){return new(e||l)(a["ɵɵdirectiveInject"](a.ElementRef),a["ɵɵdirectiveInject"](a.ViewContainerRef),a["ɵɵdirectiveInject"](s.Overlay))},l.ɵdir=a["ɵɵdefineDirective"]({type:l,selectors:[["","bitMenuTriggerFor",""]],hostVars:3,hostBindings:function(e,t){1&e&&a["ɵɵlistener"]("click",(function(){return t.toggleMenu()})),2&e&&a["ɵɵattribute"]("aria-expanded",t.isOpen)("aria-haspopup",t.hasPopup)("role",t.role)},inputs:{menu:["bitMenuTriggerFor","menu"]}})},73974:(e,t,n)=>{"use strict";n.d(t,{M:()=>s});var i=n(91504),r=n(53857),o=n(44234);function a(e,t){if(1&e){const e=r["ɵɵgetCurrentView"]();r["ɵɵtext"](0,"\n  "),r["ɵɵelementStart"](1,"div",0),r["ɵɵlistener"]("click",(function(){r["ɵɵrestoreView"](e);return r["ɵɵnextContext"]().closed.emit()})),r["ɵɵtext"](2,"\n    "),r["ɵɵprojection"](3),r["ɵɵtext"](4,"\n  "),r["ɵɵelementEnd"](),r["ɵɵtext"](5,"\n")}}class s{constructor(){this.closed=new r.EventEmitter}ngAfterContentInit(){this.keyManager=new i.FocusKeyManager(this.menuItems).withWrap()}}s.ɵfac=function(e){return new(e||s)},s.ɵcmp=r["ɵɵdefineComponent"]({type:s,selectors:[["bit-menu"]],contentQueries:function(e,t,n){if(1&e&&r["ɵɵcontentQuery"](n,o.e,5),2&e){let e;r["ɵɵqueryRefresh"](e=r["ɵɵloadQuery"]())&&(t.menuItems=e)}},viewQuery:function(e,t){if(1&e&&r["ɵɵviewQuery"](r.TemplateRef,5),2&e){let e;r["ɵɵqueryRefresh"](e=r["ɵɵloadQuery"]())&&(t.templateRef=e.first)}},outputs:{closed:"closed"},exportAs:["menuComponent"],ngContentSelectors:["*"],decls:2,vars:0,consts:[["role","menu",1,"tw-flex","tw-flex-col","tw-bg-background","tw-border","tw-border-solid","tw-rounded","tw-border-secondary-500","tw-bg-clip-padding","tw-py-2","tw-shrink-0",3,"click"]],template:function(e,t){1&e&&(r["ɵɵprojectionDef"](),r["ɵɵtemplate"](0,a,6,0,"ng-template"),r["ɵɵtext"](1,"\n"))},encapsulation:2})},21834:(e,t,n)=>{"use strict";n.r(t)},67234:(e,t,n)=>{"use strict";n.r(t)},95942:()=>{},74854:()=>{},66602:()=>{}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={id:e,loaded:!1,exports:{}};return i[e].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=i,e=[],o.O=(t,n,i,r)=>{if(!n){var a=1/0;for(c=0;c<e.length;c++){for(var[n,i,r]=e[c],s=!0,l=0;l<n.length;l++)(!1&r||a>=r)&&Object.keys(o.O).every((e=>o.O[e](n[l])))?n.splice(l--,1):(s=!1,r<a&&(a=r));if(s){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,i,r]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,n)=>(o.f[n](e,t),t)),[])),o.u=e=>e+"."+{182:"a4b4dc319a28843eacc1",297:"12b6e0f2db176909badd",754:"440ad69c7d0bed00de9f",929:"434c490b8b1612e90684"}[e]+".js",o.miniCssF=e=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},n="@bitwarden/web-vault:",o.l=(e,i,r,a)=>{if(t[e])t[e].push(i);else{var s,l;if(void 0!==r)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var p=d[c];if(p.getAttribute("src")==e||p.getAttribute("data-webpack")==n+r){s=p;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",n+r),s.src=e),t[e]=[i];var u=(n,i)=>{s.onerror=s.onload=null,clearTimeout(m);var r=t[e];if(delete t[e],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(i))),n)return n(i)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),l&&document.head.appendChild(s)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e+"../"})(),(()=>{var e={148:0};o.f.j=(t,n)=>{var i=o.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise(((n,r)=>i=e[t]=[n,r]));n.push(i[2]=r);var a=o.p+o.u(t),s=new Error;o.l(a,(n=>{if(o.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",s.name="ChunkLoadError",s.type=r,s.request=a,i[1](s)}}),"chunk-"+t,t)}},o.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[a,s,l]=n,d=0;if(a.some((t=>0!==e[t]))){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(l)var c=l(o)}for(t&&t(n);d<a.length;d++)r=a[d],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(c)},n=self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=o.O(void 0,[734],(()=>o(74965)));a=o.O(a)})();
//# sourceMappingURL=main.e33660477a90e76b86b4.js.map