import { Meta, Story, Canvas, Primary, Controls, Source } from "@storybook/addon-docs";

import * as stories from "./i18n.stories";

<Meta of={stories} />

# I18n with Template Wrapping

The `<bit-i18n>` component is an alternative to the `i18n` pipe that supports template wrapping. It
supports wrapping developer defined tags around parts the translated text. It allows translators to
translate the original text more accurately and so that it still follows the grammar rules of the
target language.

The templating syntax uses numeric marker tags `<0></0>` around text that will be wrapped. The
marker tags should numbered sequentially starting from 0. The marker tags are then matched and
replaced by the `*bit-i18n-tag` directives in the order they appear in the template.

If a corresponding `*bit-i18n-tag` directive is not found for a marker tag, the marker tag's content
will be rendered as is.

## Basic Example

<Story of={stories.Basic} />

<br />

### Source

```html
<!-- basicExample in messages.json
    "This is an example with <0>link</0> tags and <1>bold</1> tags.
    The entire sentence can be <2>translated as a whole</2> and re-arranged according to each language's grammar rules."
-->
<bit-i18n key="basicExample">
  <!-- <0></0> -->
  <a *bit-i18n-tag="let text" routerLink="./">{{ text }}</a>
  <!-- <1></1> -->
  <strong *bit-i18n-tag="let text">{{ text }}</strong>
  <!-- <2></2> -->
  <a *bit-i18n-tag="let text" href="#">
    <strong>{{ text }}</strong>
  </a>
</bit-i18n>
```

## Attribute Selector Example

You can also use the `bit-i18n` as an attribute to avoid creating an extra element in the DOM.

<Story of={stories.AttributeSelector} />

<br />

### Source

```html
<!-- otherExample in messages.json
    "This is another example with <1>bold</1> tags to show that tag order does not matter and the <0>link</0> tags are after."
-->
<p bit-i18n key="otherExample">
  <a *bit-i18n-tag="let text" href="#">{{ text }}</a>
  <strong *bit-i18n-tag="let text">{{ text }}</strong>
</p>
```

## Missing Template Example

If there are not enough `*bit-i18n-tag` directives to match the marker tags, the marker tags will be
rendered as is.

<Story of={stories.MissingTemplate} />

<br />

### Source

```html
<!-- basicExample in messages.json
   "This is an example with <0>link</0> tags and <1>bold</1> tags.
   The entire sentence can be <2>translated as a whole</2> and re-arranged according to each language's grammar rules."
-->
<bit-i18n key="basicExample">
  <!-- <0></0> -->
  <a *bit-i18n-tag="let text" routerLink="./">{{ text }}</a>
  <!-- <1></1> -->
  <strong *bit-i18n-tag="let text">{{ text }}</strong>
  <!-- Missing template for <2></2> -->
</bit-i18n>
```

## Missing Template Example

You can also pass arguments to the `i18nService.t()` method via the `[args]` input attribute;

<Story of={stories.ArgsExample} />

<br />

### Source

```html
<!-- argExample in messages.json
   `This is an example with <0>link</0> tags and $SOME_ARG$.`
-->
<bit-i18n key="argExample" [args]="['passed args']">
  <!-- <0></0> -->
  <a *bit-i18n-tag="let text" routerLink="./">{{ text }}</a>
</bit-i18n>
```
