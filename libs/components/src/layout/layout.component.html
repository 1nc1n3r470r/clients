<ng-container *ngIf="{ open: layoutService.open$ | async } as data">
  <div class="tw-flex tw-w-full tw-max-w-screen">
    <nav
      class="tw-fixed tw-z-20 tw-flex tw-max-h-screen tw-min-h-screen tw-flex-col tw-overflow-auto tw-bg-background-alt3"
    >
      <ng-content select="[slot=side-nav]"></ng-content>
      <bit-nav-item
        class="tw-mt-auto"
        [icon]="data.open ? 'bwi-angle-left' : 'bwi-angle-right'"
        (mainContentClicked)="layoutService.toggleExpanded()"
      ></bit-nav-item>
      <div
        *ngIf="!data.open"
        class="tw-absolute tw-h-full tw-w-full tw-cursor-pointer"
        (click)="layoutService.toggleExpanded()"
      ></div>
    </nav>
    <main
      class="tw-ml-14 tw-min-h-screen tw-min-w-0 tw-flex-1 tw-p-6 motion-safe:tw-transition-all"
      [ngClass]="
        data.open
          ? 'tw-pointer-events-none md:tw-pointer-events-auto md:tw-ml-60'
          : 'tw-pointer-events-auto md:tw-ml-14'
      "
    >
      <ng-content></ng-content>
    </main>
    <div
      class="tw-pointer-events-none tw-fixed tw-inset-0 tw-z-10 tw-bg-black tw-bg-opacity-30 motion-safe:tw-transition-colors md:tw-hidden"
      [ngClass]="[data.open ? 'tw-bg-opacity-30 md:tw-bg-opacity-0' : 'tw-bg-opacity-0']"
    >
      <div
        *ngIf="data.open"
        (click)="layoutService.toggleExpanded()"
        class="tw-pointer-events-auto tw-h-full tw-w-full"
      ></div>
    </div>
  </div>
</ng-container>
